(function(){var Un,Co,Yr,Cr,Zn,ht,En,ze,Ut,Jn,lr,Zt,Eo,cs,Bi,Gn,Sn,xr,Fn,un,Qn,Zi,Er,dn,Rn,_e,Dn,me,Kt,Pr,_r,ro,Nn,ar,rn,Mt,tr,xt,on,Jo,Ao,hr,pe,Dr,je,gi,Es,sr,zi=[].slice,ds={}.hasOwnProperty,ia=function(ut,dt){function Pt(){this.constructor=ut}for(var qt in dt)ds.call(dt,qt)&&(ut[qt]=dt[qt]);return Pt.prototype=dt.prototype,ut.prototype=new Pt,ut.__super__=dt.prototype,ut},Ps=[].indexOf||function(ut){for(var dt=0,Pt=this.length;Pt>dt;dt++)if(dt in this&&this[dt]===ut)return dt;return-1};for(Qn={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},Kt=function(){var ut;return null!=(ut="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?ut:+new Date},_r=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,un=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==_r&&(_r=function(ut){return setTimeout(ut,50)},un=function(ut){return clearTimeout(ut)}),Nn=function(ut){var dt,Pt;return dt=Kt(),(Pt=function(){var qt;return(qt=Kt()-dt)>=33?(dt=Kt(),ut(qt,function(){return _r(Pt)})):setTimeout(Pt,33-qt)})()},ro=function(){var ut,dt,Pt;return Pt=arguments[0],dt=arguments[1],ut=3<=arguments.length?zi.call(arguments,2):[],"function"==typeof Pt[dt]?Pt[dt].apply(Pt,ut):Pt[dt]},Zi=function(){var ut,dt,Pt,qt,Cn,hn,St;for(dt=arguments[0],hn=0,St=(qt=2<=arguments.length?zi.call(arguments,1):[]).length;St>hn;hn++)if(Pt=qt[hn])for(ut in Pt)ds.call(Pt,ut)&&(Cn=Pt[ut],null!=dt[ut]&&"object"==typeof dt[ut]&&null!=Cn&&"object"==typeof Cn?Zi(dt[ut],Cn):dt[ut]=Cn);return dt},Sn=function(ut){var dt,Pt,Cn,hn;for(Pt=dt=0,Cn=0,hn=ut.length;hn>Cn;Cn++)Pt+=Math.abs(ut[Cn]),dt++;return Pt/dt},dn=function(ut,dt){var Pt,Cn;if(null==ut&&(ut="options"),null==dt&&(dt=!0),Cn=document.querySelector("[data-pace-"+ut+"]")){if(Pt=Cn.getAttribute("data-pace-"+ut),!dt)return Pt;try{return JSON.parse(Pt)}catch(hn){return"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",hn):void 0}}},En=function(){function ut(){}return ut.prototype.on=function(dt,Pt,qt,Cn){var hn;return null==Cn&&(Cn=!1),null==this.bindings&&(this.bindings={}),null==(hn=this.bindings)[dt]&&(hn[dt]=[]),this.bindings[dt].push({handler:Pt,ctx:qt,once:Cn})},ut.prototype.once=function(dt,Pt,qt){return this.on(dt,Pt,qt,!0)},ut.prototype.off=function(dt,Pt){var qt,Cn,hn;if(null!=(null!=(Cn=this.bindings)?Cn[dt]:void 0)){if(null==Pt)return delete this.bindings[dt];for(qt=0,hn=[];qt<this.bindings[dt].length;)hn.push(this.bindings[dt][qt].handler===Pt?this.bindings[dt].splice(qt,1):qt++);return hn}},ut.prototype.trigger=function(){var dt,Pt,qt,hn,St,Lr,Vn,po;if(qt=arguments[0],dt=2<=arguments.length?zi.call(arguments,1):[],null!=(Lr=this.bindings)?Lr[qt]:void 0){for(hn=0,po=[];hn<this.bindings[qt].length;)St=(Vn=this.bindings[qt][hn]).once,Vn.handler.apply(null!=(Pt=Vn.ctx)?Pt:this,dt),po.push(St?this.bindings[qt].splice(hn,1):hn++);return po}},ut}(),Jn=window.Pace||{},window.Pace=Jn,Zi(Jn,En.prototype),Pr=Jn.options=Zi({},Qn,window.paceOptions,dn()),pe=0,je=(Es=["ajax","document","eventLag","elements"]).length;je>pe;pe++)!0===Pr[tr=Es[pe]]&&(Pr[tr]=Qn[tr]);Ut=function(ut){function dt(){return dt.__super__.constructor.apply(this,arguments)}return ia(dt,ut),dt}(Error),Co=function(){function ut(){this.progress=0}return ut.prototype.getElement=function(){var dt;if(null==this.el){if(!(dt=document.querySelector(Pr.target)))throw new Ut;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=dt.firstChild?dt.insertBefore(this.el,dt.firstChild):dt.appendChild(this.el)}return this.el},ut.prototype.finish=function(){var dt;return(dt=this.getElement()).className=dt.className.replace("pace-active",""),dt.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},ut.prototype.update=function(dt){return this.progress=dt,this.render()},ut.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(dt){Ut=dt}return this.el=void 0},ut.prototype.render=function(){var dt,qt,Cn,hn,St,Lr;if(null==document.querySelector(Pr.target))return!1;for(dt=this.getElement(),Cn="translate3d("+this.progress+"%, 0, 0)",hn=0,St=(Lr=["webkitTransform","msTransform","transform"]).length;St>hn;hn++)dt.children[0].style[Lr[hn]]=Cn;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(dt.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?qt="99":(qt=this.progress<10?"0":"",qt+=0|this.progress),dt.children[0].setAttribute("data-progress",""+qt)),this.lastRenderedProgress=this.progress},ut.prototype.done=function(){return this.progress>=100},ut}(),ze=function(){function ut(){this.bindings={}}return ut.prototype.trigger=function(dt,Pt){var Cn,hn,St,Lr;if(null!=this.bindings[dt]){for(Lr=[],Cn=0,hn=(St=this.bindings[dt]).length;hn>Cn;Cn++)Lr.push(St[Cn].call(this,Pt));return Lr}},ut.prototype.on=function(dt,Pt){var qt;return null==(qt=this.bindings)[dt]&&(qt[dt]=[]),this.bindings[dt].push(Pt)},ut}(),hr=window.XMLHttpRequest,Ao=window.XDomainRequest,Jo=window.WebSocket,Er=function(ut,dt){var qt,Cn;for(qt in Cn=[],dt.prototype)try{Cn.push(null==ut[qt]&&"function"!=typeof dt[qt]?"function"==typeof Object.defineProperty?Object.defineProperty(ut,qt,{get:function(){return dt.prototype[qt]},configurable:!0,enumerable:!0}):ut[qt]=dt.prototype[qt]:void 0)}catch(hn){}return Cn},Dn=[],Jn.ignore=function(){var ut,dt,Pt;return dt=arguments[0],ut=2<=arguments.length?zi.call(arguments,1):[],Dn.unshift("ignore"),Pt=dt.apply(null,ut),Dn.shift(),Pt},Jn.track=function(){var ut,dt,Pt;return dt=arguments[0],ut=2<=arguments.length?zi.call(arguments,1):[],Dn.unshift("track"),Pt=dt.apply(null,ut),Dn.shift(),Pt},Mt=function(ut){var dt;return null==ut&&(ut="GET"),"track"===Dn[0]?"force":!(Dn.length||!Pr.ajax||!("socket"===ut&&Pr.ajax.trackWebSockets||(dt=ut.toUpperCase(),Ps.call(Pr.ajax.trackMethods,dt)>=0)))},lr=function(ut){function dt(){var Pt,qt=this;dt.__super__.constructor.apply(this,arguments),Pt=function(Cn){var hn;return hn=Cn.open,Cn.open=function(St,Lr,Vn){return Mt(St)&&qt.trigger("request",{type:St,url:Lr,request:Cn}),hn.apply(Cn,arguments)}},window.XMLHttpRequest=function(Cn){var hn;return hn=new hr(Cn),Pt(hn),hn};try{Er(window.XMLHttpRequest,hr)}catch(Cn){}if(null!=Ao){window.XDomainRequest=function(){var Cn;return Cn=new Ao,Pt(Cn),Cn};try{Er(window.XDomainRequest,Ao)}catch(Cn){}}if(null!=Jo&&Pr.ajax.trackWebSockets){window.WebSocket=function(Cn,hn){var St;return St=null!=hn?new Jo(Cn,hn):new Jo(Cn),Mt("socket")&&qt.trigger("request",{type:"socket",url:Cn,protocols:hn,request:St}),St};try{Er(window.WebSocket,Jo)}catch(Cn){}}}return ia(dt,ut),dt}(ze),Dr=null,rn=function(ut){var dt,Pt,qt,Cn;for(Pt=0,qt=(Cn=Pr.ajax.ignoreURLs).length;qt>Pt;Pt++)if("string"==typeof(dt=Cn[Pt])){if(-1!==ut.indexOf(dt))return!0}else if(dt.test(ut))return!0;return!1},(Rn=function(){return null==Dr&&(Dr=new lr),Dr})().on("request",function(ut){var dt,Pt,qt,Cn;return Cn=ut.type,qt=ut.request,rn(ut.url)||Jn.running||!1===Pr.restartOnRequestAfter&&"force"!==Mt(Cn)?void 0:(Pt=arguments,"boolean"==typeof(dt=Pr.restartOnRequestAfter||0)&&(dt=0),setTimeout(function(){var Lr,Vn,po,si,mi;if("socket"===Cn?qt.readyState<2:0<(po=qt.readyState)&&4>po){for(Jn.restart(),mi=[],Lr=0,Vn=(si=Jn.sources).length;Vn>Lr;Lr++){if((tr=si[Lr])instanceof Un){tr.watch.apply(tr,Pt);break}mi.push(void 0)}return mi}},dt))}),Un=function(){function ut(){var dt=this;this.elements=[],Rn().on("request",function(){return dt.watch.apply(dt,arguments)})}return ut.prototype.watch=function(dt){var Pt,qt,Cn;return Cn=dt.type,Pt=dt.request,rn(dt.url)?void 0:(qt="socket"===Cn?new cs(Pt):new Bi(Pt),this.elements.push(qt))},ut}(),Bi=function(dt){var Cn,hn,St,Lr,Vn=this;if(this.progress=0,null!=window.ProgressEvent)for(dt.addEventListener("progress",function(po){return Vn.progress=po.lengthComputable?100*po.loaded/po.total:Vn.progress+(100-Vn.progress)/2},!1),Cn=0,hn=(Lr=["load","abort","timeout","error"]).length;hn>Cn;Cn++)dt.addEventListener(Lr[Cn],function(){return Vn.progress=100},!1);else St=dt.onreadystatechange,dt.onreadystatechange=function(){var po;return 0===(po=dt.readyState)||4===po?Vn.progress=100:3===dt.readyState&&(Vn.progress=50),"function"==typeof St?St.apply(null,arguments):void 0}},cs=function(dt){var qt,Cn,hn,St=this;for(this.progress=0,qt=0,Cn=(hn=["error","open"]).length;Cn>qt;qt++)dt.addEventListener(hn[qt],function(){return St.progress=100},!1)},Cr=function(dt){var qt,Cn,hn;for(null==dt&&(dt={}),this.elements=[],null==dt.selectors&&(dt.selectors=[]),qt=0,Cn=(hn=dt.selectors).length;Cn>qt;qt++)this.elements.push(new Zn(hn[qt]))},Zn=function(){function ut(dt){this.selector=dt,this.progress=0,this.check()}return ut.prototype.check=function(){var dt=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return dt.check()},Pr.elements.checkInterval)},ut.prototype.done=function(){return this.progress=100},ut}(),Yr=function(){function ut(){var dt,Pt,qt=this;this.progress=null!=(Pt=this.states[document.readyState])?Pt:100,dt=document.onreadystatechange,document.onreadystatechange=function(){return null!=qt.states[document.readyState]&&(qt.progress=qt.states[document.readyState]),"function"==typeof dt?dt.apply(null,arguments):void 0}}return ut.prototype.states={loading:0,interactive:50,complete:100},ut}(),ht=function(){var dt,Pt,qt,Cn,hn,St=this;this.progress=0,dt=0,hn=[],Cn=0,qt=Kt(),Pt=setInterval(function(){var Lr;return Lr=Kt()-qt-50,qt=Kt(),hn.push(Lr),hn.length>Pr.eventLag.sampleCount&&hn.shift(),dt=Sn(hn),++Cn>=Pr.eventLag.minSamples&&dt<Pr.eventLag.lagThreshold?(St.progress=100,clearInterval(Pt)):St.progress=3/(dt+3)*100},50)},Eo=function(){function ut(dt){this.source=dt,this.last=this.sinceLastUpdate=0,this.rate=Pr.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=ro(this.source,"progress"))}return ut.prototype.tick=function(dt,Pt){var qt;return null==Pt&&(Pt=ro(this.source,"progress")),Pt>=100&&(this.done=!0),Pt===this.last?this.sinceLastUpdate+=dt:(this.sinceLastUpdate&&(this.rate=(Pt-this.last)/this.sinceLastUpdate),this.catchup=(Pt-this.progress)/Pr.catchupTime,this.sinceLastUpdate=0,this.last=Pt),Pt>this.progress&&(this.progress+=this.catchup*dt),qt=1-Math.pow(this.progress/100,Pr.easeFactor),this.progress+=qt*this.rate*dt,this.progress=Math.min(this.lastProgress+Pr.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},ut}(),xt=null,ar=null,xr=null,on=null,Gn=null,Fn=null,Jn.running=!1,_e=function(){return Pr.restartOnPushState?Jn.restart():void 0},null!=window.history.pushState&&(gi=window.history.pushState,window.history.pushState=function(){return _e(),gi.apply(window.history,arguments)}),null!=window.history.replaceState&&(sr=window.history.replaceState,window.history.replaceState=function(){return _e(),sr.apply(window.history,arguments)}),Zt={ajax:Un,elements:Cr,document:Yr,eventLag:ht},(me=function(){var ut,dt,Pt,qt,Cn,hn,St,Lr;for(Jn.sources=xt=[],dt=0,qt=(hn=["ajax","elements","document","eventLag"]).length;qt>dt;dt++)!1!==Pr[ut=hn[dt]]&&xt.push(new Zt[ut](Pr[ut]));for(Pt=0,Cn=(Lr=null!=(St=Pr.extraSources)?St:[]).length;Cn>Pt;Pt++)xt.push(new(tr=Lr[Pt])(Pr));return Jn.bar=xr=new Co,ar=[],on=new Eo})(),Jn.stop=function(){return Jn.trigger("stop"),Jn.running=!1,xr.destroy(),Fn=!0,null!=Gn&&("function"==typeof un&&un(Gn),Gn=null),me()},Jn.restart=function(){return Jn.trigger("restart"),Jn.stop(),Jn.start()},Jn.go=function(){var ut;return Jn.running=!0,xr.render(),ut=Kt(),Fn=!1,Gn=Nn(function(dt,Pt){var Cn,hn,Lr,Vn,po,mi,lo,tl,Fi,Ka,aa,Ja,H;for(Cn=tl=0,hn=!0,Vn=Fi=0,aa=xt.length;aa>Fi;Vn=++Fi)for(tr=xt[Vn],lo=null!=ar[Vn]?ar[Vn]:ar[Vn]=[],po=Ka=0,Ja=(Lr=null!=(H=tr.elements)?H:[tr]).length;Ja>Ka;po=++Ka)hn&=(mi=null!=lo[po]?lo[po]:lo[po]=new Eo(Lr[po])).done,mi.done||(Cn++,tl+=mi.tick(dt));return xr.update(on.tick(dt,tl/Cn)),xr.done()||hn||Fn?(xr.update(100),Jn.trigger("done"),setTimeout(function(){return xr.finish(),Jn.running=!1,Jn.trigger("hide")},Math.max(Pr.ghostTime,Math.max(Pr.minTime-(Kt()-ut),0)))):Pt()})},Jn.start=function(ut){Zi(Pr,ut),Jn.running=!0;try{xr.render()}catch(dt){Ut=dt}return document.querySelector(".pace")?(Jn.trigger("start"),Jn.go()):setTimeout(Jn.start,50)},"function"==typeof define&&define.amd?define(["pace"],function(){return Jn}):"object"==typeof exports?module.exports=Jn:Pr.startOnPageLoad&&Jn.start()}).call(this),function(){"use strict";function Un(a){if(null===a)return"null";if(void 0===a)return"undefined";var d=typeof a;return"object"==d&&(Array.prototype.isPrototypeOf(a)||a.constructor&&"Array"===a.constructor.name)?"array":"object"==d&&(String.prototype.isPrototypeOf(a)||a.constructor&&"String"===a.constructor.name)?"string":d}function Co(a){return Bi(function(d,g){if(d.length!==g.length)return!1;for(var v=d.length,x=0;x<v;x++)if(!a.eq(d[x],g[x]))return!1;return!0})}function Yr(a){return Bi(function(d,g){var x,C,A=Object.keys(d),E=Object.keys(g);if(x=Co(Gn),C=function(V){return Array.prototype.slice.call(V).sort(void 0)},!Bi(function(V,Z){return x.eq(C(V),C(Z))}).eq(A,E))return!1;for(var z=A.length,L=0;L<z;L++){var U=A[L];if(!a.eq(d[U],g[U]))return!1}return!0})}function Cr(a){return function(d){return v=typeof(g=d),(null===g?"null":"object"==v&&(Array.prototype.isPrototypeOf(g)||g.constructor&&"Array"===g.constructor.name)?"array":"object"==v&&(String.prototype.isPrototypeOf(g)||g.constructor&&"String"===g.constructor.name)?"string":v)===a;var g,v}}function Zn(a){return function(d){return typeof d===a}}function ht(a){return function(d){return a===d}}function En(a){return null==a}function ze(a){return!En(a)}function Ut(){}function Jn(a,d){return function(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];return a(d.apply(null,g))}}function lr(a,d){return function(g){return a(d(g))}}function Zt(a){return function(){return a}}function Eo(a){return a}function cs(a,d){return a===d}var Bi=function(a){return{eq:a}},Gn=Bi(function(a,d){return a===d}),Sn=Bi(function(a,d){if(a===d)return!0;var g=Un(a);return g===Un(d)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(g)?a===d:"array"===g?Co(Sn).eq(a,d):"object"===g&&Yr(Sn).eq(a,d))}),xr=Cr("string"),Fn=Cr("object"),un=Cr("array"),Qn=ht(null),Zi=Zn("boolean"),Er=ht(void 0),dn=Zn("function"),Rn=Zn("number");function _e(a){for(var d=[],g=1;g<arguments.length;g++)d[g-1]=arguments[g];return function(){for(var v=[],x=0;x<arguments.length;x++)v[x]=arguments[x];var C=d.concat(v);return a.apply(null,C)}}function Dn(a){return function(d){return!a(d)}}function me(a){return a()}function Kt(a){a()}function Pr(){return Nn}var _r=Zt(!1),ro=Zt(!0),Nn={fold:function(a,d){return a()},isSome:_r,isNone:ro,getOr:Eo,getOrThunk:ar,getOrDie:function(a){throw new Error(a||"error: getOrDie called on none.")},getOrNull:Zt(null),getOrUndefined:Zt(void 0),or:Eo,orThunk:ar,map:Pr,each:Ut,bind:Pr,exists:_r,forall:ro,filter:function(){return Nn},toArray:function(){return[]},toString:Zt("none()")};function ar(a){return a()}function rn(a,d){return hs.call(a,d)}function Mt(a,d){return-1<rn(a,d)}function tr(a,d){for(var g=0,v=a.length;g<v;g++)if(d(a[g],g))return!0;return!1}function xt(a,d){for(var g=a.length,v=new Array(g),x=0;x<g;x++)v[x]=d(a[x],x);return v}function on(a,d){for(var g=0,v=a.length;g<v;g++)d(a[g],g)}function Jo(a,d){for(var g=a.length-1;0<=g;g--)d(a[g],g)}function Ao(a,d){for(var g=[],v=[],x=0,C=a.length;x<C;x++){var A=a[x];(d(A,x)?g:v).push(A)}return{pass:g,fail:v}}function hr(a,d){for(var g=[],v=0,x=a.length;v<x;v++){var C=a[v];d(C,v)&&g.push(C)}return g}function pe(a,d,g){return Jo(a,function(v,x){g=d(g,v,x)}),g}function Dr(a,d,g){return on(a,function(v,x){g=d(g,v,x)}),g}function je(a,d,g){for(var v=0,x=a.length;v<x;v++){var C=a[v];if(d(C,v))return H.some(C);if(g(C,v))break}return H.none()}function gi(a,d){return je(a,d,_r)}function Es(a,d){for(var g=0,v=a.length;g<v;g++)if(d(a[g],g))return H.some(g);return H.none()}function _s(a,d){return function(g){for(var v=[],x=0,C=g.length;x<C;++x){if(!un(g[x]))throw new Error("Arr.flatten item "+x+" was not an array, input: "+g);Pa.apply(v,g[x])}return v}(xt(a,d))}function sr(a,d){for(var g=0,v=a.length;g<v;++g)if(!0!==d(a[g],g))return!1;return!0}function zi(a){var d=fs.call(a,0);return d.reverse(),d}function ds(a,d){return hr(a,function(g){return!Mt(d,g)})}function ia(a,d){var g=fs.call(a,0);return g.sort(d),g}function Ps(a,d){return 0<=d&&d<a.length?H.some(a[d]):H.none()}function ut(a){return Ps(a,0)}function dt(a){return Ps(a,a.length-1)}function Pt(a,d){for(var g=0;g<a.length;g++){var v=d(a[g],g);if(v.isSome())return v}return H.none()}function qt(a,d){for(var g=wn(a),v=0,x=g.length;v<x;v++){var C=g[v];d(a[C],C)}}function Cn(a,d){return ri(a,function(g,v){return{k:v,v:d(g,v)}})}function hn(a){return function(d,g){a[g]=d}}function St(a,d,g,v){return qt(a,function(x,C){(d(x,C)?g:v)(x,C)}),1}function Lr(a,d){var g={};return St(a,d,hn(g),Ut),g}function Vn(a,d){return ao(a,d)?H.from(a[d]):H.none()}function po(a,d){return ao(a,d)&&null!=a[d]}function si(a,d,g){var v,x;if(!a)return!1;if(g=g||a,void 0!==a.length){for(v=0,x=a.length;v<x;v++)if(!1===d.call(g,a[v],v,a))return!1}else for(v in a)if(ao(a,v)&&!1===d.call(g,a[v],v,a))return!1;return!0}function mi(a,d){var g=[];return si(a,function(v,x){g.push(d(v,x,a))}),g}function lo(a,d){var g=[];return si(a,function(v,x){d&&!d(v,x,a)||g.push(v)}),g}function tl(a,d){if(a)for(var g=0,v=a.length;g<v;g++)if(a[g]===d)return g;return-1}function Fi(a,d,g,v){for(var x=Er(g)?a[0]:g,C=0;C<a.length;C++)x=d.call(v,x,a[C],C);return x}function Ka(a,d,g){for(var v=0,x=a.length;v<x;v++)if(d.call(g,a[v],v,a))return v;return-1}function aa(a){return a[a.length-1]}var Ja=function(a){function d(){return x}function g(C){return C(a)}var v=Zt(a),x={fold:function(C,A){return A(a)},isSome:ro,isNone:_r,getOr:v,getOrThunk:v,getOrDie:v,getOrNull:v,getOrUndefined:v,or:d,orThunk:d,map:function(C){return Ja(C(a))},each:function(C){C(a)},bind:g,exists:g,forall:g,filter:function(C){return C(a)?x:Nn},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return x},H={some:Ja,none:Pr,from:function(a){return null==a?Nn:Ja(a)}},fs=Array.prototype.slice,hs=Array.prototype.indexOf,Pa=Array.prototype.push,fi=dn(Array.from)?Array.from:function(a){return fs.call(a)},wn=Object.keys,hu=Object.hasOwnProperty,ri=function(a,d){var g={};return qt(a,function(v,x){var C=d(v,x);g[C.k]=C.v}),g},ao=function(a,d){return hu.call(a,d)},bl=Array.isArray,yn=function(){return(yn=Object.assign||function(a){for(var d,g=1,v=arguments.length;g<v;g++)for(var x in d=arguments[g])Object.prototype.hasOwnProperty.call(d,x)&&(a[x]=d[x]);return a}).apply(this,arguments)};function ot(a,d,g){if(g||2===arguments.length)for(var v,x=0,C=d.length;x<C;x++)!v&&x in d||((v=v||Array.prototype.slice.call(d,0,x))[x]=d[x]);return a.concat(v||Array.prototype.slice.call(d))}function Nt(a){var d,g=!1;return function(){for(var v=[],x=0;x<arguments.length;x++)v[x]=arguments[x];return g||(g=!0,d=a.apply(null,v)),d}}function Me(a,d){var g=String(d).toLowerCase();return gi(a,function(v){return v.search(g)})}function $e(a,d){return-1!==a.indexOf(d)}function Pe(a){return function(d){return d.replace(a,"")}}function mt(a){return 0<a.length}function lt(a){return!mt(a)}function pt(a){return function(d){return $e(d,a)}}function mn(a){return window.matchMedia(a).matches}function Qt(a){return null==a?"":(""+a).replace(Pc,"")}function ln(a,d){return d?!("array"!==d||!bl(a))||typeof a===d:void 0!==a}function kn(a,d){for(var g=[],v=function(C){return g.push(C),d(C)},x=d(a);(x=x.bind(v)).isSome(););return g}function nn(a,d){var g=a.dom;if(1!==g.nodeType)return!1;var v=g;if(void 0!==v.matches)return v.matches(d);if(void 0!==v.msMatchesSelector)return v.msMatchesSelector(d);if(void 0!==v.webkitMatchesSelector)return v.webkitMatchesSelector(d);if(void 0!==v.mozMatchesSelector)return v.mozMatchesSelector(d);throw new Error("Browser lacks native selectors")}function Rt(a){return 1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType||0===a.childElementCount}function $t(a,d){return a.dom===d.dom}function rt(a,d){return $i().browser.isIE()?(x=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(a.dom.compareDocumentPosition(d.dom)&x)):(C=a.dom)!==(A=d.dom)&&C.contains(A);var x,C,A}function vr(){return Jr(0,0)}function yr(a){function d(x){return function(){return g===x}}var g=a.current;return{current:g,version:a.version,isEdge:d("Edge"),isChrome:d("Chrome"),isIE:d("IE"),isOpera:d("Opera"),isFirefox:d(Ha),isSafari:d("Safari")}}function cr(a){function d(x){return function(){return g===x}}var g=a.current;return{current:g,version:a.version,isWindows:d(ui),isiOS:d("iOS"),isAndroid:d(Zs),isOSX:d("OSX"),isLinux:d("Linux"),isSolaris:d(Mo),isFreeBSD:d(Eu),isChromeOS:d(Vl)}}function ur(a){if(null==a)throw new Error("Node cannot be null or undefined");return{dom:a}}var Jr=function(a,d){return{major:a,minor:d}},ko={nu:Jr,detect:function(a,d){var g,v,x=String(d).toLowerCase();return 0===a.length?vr():(v=function(A,E){for(var z=0;z<A.length;z++){var L=A[z];if(L.test(E))return L}}(a,g=x))?Jr(C(1),C(2)):{major:0,minor:0};function C(A){return Number(g.replace(v,"$"+A))}},unknown:vr},dr=function(a,d){return""===(g=d)||a.length>=g.length&&a.substr(0,0+g.length)===g;var g},Qa=Pe(/^\s+|\s+$/g),Wn=Pe(/^\s+/g),Rr=Pe(/\s+$/g),Uo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Va={browsers:Zt([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(a){return $e(a,"edge/")&&$e(a,"chrome")&&$e(a,"safari")&&$e(a,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Uo],search:function(a){return $e(a,"chrome")&&!$e(a,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(a){return $e(a,"msie")||$e(a,"trident")}},{name:"Opera",versionRegexes:[Uo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pt("firefox")},{name:"Safari",versionRegexes:[Uo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(a){return($e(a,"safari")||$e(a,"mobile/"))&&$e(a,"applewebkit")}}]),oses:Zt([{name:"Windows",search:pt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(a){return $e(a,"iphone")||$e(a,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:pt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pt("linux"),versionRegexes:[]},{name:"Solaris",search:pt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},Ha="Firefox",rr=function(){return yr({current:void 0,version:ko.unknown()})},Wi=yr,ui=(Zt("Edge"),Zt("Chrome"),Zt("IE"),Zt("Opera"),Zt(Ha),Zt("Safari"),"Windows"),Zs="Android",Mo="Solaris",Eu="FreeBSD",Vl="ChromeOS",Ar=function(){return cr({current:void 0,version:ko.unknown()})},lc=cr,$i=(Zt(ui),Zt("iOS"),Zt(Zs),Zt("Linux"),Zt("OSX"),Zt(Mo),Zt(Eu),Zt(Vl),Nt(function(){return a=navigator.userAgent,d=H.from(navigator.userAgentData),g=mn,re=Va.browsers(),ie=Va.oses(),{browser:ue=d.bind(function(he){return Ie=re,Pt(he.brands,function(We){var ve=We.brand.toLowerCase();return gi(Ie,function(Se){var Oe;return ve===(null===(Oe=Se.brand)||void 0===Oe?void 0:Oe.toLowerCase())}).map(function(Se){return{current:Se.name,version:ko.nu(parseInt(We.version,10),0)}})});var Ie}).orThunk(function(){return Me(re,he=a).map(function(Ie){var We=ko.detect(Ie.versionRegexes,he);return{current:Ie.name,version:We}});var he}).fold(rr,Wi),os:de=Me(ie,v=a).map(function(he){var Ie=ko.detect(he.versionRegexes,v);return{current:he.name,version:Ie}}).fold(Ar,lc),deviceType:(C=ue,A=a,E=g,z=(x=de).isiOS()&&!0===/ipad/i.test(A),L=x.isiOS()&&!z,V=(U=x.isiOS()||x.isAndroid())||E("(pointer:coarse)"),Z=z||!L&&U&&E("(min-device-width:768px)"),ee=L||U&&!Z,oe=C.isSafari()&&x.isiOS()&&!1===/safari/i.test(A),{isiPad:Zt(z),isiPhone:Zt(L),isTablet:Zt(Z),isPhone:Zt(ee),isTouch:Zt(V),isAndroid:x.isAndroid,isiOS:x.isiOS,isWebView:Zt(oe),isDesktop:Zt(!ee&&!Z&&!oe)})};var a,d,g,v,x,C,A,E,z,L,U,V,Z,ee,oe,re,ie,ue,de})),Wa=navigator.userAgent,Gi=$i(),ji=Gi.browser,co=Gi.os,Qo=Gi.deviceType,Hl=/WebKit/.test(Wa)&&!ji.isEdge(),Ra="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,Ec=-1!==Wa.indexOf("Windows Phone"),wr={opera:ji.isOpera(),webkit:Hl,ie:!(!ji.isIE()&&!ji.isEdge())&&ji.version.major,gecko:ji.isFirefox(),mac:co.isOSX()||co.isiOS(),iOS:Qo.isiPad()||Qo.isiPhone(),android:co.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:ji.isIE()?document.documentMode||7:10,fileApi:Ra,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!ji.isIE(),desktop:Qo.isDesktop(),windowsPhone:Ec,browser:{current:ji.current,version:ji.version,isChrome:ji.isChrome,isEdge:ji.isEdge,isFirefox:ji.isFirefox,isIE:ji.isIE,isOpera:ji.isOpera,isSafari:ji.isSafari},os:{current:co.current,version:co.version,isAndroid:co.isAndroid,isChromeOS:co.isChromeOS,isFreeBSD:co.isFreeBSD,isiOS:co.isiOS,isLinux:co.isLinux,isOSX:co.isOSX,isSolaris:co.isSolaris,isWindows:co.isWindows},deviceType:{isDesktop:Qo.isDesktop,isiPad:Qo.isiPad,isiPhone:Qo.isiPhone,isPhone:Qo.isPhone,isTablet:Qo.isTablet,isTouch:Qo.isTouch,isWebView:Qo.isWebView}},Pc=/^\s*|\s*$/g,ws=function(a,d,g,v){v=v||this,a&&si(a=g?a[g]:a,function(x,C){return!1!==d.call(v,x,C,g)&&void ws(x,d,g,v)})},At={trim:Qt,isArray:bl,is:ln,toArray:function(a){if(bl(a))return a;for(var d=[],g=0,v=a.length;g<v;g++)d[g]=a[g];return d},makeMap:function(a,d,g){var v;for(d=d||",",g=g||{},v=(a="string"==typeof(a=a||[])?a.split(d):a).length;v--;)g[a[v]]={};return g},each:si,map:mi,grep:lo,inArray:tl,hasOwn:ao,extend:function(a){for(var d=[],g=1;g<arguments.length;g++)d[g-1]=arguments[g];for(var v=0;v<d.length;v++){var x,C,A=d[v];for(x in A)!ao(A,x)||void 0!==(C=A[x])&&(a[x]=C)}return a},create:function(a,d,g){var v,x,C,A=this,E=0,z=(a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a))[3].match(/(^|\.)(\w+)$/i)[2],L=A.createNS(a[3].replace(/\.\w+$/,""),g);if(!L[z]){if("static"===a[2])return L[z]=d,void(this.onCreate&&this.onCreate(a[2],a[3],L[z]));d[z]||(d[z]=function(){},E=1),L[z]=d[z],A.extend(L[z].prototype,d),a[5]&&(v=A.resolve(a[5]).prototype,x=a[5].match(/\.(\w+)$/i)[1],C=L[z],L[z]=E?function(){return v[x].apply(this,arguments)}:function(){return this.parent=v[x],C.apply(this,arguments)},L[z].prototype[z]=L[z],A.each(v,function(U,V){L[z].prototype[V]=v[V]}),A.each(d,function(U,V){v[V]?L[z].prototype[V]=function(){return this.parent=v[V],U.apply(this,arguments)}:V!==z&&(L[z].prototype[V]=U)})),A.each(d.static,function(U,V){L[z][V]=U})}},walk:ws,createNS:function(a,d){var g,v;for(d=d||window,a=a.split("."),g=0;g<a.length;g++)d[v=a[g]]||(d[v]={}),d=d[v];return d},resolve:function(a,d){var g,v;for(d=d||window,g=0,v=(a=a.split(".")).length;g<v&&(d=d[a[g]]);g++);return d},explode:function(a,d){return!a||ln(a,"array")?a:mi(a.split(d||","),Qt)},_addCacheSuffix:function(a){var d=wr.cacheSuffix;return d&&(a+=(-1===a.indexOf("?")?"?":"&")+d),a}},it={fromHtml:function(a,d){var g=(d||document).createElement("div");if(g.innerHTML=a,!g.hasChildNodes()||1<g.childNodes.length)throw console.error("HTML does not have a single root node",a),new Error("HTML must have a single root node");return ur(g.childNodes[0])},fromTag:function(a,d){return ur((d||document).createElement(a))},fromText:function(a,d){return ur((d||document).createTextNode(a))},fromDom:ur,fromPoint:function(a,d,g){return H.from(a.dom.elementFromPoint(d,g)).map(ur)}};function Oi(a){return a.dom.nodeName.toLowerCase()}function td(a){return a.dom.nodeType}function Wl(a){return function(d){return td(d)===a}}function Ss(a){return it.fromDom(a.dom.ownerDocument)}function $s(a){return Um(a)?a:Ss(a)}function ma(a){return it.fromDom($s(a).dom.defaultView)}function Pu(a){return H.from(a.dom.parentNode).map(it.fromDom)}function Ei(a){return H.from(a.dom.previousSibling).map(it.fromDom)}function qo(a){return H.from(a.dom.nextSibling).map(it.fromDom)}function xl(a){return zi(kn(a,Ei))}function es(a){return kn(a,qo)}function nd(a,d){return H.from(a.dom.childNodes[d]).map(it.fromDom)}function rd(a){return nd(a,0)}function gu(a){return nd(a,a.dom.childNodes.length-1)}function Cs(a){return a.dom.childNodes.length}function Ru(a){return Vo(a)&&ze(a.dom.host)}function pi(a){return Ru(a)?a:function(){var d=$s(a).dom.head;if(null==d)throw new Error("Head is not available yet");return it.fromDom(d)}()}function Fd(a){return it.fromDom(a.dom.host)}function Ui(a,d){Pu(a).each(function(g){g.dom.insertBefore(d.dom,a.dom)})}function gs(a,d){qo(a).fold(function(){Pu(a).each(function(g){Ua(g,d)})},function(g){Ui(g,d)})}function od(a,d){rd(a).fold(function(){Ua(a,d)},function(g){a.dom.insertBefore(d.dom,g.dom)})}function _l(a,d){on(d,function(g){Ua(a,g)})}function pf(a){a.dom.textContent="",on(pn(a),function(d){Sr(d)})}function Gl(a){var d,g=pn(a);0<g.length&&(d=a,on(g,function(v){Ui(d,v)})),Sr(a)}function Vd(a,d){return void 0!==a?a:void 0!==d?d:0}function nl(a){var d=void 0!==a?a.dom:document;return Ul(d.body.scrollLeft||d.documentElement.scrollLeft,d.body.scrollTop||d.documentElement.scrollTop)}function Gh(a,d,g){var v=(void 0!==g?g.dom:document).defaultView;v&&v.scrollTo(a,d)}function jh(a,d){$i().browser.isSafari()&&dn(a.dom.scrollIntoViewIfNeeded)?a.dom.scrollIntoViewIfNeeded(!1):a.dom.scrollIntoView(d)}function wl(a,d,g,v){return{x:a,y:d,width:g,height:v,right:a+g,bottom:d+v}}function Po(a){var d=void 0===a?window:a,v=nl(it.fromDom(d.document)),x=void 0===d?window:d;return($i().browser.isFirefox()?H.none():H.from(x.visualViewport)).fold(function(){var C=d.document.documentElement;return wl(v.left,v.top,C.clientWidth,C.clientHeight)},function(C){return wl(Math.max(C.pageLeft,v.left),Math.max(C.pageTop,v.top),C.width,C.height)})}function li(a){return function(d){return!!d&&d.nodeType===a}}function Hd(a){return a&&!Object.getPrototypeOf(a)}function Nu(a){var d=a.map(function(g){return g.toLowerCase()});return function(g){if(g&&g.nodeName){var v=g.nodeName.toLowerCase();return Mt(d,v)}return!1}}function Wd(a,d){var g=d.toLowerCase().split(" ");return function(v){if(Mr(v))for(var x=0;x<g.length;x++){var C=v.ownerDocument.defaultView.getComputedStyle(v,null);if((C?C.getPropertyValue(a):null)===g[x])return!0}return!1}}function vf(a){return function(d){return Mr(d)&&d.hasAttribute(a)}}function jl(a){return Mr(a)&&a.hasAttribute("data-mce-bogus")}function Ca(a){return Mr(a)&&"TABLE"===a.tagName}function id(a){return function(d){return!(!Mr(d)||d.contentEditable!==a&&d.getAttribute("data-mce-contenteditable")!==a)}}function Lu(a,d,g){return void 0===g&&(g=cs),a.exists(function(v){return g(v,d)})}function sa(a,d,g){return a.isSome()&&d.isSome()?H.some(g(a.getOrDie(),d.getOrDie())):H.none()}function Vi(a){return void 0!==a.style&&dn(a.style.getPropertyValue)}function ts(a,d,g){if(!(xr(g)||Zi(g)||Rn(g)))throw console.error("Invalid call to Attribute.set. Key ",d,":: Value ",g,":: Element ",a),new Error("Attribute value was not simple");a.setAttribute(d,g+"")}function Sl(a,d,g){ts(a.dom,d,g)}function Rs(a,d){var g=a.dom;qt(d,function(v,x){ts(g,x,v)})}function Ga(a,d){var g=a.dom.getAttribute(d);return null===g?void 0:g}function cc(a,d){return H.from(Ga(a,d))}function Rc(a,d){a.dom.removeAttribute(d)}function ks(a,d){var g=a.dom,v=window.getComputedStyle(g).getPropertyValue(d);return""!==v||ad(a)?v:qm(g,d)}function oi(a,d){var v=qm(a.dom,d);return H.from(v).filter(function(x){return 0<x.length})}function dc(a){var d={},g=a.dom;if(Vi(g))for(var v=0;v<g.style.length;v++){var x=g.style.item(v);d[x]=g.style[x]}return d}function Cl(a){return gi(a,Hi)}function Ms(a,d){return a.children&&Mt(a.children,d)}"undefined"!=typeof window||Function("return this;")();var Hi=Wl(1),ja=Wl(3),Um=Wl(9),Vo=Wl(11),pn=function(a){return xt(a.dom.childNodes,it.fromDom)},Ks=dn(Element.prototype.attachShadow)&&dn(Node.prototype.getRootNode),rl=Zt(Ks),Ki=Ks?function(a){return it.fromDom(a.dom.getRootNode())}:$s,Ua=function(a,d){a.dom.appendChild(d.dom)},Sr=function(a){var d=a.dom;null!==d.parentNode&&d.parentNode.removeChild(d)},ad=function(a){var d=ja(a)?a.dom.parentNode:a.dom;if(null==d||null===d.ownerDocument)return!1;var g=d.ownerDocument,v=it.fromDom(d),x=Ki(v);return(Ru(x)?H.some(x):H.none()).fold(function(){return g.body.contains(d)},lr(ad,Fd))},Hg=function(a,d){return{left:a,top:d,translate:function(g,v){return Hg(a+g,d+v)}}},Ul=Hg,Ji=function(a){var d,g=a.dom,v=g.ownerDocument.body;return v===g?Ul(v.offsetLeft,v.offsetTop):ad(a)?(d=g.getBoundingClientRect(),Ul(d.left,d.top)):Ul(0,0)},Mr=li(1),nh=Nu(["textarea","input"]),In=li(3),ol=li(8),yf=li(9),bf=li(11),_i=Nu(["br"]),Zr=Nu(["img"]),mu=id("true"),qr=id("false"),ns=Nu(["td","th"]),zu=Nu(["video","audio","object","embed"]),qm=function(a,d){return Vi(a)?a.style.getPropertyValue(d):""},pu=$i().browser,ql={},fc={exports:ql};function ms(a){setTimeout(function(){throw a},0)}function Gd(a){return qi(function(){return new Xm(a)})}function Xl(a){if(!un(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var d=[],g={};return on(a,function(v,x){var C=wn(v);if(1!==C.length)throw new Error("one and only one name per case");var A=C[0],E=v[A];if(void 0!==g[A])throw new Error("duplicate key detected:"+A);if("cata"===A)throw new Error("cannot have a case named cata (sorry)");if(!un(E))throw new Error("case arguments must be an array");d.push(A),g[A]=function(){for(var z=[],L=0;L<arguments.length;L++)z[L]=arguments[L];var U=z.length;if(U!==E.length)throw new Error("Wrong number of arguments to case "+A+". Expected "+E.length+" ("+E+"), got "+U);return{fold:function(){for(var V=[],Z=0;Z<arguments.length;Z++)V[Z]=arguments[Z];if(V.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+V.length);return V[x].apply(null,z)},match:function(V){var Z=wn(V);if(d.length!==Z.length)throw new Error("Wrong number of arguments to match. Expected: "+d.join(",")+"\nActual: "+Z.join(","));if(!sr(d,function(ee){return Mt(Z,ee)}))throw new Error("Not all branches were specified when using match. Specified: "+Z.join(", ")+"\nRequired: "+d.join(", "));return V[A].apply(null,z)},log:function(V){console.log(V,{constructors:d,constructor:A,params:z})}}}}),g}!function(){var a=this,d=function(){var g,v,x,C={exports:{}};function A(){}function E(re){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof re)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ee(re,this)}function z(re,ie){for(;3===re._state;)re=re._value;0!==re._state?(re._handled=!0,E._immediateFn(function(){var ue,de=1===re._state?ie.onFulfilled:ie.onRejected;if(null!==de){try{ue=de(re._value)}catch(he){return void U(ie.promise,he)}L(ie.promise,ue)}else(1===re._state?L:U)(ie.promise,re._value)})):re._deferreds.push(ie)}function L(re,ie){try{if(ie===re)throw new TypeError("A promise cannot be resolved with itself.");if(ie&&("object"==typeof ie||"function"==typeof ie)){var ue=ie.then;if(ie instanceof E)return re._state=3,re._value=ie,void V(re);if("function"==typeof ue)return void ee((de=ue,he=ie,function(){de.apply(he,arguments)}),re)}re._state=1,re._value=ie,V(re)}catch(Ie){U(re,Ie)}var de,he}function U(re,ie){re._state=2,re._value=ie,V(re)}function V(re){2===re._state&&0===re._deferreds.length&&E._immediateFn(function(){re._handled||E._unhandledRejectionFn(re._value)});for(var ie=0,ue=re._deferreds.length;ie<ue;ie++)z(re,re._deferreds[ie]);re._deferreds=null}function Z(re,ie,ue){this.onFulfilled="function"==typeof re?re:null,this.onRejected="function"==typeof ie?ie:null,this.promise=ue}function ee(re,ie){var ue=!1;try{re(function(de){ue||(ue=!0,L(ie,de))},function(de){ue||(ue=!0,U(ie,de))})}catch(de){if(ue)return;ue=!0,U(ie,de)}}g=C,v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},x=setTimeout,E.prototype.catch=function(re){return this.then(null,re)},E.prototype.then=function(re,ie){var ue=new this.constructor(A);return z(this,new Z(re,ie,ue)),ue},E.all=function(re){var ie=Array.prototype.slice.call(re);return new E(function(ue,de){if(0===ie.length)return ue([]);for(var he=ie.length,Ie=0;Ie<ie.length;Ie++)!function We(ve,Se){try{if(Se&&("object"==typeof Se||"function"==typeof Se)){var Oe=Se.then;if("function"==typeof Oe)return Oe.call(Se,function(Je){We(ve,Je)},de),0}ie[ve]=Se,0==--he&&ue(ie)}catch(Je){de(Je)}}(Ie,ie[Ie])})},E.resolve=function(re){return re&&"object"==typeof re&&re.constructor===E?re:new E(function(ie){ie(re)})},E.reject=function(re){return new E(function(ie,ue){ue(re)})},E.race=function(re){return new E(function(ie,ue){for(var de=0,he=re.length;de<he;de++)re[de].then(ie,ue)})},E._immediateFn="function"==typeof setImmediate?function(re){setImmediate(re)}:function(re){x(re,0)},E._unhandledRejectionFn=function(re){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",re)},E._setImmediateFn=function(re){E._immediateFn=re},E._setUnhandledRejectionFn=function(re){E._unhandledRejectionFn=re},g.exports?g.exports=E:v.Promise||(v.Promise=E);var oe=C.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||oe}};"object"==typeof ql&&void 0!==fc?fc.exports=d():(a="undefined"!=typeof globalThis?globalThis:a||self).EphoxContactWrapper=d()}();var Xm=fc.exports.boltExport,wi=function(a){function d(A){x()?C(A):v.push(A)}var g=H.none(),v=[],x=function(){return g.isSome()},C=function(A){g.each(function(E){setTimeout(function(){A(E)},0)})};return a(function(A){x()||(g=H.some(A),on(v,C),v=[])}),{get:d,map:function(A){return wi(function(E){d(function(z){E(A(z))})})},isReady:x}},Fu={nu:wi,pure:function(a){return wi(function(d){d(a)})}},qi=function(a){function d(g){a().then(g,ms)}return{map:function(g){return qi(function(){return a().then(g)})},bind:function(g){return qi(function(){return a().then(function(v){return g(v).toPromise()})})},anonBind:function(g){return qi(function(){return a().then(function(){return g.toPromise()})})},toLazy:function(){return Fu.nu(d)},toCached:function(){var g=null;return qi(function(){return g=null===g?a():g})},toPromise:a,get:d}},ps=function(a){return{isValue:ro,isError:_r,getOr:Zt(a),getOrThunk:Zt(a),getOrDie:Zt(a),or:function(d){return ps(a)},orThunk:function(d){return ps(a)},fold:function(d,g){return g(a)},map:function(d){return ps(d(a))},mapError:function(d){return ps(a)},each:function(d){d(a)},bind:function(d){return d(a)},exists:function(d){return d(a)},forall:function(d){return d(a)},toOptional:function(){return H.some(a)}}},Nc=function(a){return{isValue:_r,isError:ro,getOr:Eo,getOrThunk:function(d){return d()},getOrDie:function(){return d=String(a),function(){throw new Error(d)}();var d},or:Eo,orThunk:function(d){return d()},fold:function(d,g){return d(a)},map:function(d){return Nc(a)},mapError:function(d){return Nc(d(a))},each:Ut,bind:function(d){return Nc(a)},exists:_r,forall:ro,toOptional:H.none}},Et={value:ps,error:Nc,fromOption:function(a,d){return a.fold(function(){return Nc(d)},ps)}};function Ns(a){return a.fold(Eo,Eo)}function kr(a,d,g,v,x){return a(g,v)?H.some(g):dn(x)&&x(g)?H.none():d(g,v,x)}function qa(a,d,g){for(var v=a.dom,x=dn(g)?g:_r;v.parentNode;){var C=it.fromDom(v=v.parentNode);if(d(C))return H.some(C);if(x(C))break}return H.none()}function Qi(a,d,g){return kr(function(v,x){return x(v)},qa,a,d,g)}function il(a,d,g){return qa(a,function(v){return nn(v,d)},g)}function sd(a,d){return g=d,Rt(v=void 0===a?document:a.dom)?H.none():H.from(v.querySelector(g)).map(it.fromDom);var g,v}function Na(a,d,g){return kr(nn,il,a,d,g)}function bo(a,d){return"number"!=typeof d&&(d=0),setTimeout(a,d)}function hc(a,d){return"number"!=typeof d&&(d=1),setInterval(a,d)}function Wg(a,d){function g(){for(var x=[],C=0;C<arguments.length;C++)x[C]=arguments[C];clearTimeout(v),v=bo(function(){a.apply(this,x)},d)}var v;return g.stop=function(){clearTimeout(v)},g}function Si(a,d){function g(U,V,Z){var ee,oe=At._addCacheSuffix(U),re=Vn(A,oe).getOrThunk(function(){return{id:"mce-u"+C++,passed:[],failed:[],count:0}});function ie(Se,Oe){for(var Je=Se.length;Je--;)Se[Je]();re.status=Oe,re.passed=[],re.failed=[],ee&&(ee.onload=null,ee.onerror=null,ee=null)}function ue(){return ie(re.passed,2),0}function de(){return ie(re.failed,3)}(A[oe]=re).count++;var he,Ie,We,ve=function(){var Se=ve;!function(){for(var Oe=a.styleSheets,Je=Oe.length;Je--;){var ct=Oe[Je].ownerNode;if(ct&&ct.id===ee.id)return ue(),1}}()&&(Date.now()-Ie<L?Di.setTimeout(Se):de())};V&&re.passed.push(V),Z&&re.failed.push(Z),1!==re.status&&(2!==re.status?3!==re.status?(re.status=1,Rs(he=it.fromTag("link",z.dom),{rel:"stylesheet",type:"text/css",id:re.id}),Ie=Date.now(),d.contentCssCors&&Sl(he,"crossOrigin","anonymous"),d.referrerPolicy&&Sl(he,"referrerpolicy",d.referrerPolicy),(ee=he.dom).onload=ve,ee.onerror=de,We=he,Ua(pi(E),We),Sl(he,"href",oe)):de():ue())}function v(U){return Gd(function(V){g(U,Jn(V,Zt(Et.value(U))),Jn(V,Zt(Et.error(U))))})}function x(U){var V=At._addCacheSuffix(U);Vn(A,V).each(function(Z){var ee;0==--Z.count&&(delete A[V],ee=Z.id,sd(pi(E),"#"+ee).each(Sr))})}void 0===d&&(d={});var C=0,A={},E=it.fromDom(a),z=$s(E),L=d.maxLoadTime||5e3;return{load:g,loadAll:function(U,V,Z){var ee,oe=xt(U,v);ee=oe,Gd(function(re){var ie=[],ue=0;0===ee.length?re([]):on(ee,function(de,he){var Ie;de.get((Ie=he,function(We){ie[Ie]=We,++ue>=ee.length&&re(ie)}))})}).get(function(re){var ie=Ao(re,function(ue){return ue.isValue()});0<ie.fail.length?Z(ie.fail.map(Ns)):V(ie.pass.map(Ns))})},unload:x,unloadAll:function(U){on(U,function(V){x(V)})},_setReferrerPolicy:function(U){d.referrerPolicy=U}}}Xl([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var jd,Uh,qe=window.Promise||Xm,Di={requestAnimationFrame:function(a,d){jd?jd.then(a):jd=new qe(function(g){!function(v,x){for(var C=window.requestAnimationFrame,A=["ms","moz","webkit"],E=0;E<A.length&&!C;E++)C=window[A[E]+"RequestAnimationFrame"];(C=C||function(z){window.setTimeout(z,0)})(v,x)}(g,d=d||document.body)}).then(a)},setTimeout:bo,setInterval:hc,setEditorTimeout:function(a,d,g){return bo(function(){a.removed||d()},g)},setEditorInterval:function(a,d,g){var v=hc(function(){a.removed?clearInterval(v):d()},g);return v},debounce:Wg,throttle:Wg,clearInterval:function(a){return clearInterval(a)},clearTimeout:function(a){return clearTimeout(a)}},qh=(Uh=new WeakMap,{forElement:function(a,d){var g=Ki(a).dom;return H.from(Uh.get(g)).getOrThunk(function(){var v=Si(g,d);return Uh.set(g,v),v})}}),ea=(kl.prototype.current=function(){return this.node},kl.prototype.next=function(a){return this.node=this.findSibling(this.node,"firstChild","nextSibling",a),this.node},kl.prototype.prev=function(a){return this.node=this.findSibling(this.node,"lastChild","previousSibling",a),this.node},kl.prototype.prev2=function(a){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",a),this.node},kl.prototype.findSibling=function(a,d,g,v){var x,C;if(a){if(!v&&a[d])return a[d];if(a!==this.rootNode){if(x=a[g])return x;for(C=a.parentNode;C&&C!==this.rootNode;C=C.parentNode)if(x=C[g])return x}}},kl.prototype.findPreviousNode=function(a,d,g,v){var x,C,A;if(a&&(x=a[g],!this.rootNode||x!==this.rootNode)){if(x){if(!v)for(A=x[d];A;A=A[d])if(!A[d])return A;return x}return(C=a.parentNode)&&C!==this.rootNode?C:void 0}},kl);function kl(a,d){this.node=a,this.rootNode=d,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}function ii(a){var d;return function(g){return d=d||function(v,x){for(var C={},A=0,E=v.length;A<E;A++){var z=v[A];C[String(z)]=x(z,A)}return C}(a,ro),ao(d,Oi(g))}}function ki(a){return Hi(a)&&!Hr(a)}function gc(a){return Hi(a)&&"br"===Oi(a)}function al(a){return vu(a)&&(a=a.parentNode),Ot(a)&&a.hasAttribute("data-mce-caret")}function $n(a){return vu(a)&&rs(a.data)}function ua(a){return al(a)||$n(a)}function ud(a){return a.firstChild!==a.lastChild||!_i(a.firstChild)}function Yl(a){var d=a.container();return!!In(d)&&(d.data.charAt(a.offset())===Io||a.isAtStart()&&$n(d.previousSibling))}function mc(a){var d=a.container();return!!In(d)&&(d.data.charAt(a.offset()-1)===Io||a.isAtEnd()&&$n(d.nextSibling))}function m(a){return a&&a.hasAttribute("data-mce-caret")?(jl(g=(d=a.getElementsByTagName("br"))[d.length-1])&&g.parentNode.removeChild(g),a.removeAttribute("data-mce-caret"),a.removeAttribute("data-mce-bogus"),a.removeAttribute("style"),a.removeAttribute("_moz_abspos"),a):null;var d,g}function w(a){return al(a.startContainer)}function T(a){return!av(a)&&(rh(a)?!Yh(a.parentNode):Ud(a)||xf(a)||jn(a)||qd(a))}function I(a,d){return T(a)&&function(g,v){for(g=g.parentNode;g&&g!==v;g=g.parentNode){if(qd(g))return!1;if(q0(g))return!0}return!0}(a,d)}function N(a){return Gg.test(a)}function j(a,d){return T(a)&&(A=d,!1===(In(C=a)&&N(C.data)&&(g=C,v=it.fromDom(A),!1===il(it.fromDom(g),"pre,code",_e($t,v)).isSome())))||Mr(x=a)&&"A"===x.nodeName&&!x.hasAttribute("href")&&(x.hasAttribute("name")||x.hasAttribute("id"))||Zh(a);var g,v,x,C,A}function q(a,d){return function(g,v){var x=0;if(j(g,g))return!1;var C=g.firstChild;if(!C)return!0;var A=new ea(C,g);do{if(v){if(Js(C)){C=A.next(!0);continue}if(sv(C)){C=A.next();continue}}if(_i(C))x++,C=A.next();else{if(j(C,g))return!1;C=A.next()}}while(C);return x<=1}(a.dom,d=void 0===d||d)}function $(a,d){return ze(a)&&(j(a,d)||ki(it.fromDom(a)))}function te(a){return"span"===a.nodeName.toLowerCase()&&"bookmark"===a.getAttribute("data-mce-type")}function ae(a,d){var g,v,x,C={};if(a){for(a=a.split(","),d=d||10,g=0;g<a.length;g+=2)v=String.fromCharCode(parseInt(a[g],d)),Ai[v]||(C[v]=x="&"+a[g+1]+";",C[x]=v);return C}}function ge(a,d){return a.replace(d?oh:Ym,function(g){return Ai[g]||g})}function be(a,d){return a.replace(d?oh:Ym,function(g){return 1<g.length?"&#"+(1024*(g.charCodeAt(0)-55296)+(g.charCodeAt(1)-56320)+65536)+";":Ai[g]||"&#"+g.charCodeAt(0)+";"})}function Ce(a,d,g){return g=g||ih,a.replace(d?oh:Ym,function(v){return Ai[v]||g[v]||v})}function De(a,d){return(a=At.trim(a))?a.split(d||" "):[]}function Ne(a,d){var g;return a&&(g={},Ta(a="string"==typeof a?{"*":a}:a,function(v,x){g[x]=g[x.toUpperCase()]=("map"===d?pc:ld)(v,/[, ]/)})),g}function Xe(a){function d(Vt,fn,nr){var Ir=a[Vt];return Ir?Ir=pc(Ir,/[, ]/,pc(Ir.toUpperCase(),/[, ]/)):(Ir=Zl[Vt])||(Ir=pc(fn," ",pc(fn.toUpperCase()," ")),Ir=$h(Ir,nr),Zl[Vt]=Ir),Ir}var g,v,x,C,A,E,z,L,U={},V={},Z=[],ee={},oe={},re=(g=(a=a||{}).schema,L={},Zl[g]||(v="id accesskey class dir lang style tabindex title role",x="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",C="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==g&&(v+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",x+=" article aside details dialog figure main header footer hgroup section nav",C+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==g&&(v+=" xml:lang",C=[C,z="acronym applet basefont big font strike tt"].join(" "),Ta(De(z),function(Vt){ie(Vt,"",C)}),x=[x,E="center dir isindex noframes"].join(" "),A=[x,C].join(" "),Ta(De(E),function(Vt){ie(Vt,"",A)})),A=A||[x,C].join(" "),ie("html","manifest","head body"),ie("head","","base command link meta noscript script style title"),ie("title hr noscript br"),ie("base","href target"),ie("link","href rel media hreflang type sizes hreflang"),ie("meta","name http-equiv content charset"),ie("style","media type scoped"),ie("script","src async defer type charset"),ie("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",A),ie("address dt dd div caption","",A),ie("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",C),ie("blockquote","cite",A),ie("ol","reversed start type","li"),ie("ul","","li"),ie("li","value",A),ie("dl","","dt dd"),ie("a","href target rel media hreflang type",C),ie("q","cite",C),ie("ins del","cite datetime",A),ie("img","src sizes srcset alt usemap ismap width height"),ie("iframe","src name width height",A),ie("embed","src type width height"),ie("object","data type typemustmatch name usemap form width height",[A,"param"].join(" ")),ie("param","name value"),ie("map","name",[A,"area"].join(" ")),ie("area","alt coords shape href target rel media hreflang type"),ie("table","border","caption colgroup thead tfoot tbody tr"+("html4"===g?" col":"")),ie("colgroup","span","col"),ie("col","span"),ie("tbody thead tfoot","","tr"),ie("tr","","td th"),ie("td","colspan rowspan headers",A),ie("th","colspan rowspan headers scope abbr",A),ie("form","accept-charset action autocomplete enctype method name novalidate target",A),ie("fieldset","disabled form name",[A,"legend"].join(" ")),ie("label","form for",C),ie("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),ie("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===g?A:C),ie("select","disabled form multiple name required size","option optgroup"),ie("optgroup","disabled label","option"),ie("option","disabled label selected value"),ie("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),ie("menu","type label",[A,"li"].join(" ")),ie("noscript","",A),"html4"!==g&&(ie("wbr"),ie("ruby","",[C,"rt rp"].join(" ")),ie("figcaption","",A),ie("mark rt rp summary bdi","",C),ie("canvas","width height",A),ie("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[A,"track source"].join(" ")),ie("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[A,"track source"].join(" ")),ie("picture","","img source"),ie("source","src srcset type media sizes"),ie("track","kind src srclang label default"),ie("datalist","",[C,"option"].join(" ")),ie("article section nav aside main header footer","",A),ie("hgroup","","h1 h2 h3 h4 h5 h6"),ie("figure","",[A,"figcaption"].join(" ")),ie("time","datetime",C),ie("dialog","open",A),ie("command","type label icon disabled checked radiogroup command"),ie("output","for form name",C),ie("progress","value max",C),ie("meter","value min max low high optimum",C),ie("details","open",[A,"summary"].join(" ")),ie("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==g&&(ue("script","language xml:space"),ue("style","xml:space"),ue("object","declare classid code codebase codetype archive standby align border hspace vspace"),ue("embed","align name hspace vspace"),ue("param","valuetype type"),ue("a","charset name rev shape coords"),ue("br","clear"),ue("applet","codebase archive code object alt name width height align hspace vspace"),ue("img","name longdesc align border hspace vspace"),ue("iframe","longdesc frameborder marginwidth marginheight scrolling align"),ue("font basefont","size color face"),ue("input","usemap align"),ue("select"),ue("textarea"),ue("h1 h2 h3 h4 h5 h6 div p legend caption","align"),ue("ul","type compact"),ue("li","type"),ue("ol dl menu dir","compact"),ue("pre","width xml:space"),ue("hr","align noshade size width"),ue("isindex","prompt"),ue("table","summary width frame rules cellspacing cellpadding align bgcolor"),ue("col","width align char charoff valign"),ue("colgroup","width align char charoff valign"),ue("thead","align char charoff valign"),ue("tr","align char charoff valign bgcolor"),ue("th","axis align char charoff valign nowrap bgcolor width height"),ue("form","accept"),ue("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),ue("tfoot","align char charoff valign"),ue("tbody","align char charoff valign"),ue("area","nohref"),ue("body","background bgcolor text link vlink alink")),"html4"!==g&&(ue("input button select textarea","autofocus"),ue("input textarea","placeholder"),ue("a","download"),ue("link script img","crossorigin"),ue("img","loading"),ue("iframe","sandbox seamless allowfullscreen loading")),Ta(De("a form meter progress dfn"),function(Vt){L[Vt]&&delete L[Vt].children[Vt]}),delete L.caption.children.table,delete L.script,Zl[g]=L));function ie(Vt,fn,nr){function Ir(Ii,fu){for(var wa={},mf=0,ls=Ii.length;mf<ls;mf++)wa[Ii[mf]]=fu||{};return wa}var bi,di;fn=fn||"","string"==typeof(nr=nr||[])&&(nr=De(nr));for(var ir=De(Vt),ti=ir.length;ti--;)di={attributes:Ir(bi=De([v,fn].join(" "))),attributesOrder:bi,children:Ir(nr,cv)},L[ir[ti]]=di}function ue(Vt,fn){for(var nr,Ir,bi,di=De(Vt),ir=di.length,ti=De(fn);ir--;)for(nr=L[di[ir]],Ir=0,bi=ti.length;Ir<bi;Ir++)nr.attributes[ti[Ir]]={},nr.attributesOrder.push(ti[Ir])}!1===a.verify_html&&(a.valid_elements="*[*]");var de=Ne(a.valid_styles),he=Ne(a.invalid_styles,"map"),Ie=Ne(a.valid_classes,"map"),We=d("whitespace_elements","pre script noscript style textarea video audio iframe object code"),ve=d("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Se=d("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),Oe=d("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),Je="td th iframe video audio object script code",ct=d("non_empty_elements",Je+" pre",Se),gt=d("move_caret_before_on_enter_elements",Je+" table",Se),Ge=d("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Qe=d("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",Ge),Ye=d("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");function et(Vt){return new RegExp("^"+Vt.replace(/([?+*])/g,".$1")+"$")}function Ct(Vt){var fn,nr,Ir,bi,di,ir,ti,Ii,fu,wa,mf,ls,el,Vh,lb,Qf,Hh,eh,xS=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,_S=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,k_=/[*?+]/;if(Vt){var wS=De(Vt,",");for(U["@"]&&(Qf=U["@"].attributes,Hh=U["@"].attributesOrder),fn=0,nr=wS.length;fn<nr;fn++)if(di=xS.exec(wS[fn])){if(fu=di[2],lb=di[3],Ii=di[5],ir={attributes:ls={},attributesOrder:el=[]},"#"===(Vh=di[1])&&(ir.paddEmpty=!0),"-"===Vh&&(ir.removeEmpty=!0),"!"===di[4]&&(ir.removeEmptyAttrs=!0),Qf&&(qt(Qf,function(SS,hk){ls[hk]=SS}),el.push.apply(el,Hh)),Ii)for(Ir=0,bi=(Ii=De(Ii,"|")).length;Ir<bi;Ir++)(di=_S.exec(Ii[Ir]))&&(ti={},mf=di[1],wa=di[2].replace(/[\\:]:/g,":"),Vh=di[3],eh=di[4],"!"===mf&&(ir.attributesRequired=ir.attributesRequired||[],ir.attributesRequired.push(wa),ti.required=!0),"-"!==mf?(Vh&&("="===Vh&&(ir.attributesDefault=ir.attributesDefault||[],ir.attributesDefault.push({name:wa,value:eh}),ti.defaultValue=eh),":"===Vh&&(ir.attributesForced=ir.attributesForced||[],ir.attributesForced.push({name:wa,value:eh}),ti.forcedValue=eh),"<"===Vh&&(ti.validValues=pc(eh,"?"))),k_.test(wa)?(ir.attributePatterns=ir.attributePatterns||[],ti.pattern=et(wa),ir.attributePatterns.push(ti)):(ls[wa]||el.push(wa),ls[wa]=ti)):(delete ls[wa],el.splice(sl(el,wa),1)));Qf||"@"!==fu||(Qf=ls,Hh=el),lb&&(ir.outputName=fu,U[lb]=ir),k_.test(fu)?(ir.pattern=et(fu),Z.push(ir)):U[fu]=ir}}}function en(Vt){U={},Z=[],Ct(Vt),Ta(re,function(fn,nr){V[nr]=fn.children})}function sn(Vt){var fn=/^(~)?(.+)$/;Vt&&(Zl.text_block_elements=Zl.block_elements=null,Ta(De(Vt,","),function(nr){var Ir,bi=fn.exec(nr),di="~"===bi[1],ir=di?"span":"div",ti=bi[2];V[ti]=V[ir],ee[ti]=ir,di||(Qe[ti.toUpperCase()]={},Qe[ti]={}),U[ti]||(delete(Ir=$h({},Ir=U[ir])).removeEmptyAttrs,delete Ir.removeEmpty,U[ti]=Ir),Ta(V,function(Ii,fu){Ii[ir]&&(V[fu]=Ii=$h({},V[fu]),Ii[ti]=Ii[ir])})}))}function Tt(Vt){var fn=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;Zl[a.schema]=null,Vt&&Ta(De(Vt,","),function(nr){var Ir,bi,di=fn.exec(nr);di&&(Ir=(bi=di[1])?V[di[2]]:V[di[2]]={"#comment":{}},Ir=V[di[2]],Ta(De(di[3],"|"),function(ir){"-"===bi?delete Ir[ir]:Ir[ir]={}}))})}function Dt(Vt){var fn,nr=U[Vt];if(nr)return nr;for(fn=Z.length;fn--;)if((nr=Z[fn]).pattern.test(Vt))return nr}Ta((a.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(Vt){oe[Vt]=new RegExp("</"+Vt+"[^>]*>","gi")}),a.valid_elements?en(a.valid_elements):(Ta(re,function(Vt,fn){U[fn]={attributes:Vt.attributes,attributesOrder:Vt.attributesOrder},V[fn]=Vt.children}),"html5"!==a.schema&&Ta(De("strong/b em/i"),function(Vt){var fn=De(Vt,"/");U[fn[1]].outputName=fn[0]}),Ta(De("ol ul sub sup blockquote span font a table tbody strong em b i"),function(Vt){U[Vt]&&(U[Vt].removeEmpty=!0)}),Ta(De("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(Vt){U[Vt].paddEmpty=!0}),Ta(De("span"),function(Vt){U[Vt].removeEmptyAttrs=!0})),sn(a.custom_elements),Tt(a.valid_children),Ct(a.extended_valid_elements),Tt("+ol[ul|ol],+ul[ul|ol]"),Ta({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(Vt,fn){U[fn]&&(U[fn].parentsRequired=De(Vt))}),a.invalid_elements&&Ta(ld(a.invalid_elements),function(Vt){U[Vt]&&delete U[Vt]}),Dt("span")||Ct("span[!data-mce-type|*]");var xn=Zt(de),bn=Zt(he),Jt=Zt(Ie),Xn=Zt(Oe),Bt=Zt(Qe),Tn=Zt(Ge),tn=Zt(Ye),An=Zt(Se),Hn=Zt(ve),mo=Zt(ct),Ae=Zt(gt),Ze=Zt(We),It=Zt(oe),zt=Zt(ee);return{children:V,elements:U,getValidStyles:xn,getValidClasses:Jt,getBlockElements:Bt,getInvalidStyles:bn,getShortEndedElements:An,getTextBlockElements:Tn,getTextInlineElements:tn,getBoolAttrs:Xn,getElementRule:Dt,getSelfClosingElements:Hn,getNonEmptyElements:mo,getMoveCaretBeforeOnEnterElements:Ae,getWhiteSpaceElements:Ze,getSpecialElements:It,isValidChild:function(Vt,fn){var nr=V[Vt.toLowerCase()];return!(!nr||!nr[fn.toLowerCase()])},isValid:function(Vt,fn){var nr,Ir,bi=Dt(Vt);if(bi){if(!fn||bi.attributes[fn])return!0;if(nr=bi.attributePatterns)for(Ir=nr.length;Ir--;)if(nr[Ir].pattern.test(Vt))return!0}return!1},getCustomElements:zt,addValidElements:Ct,setValidElements:en,addCustomElements:sn,addValidChildren:Tt}}function ft(a,d,g,v){function x(C){return 1<(C=parseInt(C,10).toString(16)).length?C:"0"+C}return"#"+x(d)+x(g)+x(v)}function an(a,d){var g,v,x=this,C=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,A=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,E=/\s*([^:]+):\s*([^;]+);?/g,z=/\s+$/,L={},U=To;a=a||{},d&&(g=d.getValidStyles(),v=d.getInvalidStyles());for(var V=("\\\" \\' \\; \\: ; : "+U).split(" "),Z=0;Z<V.length;Z++)L[V[Z]]=U+Z,L[U+Z]=V[Z];return{toHex:function(ee){return ee.replace(C,ft)},parse:function(ee){function oe(et,Ct,en){var sn=Ge[et+"-top"+Ct];if(sn){var Tt=Ge[et+"-right"+Ct];if(Tt){var Dt=Ge[et+"-bottom"+Ct];if(Dt){var xn=Ge[et+"-left"+Ct];if(xn){var bn=[sn,Tt,Dt,xn];for(Z=bn.length-1;Z--&&bn[Z]===bn[Z+1];);-1<Z&&en||(Ge[et+Ct]=-1===Z?bn[0]:bn.join(" "),delete Ge[et+"-top"+Ct],delete Ge[et+"-right"+Ct],delete Ge[et+"-bottom"+Ct],delete Ge[et+"-left"+Ct])}}}}}function re(et){var Ct,en=Ge[et];if(en){for(Ct=(en=en.split(" ")).length;Ct--;)if(en[Ct]!==en[0])return;return Ge[et]=en[0],1}}function ie(et){return Oe=!0,L[et]}function ue(et,Ct){return Oe&&(et=et.replace(/\uFEFF[0-9]/g,function(en){return L[en]})),Ct?et:et.replace(/\\([\'\";:])/g,"$1")}function de(et){return String.fromCharCode(parseInt(et.slice(1),16))}function he(et){return et.replace(/\\[0-9a-f]+/gi,de)}function Ie(et,Ct,en,sn,Tt,Dt){if(Tt=Tt||Dt)return"'"+(Tt=ue(Tt)).replace(/\'/g,"\\'")+"'";if(Ct=ue(Ct||en||sn),!a.allow_script_urls){var xn=Ct.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(xn)||!a.allow_svg_data_urls&&/^data:image\/svg/i.test(xn))return""}return"url('"+(Ct=Qe?Qe.call(Ye,Ct,"style"):Ct).replace(/\'/g,"\\'")+"')"}var We,ve,Se,Oe,Je,ct,gt,Ge={},Qe=a.url_converter,Ye=a.url_converter_scope||x;if(ee){for(ee=(ee=ee.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,ie).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(et){return et.replace(/[;:]/g,ie)});We=E.exec(ee);)E.lastIndex=We.index+We[0].length,ve=We[1].replace(z,"").toLowerCase(),Se=We[2].replace(z,""),ve&&Se&&(ve=he(ve),Se=he(Se),-1===ve.indexOf(U)&&-1===ve.indexOf('"')&&(a.allow_script_urls||"behavior"!==ve&&!/expression\s*\(|\/\*|\*\//.test(Se))&&("font-weight"===ve&&"700"===Se?Se="bold":"color"!==ve&&"background-color"!==ve||(Se=Se.toLowerCase()),Se=(Se=Se.replace(C,ft)).replace(A,Ie),Ge[ve]=Oe?ue(Se,!0):Se));oe("border","",!0),oe("border","-width"),oe("border","-color"),oe("border","-style"),oe("padding",""),oe("margin",""),ct="border-style",gt="border-color",re(Je="border-width")&&re(ct)&&re(gt)&&(Ge.border=Ge[Je]+" "+Ge[ct]+" "+Ge[gt],delete Ge[Je],delete Ge[ct],delete Ge[gt]),"medium none"===Ge.border&&delete Ge.border,"none"===Ge["border-image"]&&delete Ge["border-image"]}return Ge},serialize:function(ee,oe){function re(ue){var de,he=g[ue];if(he)for(var Ie=0,We=he.length;Ie<We;Ie++)(de=ee[ue=he[Ie]])&&(ie+=(0<ie.length?" ":"")+ue+": "+de+";")}var ie="";return oe&&g?(re("*"),re(oe)):qt(ee,function(ue,de){var he;!ue||v&&((he=v["*"])&&he[de]||(he=v[oe])&&he[de])||(ie+=(0<ie.length?" ":"")+de+": "+ue+";")}),ie}}}function jt(a){return a instanceof Event||dn(a.initEvent)}function Xt(a,d,g,v){var x,C,A=function(E){var z,L=null!=v?v:{};for(z in E)ao(ah,z)||(L[z]=E[z]);return ze(L.composedPath)&&(L.composedPath=function(){return E.composedPath()}),L}(d);return A.type=a,En(A.target)&&(A.target=null!==(x=A.srcElement)&&void 0!==x?x:g),(En((C=d).preventDefault)||jt(C))&&(A.preventDefault=function(){A.defaultPrevented=!0,A.isDefaultPrevented=ro,dn(d.preventDefault)?d.preventDefault():jt(d)&&(d.returnValue=!1)},A.stopPropagation=function(){A.cancelBubble=!0,A.isPropagationStopped=ro,dn(d.stopPropagation)?d.stopPropagation():jt(d)&&(d.cancelBubble=!0)},A.stopImmediatePropagation=function(){A.isImmediatePropagationStopped=ro,A.stopPropagation()},A.isDefaultPrevented!==ro&&A.isDefaultPrevented!==_r&&(A.isDefaultPrevented=!0===A.defaultPrevented?ro:_r,A.isPropagationStopped=!0===A.cancelBubble?ro:_r,A.isImmediatePropagationStopped=_r)),A}function vn(a,d,g,v){a.addEventListener?a.addEventListener(d,g,v||!1):a.attachEvent&&a.attachEvent("on"+d,g)}function On(a,d,g,v){a.removeEventListener?a.removeEventListener(d,g,v||!1):a.detachEvent&&a.detachEvent("on"+d,g)}function er(a,d){var g,v,x,C,A=Xt(a.type,a,document,d);return ze(C=a)&&_f.test(C.type)&&Er(a.pageX)&&!Er(a.clientX)&&(v=(g=A.target.ownerDocument||document).documentElement,x=g.body,A.pageX=a.clientX+(v&&v.scrollLeft||x&&x.scrollLeft||0)-(v&&v.clientLeft||x&&x.clientLeft||0),A.pageY=a.clientY+(v&&v.scrollTop||x&&x.scrollTop||0)-(v&&v.clientTop||x&&x.clientTop||0)),Er(A.metaKey)&&(A.metaKey=!1),A}var $r=ii(["h1","h2","h3","h4","h5","h6"]),Hr=ii(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),br=ii(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Xo=ii(["ul","ol","dl"]),xo=ii(["li","dd","dt"]),Wr=ii(["thead","tbody","tfoot"]),gr=ii(["td","th"]),gn=ii(["pre","script","textarea","style"]),To="\ufeff",Ho="\xa0",Io=To,rs=function(a){return a===To},Ma=function(a){return a.replace(/\uFEFF/g,"")},Ot=Mr,vu=In,Ls=function(a){return vu(a)&&a.data[0]===Io},pa=function(a){return vu(a)&&a.data[a.data.length-1]===Io},q0=mu,Xh=qr,xf=_i,rh=In,Yh=Nu(["script","style","textarea"]),Ud=Nu(["img","input","textarea","hr","iframe","video","audio","object","embed"]),jn=Nu(["table"]),av=ua,qd=function(a){return!1===(Mr(d=a)&&"true"===d.getAttribute("unselectable"))&&Xh(a);var d},Gg=/^[ \t\r\n]*$/,Zh=vf("data-mce-bookmark"),sv=vf("data-mce-bogus"),Js=function(a){return Mr(a)&&"all"===a.getAttribute("data-mce-bogus")},Qs=function(a,d,g){var v=g||d;if(Mr(d)&&te(d))return d;for(var x,C,A,E,z,L,U,V,Z,ee,oe,re=d.childNodes,ie=re.length-1;0<=ie;ie--)Qs(a,re[ie],v);return!Mr(d)||1===(x=d.childNodes).length&&te(x[0])&&d.parentNode.insertBefore(x[0],d),bf(A=d)||yf(A)||j(d,v)||Mr(C=d)&&0<C.childNodes.length||(z=v,In(E=d)&&0<E.data.length&&(V=new ea(L=E,U=z).prev(!1),Z=new ea(L,U).next(!1),ee=Er(V)||$(V,U),oe=Er(Z)||$(Z,U),ee&&oe))||a.remove(d),d},uv=At.makeMap,oh=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ym=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,X0=/[<>&\"\']/g,lv=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,vs={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Ai={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},La={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ih=ae("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Xa={encodeRaw:ge,encodeAllRaw:function(a){return(""+a).replace(X0,function(d){return Ai[d]||d})},encodeNumeric:be,encodeNamed:Ce,getEncodeFunc:function(a,d){var g=ae(d)||ih,v=uv(a.replace(/\+/g,","));return v.named&&v.numeric?function(x,C){return x.replace(C?oh:Ym,function(A){return void 0!==Ai[A]?Ai[A]:void 0!==g[A]?g[A]:1<A.length?"&#"+(1024*(A.charCodeAt(0)-55296)+(A.charCodeAt(1)-56320)+65536)+";":"&#"+A.charCodeAt(0)+";"})}:v.named?d?function(x,C){return Ce(x,C,g)}:Ce:v.numeric?be:ge},decode:function(a){return a.replace(lv,function(d,g){return g?65535<(g="x"===g.charAt(0).toLowerCase()?parseInt(g.substr(1),16):parseInt(g,10))?(g-=65536,String.fromCharCode(55296+(g>>10),56320+(1023&g))):vs[g]||String.fromCharCode(g):La[d]||ih[d]||(v=d,(x=it.fromTag("div").dom).innerHTML=v,x.textContent||x.innerText||v);var v,x})}},Zl={},cv={},pc=At.makeMap,Ta=At.each,$h=At.extend,ld=At.explode,sl=At.inArray,ah={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},_f=/^(?:mouse|contextmenu)|click/,Kh=(la.prototype.bind=function(a,d,g,v){function x(re){V.executeHandlers(er(re||Z.event),C)}var C,A,E,z,L,U,V=this,Z=window;if(a&&3!==a.nodeType&&8!==a.nodeType){a[V.expando]?C=a[V.expando]:(C=V.count++,a[V.expando]=C,V.events[C]={}),v=v||a;for(var ee=d.split(" "),oe=ee.length;oe--;)L=x,z=U=!1,"DOMContentLoaded"===(E=ee[oe])&&(E="ready"),V.domLoaded&&"ready"===E&&"complete"===a.readyState?g.call(v,er({type:E})):(V.hasMouseEnterLeave||(z=V.mouseEnterLeave[E])&&(L=function(re){var ie=re.currentTarget,ue=re.relatedTarget;if(ue&&ie.contains)ue=ie.contains(ue);else for(;ue&&ue!==ie;)ue=ue.parentNode;ue||((re=er(re||Z.event)).type="mouseout"===re.type?"mouseleave":"mouseenter",re.target=ie,V.executeHandlers(re,C))}),V.hasFocusIn||"focusin"!==E&&"focusout"!==E||(U=!0,z="focusin"===E?"focus":"blur",L=function(re){(re=er(re||Z.event)).type="focus"===re.type?"focusin":"focusout",V.executeHandlers(re,C)}),(A=V.events[C][E])?"ready"===E&&V.domLoaded?g(er({type:E})):A.push({func:g,scope:v}):(V.events[C][E]=A=[{func:g,scope:v}],A.fakeName=z,A.capture=U,A.nativeHandler=L,"ready"===E?function(re,ie,ue){var de,he=re.document,Ie={type:"ready"};ue.domLoaded?ie(Ie):(de=function(){On(re,"DOMContentLoaded",de),On(re,"load",de),ue.domLoaded||(ue.domLoaded=!0,ie(Ie)),re=null},"complete"===he.readyState||"interactive"===he.readyState&&he.body?de():vn(re,"DOMContentLoaded",de),ue.domLoaded||vn(re,"load",de))}(a,L,V):vn(a,z||E,L,U)));return a=A=null,g}},la.prototype.unbind=function(a,d,g){var v,x,C;if(!a||3===a.nodeType||8===a.nodeType)return this;var A=a[this.expando];if(A){if(C=this.events[A],d){for(var E,z,L,U,V=d.split(" "),Z=V.length;Z--;)if(U=C[x=V[Z]]){if(g)for(v=U.length;v--;)U[v].func===g&&(E=U.nativeHandler,z=U.fakeName,L=U.capture,(U=U.slice(0,v).concat(U.slice(v+1))).nativeHandler=E,U.fakeName=z,U.capture=L,C[x]=U);g&&0!==U.length||(delete C[x],On(a,U.fakeName||x,U.nativeHandler,U.capture))}}else qt(C,function(ee,oe){On(a,ee.fakeName||oe,ee.nativeHandler,ee.capture)}),C={};for(x in C)if(ao(C,x))return this;delete this.events[A];try{delete a[this.expando]}catch(ee){a[this.expando]=null}}return this},la.prototype.fire=function(a,d,g){var v;if(!a||3===a.nodeType||8===a.nodeType)return this;for(var x=er({type:d,target:a},g);(v=a[this.expando])&&this.executeHandlers(x,v),(a=a.parentNode||a.ownerDocument||a.defaultView||a.parentWindow)&&!x.isPropagationStopped(););return this},la.prototype.clean=function(a){var d,g;if(!a||3===a.nodeType||8===a.nodeType)return this;if(a[this.expando]&&this.unbind(a),(a=a.getElementsByTagName?a:a.document)&&a.getElementsByTagName)for(this.unbind(a),d=(g=a.getElementsByTagName("*")).length;d--;)(a=g[d])[this.expando]&&this.unbind(a);return this},la.prototype.destroy=function(){this.events={}},la.prototype.cancel=function(a){return a&&(a.preventDefault(),a.stopImmediatePropagation()),!1},la.prototype.executeHandlers=function(a,d){var g=this.events[d],v=g&&g[a.type];if(v)for(var x=0,C=v.length;x<C;x++){var A=v[x];if(A&&!1===A.func.call(A.scope,a)&&a.preventDefault(),a.isImmediatePropagationStopped())return}},la.Event=new la,la);function la(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}function ul(a,d,g){var v="0x"+d-65536;return v!=v||g?d:v<0?String.fromCharCode(65536+v):String.fromCharCode(v>>10|55296,1023&v|56320)}var Da,Yo,dv,Lc,Jh,Zm,jg,Vu,yu,Ug,cd,ll,va,ta,eu,dd,Xd,Xi="sizzle"+-new Date,fd=window.document,$l=0,sh=0,Hu=Zd(),wf=Zd(),Sf=Zd(),Wu=function(a,d){return a===d&&(Ug=!0),0},Bs="undefined",tu={}.hasOwnProperty,Yd=[],$m=Yd.pop,Qh=Yd.push,Ml=Yd.push,fv=Yd.slice,uh=Yd.indexOf||function(a){for(var d=0,g=this.length;d<g;d++)if(this[d]===a)return d;return-1},ca="[\\x20\\t\\r\\n\\f]",Cf="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",lh="\\["+ca+"*("+Cf+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Cf+"))|)"+ca+"*\\]",qg=":("+Cf+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+lh+")*)|.*)\\)|)",cl=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),xb=new RegExp("^"+ca+"*,"+ca+"*"),ys=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),hd=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),kf=new RegExp(qg),gd=new RegExp("^"+Cf+"$"),Kl={ID:new RegExp("^#("+Cf+")"),CLASS:new RegExp("^\\.("+Cf+")"),TAG:new RegExp("^("+Cf+"|[*])"),ATTR:new RegExp("^"+lh),PSEUDO:new RegExp("^"+qg),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},hv=/^(?:input|select|textarea|button)$/i,gv=/^h\d$/i,Ro=/^[^{]+\{\s*\[native \w/,Mi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Jl=/[+~]/,Xg=/'|\\/g,nu=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig");try{Ml.apply(Yd=fv.call(fd.childNodes),fd.childNodes)}catch(a){Ml={apply:Yd.length?function(d,g){Qh.apply(d,fv.call(g))}:function(d,g){for(var v=d.length,x=0;d[v++]=g[x++];);d.length=v-1}}}var _o=function(a,d,g,v){var x,C,A,E,z,L,U,V,Z,ee;if((d?d.ownerDocument||d:fd)!==ll&&cd(d),g=g||[],!a||"string"!=typeof a)return g;if(1!==(E=(d=d||ll).nodeType)&&9!==E)return[];if(ta&&!v){if(x=Mi.exec(a))if(A=x[1]){if(9===E){if(!(C=d.getElementById(A))||!C.parentNode)return g;if(C.id===A)return g.push(C),g}else if(d.ownerDocument&&(C=d.ownerDocument.getElementById(A))&&Xd(d,C)&&C.id===A)return g.push(C),g}else{if(x[2])return Ml.apply(g,d.getElementsByTagName(a)),g;if((A=x[3])&&Da.getElementsByClassName)return Ml.apply(g,d.getElementsByClassName(A)),g}if(Da.qsa&&(!eu||!eu.test(a))){if(V=U=Xi,Z=d,ee=9===E&&a,1===E&&"object"!==d.nodeName.toLowerCase()){for(L=Jh(a),(U=d.getAttribute("id"))?V=U.replace(Xg,"\\$&"):d.setAttribute("id",V),V="[id='"+V+"'] ",z=L.length;z--;)L[z]=V+Km(L[z]);Z=Jl.test(a)&&Mf(d.parentNode)||d,ee=L.join(",")}if(ee)try{return Ml.apply(g,Z.querySelectorAll(ee)),g}catch(oe){}finally{U||d.removeAttribute("id")}}}return jg(a.replace(cl,"$1"),d,g,v)};function Zd(){var a=[];return function d(g,v){return a.push(g+" ")>Yo.cacheLength&&delete d[a.shift()],d[g+" "]=v}}function $d(a){return a[Xi]=!0,a}function _b(a,d){var g=d&&a,v=g&&1===a.nodeType&&1===d.nodeType&&(~d.sourceIndex||1<<31)-(~a.sourceIndex||1<<31);if(v)return v;if(g)for(;g=g.nextSibling;)if(g===d)return-1;return a?1:-1}function eg(a){return $d(function(d){return d=+d,$d(function(g,v){for(var x,C=a([],g.length,d),A=C.length;A--;)g[x=C[A]]&&(g[x]=!(v[x]=g[x]))})})}function Mf(a){return a&&typeof a.getElementsByTagName!=Bs&&a}function Yg(){}function Km(a){for(var d=0,g=a.length,v="";d<g;d++)v+=a[d].value;return v}function Gu(a,d,g){var v=d.dir,x=g&&"parentNode"===v,C=sh++;return d.first?function(A,E,z){for(;A=A[v];)if(1===A.nodeType||x)return a(A,E,z)}:function(A,E,z){var L,U,V=[$l,C];if(z){for(;A=A[v];)if((1===A.nodeType||x)&&a(A,E,z))return!0}else for(;A=A[v];)if(1===A.nodeType||x){if((L=(U=A[Xi]||(A[Xi]={}))[v])&&L[0]===$l&&L[1]===C)return V[2]=L[2];if((U[v]=V)[2]=a(A,E,z))return!0}}}function Tf(a){return 1<a.length?function(d,g,v){for(var x=a.length;x--;)if(!a[x](d,g,v))return!1;return!0}:a[0]}function tg(a,d,g,v,x){for(var C,A=[],E=0,z=a.length,L=null!=d;E<z;E++)(C=a[E])&&(g&&!g(C,v,x)||(A.push(C),L&&d.push(E)));return A}function Df(a){return void 0!==a}function ju(a){return"string"==typeof a}function Ts(a,d){var g,v=(d=d||Uu).createElement("div"),x=d.createDocumentFragment();for(v.innerHTML=a;g=v.firstChild;)x.appendChild(g);return x}function dl(a,d){return a&&d&&-1!==(" "+a.className+" ").indexOf(" "+d+" ")}function i1(a,d,g){var v,x;return d=Gr(d)[0],a.each(function(){g&&v===this.parentNode||(v=this.parentNode,x=d.cloneNode(!1),this.parentNode.insertBefore(x,this)),x.appendChild(this)}),a}function ru(a,d){return new Gr.fn.init(a,d)}function Y0(a){return null==a?"":(""+a).replace(ch,"")}function md(a,d){var g,v,x,C;if(a)if(void 0===(g=a.length)){for(v in a)if(a.hasOwnProperty(v)&&!1===d.call(C=a[v],v,C))break}else for(x=0;x<g&&!1!==d.call(C=a[x],x,C);x++);return a}function Z0(a,d){var g=[];return md(a,function(v,x){d(x,v)&&g.push(x)}),g}Da=_o.support={},Lc=_o.isXML=function(a){var d=a&&(a.ownerDocument||a).documentElement;return!!d&&"HTML"!==d.nodeName},cd=_o.setDocument=function(a){var d,g=a?a.ownerDocument||a:fd,v=g.defaultView;return g!==ll&&9===g.nodeType&&g.documentElement?(va=(ll=g).documentElement,ta=!Lc(g),v&&v!==function(x){try{return x.top}catch(C){}return null}(v)&&(v.addEventListener?v.addEventListener("unload",function(){cd()},!1):v.attachEvent&&v.attachEvent("onunload",function(){cd()})),Da.attributes=!0,Da.getElementsByTagName=!0,Da.getElementsByClassName=Ro.test(g.getElementsByClassName),Da.getById=!0,Yo.find.ID=function(x,C){if(typeof C.getElementById!=Bs&&ta){var A=C.getElementById(x);return A&&A.parentNode?[A]:[]}},Yo.filter.ID=function(x){var C=x.replace(nu,ul);return function(A){return A.getAttribute("id")===C}},Yo.find.TAG=Da.getElementsByTagName?function(x,C){if(typeof C.getElementsByTagName!=Bs)return C.getElementsByTagName(x)}:function(x,C){var A,E=[],z=0,L=C.getElementsByTagName(x);if("*"!==x)return L;for(;A=L[z++];)1===A.nodeType&&E.push(A);return E},Yo.find.CLASS=Da.getElementsByClassName&&function(x,C){if(ta)return C.getElementsByClassName(x)},dd=[],eu=[],Da.disconnectedMatch=!0,eu=eu.length&&new RegExp(eu.join("|")),dd=dd.length&&new RegExp(dd.join("|")),d=Ro.test(va.compareDocumentPosition),Xd=d||Ro.test(va.contains)?function(x,C){var A=9===x.nodeType?x.documentElement:x,E=C&&C.parentNode;return x===E||!(!E||1!==E.nodeType||!(A.contains?A.contains(E):x.compareDocumentPosition&&16&x.compareDocumentPosition(E)))}:function(x,C){if(C)for(;C=C.parentNode;)if(C===x)return!0;return!1},Wu=d?function(x,C){return x===C?(Ug=!0,0):(A=!x.compareDocumentPosition-!C.compareDocumentPosition)||(1&(A=(x.ownerDocument||x)===(C.ownerDocument||C)?x.compareDocumentPosition(C):1)||!Da.sortDetached&&C.compareDocumentPosition(x)===A?x===g||x.ownerDocument===fd&&Xd(fd,x)?-1:C===g||C.ownerDocument===fd&&Xd(fd,C)?1:yu?uh.call(yu,x)-uh.call(yu,C):0:4&A?-1:1);var A}:function(x,C){if(x===C)return Ug=!0,0;var A,E=0,z=x.parentNode,L=C.parentNode,U=[x],V=[C];if(!z||!L)return x===g?-1:C===g?1:z?-1:L?1:yu?uh.call(yu,x)-uh.call(yu,C):0;if(z===L)return _b(x,C);for(A=x;A=A.parentNode;)U.unshift(A);for(A=C;A=A.parentNode;)V.unshift(A);for(;U[E]===V[E];)E++;return E?_b(U[E],V[E]):U[E]===fd?-1:V[E]===fd?1:0},g):ll},_o.matches=function(a,d){return _o(a,null,null,d)},_o.matchesSelector=function(a,d){if((a.ownerDocument||a)!==ll&&cd(a),d=d.replace(hd,"='$1']"),Da.matchesSelector&&ta&&(!dd||!dd.test(d))&&(!eu||!eu.test(d)))try{var g=(void 0).call(a,d);if(g||Da.disconnectedMatch||a.document&&11!==a.document.nodeType)return g}catch(v){}return 0<_o(d,ll,null,[a]).length},_o.contains=function(a,d){return(a.ownerDocument||a)!==ll&&cd(a),Xd(a,d)},_o.attr=function(a,d){(a.ownerDocument||a)!==ll&&cd(a);var g=Yo.attrHandle[d.toLowerCase()],v=g&&tu.call(Yo.attrHandle,d.toLowerCase())?g(a,d,!ta):void 0;return void 0!==v?v:Da.attributes||!ta?a.getAttribute(d):(v=a.getAttributeNode(d))&&v.specified?v.value:null},_o.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},_o.uniqueSort=function(a){var d,g=[],v=0,x=0;if(Ug=!Da.detectDuplicates,yu=!Da.sortStable&&a.slice(0),a.sort(Wu),Ug){for(;d=a[x++];)d===a[x]&&(v=g.push(x));for(;v--;)a.splice(g[v],1)}return yu=null,a},dv=_o.getText=function(a){var d,g="",v=0,x=a.nodeType;if(x){if(1===x||9===x||11===x){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)g+=dv(a)}else if(3===x||4===x)return a.nodeValue}else for(;d=a[v++];)g+=dv(d);return g},(Yo=_o.selectors={cacheLength:50,createPseudo:$d,match:Kl,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(nu,ul),a[3]=(a[3]||a[4]||a[5]||"").replace(nu,ul),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||_o.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&_o.error(a[0]),a},PSEUDO:function(a){var d,g=!a[6]&&a[2];return Kl.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":g&&kf.test(g)&&(d=Jh(g,!0))&&(d=g.indexOf(")",g.length-d)-g.length)&&(a[0]=a[0].slice(0,d),a[2]=g.slice(0,d)),a.slice(0,3))}},filter:{TAG:function(a){var d=a.replace(nu,ul).toLowerCase();return"*"===a?function(){return!0}:function(g){return g.nodeName&&g.nodeName.toLowerCase()===d}},CLASS:function(a){var d=Hu[a+" "];return d||(d=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&Hu(a,function(g){return d.test("string"==typeof g.className&&g.className||typeof g.getAttribute!=Bs&&g.getAttribute("class")||"")})},ATTR:function(a,d,g){return function(v){var x=_o.attr(v,a);return null==x?"!="===d:!d||(x+="","="===d?x===g:"!="===d?x!==g:"^="===d?g&&0===x.indexOf(g):"*="===d?g&&-1<x.indexOf(g):"$="===d?g&&x.slice(-g.length)===g:"~="===d?-1<(" "+x+" ").indexOf(g):"|="===d&&(x===g||x.slice(0,g.length+1)===g+"-"))}},CHILD:function(a,d,g,v,x){var C="nth"!==a.slice(0,3),A="last"!==a.slice(-4),E="of-type"===d;return 1===v&&0===x?function(z){return!!z.parentNode}:function(z,L,U){var V,Z,ee,oe,re,ie,ue=C!=A?"nextSibling":"previousSibling",de=z.parentNode,he=E&&z.nodeName.toLowerCase(),Ie=!U&&!E;if(de){if(C){for(;ue;){for(ee=z;ee=ee[ue];)if(E?ee.nodeName.toLowerCase()===he:1===ee.nodeType)return!1;ie=ue="only"===a&&!ie&&"nextSibling"}return!0}if(ie=[A?de.firstChild:de.lastChild],A&&Ie){for(re=(V=(Z=de[Xi]||(de[Xi]={}))[a]||[])[0]===$l&&V[1],oe=V[0]===$l&&V[2],ee=re&&de.childNodes[re];ee=++re&&ee&&ee[ue]||(oe=re=0)||ie.pop();)if(1===ee.nodeType&&++oe&&ee===z){Z[a]=[$l,re,oe];break}}else if(Ie&&(V=(z[Xi]||(z[Xi]={}))[a])&&V[0]===$l)oe=V[1];else for(;(ee=++re&&ee&&ee[ue]||(oe=re=0)||ie.pop())&&((E?ee.nodeName.toLowerCase()!==he:1!==ee.nodeType)||!++oe||(Ie&&((ee[Xi]||(ee[Xi]={}))[a]=[$l,oe]),ee!==z)););return(oe-=x)===v||oe%v==0&&0<=oe/v}}},PSEUDO:function(a,d){var g,v=Yo.pseudos[a]||Yo.setFilters[a.toLowerCase()]||_o.error("unsupported pseudo: "+a);return v[Xi]?v(d):1<v.length?(g=[a,a,"",d],Yo.setFilters.hasOwnProperty(a.toLowerCase())?$d(function(x,C){for(var A,E=v(x,d),z=E.length;z--;)x[A=uh.call(x,E[z])]=!(C[A]=E[z])}):function(x){return v(x,0,g)}):v}},pseudos:{not:$d(function(a){var d=[],g=[],v=Zm(a.replace(cl,"$1"));return v[Xi]?$d(function(x,C,A,E){for(var z,L=v(x,null,E,[]),U=x.length;U--;)(z=L[U])&&(x[U]=!(C[U]=z))}):function(x,C,A){return d[0]=x,v(d,null,A,g),d[0]=null,!g.pop()}}),has:$d(function(a){return function(d){return 0<_o(a,d).length}}),contains:$d(function(a){return a=a.replace(nu,ul),function(d){return-1<(d.textContent||d.innerText||dv(d)).indexOf(a)}}),lang:$d(function(a){return gd.test(a||"")||_o.error("unsupported lang: "+a),a=a.replace(nu,ul).toLowerCase(),function(d){var g;do{if(g=ta?d.lang:d.getAttribute("xml:lang")||d.getAttribute("lang"))return(g=g.toLowerCase())===a||0===g.indexOf(a+"-")}while((d=d.parentNode)&&1===d.nodeType);return!1}}),target:function(a){var d=window.location&&window.location.hash;return d&&d.slice(1)===a.id},root:function(a){return a===va},focus:function(a){return a===ll.activeElement&&(!ll.hasFocus||ll.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var d=a.nodeName.toLowerCase();return"input"===d&&!!a.checked||"option"===d&&!!a.selected},selected:function(a){return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!Yo.pseudos.empty(a)},header:function(a){return gv.test(a.nodeName)},input:function(a){return hv.test(a.nodeName)},button:function(a){var d=a.nodeName.toLowerCase();return"input"===d&&"button"===a.type||"button"===d},text:function(a){var d;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(d=a.getAttribute("type"))||"text"===d.toLowerCase())},first:eg(function(){return[0]}),last:eg(function(a,d){return[d-1]}),eq:eg(function(a,d,g){return[g<0?g+d:g]}),even:eg(function(a,d){for(var g=0;g<d;g+=2)a.push(g);return a}),odd:eg(function(a,d){for(var g=1;g<d;g+=2)a.push(g);return a}),lt:eg(function(a,d,g){for(var v=g<0?g+d:g;0<=--v;)a.push(v);return a}),gt:eg(function(a,d,g){for(var v=g<0?g+d:g;++v<d;)a.push(v);return a})}}).pseudos.nth=Yo.pseudos.eq,on(["radio","checkbox","file","password","image"],function(a){var d;Yo.pseudos[a]=(d=a,function(g){return"input"===g.nodeName.toLowerCase()&&g.type===d})}),on(["submit","reset"],function(a){var d;Yo.pseudos[a]=(d=a,function(g){var v=g.nodeName.toLowerCase();return("input"===v||"button"===v)&&g.type===d})}),Yg.prototype=Yo.filters=Yo.pseudos,Yo.setFilters=new Yg,Jh=_o.tokenize=function(a,d){var g,v,x,C,A,E,z,L=wf[a+" "];if(L)return d?0:L.slice(0);for(A=a,E=[],z=Yo.preFilter;A;){for(C in g&&!(v=xb.exec(A))||(v&&(A=A.slice(v[0].length)||A),E.push(x=[])),g=!1,(v=ys.exec(A))&&(g=v.shift(),x.push({value:g,type:v[0].replace(cl," ")}),A=A.slice(g.length)),Yo.filter)Yo.filter.hasOwnProperty(C)&&(!(v=Kl[C].exec(A))||z[C]&&!(v=z[C](v))||(g=v.shift(),x.push({value:g,type:C,matches:v}),A=A.slice(g.length)));if(!g)break}return d?A.length:A?_o.error(a):wf(a,E).slice(0)},Zm=_o.compile=function(a,d){var g,v,x,C,A,E=[],z=[],L=Sf[a+" "];if(!L){for(g=(d=d||Jh(a)).length;g--;)((L=function V(Z){for(var ee,oe,re,ie=Z.length,ue=Yo.relative[Z[0].type],de=ue||Yo.relative[" "],he=ue?1:0,Ie=Gu(function(Se){return Se===ee},de,!0),We=Gu(function(Se){return-1<uh.call(ee,Se)},de,!0),ve=[function(Se,Oe,Je){var ct=!ue&&(Je||Oe!==Vu)||((ee=Oe).nodeType?Ie:We)(Se,Oe,Je);return ee=null,ct}];he<ie;he++)if(oe=Yo.relative[Z[he].type])ve=[Gu(Tf(ve),oe)];else{if((oe=Yo.filter[Z[he].type].apply(null,Z[he].matches))[Xi]){for(re=++he;re<ie&&!Yo.relative[Z[re].type];re++);return function Se(Oe,Je,ct,gt,Ge,Qe){return gt&&!gt[Xi]&&(gt=Se(gt)),Ge&&!Ge[Xi]&&(Ge=Se(Ge,Qe)),$d(function(Ye,et,Ct,en){var sn,Tt,Dt,xn=[],bn=[],Jt=et.length,Xn=Ye||function(tn,An,Hn){for(var mo=0,Ae=An.length;mo<Ae;mo++)_o(tn,An[mo],Hn);return Hn}(Je||"*",Ct.nodeType?[Ct]:Ct,[]),Bt=!Oe||!Ye&&Je?Xn:tg(Xn,xn,Oe,Ct,en),Tn=ct?Ge||(Ye?Oe:Jt||gt)?[]:et:Bt;if(ct&&ct(Bt,Tn,Ct,en),gt)for(sn=tg(Tn,bn),gt(sn,[],Ct,en),Tt=sn.length;Tt--;)(Dt=sn[Tt])&&(Tn[bn[Tt]]=!(Bt[bn[Tt]]=Dt));if(Ye){if(Ge||Oe){if(Ge){for(sn=[],Tt=Tn.length;Tt--;)(Dt=Tn[Tt])&&sn.push(Bt[Tt]=Dt);Ge(null,Tn=[],sn,en)}for(Tt=Tn.length;Tt--;)(Dt=Tn[Tt])&&-1<(sn=Ge?uh.call(Ye,Dt):xn[Tt])&&(Ye[sn]=!(et[sn]=Dt))}}else Tn=tg(Tn===et?Tn.splice(Jt,Tn.length):Tn),Ge?Ge(null,et,Tn,en):Ml.apply(et,Tn)})}(1<he&&Tf(ve),1<he&&Km(Z.slice(0,he-1).concat({value:" "===Z[he-2].type?"*":""})).replace(cl,"$1"),oe,he<re&&V(Z.slice(he,re)),re<ie&&V(Z=Z.slice(re)),re<ie&&Km(Z))}ve.push(oe)}return Tf(ve)}(d[g]))[Xi]?E:z).push(L);(L=Sf(a,(v=z,C=0<(x=E).length,A=0<v.length,C?$d(U):U))).selector=a}function U(V,Z,ee,oe,re){var ie,ue,de,he=0,Ie="0",We=V&&[],ve=[],Se=Vu,Oe=V||A&&Yo.find.TAG("*",re),Je=$l+=null==Se?1:Math.random()||.1,ct=Oe.length;for(re&&(Vu=Z!==ll&&Z);Ie!==ct&&null!=(ie=Oe[Ie]);Ie++){if(A&&ie){for(ue=0;de=v[ue++];)if(de(ie,Z,ee)){oe.push(ie);break}re&&($l=Je)}C&&((ie=!de&&ie)&&he--,V&&We.push(ie))}if(he+=Ie,C&&Ie!==he){for(ue=0;de=x[ue++];)de(We,ve,Z,ee);if(V){if(0<he)for(;Ie--;)We[Ie]||ve[Ie]||(ve[Ie]=$m.call(oe));ve=tg(ve)}Ml.apply(oe,ve),re&&!V&&0<ve.length&&1<he+x.length&&_o.uniqueSort(oe)}return re&&($l=Je,Vu=Se),We}return L},jg=_o.select=function(a,d,g,v){var x,C,A,E,z,L="function"==typeof a&&a,U=!v&&Jh(a=L.selector||a);if(g=g||[],1===U.length){if(2<(C=U[0]=U[0].slice(0)).length&&"ID"===(A=C[0]).type&&Da.getById&&9===d.nodeType&&ta&&Yo.relative[C[1].type]){if(!(d=(Yo.find.ID(A.matches[0].replace(nu,ul),d)||[])[0]))return g;L&&(d=d.parentNode),a=a.slice(C.shift().value.length)}for(x=Kl.needsContext.test(a)?0:C.length;x--&&!Yo.relative[E=(A=C[x]).type];)if((z=Yo.find[E])&&(v=z(A.matches[0].replace(nu,ul),Jl.test(C[0].type)&&Mf(d.parentNode)||d))){if(C.splice(x,1),!(a=v.length&&Km(C)))return Ml.apply(g,v),g;break}}return(L||Zm(a,U))(v,d,!ta,g,Jl.test(a)&&Mf(d.parentNode)||d),g},Da.sortStable=Xi.split("").sort(Wu).join("")===Xi,Da.detectDuplicates=!!Ug,cd(),Da.sortDetached=!0;var Uu=document,Qr=Array.prototype.push,wb=Array.prototype.slice,Jm=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Qm=Kh.Event,a1=At.makeMap("children,contents,next,prev"),pd=function(a,d,g,v){var x;if(ju(d))d=Ts(d,tp(a[0]));else if(d.length&&!d.nodeType){if(d=Gr.makeArray(d),v)for(x=d.length-1;0<=x;x--)pd(a,d[x],g,v);else for(x=0;x<d.length;x++)pd(a,d[x],g,v);return a}if(d.nodeType)for(x=a.length;x--;)g.call(a[x],d);return a},zs=At.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),vc=At.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),ep={for:"htmlFor",class:"className",readonly:"readOnly"},Aa={float:"cssFloat"},vd={},bu={},ch=/^\s*|\s*$/g,tp=function(a){return a?9===a.nodeType?a:a.ownerDocument:Uu};function $0(a,d,g){var v=[],x=a[d];for("string"!=typeof g&&g instanceof Gr&&(g=g[0]);x&&9!==x.nodeType&&(void 0===g||!(x===g||"string"==typeof g&&Gr(x).is(g)));)1===x.nodeType&&v.push(x),x=x[d];return v}function Sb(a,d,g,v){var x=[];for(v instanceof Gr&&(v=v[0]);a;a=a[d])if(!g||a.nodeType===g){if(void 0!==v&&(a===v||"string"==typeof v&&Gr(a).is(v)))break;x.push(a)}return x}function Cb(a,d,g){for(a=a[d];a;a=a[d])if(a.nodeType===g)return a;return null}function kb(a,d){var g=d.attr("style"),v=a.serialize(a.parse(g),d[0].nodeName)||null;d.attr("data-mce-style",v)}function vo(a,d){var g,v,x=0;if(a)for(g=a.nodeType,a=a.previousSibling;a;a=a.previousSibling)v=a.nodeType,(!d||3!==v||v!==g&&a.nodeValue.length)&&(x++,g=v);return x}ru.fn=ru.prototype={constructor:ru,selector:"",context:null,length:0,init:function(a,d){var g,v,x=this;if(!a)return x;if(a.nodeType)return x.context=x[0]=a,x.length=1,x;if(d&&d.nodeType)x.context=d;else{if(d)return Gr(a).attr(d);x.context=d=document}if(ju(a)){if(!(g="<"===(x.selector=a).charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Jm.exec(a)))return Gr(d).find(a);if(g[1])for(v=Ts(a,tp(d)).firstChild;v;)Qr.call(x,v),v=v.nextSibling;else{if(!(v=tp(d).getElementById(g[2])))return x;if(v.id!==g[2])return x.find(a);x.length=1,x[0]=v}}else this.add(a,!1);return x},toArray:function(){return At.toArray(this)},add:function(a,d){var g,v;if(ju(a))return this.add(Gr(a));if(!1!==d)for(g=Gr.unique(this.toArray().concat(Gr.makeArray(a))),this.length=g.length,v=0;v<g.length;v++)this[v]=g[v];else Qr.apply(this,Gr.makeArray(a));return this},attr:function(a,d){var g,v=this;if("object"==typeof a)md(a,function(x,C){v.attr(x,C)});else{if(!Df(d)){if(v[0]&&1===v[0].nodeType){if((g=vd[a])&&g.get)return g.get(v[0],a);if(vc[a])return v.prop(a)?a:void 0;null===(d=v[0].getAttribute(a,2))&&(d=void 0)}return d}this.each(function(){var x;1===this.nodeType&&((x=vd[a])&&x.set?x.set(this,d):null===d?this.removeAttribute(a,2):this.setAttribute(a,d,2))})}return v},removeAttr:function(a){return this.attr(a,null)},prop:function(a,d){var g=this;if("object"==typeof(a=ep[a]||a))md(a,function(v,x){g.prop(v,x)});else{if(!Df(d))return g[0]&&g[0].nodeType&&a in g[0]?g[0][a]:d;this.each(function(){1===this.nodeType&&(this[a]=d)})}return g},css:function(a,d){function g(E){return E.replace(/-(\D)/g,function(z,L){return L.toUpperCase()})}function v(E){return E.replace(/[A-Z]/g,function(z){return"-"+z})}var x,C,A=this;if("object"==typeof a)md(a,function(E,z){A.css(E,z)});else if(Df(d))a=g(a),"number"!=typeof d||zs[a]||(d=d.toString()+"px"),A.each(function(){var E=this.style;if((C=bu[a])&&C.set)C.set(this,d);else{try{this.style[Aa[a]||a]=d}catch(z){}null!==d&&""!==d||(E.removeProperty?E.removeProperty(v(a)):E.removeAttribute(a))}});else{if(x=A[0],(C=bu[a])&&C.get)return C.get(x);if(!x.ownerDocument.defaultView)return x.currentStyle?x.currentStyle[g(a)]:"";try{return x.ownerDocument.defaultView.getComputedStyle(x,null).getPropertyValue(v(a))}catch(E){return}}return A},remove:function(){for(var a,d=this.length;d--;)Qm.clean(a=this[d]),a.parentNode&&a.parentNode.removeChild(a);return this},empty:function(){for(var a,d=this.length;d--;)for(a=this[d];a.firstChild;)a.removeChild(a.firstChild);return this},html:function(a){var d;if(Df(a)){d=this.length;try{for(;d--;)this[d].innerHTML=a}catch(g){Gr(this[d]).empty().append(a)}return this}return this[0]?this[0].innerHTML:""},text:function(a){var d;if(Df(a)){for(d=this.length;d--;)"innerText"in this[d]?this[d].innerText=a:this[0].textContent=a;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return pd(this,arguments,function(a){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(a)})},prepend:function(){return pd(this,arguments,function(a){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(a,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?pd(this,arguments,function(a){this.parentNode.insertBefore(a,this)}):this},after:function(){return this[0]&&this[0].parentNode?pd(this,arguments,function(a){this.parentNode.insertBefore(a,this.nextSibling)},!0):this},appendTo:function(a){return Gr(a).append(this),this},prependTo:function(a){return Gr(a).prepend(this),this},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return i1(this,a)},wrapAll:function(a){return i1(this,a,!0)},wrapInner:function(a){return this.each(function(){Gr(this).contents().wrapAll(a)}),this},unwrap:function(){return this.parent().each(function(){Gr(this).replaceWith(this.childNodes)})},clone:function(){var a=[];return this.each(function(){a.push(this.cloneNode(!0))}),Gr(a)},addClass:function(a){return this.toggleClass(a,!0)},removeClass:function(a){return this.toggleClass(a,!1)},toggleClass:function(a,d){var g=this;return"string"!=typeof a||(-1!==a.indexOf(" ")?md(a.split(" "),function(){g.toggleClass(this,d)}):g.each(function(v,x){var C,A=dl(x,a);A!==d&&(C=x.className,A?x.className=Y0((" "+C+" ").replace(" "+a+" "," ")):x.className+=C?" "+a:a)})),g},hasClass:function(a){return dl(this[0],a)},each:function(a){return md(this,a)},on:function(a,d){return this.each(function(){Qm.bind(this,a,d)})},off:function(a,d){return this.each(function(){Qm.unbind(this,a,d)})},trigger:function(a){return this.each(function(){"object"==typeof a?Qm.fire(this,a.type,a):Qm.fire(this,a)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return Gr(wb.apply(this,arguments))},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(a){for(var d=[],g=0,v=this.length;g<v;g++)Gr.find(a,this[g],d);return Gr(d)},filter:function(a){return Gr("function"==typeof a?Z0(this.toArray(),function(d,g){return a(g,d)}):Gr.filter(a,this.toArray()))},closest:function(a){var d=[];return a instanceof Gr&&(a=a[0]),this.each(function(g,v){for(;v;){if("string"==typeof a&&Gr(v).is(a)){d.push(v);break}if(v===a){d.push(v);break}v=v.parentNode}}),Gr(d)},offset:function(a){var d,g,v,x,C=0,A=0;return a?this.css(a):((d=this[0])&&(v=(g=d.ownerDocument).documentElement,d.getBoundingClientRect&&(C=(x=d.getBoundingClientRect()).left+(v.scrollLeft||g.body.scrollLeft)-v.clientLeft,A=x.top+(v.scrollTop||g.body.scrollTop)-v.clientTop)),{left:C,top:A})},push:Qr,sort:Array.prototype.sort,splice:Array.prototype.splice},At.extend(ru,{extend:At.extend,makeArray:function(a){return a&&a===a.window||a.nodeType?[a]:At.toArray(a)},inArray:function(a,d){var g;if(d.indexOf)return d.indexOf(a);for(g=d.length;g--;)if(d[g]===a)return g;return-1},isArray:At.isArray,each:md,trim:Y0,grep:Z0,find:_o,expr:_o.selectors,unique:_o.uniqueSort,text:_o.getText,contains:_o.contains,filter:function(a,d,g){var v=d.length;for(g&&(a=":not("+a+")");v--;)1!==d[v].nodeType&&d.splice(v,1);return 1===d.length?Gr.find.matchesSelector(d[0],a)?[d[0]]:[]:Gr.find.matches(a,d)}}),md({parent:function(a){var d=a.parentNode;return d&&11!==d.nodeType?d:null},parents:function(a){return $0(a,"parentNode")},next:function(a){return Cb(a,"nextSibling",1)},prev:function(a){return Cb(a,"previousSibling",1)},children:function(a){return Sb(a.firstChild,"nextSibling",1)},contents:function(a){return At.toArray(("iframe"===a.nodeName?a.contentDocument||a.contentWindow.document:a).childNodes)}},function(a,d){ru.fn[a]=function(g){var v=[];this.each(function(){var C=d.call(v,this,g,v);C&&(Gr.isArray(C)?v.push.apply(v,C):v.push(C))}),1<this.length&&(a1[a]||(v=Gr.unique(v)),0===a.indexOf("parents")&&(v=v.reverse()));var x=Gr(v);return g?x.filter(g):x}}),md({parentsUntil:function(a,d){return $0(a,"parentNode",d)},nextUntil:function(a,d){return Sb(a,"nextSibling",1,d).slice(1)},prevUntil:function(a,d){return Sb(a,"previousSibling",1,d).slice(1)}},function(a,d){ru.fn[a]=function(g,v){var x=[];this.each(function(){var A=d.call(x,this,g,x);A&&(Gr.isArray(A)?x.push.apply(x,A):x.push(A))}),1<this.length&&(x=Gr.unique(x),0!==a.indexOf("parents")&&"prevUntil"!==a||(x=x.reverse()));var C=Gr(x);return v?C.filter(v):C}}),ru.fn.is=function(a){return!!a&&0<this.filter(a).length},ru.fn.init.prototype=ru.fn,ru.overrideDefaults=function(a){var d,g=function(v,x){return d=d||a(),0===arguments.length&&(v=d.element),new g.fn.init(v,x=x||d.context)};return Gr.extend(g,this),g},ru.attrHooks=vd,ru.cssHooks=bu;var Gr=ru,Fs=At.each,Af=At.grep,oo=wr.ie,Vs=/^([a-z0-9],?)+$/i,ci=function(a,d){function g(Ae){return Ae&&a&&xr(Ae)?a.getElementById(Ae):Ae}function v(Ae){return Bt("string"==typeof Ae?g(Ae):Ae)}function x(Ae,Ze,It){var zt,Vt,fn=v(Ae);return void 0===(Vt=fn.length?(zt=mo[Ze])&&zt.get?zt.get(fn,Ze):fn.attr(Ze):Vt)?It||"":Vt}function C(Ae){var Ze=g(Ae);return Ze?Ze.attributes:[]}function A(Ae,Ze,It){""===It&&(It=null);var zt,Vt=v(Ae),fn=Vt.attr(Ze);Vt.length&&((zt=mo[Ze])&&zt.set?zt.set(Vt,It,Ze):Vt.attr(Ze,It),fn!==It&&d.onSetAttrib&&d.onSetAttrib({attrElm:Vt,attrName:Ze,attrValue:It}))}function E(){return d.root_element||a.body}function z(Ae,Ze){return function(It,zt,Vt){var fn,nr=0,Ir=0,bi=It.ownerDocument;if(Vt=Vt||It,zt){if(Vt===It&&zt.getBoundingClientRect&&"static"===ks(it.fromDom(It),"position")){var di=zt.getBoundingClientRect();return{x:nr=di.left+(bi.documentElement.scrollLeft||It.scrollLeft)-bi.documentElement.clientLeft,y:Ir=di.top+(bi.documentElement.scrollTop||It.scrollTop)-bi.documentElement.clientTop}}for(var ir=zt;ir&&ir!==Vt&&ir.nodeType&&!Ms(ir,Vt);)nr+=ir.offsetLeft||0,Ir+=ir.offsetTop||0,ir=ir.offsetParent;for(ir=zt.parentNode;ir&&ir!==Vt&&ir.nodeType&&!Ms(ir,Vt);)nr-=ir.scrollLeft||0,Ir-=ir.scrollTop||0,ir=ir.parentNode;Ir+=(fn=it.fromDom(zt),pu.isFirefox()&&"table"===Oi(fn)?Cl(pn(fn)).filter(function(Ii){return"caption"===Oi(Ii)}).bind(function(Ii){return Cl(es(Ii)).map(function(fu){return fu.dom.offsetTop<=Ii.dom.offsetTop?-Ii.dom.offsetHeight:0})}).getOr(0):0)}return{x:nr,y:Ir}}(a.body,g(Ae),Ze)}function L(Ae,Ze,It){var zt=v(Ae);return It?zt.css(Ze):("float"===(Ze=Ze.replace(/-(\D)/g,function(Vt,fn){return fn.toUpperCase()}))&&(Ze=wr.browser.isIE()?"styleFloat":"cssFloat"),zt[0]&&zt[0].style?zt[0].style[Ze]:void 0)}function U(Ae){var Ze=L(Ae=g(Ae),"width"),It=L(Ae,"height");return-1===Ze.indexOf("px")&&(Ze=0),-1===It.indexOf("px")&&(It=0),{w:parseInt(Ze,10)||Ae.offsetWidth||Ae.clientWidth,h:parseInt(It,10)||Ae.offsetHeight||Ae.clientHeight}}function V(Ae,Ze){if(!Ae)return!1;if(!Array.isArray(Ae)){if("*"===Ze)return 1===Ae.nodeType;if(Vs.test(Ze)){for(var It=Ze.toLowerCase().split(/,/),zt=Ae.nodeName.toLowerCase(),Vt=It.length-1;0<=Vt;Vt--)if(It[Vt]===zt)return!0;return!1}if(Ae.nodeType&&1!==Ae.nodeType)return!1}var fn=Array.isArray(Ae)?Ae:[Ae];return 0<_o(Ze,fn[0].ownerDocument||fn[0],null,fn).length}function Z(Ae,Ze,It,zt){var Vt,fn=[],nr=g(Ae);for(zt=void 0===zt,It=It||("BODY"!==E().nodeName?E().parentNode:null),At.is(Ze,"string")&&(Ze="*"===(Vt=Ze)?function(Ir){return 1===Ir.nodeType}:function(Ir){return V(Ir,Vt)});nr&&!(nr===It||En(nr.nodeType)||yf(nr)||bf(nr));){if(!Ze||"function"==typeof Ze&&Ze(nr)){if(!zt)return[nr];fn.push(nr)}nr=nr.parentNode}return zt?fn:null}function ee(Ae,Ze,It){var zt=Ze;if(Ae)for("string"==typeof Ze&&(zt=function(Vt){return V(Vt,Ze)}),Ae=Ae[It];Ae;Ae=Ae[It])if("function"==typeof zt&&zt(Ae))return Ae;return null}function oe(Ae,Ze,It){var zt,Vt="string"==typeof Ae?g(Ae):Ae;return!!Vt&&(At.isArray(Vt)&&(Vt.length||0===Vt.length)?(zt=[],Fs(Vt,function(fn,nr){fn&&zt.push(Ze.call(It,"string"==typeof fn?g(fn):fn,nr))}),zt):Ze.call(It||this,Vt))}function re(Ae,Ze){v(Ae).each(function(It,zt){Fs(Ze,function(Vt,fn){A(zt,fn,Vt)})})}function ie(Ae,Ze){var It=v(Ae);oo?It.each(function(zt,Vt){if(!1!==Vt.canHaveHTML){for(;Vt.firstChild;)Vt.removeChild(Vt.firstChild);try{Vt.innerHTML="<br>"+Ze,Vt.removeChild(Vt.firstChild)}catch(fn){Gr("<div></div>").html("<br>"+Ze).contents().slice(1).appendTo(Vt)}return Ze}}):It.html(Ze)}function ue(Ae,Ze,It,zt,Vt){return oe(Ae,function(fn){var nr="string"==typeof Ze?a.createElement(Ze):Ze;return re(nr,It),zt&&("string"!=typeof zt&&zt.nodeType?nr.appendChild(zt):"string"==typeof zt&&ie(nr,zt)),Vt?nr:fn.appendChild(nr)})}function de(Ae,Ze,It){return ue(a.createElement(Ae),Ae,Ze,It,!0)}function he(Ae,Ze){var It=v(Ae);return(Ze?It.each(function(){for(var zt;zt=this.firstChild;)3===zt.nodeType&&0===zt.data.length?this.removeChild(zt):this.parentNode.insertBefore(zt,this)}):It).remove(),1<It.length?It.toArray():It[0]}function Ie(Ae,Ze,It){v(Ae).toggleClass(Ze,It).each(function(){""===this.className&&Gr(this).attr("class",null)})}function We(Ae,Ze,It){return oe(Ze,function(zt){return At.is(zt,"array")&&(Ae=Ae.cloneNode(!0)),It&&Fs(Af(zt.childNodes),function(Vt){Ae.appendChild(Vt)}),zt.parentNode.replaceChild(Ae,zt)})}function ve(Ae){if(Mr(Ae)){var Ze="a"===Ae.nodeName.toLowerCase()&&!x(Ae,"href")&&x(Ae,"id");return x(Ae,"name")||x(Ae,"data-mce-bookmark")||Ze?1:void 0}}function Se(){return a.createRange()}function Oe(Ae){if(Ae&&Mr(Ae)){var Ze=Ae.getAttribute("data-mce-contenteditable");return Ze&&"inherit"!==Ze?Ze:"inherit"!==Ae.contentEditable?Ae.contentEditable:null}return null}void 0===d&&(d={});var Je,ct,gt,Ge,Qe,Ye,et={},Ct=window,en={},sn=0,Tt=qh.forElement(it.fromDom(a),{contentCssCors:d.contentCssCors,referrerPolicy:d.referrerPolicy}),Dt=[],xn=d.schema||Xe({}),bn=an({url_converter:d.url_converter,url_converter_scope:d.url_converter_scope},d.schema),Jt=d.ownEvents?new Kh:Kh.Event,Xn=xn.getBlockElements(),Bt=Gr.overrideDefaults(function(){return{context:a,element:Hn.getRoot()}}),Tn=Xa.encodeAllRaw,tn=function(Ae,Ze,It,zt){if(At.isArray(Ae)){for(var Vt=Ae.length,fn=[];Vt--;)fn[Vt]=tn(Ae[Vt],Ze,It,zt);return fn}return!d.collect||Ae!==a&&Ae!==Ct||Dt.push([Ae,Ze,It,zt]),Jt.bind(Ae,Ze,It,zt||Hn)},An=function(Ae,Ze,It){if(At.isArray(Ae)){for(var zt=Ae.length,Vt=[];zt--;)Vt[zt]=An(Ae[zt],Ze,It);return Vt}if(0<Dt.length&&(Ae===a||Ae===Ct))for(zt=Dt.length;zt--;){var fn=Dt[zt];Ae!==fn[0]||Ze&&Ze!==fn[1]||It&&It!==fn[2]||Jt.unbind(fn[0],fn[1],fn[2])}return Jt.unbind(Ae,Ze,It)},Hn={doc:a,settings:d,win:Ct,files:en,stdMode:!0,boxModel:!0,styleSheetLoader:Tt,boundEvents:Dt,styles:bn,schema:xn,events:Jt,isBlock:function(Ae){if("string"==typeof Ae)return!!Xn[Ae];if(Ae){var Ze=Ae.nodeType;if(Ze)return!(1!==Ze||!Xn[Ae.nodeName])}return!1},$:Bt,$$:v,root:null,clone:function(Ae,Ze){if(!oo||1!==Ae.nodeType||Ze)return Ae.cloneNode(Ze);var It=a.createElement(Ae.nodeName);return Fs(C(Ae),function(zt){A(It,zt.nodeName,x(Ae,zt.nodeName))}),It},getRoot:E,getViewPort:function(Ae){var Ze=Po(Ae);return{x:Ze.x,y:Ze.y,w:Ze.width,h:Ze.height}},getRect:function(Ae){var Ze=z(Ae=g(Ae)),It=U(Ae);return{x:Ze.x,y:Ze.y,w:It.w,h:It.h}},getSize:U,getParent:function(Ae,Ze,It){var zt=Z(Ae,Ze,It,!1);return zt&&0<zt.length?zt[0]:null},getParents:Z,get:g,getNext:function(Ae,Ze){return ee(Ae,Ze,"nextSibling")},getPrev:function(Ae,Ze){return ee(Ae,Ze,"previousSibling")},select:function(Ae,Ze){return _o(Ae,g(Ze)||d.root_element||a,[])},is:V,add:ue,create:de,createHTML:function(Ae,Ze,It){var zt,Vt="";for(zt in Vt+="<"+Ae,Ze)po(Ze,zt)&&(Vt+=" "+zt+'="'+Tn(Ze[zt])+'"');return void 0!==It?Vt+">"+It+"</"+Ae+">":Vt+" />"},createFragment:function(Ae){var Ze,It=a.createElement("div"),zt=a.createDocumentFragment();for(zt.appendChild(It),Ae&&(It.innerHTML=Ae);Ze=It.firstChild;)zt.appendChild(Ze);return zt.removeChild(It),zt},remove:he,setStyle:function(Ae,Ze,It){var zt=xr(Ze)?v(Ae).css(Ze,It):v(Ae).css(Ze);d.update_styles&&kb(bn,zt)},getStyle:L,setStyles:function(Ae,Ze){var It=v(Ae).css(Ze);d.update_styles&&kb(bn,It)},removeAllAttribs:function(Ae){return oe(Ae,function(Ze){for(var It=Ze.attributes,zt=It.length-1;0<=zt;zt--)Ze.removeAttributeNode(It.item(zt))})},setAttrib:A,setAttribs:re,getAttrib:x,getPos:z,parseStyle:function(Ae){return bn.parse(Ae)},serializeStyle:function(Ae,Ze){return bn.serialize(Ae,Ze)},addStyle:function(Ae){var Ze,It;if(Hn!==ci.DOM&&a===document){if(et[Ae])return;et[Ae]=!0}(It=a.getElementById("mceDefaultStyles"))||((It=a.createElement("style")).id="mceDefaultStyles",It.type="text/css",(Ze=a.getElementsByTagName("head")[0]).firstChild?Ze.insertBefore(It,Ze.firstChild):Ze.appendChild(It)),It.styleSheet?It.styleSheet.cssText+=Ae:It.appendChild(a.createTextNode(Ae))},loadCSS:function(Ae){on((Ae=Ae||"").split(","),function(Ze){en[Ze]=!0,Tt.load(Ze,Ut)})},addClass:function(Ae,Ze){v(Ae).addClass(Ze)},removeClass:function(Ae,Ze){Ie(Ae,Ze,!1)},hasClass:function(Ae,Ze){return v(Ae).hasClass(Ze)},toggleClass:Ie,show:function(Ae){v(Ae).show()},hide:function(Ae){v(Ae).hide()},isHidden:function(Ae){return"none"===v(Ae).css("display")},uniqueId:function(Ae){return(Ae||"mce_")+sn++},setHTML:ie,getOuterHTML:function(Ae){var Ze="string"==typeof Ae?g(Ae):Ae;return Mr(Ze)?Ze.outerHTML:Gr("<div></div>").append(Gr(Ze).clone()).html()},setOuterHTML:function(Ae,Ze){v(Ae).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=Ze)}catch(It){}he(Gr(this).html(Ze),!0)})},decode:Xa.decode,encode:Tn,insertAfter:function(Ae,Ze){var It=g(Ze);return oe(Ae,function(zt){var Vt=It.parentNode,fn=It.nextSibling;return fn?Vt.insertBefore(zt,fn):Vt.appendChild(zt),zt})},replace:We,rename:function(Ae,Ze){var It;return Ae.nodeName!==Ze.toUpperCase()&&(It=de(Ze),Fs(C(Ae),function(zt){A(It,zt.nodeName,x(Ae,zt.nodeName))}),We(It,Ae,!0)),It||Ae},findCommonAncestor:function(Ae,Ze){for(var It,zt=Ae;zt;){for(It=Ze;It&&zt!==It;)It=It.parentNode;if(zt===It)break;zt=zt.parentNode}return!zt&&Ae.ownerDocument?Ae.ownerDocument.documentElement:zt},toHex:function(Ae){return bn.toHex(At.trim(Ae))},run:oe,getAttribs:C,isEmpty:function(Ae,Ze){var It,zt,Vt=0;if(ve(Ae))return!1;if(Ae=Ae.firstChild){var fn=new ea(Ae,Ae.parentNode),nr=xn?xn.getWhiteSpaceElements():{};Ze=Ze||(xn?xn.getNonEmptyElements():null);do{if(It=Ae.nodeType,Mr(Ae)){var Ir=Ae.getAttribute("data-mce-bogus");if(Ir){Ae=fn.next("all"===Ir);continue}if(zt=Ae.nodeName.toLowerCase(),Ze&&Ze[zt]){if("br"!==zt)return!1;Vt++,Ae=fn.next();continue}if(ve(Ae))return!1}if(8===It||3===It&&!N(Ae.nodeValue)||3===It&&Ae.parentNode&&nr[Ae.parentNode.nodeName]&&N(Ae.nodeValue))return!1;Ae=fn.next()}while(Ae)}return Vt<=1},createRng:Se,nodeIndex:vo,split:function(Ae,Ze,It){var zt,Vt,fn,nr=Se();if(Ae&&Ze)return nr.setStart(Ae.parentNode,vo(Ae)),nr.setEnd(Ze.parentNode,vo(Ze)),zt=nr.extractContents(),(nr=Se()).setStart(Ze.parentNode,vo(Ze)+1),nr.setEnd(Ae.parentNode,vo(Ae)+1),Vt=nr.extractContents(),(fn=Ae.parentNode).insertBefore(Qs(Hn,zt),Ae),fn.insertBefore(It||Ze,Ae),fn.insertBefore(Qs(Hn,Vt),Ae),he(Ae),It||Ze},bind:tn,unbind:An,fire:function(Ae,Ze,It){return Jt.fire(Ae,Ze,It)},getContentEditable:Oe,getContentEditableParent:function(Ae){for(var Ze=E(),It=null;Ae&&Ae!==Ze&&null===(It=Oe(Ae));Ae=Ae.parentNode);return It},destroy:function(){if(0<Dt.length)for(var Ae=Dt.length;Ae--;){var Ze=Dt[Ae];Jt.unbind(Ze[0],Ze[1],Ze[2])}qt(en,function(It,zt){Tt.unload(zt),delete en[zt]}),_o.setDocument&&_o.setDocument()},isChildOf:function(Ae,Ze){if(oo){for(;Ae;){if(Ze===Ae)return!0;Ae=Ae.parentNode}return!1}return Ae===Ze||Ze.contains(Ae)},dumpRng:function(Ae){return"startContainer: "+Ae.startContainer.nodeName+", startOffset: "+Ae.startOffset+", endContainer: "+Ae.endContainer.nodeName+", endOffset: "+Ae.endOffset}},mo=(Je=bn,gt=Zt(Hn),Qe={set:function(Ae,Ze,It){ct.url_converter&&null!==Ze&&(Ze=ct.url_converter.call(ct.url_converter_scope||gt(),Ze,It,Ae[0])),Ae.attr("data-mce-"+It,Ze).attr(It,Ze)},get:function(Ae,Ze){return Ae.attr("data-mce-"+Ze)||Ae.attr(Ze)}},Ye={style:{set:function(Ae,Ze){null===Ze||"object"!=typeof Ze?(Ge&&Ae.attr("data-mce-style",Ze),null!==Ze&&"string"==typeof Ze?(Ae.removeAttr("style"),Ae.css(Je.parse(Ze))):Ae.attr("style",Ze)):Ae.css(Ze)},get:function(Ae){var Ze=Ae.attr("data-mce-style")||Ae.attr("style");return Je.serialize(Je.parse(Ze),Ae[0].nodeName)}}},(Ge=(ct=d).keep_values)&&(Ye.href=Ye.src=Qe),Ye);return Hn};ci.DOM=ci(document),ci.nodeIndex=vo;var Mb=ci.DOM,wo=At.each,Bc=At.grep,Pi=(qu.prototype._setReferrerPolicy=function(a){this.settings.referrerPolicy=a},qu.prototype.loadScript=function(a,d,g){function v(){x.remove(C),A&&(A.onerror=A.onload=A=null)}var x=Mb,C=x.uniqueId(),A=document.createElement("script");A.id=C,A.type="text/javascript",A.src=At._addCacheSuffix(a),this.settings.referrerPolicy&&x.setAttrib(A,"referrerpolicy",this.settings.referrerPolicy),A.onload=function(){v(),d()},A.onerror=function(){v(),dn(g)?g():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+a)},(document.getElementsByTagName("head")[0]||document.body).appendChild(A)},qu.prototype.isDone=function(a){return 2===this.states[a]},qu.prototype.markDone=function(a){this.states[a]=2},qu.prototype.add=function(a,d,g,v){var x=this.states[a];this.queue.push(a),void 0===x&&(this.states[a]=0),d&&(this.scriptLoadedCallbacks[a]||(this.scriptLoadedCallbacks[a]=[]),this.scriptLoadedCallbacks[a].push({success:d,failure:v,scope:g||this}))},qu.prototype.load=function(a,d,g,v){return this.add(a,d,g,v)},qu.prototype.remove=function(a){delete this.states[a],delete this.scriptLoadedCallbacks[a]},qu.prototype.loadQueue=function(a,d,g){this.loadScripts(this.queue,a,d,g)},qu.prototype.loadScripts=function(a,d,g,v){function x(z,L){wo(C.scriptLoadedCallbacks[L],function(U){dn(U[z])&&U[z].call(U.scope)}),C.scriptLoadedCallbacks[L]=void 0}var C=this,A=[];C.queueLoadedCallbacks.push({success:d,failure:v,scope:g||this});var E=function(){var z,L=Bc(a);a.length=0,wo(L,function(U){2!==C.states[U]?3!==C.states[U]?1!==C.states[U]&&(C.states[U]=1,C.loading++,C.loadScript(U,function(){C.states[U]=2,C.loading--,x("success",U),E()},function(){C.states[U]=3,C.loading--,A.push(U),x("failure",U),E()})):x("failure",U):x("success",U)}),C.loading||(z=C.queueLoadedCallbacks.slice(0),C.queueLoadedCallbacks.length=0,wo(z,function(U){0===A.length?dn(U.success)&&U.success.call(U.scope):dn(U.failure)&&U.failure.call(U.scope,A)}))};E()},qu.ScriptLoader=new qu,qu);function qu(a){void 0===a&&(a={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=a}function vi(a){var d=a;return{get:function(){return d},set:function(g){d=g}}}function dh(){return Vn(yd,ei.get())}var yd={},ei=vi("en"),fl={getData:function(){return Cn(yd,function(a){return yn({},a)})},setCode:function(a){a&&ei.set(a)},getCode:function(){return ei.get()},add:function(a,d){var g=yd[a];g||(yd[a]=g={}),qt(d,function(v,x){g[x.toLowerCase()]=v})},translate:function(a){function d(L){return dn(L)?Object.prototype.toString.call(L):E(L)?"":""+L}function g(L){var U=d(L);return Vn(A,U.toLowerCase()).map(d).getOr(U)}function v(L){return L.replace(/{context:\w+}$/,"")}var x,C,A=dh().getOr({}),E=function(L){return""===L||null==L};if(E(a))return"";if(Fn(x=a)&&ao(x,"raw"))return d(a.raw);if(un(C=a)&&1<C.length){var z=a.slice(1);return v(g(a[0]).replace(/\{([0-9]+)\}/g,function(L,U){return ao(z,U)?d(z[U]):L}))}return v(g(a))},isRtl:function(){return dh().bind(function(a){return Vn(a,"_dir")}).exists(function(a){return"rtl"===a})},hasCode:function(a){return ao(yd,a)}},Yi=function(){function a(L,U){on(hr(E,function(V){return V.name===L&&V.state===U}),function(V){return V.callback()})}function d(L){return(A[L]?A[L].dependencies:void 0)||[]}function g(L,U){return"object"==typeof U?U:"string"==typeof L?{prefix:"",resource:U,suffix:""}:{prefix:L.prefix,resource:U,suffix:L.suffix}}function v(L,U,V){void 0===V&&(V="added"),ao(A,L)&&"added"===V||ao(C,L)&&"loaded"===V?U():E.push({name:L,state:V,callback:U})}var x=[],C={},A={},E=[],z=function(L,U,V,Z,ee){var oe,re;C[L]||(0!==(oe="string"==typeof U?U:U.prefix+U.resource+U.suffix).indexOf("/")&&-1===oe.indexOf("://")&&(oe=Yi.baseURL+"/"+oe),C[L]=oe.substring(0,oe.lastIndexOf("/")),re=function(){var ie,ue,de;a(L,"loaded"),ie=U,ue=V,de=Z,on(d(L),function(he){var Ie=g(ie,he);z(Ie.resource,Ie,void 0,void 0)}),ue&&ue.call(de||Pi)},A[L]?re():Pi.ScriptLoader.add(oe,re,Z,ee))};return{items:x,urls:C,lookup:A,_listeners:E,get:function(L){if(A[L])return A[L].instance},dependencies:d,requireLangPack:function(L,U){!1!==Yi.languageLoad&&v(L,function(){var V=fl.getCode();!V||U&&-1===(","+(U||"")+",").indexOf(","+V+",")||Pi.ScriptLoader.add(C[L]+"/langs/"+V+".js")},"loaded")},add:function(L,U,V){var Z=U;return x.push(Z),A[L]={instance:Z,dependencies:V},a(L,"added"),Z},remove:function(L){delete C[L],delete A[L]},createUrl:g,addComponents:function(L,U){var V=C[L];on(U,function(Z){Pi.ScriptLoader.add(V+"/"+Z)})},load:z,waitFor:v}};function Hs(){var a,d,g=(a=Ut,d=vi(H.none()),{clear:function(){v(),d.set(H.none())},isSet:function(){return d.get().isSome()},get:function(){return d.get()},set:function(x){v(),d.set(H.some(x))}});function v(){return d.get().each(a)}return yn(yn({},g),{on:function(x){return g.get().each(x)}})}function If(a,d){var g=null;return{cancel:function(){Qn(g)||(clearTimeout(g),g=null)},throttle:function(){for(var v=[],x=0;x<arguments.length;x++)v[x]=arguments[x];Qn(g)&&(g=setTimeout(function(){g=null,a.apply(null,v)},d))}}}function bd(a,d){function g(){Qn(v)||(clearTimeout(v),v=null)}var v=null;return{cancel:g,throttle:function(){for(var x=[],C=0;C<arguments.length;C++)x[C]=arguments[C];g(),v=setTimeout(function(){v=null,a.apply(null,x)},d)}}}function np(a,d){var g=Ga(a,d);return void 0===g||""===g?[]:g.split(" ")}function Zg(a){return void 0!==a.dom.classList}function $g(a,d){var g,v,x;Zg(a)?a.dom.classList.add(d):(v=d,x=np(g=a,"class").concat([v]),Sl(g,"class",x.join(" ")))}function fh(a,d){return Zg(a)&&a.dom.classList.contains(d)}function xu(a,d){return Rt(g=void 0===a?document:a.dom)?[]:xt(g.querySelectorAll(d),it.fromDom);var g}function Tl(a,d){function g(E,z){return(L=E.dom)&&L.hasAttribute&&L.hasAttribute(z)?H.some(Ga(E,z)):H.none();var L}var v=a.selection.getRng(),x=it.fromDom(v.startContainer),C=it.fromDom(a.getBody()),A=d.fold(function(){return"."+sp()},function(E){return"["+iu()+'="'+E+'"]'});return Na(nd(x,v.startOffset).getOr(x),A,function(E){return $t(E,C)}).bind(function(E){return g(E,""+bc()).bind(function(z){return g(E,""+iu()).map(function(L){var U=os(a,z);return{uid:z,name:L,elements:U}})})})}function Ia(a){var d=(new Date).getTime();return a+"_"+Math.floor(1e9*Math.random())+ ++wu+String(d)}function ou(a,d){var g,v,x=Ss(a).dom,C=it.fromDom(x.createDocumentFragment());_l(C,(g=d,(v=(x||document).createElement("div")).innerHTML=g,pn(it.fromDom(v)))),pf(a),Ua(a,C)}function ng(a,d){return it.fromDom(a.dom.cloneNode(d))}function _u(a){return ng(a,!1)}function rp(a){return ng(a,!0)}function xd(a,d,g){function v(C){for(var A;(A=x[C]())&&!In(A)&&!g(A););return H.from(A).filter(In)}void 0===g&&(g=_r);var x=new ea(a,d);return{current:function(){return H.from(x.current()).filter(In)},next:function(){return v("next")},prev:function(){return v("prev")},prev2:function(){return v("prev2")}}}function yc(a,d){var g=d||function(x){return a.isBlock(x)||_i(x)||qr(x)},v=function(x,C,A,E){if(In(x)){var z=E(x,C,x.data);if(-1!==z)return H.some({container:x,offset:z})}return A().bind(function(L){return v(L.container,L.offset,A,E)})};return{backwards:function(x,C,A,E){var z=xd(x,E,g);return v(x,C,function(){return z.prev().map(function(L){return{container:L,offset:L.length}})},A).getOrNull()},forwards:function(x,C,A,E){var z=xd(x,E,g);return v(x,C,function(){return z.next().map(function(L){return{container:L,offset:0}})},A).getOrNull()}}}function hh(a){return a?{left:Ds(a.left),top:Ds(a.top),bottom:Ds(a.bottom),right:Ds(a.right),width:Ds(a.width),height:Ds(a.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function zc(a,d){return a=hh(a),d||(a.left=a.left+a.width),a.right=a.left,a.width=0,a}function mv(a,d,g){return 0<=a&&a<=Math.min(d.height,g.height)/2}function Xu(a,d){var g=Math.min(d.height/2,a.height/2);return a.bottom-g<d.top||!(a.top>d.bottom)&&mv(d.top-a.bottom,a,d)}function Dl(a,d){return a.top>d.bottom||!(a.bottom<d.top)&&mv(d.bottom-a.top,a,d)}function pv(a,d,g){return d>=a.left&&d<=a.right&&g>=a.top&&g<=a.bottom}function op(a){var d=a.startContainer,g=a.startOffset;return d.hasChildNodes()&&a.endOffset===g+1?d.childNodes[g]:null}function gh(a,d){if(Mr(a)&&a.hasChildNodes()){var g=a.childNodes;return g[(v=g.length-1,Math.min(Math.max(d,0),v))]}return a;var v}function Of(a){return"string"==typeof a&&768<=a.charCodeAt(0)&&Il.test(a)}function Al(a){return"createRange"in a?a.createRange():ci.DOM.createRng()}function ip(a){return a&&/[\r\n\t ]/.test(a)}function Kg(a){return a.setStart&&a.setEnd}function ap(a){var d=a.startContainer,g=a.startOffset;if(ip(a.toString())&&cn(d.parentNode)&&In(d)){var v=d.data;return ip(v[g-1])||ip(v[g+1])?1:void 0}}function K0(a){return 0===a.left&&0===a.right&&0===a.top&&0===a.bottom}function mh(a,d){var g=zc(a,d);return g.width=1,g.right=g.left+1,g}Yi.languageLoad=!0,Yi.baseURL="",Yi.PluginManager=Yi(),Yi.ThemeManager=Yi();var Jg=function(a,d){var g=[];return on(pn(a),function(v){g=(g=d(v)?g.concat([v]):g).concat(Jg(v,d))}),g},sp=Zt("mce-annotation"),iu=Zt("data-mce-annotation"),bc=Zt("data-mce-annotation-uid"),os=function(a,d){return xu(it.fromDom(a.getBody()),"["+bc()+'="'+d+'"]')},wu=0,Ds=Math.round,Il=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Su=Mr,au=T,ya=Wd("display","block table"),rg=Wd("float","left right"),Fc=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return function(g){for(var v=0;v<a.length;v++)if(!a[v](g))return!1;return!0}}(Su,au,Dn(rg)),cn=Dn(Wd("white-space","pre pre-line pre-wrap")),Cu=In,vv=_i,Ya=ci.nodeIndex,Ol=function(a,d){if(!(d<0&&Mr(a)&&a.hasChildNodes()))return gh(a,d)},Ef=function(a){var d=a.getClientRects(),g=hh(0<d.length?d[0]:a.getBoundingClientRect());return!Kg(a)&&vv(a)&&K0(g)?function(v){var x=v.ownerDocument,C=Al(x),A=x.createTextNode(Ho),E=v.parentNode;E.insertBefore(A,v),C.setStart(A,0),C.setEnd(A,1);var z=hh(C.getBoundingClientRect());return E.removeChild(A),z}(a):K0(g)&&Kg(a)?function(v){var C=v.endContainer,A=v.startOffset,E=v.endOffset;if(v.startContainer===C&&In(C)&&0===A&&1===E){var z=v.cloneRange();return z.setEndAfter(C),Ef(z)}return null}(a):g},kt=function(a,d,g){function v(){return g=g||function(x){function C(Z){var ee;0!==Z.height&&(0<E.length&&Z.left===(ee=E[E.length-1]).left&&Z.top===ee.top&&Z.bottom===ee.bottom&&Z.right===ee.right||E.push(Z))}function A(Z,ee){var oe=Al(Z.ownerDocument);if(ee<Z.data.length){if(Of(Z.data[ee]))return E;if(Of(Z.data[ee-1])&&(oe.setStart(Z,ee),oe.setEnd(Z,ee+1),!ap(oe)))return C(mh(Ef(oe),!1)),E}0<ee&&(oe.setStart(Z,ee-1),oe.setEnd(Z,ee),ap(oe)||C(mh(Ef(oe),!1))),ee<Z.data.length&&(oe.setStart(Z,ee),oe.setEnd(Z,ee+1),ap(oe)||C(mh(Ef(oe),!0)))}var E=[],z=x.container(),L=x.offset();if(Cu(z))return A(z,L),E;if(Su(z))if(x.isAtEnd()){var U=Ol(z,L);Cu(U)&&A(U,U.data.length),Fc(U)&&!vv(U)&&C(mh(Ef(U),!1))}else{if(U=Ol(z,L),Cu(U)&&A(U,0),Fc(U)&&x.isAtEnd())return C(mh(Ef(U),!1)),E;var V=Ol(x.container(),x.offset()-1);Fc(V)&&!vv(V)&&(!ya(V)&&!ya(U)&&Fc(U)||C(mh(Ef(V),!1))),Fc(U)&&C(mh(Ef(U),!0))}return E}(kt(a,d))}return{container:Zt(a),offset:Zt(d),toRange:function(){var x=Al(a.ownerDocument);return x.setStart(a,d),x.setEnd(a,d),x},getClientRects:v,isVisible:function(){return 0<v().length},isAtStart:function(){return Cu(a),0===d},isAtEnd:function(){return Cu(a)?d>=a.data.length:d>=a.childNodes.length},isEqual:function(x){return x&&a===x.container()&&d===x.offset()},getNode:function(x){return Ol(a,x?d-1:d)}}};function Kd(a,d){In(d)&&0===d.data.length&&a.remove(d)}function og(a,d,g){var v,x,C,A,E,z,L;bf(g)?(C=a,A=d,z=H.from((E=g).firstChild),L=H.from(E.lastChild),A.insertNode(E),z.each(function(U){return Kd(C,U.previousSibling)}),L.each(function(U){return Kd(C,U.nextSibling)})):(v=a,d.insertNode(x=g),Kd(v,x.previousSibling),Kd(v,x.nextSibling))}function J0(a){return function(d){return a===d}}function yv(a){var d,g,v,x;return(Vc(a)?"text()":a.nodeName.toLowerCase())+"["+(v=Ka(g=ef(sm(d=a)),J0(d),d),x=Fi(g=g.slice(0,v+1),function(C,A,E){return Vc(A)&&Vc(g[E-1])&&C++,C},0),Ka(g=lo(g,Nu([d.nodeName])),J0(d),d)-x+"]")}function so(a,d){var g,v,x,C=[],A=d.container(),E=d.offset();return Vc(A)?g=function(z,L){for(;(z=z.previousSibling)&&Vc(z);)L+=z.data.length;return L}(A,E):(E>=(v=A.childNodes).length?(g="after",E=v.length-1):g="before",A=v[E]),C.push(yv(A)),x=lo(function(z,L){var U=[];for(L=L.parentNode;L!==z;L=L.parentNode)U.push(L);return U}(a,A),Dn(jl)),(C=C.concat(mi(x,yv))).reverse().join("/")+","+g}function Zo(a,d){if(!d)return null;var g=d.split(","),v=g[0].split("/"),x=1<g.length?g[1]:"before",C=Fi(v,function(A,E){var z,L,U,V,Z=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(E);return Z?("text()"===Z[1]&&(Z[1]="#text"),z=A,L=Z[1],U=parseInt(Z[2],10),V=lo(V=ef(z),function(ee,oe){return!Vc(ee)||!Vc(V[oe-1])}),(V=lo(V,Nu([L])))[U]):null},a);return C?Vc(C)?function(A,E){for(var z,L=A,U=0;Vc(L);){if(z=L.data.length,U<=E&&E<=U+z){A=L,E-=U;break}if(!Vc(L.nextSibling)){A=L,E=z;break}U+=z,L=L.nextSibling}return Vc(A)&&E>A.data.length&&(E=A.data.length),kt(A,E)}(C,parseInt(x,10)):(x="after"===x?c1(C)+1:c1(C),kt(C.parentNode,x)):null}function Ws(a,d,g,v,x){var C,A=v[x?"startContainer":"endContainer"],E=v[x?"startOffset":"endOffset"],z=[],L=0,U=a.getRoot();for(In(A)?z.push(g?function(V,Z,ee){for(var oe=V(Z.data.slice(0,ee)).length,re=Z.previousSibling;re&&In(re);re=re.previousSibling)oe+=V(re.data).length;return oe}(d,A,E):E):(E>=(C=A.childNodes).length&&C.length&&(L=1,E=Math.max(0,C.length-1)),z.push(a.nodeIndex(C[E],g)+L));A&&A!==U;A=A.parentNode)z.push(a.nodeIndex(A,g));return z}function Ql(a,d,g){var v=0;return At.each(a.select(d),function(x){if("all"!==x.getAttribute("data-mce-bogus"))return x!==g&&void v++}),v}function Tb(a,d){var g,v=d?"start":"end",x=a[v+"Container"],C=a[v+"Offset"];Mr(x)&&"TR"===x.nodeName&&(x=(g=x.childNodes)[Math.min(d?C:C-1,g.length-1)])&&a["set"+(d?"Start":"End")](x,C=d?0:x.childNodes.length)}function Q0(a){return Tb(a,!0),Tb(a,!1),a}function s1(a,d){var g;return Mr(a)&&(a=gh(a,d),Hc(a))?a:ua(a)?(g=(a=In(a)&&al(a)?a.parentNode:a).previousSibling,Hc(g)||Hc(g=a.nextSibling)?g:void 0):void 0}function ig(a,d,g){var v=g.getNode(),x=v?v.nodeName:null,C=g.getRng();if(Hc(v)||"IMG"===x)return{name:x,index:Ql(g.dom,x,v)};var A,E,z,L,U,V,Z,ee=s1((A=C).startContainer,A.startOffset)||s1(A.endContainer,A.endOffset);return ee?{name:x=ee.tagName,index:Ql(g.dom,x,ee)}:(V=(z=g).dom,(Z={}).start=Ws(V,E=a,L=d,U=C,!0),z.isCollapsed()||(Z.end=Ws(V,E,L,U,!1)),w(U)&&(Z.isFakeCaret=!0),Z)}function ag(a,d,g){var v={"data-mce-type":"bookmark",id:d,style:"overflow:hidden;line-height:0px"};return g?a.create("span",v,"&#xFEFF;"):a.create("span",v)}function Qg(a,d){var g=a.dom,v=a.getRng(),x=g.uniqueId(),C=a.isCollapsed(),A=a.getNode(),E=A.nodeName;if("IMG"===E)return{name:E,index:Ql(g,E,A)};var z=Q0(v.cloneRange());return C||(z.collapse(!1),og(g,z,ag(g,x+"_end",d))),(v=Q0(v)).collapse(!0),og(g,v,ag(g,x+"_start",d)),a.moveToBookmark({id:x,keep:!0}),{id:x}}function em(a,d,g){var v=a.getParam(d,g);return-1===v.indexOf("=")?v:Vn(a.getParam(d,"","hash"),a.id).getOr(g)}function Jd(a){return a.getParam("content_security_policy","")}function Ba(a){if(a.getParam("force_p_newlines",!1))return"p";var d=a.getParam("forced_root_block","p");return!1===d?"":!0===d?"p":d}function ey(a){return a.getParam("forced_root_block_attrs",{})}function ty(a){return a.getParam("automatic_uploads",!0,"boolean")}function q_(a){return a.getParam("icons","","string")}function tm(a){return a.getParam("referrer_policy","","string")}function nm(a){return a.getParam("language","en","string")}function $o(a){return a.getParam("indent_use_margin",!1)}function ny(a){var d=a.getParam("font_css",[]);return un(d)?d:xt(d.split(","),Qa)}function bv(a){var d=a.getParam("object_resizing");return!1!==d&&!wr.iOS&&(xr(d)?d:"table,img,figure.image,div,video,iframe")}function xv(a){return a.getParam("event_root")}function ph(a){return a.getParam("theme")}function vh(a){return!1!==a.getParam("inline_boundaries")}function yi(a){return a.getParam("plugins","","string")}function Pn(a){var d=a.parentNode;d&&d.removeChild(a)}function is(a){var d=Ma(a);return{count:a.length-d.length,text:d}}function sg(a){for(var d;-1!==(d=a.data.lastIndexOf(Io));)a.deleteData(d,1)}function u1(a,d){return tf(a),d}function Pf(a,d){var g,v=d.container(),x=(-1===(g=rn(fi(v.childNodes),a))?H.none():H.some(g)).map(function(C){return C<d.offset()?kt(v,d.offset()-1):d}).getOr(d);return tf(a),x}function _v(a,d){return kt.isTextPosition(d)?(v=d,kv(g=a)&&v.container()===g?(A=is((x=g).data.substr(0,(C=v).offset())),E=is(x.data.substr(C.offset())),0<(A.text+E.text).length?(sg(x),kt(x,C.offset()-A.count)):C):u1(g,v)):(z=a,((L=d).container()===z.parentNode?Pf:u1)(z,L));var g,v,x,C,A,E,z,L}function l1(a,d,g){var v,x,C,A=zc(d.getBoundingClientRect(),g),E="BODY"===a.tagName?(v=a.ownerDocument.documentElement,x=a.scrollLeft||v.scrollLeft,a.scrollTop||v.scrollTop):(C=a.getBoundingClientRect(),x=a.scrollLeft-C.left,a.scrollTop-C.top);A.left+=x,A.right+=x,A.top+=E,A.bottom+=E,A.width=1;var z=d.offsetWidth-d.clientWidth;return 0<z&&(g&&(z*=-1),A.left+=z,A.right+=z),A}function ry(){return Mv.isIE()||Mv.isEdge()||Mv.isFirefox()}function Qd(a){return No(a)||Ca(a)&&ry()}function oy(a,d){for(var g;g=a(d);)if(!iy(g))return g;return null}function Rf(a,d,g,v,x){var C=new ea(a,v),A=lp(a)||iy(a);if(d<0){if(A&&g(a=oy(C.prev.bind(C),!0)))return a;for(;a=oy(C.prev.bind(C),x);)if(g(a))return a}if(0<d){if(A&&g(a=oy(C.next.bind(C),!0)))return a;for(;a=oy(C.next.bind(C),x);)if(g(a))return a}return null}function yh(a,d){for(;a&&a!==d;){if(cp(a))return a;a=a.parentNode}return null}function Yu(a,d,g){return yh(a.container(),g)===yh(d.container(),g)}function rm(a,d){if(!d)return null;var g=d.container(),v=d.offset();return dp(g)?g.childNodes[v+a]:null}function om(a,d){var g=d.ownerDocument.createRange();return a?(g.setStartBefore(d),g.setEndBefore(d)):(g.setStartAfter(d),g.setEndAfter(d)),g}function im(a,d,g){for(var v,x,C=a?"previousSibling":"nextSibling";g&&g!==d;){var A=g[C];if(Ib(A)&&(A=A[C]),lp(A)||Bf(A)){if(x=g,yh(A,v=d)===yh(x,v))return A;break}if(fp(A))break;g=g.parentNode}return null}function Db(a,d,g){var v,x=_e(im,!0,d),C=_e(im,!1,d),A=g.startContainer,E=g.startOffset;if(al(A)){var z=(A=dp(A)?A:A.parentNode).getAttribute("data-mce-caret");if("before"===z&&Qd(v=A.nextSibling))return lg(v);if("after"===z&&Qd(v=A.previousSibling))return Go(v)}if(!g.collapsed)return g;if(In(A)){if(Ib(A)){if(1===a){if(v=C(A))return lg(v);if(v=x(A))return Go(v)}if(-1===a){if(v=x(A))return Go(v);if(v=C(A))return lg(v)}return g}if(pa(A)&&E>=A.data.length-1)return 1===a&&(v=C(A))?lg(v):g;if(Ls(A)&&E<=1)return-1===a&&(v=x(A))?Go(v):g;if(E===A.data.length)return(v=C(A))?lg(v):g;if(0===E)return(v=x(A))?Go(v):g}return g}function ec(a,d){return H.from(rm(a?0:-1,d)).filter(lp)}function ug(a,d,g){var v=Db(a,d,g);return-1===a?kt.fromRangeStart(v):kt.fromRangeEnd(v)}function bh(a){return H.from(a.getNode()).map(it.fromDom)}function am(a,d){for(;d=a(d);)if(d.isVisible())return d;return d}function xh(a,d){var g=Yu(a,d);return!(g||!_i(a.getNode()))||g}kt.fromRangeStart=function(a){return kt(a.startContainer,a.startOffset)},kt.fromRangeEnd=function(a){return kt(a.endContainer,a.endOffset)},kt.after=function(a){return kt(a.parentNode,Ya(a)+1)},kt.before=function(a){return kt(a.parentNode,Ya(a))},kt.isAbove=function(a,d){return sa(ut(d.getClientRects()),dt(a.getClientRects()),Xu).getOr(!1)},kt.isBelow=function(a,d){return sa(dt(d.getClientRects()),ut(a.getClientRects()),Dl).getOr(!1)},kt.isAtStart=function(a){return!!a&&a.isAtStart()},kt.isAtEnd=function(a){return!!a&&a.isAtEnd()},kt.isTextPosition=function(a){return!!a&&In(a.container())},kt.isElementPosition=function(a){return!1===kt.isTextPosition(a)};var Wo,Sv,Vc=In,Cv=jl,c1=ci.nodeIndex,sm=function(a){var d=a.parentNode;return Cv(d)?sm(d):d},ef=function(a){return a?Fi(a.childNodes,function(d,g){return Cv(g)&&"BR"!==g.nodeName?d=d.concat(ef(g)):d.push(g),d},[]):[]},Hc=qr,up=_e(ig,Eo,!0),X_=ci.DOM,su=Mr,kv=In,tf=function(a){su(a)&&ua(a)&&(ud(a)?a.removeAttribute("data-mce-caret"):Pn(a)),kv(a)&&(sg(a),0===a.data.length&&Pn(a))},Mv=$i().browser,Nf=qr,Ab=zu,Lf=ns,No=function(a){return Nf(a)||Ab(a)},lp=qr,Bf=zu,cp=Wd("display","block table table-cell table-caption list-item"),Ib=ua,iy=al,dp=Mr,fp=T,lg=_e(om,!0),Go=_e(om,!1);function Tv(a,d){return a.hasChildNodes()&&d<a.childNodes.length?a.childNodes[d]:null}function ay(a,d){if(0<a){if(za(d.previousSibling)&&!jc(d.previousSibling))return kt.before(d);if(jc(d))return kt(d,0)}if(a<0){if(za(d.nextSibling)&&!jc(d.nextSibling))return kt.after(d);if(jc(d))return kt(d,d.data.length)}return a<0&&!mm(d)?kt.after(d):kt.before(d)}function Zu(a){return{next:function(d){return Tu(Wo.Forwards,d,a)},prev:function(d){return Tu(Wo.Backwards,d,a)}}}function Dv(a){return kt.isTextPosition(a)?0===a.offset():T(a.getNode())}function zf(a){if(kt.isTextPosition(a)){var d=a.container();return a.offset()===d.data.length}return T(a.getNode(!0))}function cg(a,d){return!kt.isTextPosition(a)&&!kt.isTextPosition(d)&&a.getNode()===d.getNode(!0)}function _h(a,d,g){return tc(a,d,g).bind(function(v){return Yu(g,v,d)&&(x=g,C=v,a?!cg(x,C)&&(kt.isTextPosition(A=x)||!_i(A.getNode()))&&zf(x)&&Dv(C):!cg(C,x)&&Dv(x)&&zf(C))?tc(a,d,v):H.some(v);var x,C,A})}function Wc(a,d){var g,v,x,C,A,E=a?d.firstChild:d.lastChild;return In(E)?H.some(kt(E,a?0:E.data.length)):E?T(E)?H.some(a?kt.before(E):_i(A=E)?kt.before(A):kt.after(A)):(v=d,x=E,C=(g=a)?kt.before(x):kt.after(x),tc(g,v,C)):H.none()}function El(a){return Mr(a)&&a.id===Lv}function dg(a,d){for(;d&&d!==a;){if(d.id===Lv)return d;d=d.parentNode}return null}function Av(a){return At.isArray(a.start)}function Ob(a,d){return Mr(d)&&a.isBlock(d)&&!d.innerHTML&&!wr.ie&&(d.innerHTML='<br data-mce-bogus="1" />'),d}function Ff(a,d,g){return!1===d.hasChildNodes()&&dg(a,d)&&(x=g,C=(v=d).ownerDocument.createTextNode(Io),v.appendChild(C),x.setStart(C,0),x.setEnd(C,0),1);var v,x,C}function hl(a,d,g,v){var x,C,A,E,z=g[d?"start":"end"],L=a.getRoot();if(z){for(A=z[0],C=L,x=z.length-1;1<=x;x--){if(E=C.childNodes,Ff(L,C,v))return 1;if(z[x]>E.length-1)return Ff(L,C,v)||function(U){return rf(C).fold(_r,function(V){return U.setStart(V.container(),V.offset()),U.setEnd(V.container(),V.offset()),!0})}(v);C=E[z[x]]}3===C.nodeType&&(A=Math.min(z[0],C.nodeValue.length)),1===C.nodeType&&(A=Math.min(z[0],C.childNodes.length)),d?v.setStart(C,A):v.setEnd(C,A)}return 1}function uu(a){return In(a)&&0<a.data.length}function fg(a,d,g){var v,x,C,A,E,z,L=a.get(g.id+"_"+d),U=g.keep;if(L){if(v=L.parentNode,x="start"===d?U?L.hasChildNodes()?(v=L.firstChild,1):uu(L.nextSibling)?(v=L.nextSibling,0):uu(L.previousSibling)?(v=L.previousSibling,L.previousSibling.data.length):(v=L.parentNode,a.nodeIndex(L)+1):a.nodeIndex(L):U?L.hasChildNodes()?(v=L.firstChild,1):uu(L.previousSibling)?(v=L.previousSibling,L.previousSibling.data.length):(v=L.parentNode,a.nodeIndex(L)):a.nodeIndex(L),E=v,z=x,!U){for(A=L.previousSibling,C=L.nextSibling,At.each(At.grep(L.childNodes),function(V){In(V)&&(V.nodeValue=V.nodeValue.replace(/\uFEFF/g,""))});L=a.get(g.id+"_"+d);)a.remove(L,!0);A&&C&&A.nodeType===C.nodeType&&In(A)&&!wr.opera&&(x=A.nodeValue.length,A.appendData(C.nodeValue),a.remove(C),E=A,z=x)}return H.some(kt(E,z))}return H.none()}function Eb(a,d){(function(g,v){var x,C,A,E,z,L,U,V,Z,ee,oe,re,ie=g.dom;if(v){if(Av(v))return oe=v,re=(ee=ie).createRng(),hl(ee,!0,oe,re)&&hl(ee,!1,oe,re)?H.some(re):H.none();if(xr(v.start))return H.some((U=v,V=(L=ie).createRng(),Z=Zo(L.getRoot(),U.start),V.setStart(Z.container(),Z.offset()),Z=Zo(L.getRoot(),U.end),V.setEnd(Z.container(),Z.offset()),V));if(ao(v,"id"))return sa(z=fg(A=ie,"start",E=v),fg(A,"end",E).or(z),function(ue,de){var he=A.createRng();return he.setStart(Ob(A,ue.container()),ue.offset()),he.setEnd(Ob(A,de.container()),de.offset()),he});if(ao(v,"name"))return H.from((x=ie).select((C=v).name)[C.index]).map(function(ue){var de=x.createRng();return de.selectNode(ue),de});if(ao(v,"rng"))return H.some(v.rng)}return H.none()})(a,d).each(function(g){a.setRng(g)})}function xc(a){return Mr(a)&&"SPAN"===a.tagName&&"bookmark"===a.getAttribute("data-mce-type")}function wh(a){return""!==a&&-1!==" \f\n\r\t\v".indexOf(a)}function as(a){return!wh(a)&&!pm(a)}function um(a){return a.nodeType}function bs(a,d,g){var v,x=g.startOffset,C=g.startContainer;if((C!==g.endContainer||!(v=C.childNodes[x])||!/^(IMG)$/.test(v.nodeName))&&Mr(C)){var A=C.childNodes,E=void 0;x<A.length?E=new ea(C=A[x],a.getParent(C,a.isBlock)):(E=new ea(C=A[A.length-1],a.getParent(C,a.isBlock))).next(!0);for(var z=E.current();z;z=E.next())if(In(z)&&!hy(z))return g.setStart(z,0),d.setRng(g),0}}function lm(a,d,g){if(a){var v=d?"nextSibling":"previousSibling";for(a=g?a:a[v];a;a=a[v])if(Mr(a)||!hy(a))return a}}function hg(a,d){return um(d)&&(d=d.nodeName),!!a.schema.getTextBlockElements()[d.toLowerCase()]}function gg(a,d,g){return a.schema.isValidChild(d,g)}function Gc(a,d){return dn(a)?a=a(d):ze(d)&&(a=a.replace(/%(\w+)/g,function(g,v){return d[v]||g})),a}function Iv(a,d){return a=""+((a=a||"").nodeName||a),d=""+((d=d||"").nodeName||d),a.toLowerCase()===d.toLowerCase()}function sy(a,d,g){return"color"!==g&&"backgroundColor"!==g||(d=a.toHex(d)),"fontWeight"===g&&700===d&&(d="bold"),""+("fontFamily"===g?d.replace(/[\'\"]/g,"").replace(/,\s+/g,","):d)}function hp(a,d,g){return sy(a,a.getStyle(d,g),g)}function uy(a,d){var g;return a.getParent(d,function(v){return(g=a.getStyle(v,"text-decoration"))&&"none"!==g}),g}function ku(a,d,g){return a.getParents(d,g,a.getRoot())}function gl(a){return po(a,"block")}function fo(a){return po(a,"selector")}function da(a){return po(a,"inline")}function Pb(a){return fo(a)&&!1!==a.expand&&!da(a)}function ly(a,d){for(var g=d;g;){if(Mr(g)&&a.getContentEditable(g))return"false"===a.getContentEditable(g)?g:d;g=g.parentNode}return d}function d1(a,d,g,v){for(var x=d.data,C=g;a?0<=C:C<x.length;a?C--:C++)if(v(x.charAt(C)))return a?C+1:C;return-1}function _d(a,d,g){return d1(a,d,g,function(v){return pm(v)||wh(v)})}function Ev(a,d,g){return d1(a,d,g,as)}function cy(a,d,g,v,x,C){function A(L,U,V){var Z=yc(a);return H.from((x?Z.backwards:Z.forwards)(L,U,function(oe,re){return of(oe.parentNode)?-1:V(x,E=oe,re)},z))}var E,z=a.getParent(g,a.isBlock)||d;return A(g,v,_d).bind(function(L){return C?A(L.container,L.offset+(x?-1:0),Ev):H.some(L)}).orThunk(function(){return E?H.some({container:E,offset:x?0:E.length}):H.none()})}function dy(a,d,g,v,x){In(v)&&lt(v.data)&&v[x]&&(v=v[x]);for(var C=ba(a,v),A=0;A<C.length;A++)for(var E=0;E<d.length;E++){var z=d[E];if((!ze(z.collapsed)||z.collapsed===g.collapsed)&&fo(z)&&a.is(C[A],z.selector))return C[A]}return v}function $u(a,d,g,v){var x,C=g,A=a.dom,E=A.getRoot(),z=d[0];if((C=gl(z)?z.wrapper?null:A.getParent(g,z.block,E):C)||(x=A.getParent(g,"LI,TD,TH"),C=A.getParent(In(g)?g.parentNode:g,function(L){return L!==E&&Bv(a,L)},x)),!(C=C&&gl(z)&&z.wrapper&&ba(A,C,"ul,ol").reverse()[0]||C))for(C=g;C[v]&&!A.isBlock(C[v])&&!Iv(C=C[v],"br"););return C||g}function Mu(a,d,g,v,x){var C,A=g,E=x?"previousSibling":"nextSibling",z=a.getRoot();if(In(g)&&!Du(g)&&(x?0<v:v<g.data.length))return g;for(;;){if(!d[0].block_expand&&a.isBlock(A))return A;for(var L=A[E];L;L=L[E]){var U=In(L)&&!zv(a,z,L,E);if(!of(L)&&(!_i(C=L)||!C.getAttribute("data-mce-bogus")||C.nextSibling)&&!Du(L,U))return A}if(A===z||A.parentNode===z){g=A;break}A=A.parentNode}return g}function hi(a){return of(a.parentNode)||of(a)}function Gs(a,d,g,v){void 0===v&&(v=!1);var x=d.startContainer,C=d.startOffset,A=d.endContainer,E=d.endOffset,z=a.dom,L=g[0];return Mr(x)&&x.hasChildNodes()&&(x=gh(x,C),In(x)&&(C=0)),Mr(A)&&A.hasChildNodes()&&(A=gh(A,d.collapsed?E:E-1),In(A)&&(E=A.nodeValue.length)),x=ly(z,x),A=ly(z,A),hi(x)&&(x=of(x)?x:x.parentNode,In(x=d.collapsed?x.previousSibling||x:x.nextSibling||x)&&(C=d.collapsed?x.length:0)),hi(A)&&(A=of(A)?A:A.parentNode,In(A=d.collapsed?A.nextSibling||A:A.previousSibling||A)&&(E=d.collapsed?0:A.length)),d.collapsed&&(cy(z,a.getBody(),x,C,!0,v).each(function(U){x=U.container,C=U.offset}),cy(z,a.getBody(),A,E,!1,v).each(function(U){A=U.container,E=U.offset})),(da(L)||L.block_expand)&&(da(L)&&In(x)&&0!==C||(x=Mu(z,g,x,C,!0)),da(L)&&In(A)&&E!==A.nodeValue.length||(A=Mu(z,g,A,E,!1))),Pb(L)&&(x=dy(z,g,d,x,"previousSibling"),A=dy(z,g,d,A,"nextSibling")),(gl(L)||fo(L))&&(x=$u(a,g,x,"previousSibling"),A=$u(a,g,A,"nextSibling"),gl(L)&&(z.isBlock(x)||(x=Mu(z,g,x,C,!0)),z.isBlock(A)||(A=Mu(z,g,A,E,!1)))),Mr(x)&&(C=z.nodeIndex(x),x=x.parentNode),Mr(A)&&(E=z.nodeIndex(A)+1,A=A.parentNode),{startContainer:x,startOffset:C,endContainer:A,endOffset:E}}function _c(a,d,g){function v(re){var ie=re[0];In(ie)&&ie===z&&E>=ie.data.length&&re.splice(0,1);var ue=re[re.length-1];return 0===L&&0<re.length&&ue===U&&In(ue)&&re.splice(re.length-1,1),re}function x(re,ie,ue){for(var de=[];re&&re!==ue;re=re[ie])de.push(re);return de}function C(re,ie){return a.getParent(re,function(ue){return ue.parentNode===ie},ie)}function A(re,ie,ue){for(var de=ue?"nextSibling":"previousSibling",he=re;he&&he!==ie;he=Ie){var Ie=he.parentNode,We=x(he===re?he:he[de],de);We.length&&(ue||We.reverse(),g(v(We)))}}var E=d.startOffset,z=gh(d.startContainer,E),L=d.endOffset,U=gh(d.endContainer,L-1);if(z===U)return g(v([z]));var V=a.findCommonAncestor(z,U);if(a.isChildOf(z,U))return A(z,V,!0);if(a.isChildOf(U,z))return A(U,V);var Z=C(z,V)||z,ee=C(U,V)||U;A(z,Z,!0);var oe=x(Z===z?Z:Z.nextSibling,"nextSibling",ee===U?ee.nextSibling:ee);oe.length&&g(v(oe)),A(U,ee)}function cm(a){var d=[];if(a)for(var g=0;g<a.rangeCount;g++)d.push(a.getRangeAt(g));return d}function f1(a,d){var g=xu(d,"td[data-mce-selected],th[data-mce-selected]");return 0<g.length?g:hr(_s(a,function(v){var x=op(v);return x?[it.fromDom(x)]:[]}),gr)}function dm(a){return f1(cm(a.selection.getSel()),it.fromDom(a.getBody()))}function mg(a,d){return il(a,"table",d)}function Rb(a,d){return sa((x=d.startContainer,C=d.startOffset,In(x)?0===C?H.some(it.fromDom(x)):H.none():H.from(x.childNodes[C]).map(it.fromDom)),(g=d.endContainer,v=d.endOffset,In(g)?v===g.data.length?H.some(it.fromDom(g)):H.none():H.from(g.childNodes[v-1]).map(it.fromDom)),function(A,E){var z=gi(Lb(a),_e($t,A)),L=gi(Fv(a),_e($t,E));return z.isSome()&&L.isSome()}).getOr(!1);var g,v,x,C}function fm(a,d,g,v){var x=g,C=new ea(g,x),A=Lr(a.schema.getMoveCaretBeforeOnEnterElements(),function(E,z){return!Mt(["td","th","table"],z.toLowerCase())});do{if(In(g)&&0!==At.trim(g.nodeValue).length)return v?d.setStart(g,0):d.setEnd(g,g.nodeValue.length),0;if(A[g.nodeName])return v?d.setStartBefore(g):"BR"===g.nodeName?d.setEndBefore(g):d.setEndAfter(g),0}while(g=v?C.next():C.prev());"BODY"===x.nodeName&&(v?d.setStart(x,0):d.setEnd(x,x.childNodes.length))}function Sh(a){var d=a.selection.getSel();return d&&0<d.rangeCount}function hm(a,d){var g=dm(a);0<g.length?on(g,function(v){var x=v.dom,C=a.dom.createRng();C.setStartBefore(x),C.setEndAfter(x),d(C,!0)}):d(a.selection.getRng(),!1)}function fy(a,d,g){var v=Qg(a,d);g(v),a.moveToBookmark(v)}function eo(a){return Y_.get(a)}function wc(a,d,g,v){var x=d.uid,C=void 0===x?Ia("mce-annotation"):x,A=function(ee,oe){var re={};for(ue in ee)Object.prototype.hasOwnProperty.call(ee,ue)&&oe.indexOf(ue)<0&&(re[ue]=ee[ue]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols)for(var ie=0,ue=Object.getOwnPropertySymbols(ee);ie<ue.length;ie++)oe.indexOf(ue[ie])<0&&Object.prototype.propertyIsEnumerable.call(ee,ue[ie])&&(re[ue[ie]]=ee[ue[ie]]);return re}(d,["uid"]),E=it.fromTag("span",a);$g(E,sp()),Sl(E,""+bc(),C),Sl(E,""+iu(),g);var z,L=v(C,A),U=L.attributes,V=L.classes,Z=void 0===V?[]:V;return Rs(E,void 0===U?{}:U),z=E,on(Z,function(ee){$g(z,ee)}),E}function Nb(a){var d,g,v,x=(d={},{register:function(A,E){d[A]={name:A,settings:E}},lookup:function(A){return Vn(d,A).map(function(E){return E.settings})}});v=x,(g=a).on("init",function(){g.serializer.addNodeFilter("span",function(A){on(A,function(E){H.from(E.attr(iu())).bind(v.lookup).each(function(z){!1===z.persistent&&E.unwrap()})})})});var C=function(a){function d(){return{listeners:[],previous:Hs()}}function g(A,E){v(A,function(z){return E(z),z})}function v(A,E){var z=x.get(),L=E(Vn(z,A).getOrThunk(d));z[A]=L,x.set(z)}var x=vi({}),C=bd(function(){var A=x.get();on(ia(wn(A)),function(E){v(E,function(z){var L=z.previous.get();return Tl(a,H.some(E)).fold(function(){var U;L.isSome()&&(g(U=E,function(V){on(V.listeners,function(Z){return Z(!1,U)})}),z.previous.clear())},function(U){var V,Z,ee,oe=U.uid,re=U.name,ie=U.elements;Lu(L,oe)||(Z=oe,ee=ie,g(V=re,function(ue){on(ue.listeners,function(de){return de(!0,V,{uid:Z,nodes:xt(ee,function(he){return he.dom})})})}),z.previous.set(oe))}),{previous:z.previous,listeners:z.listeners}})})},30);return a.on("remove",function(){C.cancel()}),a.on("NodeChange",function(){C.throttle()}),{addListener:function(A,E){v(A,function(z){return{previous:z.previous,listeners:z.listeners.concat([E])}})}}}(a);return{register:function(A,E){x.register(A,E)},annotate:function(A,E){x.lookup(A).each(function(z){var L,U,V,Z;U=A,V=z,Z=E,(L=a).undoManager.transact(function(){var ee,oe,re,ie,ue=L.selection,de=ue.getRng(),he=0<dm(L).length;de.collapsed&&!he&&(re=Gs(ee=L,oe=de,[{inline:"span"}]),oe.setStart(re.startContainer,re.startOffset),oe.setEnd(re.endContainer,re.endOffset),ee.selection.setRng(oe)),ue.getRng().collapsed&&!he?(ou(ie=wc(L.getDoc(),Z,U,V.decorate),Ho),ue.getRng().insertNode(ie.dom),ue.select(ie.dom)):fy(ue,!1,function(){hm(L,function(Ie){!function(a,d,g,v,x){function C(){L.clear()}function A(V){on(V,U)}var E=[],z=wc(a.getDoc(),x,g,v),L=Hs(),U=function(V){var Z,ee,oe,re,ue;switch(oe=a,ue=Oi(re=V),Pu(re).fold(function(){return"skipping"},function(de){return"br"===ue||ja(Ie=re)&&eo(Ie)===Io?"valid":Hi(he=re)&&fh(he,sp())?"existing":El(re.dom)?"caret":gg(oe,"span",ue)&&gg(oe,Oi(de),"span")?"valid":"invalid-child";var he,Ie})){case"invalid-child":C(),A(pn(V)),C();break;case"valid":Ui(Z=V,ee=L.get().getOrThunk(function(){var de=_u(z);return E.push(de),L.set(de),de})),Ua(ee,Z)}};_c(a.dom,d,function(V){C(),A(xt(V,it.fromDom))})}(L,Ie,U,V.decorate,Z)})})})})},annotationChanged:function(A,E){C.addListener(A,E)},remove:function(A){Tl(a,H.some(A)).each(function(E){on(E.elements,Gl)})},getAll:function(A){var E,z,L;return Cn((E=A,z=xu(it.fromDom(a.getBody()),"["+iu()+'="'+E+'"]'),L={},on(z,function(U){var V=Ga(U,bc()),Z=Vn(L,V).getOr([]);L[V]=Z.concat([U])}),L),function(U){return xt(U,function(V){return V.dom})})}}}function uo(a){return{getBookmark:_e(US,a),moveToBookmark:_e(Eb,a)}}function Pv(a){return Ud(a)||!!qd(d=a)&&!0!==Dr(fi(d.getElementsByTagName("*")),function(g,v){return g||q0(v)},!1);var d}(Sv=Wo=Wo||{})[Sv.Backwards=-1]="Backwards",Sv[Sv.Forwards=1]="Forwards";var Rv,Nv,nf=qr,jc=In,gm=Mr,mm=_i,za=T,pg=I,Tu=function(a,d,g){var v,x,C;if(!gm(g)||!d)return null;if(d.isEqual(kt.after(g))&&g.lastChild){if(C=kt.after(g.lastChild),a<0&&za(g.lastChild)&&gm(g.lastChild))return mm(g.lastChild)?kt.before(g.lastChild):C}else C=d;var A,E,z,L=C.container(),U=C.offset();if(jc(L)){if(a<0&&0<U)return kt(L,--U);if(0<a&&U<L.length)return kt(L,++U);v=L}else{if(a<0&&0<U&&(V=Tv(L,U-1),za(V)))return!Pv(V)&&(x=Rf(V,a,pg,V))?jc(x)?kt(x,x.data.length):kt.after(x):jc(V)?kt(V,V.data.length):kt.before(V);if(0<a&&U<L.childNodes.length&&(V=Tv(L,U),za(V)))return mm(V)?(A=g,(z=(E=V).nextSibling)&&za(z)?jc(z)?kt(z,0):kt.before(z):Tu(Wo.Forwards,kt.after(E),A)):!Pv(V)&&(x=Rf(V,a,pg,V))?jc(x)?kt(x,0):kt.before(x):jc(V)?kt(V,0):kt.after(V);v=V||C.getNode()}if((0<a&&C.isAtEnd()||a<0&&C.isAtStart())&&(v=Rf(v,a,ro,g,!0),pg(v,g)))return ay(a,v);var V=Rf(v,a,pg,g),Z=aa(hr(function(ee,oe){for(var re=[];ee&&ee!==oe;)re.push(ee),ee=ee.parentNode;return re}(L,g),nf));return!Z||V&&Z.contains(V)?V?ay(a,V):null:0<a?kt.after(Z):kt.before(Z)},tc=function(a,d,g){var v=Zu(d);return H.from(a?v.next(g):v.prev(g))},nc=function(a,d,g,v){return _h(a,d,g).bind(function(x){return v(x)?nc(a,d,x,v):H.some(x)})},Pl=_e(tc,!0),Uc=_e(tc,!1),Ku=_e(Wc,!0),rf=_e(Wc,!1),Lv="_mce_caret",US=function(a,d,g){return 2===d?ig(Ma,g,a):3===d?(x=(v=a).getRng(),{start:so(v.dom.getRoot(),kt.fromRangeStart(x)),end:so(v.dom.getRoot(),kt.fromRangeEnd(x))}):d?{rng:a.getRng()}:Qg(a,!1);var v,x},pm=function(a){return"\xa0"===a},hy=function(a,d){return void 0===d&&(d=!1),!(!ze(a)||!In(a))&&N(d?a.data.replace(/ /g,"\xa0"):a.data)},of=xc,ba=ku,Du=hy,Bv=hg,zv=function(a,d,g,v){var x=g.parentNode;return!ze(g[v])&&(!(x!==d&&!En(x)&&!a.isBlock(x))||zv(a,d,x,v))},Lb=function(a){return rd(a).fold(Zt([a]),function(d){return[a].concat(Lb(d))})},Fv=function(a){return gu(a).fold(Zt([a]),function(d){return"br"===Oi(d)?Ei(d).map(function(g){return[a].concat(Fv(g))}).getOr([]):[a].concat(Fv(d))})},Y_=(Rv=ja,{get:function(a){if(!Rv(a))throw new Error("Can only get text value of a text node");return Nv(a).getOr("")},getOption:Nv=function(a){return Rv(a)?H.from(a.dom.nodeValue):H.none()},set:function(a,d){if(!Rv(a))throw new Error("Can only set raw text value of a text node");a.dom.nodeValue=d}});function vm(a,d){for(;d&&d!==a;){if(mu(d)||qr(d))return d;d=d.parentNode}return null}function Kr(a,d,g){if(!g.collapsed){if(wr.browser.isIE()&&g.startOffset===g.endOffset-1&&g.startContainer===g.endContainer){var v=g.startContainer.childNodes[g.startOffset];if(Mr(v))return tr(v.getClientRects(),function(x){return pv(x,a,d)})}return tr(g.getClientRects(),function(x){return pv(x,a,d)})}}function Hf(a,d,g){return a.fire(d,g)}function wd(a,d,g,v){return a.fire("FormatApply",{format:d,node:g,vars:v})}function mp(a,d,g,v){return a.fire("FormatRemove",{format:d,node:g,vars:v})}function Bb(a,d){function g(Bt){return Bt&&("IMG"===Bt.nodeName||d.dom.is(Bt,"figure.image"))}function v(Bt){return zu(Bt)||Qe.hasClass(Bt,"mce-preview-object")}function x(Bt){var Tn=Bt.target;!function(tn,An){if("longpress"!==tn.type&&0!==tn.type.indexOf("touch"))return g(tn.target)&&!Kr(tn.clientX,tn.clientY,An);var Hn=tn.touches[0];return g(tn.target)&&!Kr(Hn.clientX,Hn.clientY,An)}(Bt,d.selection.getRng())||Bt.isDefaultPrevented()||d.selection.select(Tn)}function C(Bt){return Qe.is(Bt,"figure.image")?[Bt.querySelector("img")]:Qe.hasClass(Bt,"mce-preview-object")&&ze(Bt.firstElementChild)?[Bt,Bt.firstElementChild]:[Bt]}function A(Bt){var Tn=bv(d);return!!Tn&&"false"!==Bt.getAttribute("data-mce-resize")&&Bt!==d.getBody()&&(Qe.hasClass(Bt,"mce-preview-object")?nn(it.fromDom(Bt.firstElementChild),Tn):nn(it.fromDom(Bt),Tn))}function E(Bt,Tn,tn){ze(tn)&&on(C(Bt),function(An){An.style[Tn]||!d.schema.isValid(An.nodeName.toLowerCase(),Tn)?Qe.setStyle(An,Tn,tn):Qe.setAttrib(An,Tn,""+tn)})}function z(Bt,Tn,tn){E(Bt,"width",Tn),E(Bt,"height",tn)}function L(Bt){var Tn,tn,Ze=Bt.screenX-de,It=Bt.screenY-he;Oe=(Oe=Ze*ie[2]+Ie)<5?5:Oe,Je=(Je=It*ie[3]+We)<5?5:Je,((g(ee)||v(ee))&&!1!==d.getParam("resize_img_proportional",!0,"boolean")?!mr.modifierPressed(Bt):mr.modifierPressed(Bt))&&(en(Ze)>en(It)?(Je=sn(Oe*ve),Oe=sn(Je/ve)):(Oe=sn(Je/ve),Je=sn(Oe*ve))),z(oe,Oe,Je),Qe.setStyles(re,{left:Tn=0<(Tn=ie.startPos.x+Ze)?Tn:0,top:tn=0<(tn=ie.startPos.y+It)?tn:0,display:"block"}),re.innerHTML=Oe+" &times; "+Je,ie[2]<0&&oe.clientWidth<=Oe&&Qe.setStyle(oe,"left",void 0+(Ie-Oe)),ie[3]<0&&oe.clientHeight<=Je&&Qe.setStyle(oe,"top",void 0+(We-Je)),(Ze=Tt.scrollWidth-ct)+(It=Tt.scrollHeight-gt)!=0&&Qe.setStyles(re,{left:Tn-Ze,top:tn-It}),Se||(d.fire("ObjectResizeStart",{target:ee,width:Ie,height:We,origin:"corner-"+ie.name}),Se=!0)}function U(Bt){function Tn(An,Hn){if(An)do{if(An===Hn)return 1}while(An=An.parentNode)}var tn;Se||d.removed||(Ye(Qe.select("img[data-mce-selected],hr[data-mce-selected]"),function(An){An.removeAttribute(Ge)}),tn="mousedown"===Bt.type?Bt.target:a.getNode(),Tn(tn=Qe.$(tn).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],Tt)&&(Z(),Tn(a.getStart(!0),tn)&&Tn(a.getEnd(!0),tn))?bn(tn):Jt())}function V(Bt){return Z_(vm(d.getBody(),Bt))}function Z(){try{d.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(Bt){}}var ee,oe,re,ie,ue,de,he,Ie,We,ve,Se,Oe,Je,ct,gt,Ge="data-mce-selected",Qe=d.dom,Ye=At.each,et=d.getDoc(),Ct=document,en=Math.abs,sn=Math.round,Tt=d.getBody(),Dt={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},xn=function(){var Hn=Se;Se=!1,Hn&&(E(ee,"width",Oe),E(ee,"height",Je)),Qe.unbind(et,"mousemove",L),Qe.unbind(et,"mouseup",xn),Ct!==et&&(Qe.unbind(Ct,"mousemove",L),Qe.unbind(Ct,"mouseup",xn)),Qe.remove(oe),Qe.remove(re),Qe.remove(ue),bn(ee),Hn&&(d.fire("ObjectResized",{target:ee,width:Oe,height:Je,origin:"corner-"+ie.name}),Qe.setAttrib(ee,"style",Qe.getAttrib(ee,"style"))),d.nodeChanged()},bn=function(Bt){Xn();var Tn=Qe.getPos(Bt,Tt),tn=Tn.x,An=Tn.y,Hn=Bt.getBoundingClientRect(),mo=Hn.width||Hn.right-Hn.left,Ae=Hn.height||Hn.bottom-Hn.top;ee!==Bt&&(Jt(),ee=Bt,Oe=Je=0);var Ze=d.fire("ObjectSelected",{target:Bt}),It=Qe.getAttrib(ee,Ge,"1");A(Bt)&&!Ze.isDefaultPrevented()?Ye(Dt,function(zt,Vt){var fn=Qe.get("mceResizeHandle"+Vt);fn&&Qe.remove(fn),fn=Qe.add(Tt,"div",{id:"mceResizeHandle"+Vt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Vt+"-resize; margin:0; padding:0"}),11===wr.ie&&(fn.contentEditable=!1),Qe.bind(fn,"mousedown",function(nr){var Ir,bi,di;nr.stopImmediatePropagation(),nr.preventDefault(),Ir=nr,di=C(ee)[0],de=Ir.screenX,he=Ir.screenY,ve=(We=di.clientHeight)/(Ie=di.clientWidth),(ie=zt).name=Vt,ie.startPos={x:mo*zt[0]+tn,y:Ae*zt[1]+An},ct=Tt.scrollWidth,gt=Tt.scrollHeight,ue=Qe.add(Tt,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),Qe.setStyles(ue,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),oe=v(bi=ee)?Qe.create("img",{src:wr.transparentSrc}):bi.cloneNode(!0),Qe.addClass(oe,"mce-clonedresizable"),Qe.setAttrib(oe,"data-mce-bogus","all"),oe.contentEditable="false",Qe.setStyles(oe,{left:tn,top:An,margin:0}),z(oe,mo,Ae),oe.removeAttribute(Ge),Tt.appendChild(oe),Qe.bind(et,"mousemove",L),Qe.bind(et,"mouseup",xn),Ct!==et&&(Qe.bind(Ct,"mousemove",L),Qe.bind(Ct,"mouseup",xn)),re=Qe.add(Tt,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},Ie+" &times; "+We)}),zt.elm=fn,Qe.setStyles(fn,{left:mo*zt[0]+tn-fn.offsetWidth/2,top:Ae*zt[1]+An-fn.offsetHeight/2})}):Jt(),Qe.getAttrib(ee,Ge)||ee.setAttribute(Ge,It)},Jt=function(){Xn(),ee&&ee.removeAttribute(Ge),qt(Dt,function(Bt,Tn){var tn=Qe.get("mceResizeHandle"+Tn);tn&&(Qe.unbind(tn),Qe.remove(tn))})},Xn=function(){qt(Dt,function(Bt){Bt.elm&&(Qe.unbind(Bt.elm),delete Bt.elm)})};return d.on("init",function(){var Bt;Z(),(wr.browser.isIE()||wr.browser.isEdge())&&(d.on("mousedown click",function(tn){var An=tn.target,Hn=An.nodeName;Se||!/^(TABLE|IMG|HR)$/.test(Hn)||V(An)||(2!==tn.button&&d.selection.select(An,"TABLE"===Hn),"mousedown"===tn.type&&d.nodeChanged())}),Qe.bind(Tt,"mscontrolselect",Bt=function(tn){function An(Hn){Di.setEditorTimeout(d,function(){return d.selection.select(Hn)})}if(V(tn.target)||zu(tn.target))return tn.preventDefault(),void An(tn.target);/^(TABLE|IMG|HR)$/.test(tn.target.nodeName)&&(tn.preventDefault(),"IMG"===tn.target.tagName&&An(tn.target))}),d.on("remove",function(){return Qe.unbind(Tt,"mscontrolselect",Bt)}));var Tn=Di.throttle(function(tn){d.composing||U(tn)});d.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",Tn),d.on("keyup compositionend",function(tn){ee&&"TABLE"===ee.nodeName&&Tn(tn)}),d.on("hide blur",Jt),d.on("contextmenu longpress",x,!0)}),d.on("remove",Xn),{isResizable:A,showResizeRect:bn,hideResizeRect:Jt,updateResizeRect:U,destroy:function(){ee=oe=ue=null}}}function Ju(a){return mu(a)||qr(a)}function Vv(a,d,g){var v,x,C,A,E,z=g;if(z.caretPositionFromPoint)(x=z.caretPositionFromPoint(a,d))&&((v=g.createRange()).setStart(x.offsetNode,x.offset),v.collapse(!0));else if(z.caretRangeFromPoint)v=z.caretRangeFromPoint(a,d);else if(z.body.createTextRange){v=z.body.createTextRange();try{v.moveToPoint(a,d),v.collapse(!0)}catch(L){v=function(U,V,Z){var ee,oe=Z.elementFromPoint(U,V),re=Z.body.createTextRange();if(oe&&"HTML"!==oe.tagName||(oe=Z.body),re.moveToElementText(oe),0<(ee=(ee=At.toArray(re.getClientRects())).sort(function(ie,ue){return(ie=Math.abs(Math.max(ie.top-V,ie.bottom-V)))-Math.abs(Math.max(ue.top-V,ue.bottom-V))})).length){V=(ee[0].bottom+ee[0].top)/2;try{return re.moveToPoint(U,V),re.collapse(!0),re}catch(ie){}}return null}(a,d,g)}return A=g.body,E=(C=v)&&C.parentElement?C.parentElement():null,qr(function(L,U,V){for(;L&&L!==U;){if(V(L))return L;L=L.parentNode}return null}(E,A,Ju))?null:C}return v}function Hv(a,d){return a&&d&&a.startContainer===d.startContainer&&a.startOffset===d.startOffset&&a.endContainer===d.endContainer&&a.endOffset===d.endOffset}function zb(a,d,g){return null!==function(v,x,C){for(;v&&v!==x;){if(C(v))return v;v=v.parentNode}return null}(a,d,g)}function h1(a){return a&&"TABLE"===a.nodeName}function Fb(a,d,g){for(var v=new ea(d,a.getParent(d.parentNode,a.isBlock)||a.getRoot());d=v[g?"prev":"next"]();)if(_i(d))return 1}function Mn(a,d,g,v,x){var C,A,E=a.getRoot(),z=a.schema.getNonEmptyElements(),L=a.getParent(x.parentNode,a.isBlock)||E;if(v&&_i(x)&&d&&a.isEmpty(L))return H.some(kt(x.parentNode,a.nodeIndex(x)));for(var U,V,Z=new ea(x,L);A=Z[v?"prev":"next"]();){if("false"===a.getContentEditableParent(A)||(V=E,ua(U=A)&&!1===zb(U,V,El)))return H.none();if(In(A)&&0<A.nodeValue.length)return!1===zb(A,E,function(ee){return"A"===ee.nodeName})?H.some(kt(A,v?A.nodeValue.length:0)):H.none();if(a.isBlock(A)||z[A.nodeName.toLowerCase()])return H.none();C=A}return g&&C?H.some(kt(C,0)):H.none()}function Sd(a,d,g,v){var x,C=a.getRoot(),A=!1,E=v[(g?"start":"end")+"Container"],z=v[(g?"start":"end")+"Offset"],L=Mr(E)&&z===E.childNodes.length,U=a.schema.getNonEmptyElements(),V=g;if(ua(E))return H.none();if(Mr(E)&&z>E.childNodes.length-1&&(V=!1),yf(E)&&(E=C,z=0),E===C){if(V&&(Z=E.childNodes[0<z?z-1:0])&&(ua(Z)||U[Z.nodeName]||h1(Z)))return H.none();if(E.hasChildNodes()){if(z=Math.min(!V&&0<z?z-1:z,E.childNodes.length-1),z=In(E=E.childNodes[z])&&L?E.data.length:0,!d&&E===C.lastChild&&h1(E)||function(oe,re){for(;re&&re!==oe;){if(qr(re))return 1;re=re.parentNode}}(C,E)||ua(E))return H.none();if(E.hasChildNodes()&&!1===h1(E)){var Z=E,ee=new ea(E,C);do{if(qr(Z)||ua(Z)){A=!1;break}if(In(Z)&&0<Z.nodeValue.length){z=V?0:Z.nodeValue.length,E=Z,A=!0;break}if(U[Z.nodeName.toLowerCase()]&&(!(x=Z)||!/^(TD|TH|CAPTION)$/.test(x.nodeName))){z=a.nodeIndex(Z),E=Z.parentNode,V||z++,A=!0;break}}while(Z=V?ee.next():ee.prev())}}}return d&&(In(E)&&0===z&&Mn(a,L,d,!0,E).each(function(oe){E=oe.container(),z=oe.offset(),A=!0}),Mr(E)&&(!(Z=(Z=E.childNodes[z])||E.childNodes[z-1])||!_i(Z)||Z.previousSibling&&"A"===Z.previousSibling.nodeName||Fb(a,Z,!1)||Fb(a,Z,!0)||Mn(a,L,d,!0,Z).each(function(oe){E=oe.container(),z=oe.offset(),A=!0}))),V&&!d&&In(E)&&z===E.nodeValue.length&&Mn(a,L,d,!1,E).each(function(oe){E=oe.container(),z=oe.offset(),A=!0}),A?H.some(kt(E,z)):H.none()}function Cd(a,d){var g=d.collapsed,v=d.cloneRange(),x=kt.fromRangeStart(d);return Sd(a,g,!0,v).each(function(C){g&&kt.isAbove(x,C)||v.setStart(C.container(),C.offset())}),g||Sd(a,g,!1,v).each(function(C){v.setEnd(C.container(),C.offset())}),g&&v.collapse(!0),Hv(d,v)?H.none():H.some(v)}function pp(a,d){return a.splitText(d)}function kd(a){var d=a.startContainer,g=a.startOffset,v=a.endContainer,x=a.endOffset;return d===v&&In(d)?0<g&&g<d.nodeValue.length&&(d=(v=pp(d,g)).previousSibling,g<x?(d=v=pp(v,x-=g).previousSibling,x=v.nodeValue.length,g=0):x=0):(In(d)&&0<g&&g<d.nodeValue.length&&(d=pp(d,g),g=0),In(v)&&0<x&&x<v.nodeValue.length&&(x=(v=pp(v,x).previousSibling).nodeValue.length)),{startContainer:d,startOffset:g,endContainer:v,endOffset:x}}function Wf(a){return{walk:function(d,g){return _c(a,d,g)},split:kd,normalize:function(d){return Cd(a,d).fold(_r,function(g){return d.setStart(g.startContainer,g.startOffset),d.setEnd(g.endContainer,g.endOffset),!0})}}}uo.isBookmarkNode=xc;var mr={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(a){return a.shiftKey||a.ctrlKey||a.altKey||mr.metaKeyPressed(a)},metaKeyPressed:function(a){return wr.mac?a.metaKey:a.ctrlKey&&!a.altKey}},Z_=qr;Wf.compareRanges=Hv,Wf.getCaretRangeFromPoint=Vv,Wf.getSelectedNode=op,Wf.getNode=gh;var qc,Wv,ym=(qc="height",Wv=function(a){var d=a.dom;return ad(a)?d.getBoundingClientRect().height:d.offsetHeight},{set:function(a,d){if(!Rn(d)&&!d.match(/^[0-9]+$/))throw new Error(qc+".set accepts only positive integer values. Value was "+d);var g=a.dom;Vi(g)&&(g.style[qc]=d+"px")},get:bm,getOuter:bm,aggregate:rc,max:function(a,d,g){var v=rc(a,g);return v<d?d-v:0}});function bm(a){var d=Wv(a);if(d<=0||null===d){var g=ks(a,qc);return parseFloat(g)||0}return d}function rc(a,d){return Dr(d,function(g,v){var x=ks(a,v),C=void 0===x?0:parseInt(x,10);return isNaN(C)?g:g+C},0)}function Gv(a){return"textarea"===Oi(a)}function Vb(a,d){var g=function(x){var C=x.dom.ownerDocument,A=C.body,E=C.defaultView,z=C.documentElement;if(A===x.dom)return Ul(A.offsetLeft,A.offsetTop);var L=Vd(null==E?void 0:E.pageYOffset,z.scrollTop),U=Vd(null==E?void 0:E.pageXOffset,z.scrollLeft),V=Vd(z.clientTop,A.clientTop),Z=Vd(z.clientLeft,A.clientLeft);return Ji(x).translate(U-Z,L-V)}(a),v=ym.get(a);return{element:a,bottom:g.top+v,height:v,pos:g,cleanup:d}}function jv(a,d,g,v){Yv(a,function(x,C){return Xv(a,d,g,v)},g)}function Ch(a,d,g,v,x){var C={elm:v.element.dom,alignToTop:x};a.fire("ScrollIntoView",C).isDefaultPrevented()||(g(d,nl(d).top,v,x),a.fire("AfterScrollIntoView",C))}function gy(a,d,g,v){var x=it.fromDom(a.getDoc());Ch(a,x,g,Vb(it.fromDom(d),Ut),v)}function my(a,d,g,v){var C=a.pos;Gh(C.left,g?C.top:C.top-d+a.height,v)}function vp(a,d,g,v,x){var C=g+d,A=v.pos.top,E=v.bottom,z=g<=E-A;A<d?my(v,g,!1!==x,a):C<A?my(v,g,z?!1!==x:!0===x,a):C<E&&!z&&my(v,g,!0===x,a)}function Hb(a,d,g,v){vp(a,d,a.dom.defaultView.innerHeight,g,v)}function ss(a,d,g,v){vp(a,d,a.dom.defaultView.innerHeight,g,v);var x,C,A,E,z,L,U,V=(x=g.element,E=nl(it.fromDom(document)),A=(C=Za).owner(x),z=xy(C,A),L=Ji(x),U=pe(z,function(ee,oe){var re=Ji(oe);return{left:ee.left+re.left,top:ee.top+re.top}},{left:0,top:0}),Ul(U.left+L.left+E.left,U.top+L.top+E.top)),Z=Po(window);V.top<Z.y?jh(g.element,!1!==v):V.top>Z.bottom&&jh(g.element,!0===v)}function Md(a,d,g){return jv(a,Hb,d,g)}function af(a,d,g){return gy(a,d,Hb,g)}function yp(a,d,g){return jv(a,ss,d,g)}function Uv(a,d,g){return gy(a,d,ss,g)}function kh(a,d,g){(a.inline?Md:yp)(a,d,g)}function g1(a){var d=Ki(a).dom;return a.dom===d.activeElement}function vg(a){return void 0===a&&(a=it.fromDom(document)),H.from(a.dom.activeElement).map(it.fromDom)}function bp(a,d){var g=ja(d)?eo(d).length:pn(d).length+1;return g<a?g:a<0?0:a}function py(a){return _.range(a.start,bp(a.soffset,a.start),a.finish,bp(a.foffset,a.finish))}function m1(a,d){return!Hd(d.dom)&&(rt(a,d)||$t(a,d))}function As(a){return function(d){return m1(a,d.start)&&m1(a,d.finish)}}function ho(a){return!0===a.inline||D.isIE()}function Wb(a){return _.range(it.fromDom(a.startContainer),a.startOffset,it.fromDom(a.endContainer),a.endOffset)}function vy(a){var d=document.createRange();try{return d.setStart(a.start.dom,a.soffset),d.setEnd(a.finish.dom,a.foffset),H.some(d)}catch(g){return H.none()}}function Xc(a){var d,g,v=ho(a)?((g=ma(d=it.fromDom(a.getBody())).dom.getSelection())&&0!==g.rangeCount?H.from(g.getRangeAt(0)):H.none()).map(Wb).filter(As(d)):H.none();a.bookmark=v.isSome()?v:a.bookmark}function yy(a){return(a.bookmark||H.none()).bind(function(d){return g=it.fromDom(a.getBody()),H.from(d).filter(As(g)).map(py);var g}).bind(vy)}function Kn(a,d){var g=a.getParam("custom_ui_selector","","string");return null!==W.getParent(d,function(v){return B.isEditorUIElement(v)||!!g&&a.dom.is(v,g)})}function qv(a,d){var g=d.editor;(function(a){var d=If(function(){Xc(a)},0);a.on("init",function(){function g(){x.throttle()}var v,x,C,A,E,z;a.inline&&(v=a,x=d,ci.DOM.bind(document,"mouseup",g),v.on("remove",function(){ci.DOM.unbind(document,"mouseup",g)})),C=a,A=d,$i().browser.isIE()?(z=C).on("focusout",function(){Xc(z)}):(E=A,C.on("mouseup touchend",function(L){E.throttle()})),C.on("keyup NodeChange",function(L){"nodechange"===L.type&&L.selectionChange||Xc(C)})}),a.on("remove",function(){d.cancel()})})(g),g.on("focusin",function(){var v=a.focusedEditor;v!==g&&(v&&v.fire("blur",{focusedEditor:g}),a.setActive(g),(a.focusedEditor=g).fire("focus",{blurredEditor:v}),g.focus(!0))}),g.on("focusout",function(){Di.setEditorTimeout(g,function(){var v=a.focusedEditor;Kn(g,function(x){try{return vg(Ki(it.fromDom(x.getElement()))).fold(function(){return document.body},function(C){return C.dom})}catch(C){return document.body}}(g))||v!==g||(g.fire("blur",{focusedEditor:null}),a.focusedEditor=null)})}),sf||(sf=function(v){var x=a.activeEditor;x&&function(C){if(rl()&&ze(C.target)){var A=it.fromDom(C.target);if(Hi(A)&&ze(A.dom.shadowRoot)&&C.composed&&C.composedPath){var E=C.composedPath();if(E)return ut(E)}}return H.from(C.target)}(v).each(function(C){C.ownerDocument===document&&(C===document.body||Kn(x,C)||a.focusedEditor!==x||(x.fire("blur",{focusedEditor:null}),a.focusedEditor=null))})},W.bind(document,"focusin",sf))}function go(a,d){a.focusedEditor===d.editor&&(a.focusedEditor=null),a.activeEditor||(W.unbind(document,"focusin",sf),sf=null)}function by(a,d){var g,v;g=it.fromDom(a.getBody()),((v=d).collapsed?H.from(gh(v.startContainer,v.startOffset)).map(it.fromDom):H.none()).bind(function(x){return Wr(x)?H.some(x):!1===rt(g,x)?H.some(g):H.none()}).bind(function(x){return Ku(x.dom)}).fold(function(){a.selection.normalize()},function(x){return a.selection.setRng(x.toRange())})}function js(a){if(a.setActive)try{a.setActive()}catch(d){a.focus()}else a.focus()}function Oa(a){return a.inline?(v=a.getBody())&&(g1(d=it.fromDom(v))||vg(Ki(g=d)).filter(function(x){return g.dom.contains(x.dom)}).isSome()):a.iframeElement&&g1(it.fromDom(a.iframeElement));var d,g,v}function xp(a,d,g,v,x){var A=g?d.startOffset:d.endOffset;return H.from(g?d.startContainer:d.endContainer).map(it.fromDom).map(function(E){return v&&d.collapsed?E:nd(E,x(E,A)).getOr(E)}).bind(function(E){return Hi(E)?H.some(E):Pu(E).filter(Hi)}).map(function(E){return E.dom}).getOr(a)}function lu(a,d,g){return xp(a,d,!0,g,function(v,x){return Math.min(Cs(v),x)})}function _p(a,d,g){return xp(a,d,!1,g,function(v,x){return 0<x?x-1:x})}function xm(a,d){for(var g=a;a&&In(a)&&0===a.length;)a=d?a.nextSibling:a.previousSibling;return a||g}function _m(a,d){return xt(d,function(g){var v=a.fire("GetSelectionRange",{range:g});return v.range!==g?v.range:g})}function Mh(a,d,g){var v=g?"lastChild":"firstChild",x=g?"prev":"next";if(a[v])return a[v];if(a!==d){var C=a[x];if(C)return C;for(var A=a.parent;A&&A!==d;A=A.parent)if(C=A[x])return C}}function Th(a){var d="a"===a.name&&!a.attr("href")&&a.attr("id");return a.attr("name")||a.attr("id")&&!a.firstChild||a.attr("data-mce-bookmark")||d}var sf,xy=function(a,d){return a.view(d).fold(Zt([]),function(g){var v=a.owner(g),x=xy(a,v);return[g].concat(x)})},Za=Object.freeze({__proto__:null,view:function(a){var d;return(a.dom===document?H.none():H.from(null===(d=a.dom.defaultView)||void 0===d?void 0:d.frameElement)).map(it.fromDom)},owner:$s}),Xv=function(a,d,g,v){it.fromDom(a.getBody());var z,L,C=it.fromDom(a.getDoc()),U=(z=function(V,Z){var ee=pn(V);if(0===ee.length||Gv(V))return{element:V,offset:Z};if(Z<ee.length&&!Gv(ee[Z]))return{element:ee[Z],offset:0};var oe=ee[ee.length-1];return Gv(oe)?{element:V,offset:Z}:"img"===Oi(oe)?{element:oe,offset:1}:ja(oe)?{element:oe,offset:eo(oe).length}:{element:oe,offset:pn(oe).length}}(it.fromDom(g.startContainer),g.startOffset),L=it.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>'),Ui(z.element,L),Vb(L,function(){return Sr(L)}));Ch(a,C,d,U,v),U.cleanup()},Yv=function(a,d,g){var v=g.startContainer,x=g.startOffset,C=g.endContainer,A=g.endOffset;d(it.fromDom(v),it.fromDom(C));var E=a.dom.createRng();E.setStart(v,x),E.setEnd(C,A),a.selection.setRng(g)},Gf=(Xl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),function(a){return a.fold(Eo,Eo,Eo)}),Sc=Xl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),_={domRange:Sc.domRange,relative:Sc.relative,exact:Sc.exact,exactFromRange:function(a){return Sc.exact(a.start,a.soffset,a.finish,a.foffset)},getWin:function(a){return ma(a.match({domRange:function(d){return it.fromDom(d.startContainer)},relative:function(d,g){return Gf(d)},exact:function(d,g,v,x){return d}}))},range:function(a,d,g,v){return{start:a,soffset:d,finish:g,foffset:v}}},D=$i().browser,B={isEditorUIElement:function(a){var d=a.className.toString();return-1!==d.indexOf("tox-")||-1!==d.indexOf("mce-")}},W=ci.DOM,K=function(a){return a.editorManager.setActive(a)},J={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},se=(fe.create=function(a,d){var g=new fe(a,J[a]||1);return d&&qt(d,function(v,x){g.attr(x,v)}),g},fe.prototype.replace=function(a){return a.parent&&a.remove(),this.insert(a,this),this.remove(),this},fe.prototype.attr=function(a,d){var g,v=this;if("string"!=typeof a)return null!=a&&qt(a,function(C,A){v.attr(A,C)}),v;if(g=v.attributes){if(void 0===d)return g.map[a];if(null===d){if(a in g.map){delete g.map[a];for(var x=g.length;x--;)if(g[x].name===a)return g.splice(x,1),v}return v}if(a in g.map){for(x=g.length;x--;)if(g[x].name===a){g[x].value=d;break}}else g.push({name:a,value:d});return g.map[a]=d,v}},fe.prototype.clone=function(){var a,d=new fe(this.name,this.type);if(a=this.attributes){var g=[];g.map={};for(var v=0,x=a.length;v<x;v++){var C=a[v];"id"!==C.name&&(g[g.length]={name:C.name,value:C.value},g.map[C.name]=C.value)}d.attributes=g}return d.value=this.value,d.shortEnded=this.shortEnded,d},fe.prototype.wrap=function(a){return this.parent.insert(a,this),a.append(this),this},fe.prototype.unwrap=function(){for(var a=this.firstChild;a;){var d=a.next;this.insert(a,this,!0),a=d}this.remove()},fe.prototype.remove=function(){var a=this.parent,d=this.next,g=this.prev;return a&&(a.firstChild===this?(a.firstChild=d)&&(d.prev=null):g.next=d,a.lastChild===this?(a.lastChild=g)&&(g.next=null):d.prev=g,this.parent=this.next=this.prev=null),this},fe.prototype.append=function(a){a.parent&&a.remove();var d=this.lastChild;return d?((d.next=a).prev=d,this.lastChild=a):this.lastChild=this.firstChild=a,a.parent=this,a},fe.prototype.insert=function(a,d,g){a.parent&&a.remove();var v=d.parent||this;return g?(d===v.firstChild?v.firstChild=a:d.prev.next=a,a.prev=d.prev,(a.next=d).prev=a):(d===v.lastChild?v.lastChild=a:d.next.prev=a,a.next=d.next,(a.prev=d).next=a),a.parent=v,a},fe.prototype.getAll=function(a){for(var d=[],g=this.firstChild;g;g=Mh(g,this))g.name===a&&d.push(g);return d},fe.prototype.children=function(){for(var a=[],d=this.firstChild;d;d=d.next)a.push(d);return a},fe.prototype.empty=function(){if(this.firstChild){for(var a=[],d=this.firstChild;d;d=Mh(d,this))a.push(d);for(var g=a.length;g--;)(d=a[g]).parent=d.firstChild=d.lastChild=d.next=d.prev=null}return this.firstChild=this.lastChild=null,this},fe.prototype.isEmpty=function(a,d,g){void 0===d&&(d={});var v=this.firstChild;if(Th(this))return!1;if(v)do{if(1===v.type){if(v.attr("data-mce-bogus"))continue;if(a[v.name]||Th(v))return!1}if(8===v.type||3===v.type&&!function(x){if(N(x.value)){var C=x.parent;return!C||"span"===C.name&&!C.attr("style")||!/^[ ]+$/.test(x.value)}}(v)||3===v.type&&v.parent&&d[v.parent.name]&&N(v.value)||g&&g(v))return!1}while(v=Mh(v,this));return!0},fe.prototype.walk=function(a){return Mh(this,null,a)},fe);function fe(a,d){this.name=a,1===(this.type=d)&&(this.attributes=[],this.attributes.map={})}function we(a,d){return a.replace(d.re,function(g){return Vn(d.uris,g).getOr(g)})}var ke=At.each,Le=At.trim,Fe="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Re={ftp:21,http:80,https:443,mailto:25},tt=["img","video"],He=(at.parseDataUri=function(a){var d,g=decodeURIComponent(a).split(","),v=/data:([^;]+)/.exec(g[0]);return{type:d=v?v[1]:d,data:g[1]}},at.isDomSafe=function(a,d,g){if((g=void 0===g?{}:g).allow_script_urls)return!0;var v,x,C,A,E=Xa.decode(a).replace(/[\s\u0000-\u001F]+/g,"");try{E=decodeURIComponent(E)}catch(z){E=unescape(E)}return!(/((java|vb)script|mhtml):/i.test(E)||(x=E,C=d,!(v=g).allow_html_data_urls&&(/^data:image\//i.test(x)?(ze(A=v.allow_svg_data_urls)?!A:!ze(C)||!Mt(tt,C))&&/^data:image\/svg\+xml/i.test(x):/^data:/i.test(x))))},at.getDocumentBaseUrl=function(a){var d=0!==a.protocol.indexOf("http")&&"file:"!==a.protocol?a.href:a.protocol+"//"+a.host+a.pathname;return/^[^:]+:\/\/\/?[^\/]+\//.test(d)&&(d=d.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(d)||(d+="/")),d},at.prototype.setPath=function(a){var d=/^(.*?)\/?(\w+)?$/.exec(a);this.path=d[0],this.directory=d[1],this.file=d[2],this.source="",this.getURI()},at.prototype.toRelative=function(a){var d;if("./"===a)return a;var g=new at(a,{base_uri:this});if("mce_host"!==g.host&&this.host!==g.host&&g.host||this.port!==g.port||this.protocol!==g.protocol&&""!==g.protocol)return g.getURI();var v=this.getURI(),x=g.getURI();return v===x||"/"===v.charAt(v.length-1)&&v.substr(0,v.length-1)===x?v:(d=this.toRelPath(this.path,g.path),g.query&&(d+="?"+g.query),g.anchor&&(d+="#"+g.anchor),d)},at.prototype.toAbsolute=function(a,d){var g=new at(a,{base_uri:this});return g.getURI(d&&this.isSameOrigin(g))},at.prototype.isSameOrigin=function(a){if(this.host==a.host&&this.protocol==a.protocol){if(this.port==a.port)return!0;var d=Re[this.protocol];if(d&&(this.port||d)==(a.port||d))return!0}return!1},at.prototype.toRelPath=function(a,d){var g,v,x=0,C="",A=a.substring(0,a.lastIndexOf("/")).split("/"),E=d.split("/");if(A.length>=E.length)for(g=0,v=A.length;g<v;g++)if(g>=E.length||A[g]!==E[g]){x=g+1;break}if(A.length<E.length)for(g=0,v=E.length;g<v;g++)if(g>=A.length||A[g]!==E[g]){x=g+1;break}if(1===x)return d;for(g=0,v=A.length-(x-1);g<v;g++)C+="../";for(g=x-1,v=E.length;g<v;g++)C+=g!==x-1?"/"+E[g]:E[g];return C},at.prototype.toAbsPath=function(a,d){var g,v,x=0,C=[],A=/\/$/.test(d)?"/":"",E=a.split("/"),z=d.split("/");for(ke(E,function(L){L&&C.push(L)}),E=C,g=z.length-1,C=[];0<=g;g--)0!==z[g].length&&"."!==z[g]&&(".."!==z[g]?0<x?x--:C.push(z[g]):x++);return 0!==(v=(g=E.length-x)<=0?zi(C).join("/"):E.slice(0,g).join("/")+"/"+zi(C).join("/")).indexOf("/")&&(v="/"+v),A&&v.lastIndexOf("/")!==v.length-1&&(v+=A),v},at.prototype.getURI=function(a){var d;return void 0===a&&(a=!1),this.source&&!a||(d="",a||(d+=this.protocol?this.protocol+"://":"//",this.userInfo&&(d+=this.userInfo+"@"),this.host&&(d+=this.host),this.port&&(d+=":"+this.port)),this.path&&(d+=this.path),this.query&&(d+="?"+this.query),this.anchor&&(d+="#"+this.anchor),this.source=d),this.source},at);function at(a,d){a=Le(a),this.settings=d||{};var g,v,x,C,A=this.settings.base_uri,E=this;/^([\w\-]+):([^\/]{2})/i.test(a)||/^\s*#/.test(a)?E.source=a:(g=0===a.indexOf("//"),0!==a.indexOf("/")||g||(a=(A&&A.protocol||"http")+"://mce_host"+a),/^[\w\-]*:?\/\//.test(a)||(v=this.settings.base_uri?this.settings.base_uri.path:new at(document.location.href).directory,a=this.settings.base_uri&&""==this.settings.base_uri.protocol?"//mce_host"+E.toAbsPath(v,a):(x=/([^#?]*)([#?]?.*)/.exec(a),(A&&A.protocol||"http")+"://mce_host"+E.toAbsPath(v,x[1])+x[2])),a=a.replace(/@@/g,"(mce_at)"),C=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a),ke(Fe,function(z,L){var U=(U=C[L])&&U.replace(/\(mce_at\)/g,"@@");E[z]=U}),A&&(E.protocol||(E.protocol=A.protocol),E.userInfo||(E.userInfo=A.userInfo),E.port||"mce_host"!==E.host||(E.port=A.port),E.host&&"mce_host"!==E.host||(E.host=A.host),E.source=""),g&&(E.protocol=""))}function vt(a,d,g){for(var v=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,x=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,C=a.getShortEndedElements(),A=1,E=g;0!==A;)for(v.lastIndex=E;;){var z=v.exec(d);if(null===z)return E;if("!"===z[1]){E=dr(z[2],"--")?Wt(d,!1,z.index+"!--".length):Wt(d,!0,z.index+1);break}x.lastIndex=v.lastIndex;var L=x.exec(d);if(!Qn(L)&&L.index===v.lastIndex){"/"===z[1]?--A:ao(C,z[2])||(A+=1),E=v.lastIndex+L[0].length;break}}return E}function Ue(a,d){var g;void 0===d&&(d=Xe());var v=null!==(g=(a=a||{}).document)&&void 0!==g?g:document,x=v.createElement("form");!1!==a.fix_self_closing&&(a.fix_self_closing=!0);var A=a.comment||Ut,E=a.cdata||Ut,z=a.text||Ut,L=a.start||Ut,U=a.end||Ut,V=a.pi||Ut,Z=a.doctype||Ut;return{parse:function(ee,oe){void 0===oe&&(oe="html"),function(ee,oe){void 0===oe&&(oe="html");for(var re,ie,ue,de,he,Ie,We,ve,Se,Oe,Je,ct,gt,Ge,Qe,Ye,et,Ct,en,sn=ee.html,Tt=0,Dt=[],xn=0,bn=Xa.decode,Jt=At.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Xn="html"===oe?0:1,Bt=function(ir){for(var ti,Ii=Dt.length;Ii--&&Dt[Ii].name!==ir;);if(0<=Ii){for(ti=Dt.length-1;Ii<=ti;ti--)(ir=Dt[ti]).valid&&U(ir.name);Dt.length=Ii}},Tn=function(ir,ti){return z(we(ir,ee),ti)},tn=function(ir){""!==ir&&(">"===ir.charAt(0)&&(ir=" "+ir),a.allow_conditional_comments||"[if"!==ir.substr(0,3).toLowerCase()||(ir=" "+ir),A(we(ir,ee)))},An=function(ir,ti){var Ii=ir||"",fu=!dr(Ii,"--"),wa=Wt(sn,fu,ti);return ir=sn.substr(ti,wa-ti),tn(fu?Ii+ir:ir),wa+1},Hn=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>))","g"),mo=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,Ae=d.getShortEndedElements(),Ze=a.self_closing_elements||d.getSelfClosingElements(),It=d.getBoolAttrs(),zt=a.validate,Vt=a.remove_internals,fn=a.fix_self_closing,nr=d.getSpecialElements(),Ir=sn+">";re=Hn.exec(Ir);){var bi=re[0];if(Tt<re.index&&Tn(bn(sn.substr(Tt,re.index-Tt))),ie=re[7])Bt(ie=":"===(ie=ie.toLowerCase()).charAt(0)?ie.substr(1):ie);else if(ie=re[8]){if(re.index+bi.length>sn.length){Tn(bn(sn.substr(re.index))),Tt=re.index+bi.length;continue}Se=(ie=":"===(ie=ie.toLowerCase()).charAt(0)?ie.substr(1):ie)in Ae,fn&&Ze[ie]&&0<Dt.length&&Dt[Dt.length-1].name===ie&&Bt(ie);var di=function(ir,ti){var Ii=ir.exec(ti);if(Ii){var fu=Ii[1],wa=Ii[2];return"string"==typeof fu&&"data-mce-bogus"===fu.toLowerCase()?wa:null}return null}(mo,re[9]);if(null!==di){if("all"===di){Tt=vt(d,sn,Hn.lastIndex),Hn.lastIndex=Tt;continue}Je=!1}if(!zt||(Oe=d.getElementRule(ie))){if(Je=!0,zt&&(Ge=Oe.attributes,Qe=Oe.attributePatterns),(gt=re[9])?((ve=-1!==gt.indexOf("data-mce-type"))&&Vt&&(Je=!1),(de=[]).map={},gt.replace(mo,function(ir,ti,Ii,fu,wa){return function(mf,ls,el,Vh,lb){var Qf;if(el=we((ls=ls.toLowerCase())in It?ls:bn(el||Vh||lb||""),ee),zt&&!ve&&0==(0===(Qf=ls).indexOf("data-")||0===Qf.indexOf("aria-"))){var Hh=Ge[ls];if(!Hh&&Qe){for(var eh=Qe.length;eh--&&!(Hh=Qe[eh]).pattern.test(ls););-1===eh&&(Hh=null)}if(!Hh||Hh.validValues&&!(el in Hh.validValues))return}("name"===ls||"id"===ls)&&mf in st&&(el in v||el in x)||Jt[ls]&&!He.isDomSafe(el,mf,a)||ve&&(ls in Jt||0===ls.indexOf("on"))||(de.map[ls]=el,de.push({name:ls,value:el}))}(ie,ti,Ii,fu,wa),""})):(de=[]).map={},zt&&!ve){if(Ye=Oe.attributesRequired,et=Oe.attributesDefault,Oe.removeEmptyAttrs&&!de.length&&(Je=!1),Ct=Oe.attributesForced)for(he=Ct.length;he--;)We=(ct=Ct[he]).name,"{$uid}"===(en=ct.value)&&(en="mce_"+xn++),de.map[We]=en,de.push({name:We,value:en});if(et)for(he=et.length;he--;)(We=(ct=et[he]).name)in de.map||("{$uid}"===(en=ct.value)&&(en="mce_"+xn++),de.map[We]=en,de.push({name:We,value:en}));if(Ye){for(he=Ye.length;he--&&!(Ye[he]in de.map););-1===he&&(Je=!1)}if(ct=de.map["data-mce-bogus"]){if("all"===ct){Tt=vt(d,sn,Hn.lastIndex),Hn.lastIndex=Tt;continue}Je=!1}}Je&&L(ie,de,Se)}else Je=!1;if(ue=nr[ie]){ue.lastIndex=Tt=re.index+bi.length,Tt=(re=ue.exec(sn))?(Je&&(Ie=sn.substr(Tt,re.index-Tt)),re.index+re[0].length):(Ie=sn.substr(Tt),sn.length),Je&&(0<Ie.length&&Tn(Ie,!0),U(ie)),Hn.lastIndex=Tt;continue}Se||(gt&&gt.indexOf("/")===gt.length-1?Je&&U(ie):Dt.push({name:ie,valid:Je}))}else if(ie=re[1])tn(ie);else if(ie=re[2]){if(!(1==Xn||a.preserve_cdata||0<Dt.length&&d.isValidChild(Dt[Dt.length-1].name,"#cdata"))){Tt=An("",re.index+2),Hn.lastIndex=Tt;continue}E(ie)}else if(ie=re[3])Z(ie);else{if((ie=re[4])||"<!"===bi){Tt=An(ie,re.index+bi.length),Hn.lastIndex=Tt;continue}if(ie=re[5]){if(1!=Xn){Tt=An("?",re.index+2),Hn.lastIndex=Tt;continue}V(ie,re[6])}}Tt=re.index+bi.length}for(Tt<sn.length&&Tn(bn(sn.substr(Tt))),he=Dt.length-1;0<=he;he--)(ie=Dt[he]).valid&&U(ie.name)}(function(re){for(var ie,ue=/data:[^;]+;base64,([a-z0-9\+\/=\s]+)/gi,de=[],he={},Ie=Ia("img"),We=0,ve=0;ie=ue.exec(re);){var Se=ie[0],Oe=Ie+"_"+ve++;he[Oe]=Se,We<ie.index&&de.push(re.substr(We,ie.index-We)),de.push(Oe),We=ie.index+Se.length}var Je=new RegExp(Ie+"_[0-9]+","g");return 0===We?{prefix:Ie,uris:he,html:re,re:Je}:(We<re.length&&de.push(re.substr(We)),{prefix:Ie,uris:he,html:de.join(""),re:Je})}(ee),oe)}}}var st=At.makeMap("button,fieldset,form,iframe,img,image,input,object,output,select,textarea"),Wt=function(a,d,g){void 0===g&&(g=0);var v=a.toLowerCase();if(-1!==v.indexOf("[if ",g)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(v.substr(g))){var x=v.indexOf("[endif]",g);return v.indexOf(">",x)}if(d){var C=v.indexOf(">",g);return-1!==C?C:v.length}var A=/--!?>/g;A.lastIndex=g;var z=A.exec(a);return z?z.index+z[0].length:v.length};function Ke(a,d){for(var g,v,x,C,A=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,E=a.schema,z=(g=a.getTempAttrs(),v=d,x=new RegExp(["\\s?("+g.join("|")+')="[^"]+"'].join("|"),"gi"),v.replace(x,"")),L=E.getShortEndedElements();C=A.exec(z);){var U=A.lastIndex,V=C[0].length,Z=L[C[1]]?U:Ue.findEndTag(E,z,U);z=z.substring(0,U-V)+z.substring(Z),A.lastIndex=U-V}return Ma(z)}function Gt(a){return{compare:function(d,g){return d.nodeName===g.nodeName&&!(!x(v(d),v(g))||!x(a.parseStyle(a.getAttrib(d,"style")),a.parseStyle(a.getAttrib(g,"style")))||xc(d)||xc(g));function v(C){var A={};return qn(a.getAttribs(C),function(E){var z=E.nodeName.toLowerCase();0!==z.indexOf("_")&&"style"!==z&&0!==z.indexOf("data-")&&(A[z]=a.getAttrib(C,z))}),A}function x(C,A){var E,z;for(z in C)if(ao(C,z)){if(void 0===(E=A[z])||C[z]!==E)return;delete A[z]}for(z in A)if(ao(A,z))return;return 1}}}}function yt(a){var d=[],g=(a=a||{}).indent,v=Fr(a.indent_before||""),x=Fr(a.indent_after||""),C=Xa.getEncodeFunc(a.entity_encoding||"raw",a.entities),A="html"===a.element_format;return{start:function(E,z,L){var U,V,Z,ee;if(g&&v[E]&&0<d.length&&0<(ee=d[d.length-1]).length&&"\n"!==ee&&d.push("\n"),d.push("<",E),z)for(U=0,V=z.length;U<V;U++)d.push(" ",(Z=z[U]).name,'="',C(Z.value,!0),'"');d[d.length]=!L||A?">":" />",L&&g&&x[E]&&0<d.length&&0<(ee=d[d.length-1]).length&&"\n"!==ee&&d.push("\n")},end:function(E){var z;d.push("</",E,">"),g&&x[E]&&0<d.length&&0<(z=d[d.length-1]).length&&"\n"!==z&&d.push("\n")},text:function(E,z){0<E.length&&(d[d.length]=z?E:C(E))},cdata:function(E){d.push("<![CDATA[",E,"]]>")},comment:function(E){d.push("\x3c!--",E,"--\x3e")},pi:function(E,z){z?d.push("<?",E," ",C(z),"?>"):d.push("<?",E,"?>"),g&&d.push("\n")},doctype:function(E){d.push("<!DOCTYPE",E,">",g?"\n":"")},reset:function(){d.length=0},getContent:function(){return d.join("").replace(/\n$/,"")}}}function Bn(a,d){void 0===d&&(d=Xe());var g=yt(a);return(a=a||{}).validate=!("validate"in a)||a.validate,{serialize:function(v){var x=a.validate,C={3:function(E){g.text(E.value,E.raw)},8:function(E){g.comment(E.value)},7:function(E){g.pi(E.name,E.value)},10:function(E){g.doctype(E.value)},4:function(E){g.cdata(E.value)},11:function(E){if(E=E.firstChild)for(;A(E),E=E.next;);}};g.reset();var A=function(E){var z=C[E.type];if(z)z(E);else{var L=E.name,U=E.shortEnded,V=E.attributes;if(x&&V&&1<V.length){var Z=[];Z.map={};var ee=d.getElementRule(E.name);if(ee){for(var oe=0,re=ee.attributesOrder.length;oe<re;oe++)(ie=ee.attributesOrder[oe])in V.map&&(Z.map[ie]=ue=V.map[ie],Z.push({name:ie,value:ue}));var ie,ue;for(oe=0,re=V.length;oe<re;oe++)(ie=V[oe].name)in Z.map||(Z.map[ie]=ue=V.map[ie],Z.push({name:ie,value:ue}));V=Z}}if(g.start(E.name,V,U),!U){if(E=E.firstChild)for(;A(E),E=E.next;);g.end(L)}}};return 1!==v.type||a.inner?C[11](v):A(v),g.getContent()}}}Ue.findEndTag=vt;var Yt=Ke,qn=At.each,Fr=At.makeMap,fr=new Set;function Vr(a,d){return wn(a.parseStyle(a.getAttrib(d,"style")))}function io(a,d,g){return H.from(g.container()).filter(In).exists(function(v){var x=a?0:-1;return d(v.data.charAt(g.offset()+x))})}function Br(a){var d=a.container();return In(d)&&(0===d.data.length||rs(d.data)&&uo.isBookmarkNode(d.parentNode))}function to(a,d){return function(g){return H.from(rm(a?0:-1,g)).filter(d).isSome()}}function zn(a){return Zr(a)&&"block"===ks(it.fromDom(a),"display")}function Ri(a){return qr(a)&&!(Mr(d=a)&&"all"===d.getAttribute("data-mce-bogus"));var d}function Xr(a){pf(a),Ua(a,it.fromHtml('<br data-mce-bogus="1">'))}function Ci(a){gu(a).each(function(d){Ei(d).each(function(g){Hr(a)&&gc(d)&&Hr(g)&&Sr(d)})})}function So(a,d){return x=_r,rt(v=d,g=a)?function(C,A){for(var E=dn(A)?A:_r,z=C.dom,L=[];null!=z.parentNode;){var U=z.parentNode,V=it.fromDom(U);if(L.push(V),!0===E(V))break;z=U}return L}(g,function(C){return x(C)||$t(C,v)}).slice(0,-1):[];var g,v,x}function Do(a,d){return[a].concat(So(a,d))}function na(a,d,g){return nc(a,d,g,Br)}function ra(a,d){return gi(Do(it.fromDom(d.container()),a),Hr)}function fa(a,d,g){return na(a,d.dom,g).forall(function(v){return ra(d,g).fold(function(){return!1===Yu(v,g,d.dom)},function(x){return!1===Yu(v,g,d.dom)&&rt(x,it.fromDom(v.container()))})})}function jr(a,d,g){return ra(d,g).fold(function(){return na(a,d.dom,g).forall(function(v){return!1===Yu(v,g,d.dom)})},function(v){return na(a,v.dom,g).isNone()})}function Yc(a){return bh(a).exists(gc)}function oa(a,d,g){var v=ut(hr(Do(it.fromDom(g.container()),d),Hr)).getOr(d);return tc(a,v.dom,g).filter(Yc)}function Ti(a,d){return bh(d).exists(gc)||oa(!0,a,d).isSome()}function bg(a,d){return H.from(d.getNode(!0)).map(it.fromDom).exists(gc)||oa(!1,a,d).isSome()}function uf(a){return kt.isTextPosition(a)&&!a.isAtStart()&&!a.isAtEnd()}function Au(a,d){return ut(hr(Do(it.fromDom(d.container()),a),Hr)).getOr(a)}function xs(a,d){return uf(d)?My(d):My(d)||Uc(Au(a,d).dom,d).exists(My)}function Dh(a,d){return uf(d)?qs(d):qs(d)||Pl(Au(a,d).dom,d).exists(qs)}function Is(a){return bh(a).bind(function(d){return Qi(d,Hi)}).exists(function(d){return Mt(["pre","pre-wrap"],ks(d,"white-space"))})}function lf(a,d){return!Is(d)&&(Ih(a,d)||ha(a,d)||bg(a,d)||xs(a,d))}function jf(a,d){return!Is(d)&&(wg(a,d)||kp(a,d)||Ti(a,d)||Dh(a,d))}function $_(a,d){return lf(a,d)||jf(a,(v=(g=d).container(),x=g.offset(),In(v)&&x<v.data.length?kt(v,x+1):g));var g,v,x}function qS(a,d){return pm(a.charAt(d))}function K_(a){var d=a.container();return In(d)&&$e(d.data,Ho)}function Gb(a){var d=it.fromDom(a.getBody());a.selection.isCollapsed()&&function(a,d){return H.some(d).filter(K_).bind(function(g){var v,x,C,A,E,z,L,U,V,Z=g.container(),ee=a,oe=(E=Z).data,re=kt(E,0);return(!qS(oe,0)||$_(ee,re)?(U=(z=Z).data,(V=xt(L=U.split(""),function(ie,ue){return pm(ie)&&0<ue&&ue<L.length-1&&as(L[ue-1])&&as(L[ue+1])?" ":ie}).join(""))!==U&&(z.data=V,1)):(E.data=" "+oe.slice(1),1))||(v=a,C=(x=Z).data,A=kt(x,C.length-1),qS(C,C.length-1)&&!$_(v,A)&&(x.data=C.slice(0,-1)+" ",1))?H.some(g):H.none()})}(d,kt.fromRangeStart(a.selection.getRng())).each(function(g){a.selection.setRng(g.toRange())})}function Bo(a,d,g){var v,x,C,A,E,z,L,U;0!==g&&(x=qa(v=it.fromDom(a),Hr).getOr(v),C=a.data.slice(d,d+g),A=d+g>=a.data.length&&jf(x,kt(a,a.data.length)),E=0===d&&lf(x,kt(a,0)),a.replaceData(d,g,(L=E,U=A,Dr(z=C,function(V,Z){return wh(Z)||pm(Z)?V.previousCharIsSpace||""===V.str&&L||V.str.length===z.length-1&&U?{previousCharIsSpace:!1,str:V.str+Ho}:{previousCharIsSpace:!0,str:V.str+" "}:{previousCharIsSpace:!1,str:V.str+Z}},{previousCharIsSpace:!1,str:""}).str)))}function wm(a,d){var g=a.data.slice(d);Bo(a,d,g.length-Wn(g).length)}function p1(a,d){var g=a.data.slice(0,d),v=g.length-Rr(g).length;Bo(a,d-v,v)}function Q_(a,d,g,v){void 0===v&&(v=!0);var x=Rr(a.data).length,C=v?a:d,A=v?d:a;return v?C.appendData(A.data):C.insertData(0,A.data),Sr(it.fromDom(A)),g&&wm(C,x),C}function Uk(a,d){return v=a,x=(g=d).container(),C=g.offset(),!1===kt.isTextPosition(g)&&x===v.parentNode&&C>kt.before(v).offset()?kt(d.container(),d.offset()-1):d;var g,v,x,C}function ew(a){return T(a.previousSibling)?H.some(In(d=a.previousSibling)?kt(d,d.data.length):kt.after(d)):a.previousSibling?rf(a.previousSibling):H.none();var d}function jb(a){return T(a.nextSibling)?H.some(In(d=a.nextSibling)?kt(d,0):kt.before(d)):a.nextSibling?Ku(a.nextSibling):H.none();var d}function xg(a,d){return ew(d).orThunk(function(){return jb(d)}).orThunk(function(){return g=a,x=kt.before((v=d).previousSibling||v.parentNode),Uc(g,x).fold(function(){return Pl(g,kt.after(v))},H.some);var g,v,x})}function XS(a,d){return jb(d).orThunk(function(){return ew(d)}).orThunk(function(){return Pl(g=a,kt.after(v=d)).fold(function(){return Uc(g,kt.before(v))},H.some);var g,v})}function tw(a,d,g){g.fold(function(){a.focus()},function(v){a.selection.setRng(v.toRange(),d)})}function ml(a,d){return d&&ao(a.schema.getBlockElements(),Oi(d))}function no(a){if(q(a)){var d=it.fromHtml('<br data-mce-bogus="1">');return pf(a),Ua(a,d),H.some(kt.before(d.dom))}return H.none()}function $v(a,d,g,v){void 0===v&&(v=!0);var x,C,A,E,z,L,U,V,Z,ee,oe,ue,de=(d?XS:xg)(a.getBody(),ue=g.dom).map(_e(Uk,ue)),he=qa(g,_e(ml,a),(x=a.getBody(),function(We){return We.dom===x})),Ie=(E=de,C=A=g,z=ao(a.schema.getTextInlineElements(),Oi(C)),ee=Ei(A).filter(ja),oe=qo(A).filter(ja),Sr(A),U=oe,V=E,Z=function(We,ve,Se){var Oe=We.dom,Je=ve.dom,ct=Oe.data.length;return Q_(Oe,Je,z),Se.container()===Je?kt(Oe,ct):Se},((L=ee).isSome()&&U.isSome()&&V.isSome()?H.some(Z(L.getOrDie(),U.getOrDie(),V.getOrDie())):H.none()).orThunk(function(){return z&&(ee.each(function(We){return p1(We.dom,We.dom.length)}),oe.each(function(We){return wm(We.dom,0)})),E}));a.dom.isEmpty(a.getBody())?(a.setContent(""),a.selection.setCursorLocation()):he.bind(no).fold(function(){v&&tw(a,d,Ie)},function(We){v&&tw(a,d,H.some(We))})}function nw(a){return xu(a,"td,th")}function rw(a,d){return{start:a,end:d}}function wp(a,d){return Na(it.fromDom(a),"td,th",d)}function _y(a){return!$t(a.start,a.end)}function v1(a,d){return mg(a.start,d).bind(function(g){return mg(a.end,d).bind(function(v){return $t(g,v)?H.some(g):H.none()})})}function Kv(a){return function(d){return v1(d,a).map(function(g){return{rng:d,table:g,cells:nw(g)}})}}function ow(a,d,g,v){if(g.collapsed||!a.forall(_y))return H.none();if(d.isSameTable){var x=a.bind(Kv(v));return H.some({start:x,end:x})}var C,A,E=wp(g.startContainer,v),z=wp(g.endContainer,v),L=E.bind((A=v,function(V){return mg(V,A).bind(function(Z){return dt(nw(Z)).map(function(ee){return rw(V,ee)})})})).bind(Kv(v)),U=z.bind((C=v,function(V){return mg(V,C).bind(function(Z){return ut(nw(Z)).map(function(ee){return rw(ee,V)})})})).bind(Kv(v));return H.some({start:L,end:U})}function YS(a,d){return Es(a,function(g){return $t(g,d)})}function Ub(a){return sa(YS(a.cells,a.rng.start),YS(a.cells,a.rng.end),function(d,g){return a.cells.slice(d,g+1)})}function qk(a,d){var g=d.startTable,v=d.endTable,x=a.cloneRange();return g.each(function(C){return x.setStartAfter(C.dom)}),v.each(function(C){return x.setEndBefore(C.dom)}),x}function ZS(a){return on(a,function(d){Rc(d,"contenteditable"),Xr(d)}),0}function Jv(a,d,g,v){var x=g.cloneRange();v?(x.setStart(g.startContainer,g.startOffset),x.setEndAfter(d.dom.lastChild)):(x.setStartBefore(d.dom.firstChild),x.setEnd(g.endContainer,g.endOffset)),Td(a,x,d,!1)}function Yk(a){var d=dm(a),g=it.fromDom(a.selection.getNode());ns(g.dom)&&q(g)?a.selection.setCursorLocation(g.dom,0):a.selection.collapse(!0),1<d.length&&tr(d,function(v){return $t(v,g)})&&Sl(g,"data-mce-selected","1")}function Zk(a,d,g){var v=a.selection.getRng();return ZS(g.bind(function(x){var A,E,z=x.rng,L=x.isStartInTable,U=H.from(a.dom.getParent(L?z.endContainer:z.startContainer,a.dom.isBlock)).map(it.fromDom);z.deleteContents(),A=a,E=L,U.filter(q).each(function(Z){E?Sr(Z):(Xr(Z),A.selection.setCursorLocation(Z.dom,0))});var V=L?d[0]:d[d.length-1];return Jv(a,V,v,L),q(V)?H.none():H.some(L?d.slice(1):d.slice(0,-1))}).getOr(d)),Yk(a),!0}function wy(a,d,g,v){var x=a.selection.getRng(),C=d[0],A=g[g.length-1];Jv(a,C,x,!0),Jv(a,A,x,!1);var E=q(C)?d:d.slice(1),z=q(A)?g:g.slice(0,-1);return ZS(E.concat(z)),v.deleteContents(),Yk(a),!0}function $S(a,d){return $v(a,!1,d),!0}function Sm(a,d){return gi(Do(d,a),gr)}function qb(a,d){return(a?Cp:iC)(d)}function Us(a,d){var g,v,x,C,A,E,z,L,U=it.fromDom(a.selection.getStart(!0)),V=dm(a);return a.selection.isCollapsed()&&0===V.length?function(a,d,g){var v=it.fromDom(a.getBody());return hw(v,g).fold(function(){return C=d,A=v,E=g,z=kt.fromRangeStart((x=a).selection.getRng()),Sm(A,E).bind(function(Z){return q(Z)?Cg(x,Z):(ee=A,oe=Z,re=z,_h(C,x.getBody(),re).bind(function(ie){return Sm(ee,it.fromDom(ie.getNode())).map(function(ue){return!1===$t(ue,oe)})}));var ee,oe,re}).getOr(!1)||(U=d,V=kt.fromRangeStart((L=a).selection.getRng()),qb(U,V)||tc(U,L.getBody(),V).exists(function(Z){return qb(U,Z)}));var x,C,A,E,z,L,U,V},function(x){return V=d,Z=v,ee=x,oe=kt.fromRangeStart((U=a).selection.getRng()),(q(ee)?Cg(U,ee):(A=Z,z=ee,L=oe,_h(E=V,(C=U).getBody(),L).bind(function(re){return de=E,he=L,Ie=re,Ku((ue=z).dom).bind(function(We){return rf(ue.dom).map(function(ve){return de?he.isEqual(We)&&Ie.isEqual(ve):he.isEqual(ve)&&Ie.isEqual(We)})}).getOr(!0)?Cg(C,z):(ie=z,hw(A,it.fromDom(re.getNode())).map(function(We){return!1===$t(We,ie)}));var ie,ue,de,he,Ie}).or(H.some(!0)))).getOr(!1);var C,A,E,z,L,U,V,Z,ee,oe})}(a,d,U):(v=U,x=V,C=it.fromDom((g=a).getBody()),A=g.selection.getRng(),0!==x.length?Zk(g,x,H.none()):(E=g,L=A,hw(z=C,v).fold(function(){return Z=E,function(a,d){var g,v,x,C,A,E,z,L,U,V,Z,ee,oe,re,ie,ue,de=(g=a,function(ve){return $t(g,ve)}),he=sa(wp((v=d).startContainer,x=de),wp(v.endContainer,x),rw),Ie=(U=de,V=We((L=d).startContainer),Z=We(L.endContainer),ee=V.isSome(),oe=Z.isSome(),{startTable:V,endTable:Z,isStartInTable:ee,isEndInTable:oe,isSameTable:re=sa(V,Z,$t).getOr(!1),isMultiTable:!re&&ee&&oe});function We(ve){return mg(it.fromDom(ve),U)}return ie=d,ue=de,he.exists(function(ve){return!_y(Se=ve)&&v1(Se,ue).exists(function(Oe){var Je=Oe.dom.rows;return 1===Je.length&&1===Je[0].cells.length})&&Rb(ve.start,ie);var Se})?he.map(function(ve){return Cc.singleCellTable(d,ve.start)}):Ie.isMultiTable?ow(he,E=Ie,z=d,de).bind(function(ve){var Oe=ve.end,Je=ve.start.bind(Ub).getOr([]),ct=Oe.bind(Ub).getOr([]);if(0<Je.length&&0<ct.length){var gt=qk(z,E);return H.some(Cc.multiTable(Je,ct,gt))}return H.none()}):ow(he,C=Ie,A=d,de).bind(function(ve){return ve.start.or(ve.end)}).bind(function(ve){var Se=C.isSameTable,Oe=Ub(ve).getOr([]);if(Se&&ve.cells.length===Oe.length)return H.some(Cc.fullTable(ve.table));if(0<Oe.length){if(Se)return H.some(Cc.partialTable(Oe,H.none()));var Je=qk(A,C);return H.some(Cc.partialTable(Oe,H.some(yn(yn({},C),{rng:Je}))))}return H.none()})}(z,L).map(function(ee){return ee.fold(_e(Td,Z),_e($S,Z),_e(Zk,Z),_e(wy,Z))});var Z},function(Z){return Cg(E,Z)}).getOr(!1)))}function Sy(a){return a.collapsed?a:(g=kt.fromRangeStart(d=a),v=kt.fromRangeEnd(d),tc(!1,x=d.commonAncestorContainer,v).map(function(C){return!Yu(g,v,x)&&Yu(g,C,x)?(A=g.container(),E=g.offset(),z=C.container(),L=C.offset(),(U=document.createRange()).setStart(A,E),U.setEnd(z,L),U):d;var A,E,z,L,U}).getOr(d));var d,g,v,x}function KS(a,d){var g=a.getParent(d,a.isBlock);return g&&"LI"===g.nodeName?g:null}function iw(a,d){var g=kt.after(a),v=Zu(d).prev(g);return v?v.toRange():null}function Jk(a,d,g){var v,x,C,A,E=a.selection,z=a.dom;/^ | $/.test(d)&&(v=z,x=E.getRng(),C=d,C=lf(A=it.fromDom(v.getRoot()),kt.fromRangeStart(x))?C.replace(/^ /,"&nbsp;"):C.replace(/^&nbsp;/," "),d=C=jf(A,kt.fromRangeEnd(x))?C.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):C.replace(/&nbsp;(<br( \/)?>)?$/," "));var L=a.parser,U=g.merge,V=Bn({validate:a.getParam("validate")},a.schema),Z='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',ee=a.fire("BeforeSetContent",{content:d,format:"html",selection:!0,paste:g.paste});if(ee.isDefaultPrevented())a.fire("SetContent",{content:ee.content,format:"html",selection:!0,paste:g.paste});else{-1===(d=ee.content).indexOf("{$caret}")&&(d+="{$caret}"),d=d.replace(/\{\$caret\}/,Z);var oe,re,ie=(oe=E.getRng()).startContainer||(oe.parentElement?oe.parentElement():null),ue=a.getBody();ie===ue&&E.isCollapsed()&&z.isBlock(ue.firstChild)&&(re=ue.firstChild)&&!a.schema.getShortEndedElements()[re.nodeName]&&z.isEmpty(ue.firstChild)&&((oe=z.createRng()).setStart(ue.firstChild,0),oe.setEnd(ue.firstChild,0),E.setRng(oe)),E.isCollapsed()||function(bn){var Jt=bn.dom,Xn=Sy(bn.selection.getRng());bn.selection.setRng(Xn);var Bt,Tn=Jt.getParent(Xn.startContainer,aC),tn=Xn;null!==(Bt=Tn)&&Bt===Jt.getParent(tn.endContainer,aC)&&Rb(it.fromDom(Bt),tn)?Td(bn,Xn,it.fromDom(Tn)):bn.getDoc().execCommand("Delete",!1,null)}(a);var de,he,Ie,We,Se,Oe,Je,ct,gt,Ge,Qe,Ye,et,Ct={context:(Dt=E.getNode()).nodeName.toLowerCase(),data:g.data,insert:!0},en=L.parse(d,Ct);if(!0===g.paste&&function(a,d){var g,v,x,C,A,E=d.firstChild,z=d.lastChild;return E&&"meta"===E.name&&(E=E.next),v=z=z&&"mce_marker"===z.attr("id")?z.prev:z,x=(g=a).getNonEmptyElements(),v&&(v.isEmpty(x)||(C=v,g.getBlockElements()[C.name]&&C.firstChild&&C.firstChild===C.lastChild&&("br"===(A=C.firstChild).name||A.value===Ho)))&&(z=z.prev),E&&E===z&&("ul"===E.name||"ol"===E.name)}(a.schema,en)&&KS(z,Dt))return oe=function(a,d,g,v){function x(Ct){var en=kt.fromRangeStart(g),sn=Zu(d.getRoot()),Tt=1===Ct?sn.prev(en):sn.next(en);return!Tt||KS(d,Tt.getNode())!==Qe}var C,A,E,z,L,U,V,Z,ee,oe,re,ie,ue,de,he,Ie,We,ve,Se,Oe,Je,ct,gt,Ge=(C=d,L=a.serialize(v),E=(A=C.createFragment(L)).firstChild,z=A.lastChild,E&&"META"===E.nodeName&&E.parentNode.removeChild(E),z&&"mce_marker"===z.id&&z.parentNode.removeChild(z),A),Qe=KS(d,g.startContainer),Ye=function(a){return 0<a.length&&(!(v=a[a.length-1]).firstChild||(d=v)&&d.firstChild&&d.firstChild===d.lastChild&&((g=d.firstChild).data===Ho||_i(g)))?a.slice(0,-1):a;var d,g,v}(hr(Ge.firstChild.childNodes,function(Ct){return"LI"===Ct.nodeName})),et=d.getRoot();return x(1)?(Se=et,gt=(ve=Qe).parentNode,At.each(Ye,function(Ct){gt.insertBefore(Ct,ve)}),Oe=Se,Je=kt.before(ve),(ct=Zu(Oe).next(Je))?ct.toRange():null):x(2)?(U=Qe,Z=et,d.insertAfter((V=Ye).reverse(),U),iw(V[0],Z)):(oe=Ye,re=et,ie=ee=Qe,de=(ue=g).cloneRange(),he=ue.cloneRange(),de.setStartBefore(ie),he.setEndAfter(ie),Ie=[de.cloneContents(),he.cloneContents()],(We=ee.parentNode).insertBefore(Ie[0],ee),At.each(oe,function(Ct){We.insertBefore(Ct,ee)}),We.insertBefore(Ie[1],ee),We.removeChild(ee),iw(oe[oe.length-1],re))}(V,z,E.getRng(),en),E.setRng(oe),void a.fire("SetContent",ee);if(function(){for(var bn=en;bn=bn.walk();)1===bn.type&&bn.attr("data-mce-fragment","1")}(),"mce_marker"===(Tt=en.lastChild).attr("id"))for(var sn=Tt,Tt=Tt.prev;Tt;Tt=Tt.walk(!0))if(3===Tt.type||!z.isBlock(Tt.name)){a.schema.isValidChild(Tt.parent.name,"span")&&Tt.parent.insert(sn,Tt,"br"===Tt.name);break}if(a._selectionOverrides.showBlockCaretContainer(Dt),Ct.invalid){a.selection.setContent(Z);var Dt=E.getNode(),xn=a.getBody();for(9===Dt.nodeType?Dt=Tt=xn:Tt=Dt;Tt!==xn;)Tt=(Dt=Tt).parentNode;d=Dt===xn?xn.innerHTML:z.getOuterHTML(Dt),d=V.serialize(L.parse(d.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return V.serialize(en)}))),Dt===xn?z.setHTML(xn,d):z.setOuterHTML(Dt,d)}else de=a,he=d=V.serialize(en),"all"===(Ie=Dt).getAttribute("data-mce-bogus")?Ie.parentNode.insertBefore(de.dom.createFragment(he),Ie):!(We=Ie.firstChild)||We===Ie.lastChild&&"BR"===We.nodeName?de.dom.setHTML(Ie,he):de.selection.setContent(he);Oe=U,gt=(Se=a).schema.getTextInlineElements(),Ge=Se.dom,Oe&&(Je=Se.getBody(),ct=Gt(Ge),At.each(Ge.select("*[data-mce-fragment]"),function(bn){if(ze(gt[bn.nodeName.toLowerCase()])&&sr(Vr(Ge,bn),function(Xn){return!fr.has(Xn)}))for(var Jt=bn.parentNode;ze(Jt)&&Jt!==Je&&!function(Xn,Bt,Tn){function tn(mo){var Ae=Xn.getStyle(Bt,mo),Ze=Xn.getStyle(Tn,mo);return mt(Ae)&&mt(Ze)&&Ae!==Ze}var An=Vr(Xn,Bt),Hn=Vr(Xn,Tn);return tr(An,function(mo){function Ae(It){return tr(It,function(zt){return zt===mo})}if(Ae(Hn)||!Ae(rC))return tn(mo);var Ze=hr(Hn,function(It){return tr(rC,function(zt){return dr(It,zt)})});return tr(Ze,tn)})}(Ge,bn,Jt);Jt=Jt.parentNode)if(ct.compare(Jt,bn)){Ge.remove(bn,!0);break}})),function(bn,Jt){var Xn,Bt=bn.dom,Tn=bn.selection;if(Jt){Tn.scrollIntoView(Jt);var tn=vm(bn.getBody(),Jt);if("false"===Bt.getContentEditable(tn))return Bt.remove(Jt),Tn.select(tn);var An,Hn=Bt.createRng(),mo=Jt.previousSibling;In(mo)?(Hn.setStart(mo,mo.nodeValue.length),wr.ie||In(An=Jt.nextSibling)&&(mo.appendData(An.data),An.parentNode.removeChild(An))):(Hn.setStartBefore(Jt),Hn.setEndBefore(Jt));var Ae=Bt.getParent(Jt,Bt.isBlock);Bt.remove(Jt),Ae&&Bt.isEmpty(Ae)&&(bn.$(Ae).empty(),Hn.setStart(Ae,0),Hn.setEnd(Ae,0),aC(Ae)||Ae.getAttribute("data-mce-fragment")||!(Xn=function(Ze){var It=kt.fromRangeStart(Ze);if(It=Zu(bn.getBody()).next(It))return It.toRange()}(Hn))?Bt.add(Ae,Bt.create("br",{"data-mce-bogus":"1"})):(Hn=Xn,Bt.remove(Ae))),Tn.setRng(Hn)}}(a,z.get("mce_marker")),Qe=a.getBody(),At.each(Qe.getElementsByTagName("*"),function(bn){bn.removeAttribute("data-mce-fragment")}),Ye=z,et=E.getStart(),H.from(Ye.getParent(et,"td,th")).map(it.fromDom).each(Ci),a.fire("SetContent",ee),a.addVisual()}}function aw(a){return a instanceof se}function sw(a,d,g){var v;a.dom.setHTML(a.getBody(),d),!0!==g&&Oa(v=a)&&Ku(v.getBody()).each(function(x){var C=x.getNode(),A=Ca(C)?Ku(C).getOr(x):x;v.selection.setRng(A.toRange())})}function Cy(a){return dn(a)?a:_r}function Ah(a,d,g){var v=d(a),x=Cy(g);return v.orThunk(function(){return x(a)?H.none():function(C){for(var A=a.dom,E=Cy(x);A.parentNode;){var z=it.fromDom(A=A.parentNode),L=C(z);if(L.isSome())return L;if(E(z))break}return H.none()}(d)})}function uw(a,d,g){var v=a.formatter.get(g);if(v)for(var x=0;x<v.length;x++){var C=v[x];if(fo(C)&&!1===C.inherit&&a.dom.is(d,C.selector))return 1}}function y1(a,d,g,v,x){var C=a.dom.getRoot();return d!==C&&(d=a.dom.getParent(d,function(A){return!!uw(a,A,g)||A.parentNode===C||!!kg(a,A,g,v,!0)}),!!kg(a,d,g,v,x))}function pr(a,d,g){return!!x1(d,g.inline)||!!x1(d,g.block)||(g.selector?1===d.nodeType&&a.is(d,g.selector):void 0)}function ky(a,d,g,v,x,C){var A=g[v];if(dn(g.onmatch))return g.onmatch(d,g,v);if(A)if(Er(A.length)){for(var E in A)if(ao(A,E)){var z="attributes"===v?a.getAttrib(d,E):hp(a,d,E),L=Gc(A[E],C),U=En(z)||lt(z);if((!U||!En(L))&&(x&&U&&!g.exact||(!x||g.exact)&&!x1(z,sy(a,L,E))))return}}else for(var V=0;V<A.length;V++)if("attributes"===v?a.getAttrib(d,A[V]):hp(a,d,A[V]))return 1;return 1}function Ur(a,d,g,v,x){if(v)return y1(a,v,d,g,x);if(v=a.selection.getNode(),y1(a,v,d,g,x))return!0;var C=a.selection.getStart();return!(C===v||!y1(a,C,d,g,x))}function lw(a){return 0<function(d){for(var g=[];d;){if(3===d.nodeType&&d.nodeValue!==Xb||1<d.childNodes.length)return[];1===d.nodeType&&g.push(d),d=d.firstChild}return g}(a).length}function QS(a){if(a){var d=new ea(a,a);for(a=d.current();a;a=d.next())if(In(a))return a}return null}function zr(a){var d=it.fromTag("span");return Rs(d,{id:_1,"data-mce-bogus":"1","data-mce-type":"format-caret"}),a&&Ua(d,it.fromText(Xb)),d}function cw(a,d,g){void 0===g&&(g=!0);var v,x,C,A,E,z,L,U,V=a.dom,Z=a.selection;lw(d)?$v(a,!1,it.fromDom(d),g):(v=Z.getRng(),x=V.getParent(d,V.isBlock),C=v.startContainer,A=v.startOffset,E=v.endContainer,z=v.endOffset,(U=QS(d))&&U.nodeValue.charAt(0)===Xb&&U.deleteData(0,1),L=U,V.remove(d,!0),C===L&&0<A&&v.setStart(L,A-1),E===L&&0<z&&v.setEnd(L,z-1),x&&V.isEmpty(x)&&Xr(it.fromDom(x)),Z.setRng(v))}function eC(a,d,g){void 0===g&&(g=!0);var v=a.dom,x=a.selection;if(d)cw(a,d,g);else if(!(d=dg(a.getBody(),x.getStart())))for(;d=v.get(_1);)cw(a,d,!1)}function Oo(a,d){return a.appendChild(d),d}function dw(a,d){var g=pe(a,function(v,x){return Oo(v,x.cloneNode(!1))},d);return Oo(g,g.ownerDocument.createTextNode(Xb))}function tM(a,d){var g=a.schema.getTextInlineElements();return ao(g,Oi(d))&&!El(d.dom)&&!jl(d.dom)}on(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],function(a){fr.add(a)});var nC,rC=["font","text-decoration","text-emphasis"],qs=_e(io,!0,wh),My=_e(io,!1,wh),oC=to(!0,zn),fw=to(!1,zn),Cm=to(!0,zu),Ty=to(!1,zu),Cp=to(!0,Ca),iC=to(!1,Ca),Qv=to(!0,Ri),_g=to(!1,Ri),Ih=_e(jr,!1),wg=_e(jr,!0),ha=_e(fa,!1),kp=_e(fa,!0),oc=_e(oa,!1),Sg=_e(oa,!0),Cc=Xl([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),pl=function(a){var d;return(8===td(d=a)||"#comment"===Oi(d)?Ei:gu)(a).bind(pl).orThunk(function(){return H.some(a)})},Td=function(a,d,g,v){void 0===v&&(v=!0),d.deleteContents();var x,C=pl(g).getOr(g),A=it.fromDom(a.dom.getParent(C.dom,a.dom.isBlock));return q(A)&&(Xr(A),v&&a.selection.setCursorLocation(A.dom,0)),$t(g,A)||on((Lu(Pu(A),g)?[]:Pu(x=A).map(pn).map(function(E){return hr(E,function(z){return!$t(x,z)})}).getOr([])).concat(pn(g)),function(E){$t(E,A)||rt(E,A)||!q(E)||Sr(E)}),!0},hw=function(a,d){return gi(Do(d,a),function(g){return Hi(g)&&"caption"===Oi(g)})},Cg=function(a,d){return Xr(d),a.selection.setCursorLocation(d.dom,0),H.some(!0)},aC=ns,b1=function(a,d){d(a),a.firstChild&&b1(a.firstChild,d),a.next&&b1(a.next,d)},x1=Iv,kg=function(a,d,g,v,x){var C=a.formatter.get(g),A=a.dom;if(C&&d)for(var E=0;E<C.length;E++){var z=C[E];if(pr(a.dom,d,z)&&ky(A,d,z,"attributes",x,v)&&ky(A,d,z,"styles",x,v)){var L=z.classes;if(L)for(var U=0;U<L.length;U++)if(!a.dom.hasClass(d,Gc(L[U],v)))return;return z}}},Xb=Io,_1="_mce_caret",w1={},gw=lo,Zc=si;function S1(a){return Mr(a)&&!xc(a)&&!El(a)&&!jl(a)}function sC(a,d){for(var g=a;g;g=g[d]){if(In(g)&&mt(g.data))return a;if(Mr(g)&&!xc(g))return g}return a}function uC(a,d,g){var v=Gt(a);if(d&&g&&(d=sC(d,"previousSibling"),g=sC(g,"nextSibling"),v.compare(d,g))){for(var x=d.nextSibling;x&&x!==g;){var C=x;x=x.nextSibling,d.appendChild(C)}return a.remove(g),At.each(At.grep(g.childNodes),function(A){d.appendChild(A)}),d}return g}function mw(a,d,g,v){var x;v&&!1!==d.merge_siblings&&(x=uC(a,lm(v),v),uC(a,x,lm(x,!0)))}function Mp(a,d){return function(g){return!(!g||!hp(a,g,d))}}function Tp(a,d,g){return function(v){var x,C;a.setStyle(v,d,g),""===v.getAttribute("style")&&v.removeAttribute("style"),x=a,"SPAN"===(C=v).nodeName&&0===x.getAttribs(C).length&&x.remove(C,!0)}}function lC(a,d,g){return a.isChildOf(d,g)&&d!==g&&!a.isBlock(g)}function Dy(a,d,g){var v,x=d[g?"startContainer":"endContainer"],C=d[g?"startOffset":"endOffset"];return Mr(x)&&(!g&&C&&C--,x=x.childNodes[(v=x.childNodes.length-1)<C?v:C]),In(x)&&g&&C>=x.nodeValue.length&&(x=new ea(x,a.getBody()).next()||x),In(x)&&!g&&0===C&&new ea(x,a.getBody()).prev()||x}function km(a,d){var g=d?"firstChild":"lastChild";if(/^(TR|TH|TD)$/.test(a.nodeName)&&a[g]){var v=a[g];return"TR"===a.nodeName&&v[g]||v}return a}function pw(a,d,g,v){var x=a.create(g,v);return d.parentNode.insertBefore(x,d),x.appendChild(d),x}function cC(a,d,g,v,x){var C=it.fromDom(d),A=it.fromDom(a.create(v,x));return _l(A,(g?es:xl)(C)),g?(Ui(C,A),od(A,C)):(gs(C,A),Ua(A,C)),A.dom}function Yb(a,d,g,v){var x=lm(d,g,v);return En(x)||"BR"===x.nodeName||a.isBlock(x)}function dC(a,d,g,v,x){var C,A,E=a.dom,z=E,L=v;if(!(da(A=d)&&t0(L,A.inline)||gl(A)&&t0(L,A.block)||fo(A)&&Mr(L)&&z.is(L,A.selector)||d.links&&"A"===v.nodeName))return e0.keep();var U,V,Z,ee,oe,re,ie,ue,de=v;if(da(d)&&"all"===d.remove&&un(d.preserve_attributes)){var he=hr(E.getAttribs(de),function(Se){return Mt(d.preserve_attributes,Se.name.toLowerCase())});if(E.removeAllAttribs(de),on(he,function(Se){return E.setAttrib(de,Se.name,Se.value)}),0<he.length)return e0.rename("span")}if("all"!==d.remove){P1(d.styles,function(Se,Oe){Se=sy(E,Gc(Se,g),Oe+""),Rn(Oe)&&(Oe=Se,x=null),!d.remove_similar&&x&&!t0(hp(E,x,Oe),Se)||E.setStyle(de,Oe,""),C=!0}),C&&""===E.getAttrib(de,"style")&&(de.removeAttribute("style"),de.removeAttribute("data-mce-style")),P1(d.attributes,function(Se,Oe){var Je;if(Se=Gc(Se,g),Rn(Oe)&&(Oe=Se,x=null),d.remove_similar||!x||t0(E.getAttrib(x,Oe),Se))if("class"===Oe&&(Se=E.getAttrib(de,Oe))&&(Je="",on(Se.split(/\s+/),function(ct){/mce\-\w+/.test(ct)&&(Je+=(Je?" ":"")+ct)}),Je))E.setAttrib(de,Oe,Je);else{if(iM.test(Oe)&&de.removeAttribute("data-mce-"+Oe),"style"===Oe&&Nu(["li"])(de)&&"none"===E.getStyle(de,"list-style-type"))return de.removeAttribute(Oe),void E.setStyle(de,"list-style-type","none");"class"===Oe&&de.removeAttribute("className"),de.removeAttribute(Oe)}}),P1(d.classes,function(Se){Se=Gc(Se,g),x&&!E.hasClass(x,Se)||E.removeClass(de,Se)});for(var Ie=E.getAttribs(de),We=0;We<Ie.length;We++){var ve=Ie[We].nodeName;if(0!==ve.indexOf("_")&&0!==ve.indexOf("data-"))return e0.keep()}}return"none"!==d.remove?(Z=d,re=(V=de).parentNode,ie=(U=a).dom,ue=Ba(U),gl(Z)&&(ue?re===ie.getRoot()&&(Z.list_block&&t0(V,Z.list_block)||on(fi(V.childNodes),function(Se){gg(U,ue,Se.nodeName.toLowerCase())?ee?ee.appendChild(Se):(ee=pw(ie,Se,ue),ie.setAttribs(ee,U.settings.forced_root_block_attrs)):ee=null})):ie.isBlock(V)&&!ie.isBlock(re)&&(Yb(ie,V,!1)||Yb(ie,V.firstChild,!0,!0)||V.insertBefore(ie.create("br"),V.firstChild),Yb(ie,V,!0)||Yb(ie,V.lastChild,!1,!0)||V.appendChild(ie.create("br")))),fo(oe=Z)&&da(oe)&&Lu(Vn(oe,"mixed"),!0)&&!t0(Z.inline,V)||ie.remove(V,!0),e0.removed()):e0.keep()}function Ay(a,d,g,v,x){return dC(a,d,g,v,x).fold(_r,function(C){return a.dom.rename(v,C),!0},ro)}function Iy(a,d,g,v,x){function C(ue){var de,he,Ie,We,ve,Se=(he=d,Ie=g,We=x,on(ku((de=a).dom,ue.parentNode).reverse(),function(Oe){var Je;ve||"_start"===Oe.id||"_end"===Oe.id||(Je=kg(de,Oe,he,Ie,We))&&!1!==Je.split&&(ve=Oe)}),ve);return function(Oe,Je,ct,gt,Ge,Qe,Ye,et){var Ct,en,sn=Oe.dom;if(ct){for(var Tt=ct.parentNode,Dt=gt.parentNode;Dt&&Dt!==Tt;Dt=Dt.parentNode){for(var xn=sn.clone(Dt,!1),bn=0;bn<Je.length&&null!==(xn=function(Jt,Xn,Bt){return dC(Jt,Xn,et,Bt,Bt).fold(Zt(Bt),function(Tn){return Jt.dom.createFragment().appendChild(Bt),Jt.dom.rename(Bt,Tn)},Zt(null))}(Oe,Je[bn],xn));bn++);xn&&(Ct&&xn.appendChild(Ct),en=en||xn,Ct=xn)}Ye.mixed&&sn.isBlock(ct)||(gt=sn.split(ct,gt)),Ct&&(Ge.parentNode.insertBefore(Ct,Ge),en.appendChild(Ge),da(Ye)&&mw(sn,Ye,0,Ct))}return gt}(a,U,Se,ue,ue,0,V,g)}function A(ue){return tr(U,function(de){return Ay(a,de,g,ue,ue)})}function E(ue){var de,he=ee.get(ue?"_start":"_end"),Ie=he[ue?"firstChild":"lastChild"];return xc(de=Ie)&&Mr(de)&&("_start"===de.id||"_end"===de.id)&&(Ie=Ie[ue?"firstChild":"lastChild"]),In(Ie)&&0===Ie.data.length&&(Ie=ue?he.previousSibling||he.nextSibling:he.nextSibling||he.previousSibling),ee.remove(he,!0),Ie}function z(ue){var de=Gs(a,ue,U,ue.collapsed);if(V.split){if(de=kd(de),(Ie=Dy(a,de,!0))!==(We=Dy(a,de))){if(Ie=km(Ie,!0),We=km(We,!1),lC(ee,Ie,We)){var he=H.from(Ie.firstChild).getOr(Ie);return C(cC(ee,he,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void E(!0)}if(lC(ee,We,Ie))return he=H.from(We.lastChild).getOr(We),C(cC(ee,he,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void E(!1);var Ie=pw(ee,Ie,"span",{id:"_start","data-mce-type":"bookmark"}),We=pw(ee,We,"span",{id:"_end","data-mce-type":"bookmark"}),ve=ee.createRng();ve.setStartAfter(Ie),ve.setEndBefore(We),_c(ee,ve,function(Se){on(Se,function(Oe){xc(Oe)||xc(Oe.parentNode)||C(Oe)})}),C(Ie),C(We),Ie=E(!0),We=E()}else Ie=We=C(Ie);de.startContainer=Ie.parentNode||Ie,de.startOffset=ee.nodeIndex(Ie),de.endContainer=We.parentNode||We,de.endOffset=ee.nodeIndex(We)+1}_c(ee,de,function(Se){on(Se,re)})}var L,U=a.formatter.get(d),V=U[0],Z=!0,ee=a.dom,oe=a.selection,re=function(ue){var de=!0,he=!1;Mr(ue)&&ee.getContentEditable(ue)&&(de=Z,Z="true"===ee.getContentEditable(ue),he=!0);var Ie,We,ve=fi(ue.childNodes);if(Z&&!he&&(Ie=A(ue),We=ue.parentNode,!Ie&&ze(We)&&Pb(V)&&A(We)),V.deep&&ve.length){for(var Se=0;Se<ve.length;Se++)re(ve[Se]);he&&(Z=de)}on(["underline","line-through","overline"],function(Oe){Mr(ue)&&a.dom.getStyle(ue,"text-decoration")===Oe&&ue.parentNode&&uy(ee,ue.parentNode)===Oe&&Ay(a,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Oe}},null,ue)})};if(v)return um(v)?((L=ee.createRng()).setStartBefore(v),L.setEndAfter(v),z(L)):z(v),void mp(a,d,v,g);if("false"!==ee.getContentEditable(oe.getNode()))oe.isCollapsed()&&da(V)&&!dm(a).length?function(a,d,g,v){var x,C,A,E,z,L,U,V,Z,ee,oe,re,ie,ue,de,he=a.dom,Ie=a.selection,We=[],ve=Ie.getRng(),Se=ve.startContainer,Je=Se;for(3===Se.nodeType&&(ve.startOffset!==Se.nodeValue.length&&(x=!0),Je=Je.parentNode);Je;){if(kg(a,Je,d,g,v)){C=Je;break}Je.nextSibling&&(x=!0),We.push(Je),Je=Je.parentNode}C&&(x?(A=Ie.getBookmark(),ve.collapse(!0),E=kd(Gs(a,ve,a.formatter.get(d),!0)),a.formatter.remove(d,g,E,v),Ie.moveToBookmark(A)):(z=dg(a.getBody(),C),Z=L=zr(!1).dom,(re=(oe=a.dom).getParent(ee=null!==z?z:C,_e(hg,a)))&&oe.isEmpty(re)?ee.parentNode.replaceChild(Z,ee):(ue=xu(ie=it.fromDom(ee),"br"),de=hr(function(){for(var ct=[],gt=ie.dom;gt;)ct.push(it.fromDom(gt)),gt=gt.lastChild;return ct}().slice(-1),gc),ue.length===de.length&&on(de,Sr),oe.isEmpty(ee)?ee.parentNode.replaceChild(Z,ee):oe.insertAfter(Z,ee)),U=function(a,d,g,v,x,C){var A,E,z=a.formatter,L=a.dom,U=hr(wn(z.get()),function(Z){return Z!==v&&!$e(Z,"removeformat")});if(0<hr((A=a,E=g,Dr(U,function(Z,ee){var oe=function(a,d){return tr(a.formatter.get(d),function(g){function v(x){return 1<x.length&&"%"===x.charAt(0)}return tr(["styles","attributes"],function(x){return Vn(g,x).exists(function(C){var A,E;return tr(un(C)?C:(A=Eo,E=[],qt(C,function(z,L){E.push(A(z,L))}),E),v)})})})}(A,ee);return A.formatter.matchNode(E,ee,{},oe)?Z.concat([ee]):Z},[])),function(Z){return re=v,ie=["inline","block","selector","attributes","styles","classes"],!tr((oe=a).formatter.get(Z),function(ue){var de=ee(ue);return tr(oe.formatter.get(re),function(he){var Ie,We=ee(he),ve=de,Se=We;return Yr(Ie=void 0===Ie?Sn:Ie).eq(ve,Se)})});function ee(ue){return Lr(ue,function(de,he){return tr(ie,function(Ie){return Ie===he})})}var oe,re,ie}).length){var V=g.cloneNode(!1);return L.add(d,V),z.remove(v,x,V,C),L.remove(V),H.some(V)}return H.none()}(a,L,C,d,g,v),V=dw(We.concat(U.toArray()),L),cw(a,z,!1),Ie.setCursorLocation(V,1),he.isEmpty(C)&&he.remove(C)))}(a,d,g,x):(fy(oe,!0,function(){hm(a,z)}),da(V)&&Ur(a,d,g,oe.getStart())&&bs(ee,oe,oe.getRng()),a.nodeChanged()),mp(a,d,v,g);else{v=oe.getNode();for(var ie=0;ie<U.length&&(!U[ie].ceFalseOverride||!Ay(a,U[ie],g,v,v));ie++);mp(a,d,v,g)}}function nM(a){return Mr(a)&&!xc(a)&&!El(a)&&!jl(a)}function C1(a){return ao(a,"vars")}function fC(a,d,g,v,x){return je(d,function(C){var A=a.formatter.matchNode(C,g,null!=x?x:{},v);return!Er(A)},function(C){return uw(a,C,g)||!v&&ze(a.formatter.matchNode(C,g,x,!0))})}function cu(a,d){var g=null!=d?d:Ap(a);return hr(ku(a.dom,g),function(v){return Mr(v)&&!jl(v)})}function hC(a,d){var g=(d||document).createDocumentFragment();return on(a,function(v){g.appendChild(v.dom)}),it.fromDom(g)}function vw(a,d,g){return{element:a,width:d,rows:g}}function gC(a,d){return{element:a,cells:d}}function k1(a,d){var g=parseInt(Ga(a,d),10);return isNaN(g)?1:g}function Dp(a){return Dr(a,function(d,g){return g.cells.length>d?g.cells.length:d},0)}function Oh(a,d){for(var g=a.rows,v=0;v<g.length;v++)for(var x=g[v].cells,C=0;C<x.length;C++)if($t(x[C],d))return H.some({x:C,y:v});return H.none()}function mC(a,d,g,v,x){for(var C=[],A=a.rows,E=g;E<=x;E++){var z=A[E].cells,L=d<v?z.slice(d,v+1):z.slice(v,d+1);C.push(gC(A[E].element,L))}return C}function T1(){return hC([])}function $b(a,d){return 0<=d&&d<a.length&&wh(a.charAt(d))}function D1(a,d){var g=Ma(a.innerText);return d?g.replace(/^[ \f\n\r\t\v]+/,""):g}function Dd(a){return Mr(a)?a.outerHTML:In(a)?Xa.encodeRaw(a.data,!1):ol(a)?"\x3c!--"+a.data+"--\x3e":""}function Oy(a){var d,g=_s((d=a.getBody(),hr(xt(fi(d.childNodes),Dd),function(x){return 0<x.length})),function(x){var C=Ke(a.serializer,x);return 0<C.length?[C]:[]}),v=g.join("");return-1!==v.indexOf("</iframe>")?{type:"fragmented",fragments:g,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:v,bookmark:null,beforeBookmark:null}}function Jb(a,d,g){var v,x,C,A,E,z,L,U,V,Z,ee,oe=g?d.beforeBookmark:d.bookmark;function re(ie,ue,de,he){for(var Ie=ie;Ie-ue<he&&Ie<de&&A[Ie]===E[Ie-ue];)++Ie;return{start:ie,end:Ie,diag:ue}}"fragmented"===d.type?(v=d.fragments,x=a.getBody(),C=xt(fi(x.childNodes),Dd),function(a,d){var g=0;on(a,function(v){var x,C,A,E,L,U,V;0===v[0]?g++:1===v[0]?(E=d,L=g,V=function(Z){var ee,oe=document.createElement("div"),re=document.createDocumentFragment();for(Z&&(oe.innerHTML=Z);ee=oe.firstChild;)re.appendChild(ee);return re}(v[1]),E.hasChildNodes()&&L<E.childNodes.length?(U=E.childNodes[L]).parentNode.insertBefore(V,U):E.appendChild(V),g++):2===v[0]&&(C=g,(x=d).hasChildNodes()&&C<x.childNodes.length&&(A=x.childNodes[C]).parentNode.removeChild(A))})}((z=(A=C).length+(E=v).length+2,L=new Array(z),U=new Array(z),V=function(ie,ue,de,he,Ie){var We=Z(ie,ue,de,he);if(null===We||We.start===ue&&We.diag===ue-he||We.end===ie&&We.diag===ie-de)for(var ve=ie,Se=de;ve<ue||Se<he;)ve<ue&&Se<he&&A[ve]===E[Se]?(Ie.push([0,A[ve]]),++ve,++Se):he-de<ue-ie?(Ie.push([2,A[ve]]),++ve):(Ie.push([1,E[Se]]),++Se);else{V(ie,We.start,de,We.start-We.diag,Ie);for(var Oe=We.start;Oe<We.end;++Oe)Ie.push([0,A[Oe]]);V(We.end,ue,We.end-We.diag,he,Ie)}},Z=function(ie,ue,de,he){var Ie=ue-ie,We=he-de;if(0==Ie||0==We)return null;var ve,Se,Oe,Je,ct,gt=Ie-We,Ge=We+Ie,Qe=(Ge%2==0?Ge:1+Ge)/2;for(L[1+Qe]=ie,U[1+Qe]=ue+1,ve=0;ve<=Qe;++ve){for(Se=-ve;Se<=ve;Se+=2){for(L[Oe=Se+Qe]=Se===-ve||Se!==ve&&L[Oe-1]<L[Oe+1]?L[Oe+1]:L[Oe-1]+1,ct=(Je=L[Oe])-ie+de-Se;Je<ue&&ct<he&&A[Je]===E[ct];)L[Oe]=++Je,++ct;if(gt%2!=0&&gt-ve<=Se&&Se<=gt+ve&&U[Oe-gt]<=L[Oe])return re(U[Oe-gt],Se+ie-de,ue,he)}for(Se=gt-ve;Se<=gt+ve;Se+=2){for(U[Oe=Se+Qe-gt]=Se===gt-ve||Se!==gt+ve&&U[Oe+1]<=U[Oe-1]?U[Oe+1]-1:U[Oe-1],ct=(Je=U[Oe]-1)-ie+de-Se;ie<=Je&&de<=ct&&A[Je]===E[ct];)U[Oe]=Je--,ct--;if(gt%2==0&&-ve<=Se&&Se<=ve&&U[Oe]<=L[Oe+gt])return re(U[Oe],Se+ie-de,ue,he)}}},V(0,A.length,0,E.length,ee=[]),ee),x)):a.setContent(d.content,{format:"raw",no_selection:!ze(oe)||!Av(oe)||!oe.isFakeCaret}),a.selection.moveToBookmark(oe)}function A1(a){return"fragmented"===a.type?a.fragments.join(""):a.content}function I1(a){var d=it.fromTag("body",cD());return ou(d,A1(a)),on(xu(d,"*[data-mce-bogus]"),Gl),d.dom.innerHTML}function Ey(a,d){return!(!a||!d)&&(v=d,A1(a)===A1(v)||(g=d,I1(a)===I1(g)));var g,v}function O1(a){return 0===a.get()}function Qb(a,d,g){O1(g)&&(a.typing=d)}function E1(a,d){a.typing&&(Qb(a,!1,d),a.add())}function ex(a){return{undoManager:{beforeChange:function(d,g){var v=a,x=g;O1(d)&&x.set(up(v.selection))},add:function(d,g,v,x,C,A){return function(E,z,L,U,V,Z,ee){var oe=Oy(E);if(Z=At.extend(Z=Z||{},oe),!1===O1(U)||E.removed)return null;var re=z.data[L.get()];if(E.fire("BeforeAddUndo",{level:Z,lastLevel:re,originalEvent:ee}).isDefaultPrevented()||re&&Ey(re,Z))return null;z.data[L.get()]&&V.get().each(function(he){z.data[L.get()].beforeBookmark=he});var ie=E.getParam("custom_undo_redo_levels",0,"number");if(ie&&z.data.length>ie){for(var ue=0;ue<z.data.length-1;ue++)z.data[ue]=z.data[ue+1];z.data.length--,L.set(z.data.length)}Z.bookmark=up(E.selection),L.get()<z.data.length-1&&(z.data.length=L.get()+1),z.data.push(Z),L.set(z.data.length-1);var de={level:Z,lastLevel:re,originalEvent:ee};return 0<L.get()?(E.setDirty(!0),E.fire("AddUndo",de),E.fire("change",de)):E.fire("AddUndo",de),Z}(a,d,g,v,x,C,A)},undo:function(d,g,v){return x=a,A=g,E=v,(C=d).typing&&(C.add(),C.typing=!1,Qb(C,!1,A)),0<E.get()&&(E.set(E.get()-1),Jb(x,z=C.data[E.get()],!0),x.setDirty(!0),x.fire("Undo",{level:z})),z;var x,C,A,E,z},redo:function(d,g){return v=a,C=g,(x=d).get()<C.length-1&&(x.set(x.get()+1),Jb(v,A=C[x.get()],!1),v.setDirty(!0),v.fire("Redo",{level:A})),A;var v,x,C,A},clear:function(d,g){var v,x=a,C=g;(v=d).data=[],C.set(0),v.typing=!1,x.fire("ClearUndos")},reset:function(d){var g;(g=d).clear(),g.add()},hasUndo:function(d,g){return v=a,x=d,0<g.get()||x.typing&&x.data[0]&&!Ey(Oy(v),x.data[0]);var v,x},hasRedo:function(d,g){return v=d,g.get()<v.data.length-1&&!v.typing;var v},transact:function(d,g,v){return C=v,E1(x=d,g),x.beforeChange(),x.ignore(C),x.add();var x,C},ignore:function(d,g){try{d.set(d.get()+1),g()}finally{d.set(d.get()-1)}},extra:function(d,g,v,x){var C,A,E=a,z=g,L=x;(C=d).transact(v)&&(A=C.data[z.get()].bookmark,Jb(E,C.data[z.get()-1],!0),C.transact(L)&&(C.data[z.get()-1].beforeBookmark=A))}},formatter:{match:function(d,g,v,x){return Ur(a,d,g,v,x)},matchAll:function(d,g){return x=d,C=g,A=[],E={},z=(v=a).selection.getStart(),v.dom.getParent(z,function(L){for(var U=0;U<x.length;U++){var V=x[U];!E[V]&&kg(v,L,V,C)&&(E[V]=!0,A.push(V))}},v.dom.getRoot()),A;var v,x,C,A,E,z},matchNode:function(d,g,v,x){return kg(a,d,g,v,x)},canApply:function(d){return function(g){var v=g.formatter.get(d),x=g.dom;if(v)for(var C=ku(x,g.selection.getStart()),A=v.length-1;0<=A;A--){var E=v[A];if(!fo(E)||ze(E.defaultBlock))return!0;for(var z=C.length-1;0<=z;z--)if(x.is(C[z],E.selector))return!0}return!1}(a)},closest:function(d){return x=d,H.from((v=a).selection.getStart(!0)).bind(function(C){return Ah(it.fromDom(C),function(A){return Pt(x,function(E){return kg(v,A.dom,z=E)?H.some(z):H.none();var z})},g)}).getOrNull();function g(C){return $t(C,it.fromDom(v.getBody()))}var v,x},apply:function(d,g,v){return n0(a,d,g,v)},remove:function(d,g,v,x){return Iy(a,d,g,v,x)},toggle:function(d,g,v){var x,C=d,A=g,E=v,z=(x=a).formatter.get(C);(!Ur(x,C,A,E)||"toggle"in z[0]&&!z[0].toggle?n0:Iy)(x,C,A,E)},formatChanged:function(d,g,v,x,C){return function(a,d,g,v,x,C){var A,E,z,L,U,V,Z,ee,oe;return null===d.get()&&(E=a,(A=d).set({}),E.on("NodeChange",function(re){Ry(E,re.element,A.get())}),E.on("FormatApply FormatRemove",function(re){var ie=H.from(re.node).map(function(ue){return um(ue)?ue:ue.startContainer}).bind(function(ue){return Mr(ue)?H.some(ue):H.from(ue.parentElement)}).getOrThunk(function(){return Ap(E)});Ry(E,ie,A.get())})),z=a,U=g,V=v,Z=x,ee=C,oe=(L=d).get(),on(U.split(","),function(re){function ie(){var he=cu(z);return fC(z,he,re,Z,ee).isSome()}var ue,de=Vn(oe,re).getOrThunk(function(){var he={withSimilar:{state:vi(!1),similar:!0,callbacks:[]},withoutSimilar:{state:vi(!1),similar:!1,callbacks:[]},withVars:[]};return oe[re]=he});Er(ee)?((ue=Z?de.withSimilar:de.withoutSimilar).callbacks.push(V),1===ue.callbacks.length&&ue.state.set(ie())):de.withVars.push({state:vi(ie()),similar:Z,vars:ee,callback:V})}),L.set(oe),{unbind:function(){var re,ie=g,ue=v,de=(re=d).get();on(ie.split(","),function(he){return Vn(de,he).each(function(Ie){de[he]={withSimilar:yn(yn({},Ie.withSimilar),{callbacks:hr(Ie.withSimilar.callbacks,function(We){return We!==ue})}),withoutSimilar:yn(yn({},Ie.withoutSimilar),{callbacks:hr(Ie.withoutSimilar.callbacks,function(We){return We!==ue})}),withVars:hr(Ie.withVars,function(We){return We.callback!==ue})}})}),re.set(de)}}}(a,d,g,v,x,C)}},editor:{getContent:function(d,g){return x=d,C=g,H.from((v=a).getBody()).fold(Zt("tree"===x.format?new se("body",11):""),function(A){return E=v,L=A,U=C,re=yn(yn({},z=x),{format:U,get:!0,getInner:!0}),ue="raw"===(ie=z.no_events?re:E.fire("BeforeGetContent",re)).format?At.trim(Yt(E.serializer,L.innerHTML)):"text"===ie.format?E.dom.isEmpty(L)?"":Ma(L.innerText||L.textContent):"tree"===ie.format?E.serializer.serialize(L,ie):(Z=(V=E).serializer.serialize(L,ie),ee=Ba(V),oe=new RegExp("^(<"+ee+"[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/"+ee+">[\r\n]*|<br \\/>[\r\n]*)$"),Z.replace(oe,"")),ie.content=Mt(["text","tree"],ie.format)||gn(it.fromDom(L))?ue:At.trim(ue),(ie.no_events?ie:E.fire("GetContent",ie)).content;var E,z,L,U,V,Z,ee,oe,re,ie,ue});var v,x,C},setContent:function(d,g){return function(a,d,g){var v,x=(v=d,yn(yn({format:"html"},g),{set:!0,content:aw(v)?"":v})),C=g.no_events?x:a.fire("BeforeSetContent",x);return aw(d)||(d=C.content),H.from(a.getBody()).fold(Zt(d),function(A){return aw(d)?function(ee,oe,re,ie){var ue,de,he,Ie;ue=ee.parser.getNodeFilters(),de=ee.parser.getAttributeFilters(),he=re,Ie=function(ve,Se){var Oe,Je,ct={},gt={},Ge=[];for(Oe in he.firstChild&&b1(he.firstChild,function(Qe){on(ve,function(Ye){Ye.name===Qe.name&&(ct[Ye.name]?ct[Ye.name].nodes.push(Qe):ct[Ye.name]={filter:Ye,nodes:[Qe]})}),on(Se,function(Ye){"string"==typeof Qe.attr(Ye.name)&&(gt[Ye.name]?gt[Ye.name].nodes.push(Qe):gt[Ye.name]={filter:Ye,nodes:[Qe]})})}),ct)ao(ct,Oe)&&Ge.push(ct[Oe]);for(Je in gt)ao(gt,Je)&&Ge.push(gt[Je]);return Ge}(ue,de),on(Ie,function(ve){on(ve.filter.callbacks,function(Se){Se(ve.nodes,ve.filter.name,{})})});var We=Bn({validate:ee.validate},ee.schema).serialize(re);return ie.content=gn(it.fromDom(oe))?We:At.trim(We),sw(ee,ie.content,ie.no_selection),ie.no_events||ee.fire("SetContent",ie),re}(a,A,d,C):(E=a,z=A,U=C,0===(L=d).length||/^\s+$/.test(L)?(V='<br data-mce-bogus="1">',"TABLE"===z.nodeName?L="<tr><td>"+V+"</td></tr>":/^(UL|OL)$/.test(z.nodeName)&&(L="<li>"+V+"</li>"),L=(Z=Ba(E))&&E.schema.isValidChild(z.nodeName.toLowerCase(),Z.toLowerCase())?(L=V,E.dom.createHTML(Z,ey(E),L)):L||'<br data-mce-bogus="1">',sw(E,L,U.no_selection),E.fire("SetContent",U)):("raw"!==U.format&&(L=Bn({validate:E.validate},E.schema).serialize(E.parser.parse(L,{isRootContent:!0,insert:!0}))),U.content=gn(it.fromDom(z))?L:At.trim(L),sw(E,U.content,U.no_selection),U.no_events||E.fire("SetContent",U)),U.content);var E,z,L,U,V,Z})}(a,d,g)},insertContent:function(d,g){return Jk(a,d,g)},addVisual:function(d){var g,v=d,x=(g=a).dom,C=ze(v)?v:g.getBody();Er(g.hasVisual)&&(g.hasVisual=g.getParam("visual",!0,"boolean")),on(x.select("table,a",C),function(A){switch(A.nodeName){case"TABLE":var E=g.getParam("visual_table_class","mce-item-table","string"),z=x.getAttrib(A,"border");z&&"0"!==z||!g.hasVisual?x.removeClass(A,E):x.addClass(A,E);break;case"A":var L,U;x.getAttrib(A,"href")||(L=x.getAttrib(A,"name")||A.id,U=g.getParam("visual_anchor_class","mce-item-anchor","string"),L&&g.hasVisual?x.addClass(A,U):x.removeClass(A,U))}}),g.fire("VisualAid",{element:v,hasVisual:g.hasVisual})}},selection:{getContent:function(d,g){return function(v,x,C){var A,E=(A=x,yn(yn({},C=void 0===C?{}:C),{format:A,get:!0,selection:!0})),z=v.fire("BeforeGetContent",E);if(z.isDefaultPrevented())return v.fire("GetContent",z),z.content;if("text"===z.format)return H.from((ie=v).selection.getRng()).map(function(de){var he=H.from(ie.dom.getParent(de.commonAncestorContainer,ie.dom.isBlock)),Ie=ie.getBody(),We=he.map(function(Ge){return Ge.nodeName}).getOr("div").toLowerCase(),ve=wr.browser.isIE()&&"pre"!==We,Se=ie.dom.add(Ie,We,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},de.cloneContents()),Oe=D1(Se,ve),Je=Ma(Se.textContent);if(ie.dom.remove(Se),$b(Je,0)||$b(Je,Je.length-1)){var ct=D1(he.getOr(Ie),ve),gt=ct.indexOf(Oe);return-1===gt?Oe:($b(ct,gt-1)?" ":"")+Oe+($b(ct,gt+Oe.length)?" ":"")}return Oe}).getOr("");z.getInner=!0;var L,U,V,Z,ee,oe,re,ie,ue=(U=z,V=(L=v).selection.getRng(),Z=L.dom.create("body"),ee=L.selection.getSel(),oe=_m(L,cm(ee)),(re=U.contextual?function(a,d){var g,v,x,C,A,E,z,L=f1(d,a);return 0<L.length?function(a,d){return il(d[0],"table",_e($t,a)).bind(function(g){var v,x,C=d[0],A=d[d.length-1],E=function(a){var d=vw(_u(a),0,[]);return on(xu(a,"tr"),function(g,v){on(xu(g,"td,th"),function(x,C){!function(A,E,z,L,U){for(var V=k1(U,"rowspan"),Z=k1(U,"colspan"),ee=A.rows,oe=z;oe<z+V;oe++){ee[oe]||(ee[oe]=gC(rp(L),[]));for(var re=E;re<E+Z;re++)ee[oe].cells[re]=oe===z&&re===E?U:_u(U)}}(d,function(A,E,z){for(;((U=A.rows)[z]?U[z].cells:[])[E];)E++;var U;return E}(d,C,v),v,g,x)})}),vw(d.element,Dp(d.rows),d.rows)}(g);return x=A,Oh(v=E,C).bind(function(z){return Oh(v,x).map(function(L){return U=v,V=z.x,ee=L.x,re=(Z=z.y)<(oe=L.y)?mC(U,V,Z,ee,oe):mC(U,V,oe,ee,Z),vw(U.element,Dp(re),re);var U,V,Z,ee,oe,re})}).map(function(z){return hC([(U=xt((L=z).rows,function(ee){var oe=xt(ee.cells,function(ie){var ue=rp(ie);return Rc(ue,"colspan"),Rc(ue,"rowspan"),ue}),re=_u(ee.element);return _l(re,oe),re}),V=_u(L.element),_l(Z=it.fromTag("tbody"),U),Ua(V,Z),V)]);var L,U,V,Z})}).getOrThunk(T1)}(a,L):(g=a,0<(v=d).length&&v[0].collapsed?T1():(x=g,A=it.fromDom((C=v[0]).cloneContents()),z=Dr(E=function(a,d){var g,v,x,C=it.fromDom(d.commonAncestorContainer),A=Do(C,a),E=hr(A,function(L){return ki(L)||$r(L)}),z=(x=d,gi(v=A,function(L){return"li"===Oi(L)&&Rb(L,x)}).fold(Zt([]),function(L){return gi(v,function(U){return"ul"===Oi(U)||"ol"===Oi(U)}).map(function(U){var V=it.fromTag(Oi(U));return function(a,d){var g=a.dom;qt(d,function(v,x){!function(C,A,E){if(!xr(E))throw console.error("Invalid call to CSS.set. Property ",A,":: Value ",E,":: Element ",C),new Error("CSS value must be a string: "+E);Vi(C)&&C.style.setProperty(A,E)}(g,x,v)})}(V,Lr(dc(U),function(Z,ee){return dr(ee,"list-style")})),[it.fromTag("li"),V]}).getOr([])}));return xt(E.concat(z.length?z:xo(g=C)?Pu(g).filter(Xo).fold(Zt([]),function(L){return[g,L]}):Xo(g)?[g]:[]),_u)}(x,C),function(U,V){return Ua(V,U),V},A),0<E.length?hC([z]):z))}(it.fromDom(L.getBody()),oe).dom:V.cloneContents())&&Z.appendChild(re),L.selection.serializer.serialize(Z,U));return"tree"===z.format?ue:(z.content=v.selection.isCollapsed()?"":ue,v.fire("GetContent",z),z.content)}(a,d,g)}},raw:{getModel:function(){return H.none()}}}}function Uf(a){return ao(a.plugins,"rtc")}function Ad(a){return a.rtcInstance||ex(a)}function ai(a){var d=a.rtcInstance;if(d)return d;throw new Error("Failed to get RTC instance not yet initialized.")}function Py(a){return 0===a.dom.length?(Sr(a),H.none()):H.some(a)}function Mm(a,d,g,v){a.bind(function(x){return(v?p1:wm)(x.dom,v?x.dom.length:0),d.filter(ja).map(function(C){var A=g,E=v,z=x.dom,L=C.dom,U=(E?z:L).length;E?(Q_(z,L,!1,!E),A.setStart(L,U)):(Q_(L,z,!1,!E),A.setEnd(L,U))})}).orThunk(function(){var x=v;return d.filter(function(C){return uo.isBookmarkNode(C.dom)}).bind(x?qo:Ei).or(d).filter(ja).map(function(C){var A,E=v;Pu(A=C).each(function(z){var L=A.dom;E&&lf(z,kt(L,0))?wm(L,0):!E&&jf(z,kt(L,L.length))&&p1(L,L.length)})})})}function qf(a,d,g){var v;a&&ao(a,d)&&(0===(v=hr(a[d],function(x){return x!==g})).length?delete a[d]:a[d]=v)}nC=function(a){var d,g=a.selection.getRng(),v=Nu(["pre"]);g.collapsed||(d=a.selection.getSelectedBlocks(),Zc(gw(gw(d,v),function(x){return v(x.previousSibling)&&-1!==tl(d,x.previousSibling)}),function(x){var C,A=x.previousSibling;Gr(C=x).remove(),Gr(A).append("<br><br>").append(C.childNodes)}))},w1.pre||(w1.pre=[]),w1.pre.push(nC);var tx=At.each,nx=function(a,d,g){tx(a.childNodes,function(v){S1(v)&&(d(v)&&g(v),v.hasChildNodes()&&nx(v,d,g))})},e0=Xl([{keep:[]},{rename:["name"]},{removed:[]}]),iM=/^(src|href|style)$/,P1=At.each,t0=Iv,Mg=At.each,R1=At.each,n0=function(a,d,g,v){function x(he,Ie){var We;dn((Ie=void 0===Ie?Z:Ie).onformat)&&Ie.onformat(he,Ie,g,v),R1(Ie.styles,function(ve,Se){oe.setStyle(he,Se,Gc(ve,g))}),!Ie.styles||(We=oe.getAttrib(he,"style"))&&oe.setAttrib(he,"data-mce-style",We),R1(Ie.attributes,function(ve,Se){oe.setAttrib(he,Se,Gc(ve,g))}),R1(Ie.classes,function(ve){ve=Gc(ve,g),oe.hasClass(he,ve)||oe.addClass(he,ve)})}function C(he,Ie){var We=!1;return R1(he,function(ve){return!!fo(ve)&&(ze(ve.collapsed)&&ve.collapsed!==ee||!oe.is(Ie,ve.selector)||El(Ie)?void 0:(x(Ie,ve),!(We=!0)))}),We}function A(he,Ie,We){var ve=[],Se=!0,Oe=Z.inline||Z.block,Je=function(ct){if(xr(ct)){var gt=oe.create(ct);return x(gt),gt}return null}(Oe);_c(he,Ie,function(ct){var gt,Ge=function(Qe){var Ye=!1,et=Se,Ct=Qe.nodeName.toLowerCase(),en=Qe.parentNode,sn=en.nodeName.toLowerCase();if(Mr(Qe)&&he.getContentEditable(Qe)&&(et=Se,Se="true"===he.getContentEditable(Qe),Ye=!0),_i(Qe)&&!function(xn,bn,Jt,Xn){if(xn.getParam("format_empty_lines",!1,"boolean")&&da(bn)){var Bt=yn(yn({},xn.schema.getTextBlockElements()),{td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}}),Tn=(tn=it.fromDom(Jt),Hn=function(Ae){return El(Ae.dom)},((mo=(An=tn).dom).parentNode?function(a,d){return gi(a.dom.childNodes,function(g){return Ae=it.fromDom(g),!$t(An,Ae)&&Hn(Ae);var Ae}).map(it.fromDom)}(it.fromDom(mo.parentNode)):H.none()).isSome());return po(Bt,Xn)&&q(it.fromDom(Jt.parentNode),!1)&&!Tn}var tn,An,Hn,mo}(a,Z,Qe,sn))return gt=null,void(gl(Z)&&he.remove(Qe));if(gl(Z)&&Z.wrapper&&kg(a,Qe,d,g))gt=null;else{if(Se&&!Ye&&gl(Z)&&!Z.wrapper&&hg(a,Ct)&&gg(a,sn,Oe)){var Tt=he.rename(Qe,Oe);return x(Tt),ve.push(Tt),void(gt=null)}if(fo(Z)){var Dt=C(V,Qe);if(!Dt&&ze(en)&&Pb(Z)&&(Dt=C(V,en)),!da(Z)||Dt)return void(gt=null)}!Se||Ye||!gg(a,Oe,Ct)||!gg(a,sn,Oe)||!We&&In(Qe)&&rs(Qe.data)||El(Qe)||da(Z)&&he.isBlock(Qe)?(gt=null,on(fi(Qe.childNodes),Ge),Ye&&(Se=et),gt=null):(gt||(gt=he.clone(Je,!1),Qe.parentNode.insertBefore(gt,Qe),ve.push(gt)),gt.appendChild(Qe))}};on(ct,Ge)}),!0===Z.links&&on(ve,function(ct){var gt=function(Ge){"A"===Ge.nodeName&&x(Ge,Z),on(fi(Ge.childNodes),gt)};gt(ct)}),on(ve,function(ct){var gt,Ge,Qe,Ye,et,en,sn,Tt,Dt,xn,bn,Jt,Xn,Bt,Tn,tn,An,Hn=(gt=0,on(ct.childNodes,function(Ae){var Ze;ze(Ze=Ae)&&In(Ze)&&0===Ze.length||xc(Ae)||gt++}),gt);function mo(Ae){var Ze;1===Ae.nodeType&&Ae.parentNode&&1===Ae.parentNode.nodeType&&(Ze=uy(Jt,Ae.parentNode),Jt.getStyle(Ae,"color")&&Ze?Jt.setStyle(Ae,"text-decoration",Ze):Jt.getStyle(Ae,"text-decoration")===Ze&&Jt.setStyle(Ae,"text-decoration",null))}!(1<ve.length)&&he.isBlock(ct)||0!==Hn?(da(Z)||gl(Z)&&Z.wrapper)&&(Z.exact||1!==Hn||(ct=gi((bn=ct).childNodes,nM).filter(function(Ae){return pr(he,Ae,Z)}).map(function(Ae){var Ze=he.clone(Ae,!1);return x(Ze),he.replace(Ze,bn,!0),he.remove(Ae,!0),Ze}).getOr(bn)),Tn=a,tn=g,An=ct,Mg(V,function(Ae){var Ze,It;da(Ae)&&Mg(Tn.dom.select(Ae.inline,An),function(Vt){S1(Vt)&&Ay(Tn,Ae,tn,Vt,Ae.exact?Vt:null)}),Ze=Tn.dom,(It=Ae).clear_child_styles&&tx(Ze.select(It.links?"*:not(a)":"*",An),function(Vt){S1(Vt)&&tx(It.styles,function(fn,nr){Ze.setStyle(Vt,nr,"")})})}),sn=Z,kg(en=a,(xn=ct).parentNode,Tt=d,Dt=g)&&Ay(en,sn,Dt,xn)||sn.merge_with_parents&&en.dom.getParent(xn.parentNode,function(Ae){if(kg(en,Ae,Tt,Dt))return Ay(en,sn,Dt,xn),!0}),(et=Z).styles&&et.styles.backgroundColor&&nx(ct,Mp(he,"fontSize"),Tp(he,"backgroundColor",Gc(et.styles.backgroundColor,g))),Jt=he,Bt=ct,(Xn=Z).styles&&(Xn.styles.color||Xn.styles.textDecoration)&&(At.walk(Bt,mo,"childNodes"),mo(Bt)),Ge=he,Ye=ct,!da(Qe=Z)||"sub"!==Qe.inline&&"sup"!==Qe.inline||(nx(Ye,Mp(Ge,"fontSize"),Tp(Ge,"fontSize","")),Ge.remove(Ge.select("sup"===Qe.inline?"sub":"sup",Ye),!0)),mw(he,Z,0,ct)):he.remove(ct,!0)})}var E,z,L,U,V=a.formatter.get(d),Z=V[0],ee=!v&&a.selection.isCollapsed(),oe=a.dom,re=a.selection;if("false"!==oe.getContentEditable(re.getNode()))Z&&(v?um(v)?C(V,v)||((E=oe.createRng()).setStartBefore(v),E.setEndAfter(v),A(oe,Gs(a,E,V),!0)):A(oe,v,!0):ee&&da(Z)&&!dm(a).length?function(he,Ie,We){var ve,Se=he.selection,Oe=Se.getRng(),Je=Oe.startOffset,ct=Oe.startContainer.nodeValue,gt=dg(he.getBody(),Se.getStart());gt&&(ve=QS(gt));var Ge,Qe,Ye,et,Ct=/[^\s\u00a0\u00ad\u200b\ufeff]/;ct&&0<Je&&Je<ct.length&&Ct.test(ct.charAt(Je))&&Ct.test(ct.charAt(Je-1))?(Ge=Se.getBookmark(),Oe.collapse(!0),Qe=kd(Gs(he,Oe,he.formatter.get(Ie))),he.formatter.apply(Ie,We,Qe),Se.moveToBookmark(Ge)):(gt&&ve.nodeValue===Xb||(Ye=he.getDoc(),et=zr(!0).dom,ve=(gt=Ye.importNode(et,!0)).firstChild,Oe.insertNode(gt),Je=1),he.formatter.apply(Ie,We,gt),Se.setCursorLocation(ve,Je))}(a,d,g):(z=re.getNode(),L=V[0],a.settings.forced_root_block||!L.defaultBlock||oe.getParent(z,oe.isBlock)||n0(a,L.defaultBlock),re.setRng(Sy(re.getRng())),fy(re,!0,function(){hm(a,function(he,Ie){var We=Ie?he:Gs(a,he,V);A(oe,We,!1)})}),bs(oe,re,re.getRng()),a.nodeChanged()),U=a,Zc(w1[d],function(he){he(U)})),wd(a,d,v,g);else{v=re.getNode();for(var ie=0,ue=V.length;ie<ue;ie++){var de=V[ie];if(de.ceFalseOverride&&fo(de)&&oe.is(v,de.selector)){x(v,de);break}}wd(a,d,v,g)}},Ap=function(a){return a.selection.getStart()},Ry=function(a,d,g){var v=cu(a,d);qt(g,function(x,C){function A(E){var z,L=fC(a,v,C,E.similar,C1(E)?E.vars:void 0),U=L.isSome();E.state.get()!==U&&(E.state.set(U),z=L.getOr(d),C1(E)?E.callback(U,{node:z,format:C,parents:v}):on(E.callbacks,function(V){return V(U,{node:z,format:C,parents:v})}))}on([x.withSimilar,x.withoutSimilar],A),on(x.withVars,A)})},cD=Nt(function(){return document.implementation.createHTMLDocument("undo")});function aM(a){return a.select}function sM(a){return a&&a.ownerDocument&&rt(it.fromDom(a.ownerDocument),it.fromDom(a))}function N1(a,d,g,v){function x(ve,Se){return function(a,d,g){var v,x=(v=d,yn(yn({format:"html"},g=void 0===g?{}:g),{set:!0,selection:!0,content:v})),C=x;if(!x.no_events){var A=a.fire("BeforeSetContent",x);if(A.isDefaultPrevented())return void a.fire("SetContent",A);C=A}C.content=function(z,L){if("raw"===L.format)return L.content;var U=z.selection.getRng(),V=z.dom.getParent(U.commonAncestorContainer,z.dom.isBlock),Z=V?{context:V.nodeName.toLowerCase()}:{},ee=z.parser.parse(L.content,yn(yn({isRootContent:!0,forced_root_block:!1},Z),L));return Bn({validate:z.validate},z.schema).serialize(ee)}(a,C);var E=a.selection.getRng();(function(z,L){var U=H.from(L.firstChild).map(it.fromDom),V=H.from(L.lastChild).map(it.fromDom);z.deleteContents(),z.insertNode(L);var Z=U.bind(Ei).filter(ja).bind(Py),ee=V.bind(qo).filter(ja).bind(Py);Mm(Z,U,z,!0),Mm(ee,V,z,!1),z.collapse(!1)})(E,E.createContextualFragment(C.content)),a.selection.setRng(E),kh(a,E),C.no_events||a.fire("SetContent",C)}(v,ve,Se)}function C(){var ve=E(),Se=null==ve?void 0:ve.anchorNode,Oe=null==ve?void 0:ve.focusNode;if(!ve||!Se||!Oe||Hd(Se)||Hd(Oe))return!0;var Je=a.createRng();Je.setStart(Se,ve.anchorOffset),Je.collapse(!0);var ct=a.createRng();return ct.setStart(Oe,ve.focusOffset),ct.collapse(!0),Je.compareBoundaryPoints(Je.START_TO_START,ct)<=0}function A(ve){var Se=re();Se.collapse(!!ve),ie(Se)}function E(){return d.getSelection?d.getSelection():d.document.selection}var z,L,U,V,Z,ee,oe=function(ve,Se){return Z||(Z={},ee={},V.on("NodeChange",function(Oe){var Je=Oe.element,ct=We(Je),gt={};At.each(Z,function(Ge,Qe){Ie(Qe,ct).each(function(Ye){ee[Qe]||(on(Ge,function(et){et(!0,{node:Ye,selector:Qe,parents:ct})}),ee[Qe]=Ge),gt[Qe]=Ge})}),At.each(ee,function(Ge,Qe){gt[Qe]||(delete ee[Qe],At.each(Ge,function(Ye){Ye(!1,{node:Je,selector:Qe,parents:ct})}))})})),Z[ve]||(Z[ve]=[]),Z[ve].push(Se),Ie(ve,We(V.selection.getStart())).each(function(){ee[ve]=Z[ve]}),{unbind:function(){qf(Z,ve,Se),qf(ee,ve,Se)}}},re=function(){function ve(Ge,Qe,Ye){try{return Qe.compareBoundaryPoints(Ge,Ye)}catch(et){return-1}}var Se,Oe,Je,ct=d.document;if(void 0!==v.bookmark&&!1===Oa(v)){var gt=yy(v);if(gt.isSome())return gt.map(function(Ge){return _m(v,[Ge])[0]}).getOr(ct.createRange())}try{(Se=E())&&!Hd(Se.anchorNode)&&(Oe=0<Se.rangeCount?Se.getRangeAt(0):(Se.createRange?Se:ct).createRange(),Oe=_m(v,[Oe])[0])}catch(Ge){}return(Oe=Oe||(ct.createRange?ct.createRange():ct.body.createTextRange())).setStart&&9===Oe.startContainer.nodeType&&Oe.collapsed&&(Je=a.getRoot(),Oe.setStart(Je,0),Oe.setEnd(Je,0)),z&&L&&(0===ve(Oe.START_TO_START,Oe,z)&&0===ve(Oe.END_TO_END,Oe,z)?Oe=L:L=z=null),Oe},ie=function(ve,Se){var Oe;if((Je=ve)&&(aM(Je)||sM(Je.startContainer)&&sM(Je.endContainer))){var Je,ct=aM(ve)?ve:null;if(ct){L=null;try{ct.select()}catch(Ge){}}else{var gt=E();if(ve=v.fire("SetSelectionRange",{range:ve,forward:Se}).range,gt){L=ve;try{gt.removeAllRanges(),gt.addRange(ve)}catch(Ge){}!1===Se&&gt.extend&&(gt.collapse(ve.endContainer,ve.endOffset),gt.extend(ve.startContainer,ve.startOffset)),z=0<gt.rangeCount?gt.getRangeAt(0):null}ve.collapsed||ve.startContainer!==ve.endContainer||!gt.setBaseAndExtent||wr.ie||ve.endOffset-ve.startOffset<2&&ve.startContainer.hasChildNodes()&&(Oe=ve.startContainer.childNodes[ve.startOffset])&&"IMG"===Oe.tagName&&(gt.setBaseAndExtent(ve.startContainer,ve.startOffset,ve.endContainer,ve.endOffset),gt.anchorNode===ve.startContainer&&gt.focusNode===ve.endContainer||gt.setBaseAndExtent(Oe,0,Oe,1)),v.fire("AfterSetSelectionRange",{range:ve,forward:Se})}}},ue={bookmarkManager:null,controlSelection:null,dom:U=a,win:d,serializer:g,editor:V=v,collapse:A,setCursorLocation:function(ve,Se){var Oe=a.createRng();ze(ve)&&ze(Se)?(Oe.setStart(ve,Se),Oe.setEnd(ve,Se),ie(Oe),A(!1)):(fm(a,Oe,v.getBody(),!0),ie(Oe))},getContent:function(ve){return Oe=(Se=void 0===(Se=ve)?{}:Se).format||"html",Je=Se,ai(v).selection.getContent(Oe,Je);var Se,Oe,Je},setContent:x,getBookmark:function(ve,Se){return de.getBookmark(ve,Se)},moveToBookmark:function(ve){return de.moveToBookmark(ve)},select:function(ve,Se){var Oe=a,Je=Se;return H.from(ve).map(function(ct){var gt=Oe.nodeIndex(ct),Ge=Oe.createRng();return Ge.setStart(ct.parentNode,gt),Ge.setEnd(ct.parentNode,gt+1),Je&&(fm(Oe,Ge,ct,!0),fm(Oe,Ge,ct,!1)),Ge}).each(ie),ve},isCollapsed:function(){var ve=re(),Se=E();return!(!ve||ve.item)&&(ve.compareEndPoints?0===ve.compareEndPoints("StartToEnd",ve):!Se||ve.collapsed)},isForward:C,setNode:function(ve){return x(a.getOuterHTML(ve)),ve},getNode:function(){return function(ve,Se){if(!Se)return ve;var Oe=Se.startContainer,Je=Se.endContainer,ct=Se.startOffset,gt=Se.endOffset,Ge=Se.commonAncestorContainer;return!Se.collapsed&&(Oe===Je&&gt-ct<2&&Oe.hasChildNodes()&&(Ge=Oe.childNodes[ct]),3===Oe.nodeType&&3===Je.nodeType&&(Oe=Oe.length===ct?xm(Oe.nextSibling,!0):Oe.parentNode,Je=0===gt?xm(Je.previousSibling,!1):Je.parentNode,Oe&&Oe===Je))?Oe:Ge&&3===Ge.nodeType?Ge.parentNode:Ge}(v.getBody(),re())},getSel:E,setRng:ie,getRng:re,getStart:function(ve){return lu(v.getBody(),re(),ve)},getEnd:function(ve){return _p(v.getBody(),re(),ve)},getSelectedBlocks:function(ve,Se){return function(Oe,Je,ct,gt){var Ge=[],Qe=Oe.getRoot();if(ct=Oe.getParent(ct||lu(Qe,Je,Je.collapsed),Oe.isBlock),gt=Oe.getParent(gt||_p(Qe,Je,Je.collapsed),Oe.isBlock),ct&&ct!==Qe&&Ge.push(ct),ct&&gt&&ct!==gt)for(var Ye,et=new ea(ct,Qe);(Ye=et.next())&&Ye!==gt;)Oe.isBlock(Ye)&&Ge.push(Ye);return gt&&ct!==gt&&gt!==Qe&&Ge.push(gt),Ge}(a,re(),ve,Se)},normalize:function(){var ve=re();if(1<cm(E()).length||!Sh(v))return ve;var Se=Cd(a,ve);return Se.each(function(Oe){ie(Oe,C())}),Se.getOr(ve)},selectorChanged:function(ve,Se){return oe(ve,Se),ue},selectorChangedWithUnbind:oe,getScrollContainer:function(){for(var ve,Se=a.getRoot();Se&&"BODY"!==Se.nodeName;){if(Se.scrollHeight>Se.clientHeight){ve=Se;break}Se=Se.parentNode}return ve},scrollIntoView:function(ve,Se){ze(ve)?(v.inline?af:Uv)(v,ve,Se):kh(v,re(),Se)},placeCaretAt:function(ve,Se){return ie(Vv(ve,Se,v.getDoc()))},getBoundingClientRect:function(){var ve=re();return ve.collapsed?kt.fromRangeStart(ve).getClientRects()[0]:ve.getBoundingClientRect()},destroy:function(){d=z=L=null,he.destroy()}},de=uo(ue),he=Bb(ue,v);function Ie(ve,Se){return gi(Se,function(Oe){return U.is(Oe,ve)})}function We(ve){return U.getParents(ve,null,U.getRoot())}return ue.bookmarkManager=de,ue.controlSelection=he,ue}function Ny(a){var d,g=decodeURIComponent(a).split(","),v=/data:([^;]+)/.exec(g[0]);return{type:d=v?v[1]:d,data:g[1]}}function yC(a,d){var g;try{g=atob(d)}catch(C){return H.none()}for(var v=new Uint8Array(g.length),x=0;x<v.length;x++)v[x]=g.charCodeAt(x);return H.some(new Blob([v],{type:a}))}function df(a){return 0===a.indexOf("blob:")?(d=a,new qe(function(v,x){function C(){x("Cannot convert "+d+" to Blob. Resource might not exist or is inaccessible.")}try{var A=new XMLHttpRequest;A.open("GET",d,!0),A.responseType="blob",A.onload=function(){200===A.status?v(A.response):C()},A.onerror=C,A.send()}catch(E){C()}})):0===a.indexOf("data:")?(g=a,new qe(function(v){var x=Ny(g);yC(x.type,x.data).fold(function(){return v(new Blob([]))},v)})):null;var d,g}function r0(a){return(a||"blobid")+sx++}function o0(a,d,g,v){(a.padd_empty_with_br||d.insert)&&g[v.name]?v.empty().append(new se("br",1)).shortEnded=!0:v.empty().append(new se("#text",3)).value=Ho}function rx(a,d,g,v){return v.isEmpty(d,g,function(x){return(C=a.getElementRule(x.name))&&C.paddEmpty;var C})}function B1(a,d){void 0===d&&(d=Xe());var g={},v=[],x={},C={};function A(z){var L=z.name;L in g&&((V=x[L])?V.push(z):x[L]=[z]);for(var U=v.length;U--;){var V,Z=v[U].name;Z in z.attributes.map&&((V=C[Z])?V.push(z):C[Z]=[z])}return z}(a=a||{}).validate=!("validate"in a)||a.validate,a.root_name=a.root_name||"body";var E={schema:d,addAttributeFilter:function(z,L){us(By(z),function(U){for(var V=0;V<v.length;V++)if(v[V].name===U)return void v[V].callbacks.push(L);v.push({name:U,callbacks:[L]})})},getAttributeFilters:function(){return[].concat(v)},addNodeFilter:function(z,L){us(By(z),function(U){var V=g[U];V||(g[U]=V=[]),V.push(L)})},getNodeFilters:function(){var z,L=[];for(z in g)ao(g,z)&&L.push({name:z,callbacks:g[z]});return L},filterNode:A,parse:function(z,L){var U,V,Z,ee,oe,re,ie,ue,de=[];function he(Tt){for(var Dt=d.getBlockElements(),xn=Tt.prev;xn&&3===xn.type;){var bn=xn.value.replace(Qe,"");if(0<bn.length)return xn.value=bn,0;var Jt=xn.next;if(Jt){if(3===Jt.type&&Jt.value.length){xn=xn.prev;continue}if(!Dt[Jt.name]&&"script"!==Jt.name&&"style"!==Jt.name){xn=xn.prev;continue}}var Xn=xn.prev;xn.remove(),xn=Xn}}function Ie(Tt,Dt){var xn,bn=new se(Tt,Dt);return Tt in g&&((xn=x[Tt])?xn.push(bn):x[Tt]=[bn]),bn}L=L||{},x={},C={};var We=Ip(F1("script,style,head,html,body,title,meta,param"),d.getBlockElements()),ve=d.getNonEmptyElements(),Se=d.children,Oe=a.validate,Je=("forced_root_block"in L?L:a).forced_root_block,ct=!1===Je?"":!0===Je?"p":Je,gt=d.getWhiteSpaceElements(),Ge=/^[ \t\r\n]+/,Qe=/[ \t\r\n]+$/,Ye=/[ \t\r\n]+/g,et=/^[ \t\r\n]+$/,Ct=ao(gt,L.context)||ao(gt,a.root_name),en=Ue({validate:Oe,document:a.document,allow_html_data_urls:a.allow_html_data_urls,allow_svg_data_urls:a.allow_svg_data_urls,allow_script_urls:a.allow_script_urls,allow_conditional_comments:a.allow_conditional_comments,preserve_cdata:a.preserve_cdata,self_closing_elements:function(Tt){var Dt,xn={};for(Dt in Tt)"li"!==Dt&&"p"!==Dt&&(xn[Dt]=Tt[Dt]);return xn}(d.getSelfClosingElements()),cdata:function(Tt){ue.append(Ie("#cdata",4)).value=Tt},text:function(Tt,Dt){var xn,bn;Ct||(Tt=Tt.replace(Ye," "),(bn=ue.lastChild)&&(ao(We,bn.name)||"br"===bn.name)&&(Tt=Tt.replace(Ge,""))),0!==Tt.length&&((xn=Ie("#text",3)).raw=!!Dt,ue.append(xn).value=Tt)},comment:function(Tt){ue.append(Ie("#comment",8)).value=Tt},pi:function(Tt,Dt){ue.append(Ie(Tt,7)).value=Dt,he(ue)},doctype:function(Tt){ue.append(Ie("#doctype",10)).value=Tt,he(ue)},start:function(Tt,Dt,xn){var bn=Oe?d.getElementRule(Tt):{};if(bn){var Jt=Ie(bn.outputName||Tt,1);Jt.attributes=Dt,Jt.shortEnded=xn,ue.append(Jt);var Xn=Se[ue.name];Xn&&Se[Jt.name]&&!Xn[Jt.name]&&de.push(Jt);for(var Bt=v.length;Bt--;){var Tn=v[Bt].name;Tn in Dt.map&&((re=C[Tn])?re.push(Jt):C[Tn]=[Jt])}We[Tt]&&he(Jt),xn||(ue=Jt),!Ct&&gt[Tt]&&(Ct=!0)}},end:function(Tt){var Dt,xn,bn,Jt,Xn,Bt=Oe?d.getElementRule(Tt):{};if(Bt){if(We[Tt]&&!Ct){if((Dt=ue.firstChild)&&3===Dt.type)if(0<(xn=Dt.value.replace(Ge,"")).length)Dt.value=xn,Dt=Dt.next;else for(bn=Dt.next,Dt.remove(),Dt=bn;Dt&&3===Dt.type;)bn=Dt.next,0!==(xn=Dt.value).length&&!et.test(xn)||(Dt.remove(),Dt=bn),Dt=bn;if((Dt=ue.lastChild)&&3===Dt.type)if(0<(xn=Dt.value.replace(Qe,"")).length)Dt.value=xn,Dt=Dt.prev;else for(bn=Dt.prev,Dt.remove(),Dt=bn;Dt&&3===Dt.type;)bn=Dt.prev,0!==(xn=Dt.value).length&&!et.test(xn)||(Dt.remove(),Dt=bn),Dt=bn}if(Ct&&gt[Tt]&&(Ct=!1),Bt.removeEmpty&&rx(d,ve,gt,ue))return Jt=ue.parent,We[ue.name]?ue.empty().remove():ue.unwrap(),void(ue=Jt);Bt.paddEmpty&&(Ly(Xn=ue,"#text")&&Xn.firstChild.value===Ho||rx(d,ve,gt,ue))&&o0(a,L,We,ue),ue=ue.parent}}},d),sn=ue=new se(L.context||a.root_name,11);if(en.parse(z,L.format),Oe&&de.length&&(L.context?L.invalid=!0:function(Tt){for(var Dt=F1("tr,td,th,tbody,thead,tfoot,table"),xn=d.getNonEmptyElements(),bn=d.getWhiteSpaceElements(),Jt=d.getTextBlockElements(),Xn=d.getSpecialElements(),Bt=function(nr,Ir){if(void 0===Ir&&(Ir=nr.parent),Xn[nr.name])nr.empty().remove();else{for(var bi=0,di=nr.children();bi<di.length;bi++){var ir=di[bi];d.isValidChild(Ir.name,ir.name)||Bt(ir,Ir)}nr.unwrap()}},Tn=0;Tn<Tt.length;Tn++){var tn,An=Tt[Tn],Hn=void 0,mo=void 0;if(An.parent&&!An.fixed)if(Jt[An.name]&&"li"===An.parent.name){for(var Ae=An.next;Ae&&Jt[Ae.name];)Ae.name="li",Ae.fixed=!0,An.parent.insert(Ae,An.parent),Ae=Ae.next;An.unwrap()}else{var Ze=[An];for(Hn=An.parent;Hn&&!d.isValidChild(Hn.name,An.name)&&!Dt[Hn.name];Hn=Hn.parent)Ze.push(Hn);if(Hn&&1<Ze.length)if(d.isValidChild(Hn.name,An.name)){Ze.reverse();for(var It=tn=A(Ze[0].clone()),zt=0;zt<Ze.length-1;zt++){d.isValidChild(It.name,Ze[zt].name)?(mo=A(Ze[zt].clone()),It.append(mo)):mo=It;for(var Vt=Ze[zt].firstChild;Vt&&Vt!==Ze[zt+1];){var fn=Vt.next;mo.append(Vt),Vt=fn}It=mo}rx(d,xn,bn,tn)?Hn.insert(An,Ze[0],!0):(Hn.insert(tn,Ze[0],!0),Hn.insert(An,tn)),(rx(d,xn,bn,Hn=Ze[0])||Ly(Hn,"br"))&&Hn.empty().remove()}else Bt(An);else An.parent&&("li"!==An.name?d.isValidChild(An.parent.name,"div")&&d.isValidChild("div",An.name)?An.wrap(A(new se("div",1))):Bt(An):!(Ae=An.prev)||"ul"!==Ae.name&&"ol"!==Ae.name?!(Ae=An.next)||"ul"!==Ae.name&&"ol"!==Ae.name?An.wrap(A(new se("ul",1))):Ae.insert(An,Ae.firstChild,!0):Ae.append(An))}}}(de)),ct&&("body"===sn.name||L.isRootContent)&&function(){function Tt(Jt){Jt&&((Dt=Jt.firstChild)&&3===Dt.type&&(Dt.value=Dt.value.replace(Ge,"")),(Dt=Jt.lastChild)&&3===Dt.type&&(Dt.value=Dt.value.replace(Qe,"")))}var Dt=sn.firstChild,xn=null;if(d.isValidChild(sn.name,ct.toLowerCase())){for(;Dt;){var bn=Dt.next;3===Dt.type||1===Dt.type&&"p"!==Dt.name&&!We[Dt.name]&&!Dt.attr("data-mce-type")?(xn||((xn=Ie(ct,1)).attr(a.forced_root_block_attrs),sn.insert(xn,Dt)),xn.append(Dt)):(Tt(xn),xn=null),Dt=bn}Tt(xn)}}(),!L.invalid){for(ie in x)if(ao(x,ie)){for(re=g[ie],ee=(U=x[ie]).length;ee--;)U[ee].parent||U.splice(ee,1);for(V=0,Z=re.length;V<Z;V++)re[V](U,ie,L)}for(V=0,Z=v.length;V<Z;V++)if((re=v[V]).name in C){for(ee=(U=C[re.name]).length;ee--;)U[ee].parent||U.splice(ee,1);for(ee=0,oe=re.callbacks.length;ee<oe;ee++)re.callbacks[ee](U,re.name,L)}}return sn}};return function(a,d){var v,x,C=a.schema;function A(E){var z,L,U=E.attr("src");(z=E).attr("src")===wr.transparentSrc||ze(z.attr("data-mce-placeholder"))||ze(E.attr("data-mce-bogus"))||((L=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(U))?H.some({type:L[1],data:decodeURIComponent(L[2])}):H.none()).filter(function(){return function(V,Z){if(Z.images_dataimg_filter){var ee=new Image;return ee.src=V.attr("src"),qt(V.attributes.map,function(oe,re){ee.setAttribute(re,oe)}),Z.images_dataimg_filter(ee)}return!0}(E,v)}).bind(function(V){var Z=V.type,ee=V.data;return H.from(x.getByData(ee,Z)).orThunk(function(){return yC(Z,ee).map(function(oe){var re=x.create(r0(),oe,ee);return x.add(re),re})})}).each(function(V){E.attr("src",V.blobUri())})}d.remove_trailing_brs&&a.addNodeFilter("br",function(E,z,L){var U,V,Z,ee,oe,re,ie,ue,de=E.length,he=At.extend({},C.getBlockElements()),Ie=C.getNonEmptyElements(),We=C.getWhiteSpaceElements();for(he.body=1,U=0;U<de;U++)if(Z=(V=E[U]).parent,he[V.parent.name]&&V===Z.lastChild){for(oe=V.prev;oe;){if("span"!==(re=oe.name)||"bookmark"!==oe.attr("data-mce-type")){"br"===re&&(V=null);break}oe=oe.prev}V&&(V.remove(),rx(C,Ie,We,Z)&&(ie=C.getElementRule(Z.name))&&(ie.removeEmpty?Z.remove():ie.paddEmpty&&o0(d,L,he,Z)))}else{for(ee=V;Z&&Z.firstChild===ee&&Z.lastChild===ee&&!he[(ee=Z).name];)Z=Z.parent;ee===Z&&!0!==d.padd_empty_with_br&&((ue=new se("#text",3)).value=Ho,V.replace(ue))}}),a.addAttributeFilter("href",function(E){var z,L,U=E.length;if(!d.allow_unsafe_link_target)for(;U--;){var V=E[U];"a"===V.name&&"_blank"===V.attr("target")&&V.attr("rel",(L=void 0,L=(z=V.attr("rel"))?At.trim(z):"",/\b(noopener)\b/g.test(L)?L:L.split(" ").filter(function(Z){return 0<Z.length}).concat(["noopener"]).sort().join(" ")))}}),d.allow_html_in_named_anchor||a.addAttributeFilter("id,name",function(E){for(var z,L,U,V,Z=E.length;Z--;)if("a"===(V=E[Z]).name&&V.firstChild&&!V.attr("href"))for(U=V.parent,z=V.lastChild;L=z.prev,U.insert(z,V),z=L;);}),d.fix_list_elements&&a.addNodeFilter("ul,ol",function(E){for(var z,L,U,V=E.length;V--;)"ul"!==(U=(L=E[V]).parent).name&&"ol"!==U.name||(L.prev&&"li"===L.prev.name?L.prev.append(L):((z=new se("li",1)).attr("style","list-style-type: none"),L.wrap(z)))}),d.validate&&C.getValidClasses()&&a.addAttributeFilter("class",function(E){for(var z=C.getValidClasses(),L=E.length;L--;){for(var U=E[L],V=U.attr("class").split(" "),Z="",ee=0;ee<V.length;ee++){var oe=V[ee],re=!1,ie=z["*"];ie&&ie[oe]&&(re=!0),ie=z[U.name],(re=!(re||!ie||!ie[oe])||re)&&(Z&&(Z+=" "),Z+=oe)}Z.length||(Z=null),U.attr("class",Z)}}),(x=(v=d).blob_cache)&&a.addAttributeFilter("src",function(E){return on(E,A)})}(E,a),a.inline_styles&&function(a,d){var g,v,x,C,A=an();d.convert_fonts_to_spans&&(v=a,x=A,C=At.explode(d.font_size_legacy_values),v.addNodeFilter("font",function(E){on(E,function(z){var L,U=x.parse(z.attr("style")),V=z.attr("color"),Z=z.attr("face"),ee=z.attr("size");V&&(U.color=V),Z&&(U["font-family"]=Z),ee&&(U["font-size"]=C[parseInt(z.attr("size"),10)-1]),z.name="span",z.attr("style",x.serialize(U)),L=z,on(["color","face","size"],function(oe){L.attr(oe,null)})})})),g=A,a.addNodeFilter("strike",function(E){on(E,function(z){var L=g.parse(z.attr("style"));L["text-decoration"]="line-through",z.name="span",z.attr("style",g.serialize(L))})})}(E,a),E}function ox(a,d,g){-1===At.inArray(d,g)&&(a.addAttributeFilter(g,function(v,x){for(var C=v.length;C--;)v[C].attr(x,null)}),d.push(g))}function yw(a,d){var g=function(a,d){var g=["data-mce-selected"],v=d&&d.dom?d.dom:ci.DOM,x=d&&d.schema?d.schema:Xe(a);a.entity_encoding=a.entity_encoding||"named",a.remove_trailing_brs=!("remove_trailing_brs"in a)||a.remove_trailing_brs;var C,A=B1(a,x),E=a,z=v;return(C=A).addAttributeFilter("data-mce-tabindex",function(L,U){for(var V=L.length;V--;){var Z=L[V];Z.attr("tabindex",Z.attr("data-mce-tabindex")),Z.attr(U,null)}}),C.addAttributeFilter("src,href,style",function(L,U){for(var V="data-mce-"+U,Z=E.url_converter,ee=E.url_converter_scope,oe=L.length;oe--;){var re=L[oe],ie=re.attr(V);void 0!==ie?(re.attr(U,0<ie.length?ie:null),re.attr(V,null)):(ie=re.attr(U),"style"===U?ie=z.serializeStyle(z.parseStyle(ie),re.name):Z&&(ie=Z.call(ee,ie,U,re.name)),re.attr(U,0<ie.length?ie:null))}}),C.addAttributeFilter("class",function(L){for(var U=L.length;U--;){var V,Z=L[U];Z.attr("class")&&(V=Z.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),Z.attr("class",0<V.length?V:null))}}),C.addAttributeFilter("data-mce-type",function(L,U,V){for(var Z=L.length;Z--;){var ee=L[Z];"bookmark"!==ee.attr("data-mce-type")||V.cleanup||(H.from(ee.firstChild).exists(function(oe){return!rs(oe.value)})?ee.unwrap():ee.remove())}}),C.addNodeFilter("noscript",function(L){for(var U=L.length;U--;){var V=L[U].firstChild;V&&(V.value=Xa.decode(V.value))}}),C.addNodeFilter("script,style",function(L,U){for(var V=function(ie){return ie.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")},Z=L.length;Z--;){var ee,oe=L[Z],re=oe.firstChild?oe.firstChild.value:"";"script"===U?((ee=oe.attr("type"))&&oe.attr("type","mce-no/type"===ee?null:ee.replace(/^mce\-/,"")),"xhtml"===E.element_format&&0<re.length&&(oe.firstChild.value="// <![CDATA[\n"+V(re)+"\n// ]]>")):"xhtml"===E.element_format&&0<re.length&&(oe.firstChild.value="\x3c!--\n"+V(re)+"\n--\x3e")}}),C.addNodeFilter("#comment",function(L){for(var U=L.length;U--;){var V=L[U];E.preserve_cdata&&0===V.value.indexOf("[CDATA[")?(V.name="#cdata",V.type=4,V.value=z.decode(V.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===V.value.indexOf("mce:protected ")&&(V.name="#text",V.type=3,V.raw=!0,V.value=unescape(V.value).substr(14))}}),C.addNodeFilter("xml:namespace,input",function(L,U){for(var V=L.length;V--;){var Z=L[V];7===Z.type?Z.remove():1===Z.type&&("input"!==U||Z.attr("type")||Z.attr("type","text"))}}),C.addAttributeFilter("data-mce-type",function(L){on(L,function(U){"format-caret"===U.attr("data-mce-type")&&(U.isEmpty(C.schema.getNonEmptyElements())?U.remove():U.unwrap())})}),C.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(L,U){for(var V=L.length;V--;)L[V].attr(U,null)}),{schema:x,addNodeFilter:A.addNodeFilter,addAttributeFilter:A.addAttributeFilter,serialize:function(L,U){var V,Z,ee,oe,re,ie,ue,de,he,Ie,We,ve,Se,Oe,Je,ct,gt,Ge,Qe,Ye,et,Ct,en,sn,Tt,Dt,xn,bn,Jt,Xn=yn({format:"html"},U=void 0===U?{}:U),Bt=(ve=L,en=Se=Xn,V=(We=d)&&We.hasEventListeners("PreProcess")&&!en.no_events?(Je=Se,Ye=(Oe=We).dom,et=ve.cloneNode(!0),(Ct=document.implementation).createHTMLDocument&&(gt=Ct.createHTMLDocument(""),At.each("BODY"===et.nodeName?et.childNodes:[et],function(An){gt.body.appendChild(gt.importNode(An,!0))}),et="BODY"!==et.nodeName?gt.body.firstChild:gt.body,ct=Ye.doc,Ye.doc=gt),Ge=Oe,Qe=yn(yn({},Je),{node:et}),Ge.fire("PreProcess",Qe),ct&&(Ye.doc=ct),et):ve,ee=Ma((Z=Xn).getInner?V.innerHTML:v.getOuterHTML(V)),Z.selection||gn(it.fromDom(V))?ee:At.trim(ee)),Tn=(oe=A,re=Bt,ue=(ie=Xn).selection?yn({forced_root_block:!1},ie):ie,!tn(Ie=(de=oe.parse(re,ue)).lastChild)||tn(he=Ie.prev)&&(Ie.remove(),he.remove()),de);function tn(An){return An&&"br"===An.name}return"tree"===Xn.format?Tn:(sn=d,Tt=Xn,Dt=Tn,Jt=Bn(a,x).serialize(Dt),Tt.no_events||!sn?Jt:(xn=sn,bn=yn(yn({},Tt),{content:Jt}),xn.fire("PostProcess",bn).content))},addRules:x.addValidElements,setRules:x.setValidElements,addTempAttr:_e(ox,A,g),getTempAttrs:Zt(g),getNodeFilters:A.getNodeFilters,getAttributeFilters:A.getAttributeFilters}}(a,d);return{schema:g.schema,addNodeFilter:g.addNodeFilter,addAttributeFilter:g.addAttributeFilter,serialize:g.serialize,addRules:g.addRules,setRules:g.setRules,addTempAttr:g.addTempAttr,getTempAttrs:g.getTempAttrs,getNodeFilters:g.getNodeFilters,getAttributeFilters:g.getAttributeFilters}}function i0(a,d,g){return v=g=void 0===g?{}:g,Ad(a).editor.setContent(d,v);var v}function a0(a){return H.from(a).each(function(d){return d.destroy()})}function ix(a){var d=un(a)?a.join(" "):a;return hr(xt(xr(d)?d.split(" "):[],Qa),function(g){return 0<g.length})}function ic(a,d){return ao(a.sections(),d)}function Xf(a,d){return Vn(a,"toolbar_mode").orThunk(function(){return Vn(a,"toolbar_drawer").map(function(g){return!1===g?"wrap":g})}).getOr(d)}function Eh(a,d,g){return H.from(d.settings[g]).filter(a)}function bw(a,d){return d.dom[a]}function ff(a,d){return parseInt(ks(d,a),10)}function xw(a,d,g){var v,x,C,A,E,z,L=it.fromDom(a.getBody()),U=a.inline?L:it.fromDom($s(L).dom.documentElement),V=(v=a.inline,C=d,A=g,E=(x=U).dom.getBoundingClientRect(),{x:C-(v?E.left+x.dom.clientLeft+xC(x):0),y:A-(v?E.top+x.dom.clientTop+mM(x):0)}),Z=V.x,ee=V.y,oe=bC(z=U),re=gM(z);return 0<=Z&&0<=ee&&Z<=oe&&ee<=re}function ax(a){function d(){var L=a.theme;return L&&L.getNotificationManagerImpl?L.getNotificationManagerImpl():{open:U,close:U,reposition:U,getArgs:U};function U(){throw new Error("Theme did not provide a NotificationManager implementation.")}}function g(){return H.from(E[0])}function v(){0<E.length&&d().reposition(E)}function x(L){Es(E,function(U){return U===L}).each(function(U){E.splice(U,1)})}function C(L,U){if(void 0===U&&(U=!0),!a.removed&&(Z=(V=a).inline?V.getBody():V.getContentAreaContainer(),H.from(Z).map(it.fromDom).map(ad).getOr(!1)))return U&&a.fire("BeforeOpenNotification",{notification:L}),gi(E,function(ee){return!((oe=d().getArgs(ee)).type!==L.type||oe.text!==L.text||oe.progressBar||oe.timeout||L.progressBar||L.timeout);var oe}).getOrThunk(function(){a.editorManager.setActive(a);var ee=d().open(L,function(){x(ee),v(),g().fold(function(){return a.focus()},function(oe){return it.fromDom(oe.getEl()).dom.focus()})});return E.push(ee),v(),a.fire("OpenNotification",{notification:yn({},ee)}),ee});var V,Z}var A,E=[],z=Zt(E);return(A=a).on("SkinLoaded",function(){var L=A.getParam("service_message");L&&C({text:L,type:"warning",timeout:0},!1),v()}),A.on("show ResizeEditor ResizeWindow NodeChange",function(){Di.requestAnimationFrame(v)}),A.on("remove",function(){on(E.slice(),function(L){d().close(L)})}),{open:C,close:function(){g().each(function(L){d().close(L),x(L),v()})},getNotifications:z}}var _w,Tm,sx=0,Ly=function(a,d){return a&&a.firstChild&&a.firstChild===a.lastChild&&a.firstChild.name===d},F1=At.makeMap,us=At.each,By=At.explode,Ip=At.extend,vl=ci.DOM,s0=(_w=function(a,d){return Fn(a)&&Fn(d)?s0(a,d):d},function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];if(0===a.length)throw new Error("Can't merge zero objects");for(var g={},v=0;v<a.length;v++){var x,C=a[v];for(x in C)ao(C,x)&&(g[x]=_w(g[x],C[x]))}return g}),zy="autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),ww="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Sw="imagetools,toc".split(","),V1=$i().deviceType,dM=V1.isTouch(),fM=V1.isPhone(),hM=V1.isTablet(),Cw=["lists","autolink","autosave"],Fy={table_grid:!1,object_resizing:!1,resize:!1},ux=(Tm={},{add:function(a,d){Tm[a]=d},get:function(a){return Tm[a]||{icons:{}}},has:function(a){return ao(Tm,a)}}),bC=_e(bw,"clientWidth"),gM=_e(bw,"clientHeight"),mM=_e(ff,"margin-top"),xC=_e(ff,"margin-left"),Id=Yi.PluginManager,ac=Yi.ThemeManager;function lx(a){function d(){var A=a.theme;return A&&A.getWindowManagerImpl?A.getWindowManagerImpl():{open:E,openUrl:E,alert:E,confirm:E,close:E,getParams:E,setParams:E};function E(){throw new Error("Theme did not provide a WindowManager implementation.")}}function g(A,E){return function(){for(var z=[],L=0;L<arguments.length;L++)z[L]=arguments[L];return E?E.apply(A,z):void 0}}function v(A){a.fire("CloseWindow",{dialog:A}),0===(C=hr(C,function(E){return E!==A})).length&&a.focus()}function x(A){a.editorManager.setActive(a),Xc(a);var E,z=A();return C.push(E=z),a.fire("OpenWindow",{dialog:E}),z}var C=[];return a.on("remove",function(){on(C,function(A){d().close(A)})}),{open:function(A,E){return x(function(){return d().open(A,E,v)})},openUrl:function(A){return x(function(){return d().openUrl(A,v)})},alert:function(A,E,z){var L=d();L.alert(A,g(z||L,E))},confirm:function(A,E,z){var L=d();L.confirm(A,g(z||L,E))},close:function(){H.from(C[C.length-1]).each(function(A){d().close(A),v(A)})}}}function H1(a,d){a.notificationManager.open({type:"error",text:d})}function Op(a,d){a._skinLoaded?H1(a,d):a.on("SkinLoaded",function(){H1(a,d)})}function W1(a,d,g){Hf(a,d,{message:g}),console.error(g)}function G1(a,d,g){return g?"Failed to load "+a+": "+g+" from url "+d:"Failed to load "+a+" url: "+d}function j1(a,d,g){W1(a,"PluginLoadError",G1("plugin",d,g))}function u0(){function a(v,x){return{status:v,resultUri:x}}function d(v){return v in g}var g={};return{hasBlobUri:d,getResultUri:function(v){var x=g[v];return x?x.resultUri:null},isPending:function(v){return!!d(v)&&1===g[v].status},isUploaded:function(v){return!!d(v)&&2===g[v].status},markPending:function(v){g[v]=a(1,null)},markUploaded:function(v,x){g[v]=a(2,x)},removeFailed:function(v){delete g[v]},destroy:function(){g={}}}}function U1(a){return a+Sx+++"s"+(new Date).getTime().toString(36)+d()+d()+d();function d(){return Math.round(4294967295*Math.random()).toString(36)}}function kw(a){return function(){return a.notificationManager.open({text:a.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}}function Mw(a,d){return function(a,d){function g(E,z,L,U){var V=new XMLHttpRequest;V.open("POST",d.url),V.withCredentials=d.credentials,V.upload.onprogress=function(ee){U(ee.loaded/ee.total*100)},V.onerror=function(){L("Image upload failed due to a XHR Transport error. Code: "+V.status)},V.onload=function(){var ee,oe,re;V.status<200||300<=V.status?L("HTTP Error: "+V.status):(ee=JSON.parse(V.responseText))&&"string"==typeof ee.location?z((re=ee.location,(oe=d.basePath)?oe.replace(/\/$/,"")+"/"+re.replace(/^\//,""):re)):L("Invalid JSON: "+V.responseText)};var Z=new FormData;Z.append("file",E.blob(),E.filename()),V.send(Z)}function v(E,z){return{url:z,blobInfo:E,status:!0}}function x(E,z,L){return{url:"",blobInfo:E,status:!1,error:{message:z,options:L}}}function C(E,z){At.each(A[E],function(L){L(z)}),delete A[E]}var A={};return!1===dn(d.handler)&&(d.handler=g),{upload:function(E,z){return d.url||d.handler!==g?(U=z,L=At.grep(E,function(V){return!a.isUploaded(V.blobUri())}),qe.all(At.map(L,function(V){return a.isPending(V.blobUri())?(re=V.blobUri(),new qe(function(ie){A[re]=A[re]||[],A[re].push(ie)})):(ee=d.handler,oe=U,a.markPending((Z=V).blobUri()),new qe(function(ie){var ue;try{var de=function(){ue&&ue.close()};ee(Z,function(he){de(),a.markUploaded(Z.blobUri(),he),C(Z.blobUri(),v(Z,he)),ie(v(Z,he))},function(he,Ie){var We=Ie||{};de(),a.removeFailed(Z.blobUri()),C(Z.blobUri(),x(Z,he,We)),ie(x(Z,he,We))},function(he){he<0||100<he||H.from(ue).orThunk(function(){return H.from(oe).map(me)}).each(function(Ie){(ue=Ie).progressBar.value(he)})})}catch(he){ie(x(Z,he.message,{}))}}));var Z,ee,oe,re}))):new qe(function(V){V([])});var L,U}}}(d,{url:a.getParam("images_upload_url","","string"),basePath:a.getParam("images_upload_base_path","","string"),credentials:a.getParam("images_upload_credentials",!1,"boolean"),handler:a.getParam("images_upload_handler",null,"function")})}function Tw(a,d){function g(z){var L,U=sc.create((x="string"==typeof z?{name:z,classes:[],attrs:{}}:z).name),V=U;return(L=x).classes.length&&sc.addClass(V,L.classes.join(" ")),sc.setAttribs(V,L.attrs),U}var v,x,C,A=d&&d.schema||Xe({}),E=function(z,L,U){var V,Z,ee,oe,re,ie,ue,de=0<L.length&&L[0],he=de&&de.name,Ie=(oe=he,re="string"!=typeof(ee=z)?ee.nodeName.toLowerCase():ee,!(!(ue=(ie=A.getElementRule(re))&&ie.parentsRequired)||!ue.length)&&(oe&&-1!==At.inArray(ue,oe)?oe:ue[0]));if(Ie)he===Ie?(Z=L[0],L=L.slice(1)):Z=Ie;else if(de)Z=L[0],L=L.slice(1);else if(!U)return z;return Z&&(V=g(Z)).appendChild(z),U&&(V||(V=sc.create("div")).appendChild(z),At.each(U,function(We){var ve=g(We);V.insertBefore(ve,z)})),E(V,L,Z&&Z.siblings)};return a&&a.length?(v=g(x=a[0]),(C=sc.create("div")).appendChild(E(v,a.slice(1),x.siblings)),C):""}function Dm(a){var d,g={classes:[],attrs:{}};return"*"!==(a=g.selector=At.trim(a))&&(d=a.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(v,x,C,A,E){switch(x){case"#":g.attrs.id=C;break;case".":g.classes.push(C);break;case":":-1!==At.inArray("checked disabled enabled read-only required".split(" "),C)&&(g.attrs[C]=C)}var z;return"["!==A||(z=E.match(/([\w\-]+)(?:\=\"([^\"]+))?/))&&(g.attrs[z[1]]=z[2]),""})),g.name=d||"div",g}function dx(a,d){var g,v,x="",C=(v=a.getParam("preview_styles","font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),xr(v)?v:"");if(""===C)return"";function A(ee){return ee.replace(/%(\w+)/g,"")}if("string"==typeof d){if(!(d=a.formatter.get(d)))return;d=d[0]}if("preview"in d){var E=Vn(d,"preview");if(Lu(E,!1))return"";C=E.getOr(C)}var z,L=d.block||d.inline||"span",U=(z=d.selector)&&"string"==typeof z?(z=(z=z.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),At.map(z.split(/(?:>|\s+(?![^\[\]]+\]))/),function(ee){var oe=At.map(ee.split(/(?:~\+|~|\+)/),Dm),re=oe.pop();return oe.length&&(re.siblings=oe),re}).reverse()):[],V=U.length?(U[0].name||(U[0].name=L),L=d.selector,Tw(U,a)):Tw([L],a),Z=sc.select(L,V)[0]||V.firstChild;return xa(d.styles,function(ee,oe){var re=A(ee);re&&sc.setStyle(Z,oe,re)}),xa(d.attributes,function(ee,oe){var re=A(ee);re&&sc.setAttrib(Z,oe,re)}),xa(d.classes,function(ee){var oe=A(ee);sc.hasClass(Z,oe)||sc.addClass(Z,oe)}),a.fire("PreviewFormats"),sc.setStyles(V,{position:"absolute",left:-65535}),a.getBody().appendChild(V),g=sc.getStyle(a.getBody(),"fontSize",!0),g=/px$/.test(g)?parseInt(g,10):0,xa(C.split(" "),function(ee){var oe=sc.getStyle(Z,ee,!0);if(!("background-color"===ee&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(oe)&&(oe=sc.getStyle(a.getBody(),ee,!0),"#ffffff"===sc.toHex(oe).toLowerCase())||"color"===ee&&"#000000"===sc.toHex(oe).toLowerCase())){if("font-size"===ee&&/em|%$/.test(oe)){if(0===g)return;oe=parseFloat(oe)/(/%$/.test(oe)?100:1)*g+"px"}"border"===ee&&oe&&(x+="padding:0 2px;"),x+=ee+":"+oe+";"}}),a.fire("AfterPreviewFormats"),sc.remove(V),x}function vM(a){var d,g,v,x,C,A,E=(x={},(C=function(L,U){L&&(xr(L)?(on(U=un(U)?U:[U],function(V){Er(V.deep)&&(V.deep=!fo(V)),Er(V.split)&&(V.split=!fo(V)||da(V)),Er(V.remove)&&fo(V)&&!da(V)&&(V.remove="none"),fo(V)&&da(V)&&(V.mixed=!0,V.block_expand=!0),xr(V.classes)&&(V.classes=V.classes.split(/\s+/))}),x[L]=U):qt(L,function(V,Z){C(Z,V)}))})((g=(d=a).dom,v={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(L,U,V){return Mr(L)&&L.hasAttribute("href")},onformat:function(L,U,V){At.each(V,function(Z,ee){g.setAttrib(L,ee,Z)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":function(L){var U;return null!==(U=null==L?void 0:L.customValue)&&void 0!==U?U:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]},At.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),function(L){v[L]={block:L,remove:"all"}}),v)),C(d.getParam("formats")),{get:function(L){return ze(L)?x[L]:x},has:function(L){return ao(x,L)},register:C,unregister:function(L){return L&&x[L]&&delete x[L],x}}),z=vi(null);return function(L){L.addShortcut("meta+b","","Bold"),L.addShortcut("meta+i","","Italic"),L.addShortcut("meta+u","","Underline");for(var U=1;U<=6;U++)L.addShortcut("access+"+U,"",["FormatBlock",!1,"h"+U]);L.addShortcut("access+7","",["FormatBlock",!1,"p"]),L.addShortcut("access+8","",["FormatBlock",!1,"div"]),L.addShortcut("access+9","",["FormatBlock",!1,"address"])}(a),(A=a).on("mouseup keydown",function(L){var U=A,V=L.keyCode,Z=U.selection,ee=U.getBody();eC(U,null,!1),8!==V&&46!==V||!Z.isCollapsed()||Z.getStart().innerHTML!==Xb||eC(U,dg(ee,Z.getStart())),37!==V&&39!==V||eC(U,dg(ee,Z.getStart()))}),{get:E.get,has:E.has,register:E.register,unregister:E.unregister,apply:function(L,U,V){var Z=L,ee=U,oe=V;ai(a).formatter.apply(Z,ee,oe)},remove:function(L,U,V,Z){var ee=L,oe=U,re=V,ie=Z;ai(a).formatter.remove(ee,oe,re,ie)},toggle:function(L,U,V){var Z=L,ee=U,oe=V;ai(a).formatter.toggle(Z,ee,oe)},match:function(L,U,V,Z){return ee=L,oe=U,re=V,ie=Z,ai(a).formatter.match(ee,oe,re,ie);var ee,oe,re,ie},closest:function(L){return U=L,ai(a).formatter.closest(U);var U},matchAll:function(L,U){return V=L,Z=U,ai(a).formatter.matchAll(V,Z);var V,Z},matchNode:function(L,U,V,Z){return ee=L,oe=U,re=V,ie=Z,ai(a).formatter.matchNode(ee,oe,re,ie);var ee,oe,re,ie},canApply:function(L){return U=L,ai(a).formatter.canApply(U);var U},formatChanged:function(L,U,V,Z){return ee=z,oe=L,re=U,ie=V,ue=Z,ai(a).formatter.formatChanged(ee,oe,re,ie,ue);var ee,oe,re,ie,ue},getCssText:_e(dx,a)}}function c0(a){switch(a.toLowerCase()){case"undo":case"redo":case"mcerepaint":case"mcefocus":return 1;default:return}}function fx(a){var d,g,v,x,C,A=Hs(),E=vi(0),z=vi(0),L={data:[],typing:!1,beforeChange:function(){var V=E,Z=A;ai(a).undoManager.beforeChange(V,Z)},add:function(V,Z){return ee=L,oe=z,re=E,ie=A,ue=V,de=Z,ai(a).undoManager.add(ee,oe,re,ie,ue,de);var ee,oe,re,ie,ue,de},undo:function(){return V=L,Z=E,ee=z,ai(a).undoManager.undo(V,Z,ee);var V,Z,ee},redo:function(){return V=z,Z=L.data,ai(a).undoManager.redo(V,Z);var V,Z},clear:function(){var V=L,Z=z;ai(a).undoManager.clear(V,Z)},reset:function(){var V=L;ai(a).undoManager.reset(V)},hasUndo:function(){return V=L,Z=z,ai(a).undoManager.hasUndo(V,Z);var V,Z},hasRedo:function(){return V=L,Z=z,ai(a).undoManager.hasRedo(V,Z);var V,Z},transact:function(V){return Z=L,ee=E,oe=V,ai(a).undoManager.transact(Z,ee,oe);var Z,ee,oe},ignore:function(V){var Z=E,ee=V;ai(a).undoManager.ignore(Z,ee)},extra:function(V,Z){var ee=L,oe=z,re=V,ie=Z;ai(a).undoManager.extra(ee,oe,re,ie)}};return Uf(a)||(v=L,x=E,C=vi(!1),(g=a).on("init",function(){v.add()}),g.on("BeforeExecCommand",function(V){c0(V.command)||(E1(v,x),v.beforeChange())}),g.on("ExecCommand",function(V){c0(V.command)||U(V)}),g.on("ObjectResizeStart cut",function(){v.beforeChange()}),g.on("SaveContent ObjectResized blur",U),g.on("dragend",U),g.on("keyup",function(V){var Z=V.keyCode;V.isDefaultPrevented()||((33<=Z&&Z<=36||37<=Z&&Z<=40||45===Z||V.ctrlKey)&&(U(),g.nodeChanged()),46!==Z&&8!==Z||g.nodeChanged(),C.get()&&v.typing&&!1===Ey(Oy(g),v.data[0])&&(!1===g.isDirty()&&(g.setDirty(!0),g.fire("change",{level:v.data[0],lastLevel:null})),g.fire("TypingUndo"),C.set(!1),g.nodeChanged()))}),g.on("keydown",function(V){var ee=V.keyCode;V.isDefaultPrevented()||(33<=ee&&ee<=36||37<=ee&&ee<=40||45===ee?v.typing&&U(V):!(ee<16||20<ee)||224===ee||91===ee||v.typing||V.ctrlKey&&!V.altKey||V.metaKey||(v.beforeChange(),Qb(v,!0,x),v.add({},V),C.set(!0)))}),g.on("mousedown",function(V){v.typing&&U(V)}),g.on("input",function(V){V.inputType&&("insertReplacementText"===V.inputType||"insertText"===V.inputType&&null===V.data||"insertFromPaste"===V.inputType||"insertFromDrop"===V.inputType)&&U(V)}),g.on("AddUndo Undo Redo ClearUndos",function(V){V.isDefaultPrevented()||g.nodeChanged()})),(d=a).addShortcut("meta+z","","Undo"),d.addShortcut("meta+y,meta+shift+z","","Redo"),L;function U(V){Qb(v,!1,x),v.add({},V)}}function Dw(a){return"keydown"===a.type||"keyup"===a.type}function Aw(a){var d=a.keyCode;return d===mr.BACKSPACE||d===mr.DELETE}function Tg(a,d){return nn(it.fromDom(d),a.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string"))}function Ep(a,d,g){var v,x,C=(v=a,x=d,hr(ci.DOM.getParents(g.container(),"*",x),v));return H.from(C[C.length-1])}function Od(a,d){if(!d)return d;var g=d.container(),v=d.offset();return a?$n(g)?In(g.nextSibling)?kt(g.nextSibling,0):kt.after(g):Yl(d)?kt(g,v+1):d:$n(g)?In(g.previousSibling)?kt(g.previousSibling,g.previousSibling.data.length):kt.before(g):mc(d)?kt(g,v-1):d}function wC(a){return br(a)||xo(a)}function Vy(a,d){return rt(a,d)?Qi(d,wC,(g=a,function(v){return $t(g,it.fromDom(v.dom.parentNode))})):H.none();var g}function q1(a){var d,g,v;a.dom.isEmpty(a.getBody())&&(a.setContent(""),v=(g=(d=a).getBody()).firstChild&&d.dom.isBlock(g.firstChild)?g.firstChild:g,d.selection.setCursorLocation(v,0))}function yM(a,d){return{from:a,to:d}}function d0(a,d){return Vy(it.fromDom(a),it.fromDom(d.container())).map(function(g){return{block:g,position:d}})}function Hy(a){var d,g=Es(d=pn(a),Hr).fold(Zt(d),function(v){return d.slice(0,v)});return on(g,Sr),g}function Iw(a,d){return gi(Do(d,a).reverse(),function(g){return q(g)}).each(Sr)}function Pp(a,d,g,v){if(q(g))return Xr(g),Ku(g.dom);0===hr(xl(v),function(C){return!q(C)}).length&&q(d)&&Ui(v,it.fromTag("br"));var x=Uc(g.dom,kt.before(v.dom));return on(Hy(d),function(C){Ui(v,C)}),Iw(a,d),x}function Ow(a,d,g){if(q(g))return Sr(g),q(d)&&Xr(d),Ku(d.dom);var v=rf(g.dom);return on(Hy(d),function(x){Ua(g,x)}),Iw(a,d),v}function Ph(a,d){Wc(a,d.dom).map(function(g){return g.getNode()}).map(it.fromDom).filter(gc).each(Sr)}function Wy(a,d,g){return Ph(!0,d),Ph(!1,g),(rt(x=g,v=d)?(C=Do(v,x),H.from(C[C.length-1])):H.none()).fold(_e(Ow,a,d,g),_e(Pp,a,d,g));var v,x,C}function hx(a,d,g,v){return d?Wy(a,v,g):Wy(a,g,v)}function gx(a,d){var g,v,x,C,A,E,z,L=it.fromDom(a.getBody()),U=(g=L.dom,v=d,((x=a.selection.getRng()).collapsed?(A=v,E=d0(C=g,kt.fromRangeStart(x)),z=E.bind(function(V){return tc(A,C,V.position).bind(function(Z){return d0(C,Z).map(function(ee){return oe=C,re=A,_i((ie=ee).position.getNode())&&!1===q(ie.block)?Wc(!1,ie.block.dom).bind(function(ue){return ue.isEqual(ie.position)?tc(re,oe,ue).bind(function(de){return d0(oe,de)}):H.some(ie)}).getOr(ie):ie;var oe,re,ie})})}),sa(E,z,yM).filter(function(V){return!1===$t(V.from.block,V.to.block)&&Pu((ee=V).from.block).bind(function(oe){return Pu(ee.to.block).filter(function(re){return $t(oe,re)})}).isSome()&&!1===qr((Z=V).from.block.dom)&&!1===qr(Z.to.block.dom);var Z,ee})):H.none()).bind(function(V){return hx(L,d,V.from.block,V.to.block)}));return U.each(function(V){a.selection.setRng(V.toRange())}),U.isSome()}function SC(a,d){var g=it.fromDom(d),v=_e($t,a);return qa(g,gr,v).isSome()}function mx(a,d){return!a.selection.isCollapsed()&&function(a){var d,g,v,x,C,A,E,z,L,U,V=it.fromDom(a.getBody()),Z=a.selection.getRng();return L=Uc((C=V).dom,kt.fromRangeStart(A=Z)).isNone(),U=Pl(C.dom,kt.fromRangeEnd(A)).isNone(),!SC(E=C,(z=A).startContainer)&&!SC(E,z.endContainer)&&L&&U?((x=a).setContent(""),x.selection.setCursorLocation(),!0):(d=V,v=(g=a.selection).getRng(),sa(Vy(d,it.fromDom(v.startContainer)),Vy(d,it.fromDom(v.endContainer)),function(ee,oe){return!1===$t(ee,oe)&&(v.deleteContents(),hx(d,!0,ee,oe).each(function(re){g.setRng(re.toRange())}),!0)}).getOr(!1))}(a)}function Rh(a,d,g,v,x){return H.from(d._selectionOverrides.showCaret(a,g,v,x))}function Yf(a,d){var g,v;return a.fire("BeforeObjectSelected",{target:d}).isDefaultPrevented()?H.none():H.some(((v=(g=d).ownerDocument.createRange()).selectNode(g),v))}function Am(a,d,g){var v=Db(1,a.getBody(),d),x=kt.fromRangeStart(v),C=x.getNode();if(No(C))return Rh(1,a,C,!x.isAtEnd(),!1);var A=x.getNode(!0);if(No(A))return Rh(1,a,A,!1,!1);var E=a.dom.getParent(x.getNode(),function(z){return $1(z)||Og(z)});return No(E)?Rh(1,a,E,!1,g):H.none()}function Dg(a,d,g){return d.collapsed?Am(a,d,g).getOr(d):d}function Ew(a){return Qv(a)||Cm(a)}function Pw(a){return _g(a)||Ty(a)}function Xs(a,d,g,v,x,C){var A,E;return Rh(v,a,C.getNode(!x),x,!0).each(function(z){var L;d.collapsed?(L=d.cloneRange(),x?L.setEnd(z.startContainer,z.startOffset):L.setStart(z.endContainer,z.endOffset),L.deleteContents()):d.deleteContents(),a.selection.setRng(z)}),A=a.dom,In(E=g)&&0===E.data.length&&A.remove(E),!0}function X1(a,d){var g=a.selection.getRng();if(!In(g.commonAncestorContainer))return!1;var v=d?Wo.Forwards:Wo.Backwards,x=Zu(a.getBody()),C=_e(am,d?x.next:x.prev),A=d?Ew:Pw,E=ug(v,a.getBody(),g),z=Od(d,C(E));if(!z||!xh(E,z))return!1;if(A(z))return Xs(a,g,E.getNode(),v,d,z);var L=C(z);return!!(L&&A(L)&&xh(z,L))&&Xs(a,g,E.getNode(),v,d,L)}function kC(a,d,g){return tc(d,a,g).bind(function(v){return V=v.getNode(),gr(it.fromDom(V))||xo(it.fromDom(V))||(E=a,U=v,ec(!(z=d),L=g).fold(function(){return ec(z,U).fold(_r,Z)},Z))?H.none():d&&qr(v.getNode())||!1===d&&qr(v.getNode(!0))?(x=a,C=g,A=v.getNode(!1===d),Vy(it.fromDom(x),it.fromDom(C.getNode())).map(function(ee){return q(ee)?Rd.remove(ee.dom):Rd.moveToElement(A)}).orThunk(function(){return H.some(Rd.moveToElement(A))})):d&&_g(g)||!1===d&&Qv(g)?H.some(Rd.moveToPosition(v)):H.none();var x,C,A,E,z,L,U,V;function Z(ee){return ki(it.fromDom(ee))&&!Yu(L,U,E)}})}function f0(a,d){return H.from(vm(a.getBody(),d))}function bM(a,d){var g=a.selection.getNode();return f0(a,g).filter(qr).fold(function(){return V=a.getBody(),ee=Db((Z=d)?1:-1,V,a.selection.getRng()),oe=kt.fromRangeStart(ee),re=it.fromDom(V),(!1===Z&&_g(oe)?H.some(Rd.remove(oe.getNode(!0))):Z&&Qv(oe)?H.some(Rd.remove(oe.getNode())):!1===Z&&Qv(oe)&&bg(re,oe)?oc(re,oe).map(function(ie){return Rd.remove(ie.getNode())}):Z&&_g(oe)&&Ti(re,oe)?Sg(re,oe).map(function(ie){return Rd.remove(ie.getNode())}):(v=V,x=Z,L=(C=oe).getNode(!1===(z=x)),U=z?"after":"before",Mr(L)&&L.getAttribute("data-mce-caret")===U?(E=C.getNode(!1===(A=x)),(A&&qr(E.nextSibling)?H.some(Rd.moveToElement(E.nextSibling)):!1===A&&qr(E.previousSibling)?H.some(Rd.moveToElement(E.previousSibling)):H.none()).fold(function(){return kC(v,x,C)},H.some)):kC(v,x,C).bind(function(ie){return ue=v,de=C,ie.fold(function(he){return H.some(Rd.remove(he))},function(he){return H.some(Rd.moveToElement(he))},function(he){return Yu(de,he,ue)?H.none():H.some(Rd.moveToPosition(he))});var ue,de}))).exists(function(ie){return ie.fold(function(ve){return Ie._selectionOverrides.hideFakeCaret(),$v(Ie,We,it.fromDom(ve)),!0},(he=We=d,function(ve){var Se=he?kt.before(ve):kt.after(ve);return de.selection.setRng(Se.toRange()),!0}),(ue=de=Ie=a,function(ve){return ue.selection.setRng(ve.toRange()),!0}));var ue,de,he,Ie,We});var v,x,C,A,E,z,L,U,V,Z,ee,oe,re},ro)}function MC(a,d){var g=a.selection.getNode();return!(!qr(g)||ns(g))&&f0(a,g.parentNode).filter(qr).fold(function(){return on(xu(it.fromDom(a.getBody()),".mce-offscreen-selection"),Sr),$v(a,d,it.fromDom(a.selection.getNode())),q1(a),!0},ro)}function Gy(a){var d,g=a.dom,v=a.selection,x=vm(a.getBody(),v.getNode());return mu(x)&&g.isBlock(x)&&g.isEmpty(x)&&(d=g.create("br",{"data-mce-bogus":"1"}),g.setHTML(x,""),x.appendChild(d),v.setRng(kt.before(d).toRange())),!0}function Y1(a,d){return(a.selection.isCollapsed()?bM:MC)(a,d)}function px(a,d){return!!a.selection.isCollapsed()&&(v=d,x=kt.fromRangeStart((g=a).selection.getRng()),tc(v,g.getBody(),x).filter(function(C){return(v?oC:fw)(C)}).bind(function(C){return H.from(rm(v?0:-1,C))}).exists(function(C){return g.selection.select(C),!0}));var g,v,x}function TC(a){return g0(a)&&a.data[0]===Io}function DC(a){return g0(a)&&a.data[a.data.length-1]===Io}function Rw(a){return a.ownerDocument.createTextNode(Io)}function Rp(a,d){return(a?function(g){if(g0(g.previousSibling))return DC(g.previousSibling)||g.previousSibling.appendData(Io),g.previousSibling;if(g0(g))return TC(g)||g.insertData(0,Io),g;var v=Rw(g);return g.parentNode.insertBefore(v,g),v}:function(g){if(g0(g.nextSibling))return TC(g.nextSibling)||g.nextSibling.insertData(0,Io),g.nextSibling;if(g0(g))return DC(g)||g.appendData(Io),g;var v=Rw(g);return g.nextSibling?g.parentNode.insertBefore(v,g.nextSibling):g.parentNode.appendChild(v),v})(d)}function xM(a,d){return In(a.container())?Rp(d,a.container()):Rp(d,a.getNode())}function AC(a,d){var g=d.get();return g&&a.container()===g&&$n(g)}function Nw(a,d){return d.fold(function(g){tf(a.get());var v=SM(g);return a.set(v),H.some(kt(v,v.length-1))},function(g){return Ku(g).map(function(v){if(AC(v,a))return kt(a.get(),1);tf(a.get());var x=xM(v,!0);return a.set(x),kt(x,1)})},function(g){return rf(g).map(function(v){if(AC(v,a))return kt(a.get(),a.get().length-1);tf(a.get());var x=xM(v,!1);return a.set(x),kt(x,x.length-1)})},function(g){tf(a.get());var v=PC(g);return a.set(v),H.some(kt(v,1))})}function vx(a,d){for(var g=0;g<a.length;g++){var v=a[g].apply(null,d);if(v.isSome())return v}return H.none()}function IC(a,d){return yh(d,a)||a}function Lw(a,d,g){var v=Om(g),x=IC(d,v.container());return Ep(a,x,v).fold(function(){return Pl(x,v).bind(_e(Ep,a,x)).map(function(C){return yl.before(C)})},H.none)}function OC(a,d){return null===dg(a,d)}function Z1(a,d,g){return Ep(a,d,g).filter(_e(OC,d))}function Bw(a,d,g){var v=Ig(g);return Z1(a,d,v).bind(function(x){return Uc(x,v).isNone()?H.some(yl.start(x)):H.none()})}function zw(a,d,g){var v=Om(g);return Z1(a,d,v).bind(function(x){return Pl(x,v).isNone()?H.some(yl.end(x)):H.none()})}function fD(a,d,g){var v=Ig(g),x=IC(d,v.container());return Ep(a,x,v).fold(function(){return Uc(x,v).bind(_e(Ep,a,x)).map(function(C){return yl.after(C)})},H.none)}function yx(a){return d=Np(a),!1===("rtl"===ci.DOM.getStyle(d,"direction",!0)||uc.test(d.textContent));var d}function Ed(a,d,g){return vx([Lw,Bw,zw,fD],[a,d,g]).filter(yx)}function Im(a){return a.fold(Zt("before"),Zt("start"),Zt("end"),Zt("after"))}function h0(a){return a.fold(yl.before,yl.before,yl.after,yl.after)}function bx(a){return a.fold(yl.start,yl.start,yl.end,yl.end)}function _M(a,d,g,v,x,C){return sa(Ep(d,g,v),Ep(d,g,x),function(A,E){return A!==E&&(L=E,U=yh(A,z=g),V=yh(L,z),U&&U===V)?yl.after(a?A:E):C;var z,L,U,V}).getOr(C)}function xx(a,d){return a.fold(ro,function(g){return x=d,!(Im(v=g)===Im(x)&&Np(v)===Np(x));var v,x})}function EC(a,d){return a?d.fold(Jn(H.some,yl.start),H.none,Jn(H.some,yl.after),H.none):d.fold(H.none,Jn(H.some,yl.before),H.none,Jn(H.some,yl.end))}function _x(a,d,g,v){var x=Od(a,v),C=Ed(d,g,x);return Ed(d,g,x).bind(_e(EC,a)).orThunk(function(){return E=d,z=g,L=C,U=Od(A=a,v),tc(A,z,U).map(_e(Od,A)).fold(function(){return L.map(h0)},function(V){return Ed(E,z,V).map(_e(_M,A,E,z,U,V)).filter(_e(xx,L))}).filter(yx);var A,E,z,L,U})}function du(a){for(var d=[],g=1;g<arguments.length;g++)d[g-1]=arguments[g];var v=window.console;v&&(v.error||v.log).apply(v,ot([a],d,!1))}var Ag,Pd,zo=function(a,d){var g=a.editorManager.baseURL+"/skins/content",v="content"+a.editorManager.suffix+".css",x=!0===a.inline;return xt(d,function(C){return/^[a-z0-9\-]+$/i.test(C)&&!x?g+"/"+C+"/"+v:a.documentBaseURI.toAbsolute(C)})},Sx=0,xa=At.each,sc=ci.DOM,wM=[9,27,mr.HOME,mr.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,mr.DOWN,mr.UP,mr.LEFT,mr.RIGHT].concat(wr.browser.isFirefox()?[224]:[]),Fw="data-mce-placeholder",uc=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Om=_e(Od,!0),Ig=_e(Od,!1),Og=mu,$1=qr,Rd=Xl([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),g0=In,SM=_e(Rp,!0),PC=_e(Rp,!1),yl=Xl([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Np=function(a){return a.fold(Eo,Eo,Eo,Eo)};function Lp(a,d,g){var v=a?1:-1;return d.setRng(kt(g.container(),g.offset()+v).toRange()),d.getSel().modify("move",a?"forward":"backward","word"),!0}function Cx(a,d){return a===Wo.Backwards?zi(d):d}function CM(a,d,g,v){for(var x,C,A,E,z=Zu(g),L=v,U=[];L;){var V=(A=z,E=L,d===Wo.Forwards?A.next(E):A.prev(E));if(!V)break;if(_i(V.getNode(!1)))return d===Wo.Forwards?{positions:Cx(d,U).concat([V]),breakType:Ag.Br,breakAt:H.some(V)}:{positions:Cx(d,U),breakType:Ag.Br,breakAt:H.some(V)};if(V.isVisible()){if(a(L,V)){var Z=(x=L,_i((C=V).getNode(d===Wo.Forwards))?Ag.Br:!1===Yu(x,C)?Ag.Block:Ag.Wrap);return{positions:Cx(d,U),breakType:Z,breakAt:H.some(V)}}U.push(V),L=V}else L=V}return{positions:Cx(d,U),breakType:Ag.Eol,breakAt:H.none()}}function RC(a,d,g,v){return d(g,v).breakAt.map(function(x){var C=d(g,x).positions;return a===Wo.Backwards?C.concat(x):[x].concat(C)}).getOr([])}function K1(a,d){return Dr(a,function(g,v){return g.fold(function(){return H.some(v)},function(x){return sa(ut(x.getClientRects()),ut(v.getClientRects()),function(C,A){var E=Math.abs(d-C.left);return Math.abs(d-A.left)<=E?v:x}).or(g)})},H.none())}function jy(a,d){return ut(d.getClientRects()).bind(function(g){return K1(a,g.left)})}function Vw(a){function d(v){return xt(v,function(x){var C=hh(x);return C.node=a,C})}if(Mr(a))return d(a.getClientRects());if(In(a)){var g=a.ownerDocument.createRange();return g.setStart(a,0),g.setEnd(a,a.data.length),d(g.getClientRects())}}function Uy(a){return _s(a,Vw)}_e(_x,!1),_e(_x,!0),(Pd=Ag={})[Pd.Br=0]="Br",Pd[Pd.Block=1]="Block",Pd[Pd.Wrap=2]="Wrap",Pd[Pd.Eol=3]="Eol";var kc,qy,Zf=_e(CM,kt.isAbove,-1),m0=_e(CM,kt.isBelow,1),kM=_e(RC,-1,Zf),Xy=_e(RC,1,m0);function Em(a,d,g,v,x,C){function A(V){var Z=Uy([V]);-1===a&&(Z=Z.reverse());for(var ee=0;ee<Z.length;ee++){var oe=Z[ee];if(!g(oe,L)){if(0<z.length&&d(oe,aa(z))&&E++,oe.line=E,x(oe))return!0;z.push(oe)}}}var E=0,z=[],L=aa(C.getClientRects());if(!L)return z;var U=C.getNode();return A(U),function(V,Z,ee,oe){for(;oe=Rf(oe,V,I,Z);)if(ee(oe))return}(a,v,A,U),z}function Nh(a){return function(d){return d.line>a}}function Yy(a){return function(d){return d.line===a}}function Zy(a,d){return Math.abs(a.left-d)}function Hw(a,d){return Math.abs(a.right-d)}function $f(a,d){return a>=d.left&&a<=d.right}function NC(a,d){return a>=d.top&&a<=d.bottom}function _a(a,d,g){return void 0===g&&(g=ro),Fi(a,function(v,x){if($f(d,x))return g(x)?x:v;if($f(d,v))return g(v)?v:x;var C=Math.min(Zy(v,d),Hw(v,d)),A=Math.min(Zy(x,d),Hw(x,d));return A===C&&po(x,"node")&&k0(x.node)||A<C?x:v})}function J1(a,d,g,v,x){var C=Zp(v,a,I,d,!x);do{if(!C||g(C))return}while(C=Zp(C,a,I,d))}function Eg(a,d){a.selection.setRng(d),kh(a,a.selection.getRng())}function p0(a,d,g){return H.some(Dg(a,d,g))}function v0(a,d,g,v,x,C){var A=d===Wo.Forwards,E=Zu(a.getBody()),z=_e(am,A?E.next:E.prev),L=A?v:x;if(!g.collapsed){var U=op(g);if(C(U))return Rh(d,a,U,d===Wo.Backwards,!1)}var V=ug(d,a.getBody(),g);if(L(V))return Yf(a,V.getNode(!A));var Z=Od(A,z(V)),ee=w(g);if(!Z)return ee?H.some(g):H.none();if(L(Z))return Rh(d,a,Z.getNode(!A),A,!1);var oe=z(Z);return oe&&L(oe)&&xh(Z,oe)?Rh(d,a,oe.getNode(!A),A,!1):ee?p0(a,Z.toRange(),!1):H.none()}function Ww(a,d,g,v,x,C){var A=ug(d,a.getBody(),g),E=aa(A.getClientRects()),z=d===kc.Down;if(!E)return H.none();var L,U=hr((z?g_:UC)(a.getBody(),Nh(1),A),Yy(1)),V=E.left,Z=_a(U,V);if(Z&&C(Z.node)){var ee=Math.abs(V-Z.left),oe=Math.abs(V-Z.right);return Rh(d,a,Z.node,ee<oe,!1)}if(L=v(A)?A.getNode():x(A)?A.getNode(!0):op(g)){var re=function(ue,de,he,Ie){function We(Ct){return aa(Ct.getClientRects())}var ve,Se,Oe,Je=Zu(de),ct=[],gt=0,Ge=1===ue?(ve=Je.next,Se=Dl,Oe=Xu,kt.after(Ie)):(ve=Je.prev,Se=Xu,Oe=Dl,kt.before(Ie)),Qe=We(Ge);do{if(Ge.isVisible()){var Ye=We(Ge);if(!Oe(Ye,Qe)){0<ct.length&&Se(Ye,aa(ct))&&gt++;var et=hh(Ye);if(et.position=Ge,et.line=gt,he(et))return ct;ct.push(et)}}}while(Ge=ve(Ge));return ct}(d,a.getBody(),Nh(1),L),ie=_a(hr(re,Yy(1)),V);if(ie||(ie=aa(hr(re,Yy(0)))))return p0(a,ie.position.toRange(),!1)}return 0===U.length?hf(a,z).filter(z?x:v).map(function(ue){return Dg(a,ue.toRange(),!1)}):H.none()}function Kf(a,d,g){return hf(a,d).filter(g).exists(function(v){return a.selection.setRng(v.toRange()),!0})}function Q1(a,d){var g=a.dom.createRng();g.setStart(d.container(),d.offset()),g.setEnd(d.container(),d.offset()),a.selection.setRng(g)}function Gw(a,d){a?d.setAttribute("data-mce-selected","inline-boundary"):d.removeAttribute("data-mce-selected")}function Bp(a,d,g){return Nw(d,g).map(function(v){return Q1(a,v),g})}function jw(a,d,g){return!!vh(a)&&(x=d,C=g,A=(v=a).getBody(),E=kt.fromRangeStart(v.selection.getRng()),_x(C,_e(Tg,v),A,E).bind(function(z){return Bp(v,x,z)}).isSome());var v,x,C,A,E}function y0(a,d,g){return!!vh(d)&&(v=a,C=(x=d).selection.getRng(),A=v?kt.fromRangeEnd(C):kt.fromRangeStart(C),!!dn(x.selection.getSel().modify)&&(v&&Yl(A)?Lp(!0,x.selection,A):!(v||!mc(A))&&Lp(!1,x.selection,A)));var v,x,C,A}function $y(a,d,g){if(vh(a)){var v=hf(a,d).getOrThunk(function(){var x=a.selection.getRng();return d?kt.fromRangeEnd(x):kt.fromRangeStart(x)});return Ed(_e(Tg,a),a.getBody(),v).exists(function(x){var C=h0(x);return Nw(g,C).exists(function(A){return Q1(a,A),!0})})}return!1}function e_(a,d){return function(g){return Nw(d,g).exists(function(v){return Q1(a,v),!0})}}function Fp(a,d,g,v){var x=a.getBody(),C=_e(Tg,a);a.undoManager.ignore(function(){var A,E,z;a.selection.setRng((A=g,E=v,(z=document.createRange()).setStart(A.container(),A.offset()),z.setEnd(E.container(),E.offset()),z)),a.execCommand("Delete"),Ed(C,x,kt.fromRangeStart(a.selection.getRng())).map(bx).map(e_(a,d))}),a.nodeChanged()}function Lh(a,d,g){if(a.selection.isCollapsed()&&vh(a)){var v=kt.fromRangeStart(a.selection.getRng());return C=d,A=g,E=v,z=(x=a).getBody(),L=yh(E.container(),z)||z,U=_e(Tg,x),(V=Ed(U,L,E)).bind(function(Z){return A?Z.fold(Zt(H.some(bx(Z))),H.none,Zt(H.some(h0(Z))),H.none):Z.fold(H.none,Zt(H.some(h0(Z))),H.none,Zt(H.some(bx(Z))))}).map(e_(x,C)).getOrThunk(function(){var Z=_h(A,L,E),ee=Z.bind(function(oe){return Ed(U,L,oe)});return sa(V,ee,function(){return Ep(U,L,E).exists(function(oe){return!!sa(Ku(re=oe),rf(re),function(ie,ue){var de=Od(!0,ie),he=Od(!1,ue);return Pl(re,de).forall(function(Ie){return Ie.isEqual(he)})}).getOr(!0)&&($v(x,A,it.fromDom(oe)),!0);var re})}).orThunk(function(){return ee.bind(function(oe){return Z.map(function(re){return A?Fp(x,C,E,re):Fp(x,C,re,E),!0})})}).getOr(!1)})}var x,C,A,E,z,L,U,V;return!1}function b0(a){return 1===Cs(a)}function x0(a,d){return!!a.selection.isCollapsed()&&function(a,d){var g,v=it.fromDom(a.getBody()),x=it.fromDom(a.selection.getStart()),C=hr(Es(g=Do(x,v),Hr).fold(Zt(g),function(A){return g.slice(0,A)}),b0);return dt(C).exists(function(A){var E,z,L,U,V,Z,ee,oe,re,ie=kt.fromRangeStart(a.selection.getRng()),ue=d,de=ie,he=A.dom;return!(!sa(Ku(he),rf(he),function(Ie,We){var ve=Od(!0,Ie),Se=Od(!1,We),Oe=Od(!1,de);return ue?Pl(he,Oe).exists(function(Je){return Je.isEqual(Se)&&de.isEqual(ve)}):Uc(he,Oe).exists(function(Je){return Je.isEqual(ve)&&de.isEqual(Se)})}).getOr(!0)||El((E=A).dom)&&lw(E.dom)||(z=d,U=A,0===(re=xt(hr(C,_e(tM,L=a)),function(Ie){return Ie.dom})).length?$v(L,z,U):(Z=U.dom,oe=dw(re,(ee=zr(!1)).dom),Ui(it.fromDom(Z),ee),Sr(it.fromDom(Z)),V=kt(oe,0),L.selection.setRng(V.toRange())),0))})}(a,d)}function Ni(a,d,g){return a._selectionOverrides.hideFakeCaret(),$v(a,d,it.fromDom(g)),!0}function Pm(a,d){return a.selection.isCollapsed()?(E=(A=d)?Cm:Ty,L=ug(A?Wo.Forwards:Wo.Backwards,(C=a).getBody(),C.selection.getRng()),E(L)?Ni(C,A,L.getNode(!A)):H.from(Od(A,L)).filter(function(U){return E(U)&&xh(L,U)}).exists(function(U){return Ni(C,A,U.getNode(!A))})):(v=d,x=(g=a).selection.getNode(),!!zu(x)&&Ni(g,v,x));var g,v,x,C,A,E,L}function kx(a){var d=parseInt(a,10);return isNaN(d)?0:d}function Mx(a,d){return(a||"table"===Oi(d)?"margin":"padding")+("rtl"===ks(d,"direction")?"-right":"-left")}function _0(a){var d,g=Lx(a);return!a.mode.isReadOnly()&&(1<g.length||(d=a,sr(g,function(v){var x=oi(v,Mx($o(d),v)).map(kx).getOr(0);return"false"!==d.dom.getContentEditable(v.dom)&&0<x})))}function Tx(a){return Xo(a)||xo(a)}function Dx(a,d){var g=a.dom,v=a.selection,x=a.formatter,C=a.getParam("indentation","40px","string"),A=/[a-z%]+$/i.exec(C)[0],E=parseInt(C,10),z=$o(a),L=Ba(a);a.queryCommandState("InsertUnorderedList")||a.queryCommandState("InsertOrderedList")||""!==L||g.getParent(v.getNode(),g.isBlock)||x.apply("div"),on(Lx(a),function(U){var V,Z=g,ee=d,oe=E,re=A,ie=U.dom,ue=Mx(z,it.fromDom(ie));"outdent"===ee?(V=Math.max(0,kx(ie.style[ue])-oe),Z.setStyle(ie,ue,V?V+re:"")):(V=kx(ie.style[ue])+oe+re,Z.setStyle(ie,ue,V))})}function Vp(a,d){if(a.selection.isCollapsed()&&_0(a)){var g=a.dom,v=a.selection.getRng(),x=kt.fromRangeStart(v),C=g.getParent(v.startContainer,g.isBlock);if(null!==C&&Ih(it.fromDom(C),x))return Dx(a,"outdent"),!0}return!1}function Ky(a,d){a.getDoc().execCommand(d,!1,null)}function n_(a){return void 0===a.touches||1!==a.touches.length?H.none():H.some(a.touches[0])}function r_(a,d){return ao(a,d.nodeName)}function TM(a){var d,g,v,x=a.dom,C=a.selection,A=a.schema,E=A.getBlockElements(),z=C.getStart(),L=a.getBody(),U=Ba(a);if(z&&Mr(z)&&U){var V=L.nodeName.toLowerCase();if(A.isValidChild(V,U.toLowerCase())&&(Z=E,ee=L,!tr(So(it.fromDom(z),it.fromDom(ee)),function(Se){return r_(Z,Se.dom)}))){var Z,ee,re,ie,ue=C.getRng(),de=ue.startContainer,he=ue.startOffset,Ie=ue.endContainer,We=ue.endOffset,ve=Oa(a);for(z=L.firstChild;z;)re=E,In(ie=z)||Mr(ie)&&!r_(re,ie)&&!xc(ie)?function(Oe,Je){if(In(Je)&&(0===Je.nodeValue.length||/^\s+$/.test(Je.nodeValue)&&(!Je.nextSibling||r_(Oe,Je.nextSibling))))return 1}(E,z)?(z=(g=z).nextSibling,x.remove(g)):(d||(d=x.create(U,ey(a)),z.parentNode.insertBefore(d,z),v=!0),z=(g=z).nextSibling,d.appendChild(g)):(d=null,z=z.nextSibling);v&&ve&&(ue.setStart(de,he),ue.setEnd(Ie,We),C.setRng(ue),a.nodeChanged())}}}function Ax(a,d){d.hasAttribute("data-mce-caret")&&(m(d),a.selection.setRng(a.selection.getRng()),a.selection.scrollIntoView(d))}function Hp(a,d){var g=sd(it.fromDom(a.getBody()),"*[data-mce-caret]").map(function(v){return v.dom}).getOrNull();if(g)return"compositionstart"===d.type?(d.preventDefault(),d.stopPropagation(),void Ax(a,g)):void(ud(g)&&(Ax(a,g),a.undoManager.add()))}function Wp(a,d,g){var v,x,C,A=Zu(a.getBody()),E=_e(am,1===d?A.next:A.prev);!g.collapsed||""===Ba(a)||(v=a.dom.getParent(g.startContainer,"PRE"))&&(E(kt.fromRangeStart(g))||(C=a.dom.create(Ba(a)),(!wr.ie||11<=wr.ie)&&(C.innerHTML='<br data-mce-bogus="1">'),x=C,1===d?a.$(v).after(x):a.$(v).before(x),a.selection.select(x,!0),a.selection.collapse()))}function Jf(a,d){return v=d?Wo.Forwards:Wo.Backwards,x=(g=a).selection.getRng(),v0(g,v,x,Qv,_g,$p).orThunk(function(){return Wp(g,v,x),H.none()}).exists(function(C){return Eg(a,C),!0});var g,v,x}function Uw(a,d){return v=d?1:-1,x=(g=a).selection.getRng(),Ww(g,v,x,function(C){return Qv(C)||Cp(C)},function(C){return _g(C)||iC(C)},$p).orThunk(function(){return Wp(g,v,x),H.none()}).exists(function(C){return Eg(a,C),!0});var g,v,x}function o_(a,d){return Kf(a,d,d?_g:Qv)}function qw(a){return Mt(["figcaption"],Oi(a))}function LC(a){var d=document.createRange();return d.setStartBefore(a.dom),d.setEndBefore(a.dom),d}function i_(a,d,g){(g?Ua:od)(a,d)}function Gp(a,d){return!!a.selection.isCollapsed()&&function(a,d){var g=it.fromDom(a.getBody()),v=kt.fromRangeStart(a.selection.getRng()),x=Ba(a),C=ey(a),A=v,E=_e($t,g);return Qi(it.fromDom(A.container()),Hr,E).filter(qw).exists(function(){if(Ie=g,We=v,d?m0(Ie.dom,We).breakAt.isNone():Zf(Ie.dom,We).breakAt.isNone()){var z=(L=g,V=C,Z=d,""===(U=x)?(de=Z,i_(L,he=it.fromTag("br"),de),LC(he)):(ee=L,oe=Z,re=V,ie=it.fromTag(U),ue=it.fromTag("br"),Rs(ie,re),Ua(ie,ue),i_(ee,ie,oe),LC(ue)));return a.selection.setRng(z),!0}var L,U,V,Z,ee,oe,re,ie,ue,de,he,Ie,We;return!1})}(a,d)}function yo(a){for(var d=[],g=1;g<arguments.length;g++)d[g-1]=arguments[g];return function(){return a.apply(null,d)}}function Nm(a,d){return gi((g=d,_s(xt(a,function(v){return yn({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:Ut},v)}),function(v){return g.keyCode===v.keyCode&&g.shiftKey===v.shiftKey&&g.altKey===v.altKey&&g.ctrlKey===v.ctrlKey&&g.metaKey===v.metaKey?[v]:[]})),function(v){return v.action()});var g}function a_(a,d){var g=d?Wo.Forwards:Wo.Backwards,v=a.selection.getRng();return v0(a,g,v,Cm,Ty,zu).exists(function(x){return Eg(a,x),!0})}function Xw(a,d){var g=d?1:-1,v=a.selection.getRng();return Ww(a,g,v,Cm,Ty,zu).exists(function(x){return Eg(a,x),!0})}function BC(a,d){return Kf(a,d,d?Ty:Cm)}function zC(a,d,g,v,x){var C,A=xu(it.fromDom(g),"td,th,caption").map(function(U){return U.dom}),E=hr((C=a,_s(A,function(U){var V,Z={left:(V=hh(U.getBoundingClientRect())).left- -1,top:V.top- -1,right:V.right+-2,bottom:V.bottom+-2,width:V.width+-1,height:V.height+-1};return[{x:Z.left,y:C(Z),cell:U},{x:Z.right,y:C(Z),cell:U}]})),function(U){return d(U,x)}),z=v,L=x;return Dr(E,function(U,V){return U.fold(function(){return H.some(V)},function(Z){var ee=Math.sqrt(Math.abs(Z.x-z)+Math.abs(Z.y-L)),oe=Math.sqrt(Math.abs(V.x-z)+Math.abs(V.y-L));return H.some(oe<ee?V:Z)})},H.none()).map(function(U){return U.cell})}function FC(a,d,g){var v,x,C=a(d,g);return C.breakType===Ag.Wrap&&0===C.positions.length||!_i(g.getNode())&&C.breakType===Ag.Br&&1===C.positions.length?(v=a,x=d,!C.breakAt.exists(function(A){return v(x,A).breakAt.isSome()})):C.breakAt.isNone()}function Yw(a,d,g,v){var x,C,A,E=a.selection.getRng(),z=d?1:-1;return!(!ry()||(x=d,C=g,A=kt.fromRangeStart(E),!Wc(!x,C).exists(function(L){return L.isEqual(A)}))||(Rh(z,a,g,!d,!1).each(function(L){Eg(a,L)}),0))}function Zw(a,d,g){var x,C=(x=g.getNode(!!d),Mr(x)&&"TABLE"===x.nodeName?H.some(x):H.none()),A=!1===d;C.fold(function(){return Eg(a,g.toRange())},function(E){return Wc(A,a.getBody()).filter(function(z){return z.isEqual(g)}).fold(function(){return Eg(a,g.toRange())},function(z){var L,U,V=d,Z=E,ee=g;(U=Ba(L=a))?L.undoManager.transact(function(){var oe=it.fromTag(U);Rs(oe,ey(L)),Ua(oe,it.fromTag("br")),(V?gs:Ui)(it.fromDom(Z),oe);var re=L.dom.createRng();re.setStart(oe.dom,0),re.setEnd(oe.dom,0),Eg(L,re)}):Eg(L,ee.toRange())})})}function DM(a,d,g,v){var x,C,A,E,z,L,U,V,Z,ee,oe=a.selection.getRng(),re=kt.fromRangeStart(oe),ie=a.getBody();if(d||!oS(v,re))return!(!d||!XC(v,re)||(x=ie,Z=C=g,Zw(a,d,ue=dt((ee=A=re).getClientRects()).bind(function(de){return qC(Z,de.left,de.top)}).bind(function(de){return jy(Ku(he=de).map(function(Ie){return[Ie].concat(m0(he,Ie).positions)}).getOr([]),ee);var he}).orThunk(function(){return ut(A.getClientRects()).bind(function(de){return K1(Xy(x,kt.after(C)),de.left)})}).getOr(kt.after(C))),0));var ue=(E=ie,U=z=g,ut((V=L=re).getClientRects()).bind(function(de){return m_(U,de.left,de.top)}).bind(function(de){return jy(rf(he=de).map(function(Ie){return Zf(he,Ie).positions.concat(Ie)}).getOr([]),V);var he}).orThunk(function(){return ut(L.getClientRects()).bind(function(de){return K1(kM(E,kt.before(z)),de.left)})}).getOr(kt.before(z)));return Zw(a,d,ue),!0}function s_(a,d,g){return H.from(a.dom.getParent(a.selection.getNode(),"td,th")).bind(function(v){return H.from(a.dom.getParent(v,"table")).map(function(x){return g(a,d,x,v)})}).getOr(!1)}function Ix(a,d){return s_(a,d,Yw)}function jp(a,d){return s_(a,d,DM)}function Lm(a,d){var g,v,x=d,C=a.dom,A=a.schema.getMoveCaretBeforeOnEnterElements();if(d){!/^(LI|DT|DD)$/.test(d.nodeName)||(v=function(L){for(;L;){if(1===L.nodeType||3===L.nodeType&&L.data&&/[\r\n\s]/.test(L.data))return L;L=L.nextSibling}}(d.firstChild))&&/^(UL|OL|DL)$/.test(v.nodeName)&&d.insertBefore(C.doc.createTextNode(Ho),d.firstChild);var E=C.createRng();if(d.normalize(),d.hasChildNodes()){for(var z=new ea(d,d);g=z.current();){if(In(g)){E.setStart(g,0),E.setEnd(g,0);break}if(A[g.nodeName.toLowerCase()]){E.setStartBefore(g),E.setEndBefore(g);break}x=g,g=z.next()}g||(E.setStart(x,0),E.setEnd(x,0))}else _i(d)?d.nextSibling&&C.isBlock(d.nextSibling)?(E.setStartBefore(d),E.setEndBefore(d)):(E.setStartAfter(d),E.setEndAfter(d)):(E.setStart(d,0),E.setEnd(d,0));a.selection.setRng(E),kh(a,E)}}function Mc(a){return H.from(a.dom.getParent(a.selection.getStart(!0),a.dom.isBlock))}function Nd(a,d){return a&&a.parentNode&&a.parentNode.nodeName===d}function Up(a){return a&&/^(OL|UL|LI)$/.test(a.nodeName)}function w0(a){var d=a.parentNode;return/^(LI|DT|DD)$/.test(d.nodeName)?d:a}function Ox(a,d,g){for(var v=a[g?"firstChild":"lastChild"];v&&!Mr(v);)v=v[g?"nextSibling":"previousSibling"];return v===d}function u_(a){a.innerHTML='<br data-mce-bogus="1">'}function Ex(a,d){return a.nodeName===d||a.previousSibling&&a.previousSibling.nodeName===d}function VC(a,d){return d&&a.isBlock(d)&&!/^(TD|TH|CAPTION|FORM)$/.test(d.nodeName)&&!/^(fixed|absolute)/i.test(d.style.position)&&"true"!==a.getContentEditable(d)}function S0(a,d,g){return!1===In(d)?g:a?1===g&&d.data.charAt(g-1)===Io?0:g:g===d.data.length-1&&d.data.charAt(g)===Io?d.data.length:g}function HC(a,d){for(var g,v=a.getRoot(),x=d;x!==v&&"false"!==a.getContentEditable(x);)"true"===a.getContentEditable(x)&&(g=x),x=x.parentNode;return x!==v?g:v}function Px(a,d){var g=Ba(a);g&&g.toLowerCase()===d.tagName.toLowerCase()&&function(v,x,C){var A=v.dom;H.from(C.style).map(A.parseStyle).each(function(L){var U=dc(it.fromDom(x)),V=yn(yn({},U),L);A.setStyles(x,V)}),sa(H.from(C.class).map(function(L){return L.split(/\s+/)}),H.from(x.className).map(function(L){return hr(L.split(/\s+/),function(U){return""!==U})}),function(L,U){var V=hr(U,function(ee){return!Mt(L,ee)}),Z=ot(ot([],L,!0),V,!0);A.setAttrib(x,"class",Z.join(" "))});var E=["style","class"],z=Lr(C,function(L,U){return!Mt(E,U)});A.setAttribs(x,z)}(a,d,ey(a))}function l_(a,d,g){var v=a.dom.createRng();g?(v.setStartBefore(d),v.setEndBefore(d)):(v.setStartAfter(d),v.setEndAfter(d)),a.selection.setRng(v),kh(a,v)}function WC(a,d){var g=it.fromTag("br");Ui(it.fromDom(d),g),a.undoManager.add()}function qp(a,d){Bx(a.getBody(),d)||gs(it.fromDom(d),it.fromTag("br"));var g=it.fromTag("br");gs(it.fromDom(d),g),l_(a,g.dom,!1),a.undoManager.add()}function C0(a){return a&&"A"===a.nodeName&&"href"in a}function GC(a){return a.fold(_r,C0,C0,_r)}function c_(a,d){d.fold(Ut,_e(WC,a),_e(qp,a),Ut)}function $w(a,d){var g,v,x,C=(v=_e(Tg,g=a),x=kt.fromRangeStart(g.selection.getRng()),Ed(v,g.getBody(),x).filter(GC));C.isSome()?C.each(_e(c_,a)):function(A,E){var z,L,V=A.dom,Z=A.selection.getRng();Cd(V,Z).each(function(Ie){Z.setStart(Ie.startContainer,Ie.startOffset),Z.setEnd(Ie.endContainer,Ie.endOffset)});var ee,oe=Z.startOffset,re=Z.startContainer;1===re.nodeType&&re.hasChildNodes()&&(ee=oe>re.childNodes.length-1,re=re.childNodes[Math.min(oe,re.childNodes.length-1)]||re,oe=ee&&3===re.nodeType?re.nodeValue.length:0);var ie=V.getParent(re,V.isBlock),ue=ie?V.getParent(ie.parentNode,V.isBlock):null;"LI"!==(ue?ue.nodeName.toUpperCase():"")||!(!E||!E.ctrlKey)||(ie=ue),re&&3===re.nodeType&&oe>=re.nodeValue.length&&!function(Ie){for(var We,ve=new ea(re,ie),Se=Ie.getNonEmptyElements();We=ve.next();)if(Se[We.nodeName.toLowerCase()]||0<We.length)return 1}(A.schema)&&(z=V.create("br"),Z.insertNode(z),Z.setStartAfter(z),Z.setEndAfter(z),L=!0),z=V.create("br"),og(V,Z,z),l_(A,z,L),A.undoManager.add()}(a,d)}function d_(a,d){return Mc(a).filter(function(g){return 0<d.length&&nn(it.fromDom(g),d)}).isSome()}function jC(a,d){return d_(a,a.getParam("no_newline_selector",""))}function Bm(a){return function(d,g){return""===Ba(d)===a}}function Kw(a){return function(d,g){return Mc(d).filter(function(v){return xo(it.fromDom(v))}).isSome()===a}}function zm(a,d){return function(g,v){return Mc(g).fold(Zt(""),function(x){return x.nodeName.toUpperCase()})===a.toUpperCase()===d}}function Bh(a){return zm("pre",a)}function Xp(a){return function(d,g){return d.getParam("br_in_pre",!0)===a}}function Yp(a,d){return d_(a,a.getParam("br_newline_selector",".mce-toc h2,figcaption,caption"))}function Jy(a,d){return d}function Jw(a){var d=Ba(a),g=function(v,x){for(var C,A=v.getRoot(),E=x;E!==A&&"false"!==v.getContentEditable(E);)"true"===v.getContentEditable(E)&&(C=E),E=E.parentNode;return E!==A?C:A}(a.dom,a.selection.getStart());return g&&a.schema.isValidChild(g.nodeName,d||"P")}function Ld(a,d){return function(g,v){return Dr(a,function(x,C){return x&&C(g,v)},!0)?H.some(d):H.none()}}function Rx(a,d){var g,v;g=a,v=d,vx([Ld([jC],$c.none()),Ld([zm("summary",!0)],$c.br()),Ld([Bh(!0),Xp(!1),Jy],$c.br()),Ld([Bh(!0),Xp(!1)],$c.block()),Ld([Bh(!0),Xp(!0),Jy],$c.block()),Ld([Bh(!0),Xp(!0)],$c.br()),Ld([Kw(!0),Jy],$c.br()),Ld([Kw(!0)],$c.block()),Ld([Bm(!0),Jy,Jw],$c.block()),Ld([Bm(!0)],$c.br()),Ld([Yp],$c.br()),Ld([Bm(!1),Jy],$c.br()),Ld([Jw],$c.block())],[g,!(!v||!v.shiftKey)]).getOr($c.none()).fold(function(){$w(a,d)},function(){!function(a,d){function g(Jt){var Xn,Bt=ee,Tn=U.getTextInlineElements(),tn=Jt||"TABLE"===Ie||"HR"===Ie?L.create(Jt||re):de.cloneNode(!1),An=tn;if(!1===a.getParam("keep_styles",!0))L.setAttrib(tn,"style",null),L.setAttrib(tn,"class",null);else for(;Tn[Bt.nodeName]&&(El(Bt)||xc(Bt)||(Xn=Bt.cloneNode(!1),L.setAttrib(Xn,"id",""),tn.hasChildNodes()?Xn.appendChild(tn.firstChild):An=Xn,tn.appendChild(Xn))),(Bt=Bt.parentNode)&&Bt!==bn;);return Px(a,tn),u_(An),tn}function v(Jt){var Xn,Bt,Tn=S0(Jt,ee,oe);if(!In(ee)||!(Jt?0<Tn:Tn<ee.nodeValue.length)){if(ee.parentNode===de&&z&&!Jt||Jt&&Mr(ee)&&ee===de.firstChild)return 1;if(Ex(ee,"TABLE")||Ex(ee,"HR"))return z&&!Jt||!z&&Jt;var tn=new ea(ee,de);for(In(ee)&&(Jt&&0===Tn?tn.prev():Jt||Tn!==ee.nodeValue.length||tn.next());Xn=tn.current();){if(Mr(Xn)){if(!Xn.getAttribute("data-mce-bogus")&&(Bt=Xn.nodeName.toLowerCase(),V[Bt]&&"br"!==Bt))return}else if(In(Xn)&&!N(Xn.nodeValue))return;Jt?tn.prev():tn.next()}return 1}}function x(){A=/^(H[1-6]|PRE|FIGURE)$/.test(Ie)&&"HGROUP"!==We?g(re):g(),a.getParam("end_container_on_empty_block",!1)&&VC(L,he)&&L.isEmpty(de)?A=L.split(he,de):L.insertAfter(A,de),Lm(a,A)}var C,A,E,z,L=a.dom,U=a.schema,V=U.getNonEmptyElements(),Z=a.selection.getRng();Cd(L,Z).each(function(Jt){Z.setStart(Jt.startContainer,Jt.startOffset),Z.setEnd(Jt.endContainer,Jt.endOffset)});var ee=Z.startContainer,oe=Z.startOffset,re=Ba(a),ie=!(!d||!d.shiftKey),ue=!(!d||!d.ctrlKey);Mr(ee)&&ee.hasChildNodes()&&(z=oe>ee.childNodes.length-1,ee=ee.childNodes[Math.min(oe,ee.childNodes.length-1)]||ee,oe=z&&In(ee)?ee.nodeValue.length:0);var de,he,Ie,We,ve,Se,Oe,Je,ct,gt,Ge,Qe,Ye,et,Ct,en,sn,Tt,Dt,xn,bn=HC(L,ee);bn&&((re&&!ie||!re&&ie)&&(ee=function(Jt,Xn,Bt,Tn){var tn,An,Hn,mo,Ae,Ze,It=re||"P",zt=Jt.dom,Vt=HC(zt,Bt),fn=zt.getParent(Bt,zt.isBlock);if(!fn||!VC(zt,fn)){if(Ae=((fn=fn||Vt)===Jt.getBody()||(Ze=fn)&&/^(TD|TH|CAPTION)$/.test(Ze.nodeName)?fn:fn.parentNode).nodeName.toLowerCase(),!fn.hasChildNodes())return Px(Jt,tn=zt.create(It)),fn.appendChild(tn),Xn.setStart(tn,0),Xn.setEnd(tn,0),tn;for(Hn=Bt;Hn.parentNode!==fn;)Hn=Hn.parentNode;for(;Hn&&!zt.isBlock(Hn);)Hn=(An=Hn).previousSibling;if(An&&Jt.schema.isValidChild(Ae,It.toLowerCase())){for(Px(Jt,tn=zt.create(It)),An.parentNode.insertBefore(tn,An),Hn=An;Hn&&!zt.isBlock(Hn);)mo=Hn.nextSibling,tn.appendChild(Hn),Hn=mo;Xn.setStart(Bt,Tn),Xn.setEnd(Bt,Tn)}}return Bt}(a,Z,ee,oe)),he=(de=L.getParent(ee,L.isBlock))?L.getParent(de.parentNode,L.isBlock):null,Ie=de?de.nodeName.toUpperCase():"","LI"!==(We=he?he.nodeName.toUpperCase():"")||ue||(he=(de=he).parentNode,Ie=We),/^(LI|DT|DD)$/.test(Ie)&&L.isEmpty(de)?(Je=g,ct=he,gt=de,Ge=re,Dt=(Oe=a).dom,xn=Oe.selection.getRng(),ct!==Oe.getBody()&&(Ye=(Ge=Up(Qe=ct)&&Up(Qe.parentNode)?"LI":Ge)?Je(Ge):Dt.create("BR"),Ox(ct,gt,!0)&&Ox(ct,gt,!1)?Nd(ct,"LI")?(et=w0(ct),Dt.insertAfter(Ye,et),(null===(Tt=(sn=ct).parentNode)||void 0===Tt?void 0:Tt.firstChild)===sn?Dt.remove(et):Dt.remove(ct)):Dt.replace(Ye,ct):(Ox(ct,gt,!0)?Nd(ct,"LI")?(Dt.insertAfter(Ye,w0(ct)),Ye.appendChild(Dt.doc.createTextNode(" ")),Ye.appendChild(ct)):ct.parentNode.insertBefore(Ye,ct):Ox(ct,gt,!1)?Dt.insertAfter(Ye,w0(ct)):(ct=w0(ct),(Ct=xn.cloneRange()).setStartAfter(gt),Ct.setEndAfter(ct),en=Ct.extractContents(),"LI"===Ge&&en.firstChild&&"LI"===en.firstChild.nodeName?(Ye=en.firstChild,Dt.insertAfter(en,ct)):(Dt.insertAfter(en,ct),Dt.insertAfter(Ye,ct))),Dt.remove(gt)),Lm(Oe,Ye))):re&&de===a.getBody()||(re=re||"P",al(de)?(A=m(de),L.isEmpty(de)&&u_(de),Px(a,A),Lm(a,A)):v()?x():v(!0)?(A=de.parentNode.insertBefore(g(),de),Lm(a,Ex(de,"HR")?A:de)):((Se=(ve=Z).cloneRange()).setStart(ve.startContainer,S0(!0,ve.startContainer,ve.startOffset)),Se.setEnd(ve.endContainer,S0(!1,ve.endContainer,ve.endOffset)),(C=Se.cloneRange()).setEndAfter(de),E=C.extractContents(),on(Jg(it.fromDom(E),ja),function(Jt){var Xn=Jt.dom;Xn.nodeValue=Ma(Xn.nodeValue)}),function(Jt){for(;In(Jt)&&(Jt.nodeValue=Jt.nodeValue.replace(/^[\r\n]+/,"")),Jt=Jt.firstChild;);}(E),A=E.firstChild,L.insertAfter(E,de),function(Jt,Xn){var Bt,Tn,tn=A,An=[];if(tn){for(;tn=tn.firstChild;){if(Jt.isBlock(tn))return;Mr(tn)&&!Xn[tn.nodeName.toLowerCase()]&&An.push(tn)}for(Bt=An.length;Bt--;)(!(tn=An[Bt]).hasChildNodes()||tn.firstChild===tn.lastChild&&""===tn.firstChild.nodeValue||(Tn=tn)&&"A"===Tn.nodeName&&Jt.isEmpty(Tn))&&Jt.remove(tn)}}(L,V),function(Jt,Xn){Xn.normalize();var Bt=Xn.lastChild;Bt&&!/^(left|right)$/gi.test(Jt.getStyle(Bt,"float",!0))||Jt.add(Xn,"br")}(L,de),L.isEmpty(de)&&u_(de),A.normalize(),L.isEmpty(A)?(L.remove(A),x()):(Px(a,A),Lm(a,A))),L.setAttrib(A,"id",""),a.fire("NewBlock",{newBlock:A})))}(a,d)},Ut)}function Nx(a){return a.stopImmediatePropagation()}function Qw(a){return a.keyCode===mr.PAGE_UP||a.keyCode===mr.PAGE_DOWN}function eS(a,d,g){g&&!a.get()?d.on("NodeChange",Nx,!0):!g&&a.get()&&d.off("NodeChange",Nx),a.set(g)}function f_(a,d){var g=d.container(),v=d.offset();return In(g)?(g.insertData(v,a),H.some(kt(g,v+a.length))):bh(d).map(function(x){var C=it.fromText(a);return(d.isAtEnd()?gs:Ui)(x,C),kt(C.dom,a.length)})}function tS(a){var d,g,v=kt.fromRangeStart(a.selection.getRng()),x=it.fromDom(a.getBody());if(a.selection.isCollapsed()){var C=_e(Tg,a),A=kt.fromRangeStart(a.selection.getRng());return Ed(C,a.getBody(),A).bind((g=x,function(E){return E.fold(function(z){return Uc(g.dom,kt.before(z))},function(z){return Ku(z)},function(z){return rf(z)},function(z){return Pl(g.dom,kt.after(z))})})).bind(function(a,d){return function(g){return C=a,(!Is(A=g)&&(Uc((v=C).dom,x=A).isNone()||Pl(v.dom,x).isNone()||Ih(v,x)||wg(v,x)||bg(v,x)||Ti(v,x)||xs(C,A)||Dh(C,A))?ZC:$C)(d);var v,x,C,A}}(x,v)).exists((d=a,function(E){return d.selection.setRng(E.toRange()),d.nodeChanged(),!0}))}return!1}(qy=kc=kc||{})[qy.Up=-1]="Up",qy[qy.Down=1]="Down";var UC=_e(Em,kc.Up,Xu,Dl),g_=_e(Em,kc.Down,Dl,Xu),k0=qr,Zp=Rf,hf=function(a,d){var g=a.selection.getRng(),v=a.getBody();if(d){var x=kt.fromRangeEnd(g),C=m0(v,x);return dt(C.positions)}return x=kt.fromRangeStart(g),ut((C=Zf(v,x)).positions)},nS=_e(y0,!0),rS=_e(y0,!1),Lx=function(a){return hr(xt(a.selection.getSelectedBlocks(),it.fromDom),function(d){return!Tx(d)&&!Pu(d).exists(Tx)&&Qi(d,function(g){return mu(g.dom)||qr(g.dom)}).exists(function(g){return mu(g.dom)})})},$p=qr,m_=_e(zC,function(a){return a.bottom},function(a,d){return a.y<d}),qC=_e(zC,function(a){return a.top},function(a,d){return a.y>d}),oS=_e(FC,Zf),XC=_e(FC,m0),Bx=function(a,d){return g=kt.after(d),!!_i(g.getNode())||Pl(a,kt.after(d)).map(function(v){return _i(v.getNode())}).getOr(!1);var g},$c=Xl([{br:[]},{block:[]},{none:[]}]),YC=$i().browser,eb=$i(),ZC=_e(f_,Ho),$C=_e(f_," "),hD=(zx.prototype.nodeChanged=function(a){var d,g,v,x=this.editor.selection;this.editor.initialized&&x&&!this.editor.getParam("disable_nodechange")&&!this.editor.mode.isReadOnly()&&(v=this.editor.getBody(),(d=x.getStart(!0)||v).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(d,v)||(d=v),g=[],this.editor.dom.getParent(d,function(C){return C===v||void g.push(C)}),(a=a||{}).element=d,a.parents=g,this.editor.fire("NodeChange",a))},zx.prototype.isSameElementPath=function(a){var d,g=this.editor.$(a).parentsUntil(this.editor.getBody()).add(a);if(g.length===this.lastPath.length){for(d=g.length;0<=d&&g[d]===this.lastPath[d];d--);if(-1===d)return this.lastPath=g,!0}return this.lastPath=g,!1},zx);function zx(a){var d;this.lastPath=[],this.editor=a;var g=this;"onselectionchange"in a.getDoc()||a.on("NodeChange click mouseup keyup focus",function(v){var x=a.selection.getRng(),C={startContainer:x.startContainer,startOffset:x.startOffset,endContainer:x.endContainer,endOffset:x.endOffset};"nodechange"!==v.type&&Hv(C,d)||a.fire("SelectionChange"),d=C}),a.on("contextmenu",function(){a.fire("SelectionChange")}),a.on("SelectionChange",function(){var v=a.selection.getStart(!0);!v||!wr.range&&a.selection.isCollapsed()||Sh(a)&&!g.isSameElementPath(v)&&a.dom.isChildOf(v,a.getBody())&&a.nodeChanged({selectionChange:!0})}),a.on("mouseup",function(v){!v.isDefaultPrevented()&&Sh(a)&&("IMG"===a.selection.getNode().nodeName?Di.setEditorTimeout(a,function(){a.nodeChanged()}):a.nodeChanged())})}function iS(a){return Mr(a)&&br(it.fromDom(a))}function Kp(a){var d=a.getBoundingClientRect(),g=a.ownerDocument,v=g.documentElement,x=g.defaultView;return{top:d.top+x.pageYOffset-v.clientTop,left:d.left+x.pageXOffset-v.clientLeft}}function IM(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Fm(a,d){return vm(a.getBody(),d)}function sS(a){function d(ve){return ve!==ie&&(T0(ve)||zu(ve))&&oe.isChildOf(ve,ie)}function g(ve){return Qv(ve)||_g(ve)||Cm(ve)||Ty(ve)}function v(ve){ve&&ee.setRng(ve)}function x(ve,Se,Oe,Je){return void 0===Je&&(Je=!0),a.fire("ShowCaret",{target:Se,direction:ve,before:Oe}).isDefaultPrevented()?null:(Je&&ee.scrollIntoView(Se,-1===ve),ue.show(Oe,Se))}function C(ve){return ua(ve)||Ls(ve)||pa(ve)}function A(ve){return C(ve.startContainer)||C(ve.endContainer)}function E(ve,Se){if(!ve)return null;if(ve.collapsed){if(!A(ve)){var Oe=Se?1:-1,Je=ug(Oe,ie,ve),ct=Je.getNode(!Se);if(Qd(ct))return x(Oe,ct,!!Se&&!Je.isAtEnd(),!1);var gt=Je.getNode(Se);if(Qd(gt))return x(Oe,gt,!Se&&!Je.isAtEnd(),!1)}return null}var Ge=ve.startContainer,Qe=ve.startOffset,Ye=ve.endOffset;if(3===Ge.nodeType&&0===Qe&&T0(Ge.parentNode)&&(Qe=oe.nodeIndex(Ge=Ge.parentNode),Ge=Ge.parentNode),1!==Ge.nodeType)return null;if(Ye===Qe+1&&Ge===ve.endContainer){var et=Ge.childNodes[Qe];if(d(et))return function(Ct){var en=Ct.cloneNode(!0),sn=a.fire("ObjectSelected",{target:Ct,targetClone:en});if(sn.isDefaultPrevented())return null;var Tt=function(xn,bn,Jt){var Xn=a.$,Bt=sd(it.fromDom(a.getBody()),"#"+de).fold(function(){return Xn([])},function(An){return Xn([An.dom])});0===Bt.length&&(Bt=Xn('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",de)).appendTo(a.getBody());var Tn=oe.createRng();bn===Jt&&wr.ie?(Bt.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(bn),Tn.setStartAfter(Bt[0].firstChild.firstChild),Tn.setEndAfter(bn)):(Bt.empty().append(Ho).append(bn).append(Ho),Tn.setStart(Bt[0].firstChild,1),Tn.setEnd(Bt[0].lastChild,0)),Bt.css({top:oe.getPos(xn,a.getBody()).y}),Bt[0].focus();var tn=ee.getSel();return tn.removeAllRanges(),tn.addRange(Tn),Tn}(Ct,sn.targetClone,en),Dt=it.fromDom(Ct);return on(xu(it.fromDom(a.getBody()),"*[data-mce-selected]"),function(xn){$t(Dt,xn)||Rc(xn,he)}),oe.getAttrib(Ct,he)||Ct.setAttribute(he,"1"),L=Ct,We(),Tt}(et)}return null}function z(){L&&L.removeAttribute(he),sd(it.fromDom(a.getBody()),"#"+de).each(Sr),L=null}var L,U,V,Z,ee=a.selection,oe=a.dom,re=oe.isBlock,ie=a.getBody(),ue=function(a,d,g,v){function x(){(function(){for(var U=xu(it.fromDom(d),"*[contentEditable=false],video,audio,embed,object"),V=0;V<U.length;V++){var Z,ee=U[V].dom,oe=ee.previousSibling;pa(oe)&&(1===(Z=oe.data).length?oe.parentNode.removeChild(oe):oe.deleteData(Z.length-1,1)),Ls(oe=ee.nextSibling)&&(1===(Z=oe.data).length?oe.parentNode.removeChild(oe):oe.deleteData(0,1))}})(),A&&(tf(A),A=null),E.on(function(U){Gr(U.caret).remove(),E.clear()}),C&&(Di.clearInterval(C),C=void 0)}var C,A,E=Hs(),z=Ba(a),L=0<z.length?z:"p";return{show:function(U,V){var Z;if(x(),Lf(V))return null;if(!g(V))return A=function(re,ie){var ue=re.ownerDocument.createTextNode(Io),de=re.parentNode;if(ie){if(vu(he=re.previousSibling)){if(ua(he))return he;if(pa(he))return he.splitText(he.data.length-1)}de.insertBefore(ue,re)}else{var he=re.nextSibling;if(vu(he)){if(ua(he))return he;if(Ls(he))return he.splitText(1),he}re.nextSibling?de.insertBefore(ue,re.nextSibling):de.appendChild(ue)}return ue}(V,U),Z=V.ownerDocument.createRange(),No(A.nextSibling)?(Z.setStart(A,0),Z.setEnd(A,0)):(Z.setStart(A,1),Z.setEnd(A,1)),Z;A=function(re,ie,ue){var de,he=ie.ownerDocument.createElement(re);he.setAttribute("data-mce-caret",ue?"before":"after"),he.setAttribute("data-mce-bogus","all"),he.appendChild(((de=document.createElement("br")).setAttribute("data-mce-bogus","1"),de));var Ie=ie.parentNode;return ue?Ie.insertBefore(he,ie):ie.nextSibling?Ie.insertBefore(he,ie.nextSibling):Ie.appendChild(he),he}(L,V,U);var ee=l1(d,V,U);Gr(A).css("top",ee.top);var oe=Gr('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(yn({},ee)).appendTo(d)[0];return E.set({caret:oe,element:V,before:U}),U&&Gr(oe).addClass("mce-visual-caret-before"),C=Di.setInterval(function(){v()?Gr("div.mce-visual-caret",d).toggleClass("mce-visual-caret-hidden"):Gr("div.mce-visual-caret",d).addClass("mce-visual-caret-hidden")},500),(Z=V.ownerDocument.createRange()).setStart(A,0),Z.setEnd(A,0),Z},hide:x,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){E.on(function(U){var V=l1(d,U.element,U.before);Gr(U.caret).css(yn({},V))})},destroy:function(){return Di.clearInterval(C)}}}(a,ie,re,function(){return Oa(a)}),de="sel-"+oe.uniqueId(),he="data-mce-selected",Ie=ee.getRng,We=function(){ue.hide()};return wr.ceFalse&&!Uf(a)&&(a.on("mouseup",function(ve){var Se=Ie();Se.collapsed&&xw(a,ve.clientX,ve.clientY)&&Am(a,Se,!1).each(v)}),a.on("click",function(ve){var Se=Fm(a,ve.target);Se&&(T0(Se)&&(ve.preventDefault(),a.focus()),nb(Se)&&oe.isChildOf(Se,ee.getNode())&&z())}),a.on("blur NewBlock",z),a.on("ResizeWindow FullscreenStateChanged",ue.reposition),a.on("tap",function(ve){var Se=ve.target,Oe=Fm(a,Se);T0(Oe)?(ve.preventDefault(),Yf(a,Oe).each(E)):d(Se)&&Yf(a,Se).each(E)},!0),a.on("mousedown",function(ve){var Se,Oe,Je,ct,gt,Ge,Qe,Ye=ve.target;Ye!==ie&&"HTML"!==Ye.nodeName&&!oe.isChildOf(Ye,ie)||!1===xw(a,ve.clientX,ve.clientY)||((Se=Fm(a,Ye))?T0(Se)?(ve.preventDefault(),Yf(a,Se).each(E)):(z(),nb(Se)&&ve.shiftKey||Kr(ve.clientX,ve.clientY,ee.getRng())||(We(),ee.placeCaretAt(ve.clientX,ve.clientY))):d(Ye)?Yf(a,Ye).each(E):!1===Qd(Ye)&&(z(),We(),(Oe=function(a,d,g){function v(L){return!Ca(L.node)&&!zu(L.node)}var x,C,A,E=Uy(hr(fi(a.getElementsByTagName("*")),Qd));return(A=_a(hr(E,_e(NC,g)),d,v))&&(A=_a(function(L,U,V){function Z(oe,re){var ie=hr(Uy([re]),function(ue){return!oe(ue,U)});return ee=ee.concat(ie),0===ie.length}void 0===V&&(V=!0);var ee=[];return ee.push(U),J1(kc.Up,L,_e(Z,Xu),U.node,V),J1(kc.Down,L,_e(Z,Dl),U.node,V),ee}(a,A,v(A)),d,v))&&Qd(A.node)?{node:(x=A).node,before:Zy(x,C=d)<Hw(x,C)}:null}(ie,ve.clientX,ve.clientY))&&(ct=Oe.node,Ge=oe.getParent(Je=Ye,re),Qe=oe.getParent(ct,re),!En(Ge)&&(Je!==Qe&&oe.isChildOf(Ge,Qe)&&!1===T0(Fm(a,Ge))||!oe.isChildOf(Qe,Ge)&&(gt=Qe,oe.getParent(Ge,re)!==oe.getParent(gt,re))&&function(et){var Ct=et.firstChild;if(!En(Ct)){var en=kt.before(Ct);if(_i(en.getNode())&&1===et.childNodes.length)return!g(en);var sn=Zu(et).next(en);return sn&&!g(sn)}}(Ge))||(ve.preventDefault(),v(x(1,Oe.node,Oe.before,!1)),a.getBody().focus()))))}),a.on("keypress",function(ve){mr.modifierPressed(ve)||T0(ee.getNode())&&ve.preventDefault()}),a.on("GetSelectionRange",function(ve){var Se=ve.range;L&&(L.parentNode?((Se=Se.cloneRange()).selectNode(L),ve.range=Se):L=null)}),a.on("SetSelectionRange",function(ve){var Se,Oe,Je,ct,gt,Ge,Qe;ve.range=(Se=ve.range,Oe=a.schema.getShortEndedElements(),Je=oe.createRng(),gt=Se.startOffset,Ge=Se.endContainer,Qe=Se.endOffset,ao(Oe,(ct=Se.startContainer).nodeName.toLowerCase())?0===gt?Je.setStartBefore(ct):Je.setStartAfter(ct):Je.setStart(ct,gt),ao(Oe,Ge.nodeName.toLowerCase())?0===Qe?Je.setEndBefore(Ge):Je.setEndAfter(Ge):Je.setEnd(Ge,Qe),Je);var Ye=E(ve.range,ve.forward);Ye&&(ve.range=Ye)}),a.on("AfterSetSelectionRange",function(ve){var Se=ve.range,Oe=Se.startContainer.parentNode;A(Se)||"mcepastebin"===Oe.id||We(),oe.hasClass(Oe,"mce-offscreen-selection")||z()}),a.on("copy",function(ve){var Se,Oe,Je=ve.clipboardData;ve.isDefaultPrevented()||!ve.clipboardData||wr.ie||(Se=(Oe=oe.get(de))&&Oe.getElementsByTagName("*")[0])&&(ve.preventDefault(),Je.clearData(),Je.setData("text/html",Se.outerHTML),Je.setData("text/plain",Se.outerText||Se.innerText))}),function(a){var d,g;function v(A){var E;A.isDefaultPrevented()||(E=A.dataTransfer)&&(Mt(E.types,"Files")||0<E.files.length)&&(A.preventDefault(),"drop"===A.type&&Op(g,"Dropped file type is not supported"))}function x(A){Kn(g,A.target)&&v(A)}function C(){var A=ci.DOM,E=g.dom,z=document,L=g.inline?g.getBody():g.getDoc(),U=["drop","dragover"];on(U,function(V){A.bind(z,V,x),E.bind(L,V,v)}),g.on("remove",function(){on(U,function(V){A.unbind(z,V,x),E.unbind(L,V,v)})})}(function(a){var v,x,C,A,E,z,L=Hs(),U=ci.DOM,V=document,Z=function(a,d){var g=Di.throttle(function(v,x){d._selectionOverrides.hideFakeCaret(),d.selection.placeCaretAt(v,x)},0);return d.on("remove",g.stop),function(v){return a.on(function(x){var C,A,E,z,L,U,V,Z,ee,oe,re,ie,ue,de,he,Ie,We,ve,Se,Oe,Je=Math.max(Math.abs(v.screenX-x.screenX),Math.abs(v.screenY-x.screenY));if(!x.dragging&&10<Je){if(d.fire("dragstart",{target:x.element}).isDefaultPrevented())return;x.dragging=!0,d.focus()}x.dragging&&(ie=x,C={pageX:(he=v,Ie=(de=d).inline?Kp(de.getBody()):{left:0,top:0},Oe=(Se=de).getBody(),We=Se.inline?{left:Oe.scrollLeft,top:Oe.scrollTop}:{left:0,top:0},(ue={pageX:(ve=function(ct,gt){if(gt.target.ownerDocument===ct.getDoc())return{left:gt.pageX,top:gt.pageY};var Ge,Qe,Ye,en=Kp(ct.getContentAreaContainer()),sn=(Qe=(Ge=ct).getBody(),Ye=Ge.getDoc().documentElement,Ge.inline?{left:Qe.scrollLeft,top:Qe.scrollTop}:{left:Qe.scrollLeft||Ye.scrollLeft,top:Qe.scrollTop||Ye.scrollTop});return{left:gt.pageX-en.left+sn.left,top:gt.pageY-en.top+sn.top}}(de,he)).left-Ie.left+We.left,pageY:ve.top-Ie.top+We.top}).pageX-ie.relX),pageY:ue.pageY+5},oe=x.ghost,re=d.getBody(),oe.parentNode!==re&&re.appendChild(oe),z=x.width,L=x.height,U=x.maxX,V=x.maxY,ee=Z=0,(A=x.ghost).style.left=(E=C).pageX+"px",A.style.top=E.pageY+"px",V<E.pageY+L&&(ee=E.pageY+L-V),A.style.width=z-(Z=U<E.pageX+z?E.pageX+z-U:Z)+"px",A.style.height=L-ee+"px",g(v.clientX,v.clientY))})}}(E=L,z=a),ee=(v=C=L,function(){v.on(function(oe){oe.dragging&&x.fire("dragend")}),LM(v)});(x=A=a).on("mousedown",function(oe){var re,ie,ue,de,he,Ie;0===oe.button&&(re=gi(z.dom.getParents(oe.target),function(){for(var We=[],ve=0;ve<arguments.length;ve++)We[ve]=arguments[ve];return function(Se){for(var Oe=0;Oe<We.length;Oe++)if(We[Oe](Se))return!0;return!1}}(cS,NM)).getOr(null),he=z.getBody(),cS(Ie=re)&&Ie!==he&&(ie=z.dom.getPos(re),ue=z.getBody(),de=z.getDoc().documentElement,E.set({element:re,dragging:!1,screenX:oe.screenX,screenY:oe.screenY,maxX:(z.inline?ue.scrollWidth:de.offsetWidth)-2,maxY:(z.inline?ue.scrollHeight:de.offsetHeight)-2,relX:oe.pageX-ie.x,relY:oe.pageY-ie.y,width:re.offsetWidth,height:re.offsetHeight,ghost:function(We,ve,Se){var Oe=z.dom,Je=We.cloneNode(!0);Oe.setStyles(Je,{width:ve,height:Se}),Oe.setAttrib(Je,"data-mce-selected",null);var ct=Oe.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return Oe.setStyles(ct,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:ve,height:Se}),Oe.setStyles(Je,{margin:0,boxSizing:"border-box"}),ct.appendChild(Je),ct}(re,re.offsetWidth,re.offsetHeight)})))}),a.on("mousemove",Z),a.on("mouseup",function(oe){C.on(function(re){var ie,ue,de,he,Ie,We;re.dragging&&((he=3===(We=(de=A).selection.getSel().getRangeAt(0).startContainer).nodeType?We.parentNode:We)===(Ie=re.element)||de.dom.isChildOf(he,Ie)||cS(he)||((ue=re.element.cloneNode(!0)).removeAttribute("data-mce-selected"),ie=ue,A.fire("drop",{clientX:oe.clientX,clientY:oe.clientY}).isDefaultPrevented()||A.undoManager.transact(function(){IM(re.element),A.insertContent(A.dom.getOuterHTML(ie)),A._selectionOverrides.hideFakeCaret()})),A.fire("dragend"))}),LM(C)}),U.bind(V,"mousemove",Z),U.bind(V,"mouseup",ee),a.on("remove",function(){U.unbind(V,"mousemove",Z),U.unbind(V,"mouseup",ee)}),a.on("keydown",function(oe){oe.keyCode===mr.ESC&&ee()})})(a),(d=a).on("drop",function(A){var E=void 0!==A.clientX?d.getDoc().elementFromPoint(A.clientX,A.clientY):null;!cS(E)&&"false"!==d.dom.getContentEditableParent(E)||A.preventDefault()}),a.getParam("block_unsupported_drop",!0,"boolean")&&(g=a).on("init",function(){Di.setEditorTimeout(g,C,0)})}(a),V=If(function(){var ve,Se;U.removed||!U.getBody().contains(document.activeElement)||(ve=U.selection.getRng()).collapsed&&(Se=Dg(U,ve,!1),U.selection.setRng(Se))},0),(U=a).on("focus",function(){V.throttle()}),U.on("blur",function(){V.cancel()}),(Z=a).on("init",function(){Z.on("focusin",function(ve){var Se,Oe,Je=ve.target;zu(Je)&&(Se=vm(Z.getBody(),Je),Oe=qr(Se)?Se:Je,Z.selection.getNode()!==Oe&&Yf(Z,Oe).each(function(ct){return Z.selection.setRng(ct)}))})})),{showCaret:x,showBlockCaretContainer:function(ve){ve.hasAttribute("data-mce-caret")&&(m(ve),v(Ie()),ee.scrollIntoView(ve))},hideFakeCaret:We,destroy:function(){ue.destroy(),L=null}}}function KC(a){return Lr(a,function(d){return!1===Er(d)})}function gf(a){var d=a.settings,g=a.editorUpload.blobCache;return KC({allow_conditional_comments:d.allow_conditional_comments,allow_html_data_urls:d.allow_html_data_urls,allow_svg_data_urls:d.allow_svg_data_urls,allow_html_in_named_anchor:d.allow_html_in_named_anchor,allow_script_urls:d.allow_script_urls,allow_unsafe_link_target:d.allow_unsafe_link_target,convert_fonts_to_spans:d.convert_fonts_to_spans,fix_list_elements:d.fix_list_elements,font_size_legacy_values:d.font_size_legacy_values,forced_root_block:d.forced_root_block,forced_root_block_attrs:d.forced_root_block_attrs,padd_empty_with_br:d.padd_empty_with_br,preserve_cdata:d.preserve_cdata,remove_trailing_brs:d.remove_trailing_brs,inline_styles:d.inline_styles,root_name:a.inline?a.getElement().nodeName.toLowerCase():void 0,validate:!0,blob_cache:g,document:a.getDoc(),images_dataimg_filter:d.images_dataimg_filter})}function uS(a){return(a.inline?a.ui:a.dom).styleSheetLoader}function JC(a){function d(){x.unloadAll(A),a.inline||a.ui.styleSheetLoader.unloadAll(C)}function g(){a.removed?d():a.on("remove",d)}var v,x=uS(a),C=ny(a),A=a.contentCSS;0<a.contentStyles.length&&(v="",At.each(a.contentStyles,function(ue){v+=ue+"\r\n"}),a.dom.addStyle(v));var E,z,L,U,V,Z,ee,oe,re,ie=qe.all((E=a,z=A,L=C,U=[new qe(function(ue,de){return uS(E).loadAll(z,ue,de)})],E.inline?U:U.concat([new qe(function(ue,de){return E.ui.styleSheetLoader.loadAll(L,ue,de)})]))).then(g).catch(g);return a.settings.content_style&&(Z=(V=a).settings.content_style,ee=it.fromDom(V.getBody()),oe=pi(Ki(ee)),Sl(re=it.fromTag("style"),"type","text/css"),Ua(re,it.fromText(Z)),Ua(oe,re),V.on("remove",function(){Sr(re)})),ie}function Fx(a){var d;!0!==a.removed&&(Uf(d=a)||d.load({initial:!0,format:"html"}),d.startContent=d.getContent({format:"raw"}),function(a){var d,g,v;a.bindPendingEventDelegates(),a.initialized=!0,a.fire("Init"),a.focus(!0),v=(g=a).dom.getRoot(),g.inline||Sh(g)&&g.selection.getStart(!0)!==v||Ku(v).each(function(x){var C,A,E,z,L=x.getNode(),U=Ca(L)?Ku(L).getOr(x):x;wr.browser.isIE()?(C=g,A=U.toRange(),E=it.fromDom(C.getBody()),z=(ho(C)?H.from(A):H.none()).map(Wb).filter(As(E)),C.bookmark=z.isSome()?z:C.bookmark):g.selection.setRng(U.toRange())}),a.nodeChanged({initial:!0}),a.execCallback("init_instance_callback",a),(d=a).settings.auto_focus&&Di.setEditorTimeout(d,function(){var x=!0===d.settings.auto_focus?d:d.editorManager.get(d.settings.auto_focus);x.destroyed||x.focus()},100)}(a))}function Vx(a,d){var g=a.settings,v=a.getElement(),x=a.getDoc();g.inline||(a.getElement().style.visibility=a.orgVisibility),d||a.inline||(x.open(),x.write(a.iframeHTML),x.close()),a.inline&&(dS.addClass(v,"mce-content-body"),a.contentDocument=x=document,a.contentWindow=window,a.bodyElement=v,a.contentAreaContainer=v);var C,A,E,z,L,U,V,Z,ee,oe,re,ie=a.getBody();ie.disabled=!0,a.readonly=!!g.readonly,a.readonly||(a.inline&&"static"===dS.getStyle(ie,"position",!0)&&(ie.style.position="relative"),ie.contentEditable=a.getParam("content_editable_state",!0)),ie.disabled=!1,a.editorUpload=function(a){function d(de){return function(he){return a.selection?de(he):[]}}function g(de,he,Ie){for(var We=0;-1!==(We=de.indexOf(he,We))&&(de=de.substring(0,We)+Ie+de.substr(We+he.length),We+=Ie.length-he.length+1),-1!==We;);return de}function v(de,he,Ie){return de=g(de,'src="'+he+'"','src="'+Ie+'"'+(Ie===wr.transparentSrc?' data-mce-placeholder="1"':"")),g(de,'data-mce-src="'+he+'"','data-mce-src="'+Ie+'"')}function x(de,he){on(a.undoManager.data,function(Ie){"fragmented"===Ie.type?Ie.fragments=xt(Ie.fragments,function(We){return v(We,de,he)}):Ie.content=v(Ie.content,de,he)})}function C(de){return L=L||Mw(a,oe),ue().then(d(function(he){var Ie=xt(he,function(We){return We.blobInfo});return L.upload(Ie,kw(a)).then(d(function(We){var ve=[],Se=xt(We,function(Oe,Je){var gt,Ge,Qe,Ye=he[Je].blobInfo,et=he[Je].image;return Oe.status&&a.getParam("images_replace_blob_uris",!0,"boolean")?(ee.removeByUri(et.src),Uf(a)||(gt=et,Qe=a.convertURL(Ge=Oe.url,"src"),x(gt.src,Ge),a.$(gt).attr({src:a.getParam("images_reuse_filename",!1,"boolean")?Ge+(-1===Ge.indexOf("?")?"?":"&")+(new Date).getTime():Ge,"data-mce-src":Qe}))):Oe.error&&(Oe.error.options.remove&&(x(et.getAttribute("src"),wr.transparentSrc),ve.push(et)),Op(a,fl.translate(["Failed to upload image: {0}",Oe.error.message]))),{element:et,status:Oe.status,uploadUri:Oe.url,blobInfo:Ye}});return 0<Se.length&&ie.fireIfChanged(),0<ve.length&&(Uf(a)?console.error("Removing images on failed uploads is currently unsupported for RTC"):a.undoManager.transact(function(){on(ve,function(Oe){a.dom.remove(Oe),ee.removeByUri(Oe.src)})})),de&&de(Se),Se}))}))}function A(de){if(ty(a))return C(de)}function E(de){return!1!==sr(re,function(he){return he(de)})&&(0!==de.getAttribute("src").indexOf("data:")||a.getParam("images_dataimg_filter",ro,"function")(de))}function z(de){return de.replace(/src="(blob:[^"]+)"/g,function(he,Ie){var We=oe.getResultUri(Ie);if(We)return'src="'+We+'"';var ve=(ve=ee.getByUri(Ie))||Dr(a.editorManager.get(),function(Se,Oe){return Se||Oe.editorUpload&&Oe.editorUpload.blobCache.getByUri(Ie)},null);return ve?'src="data:'+ve.blob().type+";base64,"+ve.base64()+'"':he})}var L,U,V,Z,ee=function(){function a(x){return gi(v,x).getOrUndefined()}function d(x){if(!x.blob||!x.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var C=x.id||U1("blobid"),A=x.name||C,E=x.blob;return{id:Zt(C),name:Zt(A),filename:Zt(x.filename||A+"."+({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[E.type.toLowerCase()]||"dat")),blob:Zt(E),base64:Zt(x.base64),blobUri:Zt(x.blobUri||URL.createObjectURL(E)),uri:Zt(x.uri)}}function g(x){return a(function(C){return C.id()===x})}var v=[];return{create:function(x,C,A,E,z){if(xr(x))return d({id:x,name:E,filename:z,blob:C,base64:A});if(Fn(x))return d(x);throw new Error("Unknown input type")},add:function(x){g(x.id())||v.push(x)},get:g,getByUri:function(x){return a(function(C){return C.blobUri()===x})},getByData:function(x,C){return a(function(A){return A.base64()===x&&A.blob().type===C})},findFirst:a,removeByUri:function(x){v=hr(v,function(C){return C.blobUri()!==x||void URL.revokeObjectURL(C.blobUri())})},destroy:function(){on(v,function(x){URL.revokeObjectURL(x.blobUri())}),v=[]}}}(),oe=u0(),re=[],ie=(Z=vi(null),(V=a).on("change AddUndo",function(de){Z.set(yn({},de.level))}),{fireIfChanged:function(){var de=V.undoManager.data;dt(de).filter(function(he){return!Ey(Z.get(),he)}).each(function(he){V.setDirty(!0),V.fire("change",{level:he,lastLevel:Ps(de,de.length-2).getOrNull()})})}}),ue=function(){return(U=U||function(a,d){var g={};return{findAll:function(v,x){x=x||ro;var C=xt(hr(v?fi(v.getElementsByTagName("img")):[],function(A){var E=A.src;return wr.fileApi&&!A.hasAttribute("data-mce-bogus")&&!A.hasAttribute("data-mce-placeholder")&&E&&E!==wr.transparentSrc&&(0===E.indexOf("blob:")?!a.isUploaded(E)&&x(A):0===E.indexOf("data:")&&x(A))}),function(A){if(void 0!==g[A.src])return new qe(function(z){g[A.src].then(function(L){return"string"==typeof L?L:void z({image:A,blobInfo:L.blobInfo})})});var E=new qe(function(z,L){var U,V,Z,ee,oe,re,ue,de;U=d,Z=z,ee=L,0!==(V=A).src.indexOf("blob:")?(re=(oe=Ny(V.src)).data,(de=U.getByData(ue=re,oe.type))?Z({image:V,blobInfo:de}):df(V.src).then(function(he){de=U.create(r0(),he,ue),U.add(de),Z({image:V,blobInfo:de})},function(he){ee(he)})):(de=U.getByUri(V.src))?Z({image:V,blobInfo:de}):df(V.src).then(function(he){var Ie=he;new qe(function(We){var ve=new FileReader;ve.onloadend=function(){We(ve.result)},ve.readAsDataURL(Ie)}).then(function(We){ue=Ny(We).data,de=U.create(r0(),he,ue),U.add(de),Z({image:V,blobInfo:de})})},function(he){ee(he)})}).then(function(z){return delete g[z.image.src],z}).catch(function(z){return delete g[A.src],z});return g[A.src]=E});return qe.all(C)}}}(oe,ee)).findAll(a.getBody(),E).then(d(function(de){return de=hr(de,function(he){return"string"!=typeof he||void Op(a,he)}),Uf(a)||on(de,function(he){x(he.image.src,he.blobInfo.blobUri()),he.image.src=he.blobInfo.blobUri(),he.image.removeAttribute("data-mce-src")}),de}))};return a.on("SetContent",function(){(ty(a)?A:ue)()}),a.on("RawSaveContent",function(de){de.content=z(de.content)}),a.on("GetContent",function(de){de.source_view||"raw"===de.format||"tree"===de.format||(de.content=z(de.content))}),a.on("PostRender",function(){a.parser.addNodeFilter("img",function(de){on(de,function(he){var Ie,We=he.attr("src");ee.getByUri(We)||(Ie=oe.getResultUri(We))&&he.attr("src",Ie)})})}),{blobCache:ee,addFilter:function(de){re.push(de)},uploadImages:C,uploadImagesAuto:A,scanForImages:ue,destroy:function(){ee.destroy(),oe.destroy(),U=L=null}}}(a),a.schema=Xe(g),a.dom=ci(x,{keep_values:!0,url_converter:a.convertURL,url_converter_scope:a,hex_colors:g.force_hex_style_colors,update_styles:!0,root_element:a.inline?a.getBody():null,collect:function(){return a.inline},schema:a.schema,contentCssCors:a.getParam("content_css_cors",!1,"boolean"),referrerPolicy:tm(a),onSetAttrib:function(Ge){a.fire("SetAttrib",Ge)}}),a.parser=((A=B1(gf(C=a),C.schema)).addAttributeFilter("src,href,style,tabindex",function(Ge,Qe){for(var Ye,et,Ct=Ge.length,en=C.dom,sn="data-mce-"+Qe;Ct--;)(et=(Ye=Ge[Ct]).attr(Qe))&&!Ye.attr(sn)&&0!==et.indexOf("data:")&&0!==et.indexOf("blob:")&&("style"===Qe?((et=en.serializeStyle(en.parseStyle(et),Ye.name)).length||(et=null),Ye.attr(sn,et),Ye.attr(Qe,et)):"tabindex"===Qe?(Ye.attr(sn,et),Ye.attr(Qe,null)):Ye.attr(sn,C.convertURL(et,Qe,Ye.name)))}),A.addNodeFilter("script",function(Ge){for(var Qe=Ge.length;Qe--;){var Ye=Ge[Qe],et=Ye.attr("type")||"no/type";0!==et.indexOf("mce-")&&Ye.attr("type","mce-"+et)}}),C.settings.preserve_cdata&&A.addNodeFilter("#cdata",function(Ge){for(var Qe=Ge.length;Qe--;){var Ye=Ge[Qe];Ye.type=8,Ye.name="#comment",Ye.value="[CDATA["+C.dom.encode(Ye.value)+"]]"}}),A.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(Ge){for(var Qe=Ge.length,Ye=C.schema.getNonEmptyElements();Qe--;){var et=Ge[Qe];et.isEmpty(Ye)&&0===et.getAll("br").length&&(et.append(new se("br",1)).shortEnded=!0)}}),A),a.serializer=yw((E=a.settings,yn(yn({},gf(a)),KC({url_converter:E.url_converter,url_converter_scope:E.url_converter_scope,element_format:E.element_format,entities:E.entities,entity_encoding:E.entity_encoding,indent:E.indent,indent_after:E.indent_after,indent_before:E.indent_before,block_elements:E.block_elements,boolean_attributes:E.boolean_attributes,custom_elements:E.custom_elements,extended_valid_elements:E.extended_valid_elements,invalid_elements:E.invalid_elements,invalid_styles:E.invalid_styles,move_caret_before_on_enter_elements:E.move_caret_before_on_enter_elements,non_empty_elements:E.non_empty_elements,schema:E.schema,self_closing_elements:E.self_closing_elements,short_ended_elements:E.short_ended_elements,special:E.special,text_block_elements:E.text_block_elements,text_inline_elements:E.text_inline_elements,valid_children:E.valid_children,valid_classes:E.valid_classes,valid_elements:E.valid_elements,valid_styles:E.valid_styles,verify_html:E.verify_html,whitespace_elements:E.whitespace_elements}))),a),a.selection=N1(a.dom,a.getWin(),a.serializer,a),a.annotator=Nb(a),a.formatter=vM(a),a.undoManager=fx(a),a._nodeChangeDispatcher=new hD(a),a._selectionOverrides=sS(a),Z=a,ee=Hs(),oe=vi(!1),re=bd(function(Ge){Z.fire("longpress",yn(yn({},Ge),{type:"longpress"})),oe.set(!0)},400),Z.on("touchstart",function(Ge){n_(Ge).each(function(Qe){re.cancel();var Ye={x:Qe.clientX,y:Qe.clientY,target:Ge.target};re.throttle(Ge),oe.set(!1),ee.set(Ye)})},!0),Z.on("touchmove",function(Ge){re.cancel(),n_(Ge).each(function(Qe){ee.on(function(Ye){var et=Qe,Ct=Ye,en=Math.abs(et.clientX-Ct.x),sn=Math.abs(et.clientY-Ct.y);(5<en||5<sn)&&(ee.clear(),oe.set(!1),Z.fire("longpresscancel"))})})},!0),Z.on("touchend touchcancel",function(Ge){re.cancel(),"touchcancel"!==Ge.type&&ee.get().filter(function(Qe){return Qe.target.isEqualNode(Ge.target)}).each(function(){oe.get()?Ge.preventDefault():Z.fire("tap",yn(yn({},Ge),{type:"tap"}))})},!0),(U=L=a).on("click",function(Ge){U.dom.getParent(Ge.target,"details")&&Ge.preventDefault()}),(V=L).parser.addNodeFilter("details",function(Ge){on(Ge,function(Qe){Qe.attr("data-mce-open",Qe.attr("open")),Qe.attr("open","open")})}),V.serializer.addNodeFilter("details",function(Ge){on(Ge,function(Qe){var Ye=Qe.attr("data-mce-open");Qe.attr("open",xr(Ye)?Ye:null),Qe.attr("data-mce-open",null)})}),Uf(a)||(z=a).on("click",function(Ge){var Qe,Ye,et,Ct,en;3<=Ge.detail&&(et=(Qe=z).selection.getRng(),Ct=kt.fromRangeStart(et),en=kt.fromRangeEnd(et),!kt.isElementPosition(Ct)||iS(Ye=Ct.container())&&Ku(Ye).each(function(sn){return et.setStart(sn.container(),sn.offset())}),!kt.isElementPosition(en)||iS(Ye=Ct.container())&&rf(Ye).each(function(sn){return et.setEnd(sn.container(),sn.offset())}),Qe.selection.setRng(Sy(et)))});var ue,de,he,Ie,We,ve,Se,Oe,Je,ct=Uf(ue=a)?vi(null):function(a){var d,g,v,x,C,A,E,z,L,U,V,Z,ee,oe,re=function(a){var d=vi(null),g=_e(Tg,a);return a.on("NodeChange",function(v){var x,C,A,E,z,U,V,Z,ee,oe,re,ie;!vh(a)||wr.browser.isIE()&&v.initial||(z=g,U=v.parents,on(ds(V=hr(xt(xu(it.fromDom(a.dom.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(ue){return ue.dom}),z),Z=hr(U,z)),_e(Gw,!1)),on(ds(Z,V),_e(Gw,!0)),oe=d,(ee=a).selection.isCollapsed()&&!0!==ee.composing&&oe.get()&&(re=kt.fromRangeStart(ee.selection.getRng()),kt.isTextPosition(re)&&!1===(Yl(ie=re)||mc(ie))&&(Q1(ee,_v(oe.get(),re)),oe.set(null))),x=g,A=d,E=v.parents,(C=a).selection.isCollapsed()&&on(hr(E,x),function(ue){var de=kt.fromRangeStart(C.selection.getRng());Ed(x,C.getBody(),de).bind(function(he){return Bp(C,A,he)})}))}),d}(a);return a.on("keyup compositionstart",_e(Hp,a)),oe=re,(ee=a).on("keydown",function(ie){var ue,de,he,Ie;!1===ie.isDefaultPrevented()&&(ue=ee,de=oe,he=ie,Ie=$i().os,Nm([{keyCode:mr.RIGHT,action:yo(Jf,ue,!0)},{keyCode:mr.LEFT,action:yo(Jf,ue,!1)},{keyCode:mr.UP,action:yo(Uw,ue,!1)},{keyCode:mr.DOWN,action:yo(Uw,ue,!0)},{keyCode:mr.RIGHT,action:yo(Ix,ue,!0)},{keyCode:mr.LEFT,action:yo(Ix,ue,!1)},{keyCode:mr.UP,action:yo(jp,ue,!1)},{keyCode:mr.DOWN,action:yo(jp,ue,!0)},{keyCode:mr.RIGHT,action:yo(a_,ue,!0)},{keyCode:mr.LEFT,action:yo(a_,ue,!1)},{keyCode:mr.UP,action:yo(Xw,ue,!1)},{keyCode:mr.DOWN,action:yo(Xw,ue,!0)},{keyCode:mr.RIGHT,action:yo(jw,ue,de,!0)},{keyCode:mr.LEFT,action:yo(jw,ue,de,!1)},{keyCode:mr.RIGHT,ctrlKey:!Ie.isOSX(),altKey:Ie.isOSX(),action:yo(nS,ue,de)},{keyCode:mr.LEFT,ctrlKey:!Ie.isOSX(),altKey:Ie.isOSX(),action:yo(rS,ue,de)},{keyCode:mr.UP,action:yo(Gp,ue,!1)},{keyCode:mr.DOWN,action:yo(Gp,ue,!0)}],he).each(function(We){he.preventDefault()}))}),Z=re,(V=a).on("keydown",function(ie){var ue,de,he;!1===ie.isDefaultPrevented()&&(de=Z,he=ie,Nm([{keyCode:mr.BACKSPACE,action:yo(Vp,ue=V,!1)},{keyCode:mr.BACKSPACE,action:yo(Y1,ue,!1)},{keyCode:mr.DELETE,action:yo(Y1,ue,!0)},{keyCode:mr.BACKSPACE,action:yo(X1,ue,!1)},{keyCode:mr.DELETE,action:yo(X1,ue,!0)},{keyCode:mr.BACKSPACE,action:yo(Lh,ue,de,!1)},{keyCode:mr.DELETE,action:yo(Lh,ue,de,!0)},{keyCode:mr.BACKSPACE,action:yo(Us,ue,!1)},{keyCode:mr.DELETE,action:yo(Us,ue,!0)},{keyCode:mr.BACKSPACE,action:yo(px,ue,!1)},{keyCode:mr.DELETE,action:yo(px,ue,!0)},{keyCode:mr.BACKSPACE,action:yo(Pm,ue,!1)},{keyCode:mr.DELETE,action:yo(Pm,ue,!0)},{keyCode:mr.BACKSPACE,action:yo(mx,ue,!1)},{keyCode:mr.DELETE,action:yo(mx,ue,!0)},{keyCode:mr.BACKSPACE,action:yo(gx,ue,!1)},{keyCode:mr.DELETE,action:yo(gx,ue,!0)},{keyCode:mr.BACKSPACE,action:yo(x0,ue,!1)},{keyCode:mr.DELETE,action:yo(x0,ue,!0)}],he).each(function(Ie){he.preventDefault()}))}),V.on("keyup",function(ie){var ue,de;!1===ie.isDefaultPrevented()&&(de=ie,Nm([{keyCode:mr.BACKSPACE,action:yo(Gy,ue=V)},{keyCode:mr.DELETE,action:yo(Gy,ue)}],de))}),(U=a).on("keydown",function(ie){var ue,de,he;ie.keyCode===mr.ENTER&&(ue=U,(de=ie).isDefaultPrevented()||(de.preventDefault(),(he=ue.undoManager).typing&&(he.typing=!1,he.add()),ue.undoManager.transact(function(){!1===ue.selection.isCollapsed()&&ue.execCommand("Delete"),Rx(ue,de)})))}),(L=a).on("keydown",function(ie){var ue;!1===ie.isDefaultPrevented()&&(ue=ie,Nm([{keyCode:mr.SPACEBAR,action:yo(tS,L)}],ue).each(function(de){ue.preventDefault()}))}),E=A=a,z=If(function(){E.composing||Gb(E)},0),YC.isIE()&&(E.on("keypress",function(ie){z.throttle()}),E.on("remove",function(ie){z.cancel()})),A.on("input",function(ie){!1===ie.isComposing&&Gb(A)}),C=re,(x=a).on("keydown",function(ie){var ue,de,he;!1===ie.isDefaultPrevented()&&(de=C,he=ie,Nm([{keyCode:mr.END,action:yo(o_,ue=x,!0)},{keyCode:mr.HOME,action:yo(o_,ue,!1)},{keyCode:mr.END,action:yo(BC,ue,!0)},{keyCode:mr.HOME,action:yo(BC,ue,!1)},{keyCode:mr.END,action:yo($y,ue,!0,de)},{keyCode:mr.HOME,action:yo($y,ue,!1,de)}],he).each(function(Ie){he.preventDefault()}))}),d=a,g=re,eb.os.isOSX()||(v=vi(!1),d.on("keydown",function(ie){Qw(ie)&&eS(v,d,!0)}),d.on("keyup",function(ie){var ue,de,he;!1===ie.isDefaultPrevented()&&(he=ie,Nm([{keyCode:mr.PAGE_UP,action:yo($y,ue=d,!1,de=g)},{keyCode:mr.PAGE_DOWN,action:yo($y,ue,!0,de)}],he)),Qw(ie)&&v.get()&&(eS(v,d,!1),d.nodeChanged())})),re}(ue);Je=ct,(Oe=a).addCommand("delete",function(){var Ge,Qe=Je;Vp(Ge=Oe)||Y1(Ge,!1)||X1(Ge,!1)||Lh(Ge,Qe,!1)||gx(Ge,!1)||Us(Ge)||px(Ge,!1)||Pm(Ge,!1)||mx(Ge)||x0(Ge,!1)||(Ky(Ge,"Delete"),q1(Ge))}),Oe.addCommand("forwardDelete",function(){var Ge,Qe=Je;Y1(Ge=Oe,!0)||X1(Ge,!0)||Lh(Ge,Qe,!0)||gx(Ge,!0)||Us(Ge)||px(Ge,!0)||Pm(Ge,!0)||mx(Ge)||x0(Ge,!0)||Ky(Ge,"ForwardDelete")}),Ba(de=a)&&de.on("NodeChange",_e(TM,de)),Ie=(he=a).dom,We=Ba(he),ve=he.getParam("placeholder",X_.getAttrib(he.getElement(),"placeholder"),"string"),Se=function(Ge,Qe){var Ye,et,Ct;!function(en){if(Dw(en)){var sn=en.keyCode;return!Aw(en)&&(mr.metaKeyPressed(en)||en.altKey||112<=sn&&sn<=123||Mt(wM,sn))}}(Ge)&&(Ye=he.getBody(),et=!(Dw(Ct=Ge)&&!(Aw(Ct)||"keyup"===Ct.type&&229===Ct.keyCode))&&function(en,sn,Tt){if(q(it.fromDom(sn),!1)){var Dt=""===Tt,xn=sn.firstElementChild;return!xn||!en.getStyle(sn.firstElementChild,"padding-left")&&!en.getStyle(sn.firstElementChild,"padding-right")&&(Dt?!en.isBlock(xn):Tt===xn.nodeName.toLowerCase())}return!1}(Ie,Ye,We),""!==Ie.getAttrib(Ye,Fw)===et&&!Qe||(Ie.setAttrib(Ye,Fw,et?ve:null),Ie.setAttrib(Ye,"aria-placeholder",et?ve:null),he.fire("PlaceholderToggle",{state:et}),he.on(et?"keydown":"keyup",Se),he.off(et?"keyup":"keydown",Se)))},ve&&he.on("init",function(Ge){Se(Ge,!0),he.on("change SetContent ExecCommand",Se),he.on("paste",function(Qe){return Di.setEditorTimeout(he,function(){return Se(Qe)})})});var gt=function(a){var d=a;return Vn(a.plugins,"rtc").bind(function(g){return H.from(g.setup)}).fold(function(){return d.rtcInstance=ex(a),H.none()},function(g){var v,x;return d.rtcInstance=(v=Zt(null),x=Zt(""),{undoManager:{beforeChange:Ut,add:v,undo:v,redo:v,clear:Ut,reset:Ut,hasUndo:_r,hasRedo:_r,transact:v,ignore:Ut,extra:Ut},formatter:{match:_r,matchAll:Zt([]),matchNode:Zt(void 0),canApply:_r,closest:x,apply:Ut,remove:Ut,toggle:Ut,formatChanged:Zt({unbind:Ut})},editor:{getContent:x,setContent:x,insertContent:Ut,addVisual:Ut},selection:{getContent:x},raw:{getModel:Zt(H.none())}}),H.some(function(){return g().then(function(C){return d.rtcInstance=(U=C.selection,V=C.raw,{undoManager:{beforeChange:(E=C.undoManager).beforeChange,add:E.add,undo:E.undo,redo:E.redo,clear:E.clear,reset:E.reset,hasUndo:E.hasUndo,hasRedo:E.hasRedo,transact:function(Z,ee,oe){return E.transact(oe)},ignore:function(Z,ee){return E.ignore(ee)},extra:function(Z,ee,oe,re){return E.extra(oe,re)}},formatter:{match:function(Z,ee,oe,re){return z.match(Z,A(ee),re)},matchAll:(z=C.formatter).matchAll,matchNode:z.matchNode,canApply:function(Z){return z.canApply(Z)},closest:function(Z){return z.closest(Z)},apply:function(Z,ee,oe){return z.apply(Z,A(ee))},remove:function(Z,ee,oe,re){return z.remove(Z,A(ee))},toggle:function(Z,ee,oe){return z.toggle(Z,A(ee))},formatChanged:function(Z,ee,oe,re,ie){return z.formatChanged(ee,oe,re,ie)}},editor:{getContent:function(Z,ee){return L.getContent(Z)},setContent:function(Z,ee){return L.setContent(Z,ee)},insertContent:function(Z,ee){return L.insertContent(Z)},addVisual:(L=C.editor).addVisual},selection:{getContent:function(Z,ee){return U.getContent(ee)}},raw:{getModel:function(){return H.some(V.getRawModel())}}}),C.rtc.isRemote;function A(Z){return Fn(Z)?Z:{}}var E,z,L,U,V})})})}(a);(function(Ge){var Qe=Ge.settings,Ye=Ge.getDoc(),et=Ge.getBody();Ge.fire("PreInit"),Qe.browser_spellcheck||Qe.gecko_spellcheck||(Ye.body.spellcheck=!1,dS.setAttrib(et,"spellcheck","false")),Ge.quirks=function(a){function d(Ye,et){try{a.getDoc().execCommand(Ye,!1,et)}catch(Ct){}}function g(Ye){return Ye.isDefaultPrevented()}function v(){a.shortcuts.add("meta+a",null,"SelectAll")}function x(){a.inline||de.bind(a.getDoc(),"mousedown mouseup",function(Ye){var et;Ye.target===a.getDoc().documentElement&&(et=he.getRng(),a.getBody().focus(),"mousedown"===Ye.type?ua(et.startContainer)||he.placeCaretAt(Ye.clientX,Ye.clientY):he.setRng(et))})}function C(){Range.prototype.getClientRects||a.on("mousedown",function(Ye){var et;g(Ye)||"HTML"!==Ye.target.nodeName||((et=a.getBody()).blur(),Di.setEditorTimeout(a,function(){et.focus()}))})}function A(){a.on("click",function(Ye){var et=Ye.target;/^(IMG|HR)$/.test(et.nodeName)&&"false"!==de.getContentEditableParent(et)&&(Ye.preventDefault(),a.selection.select(et),a.nodeChanged()),"A"===et.nodeName&&de.hasClass(et,"mce-item-anchor")&&(Ye.preventDefault(),he.select(et))})}function E(){a.on("keydown",function(Ye){if(!g(Ye)&&Ye.keyCode===ie&&he.isCollapsed()&&0===he.getRng().startOffset){var et=he.getNode().previousSibling;if(et&&et.nodeName&&"table"===et.nodeName.toLowerCase())return Ye.preventDefault(),!1}})}function z(){a.getParam("readonly")||a.on("BeforeExecCommand mousedown",function(){d("StyleWithCSS",!1),d("enableInlineTableEditing",!1),bv(a)||d("enableObjectResizing",!1)})}function L(){a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function U(){a.inline||a.on("keydown",function(){document.activeElement===document.body&&a.getWin().focus()})}function V(){a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",function(Ye){var et;"HTML"===Ye.target.nodeName&&(11<wr.ie?a.getBody().focus():(et=a.selection.getRng(),a.getBody().focus(),a.selection.setRng(et),a.selection.normalize(),a.nodeChanged()))}))}function Z(){wr.mac&&a.on("keydown",function(Ye){!mr.metaKeyPressed(Ye)||Ye.shiftKey||37!==Ye.keyCode&&39!==Ye.keyCode||(Ye.preventDefault(),a.selection.getSel().modify("move",37===Ye.keyCode?"backward":"forward","lineboundary"))})}function ee(){a.on("click",function(Ye){var et=Ye.target;do{if("A"===et.tagName)return void Ye.preventDefault()}while(et=et.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function oe(){a.on("init",function(){a.dom.bind(a.getBody(),"submit",function(Ye){Ye.preventDefault()})})}var re=At.each,ie=mr.BACKSPACE,ue=mr.DELETE,de=a.dom,he=a.selection,Ie=a.parser,We=wr.gecko,Se=wr.webkit,Oe="data:text/mce-internal,",Je=wr.ie?"Text":"URL",ct=Ut;return Uf(a)?(Se&&(x(),A(),oe(),v(),wr.iOS&&(U(),V(),ee())),We&&(C(),z(),L(),Z())):(a.on("keydown",function(Ye){if(!g(Ye)&&Ye.keyCode===mr.BACKSPACE){var et,Ct=(et=he.getRng()).startContainer,en=et.startOffset,sn=de.getRoot(),Tt=Ct;if(et.collapsed&&0===en){for(;Tt&&Tt.parentNode&&Tt.parentNode.firstChild===Tt&&Tt.parentNode!==sn;)Tt=Tt.parentNode;"BLOCKQUOTE"===Tt.tagName&&(a.formatter.toggle("blockquote",null,Tt),(et=de.createRng()).setStart(Ct,0),et.setEnd(Ct,0),he.setRng(et))}}}),a.on("keydown",function(Ye){var et,Ct,en,sn,Tt=Ye.keyCode;g(Ye)||Tt!==ue&&Tt!==ie||(et=a.selection.isCollapsed(),Ct=a.getBody(),et&&!de.isEmpty(Ct)||!et&&(en=Qe(a.selection.getRng()),(sn=de.createRng()).selectNode(a.getBody()),en!==Qe(sn))||(Ye.preventDefault(),a.setContent(""),Ct.firstChild&&de.isBlock(Ct.firstChild)?a.selection.setCursorLocation(Ct.firstChild,0):a.selection.setCursorLocation(Ct,0),a.nodeChanged()))}),wr.windowsPhone||a.on("keyup focusin mouseup",function(Ye){mr.modifierPressed(Ye)||he.normalize()},!0),Se&&(x(),A(),Ba(a)&&a.on("init",function(){d("DefaultParagraphSeparator",Ba(a))}),oe(),E(),Ie.addNodeFilter("br",function(Ye){for(var et=Ye.length;et--;)"Apple-interchange-newline"===Ye[et].attr("class")&&Ye[et].remove()}),wr.iOS?(U(),V(),ee()):v()),11<=wr.ie&&(V(),E()),wr.ie&&(v(),d("AutoUrlDetect",!1),a.on("dragstart",function(Ye){var et,Ct,en;(et=Ye).dataTransfer&&(a.selection.isCollapsed()&&"IMG"===et.target.tagName&&he.select(et.target),0<(Ct=a.selection.getContent()).length&&(en=Oe+escape(a.id)+","+escape(Ct),et.dataTransfer.setData(Je,en)))}),a.on("drop",function(Ye){var et,Ct,en,sn;g(Ye)||(et=Ye.dataTransfer&&(sn=Ye.dataTransfer.getData(Je))&&0<=sn.indexOf(Oe)?(sn=sn.substr(Oe.length).split(","),{id:unescape(sn[0]),html:unescape(sn[1])}):null)&&et.id!==a.id&&(Ye.preventDefault(),Ct=Vv(Ye.x,Ye.y,a.getDoc()),he.setRng(Ct),en=et.html,a.queryCommandSupported("mceInsertClipboardContent")?a.execCommand("mceInsertClipboardContent",!1,{content:en,internal:!0}):a.execCommand("mceInsertContent",!1,en))})),We&&(a.on("keydown",function(Ye){if(!g(Ye)&&Ye.keyCode===ie&&a.getBody().getElementsByTagName("hr").length&&he.isCollapsed()&&0===he.getRng().startOffset){var et=he.getNode(),Ct=et.previousSibling;if("HR"===et.nodeName)return de.remove(et),void Ye.preventDefault();Ct&&Ct.nodeName&&"hr"===Ct.nodeName.toLowerCase()&&(de.remove(Ct),Ye.preventDefault())}}),C(),a.on("keypress",function(Ye){var et;if(!g(Ye)&&(8===Ye.keyCode||46===Ye.keyCode)&&Ge())return et=gt(),a.getDoc().execCommand("delete",!1,null),et(),Ye.preventDefault(),!1}),de.bind(a.getDoc(),"cut",function(Ye){var et;!g(Ye)&&Ge()&&(et=gt(),Di.setEditorTimeout(a,function(){et()}))}),z(),a.on("SetContent ExecCommand",function(Ye){"setcontent"!==Ye.type&&"mceInsertLink"!==Ye.command||re(de.select("a"),function(et){var Ct=et.parentNode,en=de.getRoot();if(Ct.lastChild===et){for(;Ct&&!de.isBlock(Ct);){if(Ct.parentNode.lastChild!==Ct||Ct===en)return;Ct=Ct.parentNode}de.add(Ct,"br",{"data-mce-bogus":1})}})}),L(),Z(),E())),{refreshContentEditable:ct,isHidden:function(){if(!We||a.removed)return!1;var Ye=a.selection.getSel();return!Ye||!Ye.rangeCount||0===Ye.rangeCount}};function gt(){var Ye=de.getAttribs(he.getStart().cloneNode(!1));return function(){var et=he.getStart();et!==a.getBody()&&(de.setAttrib(et,"style",null),re(Ye,function(Ct){et.setAttributeNode(Ct.cloneNode(!0))}))}}function Ge(){return!he.isCollapsed()&&de.getParent(he.getStart(),de.isBlock)!==de.getParent(he.getEnd(),de.isBlock)}function Qe(Ye){var et=de.create("body"),Ct=Ye.cloneContents();return et.appendChild(Ct),he.serializer.serialize(et,{format:"html"})}}(Ge),Ge.fire("PostRender");var Ct=Ge.getParam("directionality",fl.isRtl()?"rtl":void 0);void 0!==Ct&&(et.dir=Ct),Qe.protect&&Ge.on("BeforeSetContent",function(en){At.each(Qe.protect,function(sn){en.content=en.content.replace(sn,function(Tt){return"\x3c!--mce:protected "+escape(Tt)+"--\x3e"})})}),Ge.on("SetContent",function(){Ge.addVisual(Ge.getBody())}),Ge.on("compositionstart compositionend",function(en){Ge.composing="compositionstart"===en.type})})(a),gt.fold(function(){JC(a).then(function(){return Fx(a)})},function(Ge){a.setProgressState(!0),JC(a).then(function(){Ge().then(function(Qe){a.setProgressState(!1),Fx(a)},function(Qe){a.notificationManager.open({type:"error",text:String(Qe)}),Fx(a)})})})}function Jp(a){return a.replace(/^\-/,"")}function Pg(a){return{editorContainer:a,iframeContainer:a,api:{}}}function Hx(a){var d,g,v,x,C,A,E,z;a.fire("ScriptsLoaded"),g=At.trim(q_(d=a)),v=d.ui.registry.getAll().icons,qt(yn(yn({},ux.get("default").icons),ux.get(g).icons),function(ue,de){ao(v,de)||d.ui.registry.addIcon(de,ue)}),A=ph(x=a),xr(A)?(x.settings.theme=Jp(A),C=ac.get(A),x.theme=new C(x,ac.urls[A]),x.theme.init&&x.theme.init(x,ac.urls[A]||x.documentBaseUrl.replace(/\/$/,""),x.$)):x.theme={},z=[],At.each(yi(E=a).split(/[ ,]/),function(ue){fS(E,z,Jp(ue))});var L=function(a){var d,g,v,x,C,A,E,z=a.getElement();return a.orgDisplay=z.style.display,xr(ph(a))?a.theme.renderUI():dn(ph(a))?(g=(d=a).getElement(),(v=ph(d)(d,g)).editorContainer.nodeType&&(v.editorContainer.id=v.editorContainer.id||d.id+"_parent"),v.iframeContainer&&v.iframeContainer.nodeType&&(v.iframeContainer.id=v.iframeContainer.id||d.id+"_iframecontainer"),v.height=v.iframeHeight||g.offsetHeight,v):(E=(x=a).getElement(),x.inline?Pg(null):(C=E,A=ek.create("div"),ek.insertAfter(A,C),Pg(A)))}(a),U=a,V=H.from(L.api).getOr({}),Z={show:H.from(V.show).getOr(Ut),hide:H.from(V.hide).getOr(Ut),disable:H.from(V.disable).getOr(Ut),isDisabled:H.from(V.isDisabled).getOr(_r),enable:function(){U.mode.isReadOnly()||H.from(V.enable).map(Kt)}};U.ui=yn(yn({},U.ui),Z);var ee,oe,re,ie={editorContainer:L.editorContainer,iframeContainer:L.iframeContainer};return a.editorContainer=ie.editorContainer||null,function(a){var d,g;a.contentCSS=a.contentCSS.concat(zo(a,(g=(d=a).getParam("content_css"),xr(g)?xt(g.split(","),Qa):un(g)?g:!1===g||d.inline?[]:["default"])),zo(a,ny(a)))}(a),a.inline?Vx(a):(re=function(a,d){var g,v,x,C,A=a.translate(a.getParam("iframe_aria_text","Rich Text Area. Press ALT-0 for help.","string")),E=(g=a.id,v=A,x=a.getParam("iframe_attrs",{}),Rs(C=it.fromTag("iframe"),x),Rs(C,{id:g+"_ifr",frameBorder:"0",allowTransparency:"true",title:v}),$g(C,"tox-edit-area__iframe"),C.dom);E.onload=function(){E.onload=null,a.fire("load")};var z=function(L,U){if(document.domain!==window.location.hostname&&wr.browser.isIE()){var V=U1("mce");L[V]=function(){Vx(L)};var Z='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+L.id+'");document.write(ed.iframeHTML);document.close();ed.'+V+"(true);})()";return Gx.setAttrib(U,"src",Z),!0}return!1}(a,E);return a.contentAreaContainer=d.iframeContainer,a.iframeElement=E,a.iframeHTML=function(L){var U=L.getParam("doctype","<!DOCTYPE html>")+"<html><head>";L.getParam("document_base_url","")!==L.documentBaseUrl&&(U+='<base href="'+L.documentBaseURI.getURI()+'" />'),U+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var V=em(L,"body_id","tinymce"),Z=em(L,"body_class","");return Jd(L)&&(U+='<meta http-equiv="Content-Security-Policy" content="'+Jd(L)+'" />'),U+'</head><body id="'+V+'" class="mce-content-body '+Z+'" data-id="'+L.id+'"><br></body></html>'}(a),Gx.add(d.iframeContainer,E),z}(ee=a,oe=ie),oe.editorContainer&&(Gx.get(oe.editorContainer).style.display=ee.orgDisplay,ee.hidden=Gx.isHidden(oe.editorContainer)),ee.getElement().style.display="none",Gx.setAttrib(ee.id,"aria-hidden","true"),void(re||Vx(ee)))}function tb(a){return"-"===a.charAt(0)}function PM(a,d,g){return H.from(d).filter(function(v){return 0<v.length&&!ux.has(v)}).map(function(v){return{url:a.editorManager.baseURL+"/icons/"+v+"/icons"+g+".js",name:H.some(v)}})}function Wx(a){return function(d,g){return H.from(g).map(it.fromDom).filter(Hi).bind(function(v){return x=a,C=d,Ah(it.fromDom(v.dom),function(z){return oi(L=z,x).orThunk(function(){return"font"===Oi(L)?Vn(tk,x).bind(function(U){return cc(L,U)}):H.none()});var L},function(z){return $t(it.fromDom(C),z)}).or(H.from(ci.DOM.getStyle(v.dom,a,!0)));var x,C}).getOr("")}}function QC(a){return Ku(a.getBody()).map(function(d){var g=d.container();return In(g)?g.parentNode:g})}function lS(a,d){return g=a,v=lr(H.some,d),H.from((x=g).selection.getRng()).bind(function(C){var A=x.getBody();return C.startContainer===A&&0===C.startOffset?H.none():H.from(x.selection.getStart(!0))}).orThunk(_e(QC,g)).map(it.fromDom).filter(Hi).bind(v);var g,v,x}function RM(a,d){if(/^[0-9.]+$/.test(d)){var g=parseInt(d,10);if(1<=g&&g<=7){var v=At.explode(a.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large")),x=At.explode(a.getParam("font_size_classes",""));return x?x[g-1]||d:v[g-1]||d}return d}return d}var cS=qr,NM=mu,LM=function(a){a.on(function(d){IM(d.ghost)}),a.clear()},nb=mu,T0=qr,dS=ci.DOM,Gx=ci.DOM,ek=ci.DOM,fS=function(a,d,g){var v,C,A,E=Id.get(g),z=Id.urls[g]||a.documentBaseUrl.replace(/\/$/,"");if(g=At.trim(g),E&&-1===At.inArray(d,g)&&(At.each(Id.dependencies(g),function(U){fS(a,d,U)}),!a.plugins[g]))try{var L=new E(a,z,a.$);(a.plugins[g]=L).init&&(L.init(a,z),d.push(g))}catch(U){C=U,Hf(v=a,"PluginLoadError",{message:A=fl.translate(["Failed to initialize plugin: {0}",g])}),du(A,C),Op(v,A)}},Qp=ci.DOM,tk={"font-size":"size","font-family":"face"},BM=Wx("font-size"),nk=Jn(function(a){return a.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},Wx("font-family")),Vm=At.each,zM=At.map,FM=At.inArray,rk=(Fa.prototype.execCommand=function(a,d,g,v){var x,C,A=!1,E=this;if(!E.editor.removed){if("mcefocus"!==a.toLowerCase()&&(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(a)||v&&v.skip_focus?yy(C=E.editor).each(function(L){return C.selection.setRng(L)}):E.editor.focus()),(v=E.editor.fire("BeforeExecCommand",{command:a,ui:d,value:g})).isDefaultPrevented())return!1;var z=a.toLowerCase();if(x=E.commands.exec[z])return x(z,d,g),E.editor.fire("ExecCommand",{command:a,ui:d,value:g}),!0;if(Vm(this.editor.plugins,function(L){if(L.execCommand&&L.execCommand(a,d,g))return E.editor.fire("ExecCommand",{command:a,ui:d,value:g}),!(A=!0)}),A)return A;if(E.editor.theme&&E.editor.theme.execCommand&&E.editor.theme.execCommand(a,d,g))return E.editor.fire("ExecCommand",{command:a,ui:d,value:g}),!0;try{A=E.editor.getDoc().execCommand(a,d,g)}catch(L){}return!!A&&(E.editor.fire("ExecCommand",{command:a,ui:d,value:g}),!0)}},Fa.prototype.queryCommandState=function(a){var d;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(a=a.toLowerCase(),d=this.commands.state[a])return d(a);try{return this.editor.getDoc().queryCommandState(a)}catch(g){}return!1}},Fa.prototype.queryCommandValue=function(a){var d;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(a=a.toLowerCase(),d=this.commands.value[a])return d(a);try{return this.editor.getDoc().queryCommandValue(a)}catch(g){}}},Fa.prototype.addCommands=function(a,d){void 0===d&&(d="exec");var g=this;Vm(a,function(v,x){Vm(x.toLowerCase().split(","),function(C){g.commands[d][C]=v})})},Fa.prototype.addCommand=function(a,d,g){var v=this;a=a.toLowerCase(),this.commands.exec[a]=function(x,C,A,E){return d.call(g||v.editor,C,A,E)}},Fa.prototype.queryCommandSupported=function(a){if(a=a.toLowerCase(),this.commands.exec[a])return!0;try{return this.editor.getDoc().queryCommandSupported(a)}catch(d){}return!1},Fa.prototype.addQueryStateHandler=function(a,d,g){var v=this;a=a.toLowerCase(),this.commands.state[a]=function(){return d.call(g||v.editor)}},Fa.prototype.addQueryValueHandler=function(a,d,g){var v=this;a=a.toLowerCase(),this.commands.value[a]=function(){return d.call(g||v.editor)}},Fa.prototype.hasCustomCommand=function(a){return a=a.toLowerCase(),!!this.commands.exec[a]},Fa.prototype.execNativeCommand=function(a,d,g){return void 0===d&&(d=!1),void 0===g&&(g=null),this.editor.getDoc().execCommand(a,d,g)},Fa.prototype.isFormatMatch=function(a){return this.editor.formatter.match(a)},Fa.prototype.toggleFormat=function(a,d){this.editor.formatter.toggle(a,d),this.editor.nodeChanged()},Fa.prototype.storeSelection=function(a){this.selectionBookmark=this.editor.selection.getBookmark(a)},Fa.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},Fa.prototype.setupCommands=function(a){var d=this;function g(v){return function(){var x=a.selection,C=x.isCollapsed()?[a.dom.getParent(x.getNode(),a.dom.isBlock)]:x.getSelectedBlocks(),A=zM(C,function(E){return!!a.formatter.matchNode(E,v)});return-1!==FM(A,!0)}}this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":Ut,"mceEndUndoLevel,mceAddUndoLevel":function(){a.undoManager.add()},mceFocus:function(v,x,C){var A;(A=a).removed||(C?K:function(z){var L=z.selection,U=z.getBody(),V=L.getRng();z.quirks.refreshContentEditable(),void 0!==z.bookmark&&!1===Oa(z)&&yy(z).each(function(re){z.selection.setRng(re),V=re});var Z,ee,oe=(Z=z,ee=L.getNode(),Z.dom.getParent(ee,function(re){return"true"===Z.dom.getContentEditable(re)}));if(z.$.contains(U,oe))return js(oe),by(z,V),K(z);z.inline||(wr.opera||js(U),z.getWin().focus()),(wr.gecko||z.inline)&&(js(U),by(z,V)),K(z)})(A)},"Cut,Copy,Paste":function(v){var x,C,A=a.getDoc();try{d.execNativeCommand(v)}catch(E){x=!0}!(x="paste"===v&&!A.queryCommandEnabled(v)||x)&&A.queryCommandSupported(v)||(C=a.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),wr.mac&&(C=C.replace(/Ctrl\+/g,"\u2318+")),a.notificationManager.open({text:C,type:"error"}))},unlink:function(){var v;a.selection.isCollapsed()?(v=a.dom.getParent(a.selection.getStart(),"a"))&&a.dom.remove(v,!0):a.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(v){var x=v.substring(7);"full"===x&&(x="justify"),Vm("left,center,right,justify".split(","),function(C){x!==C&&a.formatter.remove("align"+C)}),"none"!==x&&d.toggleFormat("align"+x)},"InsertUnorderedList,InsertOrderedList":function(v){var x;d.execNativeCommand(v);var C=a.dom.getParent(a.selection.getNode(),"ol,ul");C&&/^(H[1-6]|P|ADDRESS|PRE)$/.test((x=C.parentNode).nodeName)&&(d.storeSelection(),a.dom.split(x,C),d.restoreSelection())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(v){d.toggleFormat(v)},"ForeColor,HiliteColor":function(v,x,C){d.toggleFormat(v,{value:C})},FontName:function(v,x,C){var A,E;E=RM(A=a,C),A.formatter.toggle("fontname",{value:xt(E.split(/\s*,\s*/),function(z){return-1===z.indexOf(" ")||dr(z,'"')||dr(z,"'")?z:"'"+z+"'"}).join(",")}),A.nodeChanged()},FontSize:function(v,x,C){var A;(A=a).formatter.toggle("fontsize",{value:RM(A,C)}),A.nodeChanged()},LineHeight:function(v,x,C){var A;(A=a).formatter.toggle("lineheight",{value:String(C)}),A.nodeChanged()},Lang:function(v,x,C){d.toggleFormat(v,{value:C.code,customValue:C.customCode})},RemoveFormat:function(v){a.formatter.remove(v)},mceBlockQuote:function(){d.toggleFormat("blockquote")},FormatBlock:function(v,x,C){return d.toggleFormat(C||"p")},mceCleanup:function(){var v=a.selection.getBookmark();a.setContent(a.getContent()),a.selection.moveToBookmark(v)},mceRemoveNode:function(v,x,C){var A=C||a.selection.getNode();A!==a.getBody()&&(d.storeSelection(),a.dom.remove(A,!0),d.restoreSelection())},mceSelectNodeDepth:function(v,x,C){var A=0;a.dom.getParent(a.selection.getNode(),function(E){if(1===E.nodeType&&A++===C)return a.selection.select(E),!1},a.getBody())},mceSelectNode:function(v,x,C){a.selection.select(C)},mceInsertContent:function(v,x,C){var A,E,z,L;A=a,z=(E=function(U){if("string"==typeof U)return{content:U,details:{}};var V=At.extend({paste:U.paste,data:{paste:U.paste}},U);return{content:U.content,details:V}}(C)).content,L=E.details,Ad(A).editor.insertContent(z,L)},mceInsertRawHTML:function(v,x,C){a.selection.setContent("tiny_mce_marker");var A=a.getContent();a.setContent(A.replace(/tiny_mce_marker/g,function(){return C}))},mceInsertNewLine:function(v,x,C){Rx(a,C)},mceToggleFormat:function(v,x,C){d.toggleFormat(C)},mceSetContent:function(v,x,C){a.setContent(C)},"Indent,Outdent":function(v){Dx(a,v)},mceRepaint:Ut,InsertHorizontalRule:function(){a.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){a.hasVisual=!a.hasVisual,a.addVisual()},mceReplaceContent:function(v,x,C){a.execCommand("mceInsertContent",!1,C.replace(/\{\$selection\}/g,a.selection.getContent({format:"text"})))},mceInsertLink:function(v,x,C){"string"==typeof C&&(C={href:C});var A=a.dom.getParent(a.selection.getNode(),"a");C.href=C.href.replace(/ /g,"%20"),A&&C.href||a.formatter.remove("link"),C.href&&a.formatter.apply("link",C,A)},selectAll:function(){var v,x=a.dom.getParent(a.selection.getStart(),mu);x&&((v=a.dom.createRng()).selectNodeContents(x),a.selection.setRng(v))},mceNewDocument:function(){a.setContent("")},InsertLineBreak:function(v,x,C){return $w(a,C),!0}}),d.addCommands({JustifyLeft:g("alignleft"),JustifyCenter:g("aligncenter"),JustifyRight:g("alignright"),JustifyFull:g("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(v){return d.isFormatMatch(v)},mceBlockQuote:function(){return d.isFormatMatch("blockquote")},Outdent:function(){return _0(a)},"InsertUnorderedList,InsertOrderedList":function(v){var x=a.dom.getParent(a.selection.getNode(),"ul,ol");return x&&("insertunorderedlist"===v&&"UL"===x.tagName||"insertorderedlist"===v&&"OL"===x.tagName)}},"state"),d.addCommands({Undo:function(){a.undoManager.undo()},Redo:function(){a.undoManager.redo()}}),d.addQueryValueHandler("FontName",function(){return lS(v=a,function(x){return nk(v.getBody(),x.dom)}).getOr("");var v},this),d.addQueryValueHandler("FontSize",function(){return lS(v=a,function(x){return BM(v.getBody(),x.dom)}).getOr("");var v},this),d.addQueryValueHandler("LineHeight",function(){return lS(v=a,function(x){var C=it.fromDom(v.getBody());return Ah(x,function(A){return oi(A,"line-height")},_e($t,C)).getOrThunk(function(){var A=parseFloat(ks(x,"line-height")),E=parseFloat(ks(x,"font-size"));return String(A/E)})}).getOr("");var v},this)},Fa);function Fa(a){this.commands={state:{},exec:{},value:{}},this.editor=a,this.setupCommands(a)}function jx(a,d,g){try{a.getDoc().execCommand(d,!1,String(g))}catch(v){}}function Ux(a,d){a.dom.contentEditable=d?"true":"false"}function zh(a){return a.readonly}function hS(a){a.parser.addAttributeFilter("contenteditable",function(d){zh(a)&&on(d,function(g){g.attr(Hm,g.attr("contenteditable")),g.attr("contenteditable","false")})}),a.serializer.addAttributeFilter(Hm,function(d){zh(a)&&on(d,function(g){g.attr("contenteditable",g.attr(Hm))})}),a.serializer.addTempAttr(Hm)}var Hm="data-mce-contenteditable",gS=At.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),rb=(D0.isNative=function(a){return!!gS[a.toLowerCase()]},D0.prototype.fire=function(a,d){var g=a.toLowerCase(),v=Xt(g,d||{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(v);var x=this.bindings[g];if(x)for(var C=0,A=x.length;C<A;C++){var E=x[C];if(!E.removed){if(E.once&&this.off(g,E.func),v.isImmediatePropagationStopped())return v;if(!1===E.func.call(this.scope,v))return v.preventDefault(),v}}return v},D0.prototype.on=function(a,d,g,v){if(d=!1===d?_r:d){var x={func:d,removed:!1};v&&At.extend(x,v);for(var C=a.toLowerCase().split(" "),A=C.length;A--;){var E=C[A],z=this.bindings[E];z||(z=[],this.toggleEvent(E,!0)),z=g?ot([x],z,!0):ot(ot([],z,!0),[x],!1),this.bindings[E]=z}}return this},D0.prototype.off=function(a,d){var g=this;if(a)for(var v=a.toLowerCase().split(" "),x=v.length;x--;){var C,A=v[x],E=this.bindings[A];if(!A)return qt(this.bindings,function(z,L){g.toggleEvent(L,!1),delete g.bindings[L]}),this;E&&(d?(E=(C=Ao(E,function(z){return z.func===d})).fail,this.bindings[A]=E,on(C.pass,function(z){z.removed=!0})):E.length=0,E.length||(this.toggleEvent(a,!1),delete this.bindings[A]))}else qt(this.bindings,function(z,L){g.toggleEvent(L,!1)}),this.bindings={};return this},D0.prototype.once=function(a,d,g){return this.on(a,d,g,{once:!0})},D0.prototype.has=function(a){return a=a.toLowerCase(),!(!this.bindings[a]||0===this.bindings[a].length)},D0);function D0(a){this.bindings={},this.settings=a||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||_r}function A0(a){return a._eventDispatcher||(a._eventDispatcher=new rb({scope:a,toggleEvent:function(d,g){rb.isNative(d)&&a.toggleNativeEvent&&a.toggleNativeEvent(d,g)}})),a._eventDispatcher}function mS(a,d){if("selectionchange"===d)return a.getDoc();if(!a.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(d))return a.getDoc().documentElement;var g=xv(a);return g?(a.eventRoot||(a.eventRoot=E0.select(g)[0]),a.eventRoot):a.getBody()}function ok(a,d,g){var v,x,C,A;a.hidden||zh(a)?zh(a)&&(v=a,"click"!==(x=g).type||mr.metaKeyPressed(x)||(C=it.fromDom(x.target),A=v,Na(C,"a",function(E){return $t(E,it.fromDom(A.getBody()))}).bind(function(E){return cc(E,"href")}).each(function(E){var z,L;x.preventDefault(),/^#/.test(E)?(z=v.dom.select(E+',[name="'+(dr(L=E,"#")?L.substring("#".length):L)+'"]')).length&&v.selection.scrollIntoView(z[0],!0):window.open(E,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))):a.fire(d,g)}function Qu(a,d){var g,v;a.delegates||(a.delegates={}),a.delegates[d]||a.removed||(v=mS(a,d),xv(a)?(I0||(I0={},a.editorManager.on("removeEditor",function(){a.editorManager.activeEditor||I0&&(qt(I0,function(x,C){a.dom.unbind(mS(a,C))}),I0=null)})),I0[d]||(I0[d]=g=function(x){for(var C=x.target,A=a.editorManager.get(),E=A.length;E--;){var z=A[E].getBody();z!==C&&!E0.isChildOf(C,z)||ok(A[E],d,x)}},E0.bind(v,d,g))):(E0.bind(v,d,g=function(x){ok(a,d,x)}),a.delegates[d]=g))}function ik(a,d,g,v){var x=g[d.get()],C=g[v];try{C.activate()}catch(A){return void console.error("problem while activating editor mode "+v+":",A)}x.deactivate(),x.editorReadOnly!==C.editorReadOnly&&function(a,d){var g,v,x=it.fromDom(a.getBody());(function(a,d,g){var v,x,C,A,z;fh(a,d)&&!1===g?(x=d,Zg(v=a)?v.dom.classList.remove(x):0<(z=hr(np(A=v,"class"),function(L){return"mce-content-readonly"!==L})).length?Sl(A,"class",z.join(" ")):Rc(A,"class"),0===(Zg(C=v)?C.dom.classList:np(C,"class")).length&&Rc(C,"class")):g&&$g(a,d)})(x,"mce-content-readonly",d),d?(a.selection.controlSelection.hideResizeRect(),a._selectionOverrides.hideFakeCaret(),H.from(a.selection.getNode()).each(function(C){C.removeAttribute("data-mce-selected")}),Ux(x,!(a.readonly=!0)),on(xu(x,'*[contenteditable="true"]'),function(C){Sl(C,Hm,"true"),Ux(C,!1)})):(Ux(x,!(a.readonly=!1)),on(xu(x,"*["+Hm+'="true"]'),function(C){Rc(C,Hm),Ux(C,!0)}),jx(a,"StyleWithCSS",!1),jx(a,"enableInlineTableEditing",!1),jx(a,"enableObjectResizing",!1),(Oa(g=a)||vg(Ki(it.fromDom((v=g).getElement()))).filter(function(C){return!(void 0!==(A=C.dom.classList)&&(A.contains("tox-edit-area")||A.contains("tox-edit-area__iframe")||A.contains("mce-content-body")))&&Kn(v,C.dom);var A}).isSome())&&a.focus(),a.selection.setRng(a.selection.getRng()),a.nodeChanged())}(a,C.editorReadOnly),d.set(v),a.fire("SwitchMode",{mode:v})}function HM(a){var d,g={};Ng(y_(a.toLowerCase(),"+"),function(x){x in b_?g[x]=!0:/^[0-9]{2,}$/.test(x)?g.keyCode=parseInt(x,10):(g.charCode=x.charCodeAt(0),g.keyCode=WM[x]||x.toUpperCase().charCodeAt(0))});var v=[g.keyCode];for(d in b_)g[d]?v.push(d):g[d]=!1;return g.id=v.join(","),g.access&&(g.alt=!0,wr.mac?g.ctrl=!0:g.shift=!0),g.meta&&(wr.mac?g.meta=!0:(g.ctrl=!0,g.meta=!1)),g}var I0,O0={fire:function(a,d,g){if(this.removed&&"remove"!==a&&"detach"!==a)return d;var v=A0(this).fire(a,d);if(!1!==g&&this.parent)for(var x=this.parent();x&&!v.isPropagationStopped();)x.fire(a,v,!1),x=x.parent();return v},on:function(a,d,g){return A0(this).on(a,d,g)},off:function(a,d){return A0(this).off(a,d)},once:function(a,d){return A0(this).once(a,d)},hasEventListeners:function(a){return A0(this).has(a)}},E0=ci.DOM,pS=yn(yn({},O0),{bindPendingEventDelegates:function(){var a=this;At.each(a._pendingNativeEvents,function(d){Qu(a,d)})},toggleNativeEvent:function(a,d){var g=this;"focus"!==a&&"blur"!==a&&(g.removed||(d?g.initialized?Qu(g,a):g._pendingNativeEvents?g._pendingNativeEvents.push(a):g._pendingNativeEvents=[a]:g.initialized&&(g.dom.unbind(mS(g,a),a,g.delegates[a]),delete g.delegates[a])))},unbindAllNativeEvents:function(){var a=this,d=a.getBody(),g=a.dom;a.delegates&&(qt(a.delegates,function(v,x){a.dom.unbind(mS(a,x),x,v)}),delete a.delegates),!a.inline&&d&&g&&(d.onload=null,g.unbind(a.getWin()),g.unbind(a.getDoc())),g&&(g.unbind(d),g.unbind(a.getContainer()))}}),pD=["design","readonly"],Ng=At.each,y_=At.explode,WM={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},b_=At.makeMap("alt,ctrl,shift,meta,access"),ak=(Lg.prototype.add=function(a,d,g,v){var x=this,C=x.normalizeCommandFunc(g);return Ng(y_(At.trim(a)),function(A){var E=x.createShortcut(A,d,C,v);x.shortcuts[E.id]=E}),!0},Lg.prototype.remove=function(a){var d=this.createShortcut(a);return!!this.shortcuts[d.id]&&(delete this.shortcuts[d.id],!0)},Lg.prototype.normalizeCommandFunc=function(a){var d=this,g=a;return"string"==typeof g?function(){d.editor.execCommand(g,!1,null)}:At.isArray(g)?function(){d.editor.execCommand(g[0],g[1],g[2])}:g},Lg.prototype.createShortcut=function(a,d,g,v){var x=At.map(y_(a,">"),HM);return x[x.length-1]=At.extend(x[x.length-1],{func:g,scope:v||this.editor}),At.extend(x[0],{desc:this.editor.translate(d),subpatterns:x.slice(1)})},Lg.prototype.hasModifier=function(a){return a.altKey||a.ctrlKey||a.metaKey},Lg.prototype.isFunctionKey=function(a){return"keydown"===a.type&&112<=a.keyCode&&a.keyCode<=123},Lg.prototype.matchShortcut=function(a,d){return!!d&&d.ctrl===a.ctrlKey&&d.meta===a.metaKey&&d.alt===a.altKey&&d.shift===a.shiftKey&&!!(a.keyCode===d.keyCode||a.charCode&&a.charCode===d.charCode)&&(a.preventDefault(),!0)},Lg.prototype.executeShortcutAction=function(a){return a.func?a.func.call(a.scope):null},Lg);function Lg(a){this.shortcuts={},this.pendingPatterns=[],this.editor=a;var d=this;a.on("keyup keypress keydown",function(g){!d.hasModifier(g)&&!d.isFunctionKey(g)||g.isDefaultPrevented()||(Ng(d.shortcuts,function(v){if(d.matchShortcut(g,v))return d.pendingPatterns=v.subpatterns.slice(0),"keydown"===g.type&&d.executeShortcutAction(v),!0}),d.matchShortcut(g,d.pendingPatterns[0])&&(1===d.pendingPatterns.length&&"keydown"===g.type&&d.executeShortcutAction(d.pendingPatterns[0]),d.pendingPatterns.shift()))})}var ob=ci.DOM,sk=At.extend,GM=At.each,P0=At.resolve,uk=wr.ie,ib=(jo.prototype.render=function(){!function(a){var d=a.id;fl.setCode(nm(a));var g,v,x,C,A=function(){Qp.unbind(window,"ready",A),a.render()};Kh.Event.domLoaded?a.getElement()&&wr.contentEditable&&(g=it.fromDom(a.getElement()),v=Dr(g.dom.attributes,function(E,z){return E[z.name]=z.value,E},{}),a.on("remove",function(){Jo(g.dom.attributes,function(E){return Rc(g,E.name),0}),Rs(g,v)}),a.ui.styleSheetLoader=qh.forElement(g,{contentCssCors:(x=a).getParam("content_css_cors"),referrerPolicy:tm(x)}),a.getParam("inline")?a.inline=!0:(a.orgVisibility=a.getElement().style.visibility,a.getElement().style.visibility="hidden"),(C=a.getElement().form||Qp.getParent(d,"form"))&&(a.formElement=C,a.getParam("hidden_input")&&!nh(a.getElement())&&(Qp.insertAfter(Qp.create("input",{type:"hidden",name:d}),d),a.hasHiddenInput=!0),a.formEventDelegate=function(E){a.fire(E.type,E)},Qp.bind(C,"submit reset",a.formEventDelegate),a.on("reset",function(){a.resetContent()}),!a.getParam("submit_patch")||C.submit.nodeType||C.submit.length||C._mceOldSubmit||(C._mceOldSubmit=C.submit,C.submit=function(){return a.editorManager.triggerSave(),a.setDirty(!1),C._mceOldSubmit(C)})),a.windowManager=lx(a),a.notificationManager=ax(a),"xml"===a.getParam("encoding")&&a.on("GetContent",function(E){E.save&&(E.content=Qp.encode(E.content))}),a.getParam("add_form_submit_trigger")&&a.on("submit",function(){a.initialized&&a.save()}),a.getParam("add_unload_trigger")&&(a._beforeUnload=function(){!a.initialized||a.destroyed||a.isHidden()||a.save({format:"raw",no_events:!0,set_dirty:!1})},a.editorManager.on("BeforeUnload",a._beforeUnload)),a.editorManager.add(a),function(a,d){var g,v,x=Pi.ScriptLoader,C=x,A=d,E=function(){var L,U,V,Z,ee,oe,re,ie,ue;ee=x,ie=nm(oe=a),ue=oe.getParam("language_url","","string"),!1===fl.hasCode(ie)&&"en"!==ie&&ee.add(re=""!==ue?ue:oe.editorManager.baseURL+"/langs/"+ie+".js",Ut,void 0,function(){W1(oe,"LanguageLoadError",G1("language",re,ie))}),V=x,on(function(de){for(var he=[],Ie=function(ve){he.push(ve)},We=0;We<de.length;We++)de[We].each(Ie);return he}([PM(Z=a,"default",d),H.from(Z.getParam("icons_url","","string")).filter(function(de){return 0<de.length}).map(function(de){return{url:de,name:H.none()}}).orThunk(function(){return PM(Z,q_(Z),"")})]),function(de){V.add(de.url,Ut,void 0,function(){W1(Z,"IconsLoadError",G1("icons",de.url,de.name.getOrUndefined()))})}),U=d,At.each((L=a).getParam("external_plugins"),function(de,he){Id.load(he,de,Ut,void 0,function(){j1(L,de,he)}),L.settings.plugins+=" "+he}),At.each(yi(L).split(/[ ,]/),function(de){var he,Ie;(de=At.trim(de))&&!Id.urls[de]&&(tb(de)?(de=de.substr(1,de.length),he=Id.dependencies(de),At.each(he,function(We){var ve=Id.createUrl({prefix:"plugins/",resource:We,suffix:"/plugin"+U+".js"},We);Id.load(ve.resource,ve,Ut,void 0,function(){j1(L,ve.prefix+ve.resource+ve.suffix,ve.resource)})})):Id.load(de,Ie={prefix:"plugins/",resource:de,suffix:"/plugin"+U+".js"},Ut,void 0,function(){j1(L,Ie.prefix+Ie.resource+Ie.suffix,de)}))}),x.loadQueue(function(){a.removed||Hx(a)},a,function(){a.removed||Hx(a)})},z=ph(g=a);xr(z)?(tb(z)||ao(ac.urls,z)||((v=g.getParam("theme_url"))?ac.load(z,g.documentBaseURI.toAbsolute(v)):ac.load(z,"themes/"+z+"/theme"+A+".js")),C.loadQueue(function(){ac.waitFor(z,E)})):E()}(a,a.suffix)):Qp.bind(window,"ready",A)}(this)},jo.prototype.focus=function(a){this.execCommand("mceFocus",!1,a)},jo.prototype.hasFocus=function(){return Oa(this)},jo.prototype.execCallback=function(a){for(var d=[],g=1;g<arguments.length;g++)d[g-1]=arguments[g];var v,x=this.settings[a];if(x)return this.callbackLookup&&(v=this.callbackLookup[a])&&(x=v.func,v=v.scope),"string"==typeof x&&(v=(v=x.replace(/\.\w+$/,""))?P0(v):0,x=P0(x),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[a]={func:x,scope:v}),x.apply(v||this,d)},jo.prototype.translate=function(a){return fl.translate(a)},jo.prototype.getParam=function(a,d,g){return C=d,U=(x=a)in(v=this).settings?v.settings[x]:C,"hash"===(A=g)?(L={},"string"==typeof(z=U)?on(0<z.indexOf("=")?z.split(/[;,](?![^=;,]*(?:[;,]|$))/):z.split(","),function(V){var Z=V.split("=");L[At.trim(Z[0])]=At.trim(1<Z.length?Z[1]:Z[0])}):L=z,L):"string"===A?Eh(xr,v,x).getOr(C):"number"===A?Eh(Rn,v,x).getOr(C):"boolean"===A?Eh(Zi,v,x).getOr(C):"object"===A?Eh(Fn,v,x).getOr(C):"array"===A?Eh(un,v,x).getOr(C):"string[]"===A?Eh((E=xr,function(V){return un(V)&&sr(V,E)}),v,x).getOr(C):"function"===A?Eh(dn,v,x).getOr(C):U;var v,x,C,A,E,z,L,U},jo.prototype.hasPlugin=function(a,d){return!(!Mt(yi(this).split(/[ ,]/),a)||d&&void 0===Id.get(a))},jo.prototype.nodeChanged=function(a){this._nodeChangeDispatcher.nodeChanged(a)},jo.prototype.addCommand=function(a,d,g){this.editorCommands.addCommand(a,d,g)},jo.prototype.addQueryStateHandler=function(a,d,g){this.editorCommands.addQueryStateHandler(a,d,g)},jo.prototype.addQueryValueHandler=function(a,d,g){this.editorCommands.addQueryValueHandler(a,d,g)},jo.prototype.addShortcut=function(a,d,g,v){this.shortcuts.add(a,d,g,v)},jo.prototype.execCommand=function(a,d,g,v){return this.editorCommands.execCommand(a,d,g,v)},jo.prototype.queryCommandState=function(a){return this.editorCommands.queryCommandState(a)},jo.prototype.queryCommandValue=function(a){return this.editorCommands.queryCommandValue(a)},jo.prototype.queryCommandSupported=function(a){return this.editorCommands.queryCommandSupported(a)},jo.prototype.show=function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(ob.show(this.getContainer()),ob.hide(this.id)),this.load(),this.fire("show"))},jo.prototype.hide=function(){var a=this,d=a.getDoc();a.hidden||(uk&&d&&!a.inline&&d.execCommand("SelectAll"),a.save(),a.inline?(a.getBody().contentEditable="false",a===a.editorManager.focusedEditor&&(a.editorManager.focusedEditor=null)):(ob.hide(a.getContainer()),ob.setStyle(a.id,"display",a.orgDisplay)),a.hidden=!0,a.fire("hide"))},jo.prototype.isHidden=function(){return!!this.hidden},jo.prototype.setProgressState=function(a,d){this.fire("ProgressState",{state:a,time:d})},jo.prototype.load=function(a){var d=this.getElement();if(this.removed)return"";if(d){(a=a||{}).load=!0;var g=nh(d)?d.value:d.innerHTML,v=this.setContent(g,a);return a.element=d,a.no_events||this.fire("LoadContent",a),a.element=d=null,v}},jo.prototype.save=function(a){var d,g,v=this,x=v.getElement();if(x&&v.initialized&&!v.removed)return(a=a||{}).save=!0,a.element=x,a.content=v.getContent(a),a.no_events||v.fire("SaveContent",a),"raw"===a.format&&v.fire("RawSaveContent",a),d=a.content,nh(x)?x.value=d:(!a.is_removing&&v.inline||(x.innerHTML=d),(g=ob.getParent(v.id,"form"))&&GM(g.elements,function(C){if(C.name===v.id)return C.value=d,!1})),a.element=x=null,!1!==a.set_dirty&&v.setDirty(!1),d},jo.prototype.setContent=function(a,d){return i0(this,a,d)},jo.prototype.getContent=function(a){return v=(g=void 0===(g=a)?{}:g).format||"html",x=g,Ad(this).editor.getContent(x,v);var g,v,x},jo.prototype.insertContent=function(a,d){d&&(a=sk({content:a},d)),this.execCommand("mceInsertContent",!1,a)},jo.prototype.resetContent=function(a){void 0===a?i0(this,this.startContent,{format:"raw"}):i0(this,a),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},jo.prototype.isDirty=function(){return!this.isNotDirty},jo.prototype.setDirty=function(a){var d=!this.isNotDirty;this.isNotDirty=!a,a&&a!==d&&this.fire("dirty")},jo.prototype.getContainer=function(){return this.container||(this.container=ob.get(this.editorContainer||this.id+"_parent")),this.container},jo.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},jo.prototype.getElement=function(){return this.targetElm||(this.targetElm=ob.get(this.id)),this.targetElm},jo.prototype.getWin=function(){var a;return this.contentWindow||(a=this.iframeElement)&&(this.contentWindow=a.contentWindow),this.contentWindow},jo.prototype.getDoc=function(){var a;return this.contentDocument||(a=this.getWin())&&(this.contentDocument=a.document),this.contentDocument},jo.prototype.getBody=function(){var a=this.getDoc();return this.bodyElement||(a?a.body:null)},jo.prototype.convertURL=function(a,d,g){var v=this.settings;return v.urlconverter_callback?this.execCallback("urlconverter_callback",a,g,!0,d):!v.convert_urls||g&&"LINK"===g.nodeName||0===a.indexOf("file:")||0===a.length?a:v.relative_urls?this.documentBaseURI.toRelative(a):this.documentBaseURI.toAbsolute(a,v.remove_script_host)},jo.prototype.addVisual=function(a){var d;d=a,ai(this).editor.addVisual(d)},jo.prototype.remove=function(){var a,d,g,v,x;(a=this).removed||(d=a._selectionOverrides,g=a.editorUpload,v=a.getBody(),x=a.getElement(),v&&a.save({is_removing:!0}),a.removed=!0,a.unbindAllNativeEvents(),a.hasHiddenInput&&x&&vl.remove(x.nextSibling),a.fire("remove"),a.editorManager.remove(a),!a.inline&&v&&vl.setStyle(a.id,"display",a.orgDisplay),a.fire("detach"),vl.remove(a.getContainer()),a0(d),a0(g),a.destroy())},jo.prototype.destroy=function(a){var d,g,v,x,C,A,E;g=a,A=(d=this).selection,E=d.dom,d.destroyed||(g||d.removed?(g||(d.editorManager.off("beforeunload",d._beforeUnload),d.theme&&d.theme.destroy&&d.theme.destroy(),a0(A),a0(E)),(x=(v=d).formElement)&&(x._mceOldSubmit&&(x.submit=x._mceOldSubmit,x._mceOldSubmit=null),vl.unbind(x,"submit reset",v.formEventDelegate)),(C=d).contentAreaContainer=C.formElement=C.container=C.editorContainer=null,C.bodyElement=C.contentDocument=C.contentWindow=null,C.iframeElement=C.targetElm=null,C.selection&&(C.selection=C.selection.win=C.selection.dom=C.selection.dom.doc=null),d.destroyed=!0):d.remove())},jo.prototype.uploadImages=function(a){return this.editorUpload.uploadImages(a)},jo.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},jo.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},jo.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},jo.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},jo.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},jo);function jo(a,d,g){var v,x,C,A,E,z,L,U,ee,oe,re,ie,de,he,Ie,We=this;function ve(Qe,Ye){return function(et,Ct){return Qe[et.toLowerCase()]=yn(yn({},Ct),{type:Ye})}}this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=g,this.documentBaseUrl=g.documentBaseURL,sk(this,pS),this.settings=(ee=g.defaultSettings,re=this.documentBaseUrl,ie=dM,de={id:a,theme:"silver",toolbar_mode:Xf(oe=d,"floating"),plugins:"",document_base_url:re,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:this.convertURL,url_converter_scope:this},he=yn(yn({},de),ie?Fy:{}),!1!==(Ie=function(a,d,g,v,x){var C,A,E,z,L,U,V,Z,ee=a?{mobile:(C=d,A={resize:!1,toolbar_mode:Xf(x.mobile||{},"scrolling"),toolbar_sticky:!1},yn(yn(yn({},Fy),A),C?{menubar:!1}:{}))}:{},oe=(L=["mobile"],St(s0(ee,x),function(ie,ue){return Mt(L,ue)},hn(U={}),hn(V={})),{sections:Zt((Z={t:U,f:V}).t),settings:Zt(Z.f)}),re=At.extend(g,v,oe.settings(),a&&ic(oe,"mobile")?function(ie){void 0===ie&&(ie={});var ue=Vn(oe.sections(),"mobile").getOr({});return At.extend({},ie,ue)}():{},{validate:!0,external_plugins:(E=v,z=oe.settings().external_plugins||{},E&&E.external_plugins?At.extend({},E.external_plugins,z):z)});return function(a,d,g,v){var x,C,A,E,z,L,U,V,Z=ix(g.forced_plugins),ee=ix(v.plugins),oe=ic(x=d,"mobile")?x.sections().mobile:{},ie=(E=d,z=ee,L=oe.plugins?ix(oe.plugins):ee,C=(A=a)&&(V=(U=E).sections(),ic(U,"mobile")&&"mobile"===V.mobile.theme)?hr(L,_e(Mt,Cw)):A&&ic(E,"mobile")?L:z,[].concat(ix(Z)).concat(ix(C)));if(wr.browser.isIE()&&Mt(ie,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return At.extend(v,{plugins:ie.join(" ")})}(a,oe,v,re)}(fM||hM,fM,he,ee,oe)).deprecation_warnings&&function(a,d){var g,v,x,C,A,E,z,L=(g=a,v=hr(zy,function(re){return ao(g,re)}),!1!==(x=g.forced_root_block)&&""!==x||v.push("forced_root_block (false only)"),ia(v)),U=(z=At.makeMap(d.plugins," "),ia(ot(ot([],hr(ww,oe),!0),_s(Sw,function(re){return oe(re)?[re+" (moving to premium)"]:[]}),!0))),V=0<U.length,Z=0<L.length,ee="mobile"===d.theme;function oe(re){return ao(z,re)}(V||Z||ee)&&(C=ee?"\n\nThemes:\n- mobile":"",A=V?"\n\nPlugins:\n- "+U.join("\n- "):"",E=Z?"\n\nSettings:\n- "+L.join("\n- "):"",console.warn("The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information."+C+A+E))}(oe,Ie),Ie),this.settings.suffix&&(g.suffix=this.settings.suffix),this.suffix=g.suffix,this.settings.base_url&&g._setBaseUrl(this.settings.base_url),this.baseUri=g.baseURI,this.settings.referrer_policy&&(Pi.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),ci.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),Yi.languageLoad=this.settings.language_load,Yi.baseURL=g.baseURL,this.id=a,this.setDirty(!1),this.documentBaseURI=new He(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new ak(this),this.editorCommands=new rk(this),this.settings.cache_suffix&&(wr.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:{addAutocompleter:(E={},(v={addButton:ve(x={},"button"),addGroupToolbarButton:ve(x,"grouptoolbarbutton"),addToggleButton:ve(x,"togglebutton"),addMenuButton:ve(x,"menubutton"),addSplitButton:ve(x,"splitbutton"),addMenuItem:ve(C={},"menuitem"),addNestedMenuItem:ve(C,"nestedmenuitem"),addToggleMenuItem:ve(C,"togglemenuitem"),addAutocompleter:ve(A={},"autocompleter"),addContextMenu:ve(z={},"contextmenu"),addContextToolbar:ve(L={},"contexttoolbar"),addContextForm:ve(L,"contextform"),addSidebar:ve(U={},"sidebar"),addIcon:function(Qe,Ye){return E[Qe.toLowerCase()]=Ye},getAll:function(){return{buttons:x,menuItems:C,icons:E,popups:A,contextMenus:z,contextToolbars:L,sidebars:U}}}).addAutocompleter),addButton:v.addButton,addContextForm:v.addContextForm,addContextMenu:v.addContextMenu,addContextToolbar:v.addContextToolbar,addIcon:v.addIcon,addMenuButton:v.addMenuButton,addMenuItem:v.addMenuItem,addNestedMenuItem:v.addNestedMenuItem,addSidebar:v.addSidebar,addSplitButton:v.addSplitButton,addToggleButton:v.addToggleButton,addGroupToolbarButton:v.addGroupToolbarButton,addToggleMenuItem:v.addToggleMenuItem,getAll:v.getAll},styleSheetLoader:void 0,show:Ut,hide:Ut,enable:Ut,disable:Ut,isDisabled:_r};var Se,Oe,Je,ct,gt,Ge=(ct=vi("design"),gt=vi({design:{activate:Ut,deactivate:Ut,editorReadOnly:!1},readonly:{activate:Ut,deactivate:Ut,editorReadOnly:!0}}),(Oe=Se=this).serializer?hS(Oe):Oe.on("PreInit",function(){hS(Oe)}),(Je=Se).on("ShowCaret",function(Qe){zh(Je)&&Qe.preventDefault()}),Je.on("ObjectSelected",function(Qe){zh(Je)&&Qe.preventDefault()}),{isReadOnly:function(){return zh(Se)},set:function(Qe){return function(Ye,et,Ct,en){if(en!==Ct.get()){if(!ao(et,en))throw new Error("Editor mode '"+en+"' is invalid");Ye.initialized?ik(Ye,Ct,et,en):Ye.on("init",function(){return ik(Ye,Ct,et,en)})}}(Se,gt.get(),ct,Qe)},get:function(){return ct.get()},register:function(Qe,Ye){gt.set(function(et,Ct,en){var sn;if(Mt(pD,Ct))throw new Error("Cannot override default mode "+Ct);return yn(yn({},et),((sn={})[Ct]=yn(yn({},en),{deactivate:function(){try{en.deactivate()}catch(Tt){console.error("problem while deactivating editor mode "+Ct+":",Tt)}}}),sn))}(gt.get(),Qe,Ye))}});this.mode=Ge,this.setMode=Ge.set,g.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=Gr.overrideDefaults(function(){return{context:We.inline?We.getBody():We.getDoc(),element:We.getBody()}})}function x_(a){var d=a.type;Wm(N0.get(),function(g){switch(d){case"scroll":g.fire("ScrollWindow",a);break;case"resize":g.fire("ResizeWindow",a)}})}function Fh(a){a!==qM&&(a?Gr(window).on("resize scroll",x_):Gr(window).off("resize scroll",x_),qM=a)}function lk(a){var d=Li;delete $a[a.id];for(var g=0;g<$a.length;g++)if($a[g]===a){$a.splice(g,1);break}return Li=hr(Li,function(v){return a!==v}),N0.activeEditor===a&&(N0.activeEditor=0<Li.length?Li[0]:null),N0.focusedEditor===a&&(N0.focusedEditor=null),d.length!==Li.length}var qx,Nl=ci.DOM,jM=At.explode,Wm=At.each,UM=At.extend,vD=0,qM=!1,$a=[],Li=[],R0="CSS1Compat"!==document.compatMode,N0=yn(yn({},O0),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:Gr,majorVersion:"5",minorVersion:"10.0",releaseDate:"2021-10-11",editors:$a,i18n:fl,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var a,d="",g=He.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(g)&&(g=g.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(g)||(g+="/"));var v=window.tinymce||window.tinyMCEPreInit;if(v)a=v.base||v.baseURL,d=v.suffix;else{for(var x,C=document.getElementsByTagName("script"),A=0;A<C.length;A++)if(""!==(x=C[A].src||"")){var E=x.substring(x.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(x)){-1!==E.indexOf(".min")&&(d=".min"),a=x.substring(0,x.lastIndexOf("/"));break}}!a&&document.currentScript&&(-1!==(x=document.currentScript.src).indexOf(".min")&&(d=".min"),a=x.substring(0,x.lastIndexOf("/")))}this.baseURL=new He(g).toAbsolute(a),this.documentBaseURL=g,this.baseURI=new He(this.baseURL),this.suffix=d,this.on("AddEditor",_e(qv,this)),this.on("RemoveEditor",_e(go,this))},overrideDefaults:function(a){var d=a.base_url;d&&this._setBaseUrl(d),a.suffix&&(this.suffix=a.suffix);var v=(this.defaultSettings=a).plugin_base_urls;void 0!==v&&qt(v,function(x,C){Yi.PluginManager.urls[C]=x})},init:function(a){function d(z){var L=z.id;return L||(L=Vn(z,"name").filter(function(U){return!Nl.get(U)}).getOrThunk(Nl.uniqueId),z.setAttribute("id",L)),L}function g(z,L){return L.constructor===RegExp?L.test(z.className):Nl.hasClass(z,L)}var v,x=this,C=At.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),A=function(z){v=z},E=function(){function z(ee,oe,re){var ie=new ib(ee,oe,x);Z.push(ie),ie.on("init",function(){++V===L.length&&A(Z)}),ie.targetElm=ie.targetElm||re,ie.render()}var L,U,V=0,Z=[];Nl.unbind(window,"ready",E),(U=a.onpageload)&&U.apply(x,[]),L=Gr.unique(function(ee){var oe=[];if(wr.browser.isIE()&&wr.browser.version.major<11)return du("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(R0)return du("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(ee.types)return Wm(ee.types,function(ie){oe=oe.concat(Nl.select(ie.selector))}),oe;if(ee.selector)return Nl.select(ee.selector);if(ee.target)return[ee.target];switch(ee.mode){case"exact":var re=ee.elements||"";0<re.length&&Wm(jM(re),function(ie){var ue=Nl.get(ie);ue?oe.push(ue):Wm(document.forms,function(de){Wm(de.elements,function(he){he.name===ie&&(ie="mce_editor_"+vD++,Nl.setAttrib(he,"id",ie),oe.push(he))})})});break;case"textareas":case"specific_textareas":Wm(Nl.select("textarea"),function(ie){ee.editor_deselector&&g(ie,ee.editor_deselector)||ee.editor_selector&&!g(ie,ee.editor_selector)||oe.push(ie)})}return oe}(a)),a.types?Wm(a.types,function(ee){At.each(L,function(oe){return!Nl.is(oe,ee.selector)||(z(d(oe),UM({},a,ee),oe),!1)})}):(At.each(L,function(ee){var oe;(oe=x.get(ee.id))&&oe.initialized&&!(oe.getContainer()||oe.getBody()).parentNode&&(lk(oe),oe.unbindAllNativeEvents(),oe.destroy(!0),oe.removed=!0)}),0===(L=At.grep(L,function(ee){return!x.get(ee.id)})).length?A([]):Wm(L,function(ee){a.inline&&ee.tagName.toLowerCase()in C?du("Could not initialize inline editor on invalid inline target element",ee):z(d(ee),a,ee)}))};return x.settings=a,Nl.bind(window,"ready",E),new qe(function(z){v?z(v):A=function(L){z(L)}})},get:function(a){return 0===arguments.length?Li.slice(0):xr(a)?gi(Li,function(d){return d.id===a}).getOr(null):Rn(a)&&Li[a]||null},add:function(a){var d=this;return $a[a.id]===a||(null===d.get(a.id)&&("length"!==a.id&&($a[a.id]=a),$a.push(a),Li.push(a)),Fh(!0),d.activeEditor=a,d.fire("AddEditor",{editor:a}),qx||(qx=function(g){var v=d.fire("BeforeUnload");if(v.returnValue)return g.preventDefault(),g.returnValue=v.returnValue,v.returnValue},window.addEventListener("beforeunload",qx))),a},createEditor:function(a,d){return this.add(new ib(a,d,this))},remove:function(a){var d,g,v=this;if(a){if(!xr(a))return Qn(v.get((g=a).id))?null:(lk(g)&&v.fire("RemoveEditor",{editor:g}),0===Li.length&&window.removeEventListener("beforeunload",qx),g.remove(),Fh(0<Li.length),g);Wm(Nl.select(a),function(x){(g=v.get(x.id))&&v.remove(g)})}else for(d=Li.length-1;0<=d;d--)v.remove(Li[d])},execCommand:function(a,d,g){var v=this.get(g);switch(a){case"mceAddEditor":return this.get(g)||new ib(g,this.settings,this).render(),!0;case"mceRemoveEditor":return v&&v.remove(),!0;case"mceToggleEditor":return v?v.isHidden()?v.show():v.hide():this.execCommand("mceAddEditor",!1,g),!0}return!!this.activeEditor&&this.activeEditor.execCommand(a,d,g)},triggerSave:function(){Wm(Li,function(a){a.save()})},addI18n:function(a,d){fl.add(a,d)},translate:function(a){return fl.translate(a)},setActive:function(a){var d=this.activeEditor;this.activeEditor!==a&&(d&&d.fire("deactivate",{relatedTarget:a}),a.fire("activate",{relatedTarget:d})),this.activeEditor=a},_setBaseUrl:function(a){this.baseURL=new He(this.documentBaseURL).toAbsolute(a.replace(/\/+$/,"")),this.baseURI=new He(this.baseURL)}});function ck(a,d,g){var v=d.x,x=d.y,C=a.w,A=a.h,E=d.w,z=d.h,L=(g||"").split("");return"b"===L[0]&&(x+=z),"r"===L[1]&&(v+=E),"c"===L[0]&&(x+=yS(z/2)),"c"===L[1]&&(v+=yS(E/2)),"b"===L[3]&&(x-=A),"r"===L[4]&&(v-=C),"c"===L[3]&&(x-=yS(A/2)),"c"===L[4]&&(v-=yS(C/2)),ab(v,x,C,A)}function Tc(){}function ab(a,d,g,v){return{x:a,y:d,w:g,h:v}}N0.setup();var Ll,Xx,L0,vS,ev=Math.min,B0=Math.max,yS=Math.round,XM={inflate:function(a,d,g){return ab(a.x-d,a.y-g,a.w+2*d,a.h+2*g)},relativePosition:ck,findBestRelativePosition:function(a,d,g,v){for(var x,C=0;C<v.length;C++)if((x=ck(a,d,v[C])).x>=g.x&&x.x+x.w<=g.w+g.x&&x.y>=g.y&&x.y+x.h<=g.h+g.y)return v[C];return null},intersect:function(a,d){var g=B0(a.x,d.x),v=B0(a.y,d.y),x=ev(a.x+a.w,d.x+d.w),C=ev(a.y+a.h,d.y+d.h);return x-g<0||C-v<0?null:ab(g,v,x-g,C-v)},clamp:function(a,d,g){var v=a.x,x=a.y,C=a.x+a.w,A=a.y+a.h,E=d.x+d.w,z=d.y+d.h,L=B0(0,d.x-v),U=B0(0,d.y-x),V=B0(0,C-E),Z=B0(0,A-z);return v+=L,x+=U,g&&(C+=L,A+=U,v-=V,x-=Z),ab(v,x,(C-=V)-v,(A-=Z)-x)},create:ab,fromClientRect:function(a){return ab(a.left,a.top,a.width,a.height)}},yD=(Ll={},Xx={},{load:function(a,d){var g='Script at URL "'+d+'" failed to load',v='Script at URL "'+d+"\" did not call `tinymce.Resource.add('"+a+"', data)` within 1 second";if(void 0!==Ll[a])return Ll[a];var x=new qe(function(C,A){var E=function(z,L,U){function V(ie){return function(){for(var ue=[],de=0;de<arguments.length;de++)ue[de]=arguments[de];Z||(Z=!0,null!==ee&&(clearTimeout(ee),ee=null),ie.apply(null,ue))}}void 0===U&&(U=1e3);var Z=!1,ee=null,oe=V(z),re=V(L);return{start:function(){for(var ie=[],ue=0;ue<arguments.length;ue++)ie[ue]=arguments[ue];Z||null!==ee||(ee=setTimeout(function(){return re.apply(null,ie)},U))},resolve:oe,reject:re}}(C,A);Xx[a]=E.resolve,Pi.ScriptLoader.loadScript(d,function(){return E.start(v)},function(){return E.reject(g)})});return Ll[a]=x},add:function(a,d){void 0!==Xx[a]&&(Xx[a](d),delete Xx[a]),Ll[a]=qe.resolve(d)}}),Yx=At.each,bS=At.extend;Tc.extend=L0=function(a){function d(){var C,A,E;if(!vS&&(this.init&&this.init.apply(this,arguments),A=this.Mixins))for(C=A.length;C--;)(E=A[C]).init&&E.init.apply(this,arguments)}function g(){return this}var v=this.prototype;vS=!0;var x=new this;return vS=!1,a.Mixins&&(Yx(a.Mixins,function(C){for(var A in C)"init"!==A&&(a[A]=C[A])}),v.Mixins&&(a.Mixins=v.Mixins.concat(a.Mixins))),a.Methods&&Yx(a.Methods.split(","),function(C){a[C]=g}),a.Properties&&Yx(a.Properties.split(","),function(C){var A="_"+C;a[C]=function(E){return void 0!==E?(this[A]=E,this):this[A]}}),a.Statics&&Yx(a.Statics,function(C,A){d[A]=C}),a.Defaults&&v.Defaults&&(a.Defaults=bS({},v.Defaults,a.Defaults)),qt(a,function(C,A){var E,z;x[A]="function"==typeof C&&v[A]?(E=A,z=C,function(){var L=this._super;this._super=v[E];var U=z.apply(this,arguments);return this._super=L,U}):C}),d.prototype=x,(d.constructor=d).extend=L0,d};var sb,tv,__,z0=Math.min,w_=Math.max,ub=Math.round,S_={serialize:function(a){var d=JSON.stringify(a);return xr(d)?d.replace(/[\u0080-\uFFFF]/g,function(g){var v=g.charCodeAt(0).toString(16);return"\\u"+"0000".substring(v.length)+v}):d},parse:function(a){try{return JSON.parse(a)}catch(d){}}},YM={callbacks:{},count:0,send:function(a){var d=this,g=ci.DOM,v=(void 0!==a.count?a:d).count,x="tinymce_jsonp_"+v;d.callbacks[v]=function(C){g.remove(x),delete d.callbacks[v],a.callback(C)},g.add(g.doc.body,"script",{id:x,src:a.url,type:"text/javascript"}),d.count++}},Zx=yn(yn({},O0),{send:function(a){var d,g=0,v=function(){!a.async||4===d.readyState||1e4<g++?(a.success&&g<1e4&&200===d.status?a.success.call(a.success_scope,""+d.responseText,d,a):a.error&&a.error.call(a.error_scope,1e4<g?"TIMED_OUT":"GENERAL",d,a),d=null):Di.setTimeout(v,10)};if(a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=!1!==a.async,a.data=a.data||"",Zx.fire("beforeInitialize",{settings:a}),(d=new XMLHttpRequest).overrideMimeType&&d.overrideMimeType(a.content_type),d.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.crossDomain&&(d.withCredentials=!0),a.content_type&&d.setRequestHeader("Content-Type",a.content_type),a.requestheaders&&At.each(a.requestheaders,function(x){d.setRequestHeader(x.key,x.value)}),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),(d=Zx.fire("beforeSend",{xhr:d,settings:a}).xhr).send(a.data),!a.async)return v();Di.setTimeout(v,10)}}),ZM=At.extend,Iu=($x.sendRPC=function(a){return(new $x).send(a)},$x.prototype.send=function(a){var d=a.error,g=a.success,v=ZM(this.settings,a);v.success=function(x,C){(x=void 0===(x=S_.parse(x))?{error:"JSON Parse error."}:x).error?d.call(v.error_scope||v.scope,x.error,C):g.call(v.success_scope||v.scope,x.result)},v.error=function(x,C){d&&d.call(v.error_scope||v.scope,x,C)},v.data=S_.serialize({id:a.id||"c"+this.count++,method:a.method,params:a.params}),v.content_type="application/json",Zx.send(v)},$x);function $x(a){this.settings=ZM({},a),this.count=0}try{var C_,Kx="__storage_test__";(C_=window.localStorage).setItem(Kx,Kx),C_.removeItem(Kx)}catch(a){sb={},tv=[],__={getItem:function(d){return sb[d]||null},setItem:function(d,g){tv.push(d),sb[d]=String(g)},key:function(d){return tv[d]},removeItem:function(d){tv=tv.filter(function(g){return g===d}),delete sb[d]},clear:function(){tv=[],sb={}},length:0},Object.defineProperty(__,"length",{get:function(){return tv.length},configurable:!1,enumerable:!1}),C_=__}var dk=At.extend(N0,{geom:{Rect:XM},util:{Promise:qe,Delay:Di,Tools:At,VK:mr,URI:He,Class:Tc,EventDispatcher:rb,Observable:O0,I18n:fl,XHR:Zx,JSON:S_,JSONRequest:Iu,JSONP:YM,LocalStorage:C_,Color:function(a){function d(A){var E;return"object"==typeof A?"r"in A?(v=A.r,x=A.g,C=A.b):"v"in A&&function(z,L,U){if(z=(parseInt(z,10)||0)%360,L=parseInt(L,10)/100,U=parseInt(U,10)/100,L=w_(0,z0(L,1)),U=w_(0,z0(U,1)),0!==L){var V=z/60,Z=U*L,ee=Z*(1-Math.abs(V%2-1)),oe=U-Z;switch(Math.floor(V)){case 0:v=Z,x=ee,C=0;break;case 1:v=ee,x=Z,C=0;break;case 2:v=0,x=Z,C=ee;break;case 3:v=0,x=ee,C=Z;break;case 4:v=ee,x=0,C=Z;break;case 5:v=Z,x=0,C=ee;break;default:v=x=C=0}v=ub(255*(v+oe)),x=ub(255*(x+oe)),C=ub(255*(C+oe))}else v=x=C=ub(255*U)}(A.h,A.s,A.v):(E=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(A))?(v=parseInt(E[1],10),x=parseInt(E[2],10),C=parseInt(E[3],10)):(E=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(A))?(v=parseInt(E[1],16),x=parseInt(E[2],16),C=parseInt(E[3],16)):(E=/#([0-F])([0-F])([0-F])/gi.exec(A))&&(v=parseInt(E[1]+E[1],16),x=parseInt(E[2]+E[2],16),C=parseInt(E[3]+E[3],16)),v=v<0?0:255<v?255:v,x=x<0?0:255<x?255:x,C=C<0?0:255<C?255:C,g}var g={},v=0,x=0,C=0;return a&&d(a),g.toRgb=function(){return{r:v,g:x,b:C}},g.toHsv=function(){return A=v,E=x,z=C,U=0,(V=z0(A/=255,z0(E/=255,z/=255)))===(Z=w_(A,w_(E,z)))?{h:0,s:0,v:100*(U=V)}:(L=(Z-V)/Z,{h:ub(60*((A===V?3:z===V?1:5)-(A===V?E-z:z===V?A-E:z-A)/((U=Z)-V))),s:ub(100*L),v:ub(100*U)});var A,E,z,L,U,V,Z},g.toHex=function(){function A(E){return 1<(E=parseInt(E,10).toString(16)).length?E:"0"+E}return"#"+A(v)+A(x)+A(C)},g.parse=d,g},ImageUploader:function(a){var d=u0(),g=Mw(a,d);return{upload:function(v,x){return g.upload(v,(x=void 0===x||x)?kw(a):void 0)}}}},dom:{EventUtils:Kh,Sizzle:_o,DomQuery:Gr,TreeWalker:ea,TextSeeker:yc,DOMUtils:ci,ScriptLoader:Pi,RangeUtils:Wf,Serializer:yw,StyleSheetLoader:Si,ControlSelection:Bb,BookmarkManager:uo,Selection:N1,Event:Kh.Event},html:{Styles:an,Entities:Xa,Node:se,Schema:Xe,SaxParser:Ue,DomParser:B1,Writer:yt,Serializer:Bn},Env:wr,AddOnManager:Yi,Annotator:Nb,Formatter:vM,UndoManager:fx,EditorCommands:rk,WindowManager:lx,NotificationManager:ax,EditorObservable:pS,Shortcuts:ak,Editor:ib,FocusManager:B,EditorManager:N0,DOM:ci.DOM,ScriptLoader:Pi.ScriptLoader,PluginManager:Id,ThemeManager:ac,IconManager:ux,Resource:yD,trim:At.trim,isArray:At.isArray,is:At.is,toArray:At.toArray,makeMap:At.makeMap,each:At.each,map:At.map,grep:At.grep,inArray:At.inArray,extend:At.extend,create:At.create,walk:At.walk,createNS:At.createNS,resolve:At.resolve,explode:At.explode,_addCacheSuffix:At._addCacheSuffix,isOpera:wr.opera,isWebKit:wr.webkit,isIE:wr.ie,isGecko:wr.gecko,isMac:wr.mac}),fk=dk;window.tinymce=fk,window.tinyMCE=fk,function(a){if("object"==typeof module)try{module.exports=a}catch(d){}}(dk)}(),function(){"use strict";function Un(u){return function(e){return n=typeof(t=e),(null===t?"null":"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n)===u;var t,n}}function Co(u){return function(e){return typeof e===u}}function Yr(u){return function(e){return u===e}}function Cr(u){return null==u}function Zn(u,e){if(Eo(u)){for(var t=0,n=u.length;t<n;++t)if(!e(u[t]))return;return 1}}function ht(){}function En(u,e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return u(e.apply(null,t))}}function ze(u){return function(){return u}}function Ut(u){return u}function Jn(u,e){return u===e}var lr=Un("string"),Zt=Un("object"),Eo=Un("array"),cs=Yr(null),Bi=Co("boolean"),Gn=Yr(void 0),Sn=function(u){return!Cr(u)},xr=Co("function"),Fn=Co("number");function un(u){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.concat(n);return u.apply(null,o)}}function Qn(u){return function(e){return!u(e)}}function Zi(u){return function(){throw new Error(u)}}var Er=ze(!1),dn=ze(!0),Rn=tinymce.util.Tools.resolve("tinymce.ThemeManager"),_e=function(){return(_e=Object.assign||function(u){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(u[r]=e[r]);return u}).apply(this,arguments)};function Dn(u,e){var t={};for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&e.indexOf(r)<0&&(t[r]=u[r]);if(null!=u&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(u);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(u,r[n])&&(t[r[n]]=u[r[n]]);return t}function me(u,e,t){if(t||2===arguments.length)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||((n=n||Array.prototype.slice.call(e,0,r))[r]=e[r]);return u.concat(n||Array.prototype.slice.call(e))}function Kt(){return Pr}var Pr={fold:function(u,e){return u()},isSome:Er,isNone:dn,getOr:Ut,getOrThunk:_r,getOrDie:function(u){throw new Error(u||"error: getOrDie called on none.")},getOrNull:ze(null),getOrUndefined:ze(void 0),or:Ut,orThunk:_r,map:Kt,each:ht,bind:Kt,exists:Er,forall:dn,filter:function(){return Pr},toArray:function(){return[]},toString:ze("none()")};function _r(u){return u()}function ro(u,e){return hs.call(u,e)}function Nn(u,e){for(var t=0,n=u.length;t<n;t++)if(e(u[t],t))return!0;return!1}function ar(u,e){for(var t=[],n=0;n<u;n++)t.push(e(n));return t}function rn(u,e){for(var t=[],n=0;n<u.length;n+=e){var r=fs.call(u,n,n+e);t.push(r)}return t}function Mt(u,e){for(var t=u.length,n=new Array(t),r=0;r<t;r++)n[r]=e(u[r],r);return n}function tr(u,e){for(var t=[],n=[],r=0,o=u.length;r<o;r++){var i=u[r];(e(i,r)?t:n).push(i)}return{pass:t,fail:n}}function xt(u,e){for(var t=[],n=0,r=u.length;n<r;n++){var o=u[n];e(o,n)&&t.push(o)}return t}function on(u,e,t){return function(n){for(var o=n.length-1;0<=o;o--)t=e(t,n[o],o)}(u),t}function Jo(u,e,t){return wn(u,function(n,r){t=e(t,n,r)}),t}function Ao(u,e){return function(t,n,r){for(var o=0,i=t.length;o<i;o++){var s=t[o];if(n(s,o))return H.some(s);if(r(s,o))break}return H.none()}(u,e,Er)}function hr(u,e){for(var t=0,n=u.length;t<n;t++)if(e(u[t],t))return H.some(t);return H.none()}function pe(u){for(var e=[],t=0,n=u.length;t<n;++t){if(!Eo(u[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+u);Pa.apply(e,u[t])}return e}function Dr(u,e){return pe(Mt(u,e))}function je(u,e){for(var t=0,n=u.length;t<n;++t)if(!0!==e(u[t],t))return!1;return!0}function gi(u){var e=fs.call(u,0);return e.reverse(),e}function Es(u,e){return xt(u,function(t){return!fi(e,t)})}function _s(u,e){for(var t={},n=0,r=u.length;n<r;n++){var o=u[n];t[String(o)]=e(o,n)}return t}function sr(u){return[u]}function zi(u,e){var t=fs.call(u,0);return t.sort(e),t}function ds(u,e){return 0<=e&&e<u.length?H.some(u[e]):H.none()}function ia(u){return ds(u,0)}function Ps(u){return ds(u,u.length-1)}function ut(u,e){for(var t=0;t<u.length;t++){var n=e(u[t],t);if(n.isSome())return n}return H.none()}function dt(u,e){for(var t=ri(u),n=0,r=t.length;n<r;n++){var o=t[n];e(u[o],o)}}function Pt(u,e){return bl(u,function(t,n){return{k:n,v:e(t,n)}})}function qt(u,e){var t=[];return dt(u,function(n,r){t.push(e(n,r))}),t}function Cn(u,e){for(var t=ri(u),n=0,r=t.length;n<r;n++){var o=t[n],i=u[o];if(e(i,o,u))return H.some(i)}return H.none()}function hn(u){return qt(u,Ut)}function St(u,e){return yn(u,e)?H.from(u[e]):H.none()}function Lr(u,e){return yn(u,e)&&null!=u[e]}function Vn(u,e,t){return void 0===t&&(t=Jn),u.exists(function(n){return t(n,e)})}function po(u){for(var e=[],t=function(r){e.push(r)},n=0;n<u.length;n++)u[n].each(t);return e}function si(u,e){return u?H.some(e):H.none()}function mi(u,e,t){return""===e||u.length>=e.length&&u.substr(t,t+e.length)===e}function lo(u,e){return-1!==u.indexOf(e)}function tl(u){return 0<u.length}function Fi(u){return void 0!==u.style&&xr(u.style.getPropertyValue)}function Ka(u){if(null==u)throw new Error("Node cannot be null or undefined");return{dom:u}}var aa,Ja=function(u){function e(){return r}function t(o){return o(u)}var n=ze(u),r={fold:function(o,i){return i(u)},isSome:dn,isNone:Er,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(o){return Ja(o(u))},each:function(o){o(u)},bind:t,exists:t,forall:t,filter:function(o){return o(u)?r:Pr},toArray:function(){return[u]},toString:function(){return"some("+u+")"}};return r},H={some:Ja,none:Kt,from:function(u){return null==u?Pr:Ja(u)}},fs=Array.prototype.slice,hs=Array.prototype.indexOf,Pa=Array.prototype.push,fi=function(u,e){return-1<ro(u,e)},wn=function(u,e){for(var t=0,n=u.length;t<n;t++)e(u[t],t)},hu=xr(Array.from)?Array.from:function(u){return fs.call(u)},ri=Object.keys,ao=Object.hasOwnProperty,bl=function(u,e){var t={};return dt(u,function(n,r){var o=e(n,r);t[o.k]=o.v}),t},yn=function(u,e){return ao.call(u,e)},ot=function(u,e,t){return u.isSome()&&e.isSome()?H.some(t(u.getOrDie(),e.getOrDie())):H.none()},Nt=function(u,e){return mi(u,e,0)},Me=function(u,e){return mi(u,e,u.length-e.length)},$e=(aa=/^\s+|\s+$/g,function(u){return u.replace(aa,"")}),Pe={fromHtml:function(u,e){var t=(e||document).createElement("div");if(t.innerHTML=u,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",u),new Error("HTML must have a single root node");return Ka(t.childNodes[0])},fromTag:function(u,e){return Ka((e||document).createElement(u))},fromText:function(u,e){return Ka((e||document).createTextNode(u))},fromDom:Ka,fromPoint:function(u,e,t){return H.from(u.dom.elementFromPoint(e,t)).map(Ka)}};function mt(u){return u.dom.nodeName.toLowerCase()}function lt(u){return function(e){return e.dom.nodeType===u}}function pt(u){var e,t=!1;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t||(t=!0,e=u.apply(null,n)),e}}function mn(u,e){var t=String(e).toLowerCase();return Ao(u,function(n){return n.search(t)})}function Qt(u){return function(e){return lo(e,u)}}function ln(u){return window.matchMedia(u).matches}function kn(u,e){var t=u.dom;if(1!==t.nodeType)return!1;var n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}function nn(u){return 1!==u.nodeType&&9!==u.nodeType&&11!==u.nodeType||0===u.childElementCount}function Rt(u,e){return u.dom===e.dom}function $t(u,e){return Ca().browser.isIE()?(r=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(u.dom.compareDocumentPosition(e.dom)&r)):(o=u.dom)!==(i=e.dom)&&o.contains(i);var r,o,i}function rt(u){return Pe.fromDom(u.dom.ownerDocument)}function vr(u){return od(u)?u:rt(u)}function yr(u){return Pe.fromDom(vr(u).dom.documentElement)}function cr(u){return Pe.fromDom(vr(u).dom.defaultView)}function ur(u){return H.from(u.dom.parentNode).map(Pe.fromDom)}function Jr(u){return H.from(u.dom.offsetParent).map(Pe.fromDom)}function ko(u){return Mt(u.dom.childNodes,Pe.fromDom)}function dr(u,e){return H.from(u.dom.childNodes[e]).map(Pe.fromDom)}function Qa(u,e){return{element:u,offset:e}}function Wn(u,e){var t=ko(u);return 0<t.length&&e<t.length?Qa(t[e],0):Qa(u,e)}function Rr(u){return _l(u)&&Sn(u.dom.host)}function Uo(u){return Rr(u)?u:Pe.fromDom(vr(u).dom.body)}function Va(u){return Pe.fromDom(u.dom.host)}function Ha(u,e,t){if(!(lr(t)||Bi(t)||Fn(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",u),new Error("Attribute value was not simple");u.setAttribute(e,t+"")}function rr(u,e,t){Ha(u.dom,e,t)}function Wi(u,e){var t=u.dom.getAttribute(e);return null===t?void 0:t}function ui(u,e){return H.from(Wi(u,e))}function Zs(u,e){var t=u.dom;return!(!t||!t.hasAttribute)&&t.hasAttribute(e)}function Mo(u,e){u.dom.removeAttribute(e)}function Eu(u,e,t){if(!lr(t))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",u),new Error("CSS value must be a string: "+t);Fi(u)&&u.style.setProperty(e,t)}function Vl(u,e){Fi(u)&&u.style.removeProperty(e)}function Ar(u,e,t){Eu(u.dom,e,t)}function lc(u,e){var t=u.dom;dt(e,function(n,r){Eu(t,r,n)})}function $i(u,e){var t=u.dom;dt(e,function(n,r){n.fold(function(){Vl(t,r)},function(o){Eu(t,r,o)})})}function Wa(u,e){var t=u.dom,n=window.getComputedStyle(t).getPropertyValue(e);return""!==n||Rs(u)?n:Rc(t,e)}function Gi(u,e){var n=Rc(u.dom,e);return H.from(n).filter(function(r){return 0<r.length})}function ji(u,e,t){var n=Pe.fromTag(u);return Ar(n,e,t),Gi(n,e).isSome()}function co(u,e){Vl(u.dom,e),Vn(ui(u,"style").map($e),"")&&Mo(u,"style")}function Qo(u){return u.dom.offsetWidth}function Hl(u,e){function t(r){var o=e(r);if(o<=0||null===o){var i=Wa(r,u);return parseFloat(i)||0}return o}function n(r,o){return Jo(o,function(i,s){var l=Wa(r,s),c=void 0===l?0:parseInt(l,10);return isNaN(c)?i:i+c},0)}return{set:function(r,o){if(!Fn(o)&&!o.match(/^[0-9]+$/))throw new Error(u+".set accepts only positive integer values. Value was "+o);var i=r.dom;Fi(i)&&(i.style[u]=o+"px")},get:t,getOuter:t,aggregate:n,max:function(r,o,i){var s=n(r,i);return s<o?o-s:0}}}function Ra(u){return Bu.get(u)}function Ec(u){return Bu.getOuter(u)}function wr(u,e){return void 0!==u?u:void 0!==e?e:0}function Pc(u){var e=u.dom.ownerDocument,t=e.body,n=e.defaultView,r=e.documentElement;if(t===u.dom)return oi(t.offsetLeft,t.offsetTop);var o=wr(null==n?void 0:n.pageYOffset,r.scrollTop),i=wr(null==n?void 0:n.pageXOffset,r.scrollLeft),s=wr(r.clientTop,t.clientTop),l=wr(r.clientLeft,t.clientLeft);return dc(u).translate(i-l,o-s)}function ws(u){return Cl.get(u)}function At(u){return Cl.getOuter(u)}function it(u){function e(){return u.stopPropagation()}function t(){return u.preventDefault()}var n=En(t,e);return{target:Pe.fromDom(function(r){if(sa()&&Sn(r.target)){var o=Pe.fromDom(r.target);if(Ui(o)&&Sl(o)&&r.composed&&r.composedPath){var i=r.composedPath();if(i)return ia(i)}}return H.from(r.target)}(u).getOr(u.target)),x:u.clientX,y:u.clientY,stop:e,prevent:t,kill:n,raw:u}}function Oi(u,e,t,n,r){var o,i,s=(o=t,i=n,function(l){o(l)&&i(it(l))});return u.dom.addEventListener(e,s,r),{unbind:un(Ms,u,e,s,r)}}function td(u,e){ur(u).each(function(t){t.dom.insertBefore(e.dom,u.dom)})}function Wl(u,e){H.from(u.dom.nextSibling).map(Pe.fromDom).fold(function(){ur(u).each(function(t){Hi(t,e)})},function(t){td(t,e)})}function Ss(u,e){dr(u,0).fold(function(){Hi(u,e)},function(t){u.dom.insertBefore(e.dom,t.dom)})}function $s(u,e){wn(e,function(t){Hi(u,t)})}function ma(u){u.dom.textContent="",wn(ko(u),function(e){ja(e)})}function Pu(u){var e,t=ko(u);0<t.length&&(e=u,wn(t,function(n){td(e,n)})),ja(u)}function Ei(u){var e=void 0!==u?u.dom:document;return oi(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)}function qo(u,e,t){var n=(void 0!==t?t.dom:document).defaultView;n&&n.scrollTo(u,e)}function xl(u,e,t,n){return{x:u,y:e,width:t,height:n,right:u+t,bottom:e+n}}function es(u){var e=void 0===u?window:u,n=Ei(Pe.fromDom(e.document)),r=void 0===e?window:e;return(Ca().browser.isFirefox()?H.none():H.from(r.visualViewport)).fold(function(){var o=e.document.documentElement;return xl(n.left,n.top,o.clientWidth,o.clientHeight)},function(o){return xl(Math.max(o.pageLeft,n.left),Math.max(o.pageTop,n.top),o.width,o.height)})}function nd(u){var e,t=Ei(Pe.fromDom(document)),n=(e=Vo).owner(u),r=Um(e,n);return H.some(r).fold(un(Pc,u),function(o){var i=dc(u),s=on(o,function(l,c){var f=dc(c);return{left:l.left+f.left,top:l.top+f.top}},{left:0,top:0});return oi(s.left+i.left+t.left,s.top+i.top+t.top)})}function rd(u){var e=nd(u),t=At(u),n=Ec(u);return pn(e.left,e.top,t,n)}function gu(){return pf(0,0)}function Cs(u){function e(r){return function(){return t===r}}var t=u.current;return{current:t,version:u.version,isEdge:e("Edge"),isChrome:e("Chrome"),isIE:e("IE"),isOpera:e("Opera"),isFirefox:e(Gh),isSafari:e("Safari")}}function Ru(u){function e(r){return function(){return t===r}}var t=u.current;return{current:t,version:u.version,isWindows:e(Po),isiOS:e("iOS"),isAndroid:e(li),isOSX:e("OSX"),isLinux:e("Linux"),isSolaris:e(Hd),isFreeBSD:e(Nu),isChromeOS:e(Wd)}}"undefined"!=typeof window||Function("return this;")();var pi,Fd,Ui=lt(1),gs=lt(3),od=lt(9),_l=lt(11),pf=function(u,e){return{major:u,minor:e}},Gl={nu:pf,detect:function(u,e){var t,n,r=String(e).toLowerCase();return 0===u.length?gu():(n=function(i,s){for(var l=0;l<i.length;l++){var c=i[l];if(c.test(s))return c}}(u,t=r))?pf(o(1),o(2)):{major:0,minor:0};function o(i){return Number(t.replace(n,"$"+i))}},unknown:gu},Vd=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,nl={browsers:ze([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(u){return lo(u,"edge/")&&lo(u,"chrome")&&lo(u,"safari")&&lo(u,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Vd],search:function(u){return lo(u,"chrome")&&!lo(u,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(u){return lo(u,"msie")||lo(u,"trident")}},{name:"Opera",versionRegexes:[Vd,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Qt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Qt("firefox")},{name:"Safari",versionRegexes:[Vd,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(u){return(lo(u,"safari")||lo(u,"mobile/"))&&lo(u,"applewebkit")}}]),oses:ze([{name:"Windows",search:Qt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(u){return lo(u,"iphone")||lo(u,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Qt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Qt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Qt("linux"),versionRegexes:[]},{name:"Solaris",search:Qt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Qt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Qt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},Gh="Firefox",jh=function(){return Cs({current:void 0,version:Gl.unknown()})},wl=Cs,Po=(ze("Edge"),ze("Chrome"),ze("IE"),ze("Opera"),ze(Gh),ze("Safari"),"Windows"),li="Android",Hd="Solaris",Nu="FreeBSD",Wd="ChromeOS",vf=function(){return Ru({current:void 0,version:Gl.unknown()})},jl=Ru,Ca=(ze(Po),ze("iOS"),ze(li),ze("Linux"),ze("OSX"),ze(Hd),ze(Nu),ze(Wd),pt(function(){return u=navigator.userAgent,e=H.from(navigator.userAgentData),t=ln,S=nl.browsers(),M=nl.oses(),{browser:k=e.bind(function(P){return R=S,ut(P.brands,function(F){var G=F.brand.toLowerCase();return Ao(R,function(X){var Y;return G===(null===(Y=X.brand)||void 0===Y?void 0:Y.toLowerCase())}).map(function(X){return{current:X.name,version:Gl.nu(parseInt(F.version,10),0)}})});var R}).orThunk(function(){return mn(S,P=u).map(function(R){var F=Gl.detect(R.versionRegexes,P);return{current:R.name,version:F}});var P}).fold(jh,wl),os:O=mn(M,n=u).map(function(P){var R=Gl.detect(P.versionRegexes,n);return{current:P.name,version:R}}).fold(vf,jl),deviceType:(o=k,i=u,s=t,l=(r=O).isiOS()&&!0===/ipad/i.test(i),c=r.isiOS()&&!l,h=(f=r.isiOS()||r.isAndroid())||s("(pointer:coarse)"),p=l||!c&&f&&s("(min-device-width:768px)"),y=c||f&&!p,b=o.isSafari()&&r.isiOS()&&!1===/safari/i.test(i),{isiPad:ze(l),isiPhone:ze(c),isTablet:ze(p),isPhone:ze(y),isTouch:ze(h),isAndroid:r.isAndroid,isiOS:r.isiOS,isWebView:ze(b),isDesktop:ze(!y&&!p&&!b)})};var u,e,t,n,r,o,i,s,l,c,f,h,p,y,b,S,M,k,O})),id=ur,Lu=xr(Element.prototype.attachShadow)&&xr(Node.prototype.getRootNode),sa=ze(Lu),Vi=Lu?function(u){return Pe.fromDom(u.dom.getRootNode())}:vr,ts=function(u){var e=Vi(u);return Rr(e)?H.some(e):H.none()},Sl=function(u){return Sn(u.dom.shadowRoot)},Rs=function(u){var e=gs(u)?u.dom.parentNode:u.dom;if(null==e||null===e.ownerDocument)return!1;var t,n,r=e.ownerDocument;return ts(Pe.fromDom(e)).fold(function(){return r.body.contains(e)},(t=Rs,n=Va,function(o){return t(n(o))}))},Ga=function(){return cc(Pe.fromDom(document))},cc=function(u){var e=u.dom.body;if(null==e)throw new Error("Body is not available yet");return Pe.fromDom(e)},Rc=function(u,e){return Fi(u)?u.style.getPropertyValue(e):""},Bu=Hl("height",function(u){var e=u.dom;return Rs(u)?e.getBoundingClientRect().height:e.offsetHeight}),ks=function(u,e){return{left:u,top:e,translate:function(t,n){return ks(u+t,e+n)}}},oi=ks,dc=function(u){var e,t=u.dom,n=t.ownerDocument.body;return n===t?oi(n.offsetLeft,n.offsetTop):Rs(u)?(e=t.getBoundingClientRect(),oi(e.left,e.top)):oi(0,0)},Cl=Hl("width",function(u){return u.dom.offsetWidth}),Ms=function(u,e,t,n){u.dom.removeEventListener(e,t,n)},Hi=function(u,e){u.dom.appendChild(e.dom)},ja=function(u){var e=u.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Um=function(u,e){return u.view(e).fold(ze([]),function(t){var n=u.owner(t),r=Um(u,n);return[t].concat(r)})},Vo=Object.freeze({__proto__:null,view:function(u){var e;return(u.dom===document?H.none():H.from(null===(e=u.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(Pe.fromDom)},owner:rt}),pn=function(u,e,t,n){return{x:u,y:e,width:t,height:n,right:u+t,bottom:e+n}},Ks=function(u){var e=Pc(u),t=At(u),n=Ec(u);return pn(e.left,e.top,t,n)},rl=function(){return es(window)},Ki=function(u){return{isValue:dn,isError:Er,getOr:ze(u),getOrThunk:ze(u),getOrDie:ze(u),or:function(e){return Ki(u)},orThunk:function(e){return Ki(u)},fold:function(e,t){return t(u)},map:function(e){return Ki(e(u))},mapError:function(e){return Ki(u)},each:function(e){e(u)},bind:function(e){return e(u)},exists:function(e){return e(u)},forall:function(e){return e(u)},toOptional:function(){return H.some(u)}}},Ua=function(u){return{isValue:Er,isError:dn,getOr:Ut,getOrThunk:function(e){return e()},getOrDie:function(){return Zi(String(u))()},or:Ut,orThunk:function(e){return e()},fold:function(e,t){return e(u)},map:function(e){return Ua(u)},mapError:function(e){return Ua(e(u))},each:ht,bind:function(e){return Ua(u)},exists:Er,forall:dn,toOptional:H.none}},Sr={value:Ki,error:Ua,fromOption:function(u,e){return u.fold(function(){return Ua(e)},Ki)}};function ad(u,e,t){return u.stype===pi.Error?e(u.serror):t(u.svalue)}function Hg(u){return{stype:pi.Value,svalue:u}}function Ul(u){return{stype:pi.Error,serror:u}}function Ji(u,e,t,n){return{tag:"field",key:u,newKey:e,presence:t,prop:n}}function Mr(u,e,t){switch(u.tag){case"field":return e(u.key,u.newKey,u.presence,u.prop);case"custom":return t(u.newKey,u.instantiator)}}function nh(u){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o,i=e[r];for(o in i)yn(i,o)&&(n[o]=u(n[o],i[o]))}return n}}function ol(u){return{tag:"defaultedThunk",process:u}}function yf(u){return ol(ze(u))}function _i(u){return{tag:"mergeWithThunk",process:u}}function Zr(u){return Zt(u)&&100<ri(u).length?" removed due to size":JSON.stringify(u,null,2)}function mu(u,e){return mc([{path:u,getErrorInfo:e}])}function qr(u){return{extract:function(e,t){return w(u(t),function(n){return mu(e,ze(n))})},toString:ze("val")}}function ns(u,e,t,n){return n(St(u,e).getOrThunk(function(){return t(u)}))}function zu(u,e,t,n,r){function o(y){return r.extract(e.concat([n]),y)}function i(y){return y.fold(function(){return Yl(H.none())},function(b){var S=r.extract(e.concat([n]),b);return T(S,H.some)})}var s,l,c,f,h,p;switch(u.tag){case"required":return c=e,p=o,St(f=t,h=n).fold(function(){return y=h,b=f,mu(c,function(){return'Could not find valid *required* value for "'+y+'" in '+Zr(b)});var y,b},p);case"defaultedThunk":return ns(t,n,u.process,o);case"option":return i(St(t,n));case"defaultedOptionThunk":return l=u.process,i(St(s=t,n).map(function(y){return!0===y?l(s):y}));case"mergeWithThunk":return ns(t,n,ze({}),function(y){return o(j(u.process(t),y))})}}function qm(u){return{extract:function(e,t){return u().extract(e,t)},toString:function(){return u().toString()}}}function pu(u){var e=ae(u),t=on(u,function(n,r){return Mr(r,function(o){var i;return j(n,((i={})[o]=!0,i))},ze(n))},{});return{extract:function(n,r){var o,i,s,l,c,f,h=xt(Bi(r)?[]:ri((s=Sn,l=i={},c=function(p,y){l[y]=p},f=ht,dt(r,function(p,y){(s(p,y)?c:f)(p,y)}),i)),function(p){return!Lr(t,p)});return 0===h.length?e.extract(n,r):(o=h,mu(n,function(){return"There are unsupported fields: ["+o.join(", ")+"] specified"}))},toString:e.toString}}function ql(u){return{extract:function(e,t){var n=Mt(t,function(r,o){return u.extract(e.concat(["["+o+"]"]),r)});return $(n)},toString:function(){return"array("+u.toString()+")"}}}function fc(u){return{extract:function(e,t){for(var n=[],r=0,o=u;r<o.length;r++){var i=o[r].extract(e,t);if(i.stype===pi.Value)return i;n.push(i)}return $(n)},toString:function(){return"oneOf("+Mt(u,function(e){return e.toString()}).join(", ")+")"}}}function ms(u,e){return qr(function(t){var n=typeof t;return u(t)?Yl(t):mc("Expected type: "+e+" but got: "+n)})}function Gd(u,e){return{extract:function(t,n){return St(n,u).fold(function(){return r=u,mu(t,function(){return'Choice schema did not contain choice key: "'+r+'"'});var r},function(r){return o=t,i=n,St(s=e,l=r).fold(function(){return c=s,f=l,mu(o,function(){return'The chosen schema: "'+f+'" did not exist in branches: '+Zr(c)});var c,f},function(c){return c.extract(o.concat(["branch: "+l]),i)});var o,i,s,l})},toString:function(){return"chooseOn("+u+"). Possible values: "+ri(e)}}}function Xl(u){return qr(function(e){return u(e).fold(mc,Yl)})}function Xm(u,e){return t=function(r){return u(r).fold(Ul,Hg)},n=e,{extract:function(r,o){var i=ri(o),s=ql(qr(t)).extract(r,i);return m(s,function(l){var c=Mt(l,function(f){return Ji(f,f,{tag:"required",process:{}},n)});return ae(c).extract(r,o)})},toString:function(){return"setOf("+n.toString()+")"}};var t,n}function wi(u,e,t){return ud((r=e.extract([u],n=t),I(r,function(o){return{input:n,errors:o}})));var n,r}function Fu(u){return u.fold(function(e){throw new Error(jt(e))},Ut)}function qi(u,e,t){return Fu(wi(u,e,t))}function ps(u,e){return Gd(u,Pt(e,ae))}function Nc(u){return Xl(function(e){return fi(u,e)?Sr.value(e):Sr.error('Unsupported value: "'+e+'", choose one of "'+u.join(", ")+'".')})}function Et(u){return Xt(u,u,{tag:"required",process:{}},be())}function Ns(u,e){return Xt(u,u,{tag:"required",process:{}},e)}function kr(u){return Ns(u,De)}function qa(u,e){return Xt(u,u,{tag:"required",process:{}},Nc(e))}function Qi(u){return Ns(u,Xe)}function il(u,e){return Xt(u,u,{tag:"required",process:{}},ae(e))}function sd(u,e){return Xt(u,u,{tag:"required",process:{}},ge(e))}function Na(u,e){return Xt(u,u,{tag:"required",process:{}},ql(e))}function bo(u){return Xt(u,u,{tag:"option",process:{}},be())}function hc(u,e){return Xt(u,u,{tag:"option",process:{}},e)}function Wg(u){return hc(u,Ce)}function Si(u){return hc(u,De)}function jd(u){return hc(u,Xe)}function Uh(u,e){return hc(u,ql(e))}function ka(u,e){return hc(u,ae(e))}function qe(u,e){return Xt(u,u,yf(e),be())}function Di(u,e,t){return Xt(u,u,yf(e),t)}function qh(u,e){return Di(u,e,Ce)}function ea(u,e){return Di(u,e,De)}function kl(u,e,t){return Di(u,e,Nc(t))}function ii(u,e){return Di(u,e,Ne)}function ki(u,e){return Di(u,e,Xe)}function gc(u,e,t){return Di(u,e,ql(t))}function al(u,e,t){return Di(u,e,ae(t))}function $n(u){var e=u;return{get:function(){return e},set:function(t){e=t}}}function ua(u){if(!Eo(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var e=[],t={};return wn(u,function(n,r){var o=ri(n);if(1!==o.length)throw new Error("one and only one name per case");var i=o[0],s=n[i];if(void 0!==t[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!Eo(s))throw new Error("case arguments must be an array");e.push(i),t[i]=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var f=l.length;if(f!==s.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+s.length+" ("+s+"), got "+f);return{fold:function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];if(h.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+h.length);return h[r].apply(null,l)},match:function(h){var p=ri(h);if(e.length!==p.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+p.join(","));if(!je(e,function(y){return fi(p,y)}))throw new Error("Not all branches were specified when using match. Specified: "+p.join(", ")+"\nRequired: "+e.join(", "));return h[i].apply(null,l)},log:function(h){console.log(h,{constructors:e,constructor:i,params:l})}}}}),t}(Fd=pi={})[Fd.Error=0]="Error",Fd[Fd.Value=1]="Value";var ud=function(u){return ad(u,Sr.error,Sr.value)},Yl=Hg,mc=Ul,m=function(u,e){return u.stype===pi.Value?e(u.svalue):u},w=function(u,e){return u.stype===pi.Error?e(u.serror):u},T=function(u,e){return u.stype===pi.Value?{stype:pi.Value,svalue:e(u.svalue)}:u},I=function(u,e){return u.stype===pi.Error?{stype:pi.Error,serror:e(u.serror)}:u},N=ad,j=nh(function(u,e){return Zt(u)&&Zt(e)?j(u,e):e}),q=nh(function(u,e){return e}),$=function(u){var e,t,n=(e=[],t=[],wn(u,function(r){ad(r,function(o){return t.push(o)},function(o){return e.push(o)})}),{values:e,errors:t});return 0<n.errors.length?En(mc,pe)(n.errors):Yl(n.values)},te=qr(Yl),ae=function(u){return{extract:function(e,t){for(var n={},r=[],o=0,i=u;o<i.length;o++)Mr(i[o],function(s,l,c,f){var h=zu(c,e,t,s,f);N(h,function(p){r.push.apply(r,p)},function(p){n[l]=p})},function(s,l){n[s]=l(t)});return 0<r.length?mc(r):Yl(n)},toString:function(){return"obj{\n"+Mt(u,function(e){return Mr(e,function(t,n,r,o){return t+" -> "+o.toString()},function(t,n){return"state("+t+")"})}).join("\n")+"}"}}},ge=En(ql,ae),be=ze(te),Ce=ms(Fn,"number"),De=ms(lr,"string"),Ne=ms(Bi,"boolean"),Xe=ms(xr,"function"),ft=function(u){if(Object(u)!==u)return!0;switch({}.toString.call(u).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(u).every(function(e){return ft(u[e])});default:return!1}},an=qr(function(u){return ft(u)?Yl(u):mc("Expected value to be acceptable for sending via postMessage")}),jt=function(u){return"Errors: \n"+Mt(10<(e=u.errors).length?e.slice(0,10).concat([{path:[],getErrorInfo:ze("... (only showing first ten failures)")}]):e,function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()}).join("\n")+"\n\nInput object: "+Zr(u.input);var e},Xt=Ji,vn=function(u,e){return{tag:"custom",newKey:u,instantiator:e}};function On(u,e){return(t={})[u]=e,t;var t}function er(u){return e={},wn(u,function(t){e[t.key]=t.value}),e;var e}function $r(u){return xr(u)?u:Er}function Hr(u,e,t){for(var n=u.dom,r=$r(t);n.parentNode;){var o=Pe.fromDom(n=n.parentNode),i=e(o);if(i.isSome())return i;if(r(o))break}return H.none()}function br(u,e,t){var n=e(u),r=$r(t);return n.orThunk(function(){return r(u)?H.none():Hr(u,e,r)})}function Xo(u,e){return Rt(u.element,e.event.target)}function xo(u){if(!Lr(u,"can")&&!Lr(u,"abort")&&!Lr(u,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(u,null,2)+" does not have can, abort, or run!");return _e(_e({},Kh),u)}function Wr(u){return ze("alloy."+u)}function gr(u,e){gv(u,u.element,e,{})}function gn(u,e,t){gv(u,u.element,e,t)}function To(u){gr(u,Wu())}function Ho(u,e,t){gv(u,e,t,{})}function Io(u,e,t,n){u.getSystem().triggerEvent(t,e,n.event)}function rs(u,e){return{key:u,value:xo({abort:e})}}function Ma(u){return{key:u,value:xo({run:function(e,t){t.event.prevent()}})}}function Ot(u,e){return{key:u,value:xo({run:e})}}function vu(u,e,t){return{key:u,value:xo({run:function(n,r){e.apply(void 0,[n,r].concat(t))}})}}function Ls(u){return function(e){return{key:u,value:xo({run:function(t,n){Xo(t,n)&&e(t,n)}})}}}function pa(u,e,t){var n,r=e.partUids[t];return Ot(n=u,function(o,i){o.getSystem().getByUid(r).each(function(s){Io(s,s.element,n,i)})})}function q0(u,e){return Ot(u,function(t,n){var r=n.event,o=t.getSystem().getByDom(r.target).getOrThunk(function(){return br(r.target,function(i){return t.getSystem().getByDom(i).toOptional()},Er).getOr(t)});e(t,o,n)})}function Xh(u){return Ot(u,function(e,t){t.cut()})}function xf(u,e){return Ls(u)(e)}function rh(u){return u.dom.innerHTML}function Yh(u,e){var t,n,r=rt(u).dom,o=Pe.fromDom(r.createDocumentFragment());$s(o,(t=e,(n=(r||document).createElement("div")).innerHTML=t,ko(Pe.fromDom(n)))),ma(u),Hi(u,o)}function Ud(u){if(Rr(u))return"#shadow-root";var e=Pe.fromDom(u.dom.cloneNode(!1)),t=Pe.fromTag("div"),n=Pe.fromDom(e.dom.cloneNode(!0));return Hi(t,n),rh(t)}function jn(u){var e=(new Date).getTime();return u+"_"+Math.floor(1e9*Math.random())+ ++$d+String(e)}function av(u){var e=Ui(u)?u.dom[Yg]:null;return H.from(e)}function qd(u){function e(r){return"The component must be in a context to execute: "+r+(u?"\n"+Ud(u().element)+" is not in context.":"")}function t(r){return function(){throw new Error(e(r))}}function n(r){return function(){console.warn(e(r))}}return{debugInfo:ze("fake"),triggerEvent:n("triggerEvent"),triggerFocus:n("triggerFocus"),triggerEscape:n("triggerEscape"),broadcast:n("broadcast"),broadcastOn:n("broadcastOn"),broadcastEvent:n("broadcastEvent"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),isConnected:Er}}function Gg(u,e){var t=u.toString(),n=t.indexOf(")")+1,r=t.indexOf("("),o=t.substring(r+1,n-1).split(/,\s*/);return u.toFunctionAnnotation=function(){return{name:e,parameters:Df(o)}},u}function Zh(u){return On(ju,u)}function sv(u){return e=function(i){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return u.apply(void 0,me([i.getApis(),i],s,!1))},n=(t=u.toString()).indexOf(")")+1,r=t.indexOf("("),o=t.substring(r+1,n-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:Df(o.slice(1))}},e;var e,t,n,r,o}function Js(u,e){var t={};return dt(u,function(n,r){dt(n,function(o,i){var s=St(t,i).getOr([]);t[i]=s.concat([e(r,o)])})}),t}function Qs(u){return{classes:Gn(u.classes)?[]:u.classes,attributes:Gn(u.attributes)?{}:u.attributes,styles:Gn(u.styles)?{}:u.styles}}function uv(u){return u.cHandler}function oh(u,e){return{name:u,handler:e}}function X0(u,e){var t=Wi(u,e);return void 0===t||""===t?[]:t.split(" ")}function lv(u){return void 0!==u.dom.classList}function vs(u,e){var t,n,r;lv(u)?u.dom.classList.add(e):(n=e,r=X0(t=u,"class").concat([n]),rr(t,"class",r.join(" ")))}function Ai(u,e){var t,n,r,o;lv(u)?u.dom.classList.remove(e):(r=e,0<(o=xt(X0(n=u,"class"),function(i){return i!==r})).length?rr(n,"class",o.join(" ")):Mo(n,"class")),0===(lv(t=u)?t.dom.classList:X0(t,"class")).length&&Mo(t,"class")}function La(u,e){return lv(u)&&u.dom.classList.contains(e)}function ih(u,e){wn(e,function(t){vs(u,t)})}function Xa(u,e){wn(e,function(t){Ai(u,t)})}function Zl(u){return u.dom.value}function cv(u,e){if(void 0===e)throw new Error("Value.set was undefined");u.dom.value=e}function sl(u){var e=Pe.fromText(u);return md({element:e})}ua([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var ah,_f,Kh={can:dn,abort:Er,run:ht},la=ze,ul=la("touchstart"),Da=la("touchmove"),Yo=la("touchend"),dv=la("touchcancel"),Lc=la("mousedown"),Jh=la("mousemove"),Zm=la("mouseout"),jg=la("mouseup"),Vu=la("mouseover"),yu=la("focusin"),Ug=la("focusout"),cd=la("keydown"),ll=la("keyup"),va=la("input"),ta=la("change"),eu=la("click"),dd=la("transitioncancel"),Xd=la("transitionend"),Xi=la("transitionstart"),fd=la("selectstart"),$l={tap:Wr("tap")},sh=Wr("focus"),Hu=Wr("blur.post"),wf=Wr("paste.post"),Sf=Wr("receive"),Wu=Wr("execute"),Bs=Wr("focus.item"),tu=$l.tap,Yd=Wr("longpress"),$m=Wr("sandbox.close"),Qh=Wr("typeahead.cancel"),Ml=Wr("system.init"),fv=Wr("system.touchmove"),uh=Wr("system.touchend"),ca=Wr("system.scroll"),Cf=Wr("system.resize"),lh=Wr("system.attached"),qg=Wr("system.detached"),cl=Wr("system.dismissRequested"),xb=Wr("system.repositionRequested"),ys=Wr("focusmanager.shifted"),hd=Wr("slotcontainer.visibility"),kf=Wr("change.tab"),gd=Wr("dismiss.tab"),Kl=Wr("highlight"),hv=Wr("dehighlight"),gv=function(u,e,t,n){var r=_e({target:e},n);u.getSystem().triggerEvent(t,e,r)},Ro=er,Mi=Ls(lh()),Jl=Ls(qg()),Xg=Ls(Ml()),nu=(ah=Wu(),function(u){return Ot(ah,u)}),_o=Ro([{key:sh(),value:xo({can:function(u,e){var t,n=e.event,r=n.originator,o=n.target;return!(Rt(t=r,u.element)&&!Rt(t,o)&&(console.warn(sh()+" did not get interpreted by the desired target. \nOriginator: "+Ud(r)+"\nTarget: "+Ud(o)+"\nCheck the "+sh()+" event handlers"),1))}})}]),Zd=Object.freeze({__proto__:null,events:_o}),$d=0,_b=ze("alloy-id-"),eg=ze("data-alloy-id"),Mf=_b(),Yg=eg(),Km=function(u,e){Object.defineProperty(u.dom,Yg,{value:e,writable:!0})},Gu=jn,Tf=Ut,tg=qd(),Df=function(u){return Mt(u,function(e){return Me(e,"/*")?e.substring(0,e.length-"/*".length):e})},ju=jn("alloy-premade"),Ts={init:function(){return dl({readState:ze("No State required")})}},dl=function(u){return u},i1=function(u,e){var t,n,r,o,i,s,l=qt(u,function(c,f){return(1===c.length?Sr.value(c[0].handler):function(u,e,t){var n=e[t];return n?function(r,o,i){try{var s=zi(o,function(l,c){var f=l.name,h=c.name,p=i.indexOf(f),y=i.indexOf(h);if(-1===p)throw new Error("The ordering for "+r+" does not have an entry for "+f+".\nOrder specified: "+JSON.stringify(i,null,2));if(-1===y)throw new Error("The ordering for "+r+" does not have an entry for "+h+".\nOrder specified: "+JSON.stringify(i,null,2));return p<y?-1:y<p?1:0});return Sr.value(s)}catch(l){return Sr.error([l])}}("Event: "+t,u,n).map(function(r){var o,i,s,l,c=Mt(r,function(f){return f.handler});return{can:function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];return Jo(i,function(p,y){return p&&y.can.apply(void 0,f)},!0)},abort:(s=i=o=c,l=function(f){return f.abort},function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];return Jo(s,function(p,y){return p||l(y).apply(void 0,f)},!1)}),run:function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];wn(o,function(p){p.run.apply(void 0,f)})}}}):Sr.error(["The event ("+t+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(Mt(u,function(r){return r.name}),null,2)])}(c,e,f)).map(function(h){var p,y,b=(y=xr(p=h)?{can:dn,abort:Er,run:p}:p,function(M,k){for(var O=[],P=2;P<arguments.length;P++)O[P-2]=arguments[P];var R=[M,k].concat(O);y.abort.apply(void 0,R)?k.stop():y.can.apply(void 0,R)&&y.run.apply(void 0,R)}),S=1<c.length?xt(e[f],function(M){return Nn(c,function(k){return k.name===M})}).join(" > "):c[0].name;return On(f,{handler:b,purpose:S})})});return t={},n=[],r=[],wn(l,function(c){c.fold(function(f){n.push(f)},function(f){r.push(f)})}),0<(s={errors:n,values:r}).errors.length?Sr.error(pe(s.errors)):(i=t,0===(o=s.values).length?Sr.value(i):Sr.value(j(i,q.apply(void 0,o))))},ru="alloy.base.behaviour",Y0=ae([Xt("dom","dom",{tag:"required",process:{}},ae([Et("tag"),qe("styles",{}),qe("classes",[]),qe("attributes",{}),bo("value"),bo("innerHtml")])),Et("components"),Et("uid"),qe("events",{}),qe("apis",{}),Xt("eventOrder","eventOrder",((_f={})[Wu()]=["disabling",ru,"toggling","typeaheadevents"],_f[sh()]=[ru,"focusing","keying"],_f[Ml()]=[ru,"disabling","toggling","representing"],_f[va()]=[ru,"representing","streaming","invalidating"],_f[qg()]=[ru,"representing","item-events","tooltipping"],_f[Lc()]=["focusing",ru,"item-type-events"],_f[ul()]=["focusing",ru,"item-type-events"],_f[Vu()]=["item-type-events","tooltipping"],_f[Sf()]=["receiving","reflecting","tooltipping"],_i(ze(_f))),be()),bo("domModification")]),md=function(u){var e=qi("external.component",pu([Et("element"),bo("uid")]),u),t=$n(qd()),n=e.uid.getOrThunk(function(){return Gu("external")});Km(e.element,n);var r={uid:n,getSystem:t.get,config:H.none,hasConfigured:Er,connect:function(o){t.set(o)},disconnect:function(){t.set(qd(function(){return r}))},getApis:function(){return{}},element:e.element,spec:u,readState:ze("No state"),syncComponents:ht,components:ze([]),events:{}};return Zh(r)},Z0=Gu,Uu=function(u){return St(u,ju).getOrThunk(function(){var e,t,n,r,o,i=yn(u,"uid")?u:_e({uid:Z0("")},u);return t=(e=Tf(i)).events,r=Mt(St(n=Dn(e,["events"]),"components").getOr([]),Uu),o=_e(_e({},n),{events:_e(_e({},Zd),t),components:r}),Sr.value(function(u){function e(){return f}var h,p,b,t=$n(tg),n=Fu(wi("custom.definition",Y0,u)),r=function(u){var e,t,n,r,o=(e=St(u,"behaviours").getOr({}),Dr(ri(e),function(i){var s=e[i];return Sn(s)?[s.me]:[]}));return t=u,r=Mt(n=o,function(i){return ka(i.name(),[Et("config"),qe("state",Ts)])}),{list:n,data:Pt(wi("component.behaviours",ae(r),t.behaviours).fold(function(i){throw new Error(jt(i)+"\nComplete spec:\n"+JSON.stringify(t,null,2))},Ut),function(i){return ze(i.map(function(s){return{config:s.config,state:s.state.init(s.config)}}))})}}(u),o=r.list,i=r.data,s=(h=function(u,e,t){var n,r,o=_e(_e({},(n=u).dom),{uid:n.uid,domChildren:Mt(n.components,function(l){return l.element})}),i=u.domModification.fold(function(){return Qs({})},Qs),s=0<e.length?function(l,c,f,h){var p=_e({},c);function y(S){return on(S,function(M,k){return _e(_e({},k.modification),M)},{})}wn(f,function(S){p[S.name()]=S.exhibit(l,h)});var b=Js(p,function(S,M){return{name:S,modification:M}});return Qs({classes:on(b.classes,function(S,M){return M.modification.concat(S)},[]),attributes:y(b.attributes),styles:y(b.styles)})}(t,{"alloy.base.modification":i},e,o):i;return _e(_e({},r=o),{attributes:_e(_e({},r.attributes),s.attributes),styles:_e(_e({},r.styles),s.styles),classes:r.classes.concat(s.classes)})}(n,o,i),p=Pe.fromTag(h.tag),b=p.dom,dt(h.attributes,function(M,k){Ha(b,k,M)}),ih(p,h.classes),lc(p,h.styles),h.innerHtml.each(function(M){return Yh(p,M)}),$s(p,h.domChildren),h.value.each(function(M){cv(p,M)}),Km(p,h.uid),p),l=function(u,e,t){var n,r,o,i,s,c=u.eventOrder;return r=t,o=e,n=Js(_e(_e({},{"alloy.base.behaviour":u.events}),(i=r,s={},wn(o,function(f){s[f.name()]=f.handlers(i)}),s)),oh),i1(n,c).getOrDie()}(n,o,i),c=$n(n.components),f={uid:u.uid,getSystem:t.get,config:function(h){var p=i;return(xr(p[h.name()])?p[h.name()]:function(){throw new Error("Could not find "+h.name()+" in "+JSON.stringify(u,null,2))})()},hasConfigured:function(h){return xr(i[h.name()])},spec:u,readState:function(h){return i[h]().map(function(p){return p.state.readState()}).getOr("not enabled")},getApis:function(){return n.apis},connect:function(h){t.set(h)},disconnect:function(){t.set(qd(e))},element:s,syncComponents:function(){var h=Dr(ko(s),function(p){return t.get().getByDom(p).fold(function(){return[]},sr)});c.set(h)},components:c.get,events:l};return f}(o)).getOrDie()})},Qr=Zh;function wb(u,e,t,n,r){return u(t,n)?H.some(t):xr(r)&&r(t)?H.none():e(t,n,r)}function Jm(u,e,t){for(var n=u.dom,r=xr(t)?t:Er;n.parentNode;){var o=Pe.fromDom(n=n.parentNode);if(e(o))return H.some(o);if(r(o))break}return H.none()}function Qm(u,e,t){return wb(function(n,r){return r(n)},Jm,u,e,t)}function a1(u,e,t){return Qm(u,e,t).isSome()}function pd(u,e,t){return Jm(u,function(n){return kn(n,e)},t)}function zs(u,e){return t=e,nn(n=void 0===u?document:u.dom)?H.none():H.from(n.querySelector(t)).map(Pe.fromDom);var t,n}function vc(u,e,t){return wb(kn,pd,u,e,t)}function ep(){var u=jn("aria-owns");return{id:u,link:function(e){rr(e,"aria-owns",u)},unlink:function(e){Mo(e,"aria-owns")}}}var Aa,vd,bu=function(u,e){return a1(e,function(n){return Rt(n,u.element)},Er)||(t=u,Qm(e,function(n){if(!Ui(n))return!1;var r=Wi(n,"id");return void 0!==r&&-1<r.indexOf("aria-owns")}).bind(function(n){var r=Wi(n,"id");return zs(Vi(n),'[aria-owns="'+r+'"]')}).exists(function(n){return bu(t,n)}));var t};function tp(u,e,t){var n,r,o,i;switch(St($0.get(),u).orThunk(function(){return ut(ri($0.get()),function(c){return-1<u.indexOf(c)?H.some($0.get()[c]):H.none()})}).getOr(Aa.NORMAL)){case Aa.NORMAL:return t(Cb());case Aa.LOGGING:var s=(n=u,r=e,o=[],i=(new Date).getTime(),{logEventCut:function(c,f,h){o.push({outcome:"cut",target:f,purpose:h})},logEventStopped:function(c,f,h){o.push({outcome:"stopped",target:f,purpose:h})},logNoParent:function(c,f,h){o.push({outcome:"no-parent",target:f,purpose:h})},logEventNoHandlers:function(c,f){o.push({outcome:"no-handlers-left",target:f})},logEventResponse:function(c,f,h){o.push({outcome:"response",purpose:h,target:f})},write:function(){var c=(new Date).getTime();fi(["mousemove","mouseover","mouseout",Ml()],n)||console.log(n,{event:n,time:c-i,target:r.dom,sequence:Mt(o,function(f){return fi(["cut","stopped","response"],f.outcome)?"{"+f.purpose+"} "+f.outcome+" at ("+Ud(f.target)+")":f.outcome})})}}),l=t(s);return s.write(),l;case Aa.STOP:return!0}}(vd=Aa=Aa||{})[vd.STOP=0]="STOP",vd[vd.NORMAL=1]="NORMAL",vd[vd.LOGGING=2]="LOGGING";var $0=$n({}),Sb=["alloy/data/Fields","alloy/debugging/Debugging"],Cb=ze({logEventCut:ht,logEventStopped:ht,logNoParent:ht,logEventNoHandlers:ht,logEventResponse:ht,write:ht}),kb=ze([Et("menu"),Et("selectedMenu")]),vo=ze([Et("item"),Et("selectedItem")]);function Gr(){return il("markers",[Et("backgroundMenu")].concat(kb()).concat(vo()))}function Fs(u){return il("markers",Mt(u,Et))}function Af(u,e,t){return void 0!==(n=new Error).stack&&Ao(n.stack.split("\n"),function(r){return 0<r.indexOf("alloy")&&!Nn(Sb,function(o){return-1<r.indexOf(o)})}).getOr("unknown"),Xt(e,e,t,Xl(function(r){return Sr.value(function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return r.apply(void 0,o)})}));var n}function oo(u){return Af(0,u,yf(ht))}function Vs(u){return Af(0,u,yf(H.none))}function ci(u){return Af(0,u,{tag:"required",process:{}})}function Mb(u){return Af(0,u,{tag:"required",process:{}})}function wo(u,e){return vn(u,ze(e))}function Bc(u){return vn(u,Ut)}function Pi(u,e,t,n,r,o,i,s){return{x:u,y:e,bubble:t,direction:n,placement:r,restriction:o,label:i+"-"+r,alwaysFit:s=void 0!==s&&s}}function qu(u,e,t,n){var r=u+e;return n<r?t:r<t?n:r}function vi(u,e){return _s(["left","right","top","bottom"],function(t){return St(e,t).map(function(n){return function(r){switch(n){case 1:return r.x;case 0:return r.x+r.width;case 2:return r.y;case 3:return r.y+r.height}}(u)})})}function dh(u,e){return u.x+u.width/2-e.width/2}function yd(u,e){return u.x+u.width-e.width}function ei(u,e){return u.y-e.height}function fl(u){return u.y+u.height}function Yi(u,e){return u.y+u.height/2-e.height/2}function Hs(u,e,t){return Pi(u.x+u.width,Yi(u,e),t.east(),Jg(),"east",vi(u,{left:0}),bc)}function If(u,e,t){return Pi(u.x-e.width,Yi(u,e),t.west(),sp(),"west",vi(u,{right:1}),bc)}function bd(){return[os,wu,Ds,Il,au,Su,Hs,If]}function np(){return[wu,os,Il,Ds,au,Su,Hs,If]}function Zg(){return[Ds,Il,os,wu,Su,au]}function $g(){return[Il,Ds,wu,os,Su,au]}function fh(){return[os,wu,Ds,Il,au,Su]}function xu(){return[wu,os,Il,Ds,au,Su]}function Tl(u,e,t){return Xg(function(n,r){t(n,u,e)})}function U_(u){return{key:u,value:void 0}}function Ia(u){var e,t,n,r,o,i,s,l,c=qi("Creating behaviour: "+u.name,Cu,u);return t=c.name,n=c.active,r=c.apis,o=c.extra,i=c.state,s=pu(e=c.fields),l=ka(t,[hc("config",pu(e))]),Fc(s,l,t,n,r,o,i)}function ou(u){var e,t=qi("Creating behaviour: "+u.name,vv,u),n=ps(t.branchKey,t.branches),r=t.name,o=t.active,i=t.apis,s=t.extra,l=t.state,c=ka(r,[hc("config",e=n)]);return Fc(e,c,r,o,i,s,l)}function ng(){return Pe.fromDom(document)}function _u(u){return u.dom.focus()}function rp(u){var e=Vi(u).dom;return u.dom===e.activeElement}function xd(u){return void 0===u&&(u=ng()),H.from(u.dom.activeElement).map(Pe.fromDom)}function yc(u){return xd(Vi(u)).filter(function(e){return u.dom.contains(e.dom)})}function hh(u,e){var t=Vi(e),n=xd(t).bind(function(o){function i(c){return Rt(o,c)}var s,l;return i(e)?H.some(e):(s=i,(l=function(c){for(var f=0;f<c.childNodes.length;f++){var h=Pe.fromDom(c.childNodes[f]);if(s(h))return H.some(h);var p=l(c.childNodes[f]);if(p.isSome())return p}return H.none()})(e.dom))}),r=u(e);return n.each(function(o){xd(t).filter(function(i){return Rt(i,o)}).fold(function(){_u(o)},ht)}),r}function zc(u,e,t,n,r){function o(i){return i+"px"}return{position:u,left:e.map(o),top:t.map(o),right:n.map(o),bottom:r.map(o)}}function mv(u,e){var t;$i(u,_e(_e({},t=e),{position:H.some(t.position)}))}function Xu(u,e,t,n,r,o){var i=e.rect,s=i.x-t,l=i.y-n,c=r-(s+i.width),f=o-(l+i.height),h=H.some(s),p=H.some(l),y=H.some(c),b=H.some(f),S=H.none();return e.direction.fold(function(){return zc(u,h,p,S,S)},function(){return zc(u,S,p,y,S)},function(){return zc(u,h,S,S,b)},function(){return zc(u,S,S,y,b)},function(){return zc(u,h,p,S,S)},function(){return zc(u,h,S,S,b)},function(){return zc(u,h,p,S,S)},function(){return zc(u,S,p,y,S)})}function Dl(u,e){return u.fold(function(){var t=e.rect;return zc("absolute",H.some(t.x),H.some(t.y),H.none(),H.none())},function(t,n,r,o){return Xu("absolute",e,t,n,r,o)},function(t,n,r,o){return Xu("fixed",e,t,n,r,o)})}function pv(u,e){var t=un(nd,e),n=u.fold(t,t,function(){var i=Ei();return nd(e).translate(-i.left,-i.top)}),r=At(e),o=Ec(e);return pn(n.left,n.top,r,o)}ze(ae(vo().concat(kb())));var op=ze(ae(vo())),gh=ze(il("initSize",[Et("numColumns"),Et("numRows")])),Of=ua([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Al=Of.southeast,ip=Of.southwest,Kg=Of.northeast,ap=Of.northwest,K0=Of.south,mh=Of.north,Jg=Of.east,sp=Of.west,iu=function(u,e,t){return Math.min(Math.max(u,e),t)},bc="layout",os=function(u,e,t){return Pi(u.x,fl(u),t.southeast(),Al(),"southeast",vi(u,{left:1,top:3}),bc)},wu=function(u,e,t){return Pi(yd(u,e),fl(u),t.southwest(),ip(),"southwest",vi(u,{right:0,top:3}),bc)},Ds=function(u,e,t){return Pi(u.x,ei(u,e),t.northeast(),Kg(),"northeast",vi(u,{left:1,bottom:2}),bc)},Il=function(u,e,t){return Pi(yd(u,e),ei(u,e),t.northwest(),ap(),"northwest",vi(u,{right:0,bottom:2}),bc)},Su=function(u,e,t){return Pi(dh(u,e),ei(u,e),t.north(),mh(),"north",vi(u,{bottom:2}),bc)},au=function(u,e,t){return Pi(dh(u,e),fl(u),t.south(),K0(),"south",vi(u,{top:3}),bc)},ya=Object.freeze({__proto__:null,events:function(u){return Ro([Ot(Sf(),function(e,t){var n,r=u.channels,o=ri(r),i=t,s=(n=i).universal?o:xt(o,function(l){return fi(n.channels,l)});wn(s,function(l){var c=r[l],f=c.schema,h=qi("channel["+l+"] data\nReceiver: "+Ud(e.element),f,i.data);c.onReceive(e,h)})})])}}),rg=[Ns("channels",Xm(Sr.value,pu([ci("onReceive"),qe("schema",be())])))],Fc=function(u,e,t,n,r,o,i){function s(h){return Lr(h,t)?h[t]():H.none()}var l=Pt(r,function(h,p){return y=t,M=function(G){for(var X=[],Y=1;Y<arguments.length;Y++)X[Y-1]=arguments[Y];var Q=[G].concat(X);return G.config({name:ze(y)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+y+". Using API: "+S)},function(ne){var le=Array.prototype.slice.call(Q,1);return b.apply(void 0,[G,ne.config,ne.state].concat(le))})},k=S=p,P=(O=(b=h).toString()).indexOf(")")+1,R=O.indexOf("("),F=O.substring(R+1,P-1).split(/,\s*/),M.toFunctionAnnotation=function(){return{name:k,parameters:Df(F.slice(0,1).concat(F.slice(3)))}},M;var y,b,S,M,k,O,P,R,F}),c=Pt(o,Gg),f=_e(_e(_e({},c),l),{revoke:un(U_,t),config:function(h){var p=qi(t+"-config",u,h);return{key:t,value:{config:p,me:f,configAsRaw:pt(function(){return qi(t+"-config",u,h)}),initialConfig:h,state:i}}},schema:ze(e),exhibit:function(h,p){return ot(s(h),St(n,"exhibit"),function(y,b){return b(p,y.config,y.state)}).getOrThunk(function(){return Qs({})})},name:ze(t),handlers:function(h){return s(h).map(function(p){return St(n,"events").getOr(function(){return{}})(p.config,p.state)}).getOr({})}});return f},cn=er,Cu=pu([Et("fields"),Et("name"),qe("active",{}),qe("apis",{}),qe("state",Ts),qe("extra",{})]),vv=pu([Et("branchKey"),Et("branches"),Et("name"),qe("active",{}),qe("apis",{}),qe("state",Ts),qe("extra",{})]),Ya=ze(void 0),Ol=Ia({fields:rg,name:"receiving",active:ya}),Ef=Object.freeze({__proto__:null,exhibit:function(u,e){return Qs({classes:[],styles:e.useFixed()?{}:{position:"relative"}})}}),kt=ua([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Kd=function(u,e,t){var n=oi(e,t);return u.fold(ze(n),ze(n),function(){var r=Ei();return n.translate(-r.left,-r.top)})};function og(u){return ui(u,tm)}function yv(u){function e(){return t.get().each(u)}var t=$n(H.none());return{clear:function(){e(),t.set(H.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(n){e(),t.set(H.some(n))}}}function so(){return yv(function(u){return u.unbind()})}function Zo(){var u=yv(ht);return _e(_e({},u),{on:function(e){return u.get().each(e)}})}function Ws(u,e,t){return Oi(u,e,$o,t,!1)}function Ql(u,e,t){return Oi(u,e,$o,t,!0)}function ig(u,e){var t=u,n=Math.floor(e);Ar(t,"max-height",Bu.max(t,n,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"])+"px")}function ag(u,e,t){return void 0===u[e]?t:u[e]}function Qg(u,e,t,n){function r(l){return St(t,l).getOr([])}function o(l,c,f){var h=Es(Pn,f);return{offset:oi(l,c),classesOn:Dr(f,r),classesOff:Dr(h,r)}}var i=u*(n=void 0===n?1:n),s=e*n;return{southeast:function(){return o(-u,e,["top","alignLeft"])},southwest:function(){return o(u,e,["top","alignRight"])},south:function(){return o(-u/2,e,["top","alignCentre"])},northeast:function(){return o(-u,-e,["bottom","alignLeft"])},northwest:function(){return o(u,-e,["bottom","alignRight"])},north:function(){return o(-u/2,-e,["bottom","alignCentre"])},east:function(){return o(u,-e/2,["valignCentre","left"])},west:function(){return o(-u,-e/2,["valignCentre","right"])},insetNortheast:function(){return o(i,s,["top","alignLeft","inset"])},insetNorthwest:function(){return o(-i,s,["top","alignRight","inset"])},insetNorth:function(){return o(-i/2,s,["top","alignCentre","inset"])},insetSoutheast:function(){return o(i,-s,["bottom","alignLeft","inset"])},insetSouthwest:function(){return o(-i,-s,["bottom","alignRight","inset"])},insetSouth:function(){return o(-i/2,-s,["bottom","alignCentre","inset"])},insetEast:function(){return o(-i,-s/2,["valignCentre","right","inset"])},insetWest:function(){return o(i,-s/2,["valignCentre","left","inset"])}}}function em(){return Qg(0,0,{})}function Jd(u,e){return function(t){return"rtl"===sg(t)?e:u}}var Ba,ty=kt.relative,q_=kt.fixed,tm="data-alloy-placement",nm=ua([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),$o=dn,ny=it,bv=["top","bottom","right","left"],xv="data-alloy-transition-timer",ph=ze(function(u,e){ig(u,e),lc(u,{"overflow-x":"hidden","overflow-y":"auto"})}),vh=ze(function(u,e){ig(u,e)}),Pn=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],is=Ut,sg=function(u){return"rtl"===Wa(u,"direction")?"rtl":"ltr"};function u1(u){return a1(u,function(e){return Ui(e)&&Wi(e,"data-alloy-vertical-dir")===Ba.BottomToTop})}function Pf(){return ka("layouts",[Et("onLtr"),Et("onRtl"),bo("onBottomLtr"),bo("onBottomRtl")])}function _v(u,e,t,n,r,o,i){var s=i.map(u1).getOr(!1),l=e.layouts.map(function(f){return f.onLtr(u)}),c=e.layouts.map(function(f){return f.onRtl(u)});return Jd(s?e.layouts.bind(function(f){return f.onBottomLtr.map(function(h){return h(u)})}).or(l).getOr(r):l.getOr(t),s?e.layouts.bind(function(f){return f.onBottomRtl.map(function(h){return h(u)})}).or(c).getOr(o):c.getOr(n))(u)}function l1(u){return u.fold(Ut,function(e,t,n){return e.translate(-t,-n)})}function wv(u){return u.fold(Ut,Ut)}function ry(u){return Jo(u,function(e,t){return e.translate(t.left,t.top)},oi(0,0))}function Qd(u){return ry(Mt(u,wv))}function oy(u,e,t){var n,r,o=Ei(rt(u.element)),i=(n=u,r=cr(t.root).dom,H.from(r.frameElement).map(Pe.fromDom).filter(function(s){return Rt(rt(s),rt(n.element))}).map(Pc).getOr(o));return Wo(i,o.left,o.top)}function Rf(u,e,t,n){var r=xh(oi(u,e));return H.some({point:r,width:t,height:n})}function yh(u,e,t,n,r){return u.map(function(o){var i=[e,o.point],s=n.fold(function(){return Qd(i)},function(){return Qd(i)},function(){return ry(Mt(i,l1))}),l={x:s.left,y:s.top,width:o.width,height:o.height},c=(t.showAbove?Zg:fh)(),f=(t.showAbove?$g:xu)(),h=_v(r,t,c,f,c,f,H.none());return is({anchorBox:l,bubble:t.bubble.getOr(em()),overrides:t.overrides,layouts:h,placer:H.none()})})}function Yu(u,e,t){var n,r=u.document.createRange(),o=r;return e.fold(function(i){o.setStartBefore(i.dom)},function(i,s){o.setStart(i.dom,s)},function(i){o.setStartAfter(i.dom)}),n=r,t.fold(function(i){n.setEndBefore(i.dom)},function(i,s){n.setEnd(i.dom,s)},function(i){n.setEndAfter(i.dom)}),r}function rm(u,e,t,n,r){var o=u.document.createRange();return o.setStart(e.dom,t),o.setEnd(n.dom,r),o}function om(u){return{left:u.left,top:u.top,right:u.right,bottom:u.bottom,width:u.width,height:u.height}}function im(u,e,t){return e(Pe.fromDom(t.startContainer),t.startOffset,Pe.fromDom(t.endContainer),t.endOffset)}function Db(u,e){return t=u,o=e.match({domRange:function(i){return{ltr:ze(i),rtl:H.none}},relative:function(i,s){return{ltr:pt(function(){return Yu(t,i,s)}),rtl:pt(function(){return H.some(Yu(t,s,i))})}},exact:function(i,s,l,c){return{ltr:pt(function(){return rm(t,i,s,l,c)}),rtl:pt(function(){return H.some(rm(t,l,c,i,s))})}}}),((r=(n=o).ltr()).collapsed?n.rtl().filter(function(i){return!1===i.collapsed}).map(function(i){return Hc.rtl(Pe.fromDom(i.endContainer),i.endOffset,Pe.fromDom(i.startContainer),i.startOffset)}).getOrThunk(function(){return im(0,Hc.ltr,r)}):im(0,Hc.ltr,r)).match({ltr:function(i,s,l,c){var f=u.document.createRange();return f.setStart(i.dom,s),f.setEnd(l.dom,c),f},rtl:function(i,s,l,c){var f=u.document.createRange();return f.setStart(l.dom,c),f.setEnd(i.dom,s),f}});var t,n,r,o}(Ba=Ba||{}).TopToBottom="toptobottom",Ba.BottomToTop="bottomtotop";var ec="data-alloy-vertical-dir",ug=[Et("hotspot"),bo("bubble"),qe("overrides",{}),Pf(),wo("placement",function(u,e,t){var n=pv(t,e.hotspot.element),r=_v(u.element,e,fh(),xu(),Zg(),$g(),H.some(e.hotspot.element));return H.some(is({anchorBox:n,bubble:e.bubble.getOr(em()),overrides:e.overrides,layouts:r,placer:H.none()}))})],bh=[Et("x"),Et("y"),qe("height",0),qe("width",0),qe("bubble",em()),qe("overrides",{}),Pf(),wo("placement",function(u,e,t){var n=Kd(t,e.x,e.y),r=pn(n.left,n.top,e.width,e.height),o=_v(u.element,e,bd(),np(),bd(),np(),H.none());return H.some(is({anchorBox:r,bubble:e.bubble,overrides:e.overrides,layouts:o,placer:H.none()}))})],am=ua([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),xh=am.screen,Wo=am.absolute,Sv=[Et("node"),Et("root"),bo("bubble"),Pf(),qe("overrides",{}),qe("showAbove",!1),wo("placement",function(u,e,t){var n=oy(u,0,e);return e.node.filter(Rs).bind(function(r){var o=r.dom.getBoundingClientRect(),i=Rf(o.left,o.top,o.width,o.height),s=e.node.getOr(u.element);return yh(i,n,e,t,s)})})],Vc=function(u,e,t,n){return{start:u,soffset:e,finish:t,foffset:n}},c1=(ua([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),function(u){return u.fold(Ut,Ut,Ut)}),sm=ua([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ef={domRange:sm.domRange,relative:sm.relative,exact:sm.exact,exactFromRange:function(u){return sm.exact(u.start,u.soffset,u.finish,u.foffset)},getWin:function(u){return cr(u.match({domRange:function(e){return Pe.fromDom(e.startContainer)},relative:function(e,t){return c1(e)},exact:function(e,t,n,r){return e}}))},range:Vc},Hc=ua([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);function up(u){return Uc.getOption(u)}function X_(u){return up(u).filter(function(e){return 0!==e.trim().length||-1<e.indexOf("\xa0")}).isSome()||fi(Ku,mt(u))}function su(u,e){return nn(t=void 0===u?document:u.dom)?[]:Mt(t.querySelectorAll(e),Pe.fromDom);var t}function kv(u){if(0<u.rangeCount){var e=u.getRangeAt(0),t=u.getRangeAt(u.rangeCount-1);return H.some(Vc(Pe.fromDom(e.startContainer),e.startOffset,Pe.fromDom(t.endContainer),t.endOffset))}return H.none()}function tf(u){if(null===u.anchorNode||null===u.focusNode)return kv(u);var e,t,n,r,o,i,s,l,c,f,h,p=Pe.fromDom(u.anchorNode),y=Pe.fromDom(u.focusNode);return i=t=u.anchorOffset,s=n=y,l=r=u.focusOffset,(c=rt(o=e=p).dom.createRange()).setStart(o.dom,i),c.setEnd(s.dom,l),f=c,h=Rt(e,n)&&t===r,f.collapsed&&!h?H.some(Vc(p,u.anchorOffset,y,u.focusOffset)):kv(u)}function Mv(u,e){var t,n,r=(t=Db(u,e)).getClientRects();return 0<(n=0<r.length?r[0]:t.getBoundingClientRect()).width||0<n.height?H.some(n).map(om):H.none()}function Nf(u,e){return{element:u,offset:e}}function Ab(u,e){return(gs(u)?Nf:function(t,n){var r=ko(t);if(0===r.length)return Nf(t,n);if(n<r.length)return Nf(r[n],0);var o=r[r.length-1];return Nf(o,(gs(o)?Uc.get(o):ko(o)).length)})(u,e)}function Lf(u,e){return e.getSelection.getOrThunk(function(){return function(){return H.from(u.getSelection()).filter(function(t){return 0<t.rangeCount}).bind(tf)}})().map(function(t){var n=Ab(t.start,t.soffset),r=Ab(t.finish,t.foffset);return ef.range(n.element,n.offset,r.element,r.offset)})}function No(u){return u.x+u.width}function lp(u,e){return u.x-e.width}function Bf(u,e){return u.y-e.height+u.height}function cp(u,e,t){return Pi(No(u),u.y,t.southeast(),Al(),"southeast",vi(u,{left:0,top:2}),Lv)}function Ib(u,e,t){return Pi(lp(u,e),u.y,t.southwest(),ip(),"southwest",vi(u,{right:1,top:2}),Lv)}function iy(u,e,t){return Pi(No(u),Bf(u,e),t.northeast(),Kg(),"northeast",vi(u,{left:0,bottom:3}),Lv)}function dp(u,e,t){return Pi(lp(u,e),Bf(u,e),t.northwest(),ap(),"northwest",vi(u,{right:1,bottom:3}),Lv)}function fp(){return[cp,Ib,iy,dp]}function lg(){return[Ib,cp,dp,iy]}function Go(u,e,t,n,r,o,i){var s,l,c,f,h,p,y,b,S,M,k,P;return s={anchorBox:t.anchorBox,origin:e},l=r.element,c=t.bubble,f=t.layouts,h=o,p=n,b=i,M=ag(y=t.overrides,"maxHeightFunction",ph()),k=ag(y,"maxWidthFunction",ht),function(u,e,t,n){var r,o,i,l=function(u,e,t,n){co(e,"max-height"),co(e,"max-width");var r,o,s,l,c,f,h,p,y={width:At(r=e),height:Ec(r)};return o=e,c=t,f=n.bounds,h=(l=y).width,p=l.height,Jo(n.preference,function(S,M){var k=un(b,M);return S.fold(ze(S),k)},nm.nofit({rect:s=u,maxHeight:l.height,maxWidth:l.width,direction:Al(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:s.y},-1,-1,!1)).fold(Ut,Ut);function b(S,M,k,O,P){var R=function(u,e,t,n){var r,o,i,s,l,c,f,h,y,b,S,M,k,O,P,R,F,G,X,Y,Q,ne,le,ce,ye,xe,Te,Ee,Ve,Be,nt,bt,_t,wt,Lt,Ht,Ln,Ft,Yn=u.bubble,or=Yn.offset,Tr=(_t=u.restriction,wt=or,Lt=Fl("left",(bt=n).x),Ht=Fl("top",bt.y),Ln=Fl("right",bt.right),Ft=Fl("bottom",bt.bottom),pn(Lt,Ht,Ln-Lt,Ft-Ht)),Lo=u.y+or.top,Nr=pn(u.x+or.left,Lo,e,t),_n=(o=Tr.y,i=Tr.right,s=Tr.bottom,c=Nr.y,h=Nr.bottom,y=Nr.height,{originInBounds:(r=Tr.x)<=(l=Nr.x)&&l<=i&&o<=c&&c<=s,sizeInBounds:(f=Nr.right)<=i&&r<=f&&h<=s&&o<=h,visibleW:Math.min(Nr.width,r<=l?i-l:f-r),visibleH:Math.min(y,o<=c?s-c:h-o)}),Or=_n.visibleW,ni=_n.visibleH,xi=_n.originInBounds&&_n.sizeInBounds,ga=xi?Nr:(b=Tr.x,S=Tr.y,M=Tr.right,k=Tr.bottom,O=Nr.x,P=Nr.y,R=Nr.width,F=Nr.height,G=Math.max(b,M-R),X=Math.max(S,k-F),Y=iu(O,b,G),Q=iu(P,S,X),ne=Math.min(Y+R,M)-Y,le=Math.min(Q+F,k)-Q,pn(Y,Q,ne,le)),Jc=0<ga.width&&0<ga.height,zl=(ce=u.direction,Te=ze((ye=ga).bottom-(xe=n).y),Ee=ze(xe.bottom-ye.y),Ve=ce.fold(Ee,Ee,Te,Te,Ee,Te,Ee,Ee),Be=ze(ye.right-xe.x),nt=ze(xe.right-ye.x),{maxWidth:ce.fold(nt,Be,nt,Be,nt,nt,nt,Be),maxHeight:Ve}),Qc={rect:ga,maxHeight:zl.maxHeight,maxWidth:zl.maxWidth,direction:u.direction,placement:u.placement,classes:{on:Yn.classesOn,off:Yn.classesOff},layout:u.label,testY:Lo};function Fl(Ic,Oc){return _t[Ic].map(function(zd){var ed="top"===Ic||"bottom"===Ic,bb=ed?wt.top:wt.left,Fo=("left"===Ic||"top"===Ic?Math.max:Math.min)(zd,Oc)+bb;return ed?iu(Fo,bt.y,bt.bottom):iu(Fo,bt.x,bt.right)}).getOr(Oc)}return xi||u.alwaysFit?nm.fit(Qc):nm.nofit(Qc,Or,ni,Jc)}(S(s,l,c,o,f),h,p,f);return R.fold(ze(R),function(F,G,X,Y){return(P===Y?O<X||k<G:!P&&Y)?R:nm.nofit(M,k,O,P)})}}(u,e,t,n),c=e,f=l,h=Dl((r=n).origin,f);return r.transition.each(function(p){!function(u,e,t,n,r,o){var i,s,l,c,f,h,p,y,b,S=(i=n,s=r,o.exists(function(k){var O=i.mode;return"all"===O||k[O]!==s[O]}));function M(k){return parseFloat(k).toFixed(3)}S||(b=u,je(n.classes,function(k){return La(b,k)}))?(Ar(u,"position",t.position),l=pv(e,u),c=Dl(e,_e(_e({},r),{rect:l})),f=_s(bv,function(k){return c[k]}),y=t,Cn(f,function(k,O){var P,R,F,G=y[O].map(M),X=k.map(M);return!ot(P=G,R=X,F=void 0===F?Jn:F).getOr(P.isNone()&&R.isNone())}).isSome()&&($i(u,f),S&&(ih(h=u,(p=n).classes),ui(h,xv).each(function(k){clearTimeout(parseInt(k,10)),Mo(h,xv)}),function(u,e){function t(b){var S,M=null!==(S=b.raw.pseudoElement)&&void 0!==S?S:"";return Rt(b.target,u)&&!tl(M)&&fi(bv,b.raw.propertyName)}function n(b){var S;(Cr(b)||t(b))&&(s.clear(),l.clear(),!Cr(S=null==b?void 0:b.raw.type)&&S!==Xd()||(clearTimeout(o),Mo(u,xv),Xa(u,e.classes)))}function r(){s.set(Ws(u,Xd(),n)),l.set(Ws(u,dd(),n))}var o,i,s=so(),l=so();"ontransitionstart"in u.dom?i=Ws(u,Xi(),function(b){t(b)&&(i.unbind(),r())}):r();var c,f,h=(c=u,f=p("transition-delay"),Jo(p("transition-duration"),function(b,S,M){var k=y(f[M])+y(S);return Math.max(b,k)},0));function p(b){var S=Wa(c,b);return xt(lr(S)?S.split(/\s*,\s*/):[],tl)}function y(b){if(lr(b)&&/^[\d.]+/.test(b)){var S=parseFloat(b);return Me(b,"ms")?S:1e3*S}return 0}requestAnimationFrame(function(){o=setTimeout(n,h+17),rr(u,xv,o)})}(h,p)),Qo(u))):Xa(u,n.classes)}(c,r.origin,h,p,f,r.lastPlacement)}),mv(c,h),rr(e,tm,l.placement),Xa(o=e,(i=l.classes).off),ih(o,i.on),(0,n.maxHeightFunction)(e,l.maxHeight),(0,n.maxWidthFunction)(e,l.maxWidth),{layout:l.layout,placement:l.placement}}(s.anchorBox,l,c,{bounds:(S=P=s.origin,p.fold(function(){return S.fold(rl,rl,pn)},function(G){return S.fold(G,G,function(){var X=G(),Y=Kd(S,X.x,X.y);return pn(Y.left,Y.top,X.width,X.height)})})),origin:P,preference:f,maxHeightFunction:M,maxWidthFunction:k,lastPlacement:h,transition:b})}function Tv(u,e){Hi(u.element,e.element)}function ay(u,e){var t,n=u.components();wn((t=u).components(),function(o){return ja(o.element)}),ma(t.element),t.syncComponents();var r=Es(n,e);wn(r,function(o){Bv(o),u.getSystem().removeFromWorld(o)}),wn(e,function(o){o.getSystem().isConnected()?Tv(u,o):(u.getSystem().addToWorld(o),Tv(u,o),Rs(u.element)&&zv(o)),u.syncComponents()})}function Zu(u,e){Lb(u,e,Hi)}function Dv(u){Bv(u),ja(u.element),u.getSystem().removeFromWorld(u)}function zf(u){var e=ur(u.element).bind(function(t){return u.getSystem().getByDom(t).toOptional()});Dv(u),e.each(function(t){t.syncComponents()})}function cg(u){var e=u.components();wn(e,Dv),ma(u.element),u.syncComponents()}function _h(u,e){Fv(u,e,Hi)}function Wc(u){var e=ko(u.element);wn(e,function(t){u.getByDom(t).each(Bv)}),ja(u.element)}function El(u,e,t,n){t.get().each(function(o){cg(u)}),Zu(e.getAttachPoint(u),u);var r=u.getSystem().build(n);return Zu(u,r),t.set(r),r}function dg(u,e,t,n){var r=El(u,e,t,n);return e.onOpen(u,r),r}function Av(u,e,t){t.get().each(function(n){cg(u),zf(u),e.onClose(u,n),t.clear()})}function Ob(u,e,t){return t.isOpen()}function Ff(u){var e=qi("Dismissal",Bb,u),t={};return t[Hf()]={schema:pu([Et("target")]),onReceive:function(n,r){Kr.isOpen(n)&&(Kr.isPartOf(n,r.target)||e.isExtraPart(n,r.target)||e.fireEventInstead.fold(function(){return Kr.close(n)},function(o){return gr(n,o.event)}))}},t}function hl(u){var e=qi("Reposition",Ju,u),t={};return t[wd()]={onReceive:function(n){Kr.isOpen(n)&&e.fireEventInstead.fold(function(){return e.doReposition(n)},function(r){return gr(n,r.event)})}},t}function uu(u,e,t){e.store.manager.onLoad(u,e,t)}function fg(u,e,t){e.store.manager.onUnload(u,e,t)}function Eb(){var u=$n(null);return dl({set:u.set,get:u.get,isNotSet:function(){return null===u.get()},clear:function(){u.set(null)},readState:function(){return{mode:"memory",value:u.get()}}})}function xc(){var u=$n({}),e=$n({});return dl({readState:function(){return{mode:"dataset",dataByValue:u.get(),dataByText:e.get()}},lookup:function(t){return St(u.get(),t).orThunk(function(){return St(e.get(),t)})},update:function(t){var n=u.get(),r=e.get(),o={},i={};wn(t,function(s){St(o[s.value]=s,"meta").each(function(l){St(l,"text").each(function(c){i[c]=s})})}),u.set(_e(_e({},n),o)),e.set(_e(_e({},r),i))},clear:function(){u.set({}),e.set({})}})}function wh(u,e,t,n){var r=e.store;t.update([n]),r.setValue(u,n),e.onSetValue(u,n)}function as(u,e){return al(u,{},Mt(e,function(t){return n=t.name(),r="Cannot configure "+t.name()+" for "+u,Xt(n,n,{tag:"option",process:{}},qr(function(o){return mc("The field: "+n+" is forbidden. "+r)}));var n,r}).concat([vn("dump",Ut)]))}function um(u){return u.dump}function bs(u,e){return _e(_e({},cn(e)),u.dump)}function lm(u){return yn(u,"uiType")}function hg(u){return u.fold(H.some,H.none,H.some,H.some)}function gg(u){function e(t){return t.name}return u.fold(e,e,e,e)}function Gc(u,e){return function(t){var n=qi("Converting part type",e,t);return u(n)}}function Iv(u,e,t,n){return j(e.defaults(u,t,n),t,{uid:u.partUids[e.name]},e.overrides(u,t,n))}function sy(u,e){var t={};return wn(e,function(n){hg(n).each(function(r){var o=g1(u,r.pname);t[r.name]=function(i){var s=qi("Part: "+r.name+" in "+u,ae(r.schema),i);return _e(_e({},o),{config:i,validated:s})}})}),t}function hp(u,e,t){return{uiType:qc(),owner:u,name:e,config:t,validated:{}}}function uy(u){return Dr(u,function(e){return e.fold(H.none,H.some,H.none,H.none).map(function(t){return il(t.name,t.schema.concat([Bc(Uv())]))}).toArray()})}function ku(u){return Mt(u,gg)}function Ov(u,e,t){return n=e,r={},o={},wn(t,function(i){i.fold(function(s){r[s.pname]=mr(!0,function(l,c,f){return s.factory.sketch(Iv(l,s,c,f))})},function(s){var l=n.parts[s.name];o[s.name]=ze(s.factory.sketch(Iv(n,s,l[Uv()]),l))},function(s){r[s.pname]=mr(!1,function(l,c,f){return s.factory.sketch(Iv(l,s,c,f))})},function(s){r[s.pname]=Z_(!0,function(l,c,f){return Mt(l[s.name],function(h){return s.factory.sketch(j(s.defaults(l,h,f),h,s.overrides(l,h)))})})})}),{internals:ze(r),externals:ze(o)};var n,r,o}function gl(u,e,t){return n=H.some(u),o=(r=e).components,c=Pt(t,function(h,p){return b=h,S=!1,{name:ze(y=p),required:function(){return b.fold(function(M,k){return M},function(M,k){return M})},used:function(){return S},replace:function(){if(S)throw new Error("Trying to use the same placeholder more than once: "+y);return S=!0,b}};var y,b,S}),i=n,s=r,l=c,f=Dr(o,function(h){return Wf(i,s,h,l)}),dt(c,function(h){if(!1===h.used()&&h.required())throw new Error("Placeholder: "+h.name()+" was not found in components list\nNamespace: "+n.getOr("none")+"\nComponents: "+JSON.stringify(r.components,null,2))}),f;var n,r,o,i,s,l,c,f}function fo(u,e,t){var n=e.partUids[t];return u.getSystem().getByUid(n).toOptional()}function da(u,e,t){return fo(u,e,t).getOrDie("Could not find part: "+t)}function Pb(u,e,t){var n={},r=e.partUids,o=u.getSystem();return wn(t,function(i){n[i]=ze(o.getByUid(r[i]))}),n}function ly(u,e){var t=u.getSystem();return Pt(e.partUids,function(n,r){return ze(t.getByUid(n))})}function d1(u){return ri(u.partUids)}function _d(u,e,t){var n={},r=e.partUids,o=u.getSystem();return wn(t,function(i){n[i]=ze(o.getByUid(r[i]).getOrDie())}),n}function Ev(u,e){return er(Mt(ku(e),function(t){return{key:t,value:u+"-"+t}}))}function cy(u){return Xt("partUids","partUids",_i(function(e){return Ev(e.uid,u)}),be())}function dy(u,e,t,n,r){var o;return qi(u+" [SpecSchema]",pu((o=r,(0<n.length?[il("parts",n)]:[]).concat([Et("uid"),qe("dom",{}),qe("components",[]),Bc("originalSpec"),qe("debug.sketcher",{})]).concat(o)).concat(e)),t)}function $u(u,e,t,n,r){var o=bp(r),i=dy(u,e,o,uy(t),[cy(t)]),s=Ov(0,i,t);return n(i,gl(u,i,s.internals()),o,s.externals())}function Mu(u){var e=qi("Sketcher for "+u.name,py,u),t=Pt(e.apis,sv),n=Pt(e.extraApis,Gg);return _e(_e({name:e.name,configFields:e.configFields,sketch:function(r){return(0,e.factory)(dy(e.name,e.configFields,s=bp(r),[],[]),s);var s}},t),n)}function hi(u){var e=qi("Sketcher for "+u.name,m1,u),t=sy(e.name,e.partFields),n=Pt(e.apis,sv),r=Pt(e.extraApis,Gg);return _e(_e({name:e.name,partFields:e.partFields,configFields:e.configFields,sketch:function(o){return $u(e.name,e.configFields,e.partFields,e.factory,o)},parts:t},n),r)}function Gs(u){return"input"===mt(u)&&"radio"!==Wi(u,"type")||"textarea"===mt(u)}function _c(u,e,t){(e.disabled()?vy:Xc)(u,e)}function cm(u,e){return!0===e.useNative&&fi(Wb,mt(u.element))}function f1(u,e){return cm(u,e)?Zs(u.element,"disabled"):"true"===Wi(u.element,"aria-disabled")}function dm(u,e,t,n){var r=su(u.element,"."+e.highlightClass);wn(r,function(o){Nn(n,function(i){return i.element===o})||(Ai(o,e.highlightClass),u.getSystem().getByDom(o).each(function(i){e.onDehighlight(u,i),gr(i,hv())}))})}function mg(u,e,t,n){dm(u,e,0,[n]),gm(0,e,0,n)||(vs(n.element,e.highlightClass),e.onHighlight(u,n),gr(n,Kl()))}function Rb(u,e,t,n){var r=su(u.element,"."+e.itemClass);return hr(r,function(o){return La(o,e.highlightClass)}).bind(function(o){var i=qu(o,n,0,r.length-1);return u.getSystem().getByDom(r[i]).toOptional()})}function fm(u,e,t){var n=gi(u.slice(0,e)),r=gi(u.slice(e+1));return Ao(n.concat(r),t)}function Sh(u,e,t){return Ao(gi(u.slice(0,e)),t)}function hm(u,e,t){var n=u.slice(0,e);return Ao(u.slice(e+1).concat(n),t)}function fy(u,e,t){return Ao(u.slice(e+1),t)}function eo(u){return function(e){return fi(u,e.raw.which)}}function wc(u){return function(e){return je(u,function(t){return t(e)})}}function gp(u){return!0===u.raw.shiftKey}function Nb(u){return!0===u.raw.ctrlKey}function uo(u,e){return{matches:u,classification:e}}function Pv(u,e,t){e.exists(function(n){return t.exists(function(r){return Rt(r,n)})})||gn(u,ys(),{prevFocus:e,newFocus:t})}function Vf(){function u(e){return yc(e.element)}return{get:u,set:function(e,t){var n=u(e);e.getSystem().triggerFocus(t,e.element),Pv(e,n,u(e))}}}function Rv(){function u(e){return go.getHighlighted(e).map(function(t){return t.element})}return{get:u,set:function(e,t){var n=u(e);e.getSystem().getByDom(t).fold(ht,function(o){go.highlight(e,o)});var r=u(e);Pv(e,n,r)}}}function Nv(u,e,t,n,r,o){var i=o.map(Ks);return ba(u,e,t,n,r,i)}function nf(u,e,t){var n,o,i=e.getAttachPoint(u);Ar(u.element,"position",Du.getMode(i)),o=e.cloakVisibilityAttr,Gi((n=u).element,"visibility").fold(function(){Mo(n.element,o)},function(s){rr(n.element,o,s)}),Ar(n.element,"visibility","hidden")}function jc(u,e,t){var n,r,i=u.element;Nn(["top","left","right","bottom"],function(s){return Gi(i,s).isSome()})||co(u.element,"position"),r="visibility",ui((n=u).element,e.cloakVisibilityAttr).fold(function(){return co(n.element,r)},function(s){return Ar(n.element,r,s)})}function gm(u,e,t,n){return La(n.element,e.highlightClass)}function mm(u,e,t){return zs(u.element,"."+e.itemClass).bind(function(n){return u.getSystem().getByDom(n).toOptional()})}function za(u,e,t){var n=su(u.element,"."+e.itemClass);return(0<n.length?H.some(n[n.length-1]):H.none()).bind(function(r){return u.getSystem().getByDom(r).toOptional()})}function pg(u,e,t){return po(Mt(su(u.element,"."+e.itemClass),function(n){return u.getSystem().getByDom(n).toOptional()}))}var Tu,tc,nc,Pl,Uc=(Tu=gs,{get:function(u){if(!Tu(u))throw new Error("Can only get text value of a text node");return tc(u).getOr("")},getOption:tc=function(u){return Tu(u)?H.from(u.dom.nodeValue):H.none()},set:function(u,e){if(!Tu(u))throw new Error("Can only set raw text value of a text node");u.dom.nodeValue=e}}),Ku=["img","br"],rf=[bo("getSelection"),Et("root"),bo("bubble"),Pf(),qe("overrides",{}),qe("showAbove",!1),wo("placement",function(u,e,t){var n=cr(e.root).dom,r=oy(u,0,e);return yh(Lf(n,e).bind(function(o){return(0<(l=Db(n,ef.exactFromRange(o)).getBoundingClientRect()).width||0<l.height?H.some(l).map(om):H.none()).orThunk(function(){var c=Pe.fromText("\ufeff");td(o.start,c);var f=Mv(n,ef.exact(c,0,c,1));return ja(c),f}).bind(function(c){return Rf(c.left,c.top,c.width,c.height)});var l}),r,e,t,Lf(n,e).bind(function(o){return Ui(o.start)?H.some(o.start):id(o.start)}).getOr(u.element))})],Lv="link-layout",US=ps("type",{selection:rf,node:Sv,hotspot:ug,submenu:[Et("item"),Pf(),qe("overrides",{}),wo("placement",function(u,e,t){var n=pv(t,e.item.element),r=_v(u.element,e,fp(),lg(),fp(),lg(),H.none());return H.some(is({anchorBox:n,bubble:em(),overrides:e.overrides,layouts:r,placer:H.none()}))})],makeshift:bh}),pm=[Na("classes",De),kl("mode","all",["all","layout","placement"])],hy=[qe("useFixed",Er),bo("getBounds")],of=[Ns("anchor",US),ka("transition",pm)],ba=function(u,e,t,n,r,o){var i=qi("placement.info",ae(of),r),s=i.anchor,l=n.element,c=t.get(n.uid);hh(function(){Ar(l,"position","fixed");var f=Gi(l,"visibility");Ar(l,"visibility","hidden");var h,p,y,b,S=e.useFixed()?(b=document.documentElement,q_(0,0,b.clientWidth,b.clientHeight)):(p=Pc((h=u).element),y=h.element.dom.getBoundingClientRect(),ty(p.left,p.top,y.width,y.height)),M=s.placement,k=o.map(ze).or(e.getBounds);M(u,s,S).each(function(O){var P=O.placer.getOr(Go)(u,S,O,k,n,c,i.transition);t.set(n.uid,P)}),f.fold(function(){co(l,"visibility")},function(O){Ar(l,"visibility",O)}),Gi(l,"left").isNone()&&Gi(l,"top").isNone()&&Gi(l,"right").isNone()&&Gi(l,"bottom").isNone()&&Vn(Gi(l,"position"),"fixed")&&co(l,"position")},l)},Du=Ia({fields:hy,name:"positioning",active:Ef,apis:Object.freeze({__proto__:null,position:function(u,e,t,n,r){Nv(u,e,t,n,r,H.none())},positionWithin:Nv,positionWithinBounds:ba,getMode:function(u,e,t){return e.useFixed()?"fixed":"absolute"},reset:function(u,e,t,n){var r=n.element;wn(["position","left","right","top","bottom"],function(o){return co(r,o)}),Mo(r,tm),t.clear(n.uid)}}),state:Object.freeze({__proto__:null,init:function(){var u={};return dl({readState:function(){return u},clear:function(e){Sn(e)?delete u[e]:u={}},set:function(e,t){u[e]=t},get:function(e){return St(u,e)}})}})}),Bv=function(u){gr(u,qg());var e=u.components();wn(e,Bv)},zv=function(u){var e=u.components();wn(e,zv),gr(u,lh())},Lb=function(u,e,t){u.getSystem().addToWorld(e),t(u.element,e.element),Rs(u.element)&&zv(e),u.syncComponents()},Fv=function(u,e,t){t(u,e.element);var n=ko(e.element);wn(n,function(r){e.getByDom(r).each(zv)})},Y_=Object.freeze({__proto__:null,cloak:nf,decloak:jc,open:dg,openWhileCloaked:function(u,e,t,n,r){nf(u,e),dg(u,e,t,n),r(),jc(u,e)},close:Av,isOpen:Ob,isPartOf:function(u,e,t,n){return Ob(0,0,t)&&t.get().exists(function(r){return e.isPartOf(u,r,n)})},getState:function(u,e,t){return t.get()},setContent:function(u,e,t,n){return t.get().map(function(){return El(u,e,t,n)})}}),vm=Object.freeze({__proto__:null,events:function(u,e){return Ro([Ot($m(),function(t,n){Av(t,u,e)})])}}),Kr=Ia({fields:[oo("onOpen"),oo("onClose"),Et("isPartOf"),Et("getAttachPoint"),qe("cloakVisibilityAttr","data-precloak-visibility")],name:"sandboxing",active:vm,apis:Y_,state:Object.freeze({__proto__:null,init:function(){var u=Zo(),e=ze("not-implemented");return dl({readState:e,isOpen:u.isSet,clear:u.clear,set:u.set,get:u.get})}})}),Hf=ze("dismiss.popups"),wd=ze("reposition.popups"),mp=ze("mouse.released"),Bb=pu([qe("isExtraPart",Er),ka("fireEventInstead",[qe("event",cl())])]),Ju=pu([ka("fireEventInstead",[qe("event",xb())]),Qi("doReposition")]),Vv=Object.freeze({__proto__:null,onLoad:uu,onUnload:fg,setValue:function(u,e,t,n){e.store.manager.setValue(u,e,t,n)},getValue:function(u,e,t){return e.store.manager.getValue(u,e,t)},getState:function(u,e,t){return t}}),Hv=Object.freeze({__proto__:null,events:function(u,e){var t=u.resetOnDom?[Mi(function(n,r){uu(n,u,e)}),Jl(function(n,r){fg(n,u,e)})]:[Tl(u,e,uu)];return Ro(t)}}),zb=Object.freeze({__proto__:null,memory:Eb,dataset:xc,manual:function(){return dl({readState:ht})},init:function(u){return u.store.manager.state(u)}}),h1=[bo("initialValue"),Et("getFallbackEntry"),Et("getDataKey"),Et("setValue"),wo("manager",{setValue:wh,getValue:function(u,e,t){var n=e.store,r=n.getDataKey(u);return t.lookup(r).getOrThunk(function(){return n.getFallbackEntry(r)})},onLoad:function(u,e,t){e.store.initialValue.each(function(n){wh(u,e,t,n)})},onUnload:function(u,e,t){t.clear()},state:xc})],Fb=[Et("getValue"),qe("setValue",ht),bo("initialValue"),wo("manager",{setValue:function(u,e,t,n){e.store.setValue(u,n),e.onSetValue(u,n)},getValue:function(u,e,t){return e.store.getValue(u)},onLoad:function(u,e,t){e.store.initialValue.each(function(n){e.store.setValue(u,n)})},onUnload:ht,state:Ts.init})],Mn=Ia({fields:[Di("store",{mode:"memory"},ps("mode",{memory:[bo("initialValue"),wo("manager",{setValue:function(u,e,t,n){t.set(n),e.onSetValue(u,n)},getValue:function(u,e,t){return t.get()},onLoad:function(u,e,t){e.store.initialValue.each(function(n){t.isNotSet()&&t.set(n)})},onUnload:function(u,e,t){t.clear()},state:Eb})],manual:Fb,dataset:h1})),oo("onSetValue"),qe("resetOnDom",!1)],name:"representing",active:Hv,apis:Vv,extra:{setValueFrom:function(u,e){var t=Mn.getValue(e);Mn.setValue(u,t)}},state:zb}),Sd=as,Cd=bs,pp="placeholder",kd=ua([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Wf=function(u,e,t,n){return r=u,i=n,(lm(o=t)&&o.uiType===pp?(l=o,c=i,(s=r).exists(function(f){return f!==l.owner})?kd.single(!0,ze(l)):St(c,l.name).fold(function(){throw new Error("Unknown placeholder component: "+l.name+"\nKnown: ["+ri(c)+"]\nNamespace: "+s.getOr("none")+"\nSpec: "+JSON.stringify(l,null,2))},function(f){return f.replace()})):kd.single(!1,ze(o))).fold(function(f,h){var p=lm(t)?h(e,t.config,t.validated):h(e),y=Dr(St(p,"components").getOr([]),function(b){return Wf(u,e,b,n)});return[_e(_e({},p),{components:y})]},function(f,h){if(lm(t)){var p=h(e,t.config,t.validated);return t.validated.preprocess.getOr(Ut)(p)}return h(e)});var r,o,i,s,l,c},mr=kd.single,Z_=kd.multiple,qc=ze(pp),Wv=ua([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),ym=qe("factory",{sketch:Ut}),bm=qe("schema",[]),rc=Et("name"),Gv=Xt("pname","pname",ol(function(u){return"<alloy."+jn(u.name)+">"}),be()),Vb=vn("schema",function(){return[bo("preprocess")]}),jv=qe("defaults",ze({})),Ch=qe("overrides",ze({})),gy=ae([ym,bm,rc,Gv,jv,Ch]),my=ae([ym,bm,rc,jv,Ch]),vp=ae([ym,bm,rc,Gv,jv,Ch]),Hb=ae([ym,Vb,rc,Et("unit"),Gv,jv,Ch]),ss=Gc(Wv.required,gy),Md=Gc(Wv.external,my),af=Gc(Wv.optional,vp),yp=Gc(Wv.group,Hb),Uv=ze("entirety"),kh=Object.freeze({__proto__:null,required:ss,external:Md,optional:af,group:yp,asNamedPart:hg,name:gg,asCommon:function(u){return u.fold(Ut,Ut,Ut,Ut)},original:Uv}),g1=function(u,e){return{uiType:qc(),owner:u,name:e}},vg=Object.freeze({__proto__:null,generate:sy,generateOne:hp,schemas:uy,names:ku,substitutes:Ov,components:gl,defaultUids:Ev,defaultUidsSchema:cy,getAllParts:ly,getAllPartNames:d1,getPart:fo,getPartOrDie:da,getParts:Pb,getPartsOrDie:_d}),bp=function(u){return yn(u,"uid")?u:_e(_e({},u),{uid:Gu("uid")})},py=pu([Et("name"),Et("factory"),Et("configFields"),qe("apis",{}),qe("extraApis",{})]),m1=pu([Et("name"),Et("factory"),Et("configFields"),Et("partFields"),qe("apis",{}),qe("extraApis",{})]),As=Object.freeze({__proto__:null,getCurrent:function(u,e,t){return e.find(u)}}),ho=Ia({fields:[Et("find")],name:"composing",apis:As}),Wb=["input","button","textarea","select"],vy=function(u,e,t){e.disableClass.each(function(n){vs(u.element,n)}),(cm(u,e)?function(n){rr(n.element,"disabled","disabled")}:function(n){rr(n.element,"aria-disabled","true")})(u),e.onDisabled(u)},Xc=function(u,e,t){e.disableClass.each(function(n){Ai(u.element,n)}),(cm(u,e)?function(n){Mo(n.element,"disabled")}:function(n){rr(n.element,"aria-disabled","false")})(u),e.onEnabled(u)},yy=Object.freeze({__proto__:null,enable:Xc,disable:vy,isDisabled:f1,onLoad:_c,set:function(u,e,t,n){(n?vy:Xc)(u,e)}}),yg=Object.freeze({__proto__:null,exhibit:function(u,e){return Qs({classes:e.disabled()?e.disableClass.toArray():[]})},events:function(u,e){return Ro([rs(Wu(),function(t,n){return f1(t,u)}),Tl(u,e,_c)])}}),Kn=Ia({fields:[ki("disabled",Er),qe("useNative",!0),bo("disableClass"),oo("onDisabled"),oo("onEnabled")],name:"disabling",active:yg,apis:yy}),qv=Object.freeze({__proto__:null,dehighlightAll:function(u,e,t){return dm(u,e,0,[])},dehighlight:function(u,e,t,n){gm(0,e,0,n)&&(Ai(n.element,e.highlightClass),e.onDehighlight(u,n),gr(n,hv()))},highlight:mg,highlightFirst:function(u,e,t){mm(u,e).each(function(n){mg(u,e,0,n)})},highlightLast:function(u,e,t){za(u,e).each(function(n){mg(u,e,0,n)})},highlightAt:function(u,e,t,n){var r,o,i;o=n,i=su((r=u).element,"."+e.itemClass),H.from(i[o]).fold(function(){return Sr.error(new Error("No element found with index "+o))},r.getSystem().getByDom).fold(function(s){throw s},function(s){mg(u,e,0,s)})},highlightBy:function(u,e,t,n){Ao(pg(u,e),n).each(function(r){mg(u,e,0,r)})},isHighlighted:gm,getHighlighted:function(u,e,t){return zs(u.element,"."+e.highlightClass).bind(function(n){return u.getSystem().getByDom(n).toOptional()})},getFirst:mm,getLast:za,getPrevious:function(u,e,t){return Rb(u,e,0,-1)},getNext:function(u,e,t){return Rb(u,e,0,1)},getCandidates:pg}),go=Ia({fields:[Et("highlightClass"),Et("itemClass"),oo("onHighlight"),oo("onDehighlight")],name:"highlighting",apis:qv}),by=[8],js=[9],Oa=[13],xp=[27],lu=[32],_p=[37],xm=[38],_m=[39],Mh=[40],Th=Qn(gp);function sf(u,e,t,n,r){function o(s,l,c,f,h){var p=c(s,l,f,h),y=l.event;return Ao(p,function(b){return b.matches(y)}).map(function(b){return b.classification}).bind(function(b){return b(s,l,f,h)})}var i={schema:function(){return u.concat([qe("focusManager",Vf()),Di("focusInside","onFocus",Xl(function(s){return fi(["onFocus","onEnterOrSpace","onApi"],s)?Sr.value(s):Sr.error("Invalid value for focusInside")})),wo("handler",i),wo("state",e),wo("sendFocusIn",r)])},processKey:o,toEvents:function(s,l){var c=s.focusInside!==nc.OnFocusMode?H.none():r(s).map(function(h){return Ot(sh(),function(p,y){h(p,s,l),y.stop()})}),f=[Ot(cd(),function(h,p){o(h,p,t,s,l).fold(function(){var y=h,b=p,S=eo(lu.concat(Oa))(b.event);s.focusInside===nc.OnEnterOrSpaceMode&&S&&Xo(y,b)&&r(s).each(function(M){M(y,s,l),b.stop()})},function(y){p.stop()})}),Ot(ll(),function(h,p){o(h,p,n,s,l).each(function(y){p.stop()})})];return Ro(c.toArray().concat(f))}};return i}function xy(u){function e(s,l){return 0<Ra(s.visibilitySelector.bind(function(c){return vc(l,c)}).getOr(l))}function t(s,l,c){var f=l,h=xt(su(s.element,f.selector),function(p){return e(f,p)});H.from(h[f.firstTabstop]).each(function(p){l.focusManager.set(s,p)})}function n(s,l,c,f){var h,p=su(s.element,c.selector);return(h=c).focusManager.get(s).bind(function(y){return vc(y,h.selector)}).bind(function(y){return hr(p,un(Rt,y)).bind(function(b){return S=s,M=c,f(p,b,function(k){return e(O=M,P=k)&&O.useTabstopAt(P);var O,P}).fold(function(){return M.cyclic?H.some(!0):H.none()},function(k){return M.focusManager.set(S,k),H.some(!0)});var S,M})})}var r=[bo("onEscape"),bo("onEnter"),qe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),qe("firstTabstop",0),qe("useTabstopAt",dn),bo("visibilitySelector")].concat([u]),o=ze([uo(wc([gp,eo(js)]),function(s,l,c){return n(s,0,c,c.cyclic?fm:Sh)}),uo(eo(js),function(s,l,c){return n(s,0,c,c.cyclic?hm:fy)}),uo(eo(xp),function(s,l,c){return c.onEscape.bind(function(f){return f(s,l)})}),uo(wc([Th,eo(Oa)]),function(s,l,c){return c.onEnter.bind(function(f){return f(s,l)})})]),i=ze([]);return sf(r,Ts.init,o,i,function(){return H.some(t)})}function Za(u,e,t){return Gs(t)&&eo(lu)(e.event)?H.none():(Ho(u,t,Wu()),H.some(!0))}function Xv(u,e){return H.some(!0)}function Yv(u,e,t){return t.execute(u,e,u.element)}function Zv(){var u=Zo();return dl({readState:function(){return u.get().map(function(e){return{numRows:String(e.numRows),numColumns:String(e.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,t){u.set({numRows:e,numColumns:t})},getNumRows:function(){return u.get().map(function(e){return e.numRows})},getNumColumns:function(){return u.get().map(function(e){return e.numColumns})}})}function Gf(u){return function(e,t,n,r){var o=u(e.element);return wp(o,e,t,n,r)}}function Sc(u,e){return Gf(Jd(u,e))}function _(u,e){return Gf(Jd(e,u))}function D(u){return function(e,t,n,r){return wp(u,e,t,n,r)}}function B(u){return!((e=u.dom).offsetWidth<=0&&e.offsetHeight<=0);var e}function W(u,e,t){var n,r=xt(su(u,t),B);return hr(n=r,function(o){return Rt(o,e)}).map(function(o){return{index:o,candidates:n}})}function K(u,e){return hr(u,function(t){return Rt(e,t)})}function J(u,e,t,n){return n(Math.floor(e/t),e%t).bind(function(r){var o=r.row*t+r.column;return 0<=o&&o<u.length?H.some(u[o]):H.none()})}function se(u,e,t,n,r){return J(u,e,n,function(o,i){var l=qu(i,r,0,(o===t-1?u.length-o*n:n)-1);return H.some({row:o,column:l})})}function fe(u,e,t,n,r){return J(u,e,n,function(o,i){var s=qu(o,r,0,t-1),c=iu(i,0,(s===t-1?u.length-s*n:n)-1);return H.some({row:s,column:c})})}function we(u,e,t){zs(u.element,e.selector).each(function(n){e.focusManager.set(u,n)})}function ke(u){return function(e,t,n,r){return W(e,t,n.selector).bind(function(o){return u(o.candidates,o.index,r.getNumRows().getOr(n.initSize.numRows),r.getNumColumns().getOr(n.initSize.numColumns))})}}function Le(u,e,t){return t.captureTab?H.some(!0):H.none()}function Fe(u,e,t,n){var r=function(o,i,s){var l,c=qu(i,n,0,s.length-1);return c===o?H.none():"button"===mt(l=s[c])&&"disabled"===Wi(l,"disabled")?r(o,c,s):H.from(s[c])};return W(u,t,e).bind(function(o){var i=o.index;return r(i,i,o.candidates)})}function Re(u,e,t){return(n=t).focusManager.get(u).bind(function(r){return vc(r,n.selector)}).bind(function(r){return t.execute(u,e,r)});var n}function tt(u,e,t){e.getInitial(u).orThunk(function(){return zs(u.element,e.selector)}).each(function(n){e.focusManager.set(u,n)})}function He(u,e,t){return Fe(u,t.selector,e,-1)}function at(u,e,t){return Fe(u,t.selector,e,1)}function vt(u){return function(e,t,n,r){return u(e,t,n,r).bind(function(){return n.executeOnMove?Re(e,t,n):H.some(!0)})}}function Ue(u,e,t){return t.onEscape(u,e)}function st(u,e,t){return H.from(u[e]).bind(function(n){return H.from(n[t]).map(function(r){return{rowIndex:e,columnIndex:t,cell:r}})})}function Wt(u,e,t,n){return st(u,e,qu(t,n,0,u[e].length-1))}function Ke(u,e,t,n){var r=qu(t,n,0,u.length-1);return st(u,r,iu(e,0,u[r].length-1))}function Gt(u,e,t,n){return st(u,e,iu(t+n,0,u[e].length-1))}function yt(u,e,t,n){var r=iu(t+n,0,u.length-1);return st(u,r,iu(e,0,u[r].length-1))}function Bn(u,e,t){e.previousSelector(u).orThunk(function(){return zs(u.element,e.selectors.cell)}).each(function(n){e.focusManager.set(u,n)})}function Yt(u,e){return function(t,n,r){var o=r.cycles?u:e;return vc(n,r.selectors.row).bind(function(i){return K(su(i,r.selectors.cell),n).bind(function(s){var l=su(t,r.selectors.row);return K(l,i).bind(function(c){var f,h=(f=r,Mt(l,function(p){return su(p,f.selectors.cell)}));return o(h,c,s).map(function(p){return p.cell})})})})}}function qn(u,e,t){return t.focusManager.get(u).bind(function(n){return t.execute(u,e,n)})}function Fr(u,e,t){zs(u.element,e.selector).each(function(n){e.focusManager.set(u,n)})}function fr(u,e,t){return Fe(u,t.selector,e,-1)}function Vr(u,e,t){return Fe(u,t.selector,e,1)}function io(u,e,t,n){var r=u.getSystem().build(n);Lb(u,r,t)}function Br(u,e,t,n){Ao(ky(u),function(r){return Rt(n.element,r.element)}).each(zf)}function to(u,e,t,n,r){var o=ky(u);return H.from(o[n]).map(function(i){return Br(u,0,0,i),r.each(function(s){io(u,0,function(l,c){var f,h=c;dr(f=l,n).fold(function(){Hi(f,h)},function(p){td(p,h)})},s)}),i})}function zn(u,e){var t,n;return{key:u,value:{config:{},me:(t=u,n=Ro(e),Ia({fields:[Et("enabled")],name:t,active:{events:ze(n)}})),configAsRaw:ze({}),initialConfig:{},state:Ts}}}function Ri(u,e){e.ignore||(_u(u.element),e.onFocus(u))}function Xr(u,e,t){var n=e.aria;n.update(u,n,t.get())}function Ci(u,e,t){e.toggleClass.each(function(n){(t.get()?vs:Ai)(u.element,n)})}function So(u,e,t){XS(u,e,t,!t.get())}function Do(u,e,t){t.set(!0),Ci(u,e,t),Xr(u,e,t)}function na(u,e,t){t.set(!1),Ci(u,e,t),Xr(u,e,t)}function ra(u,e,t){XS(u,e,t,e.selected)}function fa(){function u(e,t){t.stop(),To(e)}return[Ot(eu(),u),Ot(tu(),u),Xh(ul()),Xh(Lc())]}function jr(u){return Ro(pe([u.map(function(e){return nu(function(t,n){e(t),n.stop()})}).toArray(),fa()]))}function Yc(u){(yc(u.element).isNone()||zr.isFocused(u))&&(zr.isFocused(u)||zr.focus(u),gn(u,dw,{item:u}))}function oa(u){gn(u,tC,{item:u})}function Ti(u,e){return u.x+u.width/2-e.width/2}function bg(u,e){return u.x+u.width-e.width}function uf(u,e){return u.y+u.height-e.height}function Au(u,e){return u.y+u.height/2-e.height/2}function xs(u,e,t){return Pi(bg(u,e),uf(u,e),t.insetSouthwest(),ap(),"southwest",vi(u,{right:0,bottom:3}),kp)}function Dh(u,e,t){return Pi(u.x,uf(u,e),t.insetSoutheast(),Kg(),"southeast",vi(u,{left:1,bottom:3}),kp)}function Is(u,e,t){return Pi(bg(u,e),u.y,t.insetNorthwest(),ip(),"northwest",vi(u,{right:0,top:2}),kp)}function lf(u,e,t){return Pi(u.x,u.y,t.insetNortheast(),Al(),"northeast",vi(u,{left:1,top:2}),kp)}function jf(u,e,t){return Pi(bg(u,e),Au(u,e),t.insetEast(),sp(),"east",vi(u,{right:0}),kp)}function $_(u,e,t){return Pi(u.x,Au(u,e),t.insetWest(),Jg(),"west",vi(u,{left:1}),kp)}function qS(u){switch(u){case"north":return oc;case"northeast":return lf;case"northwest":return Is;case"south":return Sg;case"southeast":return Dh;case"southwest":return xs;case"east":return jf;case"west":return $_}}function K_(u,e,t,n,r){return og(n).map(qS).getOr(oc)(u,e,t,n,r)}function J_(u){switch(u){case"north":return Sg;case"northeast":return Dh;case"northwest":return xs;case"south":return oc;case"southeast":return lf;case"southwest":return Is;case"east":return $_;case"west":return jf}}function Gb(u,e,t,n,r){return og(n).map(J_).getOr(oc)(u,e,t,n,r)}function Bo(u){var e=void 0!==u.uid&&Lr(u,"uid")?u.uid:Gu("memento");return{get:function(t){return t.getSystem().getByUid(e).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(e).toOptional()},asSpec:function(){return _e(_e({},u),{uid:e})}}}function wm(u){return function(){return St(u,Cg).getOr("!not found!")}}function p1(u,e){var t,n=u.toLowerCase();if(Td.isRtl()){var r=Me(t=n,"-rtl")?t:t+"-rtl";return yn(e,r)?r:n}return n}function Q_(u,e){return St(e,p1(u,e))}function Uk(u,e){var t=e();return Q_(u,t).getOrThunk(wm(t))}function ew(){return zn("add-focusable",[Mi(function(u){var n;n=function(r){return kn(r,"svg")},Ao(u.element.dom.childNodes,function(r){return n(Pe.fromDom(r))}).map(Pe.fromDom).each(function(r){return rr(r,"focusable","false")})})])}function jb(u,e,t,n){var r,o,i,s=(i=e,Td.isRtl()&&yn(hw,i)?["tox-icon--flip"]:[]),l=St(t,p1(e,t)).or(n).getOrThunk(wm(t));return{dom:{tag:u.tag,attributes:null!==(r=u.attributes)&&void 0!==r?r:{},classes:u.classes.concat(s),innerHtml:l},behaviours:cn(me(me([],null!==(o=u.behaviours)&&void 0!==o?o:[],!0),[ew()],!1))}}function xg(u,e,t,n){return void 0===n&&(n=H.none()),jb(e,u,t(),n)}function XS(u,e,t,n){(n?Do:na)(u,e,t)}function tw(u,e,t){rr(u.element,"aria-expanded",t)}function ml(u){return"prepared"===u.type?H.some(u.menu):H.none()}(Pl=nc=nc||{}).OnFocusMode="onFocus",Pl.OnEnterOrSpaceMode="onEnterOrSpace",Pl.OnApiMode="onApi";var no=xy(vn("cyclic",Er)),$v=xy(vn("cyclic",dn)),nw=sf([qe("execute",Za),qe("useSpace",!1),qe("useEnter",!0),qe("useControlEnter",!1),qe("useDown",!1)],Ts.init,function(u,e,t,n){var r=t.useSpace&&!Gs(u.element)?lu:[],i=t.useDown?Mh:[];return[uo(eo(r.concat(t.useEnter?Oa:[]).concat(i)),Yv)].concat(t.useControlEnter?[uo(wc([Nb,eo(Oa)]),Yv)]:[])},function(u,e,t,n){return t.useSpace&&!Gs(u.element)?[uo(eo(lu),Xv)]:[]},function(){return H.none()}),rw=Object.freeze({__proto__:null,flatgrid:Zv,init:function(u){return u.state(u)}}),wp=function(u,e,t,n,r){return n.focusManager.get(e).bind(function(o){return u(e.element,o,n,r)}).map(function(o){return n.focusManager.set(e,o),!0})},_y=D,v1=D,Kv=D,ow=ke(function(u,e,t,n){return se(u,e,t,n,-1)}),YS=ke(function(u,e,t,n){return se(u,e,t,n,1)}),Ub=ke(function(u,e,t,n){return fe(u,e,t,n,-1)}),qk=ke(function(u,e,t,n){return fe(u,e,t,n,1)}),Xk=sf([Et("selector"),qe("execute",Za),Vs("onEscape"),qe("captureTab",!1),gh()],Zv,ze([uo(eo(_p),Sc(ow,YS)),uo(eo(_m),_(ow,YS)),uo(eo(xm),_y(Ub)),uo(eo(Mh),v1(qk)),uo(wc([gp,eo(js)]),Le),uo(wc([Th,eo(js)]),Le),uo(eo(xp),function(u,e,t){return t.onEscape(u,e)}),uo(eo(lu.concat(Oa)),function(u,e,t,n){return(r=t).focusManager.get(u).bind(function(o){return vc(o,r.selector)}).bind(function(o){return t.execute(u,e,o)});var r})]),ze([uo(eo(lu),Xv)]),function(){return H.some(we)}),ZS=[Et("selector"),qe("getInitial",H.none),qe("execute",Za),Vs("onEscape"),qe("executeOnMove",!1),qe("allowVertical",!0)],Jv=ze([uo(eo(lu),Xv)]),Yk=sf(ZS,Ts.init,function(u,e,t,n){var r=_p.concat(t.allowVertical?xm:[]),o=_m.concat(t.allowVertical?Mh:[]);return[uo(eo(r),vt(Sc(He,at))),uo(eo(o),vt(_(He,at))),uo(eo(Oa),Re),uo(eo(lu),Re),uo(eo(xp),Ue)]},Jv,function(){return H.some(tt)}),Zk=[il("selectors",[Et("row"),Et("cell")]),qe("cycles",!0),qe("previousSelector",H.none),qe("execute",Za)],wy=Yt(function(u,e,t){return Wt(u,e,t,-1)},function(u,e,t){return Gt(u,e,t,-1)}),$S=Yt(function(u,e,t){return Wt(u,e,t,1)},function(u,e,t){return Gt(u,e,t,1)}),Sm=Yt(function(u,e,t){return Ke(u,t,e,-1)},function(u,e,t){return yt(u,t,e,-1)}),qb=Yt(function(u,e,t){return Ke(u,t,e,1)},function(u,e,t){return yt(u,t,e,1)}),Sp=ze([uo(eo(_p),Sc(wy,$S)),uo(eo(_m),_(wy,$S)),uo(eo(xm),_y(Sm)),uo(eo(Mh),v1(qb)),uo(eo(lu.concat(Oa)),function(u,e,t){return yc(u.element).bind(function(n){return t.execute(u,e,n)})})]),Us=ze([uo(eo(lu),Xv)]),Sy=sf(Zk,Ts.init,Sp,Us,function(){return H.some(Bn)}),$k=[Et("selector"),qe("execute",Za),qe("moveOnTab",!1)],Kk=ze([uo(eo(xm),Kv(fr)),uo(eo(Mh),Kv(Vr)),uo(wc([gp,eo(js)]),function(u,e,t,n){return t.moveOnTab?Kv(fr)(u,e,t,n):H.none()}),uo(wc([Th,eo(js)]),function(u,e,t,n){return t.moveOnTab?Kv(Vr)(u,e,t,n):H.none()}),uo(eo(Oa),qn),uo(eo(lu),qn)]),KS=ze([uo(eo(lu),Xv)]),iw=sf($k,Ts.init,Kk,KS,function(){return H.some(Fr)}),JS=sf([Vs("onSpace"),Vs("onEnter"),Vs("onShiftEnter"),Vs("onLeft"),Vs("onRight"),Vs("onTab"),Vs("onShiftTab"),Vs("onUp"),Vs("onDown"),Vs("onEscape"),qe("stopSpaceKeyup",!1),bo("focusIn")],Ts.init,function(u,e,t){return[uo(eo(lu),t.onSpace),uo(wc([Th,eo(Oa)]),t.onEnter),uo(wc([gp,eo(Oa)]),t.onShiftEnter),uo(wc([gp,eo(js)]),t.onShiftTab),uo(wc([Th,eo(js)]),t.onTab),uo(eo(xm),t.onUp),uo(eo(Mh),t.onDown),uo(eo(_p),t.onLeft),uo(eo(_m),t.onRight),uo(eo(lu),t.onSpace),uo(eo(xp),t.onEscape)]},function(u,e,t){return t.stopSpaceKeyup?[uo(eo(lu),Xv)]:[]},function(u){return u.focusIn}),Jk=no.schema(),aw=$v.schema(),sw=Yk.schema(),Qk=Xk.schema(),Cy=Sy.schema(),Ah=nw.schema(),uw=iw.schema(),y1=JS.schema(),pr=ou({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Jk,cyclic:aw,flow:sw,flatgrid:Qk,matrix:Cy,execution:Ah,menu:uw,special:y1}),name:"keying",active:{events:function(u,e){return u.handler.toEvents(u,e)}},apis:{focusIn:function(u,e,t){e.sendFocusIn(e).fold(function(){u.getSystem().triggerFocus(u.element,u.element)},function(n){n(u,e,t)})},setGridSize:function(u,e,t,n,r){Lr(t,"setGridSize")?t.setGridSize(n,r):console.error("Layout does not support setGridSize")}},state:rw}),ky=function(u,e){return u.components()},Ur=Ia({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(u,e,t,n){io(u,0,Hi,n)},prepend:function(u,e,t,n){io(u,0,Ss,n)},remove:Br,replaceAt:to,replaceBy:function(u,e,t,n,r){return hr(ky(u),n).bind(function(o){return to(u,0,0,o,r)})},set:function(u,e,t,n){hh(function(){var r=Mt(n,u.getSystem().build);ay(u,r)},u.element)},contents:ky})}),lw=Object.freeze({__proto__:null,focus:Ri,blur:function(u,e){e.ignore||u.element.dom.blur()},isFocused:function(u){return rp(u.element)}}),QS=Object.freeze({__proto__:null,exhibit:function(u,e){return Qs(e.ignore?{}:{attributes:{tabindex:"-1"}})},events:function(u){return Ro([Ot(sh(),function(e,t){Ri(e,u),t.stop()})].concat(u.stopMousedown?[Ot(Lc(),function(e,t){t.event.prevent()})]:[]))}}),zr=Ia({fields:[oo("onFocus"),qe("stopMousedown",!1),qe("ignore",!1)],name:"focusing",active:QS,apis:lw}),cw=Object.freeze({__proto__:null,onLoad:ra,toggle:So,isOn:function(u,e,t){return t.get()},on:Do,off:na,set:XS}),eC=Object.freeze({__proto__:null,exhibit:function(){return Qs({})},events:function(u,e){var t,n,r,o=(t=u,n=e,r=So,nu(function(s){r(s,t,n)})),i=Tl(u,e,ra);return Ro(pe([u.toggleOnExecute?[o]:[],[i]]))}}),Oo=Ia({fields:[qe("selected",!1),bo("toggleClass"),qe("toggleOnExecute",!0),Di("aria",{mode:"none"},ps("mode",{pressed:[qe("syncWithExpanded",!1),wo("update",function(u,e,t){rr(u.element,"aria-pressed",t),e.syncWithExpanded&&tw(u,0,t)})],checked:[wo("update",function(u,e,t){rr(u.element,"aria-checked",t)})],expanded:[wo("update",tw)],selected:[wo("update",function(u,e,t){rr(u.element,"aria-selected",t)})],none:[wo("update",ht)]}))],name:"toggling",active:eC,apis:cw,state:{init:function(){var u=$n(!1);return{get:function(){return u.get()},set:function(e){return u.set(e)},clear:function(){return u.set(!1)},readState:function(){return u.get()}}}}}),dw="alloy.item-hover",tC="alloy.item-focus",eM=ze(dw),tM=ze(tC),nC=[Et("data"),Et("components"),Et("dom"),qe("hasSubmenu",!1),bo("toggling"),Sd("itemBehaviours",[Oo,zr,pr,Mn]),qe("ignoreFocus",!1),qe("domModification",{}),wo("builder",function(u){return{dom:u.dom,domModification:_e(_e({},u.domModification),{attributes:_e(_e(_e({role:u.toggling.isSome()?"menuitemcheckbox":"menuitem"},u.domModification.attributes),{"aria-haspopup":u.hasSubmenu}),u.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Cd(u.itemBehaviours,[u.toggling.fold(Oo.revoke,function(e){return Oo.config(_e({aria:{mode:"checked"}},e))}),zr.config({ignore:u.ignoreFocus,stopMousedown:u.ignoreFocus,onFocus:function(e){oa(e)}}),pr.config({mode:"execution"}),Mn.config({store:{mode:"memory",initialValue:u.data}}),zn("item-type-events",me(me([],fa(),!0),[Ot(Vu(),Yc),Ot(Bs(),zr.focus)],!1))]),components:u.components,eventOrder:u.eventOrder}}),qe("eventOrder",{})],rC=[Et("dom"),Et("components"),wo("builder",function(u){return{dom:u.dom,components:u.components,events:Ro([Ot(Bs(),function(e,t){t.stop()})])}})],qs=ze("item-widget"),My=ze([ss({name:"widget",overrides:function(u){return{behaviours:cn([Mn.config({store:{mode:"manual",getValue:function(e){return u.data},setValue:ht}})])}}})]),oC=ps("type",{widget:[Et("uid"),Et("data"),Et("components"),Et("dom"),qe("autofocus",!1),qe("ignoreFocus",!1),Sd("widgetBehaviours",[Mn,zr,pr]),qe("domModification",{}),cy(My()),wo("builder",function(u){function e(o){return fo(o,u,"widget").map(function(i){return pr.focusIn(i),i})}function t(o,i){return Gs(i.event.target)||u.autofocus&&i.setSource(o.element),H.none()}var n=Ov(qs(),u,My()),r=gl(qs(),u,n.internals());return{dom:u.dom,components:r,domModification:u.domModification,events:Ro([nu(function(o,i){e(o).each(function(s){i.stop()})}),Ot(Vu(),Yc),Ot(Bs(),function(o,i){u.autofocus?e(o):zr.focus(o)})]),behaviours:Cd(u.widgetBehaviours,[Mn.config({store:{mode:"memory",initialValue:u.data}}),zr.config({ignore:u.ignoreFocus,onFocus:function(o){oa(o)}}),pr.config({mode:"special",focusIn:u.autofocus?function(o){e(o)}:Ya(),onLeft:t,onRight:t,onEscape:function(o,i){return zr.isFocused(o)||u.autofocus?(u.autofocus&&i.setSource(o.element),H.none()):(zr.focus(o),H.some(!0))}})])}})],item:nC,separator:rC}),fw=ze([yp({factory:{sketch:function(u){var e=qi("menu.spec item",oC,u);return e.builder(e)}},name:"items",unit:"item",defaults:function(u,e){return yn(e,"uid")?e:_e(_e({},e),{uid:Gu("item")})},overrides:function(u,e){return{type:e.type,ignoreFocus:u.fakeFocus,domModification:{classes:[u.markers.item]}}}})]),Cm=ze([Et("value"),Et("items"),Et("dom"),Et("components"),qe("eventOrder",{}),as("menuBehaviours",[go,Mn,ho,pr]),Di("movement",{mode:"menu",moveOnTab:!0},ps("mode",{grid:[gh(),wo("config",function(u,e){return{mode:"flatgrid",selector:"."+u.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:u.focusManager}})],matrix:[wo("config",function(u,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+u.markers.item},focusManager:u.focusManager}}),Et("rowSelector")],menu:[qe("moveOnTab",!0),wo("config",function(u,e){return{mode:"menu",selector:"."+u.markers.item,moveOnTab:e.moveOnTab,focusManager:u.focusManager}})]})),Ns("markers",op()),qe("fakeFocus",!1),qe("focusManager",Vf()),oo("onHighlight")]),Ty=ze("alloy.menu-focus"),Cp=hi({name:"Menu",configFields:Cm(),partFields:fw(),factory:function(u,e,t,n){return{uid:u.uid,dom:u.dom,markers:u.markers,behaviours:bs(u.menuBehaviours,[go.config({highlightClass:u.markers.selectedItem,itemClass:u.markers.item,onHighlight:u.onHighlight}),Mn.config({store:{mode:"memory",initialValue:u.value}}),ho.config({find:H.some}),pr.config(u.movement.config(u,u.movement))]),events:Ro([Ot(tM(),function(r,o){var i=o.event;r.getSystem().getByDom(i.target).each(function(s){go.highlight(r,s),o.stop(),gn(r,Ty(),{menu:r,item:s})})}),Ot(eM(),function(r,o){go.highlight(r,o.event.item)})]),components:e,eventOrder:u.eventOrder,domModification:{attributes:{role:"menu"}}}}}),iC=function(u,e,t,n){return St(t,n).bind(function(r){return St(u,r).bind(function(o){var i=iC(u,e,t,o);return H.some([o].concat(i))})}).getOr([])},_g=ml,Ih=ze("collapse-item"),wg=Mu({name:"TieredMenu",configFields:[Mb("onExecute"),Mb("onEscape"),ci("onOpenMenu"),ci("onOpenSubmenu"),oo("onRepositionMenu"),oo("onCollapseMenu"),qe("highlightImmediately",!0),il("data",[Et("primary"),Et("menus"),Et("expansions")]),qe("fakeFocus",!1),oo("onHighlight"),oo("onHover"),Gr(),Et("dom"),qe("navigateOnHover",!0),qe("stayInDom",!1),as("tmenuBehaviours",[pr,go,ho,Ur]),qe("eventOrder",{})],apis:{collapseMenu:function(u,e){u.collapseMenu(e)},highlightPrimary:function(u,e){u.highlightPrimary(e)},repositionMenus:function(u,e){u.repositionMenus(e)}},factory:function(u,e){function n(P){return Mn.getValue(P).value}function r(P,R){go.highlight(P,R),go.getHighlighted(R).orThunk(function(){return go.getFirst(R)}).each(function(F){Ho(P,F.element,Bs())})}function o(P,R){return po(Mt(R,function(F){return P.lookupMenu(F).bind(function(G){return"prepared"===G.type?H.some(G.menu):H.none()})}))}function i(P,R,F){var G=o(R,R.otherMenus(F));wn(G,function(X){Xa(X.element,[u.markers.backgroundMenu]),u.stayInDom||Ur.remove(P,X)})}function s(P,R){var F;dt((F=P,h.get().getOrThunk(function(){var G={},X=xt(su(F.element,"."+u.markers.item),function(Y){return"true"===Wi(Y,"aria-haspopup")});return wn(X,function(Y){F.getSystem().getByDom(Y).each(function(Q){var ne=n(Q);G[ne]=Q})}),h.set(G),G})),function(G,X){var Y=fi(R,X);rr(G.element,"aria-expanded",Y)})}function l(P,R,F){return H.from(F[0]).bind(function(G){return R.lookupMenu(G).bind(function(X){if("notbuilt"===X.type)return H.none();var Y=X.menu,Q=o(R,F.slice(1));return wn(Q,function(ne){vs(ne.element,u.markers.backgroundMenu)}),Rs(Y.element)||Ur.append(P,Qr(Y)),Xa(Y.element,[u.markers.backgroundMenu]),r(P,Y),i(P,R,F),H.some(Y)})})}var c,f,h=Zo(),p=function(){function u(l){return s(l).bind(ml)}function e(l){return St(t.get(),l)}var t=$n({}),n=$n({}),r=$n({}),o=Zo(),i=$n({}),s=function(l){return St(n.get(),l)};return{setMenuBuilt:function(l,c){var f;n.set(_e(_e({},n.get()),((f={})[l]={type:"prepared",menu:c},f)))},setContents:function(l,c,f,h){o.set(l),t.set(f),n.set(c),i.set(h);var p=function(y,b){var S={};dt(y,function(P,R){wn(P,function(F){S[F]=R})});var M=b,k=bl(b,function(P,R){return{k:P,v:R}}),O=Pt(k,function(P,R){return[R].concat(iC(S,M,k,R))});return Pt(S,function(P){return St(O,P).getOr([P])})}(h,f);r.set(p)},expand:function(l){return St(t.get(),l).map(function(c){var f=St(r.get(),l).getOr([]);return[c].concat(f)})},refresh:function(l){return St(r.get(),l)},collapse:function(l){return St(r.get(),l).bind(function(c){return 1<c.length?H.some(c.slice(1)):H.none()})},lookupMenu:s,lookupItem:e,otherMenus:function(l){var c=i.get();return Es(ri(c),l)},getPrimary:function(){return o.get().bind(u)},getMenus:function(){return n.get()},clear:function(){t.set({}),n.set({}),r.set({}),o.clear()},isClear:function(){return o.get().isNone()},getTriggeringPath:function(l,c){var f=xt(e(l).toArray(),function(h){return u(h).isSome()});return St(r.get(),l).bind(function(h){var p=gi(f.concat(h));return function(y){for(var b=[],S=0;S<y.length;S++){var M=y[S];if(!M.isSome())return H.none();b.push(M.getOrDie())}return H.some(b)}(Dr(p,function(y,b){return S=y,M=c,k=p.slice(0,b+1),u(S).bind(function(O){return P=S,Cn(t.get(),function(R,F){return R===P}).bind(function(R){return M(R).map(function(F){return{triggeredMenu:O,triggeringItem:F,triggeringPath:k}})});var P}).fold(function(){return Vn(o.get(),y)?[]:[H.none()]},function(O){return[H.some(O)]});var S,M,k}))})}}}();function y(P,R,F){if(void 0===F&&(F=c.HighlightSubmenu),R.hasConfigured(Kn)&&Kn.isDisabled(R))return H.some(R);var G=n(R);return p.expand(G).bind(function(X){return s(P,X),H.from(X[0]).bind(function(Y){return p.lookupMenu(Y).bind(function(Q){var ne=function(le,ce,ye){if("notbuilt"!==ye.type)return ye.menu;var xe=le.getSystem().build(ye.nbMenu());return p.setMenuBuilt(ce,xe),xe}(P,Y,Q);return Rs(ne.element)||Ur.append(P,Qr(ne)),u.onOpenSubmenu(P,R,ne,gi(X)),F===c.HighlightSubmenu?(go.highlightFirst(ne),l(P,p,X)):(go.dehighlightAll(ne),H.some(R))})})})}function b(P,R){var F=n(R);return p.collapse(F).bind(function(G){return s(P,G),l(P,p,G).map(function(X){return u.onCollapseMenu(P,R,X),X})})}function S(P){return function(R,F){return vc(F.getSource(),"."+u.markers.item).bind(function(G){return R.getSystem().getByDom(G).toOptional().bind(function(X){return P(R,X).map(dn)})})}}function M(P){return go.getHighlighted(P).bind(go.getHighlighted)}(f=c={})[f.HighlightSubmenu=0]="HighlightSubmenu",f[f.HighlightParent=1]="HighlightParent";var k=Ro([Ot(Ty(),function(P,R){p.lookupItem(n(R.event.item)).each(function(){go.highlight(P,R.event.menu);var X=n(R.event.item);p.refresh(X).each(function(Y){return i(P,p,Y)})})}),nu(function(P,R){var F=R.event.target;P.getSystem().getByDom(F).each(function(G){0===n(G).indexOf("collapse-item")&&b(P,G),y(P,G,c.HighlightSubmenu).fold(function(){u.onExecute(P,G)},ht)})}),Mi(function(P,R){(function(P){var R,F,G=(R=P,F=u.data.primary,Pt(u.data.menus,function(Y,Q){function ne(){return Cp.sketch(_e(_e({},Y),{value:Q,markers:u.markers,fakeFocus:u.fakeFocus,onHighlight:u.onHighlight,focusManager:(u.fakeFocus?Rv:Vf)()}))}return Q===F?{type:"prepared",menu:R.getSystem().build(ne())}:{type:"notbuilt",nbMenu:ne}})),X=Pt(u.data.menus,function(Y,Q){return Dr(Y.items,function(ne){return"separator"===ne.type?[]:[ne.data.value]})});return p.setContents(u.data.primary,G,u.data.expansions,X),p.getPrimary()})(P).each(function(F){Ur.append(P,Qr(F)),u.onOpenMenu(P,F),u.highlightImmediately&&r(P,F)})})].concat(u.navigateOnHover?[Ot(eM(),function(P,R){var F=R.event.item,G=P,X=n(F);p.refresh(X).bind(function(Y){return s(G,Y),l(G,p,Y)}),y(P,F,c.HighlightParent),u.onHover(P,F)})]:[])),O={collapseMenu:function(P){M(P).each(function(R){b(P,R)})},highlightPrimary:function(P){p.getPrimary().each(function(R){r(P,R)})},repositionMenus:function(P){p.getPrimary().bind(function(R){return M(P).bind(function(F){var G=n(F),X=po(Mt(hn(p.getMenus()),_g));return p.getTriggeringPath(G,function(Y){return Q=Y,ut(X,function(ne){return ne.getSystem().isConnected()?Ao(go.getCandidates(ne),function(le){return n(le)===Q}):H.none()});var Q})}).map(function(F){return{primary:R,triggeringPath:F}})}).fold(function(){H.from(P.components()[0]).filter(function(R){return"menu"===Wi(R.element,"role")}).each(function(R){u.onRepositionMenu(P,R,[])})},function(R){u.onRepositionMenu(P,R.primary,R.triggeringPath)})}};return{uid:u.uid,dom:u.dom,markers:u.markers,behaviours:bs(u.tmenuBehaviours,[pr.config({mode:"special",onRight:S(function(P,R){return Gs(R.element)?H.none():y(P,R,c.HighlightSubmenu)}),onLeft:S(function(P,R){return Gs(R.element)?H.none():b(P,R)}),onEscape:S(function(P,R){return b(P,R).orThunk(function(){return u.onEscape(P,R).map(function(){return P})})}),focusIn:function(P,R){p.getPrimary().each(function(F){Ho(P,F.element,Bs())})}}),go.config({highlightClass:u.markers.selectedMenu,itemClass:u.markers.menu}),ho.config({find:function(P){return go.getHighlighted(P)}}),Ur.config({})]),eventOrder:u.eventOrder,apis:O,events:k}},extraApis:{tieredData:function(u,e,t){return{primary:u,menus:e,expansions:t}},singleData:function(u,e){return{primary:u,menus:On(u,e),expansions:{}}},collapseItem:function(u){return{value:jn(Ih()),meta:{text:u}}}}}),ha=Mu({name:"InlineView",configFields:[Et("lazySink"),oo("onShow"),oo("onHide"),jd("onEscape"),as("inlineBehaviours",[Kr,Mn,Ol]),ka("fireDismissalEventInstead",[qe("event",cl())]),ka("fireRepositionEventInstead",[qe("event",xb())]),qe("getRelated",H.none),qe("isExtraPart",Er),qe("eventOrder",H.none)],factory:function(u,e){function t(s){Kr.isOpen(s)&&Mn.getValue(s).each(function(l){switch(l.mode){case"menu":Kr.getState(s).each(wg.repositionMenus);break;case"position":var c=u.lazySink(s).getOrDie();Du.positionWithinBounds(c,s,l.config,l.getBounds())}})}function n(s,l,c,f){o(s,l,c,function(){return f.map(function(h){return Ks(h)})})}function r(s,l,c,f){var h,p,y,b,S,M=(h=u,p=s,y=l,b=f,S="horizontal"===c.type?{layouts:{onLtr:fh,onRtl:xu}}:{},wg.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightImmediately:c.menu.highlightImmediately,onEscape:function(){return Kr.close(p),h.onEscape.map(function(P){return P(p)}),H.some(!0)},onExecute:function(){return H.some(!0)},onOpenMenu:function(P,R){Du.positionWithinBounds(k().getOrDie(),R,y,b())},onOpenSubmenu:function(P,R,F,G){var X=k().getOrDie();Du.position(X,F,{anchor:_e({type:"submenu",item:R},O(G))})},onRepositionMenu:function(P,R,F){var G=k().getOrDie();Du.positionWithinBounds(G,R,y,b()),wn(F,function(X){var Y=O(X.triggeringPath);Du.position(G,X.triggeredMenu,{anchor:_e({type:"submenu",item:X.triggeringItem},Y)})})}}));function k(){return h.lazySink(p)}function O(P){return 2===P.length?S:{}}Kr.open(s,M),Mn.setValue(s,H.some({mode:"menu",menu:M}))}var o=function(s,l,c,f){var h=u.lazySink(s).getOrDie();Kr.openWhileCloaked(s,l,function(){return Du.positionWithinBounds(h,s,c,f())}),Mn.setValue(s,H.some({mode:"position",config:c,getBounds:f}))},i={setContent:function(s,l){Kr.setContent(s,l)},showAt:function(s,l,c){n(s,l,c,H.none())},showWithin:n,showWithinBounds:o,showMenuAt:function(s,l,c){r(s,l,c,H.none)},showMenuWithinBounds:r,hide:function(s){Kr.isOpen(s)&&(Mn.setValue(s,H.none()),Kr.close(s))},getContent:function(s){return Kr.getState(s)},reposition:t,isOpen:Kr.isOpen};return{uid:u.uid,dom:u.dom,behaviours:bs(u.inlineBehaviours,[Kr.config({isPartOf:function(s,l,c){return bu(l,c)||(f=c,u.getRelated(s).exists(function(h){return bu(h,f)}));var f},getAttachPoint:function(s){return u.lazySink(s).getOrDie()},onOpen:function(s){u.onShow(s)},onClose:function(s){u.onHide(s)}}),Mn.config({store:{mode:"memory",initialValue:H.none()}}),Ol.config({channels:_e(_e({},Ff(_e({isExtraPart:e.isExtraPart},u.fireDismissalEventInstead.map(function(s){return{fireEventInstead:{event:s.event}}}).getOr({})))),hl(_e(_e({},u.fireRepositionEventInstead.map(function(s){return{fireEventInstead:{event:s.event}}}).getOr({})),{doReposition:t})))})]),eventOrder:u.eventOrder,apis:i}},apis:{showAt:function(u,e,t,n){u.showAt(e,t,n)},showWithin:function(u,e,t,n,r){u.showWithin(e,t,n,r)},showWithinBounds:function(u,e,t,n,r){u.showWithinBounds(e,t,n,r)},showMenuAt:function(u,e,t,n){u.showMenuAt(e,t,n)},showMenuWithinBounds:function(u,e,t,n,r){u.showMenuWithinBounds(e,t,n,r)},hide:function(u,e){u.hide(e)},isOpen:function(u,e){return u.isOpen(e)},getContent:function(u,e){return u.getContent(e)},setContent:function(u,e,t){u.setContent(e,t)},reposition:function(u,e){u.reposition(e)}}}),kp="layout-inset",oc=function(u,e,t){return Pi(Ti(u,e),u.y,t.insetNorth(),K0(),"north",vi(u,{top:2}),kp)},Sg=function(u,e,t){return Pi(Ti(u,e),uf(u,e),t.insetSouth(),mh(),"south",vi(u,{bottom:3}),kp)},Cc=tinymce.util.Tools.resolve("tinymce.util.Delay"),pl=Mu({name:"Button",factory:function(u){function e(r){return St(u.dom,"attributes").bind(function(o){return St(o,r)})}var t=jr(u.action),n=u.dom.tag;return{uid:u.uid,dom:u.dom,components:u.components,events:t,behaviours:Cd(u.buttonBehaviours,[zr.config({}),pr.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==n)return{role:e("role").getOr("button")};var r=e("type").getOr("button"),o=e("role").map(function(i){return{role:i}}).getOr({});return _e({type:r},o)}()},eventOrder:u.eventOrder}},configFields:[qe("uid",void 0),Et("dom"),qe("components",[]),Sd("buttonBehaviours",[zr,pr]),bo("action"),bo("role"),qe("eventOrder",{})]}),Td=tinymce.util.Tools.resolve("tinymce.util.I18n"),hw={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},Cg="temporary-placeholder",aC={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},b1=Mu({name:"Notification",factory:function(u){function e(y){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+y+"%"}}}}function t(y){return{dom:{tag:"div",classes:["tox-text"],innerHtml:y+"%"}}}var n,r,o,i,s=Bo({dom:{tag:"p",innerHtml:u.translationProvider(u.text)},behaviours:cn([Ur.config({})])}),l=Bo({dom:{tag:"div",classes:u.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(0)]},t(0)],behaviours:cn([Ur.config({})])}),c={updateProgress:function(y,b){y.getSystem().isConnected()&&l.getOpt(y).each(function(S){Ur.set(S,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(b)]},t(b)])})},updateText:function(y,b){var S;y.getSystem().isConnected()&&(S=s.get(y),Ur.set(S,[sl(b)]))}},f=pe([u.icon.toArray(),u.level.toArray(),u.level.bind(function(y){return H.from(aC[y])}).toArray()]),h=Bo(pl.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[xg("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":u.translationProvider("Close")}},u.iconProvider)],action:function(y){u.onAction(y)}})),p=[(n=f,r={tag:"div",classes:["tox-notification__icon"]},o=u.iconProvider,i=o(),jb(r,Ao(n,function(y){return yn(i,p1(y,i))}).getOr(Cg),i,H.none())),{dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:cn([Ur.config({})])}];return{uid:u.uid,dom:{tag:"div",attributes:{role:"alert"},classes:u.level.map(function(y){return["tox-notification","tox-notification--in","tox-notification--"+y]}).getOr(["tox-notification","tox-notification--in"])},behaviours:cn([zr.config({}),zn("notification-events",[Ot(yu(),function(y){h.getOpt(y).each(zr.focus)})])]),components:p.concat(u.progress?[l.asSpec()]:[]).concat(u.closeButton?[h.asSpec()]:[]),apis:c}},configFields:[bo("level"),Et("progress"),Et("icon"),Et("onAction"),Et("text"),Et("iconProvider"),Et("translationProvider"),ii("closeButton",!0)],apis:{updateProgress:function(u,e,t){u.updateProgress(e,t)},updateText:function(u,e,t){u.updateText(e,t)}}});function x1(u,e){function t(){cs(n)||(clearTimeout(n),n=null)}var n=null;return{cancel:t,throttle:function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];t(),n=setTimeout(function(){n=null,u.apply(null,r)},e)}}}function kg(u,e,t,n,r){var o=lC(u,function(i){return(s=u).isBlock(l=i)||fi(["BR","IMG","HR","INPUT"],l.nodeName)||"false"===s.getContentEditable(l);var s,l});return H.from(o.backwards(e,t,n,r))}function _1(u){return u.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")}function w1(u){return""!==u&&-1!==" \xa0\f\n\r\t\v".indexOf(u)}function gw(u,e){return u.substring(e.length)}function Zc(u,e,t,n){return void 0===n&&(n=0),Dy(Pe.fromDom(e.startContainer)).fold(function(){return function(r,o,i,s){if(void 0===s&&(s=0),!o.collapsed||3!==o.startContainer.nodeType)return H.none();var l=r.getParent(o.startContainer,r.isBlock)||r.getRoot();return kg(r,o.startContainer,o.startOffset,function(c,f,h){return function(p,y){for(var b=f-1;0<=b;b--){var S=p.charAt(b);if(w1(S))return H.none();if(S===y)break}return H.some(b)}(h,i).getOr(f)},l).bind(function(c){var f=o.cloneRange();if(f.setStart(c.container,c.offset),f.setEnd(o.endContainer,o.endOffset),f.collapsed)return H.none();var h=_1(f);return 0!==h.lastIndexOf(i)||gw(h,i).length<s?H.none():H.some({text:gw(h,i),range:f,triggerChar:i})})}(u,e,t,n)},function(r){var o=u.createRng();o.selectNode(r.dom);var i=_1(o);return H.some({range:o,text:gw(i,t),triggerChar:t})})}function S1(u,e){return{container:u,offset:e}}function sC(u){return wi("toolbarbutton",nM,u)}function uC(u){return wi("ToggleButton",fC,u)}function mw(u,e,t,n){void 0===n&&(n={});var r=e(),o=u.selection.getRng().startContainer.nodeValue,i=xt(r.lookupByChar(t.triggerChar),function(l){return t.text.length>=l.minChars&&l.matches.getOrThunk(function(){return c=u.dom,function(f){var h=cC(f.startContainer,f.startOffset);return!kg(c,h.container,h.offset,function(p,y){return 0===y?-1:y},c.getRoot()).filter(function(p){return!w1(p.container.data.charAt(p.offset-1))}).isSome()};var c})(t.range,o,t.text)});if(0===i.length)return H.none();var s=km.all(Mt(i,function(l){return l.fetch(t.text,l.maxResults,n).then(function(c){return{matchText:t.text,items:c,columns:l.columns,onAction:l.onAction,highlightOn:l.highlightOn}})}));return H.some({lookupData:s,context:t})}var Mp,Tp,lC=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),Dy=function(u){return vc(u,"[data-mce-autocompleter]")},km=tinymce.util.Tools.resolve("tinymce.util.Promise"),pw=function(u){if(3===u.nodeType)return S1(u,u.data.length);var e=u.childNodes;return 0<e.length?pw(e[e.length-1]):S1(u,e.length)},cC=function(u,e){var t=u.childNodes;return 0<t.length&&e<t.length?cC(t[e],0):0<t.length&&1===u.nodeType&&t.length===e?pw(t[t.length-1]):S1(u,e)},Yb=ae([kr("type"),Si("text")]),dC=ae([qe("type","autocompleteitem"),qe("active",!1),qe("disabled",!1),qe("meta",{}),kr("value"),Si("text"),Si("icon")]),Ay=ae([kr("type"),kr("ch"),qh("minChars",1),qe("columns",1),qh("maxResults",10),jd("matches"),Qi("fetch"),Qi("onAction"),gc("highlightOn",[],De)]),Iy=[ii("disabled",!1),Si("tooltip"),Si("icon"),Si("text"),ki("onSetup",function(){return ht})],nM=ae([kr("type"),Qi("onAction")].concat(Iy)),C1=[ii("active",!1)].concat(Iy),fC=ae(C1.concat([kr("type"),Qi("onAction")])),cu=[ki("predicate",Er),kl("scope","node",["node","editor"]),kl("position","selection",["node","selection","line"])],rM=Iy.concat([qe("type","contextformbutton"),qe("primary",!1),Qi("onAction"),vn("original",Ut)]),hC=C1.concat([qe("type","contextformbutton"),qe("primary",!1),Qi("onAction"),vn("original",Ut)]),vw=Iy.concat([qe("type","contextformbutton")]),gC=C1.concat([qe("type","contextformtogglebutton")]),k1=ps("type",{contextformbutton:rM,contextformtogglebutton:hC}),Dp=ae([qe("type","contextform"),ki("initValue",ze("")),Si("label"),Na("commands",k1),hc("launch",ps("type",{contextformbutton:vw,contextformtogglebutton:gC}))].concat(cu)),Oh=ae([qe("type","contexttoolbar"),kr("items")].concat(cu));function mC(u){return St(iM,u).getOr(tx)}function M1(u){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===u?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}}function Zb(u){var e=M1(u);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:mC(u)}}function T1(u,e,t){return{dom:{tag:"div",classes:pe([[M1(t).tieredMenu]])},markers:Zb(t)}}function pC(u,e){return function(t){return Mt(rn(t,e),function(n){return{dom:u,components:n}})}}function oM(u,e){var t=[],n=[];return wn(u,function(r,o){e(r,o)?(0<n.length&&t.push(n),n=[],yn(r.dom,"innerHtml")&&n.push(r)):n.push(r)}),0<n.length&&t.push(n),Mt(t,function(r){return{dom:{tag:"div",classes:["tox-collection__group"]},components:r}})}function $b(u,e){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===u?["tox-collection--list"]:["tox-collection--grid"])},components:[Cp.parts.items({preprocess:function(t){return"auto"!==u&&1<u?pC({tag:"div",classes:["tox-collection__group"]},u)(t):oM(t,function(n,r){return"separator"===e[r].type})}})]}}function D1(u){return Nn(u,function(e){return"icon"in e&&void 0!==e.icon})}function Dd(u){return console.error(jt(u)),console.log(u),H.none()}function Kb(u,e,t,n,r){var o,i=(o=t,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Cp.parts.items({preprocess:function(s){return oM(s,function(l,c){return"separator"===o[c].type})}})]});return{value:u,dom:i.dom,components:i.components,items:t}}function Oy(u,e,t,n,r){var o,i;return"color"===r?{value:u,dom:(o={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Cp.parts.items({preprocess:"auto"!==n?pC({tag:"div",classes:["tox-swatches__row"]},n):Ut})]}]}).dom,components:o.components,items:t}:"normal"===r&&"auto"===n?{value:u,dom:(o=$b(n,t)).dom,components:o.components,items:t}:"normal"===r&&1===n?{value:u,dom:(o=$b(1,t)).dom,components:o.components,items:t}:"normal"===r?{value:u,dom:(o=$b(n,t)).dom,components:o.components,items:t}:"listpreview"!==r||"auto"===n?{value:u,dom:{tag:"div",classes:pe([[(i=M1(r)).menu,"tox-menu-"+n+"-column"],e?[i.hasIcons]:[]])},components:cD,items:t}:{value:u,dom:(o={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Cp.parts.items({preprocess:pC({tag:"div",classes:["tox-collection__group"]},n)})]}).dom,components:o.components,items:t}}function Jb(u,e,t){var n=su(u.element,"."+t);if(0<n.length){var r=hr(n,function(o){var i=o.dom.getBoundingClientRect().top,s=n[0].dom.getBoundingClientRect().top;return Math.abs(i-s)>e}).getOr(n.length);return H.some({numColumns:r,numRows:Math.ceil(n.length/r)})}return H.none()}function A1(u,e,t){u.getSystem().broadcastOn([yw],{})}function I1(u){return u.getParam("height",Math.max(u.getElement().offsetHeight,200))}function Ey(u){return u.getParam("width",Xf.DOM.getStyle(u.getElement(),"width"))}function O1(u){return H.from(u.getParam("min_width")).filter(Fn)}function Qb(u){return H.from(u.getParam("min_height")).filter(Fn)}function E1(u){return H.from(u.getParam("max_width")).filter(Fn)}function ex(u){return H.from(u.getParam("max_height")).filter(Fn)}function Uf(u){return!1!==u.getParam("menubar",!0,"boolean")}function cf(u){var e=u.getParam("toolbar",!0),t=!0===e,n=lr(e),r=Eo(e)&&0<e.length;return!z1(u)&&(r||n||t)}function Ad(u){var e=xt(ar(9,function(t){return u.getParam("toolbar"+(t+1),!1,"string")}),function(t){return"string"==typeof t});return 0<e.length?H.some(e):H.none()}(Tp=Mp={})[Tp.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",Tp[Tp.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var ai,Py,Mm,vC,qf=Mp,tx="tox-menu-nav__js",nx="tox-collection__item",iM={normal:tx,color:"tox-swatch"},P1="tox-collection__item--enabled",t0="tox-collection__item-icon",Mg="tox-collection__item-label",R1="tox-collection__item-caret",n0="tox-collection__item--active",Ap="tox-collection__item-container",Ry="tox-collection__item-container--row",cD=[Cp.parts.items({})],aM=[kr("type"),kr("src"),Si("alt"),gc("classes",[],De)],sM=ae(aM),N1=[kr("type"),kr("text"),Si("name"),gc("classes",["tox-collection__item-label"],De)],L1=ae(N1),Ny=qm(function(){return Gd("type",{cardimage:sM,cardtext:L1,cardcontainer:yC})}),yC=ae([kr("type"),ea("direction","horizontal"),ea("align","left"),ea("valign","middle"),Na("items",Ny)]),df=[ii("disabled",!1),Si("text"),Si("shortcut"),Xt("value","value",ol(function(){return jn("menuitem-value")}),be()),qe("meta",{})],r0=ae([kr("type"),Si("label"),Na("items",Ny),ki("onSetup",function(){return ht}),ki("onAction",ht)].concat(df)),dD=ae([kr("type"),ii("active",!1),Si("icon")].concat(df)),o0=[kr("type"),kr("fancytype"),ki("onAction",ht)],rx=ps("fancytype",{inserttable:[qe("initData",{})].concat(o0),colorswatch:[al("initData",{},[ii("allowCustomColors",!0),Uh("colors",be())])].concat(o0)}),uM=ae([kr("type"),ki("onSetup",function(){return ht}),ki("onAction",ht),Si("icon")].concat(df)),B1=ae([kr("type"),Qi("getSubmenuItems"),ki("onSetup",function(){return ht}),Si("icon")].concat(df)),ox=ae([kr("type"),Si("icon"),ii("active",!1),ki("onSetup",function(){return ht}),Qi("onAction")].concat(df)),Rl=function(u){return e=jn("unnamed-events"),cn([zn(e,u)]);var e},yw=jn("tooltip.exclusive"),i0=jn("tooltip.show"),a0=jn("tooltip.hide"),lM=Object.freeze({__proto__:null,hideAllExclusive:A1,setComponents:function(u,e,t,n){t.getTooltip().each(function(r){r.getSystem().isConnected()&&Ur.set(r,n)})}}),ix=Object.freeze({__proto__:null,events:function(u,e){function t(n){e.getTooltip().each(function(r){zf(r),u.onHide(n,r),e.clearTooltip()}),e.clearTimer()}return Ro(pe([[Ot(i0,function(n){e.resetTimer(function(){var r,o,i=n;e.isShowing()||(A1(i),r=u.lazySink(i).getOrDie(),o=i.getSystem().build({dom:u.tooltipDom,components:u.tooltipComponents,events:Ro("normal"===u.mode?[Ot(Vu(),function(s){gr(i,i0)}),Ot(Zm(),function(s){gr(i,a0)})]:[]),behaviours:cn([Ur.config({})])}),e.setTooltip(o),Zu(r,o),u.onShow(i,o),Du.position(r,o,{anchor:u.anchor(i)}))},u.delay)}),Ot(a0,function(n){e.resetTimer(function(){t(n)},u.delay)}),Ot(Sf(),function(n,r){r.universal||fi(r.channels,yw)&&t(n)}),Jl(function(n){t(n)})],"normal"===u.mode?[Ot(yu(),function(n){gr(n,i0)}),Ot(Hu(),function(n){gr(n,a0)}),Ot(Vu(),function(n){gr(n,i0)}),Ot(Zm(),function(n){gr(n,a0)})]:[Ot(Kl(),function(n,r){gr(n,i0)}),Ot(hv(),function(n){gr(n,a0)})]]))}}),ic=Ia({fields:[Et("lazySink"),Et("tooltipDom"),qe("exclusive",!0),qe("tooltipComponents",[]),qe("delay",300),kl("mode","normal",["normal","follow-highlight"]),qe("anchor",function(u){return{type:"hotspot",hotspot:u,layouts:{onLtr:ze([au,Su,os,Ds,wu,Il]),onRtl:ze([au,Su,os,Ds,wu,Il])}}}),oo("onHide"),oo("onShow")],name:"tooltipping",active:ix,state:Object.freeze({__proto__:null,init:function(){function u(){e.on(clearTimeout)}var e=Zo(),t=Zo(),n=ze("not-implemented");return dl({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:u,resetTimer:function(r,o){u(),e.set(setTimeout(r,o))},readState:n})}}),apis:lM}),Xf=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),cM=tinymce.util.Tools.resolve("tinymce.EditorManager"),z1=function(u){return Ad(u).fold(function(){return 0<u.getParam("toolbar",[],"string[]").length},dn)};function Eh(u){return u.getParam("toolbar_mode","","string")}function bw(u){return u.getParam("toolbar_location",Mm.auto,"string")}function ff(u){return bw(u)===Mm.bottom}function xw(u){if(!u.inline)return H.none();var e=u.getParam("fixed_toolbar_container","","string");if(0<e.length)return zs(Ga(),e);var t=u.getParam("fixed_toolbar_container_target");return Sn(t)?H.some(Pe.fromDom(t)):H.none()}function ax(u){return u.inline&&xw(u).isSome()}function _w(u){return xw(u).getOrThunk(function(){return Uo(Vi(Pe.fromDom(u.getElement())))})}function Tm(u){return u.inline&&!Uf(u)&&!cf(u)&&!z1(u)}function sx(u){return(u.getParam("toolbar_sticky",!1,"boolean")||u.inline)&&!ax(u)&&!Tm(u)}function Ly(u,e){var t=u.outerContainer.element;e&&(u.mothership.broadcastOn([Hf()],{target:t}),u.uiMothership.broadcastOn([Hf()],{target:t})),u.mothership.broadcastOn([l0],{readonly:e}),u.uiMothership.broadcastOn([l0],{readonly:e})}function F1(u,e){u.on("init",function(){u.mode.isReadOnly()&&Ly(e,!0)}),u.on("SwitchMode",function(){return Ly(e,u.mode.isReadOnly())}),u.getParam("readonly",!1,"boolean")&&u.setMode("readonly")}function us(){var u;return Ol.config({channels:((u={})[l0]={schema:Tw,onReceive:function(e,t){Kn.set(e,t.readonly)}},u)})}function By(u,e){var t=u.getApi(e);return function(n){n(t)}}function Ip(u,e){return Mi(function(t){By(u,t)(function(n){var r=u.onSetup(n);xr(r)&&e.set(r)})})}function vl(u,e){return Jl(function(t){return By(u,t)(e.get())})}function s0(u,e,t,n){var r,o,i=$n(ht);return{type:"item",dom:e.dom,components:c0(e.optComponents),data:u.data,eventOrder:vM,hasSubmenu:u.triggersSubmenu,itemBehaviours:cn([zn("item-events",[(r=u,o=t,nu(function(s,l){By(r,s)(r.onAction),r.triggersSubmenu||o!==qf.CLOSE_ON_EXECUTE||(gr(s,$m()),l.stop())})),Ip(u,i),vl(u,i)]),Kn.config({disabled:function(){return u.disabled||n.isDisabled()},disableClass:"tox-collection__item--state-disabled"}),us(),Ur.config({})].concat(u.itemBehaviours))}}function zy(u){return{value:u.value,meta:_e({text:u.text.getOr("")},u.meta)}}function ww(u,e,t){return xg(u,{tag:"div",classes:t=void 0===t?[t0]:t},e)}function Sw(u){return{dom:{tag:"div",classes:[Mg]},components:[sl(Td.translate(u))]}}function V1(u,e){return{dom:{tag:"div",classes:e,innerHtml:u}}}function dM(u,e){return{dom:{tag:"div",classes:[Mg]},components:[{dom:{tag:u.tag,styles:u.styles},components:[sl(Td.translate(e))]}]}}function fM(u){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:(e=fx.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},t=Mt(u.split("+"),function(n){var r=n.toLowerCase().trim();return yn(e,r)?e[r]:n}),t.join(fx.mac?"":"+"))}};var e,t}function hM(u){return ww("checkmark",u,["tox-collection__item-checkmark"])}function Cw(u){var e=u.map(function(t){return{attributes:{title:Td.translate(t)}}}).getOr({});return _e({tag:"div",classes:[tx,nx]},e)}function Fy(u,e,t,n){return void 0===n&&(n=H.none()),"color"===u.presets?(r=e,o=n,l=u.ariaLabel,c=u.value,{dom:(i=u.iconContent.map(function(O){return R=o,Q_(O,F=(0,r.icons)()).or(R).getOrThunk(wm(F));var R,F}).getOr(""),s={tag:"div",attributes:l.map(function(O){return{title:r.translate(O)}}).getOr({}),classes:["tox-swatch"]},_e(_e({},s),"custom"===c?{tag:"button",classes:me(me([],s.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:i}:"remove"===c?{classes:me(me([],s.classes,!0),["tox-swatch--remove"],!1),innerHtml:i}:{attributes:_e(_e({},s.attributes),{"data-mce-color":c}),styles:{"background-color":c}})),optComponents:[]}):(f=u,h=e,p=n,y={tag:"div",classes:[t0]},b=t?f.iconContent.map(function(O){return xg(O,y,h.icons,p)}).orThunk(function(){return H.some({dom:y})}):H.none(),S=f.checkMark,M=H.from(f.meta).fold(function(){return Sw},function(O){return yn(O,"style")?un(dM,O.style):Sw}),k=f.htmlContent.fold(function(){return f.textContent.map(M)},function(O){return H.some(V1(O,[Mg]))}),{dom:Cw(f.ariaLabel),optComponents:[b,k,f.shortcutContent.map(fM),S,f.caret]});var r,o,i,s,l,c,f,h,p,y,b,S,M,k}function ux(u,e){return St(u,"tooltipWorker").map(function(t){return[ic.config({lazySink:e.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(n){return{type:"submenu",item:n,overrides:{maxHeightFunction:vh}}},mode:"follow-highlight",onShow:function(n,r){t(function(o){ic.setComponents(n,[md({element:Pe.fromDom(o)})])})}})]}).getOr([])}function bC(u,e){var t=Td.translate(u),n=Xf.DOM.encode(t);if(0<e.length){var r=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return n.replace(r,function(o){return'<span class="tox-autocompleter-highlight">'+o+"</span>"})}return n}function gM(u){return{value:u}}function mM(u){return Tg.test(u)||Ep.test(u)}function xC(u){var e=u.toString(16);return(1===e.length?"0"+e:e).toUpperCase()}function Id(u){return gM(xC(u.red)+xC(u.green)+xC(u.blue))}function ac(u,e,t,n){return{red:u,green:e,blue:t,alpha:n}}function lx(u){var e=parseInt(u,10);return e.toString()===u&&0<=e&&e<=255}function H1(u){var e,t,n,r=(u.hue||0)%360,i=u.value/100,o=wC(0,Od(o=u.saturation/100,1));if(i=wC(0,Od(i,1)),0===o)return ac(e=t=n=Vy(255*i),t,n,1);var s=r/60,l=i*o,c=l*(1-Math.abs(s%2-1)),f=i-l;switch(Math.floor(s)){case 0:e=l,t=c,n=0;break;case 1:e=c,t=l,n=0;break;case 2:e=0,t=l,n=c;break;case 3:e=0,t=c,n=l;break;case 4:e=c,t=0,n=l;break;case 5:e=l,t=0,n=c;break;default:e=t=n=0}return ac(e=Vy(255*(e+f)),t=Vy(255*(t+f)),n=Vy(255*(n+f)),1)}function Op(u){var e,t,n=(e={value:u.value.replace(Tg,function(r,o,i,s){return o+o+i+i+s+s})},null===(t=Ep.exec(e.value))?["FFFFFF","FF","FF","FF"]:t);return ac(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),1)}function W1(u,e,t,n){return ac(parseInt(u,10),parseInt(e,10),parseInt(t,10),parseFloat(n))}function G1(u){if("transparent"===u)return H.some(ac(0,0,0,0));var e=q1.exec(u);if(null!==e)return H.some(W1(e[1],e[2],e[3],"1"));var t=yM.exec(u);return null!==t?H.some(W1(t[1],t[2],t[3],t[4])):H.none()}function j1(u){return"rgba("+u.red+","+u.green+","+u.blue+","+u.alpha+")"}function cx(u,e){return u.fire("ResizeContent",e)}function u0(u,e,t){return{hue:u,saturation:e,value:t}}function U1(u){var e,n=0,r=u.red/255,o=u.green/255,i=u.blue/255,s=Math.min(r,Math.min(o,i)),l=Math.max(r,Math.max(o,i));return s===l?u0(0,0,100*(n=s)):(e=(l-s)/l,n=l,u0(Math.round(60*((r===s?3:i===s?1:5)-(r===s?o-i:i===s?r-o:i-r)/(l-s))),Math.round(100*e),Math.round(100*n)))}function _C(u){return Id(H1(u))}function pM(u){return(mM(t=u)?H.some({value:(Nt(e=t,"#")?e.substring("#".length):e).toUpperCase()}):H.none()).orThunk(function(){return G1(u).map(Id)}).getOrThunk(function(){var n=document.createElement("canvas");n.height=1,n.width=1;var r=n.getContext("2d");r.clearRect(0,0,n.width,n.height),r.fillStyle="#FFFFFF",r.fillStyle=u,r.fillRect(0,0,1,1);var o=r.getImageData(0,0,1,1).data;return Id(ac(o[0],o[1],o[2],o[3]))});var e,t}function kw(u){return Kn.config({disabled:u,disableClass:"tox-tbtn--disabled"})}(Py=ai=ai||{}).default="wrap",Py.floating="floating",Py.sliding="sliding",Py.scrolling="scrolling",(vC=Mm=Mm||{}).auto="auto",vC.top="top",vC.bottom="bottom";var Mw,l0="silver.readonly",Tw=ae([Ns("readonly",Ne)]),Dm=function(u){return Kn.config({disabled:u})},dx=function(u){return Kn.config({disabled:u,disableClass:"tox-tbtn--disabled",useNative:!1})},vM=((Mw={})[Wu()]=["disabling","alloy.base.behaviour","toggling","item-events"],Mw),c0=po,fx=tinymce.util.Tools.resolve("tinymce.Env"),Dw=function(u,e){return Mt(u,function(t){switch(t.type){case"cardcontainer":return i=Dw((o=t).items,e),{dom:{tag:"div",classes:[Ap,"vertical"===o.direction?"tox-collection__item-container--column":Ry,"left"===o.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",function(){switch(o.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:i};case"cardimage":return{dom:{tag:"img",classes:t.classes,attributes:{src:t.src,alt:t.alt.getOr("")}}};case"cardtext":var n=t.name.exists(function(c){return fi(e.cardText.highlightOn,c)})?H.from(e.cardText.matchText).getOr(""):"";return V1(bC(t.text,n),t.classes)}var o,i})},Aw=sy(qs(),My()),Tg=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Ep=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Od=Math.min,wC=Math.max,Vy=Math.round,q1=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,yM=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,d0=ac(255,0,0,1),Hy=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),Iw="tinymce-custom-colors";function Pp(u){return!1!==u.getParam("custom_colors")}function Ow(u){var e=u.getParam("color_map");return void 0!==e?function(t){for(var n=[],r=0;r<t.length;r+=2)n.push({text:t[r+1],value:"#"+pM(t[r]).value,type:"choiceitem"});return n}(e):X1}function Ph(u){kC.add(u)}function Wy(u){var e,t=(e=Ow(u).length,Math.max(5,Math.ceil(Math.sqrt(e))));return u.getParam("color_cols",t,"number")}function hx(u){var e="choiceitem",t={type:e,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return u?[t,{type:e,text:"Custom color",icon:"color-picker",value:"custom"}]:[t]}function gx(u,e,t,n){"custom"===t?f0(u)(function(r){r.each(function(o){Ph(o),u.execCommand("mceApplyTextcolor",e,o),n(o)})},"#000000"):"remove"===t?(n(""),u.execCommand("mceRemoveTextcolor",e)):(n(t),u.execCommand("mceApplyTextcolor",e,t))}function SC(u,e){return u.concat(Mt(kC.state(),function(t){return{type:Xs,text:t,value:t}}).concat(hx(e)))}function CC(u,e){return function(t){t(SC(u,e))}}function mx(u,e,t){u.setIconFill("forecolor"===e?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",t)}function Rh(u,e,t,n,r){u.ui.registry.addSplitButton(e,{tooltip:n,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(o){var i,s;return H.from((i=t,u.dom.getParents(u.selection.getStart(),function(l){var c;(c=l.style["forecolor"===i?"color":"background-color"])&&(s=s||c)}),s)).bind(function(l){return G1(l).map(function(c){var f=Id(c).value;return lo(o.toLowerCase(),f)})}).getOr(!1)},columns:Wy(u),fetch:CC(Ow(u),Pp(u)),onAction:function(o){null!==r.get()&&gx(u,t,r.get(),ht)},onItemAction:function(o,i){gx(u,t,i,function(s){r.set(s),u.fire("TextColorChange",{name:e,color:s})})},onSetup:function(o){function i(s){s.name===e&&mx(o,s.name,s.color)}return null!==r.get()&&mx(o,e,r.get()),u.on("TextColorChange",i),function(){u.off("TextColorChange",i)}}})}function Yf(u,e,t,n){u.ui.registry.addNestedMenuItem(e,{text:n,icon:"forecolor"===e?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(r){gx(u,t,r.value,ht)}}]}})}function Am(u,e,t,n,r,o,i,s){return Oy(u,D1(e),bM(e,t,n,"color"!==r?"normal":"color",o,i,s),n,r)}function Dg(u,e){var t=Zb(e);return 1===u?{mode:"menu",moveOnTab:!0}:"auto"===u?{mode:"grid",selector:"."+t.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===e?"tox-swatches__row":"tox-collection__group")}}var Ew,Pw,Xs="choiceitem",X1=[{type:Xs,text:"Light Green",value:"#BFEDD2"},{type:Xs,text:"Light Yellow",value:"#FBEEB8"},{type:Xs,text:"Light Red",value:"#F8CAC6"},{type:Xs,text:"Light Purple",value:"#ECCAFA"},{type:Xs,text:"Light Blue",value:"#C2E0F4"},{type:Xs,text:"Green",value:"#2DC26B"},{type:Xs,text:"Yellow",value:"#F1C40F"},{type:Xs,text:"Red",value:"#E03E2D"},{type:Xs,text:"Purple",value:"#B96AD9"},{type:Xs,text:"Blue",value:"#3598DB"},{type:Xs,text:"Dark Turquoise",value:"#169179"},{type:Xs,text:"Orange",value:"#E67E23"},{type:Xs,text:"Dark Red",value:"#BA372A"},{type:Xs,text:"Dark Purple",value:"#843FA1"},{type:Xs,text:"Dark Blue",value:"#236FA1"},{type:Xs,text:"Light Gray",value:"#ECF0F1"},{type:Xs,text:"Medium Gray",value:"#CED4D9"},{type:Xs,text:"Gray",value:"#95A5A6"},{type:Xs,text:"Dark Gray",value:"#7E8C8D"},{type:Xs,text:"Navy Blue",value:"#34495E"},{type:Xs,text:"Black",value:"#000000"},{type:Xs,text:"White",value:"#ffffff"}],kC=function(u){function e(i){o.splice(i,1)}void 0===u&&(u=10);var t,n=Hy.getItem(Iw),r=lr(n)?JSON.parse(n):[],o=u-(t=r).length<0?t.slice(0,u):t;return{add:function(i){var s;(-1===(s=ro(o,i))?H.none():H.some(s)).each(e),o.unshift(i),o.length>u&&o.pop(),Hy.setItem(Iw,JSON.stringify(o))},state:function(){return o.slice(0)}}}(10),f0=function(u){return function(e,t){var n=!1;u.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:t},onAction:function(r,o){"hex-valid"===o.name&&(n=o.value)},onSubmit:function(r){var o=r.getData().colorpicker;n?(e(H.from(o)),r.close()):u.windowManager.alert(u.translate(["Invalid hex color code: {0}",o]))},onClose:ht,onCancel:function(){e(H.none())}})}},bM=function(u,e,t,n,r,o,i){return po(Mt(u,function(s){return"choiceitem"===s.type?wi("choicemenuitem",dD,s).fold(Dd,function(l){return H.some(function(c,f,h,p,y,b,S,M){void 0===M&&(M=!0);var k=Fy({presets:h,textContent:f?c.text:H.none(),htmlContent:H.none(),ariaLabel:c.text,iconContent:c.icon,shortcutContent:f?c.shortcut:H.none(),checkMark:f?H.some(hM(S.icons)):H.none(),caret:H.none(),value:c.value},S,M);return j(s0({data:zy(c),disabled:c.disabled,getApi:function(O){return{setActive:function(P){Oo.set(O,P)},isActive:function(){return Oo.isOn(O)},isDisabled:function(){return Kn.isDisabled(O)},setDisabled:function(P){return Kn.set(O,P)}}},onAction:function(O){return p(c.value)},onSetup:function(O){return O.setActive(y),ht},triggersSubmenu:!1,itemBehaviours:[]},k,b,S),{toggling:{toggleClass:P1,toggleOnExecute:!1,selected:c.active}})}(l,1===t,n,e,o(s.value),r,i,D1(u)))}):H.none()}))},MC=jn("cell-over"),Gy=jn("cell-execute"),Y1={inserttable:function(u){var e=jn("size-label"),t=function(r){for(var o=[],i=0;i<10;i++){for(var s=[],l=0;l<10;l++)s.push(function(c,f,h){function p(S){return gn(S,Gy,{row:c,col:f})}function y(S,M){M.stop(),p(S)}var b;return Uu({dom:{tag:"div",attributes:((b={role:"button"})["aria-labelledby"]=h,b)},behaviours:cn([zn("insert-table-picker-cell",[Ot(Vu(),zr.focus),Ot(Wu(),p),Ot(eu(),y),Ot(tu(),y)]),Oo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),zr.config({onFocus:function(S){return gn(S,MC,{row:c,col:f})}})])})}(i,l,r));o.push(s)}return o}(e),n=Bo({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:e}},components:[sl("0x0")],behaviours:cn([Ur.config({})])});return{type:"widget",data:{value:jn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Aw.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Dr(t,function(r){return Mt(r,Qr)}).concat(n.asSpec()),behaviours:cn([zn("insert-table-picker",[q0(MC,function(r,o,i){var s=i.event.row,l=i.event.col;(function(c,f,h){for(var p=0;p<10;p++)for(var y=0;y<10;y++)Oo.set(c[p][y],p<=f&&y<=h)})(t,s,l),Ur.set(n.get(r),[sl(l+1+"x"+(s+1))])}),q0(Gy,function(r,o,i){u.onAction({numRows:i.event.row+1,numColumns:i.event.col+1}),gr(r,$m())})]),pr.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(u,e){var t,n,r,o=(n=e,r=(t=u).initData.allowCustomColors&&n.colorinput.hasCustomColors(),t.initData.colors.fold(function(){return SC(n.colorinput.getColors(),r)},function(c){return c.concat(hx(r))})),i=e.colorinput.getColorCols(),s=Am(jn("menu-value"),o,function(c){u.onAction({value:c})},i,"color",qf.CLOSE_ON_EXECUTE,Er,e.shared.providers),l=_e(_e({},s),{markers:Zb("color"),movement:Dg(i,"color")});return{type:"widget",data:{value:jn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Aw.widget(Cp.sketch(l))]}}},px=function(u){var e=u.text.fold(function(){return{}},function(t){return{innerHtml:t}});return{type:"separator",dom:_e({tag:"div",classes:[nx,"tox-collection__group-heading"]},e),components:[]}};function AC(u,e,t,n,r){var o=D1(e),i=po(Mt(e,function(s){function l(c){return function(f,h,p,y,b){function S(k){return b?_e(_e({},k),{shortcut:H.none(),icon:k.text.isSome()?H.none():k.icon}):k}var M=p.shared.providers;switch(f.type){case"menuitem":return wi("menuitem",uM,f).fold(Dd,function(k){return H.some(function(u,e,t,n){void 0===n&&(n=!0);var r=Fy({presets:"normal",iconContent:u.icon,textContent:u.text,htmlContent:H.none(),ariaLabel:u.text,caret:H.none(),checkMark:H.none(),shortcutContent:u.shortcut},t,n);return s0({data:zy(u),getApi:function(o){return{isDisabled:function(){return Kn.isDisabled(o)},setDisabled:function(i){return Kn.set(o,i)}}},disabled:u.disabled,onAction:u.onAction,onSetup:u.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,t)}(S(k),h,M,y))});case"nestedmenuitem":return wi("nestedmenuitem",B1,f).fold(Dd,function(k){return H.some(function(u,e,t,n,r){void 0===n&&(n=!0);var o=(r=void 0!==r&&r)?ww("chevron-down",t.icons,[R1]):ww("chevron-right",t.icons,[R1]),i=Fy({presets:"normal",iconContent:u.icon,textContent:u.text,htmlContent:H.none(),ariaLabel:u.text,caret:H.some(o),checkMark:H.none(),shortcutContent:u.shortcut},t,n);return s0({data:zy(u),getApi:function(s){return{isDisabled:function(){return Kn.isDisabled(s)},setDisabled:function(l){return Kn.set(s,l)}}},disabled:u.disabled,onAction:ht,onSetup:u.onSetup,triggersSubmenu:!0,itemBehaviours:[]},i,e,t)}(S(k),h,M,y,b))});case"togglemenuitem":return wi("togglemenuitem",ox,f).fold(Dd,function(k){return H.some(function(u,e,t,n){void 0===n&&(n=!0);var r=Fy({iconContent:u.icon,textContent:u.text,htmlContent:H.none(),ariaLabel:u.text,checkMark:H.some(hM(t.icons)),caret:H.none(),shortcutContent:u.shortcut,presets:"normal",meta:u.meta},t,n);return j(s0({data:zy(u),disabled:u.disabled,getApi:function(o){return{setActive:function(i){Oo.set(o,i)},isActive:function(){return Oo.isOn(o)},isDisabled:function(){return Kn.isDisabled(o)},setDisabled:function(i){return Kn.set(o,i)}}},onAction:u.onAction,onSetup:u.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,t),{toggling:{toggleClass:P1,toggleOnExecute:!1,selected:u.active}})}(S(k),h,M,y))});case"separator":return wi("separatormenuitem",Yb,f).fold(Dd,function(k){return H.some(px(k))});case"fancymenuitem":return wi("fancymenuitem",rx,f).fold(Dd,function(k){return function(u,e){return St(Y1,u.fancytype).map(function(t){return t(u,e)})}(S(k),p)});default:return console.error("Unknown item in general menu",f),H.none()}}(c,t,n,r?!yn(c,"text"):o,r)}return"nestedmenuitem"===s.type&&s.getSubmenuItems().length<=0?l(_e(_e({},s),{disabled:!0})):l(s)}));return(r?Kb:Oy)(u,o,i,1,"normal")}function Nw(u){return wg.singleData(u.value,u)}function vx(u,e,t){return vc(u,e,t).isSome()}function IC(u,e){var t=null;return{cancel:function(){null!==t&&(clearTimeout(t),t=null)},schedule:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t=setTimeout(function(){u.apply(null,n),t=null},e)}}}function Lw(u){var e=u.raw;return void 0===e.touches||1!==e.touches.length?H.none():H.some(e.touches[0])}function OC(){return Ca().browser.isFirefox()}function Bw(u,e){return $n(St(u,"target").getOr(e))}function zw(u,e,t,n,r,o){var i,s,l=u(e,n),c=(i=$n(!1),s=$n(!1),{stop:function(){i.set(!0)},cut:function(){s.set(!0)},isStopped:i.get,isCut:s.get,event:t,setSource:r.set,getSource:r.get});return l.fold(function(){return o.logEventNoHandlers(e,n),xx.complete()},function(f){var h=f.descHandler;return uv(h)(c),c.isStopped()?(o.logEventStopped(e,f.element,h.purpose),xx.stopped()):c.isCut()?(o.logEventCut(e,f.element,h.purpose),xx.complete()):ur(f.element).fold(function(){return o.logNoParent(e,f.element,h.purpose),xx.complete()},function(p){return o.logEventResponse(e,f.element,h.purpose),xx.resume(p)})})}function yx(u){function e(M){return ur(u.element).fold(dn,function(k){return Rt(M,k)})}function t(M,k){return r.find(e,M,k)}function n(M){var k=r.filter(Sf());wn(k,function(O){uv(O.descHandler)(M)})}var r=function(){function u(r){av(r.element).each(function(o){delete n[o],t.unregisterId(o)})}var e,t=(e={},{registerId:function(r,o,i){dt(i,function(s,l){var c,f=void 0!==e[l]?e[l]:{};f[o]={cHandler:un.apply(void 0,[(c=s).handler].concat(r)),purpose:c.purpose},e[l]=f})},unregisterId:function(r){dt(e,function(o,i){yn(o,r)&&delete o[r]})},filterByType:function(r){return St(e,r).map(function(o){return qt(o,function(i,s){return{id:s,descHandler:i}})}).getOr([])},find:function(r,o,i){return St(e,o).bind(function(s){return br(i,function(l){return c=s,av(f=l).bind(function(h){return St(c,h)}).map(function(h){return{element:f,descHandler:h}});var c,f},r)})}}),n={};return{find:function(r,o,i){return t.find(r,o,i)},filter:function(r){return t.filterByType(r)},register:function(r){var o,i=av((o=r).element).getOrThunk(function(){return s=o.element,l=jn(Mf+"uid-"),Km(s,l),l;var s,l});Lr(n,i)&&function(s){var l=n[i];if(l!==s)throw new Error('The tagId "'+i+'" is already used by: '+Ud(l.element)+"\nCannot use it for: "+Ud(s.element)+"\nThe conflicting element is"+(Rs(l.element)?" ":" not ")+"already in the DOM");u(s)}(r),t.registerId([r],i,r.events),n[i]=r},unregister:u,getById:function(r){return St(n,r)}}}(),o=function(u,e){var t,n,r,o,i,s,l,c,f,h=_e({stopBackspace:!0},e),p=(i=h,s=Zo(),l=$n(!1),c=IC(function(R){i.triggerEvent(Yd(),R),l.set(!0)},400),f=er([{key:ul(),value:function(R){return Lw(R).each(function(F){c.cancel();var G={x:F.clientX,y:F.clientY,target:R.target};c.schedule(R),l.set(!1),s.set(G)}),H.none()}},{key:Da(),value:function(R){return c.cancel(),Lw(R).each(function(F){s.on(function(G){var X=F,Y=G,Q=Math.abs(X.clientX-Y.x),ne=Math.abs(X.clientY-Y.y);(5<Q||5<ne)&&s.clear()})}),H.none()}},{key:Yo(),value:function(R){return c.cancel(),s.get().filter(function(F){return Rt(F.target,R.target)}).map(function(F){return l.get()?(R.prevent(),!1):i.triggerEvent(tu(),R)})}}]),{fireIfReady:function(R,F){return St(f,F).bind(function(G){return G(R)})}}),y=Mt(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(R){return Ws(u,R,function(F){p.fireIfReady(F,R).each(function(G){G&&F.kill()}),h.triggerEvent(R,F)&&F.kill()})}),b=Zo(),S=Ws(u,"paste",function(R){p.fireIfReady(R,"paste").each(function(F){F&&R.kill()}),h.triggerEvent("paste",R)&&R.kill(),b.set(setTimeout(function(){h.triggerEvent(wf(),R)},0))}),M=Ws(u,"keydown",function(R){var F;h.triggerEvent("keydown",R)?R.kill():!h.stopBackspace||(F=R).raw.which!==by[0]||fi(["input","textarea"],mt(F.target))||vx(F.target,'[contenteditable="true"]')||R.prevent()}),k=(t=u,n=function(R){h.triggerEvent("focusin",R)&&R.kill()},OC()?Ql(t,"focus",n):Ws(t,"focusin",n)),O=Zo(),P=(r=u,o=function(R){h.triggerEvent("focusout",R)&&R.kill(),O.set(setTimeout(function(){h.triggerEvent(Hu(),R)},0))},OC()?Ql(r,"blur",o):Ws(r,"focusout",o));return{unbind:function(){wn(y,function(R){R.unbind()}),M.unbind(),k.unbind(),P.unbind(),S.unbind(),b.on(clearTimeout),O.on(clearTimeout)}}}(u.element,{triggerEvent:function(M,k){return tp(M,k.target,function(O){return _x(t,M,k,k.target,O)})}}),i={debugInfo:ze("real"),triggerEvent:function(M,k,O){tp(M,k,function(P){return _x(t,M,O,k,P)})},triggerFocus:function(M,k){av(M).fold(function(){_u(M)},function(O){tp(sh(),M,function(P){var R,F,G=t,X=sh(),Y=P,Q=Bw(R={originator:k,kill:ht,prevent:ht,target:M},F=M);return zw(G,X,R,F,Q,Y),!1})})},triggerEscape:function(M,k){i.triggerEvent("keydown",M.element,k.event)},getByUid:function(M){return b(M)},getByDom:function(M){return S(M)},build:Uu,addToGui:function(M){c(M)},removeFromGui:function(M){f(M)},addToWorld:function(M){s(M)},removeFromWorld:function(M){l(M)},broadcast:function(M){h(M)},broadcastOn:function(M,k){p(M,k)},broadcastEvent:function(M,k){y(M,k)},isConnected:dn},s=function(M){M.connect(i),gs(M.element)||(r.register(M),wn(M.components(),s),i.triggerEvent(Ml(),M.element,{target:M.element}))},l=function(M){gs(M.element)||(wn(M.components(),l),r.unregister(M)),M.disconnect()},c=function(M){Zu(u,M)},f=function(M){zf(M)},h=function(M){n({universal:!0,data:M})},p=function(M,k){n({universal:!1,channels:M,data:k})},y=function(M,k){var O,P,R=r.filter(M);return P={stop:function(){O.set(!0)},cut:ht,isStopped:(O=$n(!1)).get,isCut:Er,event:k,setSource:Zi("Cannot set source of a broadcasted event"),getSource:Zi("Cannot get source of a broadcasted event")},wn(R,function(F){uv(F.descHandler)(P)}),P.isStopped()},b=function(M){return r.getById(M).fold(function(){return Sr.error(new Error('Could not find component with uid: "'+M+'" in system.'))},Sr.value)},S=function(M){var k=av(M).getOr("not found");return b(k)};return s(u),{root:u,element:u.element,destroy:function(){o.unbind(),ja(u.element)},add:c,remove:f,getByUid:b,getByDom:S,addToWorld:s,removeFromWorld:l,broadcast:h,broadcastOn:p,broadcastEvent:y}}function Ed(u,e,t,n){var r=wM(u,e,t,n);return zo.sketch(r)}function Im(u,e){return zo.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(u)}})}function h0(u){return cn([zr.config({onFocus:u.selectOnFocus?function(e){var t=e.element,n=Zl(t);t.dom.setSelectionRange(0,n.length)}:ht})])}function bx(u){return{tag:u.tag,attributes:_e({type:"text"},u.inputAttributes),styles:u.inputStyles,classes:u.inputClasses}}(Pw=Ew={})[Pw.ContentFocus=0]="ContentFocus",Pw[Pw.UiFocus=1]="UiFocus";var xx=ua([{stopped:[]},{resume:["element"]},{complete:[]}]),EC=function(u,e,t,n,r,o){return zw(u,e,t,n,r,o).fold(dn,function(i){return EC(u,e,t,i,r,o)},Er)},_x=function(u,e,t,n,r){var o=Bw(t,n);return EC(u,e,t,n,o,r)},du=Mu({name:"Container",factory:function(u){var e=u.dom,t=e.attributes,n=Dn(e,["attributes"]);return{uid:u.uid,dom:_e({tag:"div",attributes:_e({role:"presentation"},t)},n),components:u.components,behaviours:um(u.containerBehaviours),events:u.events,domModification:u.domModification,eventOrder:u.eventOrder}},configFields:[qe("components",[]),as("containerBehaviours",[]),qe("events",{}),qe("domModification",{}),qe("eventOrder",{})]}),Ag=ze([qe("prefix","form-field"),as("fieldBehaviours",[ho,Mn])]),Pd=ze([af({schema:[Et("dom")],name:"label"}),af({factory:{sketch:function(u){return{uid:u.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:u.text}}}},schema:[Et("text")],name:"aria-descriptor"}),ss({factory:{sketch:function(u){var e,t,n=(e=["factory"],t={},dt(u,function(r,o){fi(e,o)||(t[o]=r)}),t);return u.factory.sketch(n)}},schema:[Et("factory")],name:"field"})]),zo=hi({name:"FormField",configFields:Ag(),partFields:Pd(),factory:function(u,e,t,n){var r=bs(u.fieldBehaviours,[ho.config({find:function(i){return fo(i,u,"field")}}),Mn.config({store:{mode:"manual",getValue:function(i){return ho.getCurrent(i).bind(Mn.getValue)},setValue:function(i,s){ho.getCurrent(i).each(function(l){Mn.setValue(l,s)})}}})]),o=Ro([Mi(function(i,s){var l=Pb(i,u,["label","field","aria-descriptor"]);l.field().each(function(c){var f=jn(u.prefix);l.label().each(function(h){rr(h.element,"for",f),rr(c.element,"id",f)}),l["aria-descriptor"]().each(function(h){var p=jn(u.prefix);rr(h.element,"id",p),rr(c.element,"aria-describedby",p)})})})]);return{uid:u.uid,dom:u.dom,components:e,behaviours:r,events:o,apis:{getField:function(i){return fo(i,u,"field")},getLabel:function(i){return fo(i,u,"label")}}}},apis:{getField:function(u,e){return u.getField(e)},getLabel:function(u,e){return u.getLabel(e)}}}),Sx=Object.freeze({__proto__:null,exhibit:function(u,e){return Qs({attributes:er([{key:e.tabAttr,value:"true"}])})}}),xa=Ia({fields:[qe("tabAttr","data-alloy-tabstop")],name:"tabstopping",active:Sx}),sc=tinymce.util.Tools.resolve("tinymce.html.Entities"),wM=function(u,e,t,n){return{dom:Fw(t),components:u.toArray().concat([e]),fieldBehaviours:cn(n)}},Fw=function(u){return{tag:"div",classes:["tox-form__group"].concat(u)}},uc=jn("form-component-change"),Om=jn("form-close"),Ig=jn("form-cancel"),Og=jn("form-action"),$1=jn("form-submit"),Rd=jn("form-block"),g0=jn("form-unblock"),SM=jn("form-tabchange"),PC=jn("form-resize"),yl=ze([bo("data"),qe("inputAttributes",{}),qe("inputStyles",{}),qe("tag","input"),qe("inputClasses",[]),oo("onSetValue"),qe("styles",{}),qe("eventOrder",{}),as("inputBehaviours",[Mn,zr]),qe("selectOnFocus",!0)]),Np=Mu({name:"Input",configFields:yl(),factory:function(u,e){return{uid:u.uid,dom:bx(u),components:[],behaviours:_e(_e({},h0(t=u)),bs(t.inputBehaviours,[Mn.config({store:_e(_e({mode:"manual"},t.data.map(function(n){return{initialValue:n}}).getOr({})),{getValue:function(n){return Zl(n.element)},setValue:function(n,r){Zl(n.element)!==r&&cv(n.element,r)}}),onSetValue:t.onSetValue})])),eventOrder:u.eventOrder};var t}}),Lp={},Cx={exports:Lp};function CM(u){setTimeout(function(){throw u},0)}function RC(u){var e=mt(u);return fi(Yy,e)}function K1(u,e){Ai(e.getRoot(u).getOr(u.element),e.invalidClass),e.notify.each(function(t){RC(u.element)&&rr(u.element,"aria-invalid",!1),t.getContainer(u).each(function(n){Yh(n,t.validHtml)}),t.onValid(u)})}function jy(u,e,t,n){vs(e.getRoot(u).getOr(u.element),e.invalidClass),e.notify.each(function(r){RC(u.element)&&rr(u.element,"aria-invalid",!0),r.getContainer(u).each(function(o){Yh(o,n)}),r.onInvalid(u,n)})}function Vw(u,e,t){return e.validator.fold(function(){return Nh(Sr.value(!0))},function(n){return n.validate(u)})}function Uy(u,e,t){return e.notify.each(function(n){n.onValidate(u)}),Vw(u,e).map(function(n){return u.getSystem().isConnected()?n.fold(function(r){return jy(u,e,0,r),Sr.error(r)},function(r){return K1(u,e),Sr.value(r)}):Sr.error("No longer in system")})}!function(){var u=this,e=function(){var t,n,r,o={exports:{}};function i(){}function s(S){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof S)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],y(S,this)}function l(S,M){for(;3===S._state;)S=S._value;0!==S._state?(S._handled=!0,s._immediateFn(function(){var k,O=1===S._state?M.onFulfilled:M.onRejected;if(null!==O){try{k=O(S._value)}catch(P){return void f(M.promise,P)}c(M.promise,k)}else(1===S._state?c:f)(M.promise,S._value)})):S._deferreds.push(M)}function c(S,M){try{if(M===S)throw new TypeError("A promise cannot be resolved with itself.");if(M&&("object"==typeof M||"function"==typeof M)){var k=M.then;if(M instanceof s)return S._state=3,S._value=M,void h(S);if("function"==typeof k)return void y((O=k,P=M,function(){O.apply(P,arguments)}),S)}S._state=1,S._value=M,h(S)}catch(R){f(S,R)}var O,P}function f(S,M){S._state=2,S._value=M,h(S)}function h(S){2===S._state&&0===S._deferreds.length&&s._immediateFn(function(){S._handled||s._unhandledRejectionFn(S._value)});for(var M=0,k=S._deferreds.length;M<k;M++)l(S,S._deferreds[M]);S._deferreds=null}function p(S,M,k){this.onFulfilled="function"==typeof S?S:null,this.onRejected="function"==typeof M?M:null,this.promise=k}function y(S,M){var k=!1;try{S(function(O){k||(k=!0,c(M,O))},function(O){k||(k=!0,f(M,O))})}catch(O){if(k)return;k=!0,f(M,O)}}t=o,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=setTimeout,s.prototype.catch=function(S){return this.then(null,S)},s.prototype.then=function(S,M){var k=new this.constructor(i);return l(this,new p(S,M,k)),k},s.all=function(S){var M=Array.prototype.slice.call(S);return new s(function(k,O){if(0===M.length)return k([]);for(var P=M.length,R=0;R<M.length;R++)!function F(G,X){try{if(X&&("object"==typeof X||"function"==typeof X)){var Y=X.then;if("function"==typeof Y)return Y.call(X,function(Q){F(G,Q)},O),0}M[G]=X,0==--P&&k(M)}catch(Q){O(Q)}}(R,M[R])})},s.resolve=function(S){return S&&"object"==typeof S&&S.constructor===s?S:new s(function(M){M(S)})},s.reject=function(S){return new s(function(M,k){k(S)})},s.race=function(S){return new s(function(M,k){for(var O=0,P=S.length;O<P;O++)S[O].then(M,k)})},s._immediateFn="function"==typeof setImmediate?function(S){setImmediate(S)}:function(S){r(S,0)},s._unhandledRejectionFn=function(S){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",S)},s._setImmediateFn=function(S){s._immediateFn=S},s._setUnhandledRejectionFn=function(S){s._unhandledRejectionFn=S},t.exports?t.exports=s:n.Promise||(n.Promise=s);var b=o.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||b}};"object"==typeof Lp&&void 0!==Cx?Cx.exports=e():(u="undefined"!=typeof globalThis?globalThis:u||self).EphoxContactWrapper=e()}();var kc,qy,Zf=Cx.exports.boltExport,m0=function(u){function e(i){r()?o(i):n.push(i)}var t=H.none(),n=[],r=function(){return t.isSome()},o=function(i){t.each(function(s){setTimeout(function(){i(s)},0)})};return u(function(i){r()||(t=H.some(i),wn(n,o),n=[])}),{get:e,map:function(i){return m0(function(s){e(function(l){s(i(l))})})},isReady:r}},kM={nu:m0,pure:function(u){return m0(function(e){e(u)})}},Xy=function(u){function e(t){u().then(t,CM)}return{map:function(t){return Xy(function(){return u().then(t)})},bind:function(t){return Xy(function(){return u().then(function(n){return t(n).toPromise()})})},anonBind:function(t){return Xy(function(){return u().then(function(){return t.toPromise()})})},toLazy:function(){return kM.nu(e)},toCached:function(){var t=null;return Xy(function(){return t=null===t?u():t})},toPromise:u,get:e}},Em=function(u){return Xy(function(){return new Zf(u)})},Nh=function(u){return Xy(function(){return Zf.resolve(u)})},Yy=["input","textarea"],Zy=Object.freeze({__proto__:null,markValid:K1,markInvalid:jy,query:Vw,run:Uy,isInvalid:function(u,e){return La(e.getRoot(u).getOr(u.element),e.invalidClass)}}),Hw=Object.freeze({__proto__:null,events:function(u,e){return u.validator.map(function(t){return Ro([Ot(t.onEvent,function(n){Uy(n,u).get(Ut)})].concat(t.validateOnLoad?[Mi(function(n){Uy(n,u).get(ht)})]:[]))}).getOr({})}}),$f=Ia({fields:[Et("invalidClass"),qe("getRoot",H.none),ka("notify",[qe("aria","alert"),qe("getContainer",H.none),qe("validHtml",""),oo("onValid"),oo("onInvalid"),oo("onValidate")]),ka("validator",[Et("validate"),qe("onEvent","input"),qe("validateOnLoad",!0)])],name:"invalidating",active:Hw,apis:Zy,extra:{validation:function(u){return function(e){var t=Mn.getValue(e);return Nh(u(t))}}}}),NC=Object.freeze({__proto__:null,getCoupled:function(u,e,t,n){return t.getOrCreate(u,e,n)}}),_a=Ia({fields:[Ns("others",Xm(Sr.value,be()))],name:"coupling",apis:NC,state:Object.freeze({__proto__:null,init:function(){var u={},e=ze({});return dl({readState:e,getOrCreate:function(t,n,r){var o=ri(n.others);if(o)return St(u,r).getOrThunk(function(){var i=St(n.others,r).getOrDie("No information found for coupled component: "+r)(t),s=t.getSystem().build(i);return u[r]=s});throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+JSON.stringify(o,null,2))}})}})}),J1=ze("sink"),MM=ze(af({name:J1(),overrides:ze({dom:{tag:"div"},behaviours:cn([Du.config({useFixed:dn})]),events:Ro([Xh(cd()),Xh(Lc()),Xh(eu())])})}));function Eg(u,e){var t=u.getHotspot(e).getOr(e),n=u.getAnchorOverrides();return u.layouts.fold(function(){return{type:"hotspot",hotspot:t,overrides:n}},function(r){return{type:"hotspot",hotspot:t,overrides:n,layouts:r}})}function p0(u,e,t,n,r,o,i){var s,l=Eg(u,t),c=t,f=n,h=r,p=i,y=e,b=(0,(s=u).fetch)(c).map(y),S=sS(c,s);return b.map(function(M){return M.bind(function(k){return H.from(wg.sketch(_e(_e({},h.menu()),{uid:Gu(""),data:k,highlightImmediately:p===kc.HighlightFirst,onOpenMenu:function(O,P){var R=S().getOrDie();Du.position(R,P,{anchor:l}),Kr.decloak(f)},onOpenSubmenu:function(O,P,R){var F=S().getOrDie();Du.position(F,R,{anchor:{type:"submenu",item:P}}),Kr.decloak(f)},onRepositionMenu:function(O,P,R){var F=S().getOrDie();Du.position(F,P,{anchor:l}),wn(R,function(G){Du.position(F,G.triggeredMenu,{anchor:{type:"submenu",item:G.triggeringItem}})})},onEscape:function(){return zr.focus(c),Kr.close(f),H.some(!0)}})))})}).map(function(M){return M.fold(function(){Kr.isOpen(n)&&Kr.close(n)},function(k){Kr.cloak(n),Kr.open(n,k),o(n)}),n})}function v0(u,e,t,n,r,o){var i=_a.getCoupled(t,"sandbox");return(Kr.isOpen(i)?function(s,l,c,f,h,p,y){return Kr.close(f),Nh(f)}:p0)(u,e,t,i,n,r,o)}function Ww(u){Kr.getState(u).each(function(e){wg.repositionMenus(e)})}function Kf(u,e,t){var n=ep(),r=sS(e,u);return{dom:{tag:"div",classes:u.sandboxClasses,attributes:{id:n.id,role:"listbox"}},behaviours:Cd(u.sandboxBehaviours,[Mn.config({store:{mode:"memory",initialValue:e}}),Kr.config({onOpen:function(o,i){var s,l,c,h,p,y=Eg(u,e);n.link(e.element),u.matchWidth&&(s=y.hotspot,c=u.useMinWidth,h=ho.getCurrent(l=i).getOr(l),p=ws(s.element),c?Ar(h.element,"min-width",p+"px"):Cl.set(h.element,p)),u.onOpen(y,o,i),void 0!==t&&void 0!==t.onOpen&&t.onOpen(o,i)},onClose:function(o,i){n.unlink(e.element),void 0!==t&&void 0!==t.onClose&&t.onClose(o,i)},isPartOf:function(o,i,s){return bu(i,s)||bu(e,s)},getAttachPoint:function(){return r().getOrDie()}}),ho.config({find:function(o){return Kr.getState(o).bind(function(i){return ho.getCurrent(i)})}}),Ol.config({channels:_e(_e({},Ff({isExtraPart:Er})),hl({doReposition:Ww}))})])}}function Q1(u){Ww(_a.getCoupled(u,"sandbox"))}function Gw(){return[qe("sandboxClasses",[]),Sd("sandboxBehaviours",[ho,Ol,Kr,Mn])]}function Bp(u){return af({name:u+"-edge",overrides:function(e){return e.model.manager.edgeActions[u].fold(function(){return{}},function(t){return{events:Ro([vu(ul(),function(n,r,o){return t(n,o)},[e]),vu(Lc(),function(n,r,o){return t(n,o)},[e]),vu(Jh(),function(n,r,o){o.mouseIsDown.get()&&t(n,o)},[e])])}})}})}function jw(u){var e=u.event.raw;return-1===e.type.indexOf("touch")?void 0!==e.clientX?H.some(e).map(function(t){return oi(t.clientX,t.clientY)}):H.none():void 0!==e.touches&&1===e.touches.length?H.some(e.touches[0]).map(function(t){return oi(t.clientX,t.clientY)}):H.none()}function y0(u){return u.model.minX}function zp(u){return u.model.minY}function $y(u){return u.model.minX-1}function e_(u){return u.model.minY-1}function Fp(u){return u.model.maxX}function Lh(u){return u.model.maxY}function b0(u){return u.model.maxX+1}function t_(u){return u.model.maxY+1}function x0(u,e,t){return e(u)-t(u)}function Ni(u){return x0(u,Fp,y0)}function Pm(u){return x0(u,Lh,zp)}function kx(u){return Ni(u)/2}function Mx(u){return Pm(u)/2}function _0(u){return u.stepSize}function Tx(u){return u.snapToGrid}function Dx(u){return u.snapStart}function Vp(u){return u.rounded}function Ky(u,e){return void 0!==u[e+"-edge"]}function n_(u){return Ky(u,"left")}function r_(u){return Ky(u,"right")}function TM(u){return Ky(u,"top")}function Ax(u){return Ky(u,"bottom")}function Hp(u){return u.model.value.get()}function Wp(u,e){return{x:u,y:e}}function Jf(u,e){gn(u,Wx(),{value:e})}function Uw(u,e,t,n){return u<e?u:t<u?t:u===e?e-1:Math.max(e,u-n)}function o_(u,e,t,n){return t<u?u:u<e?e:u===t?t+1:Math.min(t,u+n)}function qw(u,e,t){return Math.max(e,Math.min(t,u))}function LC(u){var e=u.min,t=u.max,n=u.range,r=u.value,o=u.step,i=u.snap,s=u.snapStart,l=u.rounded,h=u.minBound,p=u.maxBound,y=u.screenRange,b=u.hasMinEdge?e-1:e,S=u.hasMaxEdge?t+1:t;if(r<h)return b;if(p<r)return S;var M,k,O,P,R,F=qw((R=h,(Math.min(p,Math.max(r,R))-R)/y*n+e),b,S);return i&&e<=F&&F<=t?(M=F,k=e,O=t,P=o,s.fold(function(){var G=Math.round((M-k)/P)*P;return qw(k+G,k-1,O+1)},function(G){var X=Math.round((M-G)%P/P),Y=Math.floor((M-G)/P),Q=Math.floor((O-G)/P),ne=Math.min(Q,Y+X);return Math.max(G,G+ne*P)})):l?Math.round(F):F}function i_(u){var e=u.min,r=u.value;return r<e?u.hasMinEdge?0:u.centerMinEdge:u.max<r?u.hasMaxEdge?u.maxBound:u.centerMaxEdge:(r-e)/u.range*u.maxOffset}function Rm(u){return u.element.dom.getBoundingClientRect()}function Gp(u){return Rm(u)[QC]}function yo(u){return Rm(u).right}function Nm(u){return Rm(u).top}function a_(u){return Rm(u).bottom}function Xw(u){return Rm(u).width}function BC(u){return Rm(u).height}function zC(u,e){var t=Rm(u),n=Rm(e);return(t[QC]+t.right)/2-n[QC]}function FC(u,e){var t=Rm(u),n=Rm(e);return(t.top+t.bottom)/2-n.top}function Yw(u,e){gn(u,Wx(),{value:e})}function Zw(u,e,t){return LC({min:y0(e),max:Fp(e),range:Ni(e),value:t,step:_0(e),snap:Tx(e),snapStart:Dx(e),rounded:Vp(e),hasMinEdge:n_(e),hasMaxEdge:r_(e),minBound:Gp(u),maxBound:yo(u),screenRange:Xw(u)})}function DM(u){return function(e,t){return Yw(e,{x:r=(0<u?o_:Uw)(Hp(n=t).x,y0(n),Fp(n),_0(n))}),H.some(r).map(dn);var n,r}}function s_(u,e,t,n,r,o){var i,s,l,c,f,h,p,y,b=(s=o,l=t,c=n,f=r,h=Xw(i=e),p=c.bind(function(S){return H.some(zC(S,i))}).getOr(0),y=f.bind(function(S){return H.some(zC(S,i))}).getOr(h),i_({min:y0(s),max:Fp(s),range:Ni(s),value:l,hasMinEdge:n_(s),hasMaxEdge:r_(s),minBound:Gp(i),minOffset:0,maxBound:yo(i),maxOffset:h,centerMinEdge:p,centerMaxEdge:y}));return Gp(e)-Gp(u)+b}function Ix(u,e){gn(u,Wx(),{value:e})}function jp(u,e,t){return LC({min:zp(e),max:Lh(e),range:Pm(e),value:t,step:_0(e),snap:Tx(e),snapStart:Dx(e),rounded:Vp(e),hasMinEdge:TM(e),hasMaxEdge:Ax(e),minBound:Nm(u),maxBound:a_(u),screenRange:BC(u)})}function Lm(u){return function(e,t){return Ix(e,{y:r=(0<u?o_:Uw)(Hp(n=t).y,zp(n),Lh(n),_0(n))}),H.some(r).map(dn);var n,r}}function Mc(u,e,t,n,r,o){var i,s,l,c,f,h,p,y,b=(s=o,l=t,c=n,f=r,h=BC(i=e),p=c.bind(function(S){return H.some(FC(S,i))}).getOr(0),y=f.bind(function(S){return H.some(FC(S,i))}).getOr(h),i_({min:zp(s),max:Lh(s),range:Pm(s),value:l,hasMinEdge:TM(s),hasMaxEdge:Ax(s),minBound:Nm(i),minOffset:0,maxBound:a_(i),maxOffset:h,centerMinEdge:p,centerMaxEdge:y}));return Nm(e)-Nm(u)+b}function Nd(u,e){gn(u,Wx(),{value:e})}function Up(u,e){return{x:u,y:e}}function w0(u,e){return function(t,n){return o=n,i=0<u?o_:Uw,Nd(t,Up(s=(r=e)?Hp(o).x:i(Hp(o).x,y0(o),Fp(o),_0(o)),r?i(Hp(o).y,zp(o),Lh(o),_0(o)):Hp(o).y)),H.some(s).map(dn);var r,o,i,s}}function Ox(u){return"<alloy.field."+u+">"}function VC(u){return mS[u]}function S0(u,e,t){return Mn.config(j({store:{mode:"manual",getValue:e,setValue:t}},u.map(function(n){return{store:{initialValue:n}}}).getOr({})))}function Px(u){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:u},behaviours:cn([zr.config({ignore:!0}),xa.config({})])}}function AM(u){return{dom:{tag:"div",classes:["tox-navobj"]},components:[Px([E0]),u,Px([pS])],behaviours:cn([A0(1)])}}function l_(u,e){gn(u,cd(),{raw:{which:9,shiftKey:e}})}function WC(u,e){var t=e.element;La(t,E0)?l_(u,!0):La(t,pS)&&l_(u,!1)}function qp(u){return vx(u,["."+E0,"."+pS].join(","),Er)}function C0(u,e){return y_(document.createElement("canvas"),u,e)}function GC(u){var e=C0(u.width,u.height);return Ng(e).drawImage(u,0,0),e}function c_(u){return u.naturalWidth||u.width}function $w(u){return u.naturalHeight||u.height}function d_(u,e,t){return e=e||"image/png",xr(HTMLCanvasElement.prototype.toBlob)?new Zf(function(r,o){u.toBlob(function(i){i?r(i):o()},e,t)}):(n=u.toDataURL(e,t),new Zf(function(r,o){(function(){var i=n.split(","),s=/data:([^;]+)/.exec(i[0]);if(!s)return H.none();for(var l=s[1],f=atob(i[1]),h=f.length,p=Math.ceil(h/1024),y=new Array(p),b=0;b<p;++b){for(var S=1024*b,M=Math.min(1024+S,h),k=new Array(M-S),O=S,P=0;O<M;++P,++O)k[P]=f[O].charCodeAt(0);y[b]=new Uint8Array(k)}return H.some(new Blob(y,{type:l}))})().fold(function(){o("uri is not base64: "+n)},r)}));var n}function jC(u,e,t){function n(r,o){return u.then(function(i){return i.toDataURL(r||"image/png",o)})}return{getType:ze(e.type),toBlob:function(){return Zf.resolve(e)},toDataURL:ze(t),toBase64:function(){return t.split(",")[1]},toAdjustedBlob:function(r,o){return u.then(function(i){return d_(i,r,o)})},toAdjustedDataURL:n,toAdjustedBase64:function(r,o){return n(r,o).then(function(i){return i.split(",")[1]})},toCanvas:function(){return u.then(GC)}}}function Bm(u,e){return d_(u,e).then(function(t){return jC(Zf.resolve(u),t,u.toDataURL())})}function zm(u,e,t){var n="string"==typeof u?parseFloat(u):u;return t<n?n=t:n<e&&(n=e),n}function Xp(u,e){for(var t=[],n=new Array(25),r=0;r<5;r++){for(var o=0;o<5;o++)t[o]=e[o+5*r];for(o=0;o<5;o++){for(var i=0,s=0;s<5;s++)i+=u[o+5*s]*t[s];n[o+5*r]=i}}return n}function Yp(u,e){return u.toCanvas().then(function(t){return ak(t,u.getType(),e)})}function Jy(u){return function(e,t){return Yp(e,u([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t))}}function Jw(u,e){void 0===e&&(e=2);var t=Math.pow(10,e),n=Math.round(u*t);return Math.ceil(n/t)}function Ld(u){return Lg(u)}function Rx(u){return GM(u)}function Nx(u,e){return P0(u,e)}function Qw(u,e){return ob(u,e)}function eS(u,e){return sk(u,e)}function f_(u,e){return n=e,(t=u).toCanvas().then(function(r){return x_(r,t.getType(),n)});var t,n}function Qy(u,e){return n=e,(t=u).toCanvas().then(function(r){return jo(r,t.getType(),n)});var t,n}function tS(u,e,t){return xg(u,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:t},e)}function h_(u,e){return tS(u,e,[])}function UC(u,e){return tS(u,e,[Ur.config({})])}function g_(u,e,t){return{dom:{tag:"span",innerHtml:t.translate(u),classes:[e+"__select-label"]},behaviours:cn([Ur.config({})])}}function k0(u,e,t){function n(f,h){var p=Mn.getValue(f);return zr.focus(p),gn(p,"keydown",{raw:h.event.raw}),gf.close(p),H.some(!0)}var r=$n(ht),o=u.text.map(function(f){return Bo(g_(f,e,t.providers))}),i=u.icon.map(function(f){return Bo(UC(f,t.providers.icons))}),s=u.role.fold(function(){return{}},function(f){return{role:f}}),l=u.tooltip.fold(function(){return{}},function(f){var h=t.providers.translate(f);return{title:h,"aria-label":h}}),c=xg("chevron-down",{tag:"div",classes:[e+"__select-chevron"]},t.providers.icons);return Bo(gf.sketch(_e(_e(_e({},u.uid?{uid:u.uid}:{}),s),{dom:{tag:"button",classes:[e,e+"--select"].concat(Mt(u.classes,function(f){return e+"--"+f})),attributes:_e({},l)},components:c0([i.map(function(f){return f.asSpec()}),o.map(function(f){return f.asSpec()}),H.some(c)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:cn(me(me([],u.dropdownBehaviours,!0),[Dm(function(){return u.disabled||t.providers.isDisabled()}),us(),v_.config({}),Ur.config({}),zn("dropdown-events",[Ip(u,r),vl(u,r)]),zn("menubutton-update-display-text",[Ot(Nl,function(f,h){o.bind(function(p){return p.getOpt(f)}).each(function(p){Ur.set(p,[sl(t.providers.translate(h.event.text))])})}),Ot(jM,function(f,h){i.bind(function(p){return p.getOpt(f)}).each(function(p){Ur.set(p,[UC(h.event.icon,t.providers.icons)])})})])],!1)),eventOrder:j(qx,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:cn([pr.config({mode:"special",onLeft:n,onRight:n})]),lazySink:t.getSink,toggleClass:e+"--active",parts:{menu:T1(0,0,u.presets)},fetch:function(f){return Em(un(u.fetch,f))}}))).asSpec()}function Zp(u){return"separator"===u.type}function hf(u,e,t,n){var r=jn("primary-menu"),o=UM(u,t.shared.providers.menuItems());if(0===o.items.length)return H.none();var i=AC(r,o.items,e,t,n),s=Pt(o.menus,function(c,f){return AC(f,c,e,t,!1)}),l=j(s,On(r,i));return H.from(wg.tieredData(r,l,o.expansions))}function nS(u){return{isDisabled:function(){return Kn.isDisabled(u)},setDisabled:function(e){return Kn.set(u,e)},setActive:function(e){var t=u.element;e?(vs(t,"tox-tbtn--enabled"),rr(t,"aria-pressed",!0)):(Ai(t,"tox-tbtn--enabled"),Mo(t,"aria-pressed"))},isActive:function(){return La(u.element,"tox-tbtn--enabled")}}}function rS(u,e,t,n){return k0({text:u.text,icon:u.icon,tooltip:u.tooltip,role:n,fetch:function(r,o){u.fetch(function(i){o(hf(i,qf.CLOSE_ON_EXECUTE,t,!1))})},onSetup:u.onSetup,getApi:nS,columns:1,presets:"normal",classes:[],dropdownBehaviours:[xa.config({})]},e,t.shared)}function Lx(u,e,t,n,r,o){void 0===t&&(t=[]);var i=e.fold(function(){return{}},function(c){return{action:c}}),s=_e({buttonBehaviours:cn([Dm(function(){return u.disabled||o.isDisabled()}),us(),xa.config({}),zn("button press",[Ma("click"),Ma("mousedown")])].concat(t)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},i),l=j(s,{dom:n});return j(l,{components:r})}function $p(u,e,t,n){void 0===n&&(n=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:u.tooltip.map(function(i){return{"aria-label":t.translate(i),title:t.translate(i)}}).getOr({})},o=u.icon.map(function(i){return h_(i,t.icons)});return Lx(u,e,n,r,c0([o]),t)}function m_(u,e,t,n){void 0===n&&(n=[]);var r=$p(u,H.some(e),t,n);return pl.sketch(r)}function qC(u,e,t,n,r){void 0===n&&(n=[]),void 0===r&&(r=[]);var o=t.translate(u.text),i=u.icon?u.icon.map(function(f){return h_(f,t.icons)}):H.none(),s=i.isSome()?c0([i]):[],l=i.isSome()?{}:{innerHtml:o},c=me(me(me(me([],u.primary||u.borderless?["tox-button"]:["tox-button","tox-button--secondary"],!0),i.isSome()?["tox-button--icon"]:[],!0),u.borderless?["tox-button--naked"]:[],!0),r,!0);return Lx(u,e,n,_e(_e({tag:"button",classes:c},l),{attributes:{title:o}}),s,t)}function oS(u,e,t,n,r){void 0===n&&(n=[]),void 0===r&&(r=[]);var o=qC(u,H.some(e),t,n,r);return pl.sketch(o)}function XC(u,e){return function(t){"custom"===e?gn(t,Og,{name:u,value:{}}):"submit"===e?gr(t,$1):"cancel"===e?gr(t,Ig):console.error("Unknown button type: ",e)}}function Bx(u,e,t){if("menu"===e){var n=u,r=Bo(rS(_e(_e({},u),{onSetup:function(c){return c.setDisabled(u.disabled),ht},fetch:(o=n.items,i=function(){return r},s=t,function(c){c(Mt(o,function(f){var h,p,y=f.text.fold(function(){return{}},function(b){return{text:b}});return _e(_e({type:f.type,active:!1},y),{onAction:function(b){var S=!b.isActive();b.setActive(S),p.storage.set(S),s.shared.getSink().each(function(M){i().getOpt(M).each(function(k){_u(k.element),gn(k,Og,{name:p.name,value:p.storage.get()})})})},onSetup:(h=p=f,function(b){b.setActive(h.storage.get())})})}))})}),"tox-tbtn",t,H.none()));return r.asSpec()}var o,i,s;if("custom"===e||"cancel"===e||"submit"===e){var l=XC(u.name,e);return oS(_e(_e({},u),{borderless:!1}),l,t.shared.providers,[])}console.error("Unknown footer button type: ",e)}function $c(u,e){return ss({factory:zo,name:u,overrides:function(t){return{fieldBehaviours:cn([zn("coupled-input-behaviour",[Ot(va(),function(n){fo(n,t,e).bind(ho.getCurrent).each(function(r){fo(n,t,"lock").each(function(o){Oo.isOn(o)&&t.onLockedChange(n,r,o)})})})])])}}})}function YC(u){var e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(u);if(null===e)return Sr.error(u);var t=parseFloat(e[1]);return Sr.value({value:t,unit:e[2]})}function eb(u,e){function t(r){return yn(n,r)}var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1};return u.unit===e?H.some(u.value):t(u.unit)&&t(e)?H.some(n[u.unit]===n[e]?u.value:u.value/n[u.unit]*n[e]):H.none()}function ZC(u){return H.none()}function $C(u,e){function t(h){return xg(h,{tag:"span",classes:["tox-icon","tox-lock-icon__"+h]},e.icons)}function n(h){return{dom:{tag:"div",classes:["tox-form__group"]},components:h}}function r(h){return zo.parts.field({factory:Np,inputClasses:["tox-textfield"],inputBehaviours:cn([Kn.config({disabled:function(){return u.disabled||e.isDisabled()}}),us(),xa.config({}),zn("size-input-events",[Ot(yu(),function(p,y){gn(p,s,{isField1:h})}),Ot(ta(),function(p,y){gn(p,uc,{name:u.name})})])]),selectOnFocus:!1})}function o(h){return{dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(h)}}}var i=ZC,s=jn("ratio-event"),l=$a.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:e.translate(u.label.getOr("Constrain proportions"))}},components:[t("lock"),t("unlock")],buttonBehaviours:cn([Kn.config({disabled:function(){return u.disabled||e.isDisabled()}}),us(),xa.config({})])}),c=$a.parts.field1(n([zo.parts.label(o("Width")),r(!0)])),f=$a.parts.field2(n([zo.parts.label(o("Height")),r(!1)]));return $a.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,f,n([o("&nbsp;"),l])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(h,p,y){YC(Mn.getValue(h)).each(function(b){i(b).each(function(S){var M,k,O,P;Mn.setValue(p,(P=-1!==(P=(M=S).value.toFixed((k=M.unit)in(O={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4})?O[k]:1)).indexOf(".")?P.replace(/\.?0*$/,""):P)+M.unit)})})},coupledFieldBehaviours:cn([Kn.config({disabled:function(){return u.disabled||e.isDisabled()},onDisabled:function(h){$a.getField1(h).bind(zo.getField).each(Kn.disable),$a.getField2(h).bind(zo.getField).each(Kn.disable),$a.getLock(h).each(Kn.disable)},onEnabled:function(h){$a.getField1(h).bind(zo.getField).each(Kn.enable),$a.getField2(h).bind(zo.getField).each(Kn.enable),$a.getLock(h).each(Kn.enable)}}),us(),zn("size-input-events2",[Ot(s,function(h,p){var y,b,S,M=p.event.isField1,k=M?$a.getField1(h):$a.getField2(h),O=M?$a.getField2(h):$a.getField1(h),P=k.map(Mn.getValue).getOr("");y=O.map(Mn.getValue).getOr(""),b=YC(P).toOptional(),S=YC(y).toOptional(),i=ot(b,S,function(F,G){return eb(F,G.unit).map(function(X){return G.value/X}).map(function(X){return Y=X,Q=G.unit,function(ne){return eb(ne,Q).map(function(le){return{value:le*Y,unit:Q}})};var Y,Q}).getOr(ZC)}).getOr(ZC)})])])})}function zx(u){var e,t;if(u.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),t=0;t<e.length;t++)u[e[t]]=u.changedTouches[0][e[t]]}function iS(u,e){return{uid:u.uid,dom:u.dom,components:e,behaviours:bs(u.formBehaviours,[Mn.config({store:{mode:"manual",getValue:function(t){return Pt(ly(t,u),function(n,r){return n().bind(function(o){var i=ho.getCurrent(o),s=new Error("Cannot find a current component to extract the value from for form part '"+r+"': "+Ud(o.element));return i.fold(function(){return Sr.error(s)},Sr.value)}).map(Mn.getValue)})},setValue:function(t,n){dt(n,function(r,o){fo(t,u,o).each(function(i){ho.getCurrent(i).each(function(s){Mn.setValue(s,r)})})})}}})]),apis:{getField:function(t,n){return fo(t,u,n).bind(ho.getCurrent)}}}}function Kp(){return ho.config({find:H.some})}function IM(u){return e=rh,t=Yh,S0(u,function(n){return e(n.element)},function(n,r){return t(n.element,r)});var e,t}(qy=kc=kc||{})[qy.HighlightFirst=0]="HighlightFirst",qy[qy.HighlightNone=1]="HighlightNone";var p_,M0,aS,Fm,sS=function(u,e){return u.getSystem().getByUid(e.uid+"-"+J1()).map(function(t){return function(){return Sr.value(t)}}).getOrThunk(function(){return e.lazySink.fold(function(){return function(){return Sr.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(t){return function(){return t(u)}})})},OM=ze([Et("dom"),Et("fetch"),oo("onOpen"),Vs("onExecute"),qe("getHotspot",H.some),qe("getAnchorOverrides",ze({})),Pf(),as("dropdownBehaviours",[Oo,_a,pr,zr]),Et("toggleClass"),qe("eventOrder",{}),bo("lazySink"),qe("matchWidth",!1),qe("useMinWidth",!1),bo("role")].concat(Gw())),KC=ze([Md({schema:[Gr()],name:"menu",defaults:function(u){return{onExecute:u.onExecute}}}),MM()]),gf=hi({name:"Dropdown",configFields:OM(),partFields:KC(),factory:function(u,e,t,n){function r(l){Kr.getState(l).each(function(c){wg.highlightPrimary(c)})}function o(l,c){return To(l),H.some(!0)}var i,s={expand:function(l){Oo.isOn(l)||v0(u,Ut,l,n,ht,kc.HighlightNone).get(ht)},open:function(l){Oo.isOn(l)||v0(u,Ut,l,n,ht,kc.HighlightFirst).get(ht)},isOpen:Oo.isOn,close:function(l){Oo.isOn(l)&&v0(u,Ut,l,n,ht,kc.HighlightFirst).get(ht)},repositionMenus:function(l){Oo.isOn(l)&&Q1(l)}};return{uid:u.uid,dom:u.dom,components:e,behaviours:bs(u.dropdownBehaviours,[Oo.config({toggleClass:u.toggleClass,aria:{mode:"expanded"}}),_a.config({others:{sandbox:function(l){return Kf(u,l,{onOpen:function(){return Oo.on(l)},onClose:function(){return Oo.off(l)}})}}}),pr.config({mode:"special",onSpace:o,onEnter:o,onDown:function(l,c){return gf.isOpen(l)?r(_a.getCoupled(l,"sandbox")):gf.open(l),H.some(!0)},onEscape:function(l,c){return gf.isOpen(l)?(gf.close(l),H.some(!0)):H.none()}}),zr.config({})]),events:jr(H.some(function(l){v0(u,Ut,l,n,r,kc.HighlightFirst).get(ht)})),eventOrder:_e(_e({},u.eventOrder),((i={})[Wu()]=["disabling","toggling","alloy.base.behaviour"],i)),apis:s,domModification:{attributes:_e(_e({"aria-haspopup":"true"},u.role.fold(function(){return{}},function(l){return{role:l}})),"button"===u.dom.tag?{type:St(u.dom,"attributes").bind(function(l){return St(l,"type")}).getOr("button")}:{})}}},apis:{open:function(u,e){return u.open(e)},expand:function(u,e){return u.expand(e)},close:function(u,e){return u.close(e)},isOpen:function(u,e){return u.isOpen(e)},repositionMenus:function(u,e){return u.repositionMenus(e)}}}),v_=Ia({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return Ro([rs(fd(),dn)])},exhibit:function(){return Qs({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),uS=jn("color-input-change"),JC=jn("color-swatch-change"),Fx=jn("color-picker-cancel"),Vx=af({schema:[Et("dom")],name:"label"}),EM=Bp("top-left"),Jp=Bp("top"),Pg=Bp("top-right"),gD=Bp("right"),Hx=Bp("bottom-right"),tb=Bp("bottom"),PM=Bp("bottom-left"),mD=[Vx,Bp("left"),gD,Jp,tb,EM,Pg,PM,Hx,ss({name:"thumb",defaults:ze({dom:{styles:{position:"absolute"}}}),overrides:function(u){return{events:Ro([pa(ul(),u,"spectrum"),pa(Da(),u,"spectrum"),pa(Yo(),u,"spectrum"),pa(Lc(),u,"spectrum"),pa(Jh(),u,"spectrum"),pa(jg(),u,"spectrum")])}}}),ss({schema:[vn("mouseIsDown",function(){return $n(!1)})],name:"spectrum",overrides:function(u){function e(n,r){return t.getValueFromEvent(r).map(function(o){return t.setValueFrom(n,u,o)})}var t=u.model.manager;return{behaviours:cn([pr.config({mode:"special",onLeft:function(n){return t.onLeft(n,u)},onRight:function(n){return t.onRight(n,u)},onUp:function(n){return t.onUp(n,u)},onDown:function(n){return t.onDown(n,u)}}),zr.config({})]),events:Ro([Ot(ul(),e),Ot(Da(),e),Ot(Lc(),e),Ot(Jh(),function(n,r){u.mouseIsDown.get()&&e(n,r)})])}}})],Wx=ze("slider.change.value"),QC="left",lS=DM(-1),RM=DM(1),cS=H.none,NM=H.none,LM={"top-left":H.none(),top:H.none(),"top-right":H.none(),right:H.some(function(u,e){Jf(u,{x:b0(e)})}),"bottom-right":H.none(),bottom:H.none(),"bottom-left":H.none(),left:H.some(function(u,e){Jf(u,{x:$y(e)})})},nb=Object.freeze({__proto__:null,setValueFrom:function(u,e,t){var n=Zw(u,e,t);return Yw(u,{x:n}),n},setToMin:function(u,e){Yw(u,{x:y0(e)})},setToMax:function(u,e){Yw(u,{x:Fp(e)})},findValueOfOffset:Zw,getValueFromEvent:function(u){return jw(u).map(function(e){return e.left})},findPositionOfValue:s_,setPositionFromValue:function(u,e,t,n){var r=Hp(t),o=s_(u,n.getSpectrum(u),r.x,n.getLeftEdge(u),n.getRightEdge(u),t),i=ws(e.element)/2;Ar(e.element,"left",o-i+"px")},onLeft:lS,onRight:RM,onUp:cS,onDown:NM,edgeActions:LM}),T0=H.none,dS=H.none,Gx=Lm(-1),ek=Lm(1),fS={"top-left":H.none(),top:H.some(function(u,e){Jf(u,{y:e_(e)})}),"top-right":H.none(),right:H.none(),"bottom-right":H.none(),bottom:H.some(function(u,e){Jf(u,{y:t_(e)})}),"bottom-left":H.none(),left:H.none()},Qp=Object.freeze({__proto__:null,setValueFrom:function(u,e,t){var n=jp(u,e,t);return Ix(u,{y:n}),n},setToMin:function(u,e){Ix(u,{y:zp(e)})},setToMax:function(u,e){Ix(u,{y:Lh(e)})},findValueOfOffset:jp,getValueFromEvent:function(u){return jw(u).map(function(e){return e.top})},findPositionOfValue:Mc,setPositionFromValue:function(u,e,t,n){var r=Hp(t),o=Mc(u,n.getSpectrum(u),r.y,n.getTopEdge(u),n.getBottomEdge(u),t),i=Ra(e.element)/2;Ar(e.element,"top",o-i+"px")},onLeft:T0,onRight:dS,onUp:Gx,onDown:ek,edgeActions:fS}),tk=jw,BM=w0(-1,!1),nk=w0(1,!1),Vm=w0(-1,!0),zM=w0(1,!0),FM={"top-left":H.some(function(u,e){Jf(u,Wp($y(e),e_(e)))}),top:H.some(function(u,e){Jf(u,Wp(kx(e),e_(e)))}),"top-right":H.some(function(u,e){Jf(u,Wp(b0(e),e_(e)))}),right:H.some(function(u,e){Jf(u,Wp(b0(e),Mx(e)))}),"bottom-right":H.some(function(u,e){Jf(u,Wp(b0(e),t_(e)))}),bottom:H.some(function(u,e){Jf(u,Wp(kx(e),t_(e)))}),"bottom-left":H.some(function(u,e){Jf(u,Wp($y(e),t_(e)))}),left:H.some(function(u,e){Jf(u,Wp($y(e),Mx(e)))})},rk=Object.freeze({__proto__:null,setValueFrom:function(u,e,t){var n=Up(Zw(u,e,t.left),jp(u,e,t.top));return Nd(u,n),n},setToMin:function(u,e){Nd(u,Up(y0(e),zp(e)))},setToMax:function(u,e){Nd(u,Up(Fp(e),Lh(e)))},getValueFromEvent:tk,setPositionFromValue:function(u,e,t,n){var r=Hp(t),o=s_(u,n.getSpectrum(u),r.x,n.getLeftEdge(u),n.getRightEdge(u),t),i=Mc(u,n.getSpectrum(u),r.y,n.getTopEdge(u),n.getBottomEdge(u),t),s=ws(e.element)/2,l=Ra(e.element)/2;Ar(e.element,"left",o-s+"px"),Ar(e.element,"top",i-l+"px")},onLeft:BM,onRight:nk,onUp:Vm,onDown:zM,edgeActions:FM}),Fa=hi({name:"Slider",configFields:[qe("stepSize",1),qe("onChange",ht),qe("onChoose",ht),qe("onInit",ht),qe("onDragStart",ht),qe("onDragEnd",ht),qe("snapToGrid",!1),qe("rounded",!0),bo("snapStart"),Ns("model",ps("mode",{x:[qe("minX",0),qe("maxX",100),vn("value",function(u){return $n(u.mode.minX)}),Et("getInitialValue"),wo("manager",nb)],y:[qe("minY",0),qe("maxY",100),vn("value",function(u){return $n(u.mode.minY)}),Et("getInitialValue"),wo("manager",Qp)],xy:[qe("minX",0),qe("maxX",100),qe("minY",0),qe("maxY",100),vn("value",function(u){return $n({x:u.mode.minX,y:u.mode.minY})}),Et("getInitialValue"),wo("manager",rk)]})),as("sliderBehaviours",[pr,Mn]),vn("mouseIsDown",function(){return $n(!1)})],partFields:mD,factory:function(u,e,t,n){function r(O){return da(O,u,"thumb")}function o(O){return da(O,u,"spectrum")}function i(O){return fo(O,u,"left-edge")}function s(O){return fo(O,u,"right-edge")}function l(O){return fo(O,u,"top-edge")}function c(O){return fo(O,u,"bottom-edge")}function f(O,P){k.setPositionFromValue(O,P,u,{getLeftEdge:i,getRightEdge:s,getTopEdge:l,getBottomEdge:c,getSpectrum:o})}function h(O,P){M.value.set(P),f(O,r(O))}function p(O){var P=u.mouseIsDown.get();u.mouseIsDown.set(!1),P&&fo(O,u,"thumb").each(function(R){var F=M.value.get();u.onChoose(O,R,F)})}function y(O,P){P.stop(),u.mouseIsDown.set(!0),u.onDragStart(O,r(O))}function b(O,P){P.stop(),u.onDragEnd(O,r(O)),p(O)}var S,M=u.model,k=M.manager;return{uid:u.uid,dom:u.dom,components:e,behaviours:bs(u.sliderBehaviours,[pr.config({mode:"special",focusIn:function(O){return fo(O,u,"spectrum").map(pr.focusIn).map(dn)}}),Mn.config({store:{mode:"manual",getValue:function(O){return M.value.get()}}}),Ol.config({channels:((S={})[mp()]={onReceive:p},S)})]),events:Ro([Ot(Wx(),function(O,P){!function(R,F){h(R,F);var G=r(R);u.onChange(R,G,F),H.some(!0)}(O,P.event.value)}),Mi(function(O,P){var R=M.getInitialValue();M.value.set(R);var F=r(O);f(O,F);var G=o(O);u.onInit(O,F,G,M.value.get())}),Ot(ul(),y),Ot(Yo(),b),Ot(Lc(),y),Ot(jg(),b)]),apis:{resetToMin:function(O){k.setToMin(O,u)},resetToMax:function(O){k.setToMax(O,u)},setValue:h,refresh:f},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(u,e,t){u.setValue(e,t)},resetToMin:function(u,e){u.resetToMin(e)},resetToMax:function(u,e){u.resetToMax(e)},refresh:function(u,e){u.refresh(e)}}}),Rg=jn("rgb-hex-update"),jx=jn("slider-update"),Ux=jn("palette-update"),VM=[as("formBehaviours",[Mn])],zh={getField:sv(function(u,e,t){return u.getField(e,t)}),sketch:function(u){var e,t={field:function(o,i){return e.push(o),hp("form",Ox(o),i)},record:ze(e=[])},n=u(t),r=Mt(t.record(),function(o){return ss({name:o,pname:Ox(o)})});return $u("form",VM,r,iS,n)}},hS=jn("valid-input"),Hm=jn("invalid-input"),gS=jn("validating-input"),rb="colorcustom.rgb.",D0=function(u){return ho.config({find:u.getOpt})},A0=function(u){return ho.config({find:function(e){return dr(e.element,u).bind(function(t){return e.getSystem().getByDom(t).toOptional()})}})},mS={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},ok=tinymce.util.Tools.resolve("tinymce.Resource"),Qu=tinymce.util.Tools.resolve("tinymce.util.Tools"),ik=ae([qe("preprocess",Ut),qe("postprocess",Ut)]),HM=function(u,e){var t=qi("RepresentingConfigs.memento processors",ik,e);return Mn.config({store:{mode:"manual",getValue:function(n){var r=u.get(n),o=Mn.getValue(r);return t.postprocess(o)},setValue:function(n,r){var o=t.preprocess(r),i=u.get(n);Mn.setValue(i,o)}}})},I0=S0,O0=function(u){return Mn.config({store:{mode:"memory",initialValue:u}})},E0=jn("alloy-fake-before-tabstop"),pS=jn("alloy-fake-after-tabstop"),pD=!(Ca().browser.isIE()||Ca().browser.isEdge()),Ng=function(u){return u.getContext("2d")},y_=function(u,e,t){return u.width=e,u.height=t,u},b_=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],ak=function(u,e,t){var n=Ng(u),r=function(o){for(var i,s,l,c,f=o.data,h=t[0],p=t[1],y=t[2],b=t[3],S=t[4],M=t[5],k=t[6],O=t[7],P=t[8],R=t[9],F=t[10],G=t[11],X=t[12],Y=t[13],Q=t[14],ne=t[15],le=t[16],ce=t[17],ye=t[18],xe=t[19],Te=0;Te<f.length;Te+=4)f[Te]=(i=f[Te])*h+(s=f[Te+1])*p+(l=f[Te+2])*y+(c=f[Te+3])*b+S,f[Te+1]=i*M+s*k+l*O+c*P+R,f[Te+2]=i*F+s*G+l*X+c*Y+Q,f[Te+3]=i*ne+s*le+l*ce+c*ye+xe;return o}(n.getImageData(0,0,u.width,u.height));return n.putImageData(r,0,0),Bm(u,e)},Lg=(p_=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(u){return Yp(u,p_)}),ob=Jy(function(u,e){return Xp(u,[1,0,0,0,e=zm(255*e,-255,255),0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])}),sk=Jy(function(u,e){var t;return e=zm(e,-1,1),Xp(u,[(t=(e*=100)<0?127+e/100*127:127*(0==(t=e%1)?b_[e]:b_[Math.floor(e)]*(1-t)+b_[Math.floor(e)+1]*t)+127)/127,0,0,0,.5*(127-t),0,t/127,0,0,.5*(127-t),0,0,t/127,0,.5*(127-t),0,0,0,1,0,0,0,0,0,1])}),GM=(M0=[0,-1,0,-1,5,-1,0,-1,0],function(u){return t=M0,(e=u).toCanvas().then(function(n){return r=n,o=e.getType(),i=t,l=function(c,f,h){for(var p=function(xe,Te,Ee){return Ee<xe?xe=Ee:xe<Te&&(xe=Te),xe},y=Math.round(Math.sqrt(h.length)),b=Math.floor(y/2),S=c.data,M=f.data,k=c.width,O=c.height,P=0;P<O;P++)for(var R=0;R<k;R++){for(var F=0,G=0,X=0,Y=0;Y<y;Y++)for(var Q=0;Q<y;Q++){var ne=p(R+Q-b,0,k-1),le=4*(p(P+Y-b,0,O-1)*k+ne),ce=h[Y*y+Q];F+=S[le]*ce,G+=S[1+le]*ce,X+=S[2+le]*ce}var ye=4*(P*k+R);M[ye]=p(F,0,255),M[1+ye]=p(G,0,255),M[2+ye]=p(X,0,255)}return f}((s=Ng(r)).getImageData(0,0,r.width,r.height),s.getImageData(0,0,r.width,r.height),i),s.putImageData(l,0,0),Bm(r,o);var r,o,i,s,l});var e,t}),P0=(aS=function(u,e){return 255*Math.pow(u/255,1-e)},function(u,e){return u.toCanvas().then(function(t){return function(n,r,o){for(var i=Ng(n),s=new Array(256),l=0;l<s.length;l++)s[l]=aS(l,o);var c=function(f,h){for(var p=f.data,y=0;y<p.length;y+=4)p[y]=h[p[y]],p[y+1]=h[p[y+1]],p[y+2]=h[p[y+2]];return f}(i.getImageData(0,0,n.width,n.height),s);return i.putImageData(c,0,0),Bm(n,r)}(t,u.getType(),e)})}),uk=function(u,e,t){var n=c_(u),r=$w(u),o=e/n,i=t/r,s=!1;(o<.5||2<o)&&(o=o<.5?.5:2,s=!0),(i<.5||2<i)&&(i=i<.5?.5:2,s=!0);var l=ib(u,o,i);return s?l.then(function(c){return uk(c,e,t)}):l},ib=function(u,e,t){return new Zf(function(n){var r=c_(u),o=$w(u),i=Math.floor(r*e),s=Math.floor(o*t),l=C0(i,s);Ng(l).drawImage(u,0,0,r,o,0,0,i,s),n(l)})},jo=function(u,e,t){var n=(t<0?360+t:t)*Math.PI/180,r=u.width,o=u.height,i=Math.sin(n),s=Math.cos(n),l=Jw(Math.abs(r*s)+Math.abs(o*i)),c=Jw(Math.abs(r*i)+Math.abs(o*s)),f=C0(l,c),h=Ng(f);return h.translate(l/2,c/2),h.rotate(n),h.drawImage(u,-r/2,-o/2),Bm(f,e)},x_=function(u,e,t){var n=C0(u.width,u.height),r=Ng(n);return"v"===t?(r.scale(1,-1),r.drawImage(u,0,-n.height)):(r.scale(-1,1),r.drawImage(u,-n.width,0)),Bm(n,e)},lk=jn("toolbar.button.execute"),qx=((Fm={})[Wu()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],Fm),Nl=jn("update-menu-text"),jM=jn("update-menu-icon"),Wm={type:"separator"},UM=function(u,e){var t,n,r;return on((t=lr(u)?u.split(" "):u,n=e,0<(r=Jo(t,function(o,i){return lr(i)?""===i?o:"|"===i?0<o.length&&!Zp(o[o.length-1])?o.concat([Wm]):o:yn(n,i.toLowerCase())?o.concat([n[i.toLowerCase()]]):o:o.concat([i])},[])).length&&Zp(r[r.length-1])&&r.pop(),r),function(o,i){var s,l,c,f,h,p,y=function(S){if(Zp(S))return S;var M=St(S,"value").getOrThunk(function(){return jn("generated-menu-item")});return j({value:M},S)}(i),b=(l=e,yn(s=y,"getSubmenuItems")?(f=l,h=(c=s).getSubmenuItems(),p=UM(h,f),{item:c,menus:j(p.menus,On(c.value,p.items)),expansions:j(p.expansions,On(c.value,c.value))}):{item:s,menus:{},expansions:{}});return{menus:j(o.menus,b.menus),items:[b.item].concat(o.items),expansions:j(o.expansions,b.expansions)}},{menus:{},expansions:{},items:[]})},vD=ze([qe("field1Name","field1"),qe("field2Name","field2"),ci("onLockedChange"),Fs(["lockClass"]),qe("locked",!1),Sd("coupledFieldBehaviours",[ho,Mn])]),qM=ze([$c("field1","field2"),$c("field2","field1"),ss({factory:pl,schema:[Et("dom")],name:"lock",overrides:function(u){return{buttonBehaviours:cn([Oo.config({selected:u.locked,toggleClass:u.markers.lockClass,aria:{mode:"pressed"}})])}}})]),$a=hi({name:"FormCoupledInputs",configFields:vD(),partFields:qM(),factory:function(u,e,t,n){return{uid:u.uid,dom:u.dom,components:e,behaviours:Cd(u.coupledFieldBehaviours,[ho.config({find:H.some}),Mn.config({store:{mode:"manual",getValue:function(r){var o=_d(r,u,["field1","field2"]),i={};return i[u.field1Name]=Mn.getValue(o.field1()),i[u.field2Name]=Mn.getValue(o.field2()),i},setValue:function(r,o){var i=_d(r,u,["field1","field2"]);Lr(o,u.field1Name)&&Mn.setValue(i.field1(),o[u.field1Name]),Lr(o,u.field2Name)&&Mn.setValue(i.field2(),o[u.field2Name])}}})]),apis:{getField1:function(r){return fo(r,u,"field1")},getField2:function(r){return fo(r,u,"field2")},getLock:function(r){return fo(r,u,"lock")}}}},apis:{getField1:function(u,e){return u.getField1(e)},getField2:function(u,e){return u.getField2(e)},getLock:function(u,e){return u.getLock(e)}}}),Li={undo:ze(jn("undo")),redo:ze(jn("redo")),zoom:ze(jn("zoom")),back:ze(jn("back")),apply:ze(jn("apply")),swap:ze(jn("swap")),transform:ze(jn("transform")),tempTransform:ze(jn("temp-transform")),transformApply:ze(jn("transform-apply"))},R0=ze("save-state"),N0=ze("disable"),ck=ze("enable"),Tc={formActionEvent:Og,saveState:R0,disable:N0,enable:ck},ab=tinymce.util.Tools.resolve("tinymce.geom.Rect"),Ll=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Xx=tinymce.util.Tools.resolve("tinymce.util.Observable"),L0=tinymce.util.Tools.resolve("tinymce.util.VK");function ev(u,e,t,n,r){return m_({name:u,icon:H.some(e),disabled:t,tooltip:H.some(u),primary:!1,borderless:!1},n,r)}function B0(u,e){e?Kn.enable(u):Kn.disable(u)}var yS=0;function Yx(u,e){function t(ne){var le=O.getHistoryStates();G.updateButtonUndoStates(ne,le.undoEnabled,le.redoEnabled),gn(ne,Tc.formActionEvent,{name:Tc.saveState(),value:le.undoEnabled})}function n(ne){return ne.toBlob()}function r(ne){gn(ne,Tc.formActionEvent,{name:Tc.disable(),value:{}})}function o(ne,le,ce,ye,xe){r(ne),function(u){return e=u,new Zf(function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)}).then(function(t){return jC((n=u,new Zf(function(r,o){function i(){l.removeEventListener("load",c),l.removeEventListener("error",f)}var s=URL.createObjectURL(n),l=new Image,c=function(){i(),r(l)},f=function(){i(),o("Unable to load data of type "+n.type+": "+s)};l.addEventListener("load",c),l.addEventListener("error",f),l.src=s,l.complete&&setTimeout(c,0)}).then(function(r){!function(u){URL.revokeObjectURL(u.src)}(r);var o=C0(c_(r),$w(r));return Ng(o).drawImage(r,0,0),o})),u,t);var n});var e}(le).then(ce).then(n).then(ye).then(function(Te){return R(ne,Te)}).then(function(){t(ne),xe(),P(ne)}).catch(function(Te){console.log(Te),ne.getSystem().isConnected()&&P(ne)})}function i(ne,le,ce){o(ne,O.getBlobState().blob,le,function(ye){return O.updateTempState(ye)},ce)}function s(ne){var le=O.getBlobState().url;return O.destroyTempState(),t(ne),le}var l,c,f,h,p,y,b,S,M,k,O=function(u){var e,t,n,r,o=$n(u),i=Zo(),s=(t=-1,{data:e=[],add:function(y){var b=e.splice(++t);return e.push(y),{state:y,removed:b}},undo:function(){if(n())return e[--t]},redo:function(){if(r())return e[++t]},canUndo:n=function(){return 0<t},canRedo:r=function(){return-1!==t&&t<e.length-1}});function l(y){o.set(y)}function c(y){URL.revokeObjectURL(y.url)}function f(y){var b=h(y);l(b);var S=s.add(b).removed;return Qu.each(S,c),b.url}function h(y){return{blob:y,url:URL.createObjectURL(y)}}function p(){i.on(c),i.clear()}return s.add(u),{getBlobState:function(){return o.get()},setBlobState:l,addBlobState:f,getTempState:function(){return i.get().getOrThunk(o.get)},updateTempState:function(y){var b=h(y);return p(),i.set(b),b.url},addTempState:function(y){var b=h(y);return i.set(b),b.url},applyTempState:function(y){return i.get().fold(ht,function(b){f(b.blob),y()})},destroyTempState:p,undo:function(){var y=s.undo();return l(y),y.url},redo:function(){var y=s.redo();return l(y),y.url},getHistoryStates:function(){return{undoEnabled:s.canUndo(),redoEnabled:s.canRedo()}}}}(u.currentState),P=function(ne){X.getApplyButton(ne).each(function(le){Kn.enable(le)}),gn(ne,Tc.formActionEvent,{name:Tc.enable(),value:{}})},R=function(ne,le){return r(ne),F.updateSrc(ne,le)},F=(h=u.currentState.url,p=Bo({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),y=$n(1),b=Zo(),S=$n({x:0,y:0,w:1,h:1}),M=$n({x:0,y:0,w:1,h:1}),{memContainer:k=Bo(du.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[p.asSpec(),{dom:{tag:"img",attributes:{src:h}}},{dom:{tag:"div"},behaviours:cn([zn("image-panel-crop-events",[Mi(function(ne){k.getOpt(ne).each(function(le){var ye=function(u,e,t,n,r){function o(M,k){return{x:k.x-M.x,y:k.y-M.y,w:k.w,h:k.h}}function i(M,k,O,P){var R,F=k.x,G=k.y,X=k.w,Y=k.h;u=ab.clamp({x:F+=O*M.deltaX,y:G+=P*M.deltaY,w:X=(X+=O*M.deltaW)<20?20:X,h:Y=(Y+=P*M.deltaH)<20?20:Y},t,"move"===M.name),R=o(t,u),S.fire("updateRect",{rect:R}),b(R)}function s(M){l(u=M)}function l(M){function k(O,P){P.h<0&&(P.h=0),P.w<0&&(P.w=0),Ll("#"+h+"-"+O,n).css({left:P.x,top:P.y,width:P.w,height:P.h})}Qu.each(p,function(O){Ll("#"+h+"-"+O.name,n).css({left:M.w*O.xMul+M.x,top:M.h*O.yMul+M.y})}),k("top",{x:e.x,y:e.y,w:e.w,h:M.y-e.y}),k("right",{x:M.x+M.w,y:M.y,w:e.w-M.x-M.w+e.x,h:M.h}),k("bottom",{x:e.x,y:M.y+M.h,w:e.w,h:e.h-M.y-M.h+e.y}),k("left",{x:e.x,y:M.y,w:M.x-e.x,h:M.h}),k("move",M)}var c,f="tox-",h="tox-crid-"+yS++,p=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],y=["top","right","bottom","left"],b=function(M){var k;s({x:M.x+(k=t).x,y:M.y+k.y,w:M.w,h:M.h})};Ll('<div id="'+h+'" class="'+f+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(n),Qu.each(y,function(M){Ll("#"+h,n).append('<div id="'+h+"-"+M+'"class="'+f+'croprect-block" style="display: none" data-mce-bogus="all">')}),Qu.each(p,function(M){Ll("#"+h,n).append('<div id="'+h+"-"+M.name+'" class="'+f+"croprect-handle "+f+"croprect-handle-"+M.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+M.label+'" aria-grabbed="false" title="'+M.label+'">')}),c=Qu.map(p,function(M){var k;return function(u,e){function t(f){if(zx(f),f.button!==r)return c(f);f.deltaX=f.screenX-o,f.deltaY=f.screenY-i,f.preventDefault(),e.drag(f)}var n,r,o,i,s=e.document||document,l=s.getElementById(e.handle||u),c=function(f){zx(f),Ll(s).off("mousemove touchmove",t).off("mouseup touchend",c),n.remove(),e.stop&&e.stop(f)};return Ll(l).on("mousedown touchstart",function(f){var h,p,y,b,S,M,k,O,P,R=(b=(h=Math.max)((p=s.documentElement).scrollWidth,(y=s.body).scrollWidth),S=h(p.clientWidth,y.clientWidth),M=h(p.offsetWidth,y.offsetWidth),k=h(p.scrollHeight,y.scrollHeight),O=h(p.clientHeight,y.clientHeight),{width:b<M?S:b,height:k<h(p.offsetHeight,y.offsetHeight)?O:k});zx(f),f.preventDefault(),r=f.button;var F=l;o=f.screenX,i=f.screenY,P=window.getComputedStyle?window.getComputedStyle(F,null).getPropertyValue("cursor"):F.runtimeStyle.cursor,n=Ll("<div></div>").css({position:"absolute",top:0,left:0,width:R.width,height:R.height,zIndex:2147483647,opacity:1e-4,cursor:P}).appendTo(s.body),Ll(s).on("mousemove touchmove",t).on("mouseup touchend",c),e.start(f)}),{destroy:function(){Ll(l).off()}}}(h,{document:n.ownerDocument,handle:h+"-"+M.name,start:function(){k=u},drag:function(O){i(M,k,O.deltaX,O.deltaY)}})}),l(u),Ll(n).on("focusin focusout",function(M){Ll(M.target).attr("aria-grabbed","focus"===M.type?"true":"false")}),Ll(n).on("keydown",function(M){var k;function O(P,R,F,G,X){P.stopPropagation(),P.preventDefault(),i(k,F,G,X)}switch(Qu.each(p,function(P){if(M.target.id===h+"-"+P.name)return k=P,!1}),M.keyCode){case L0.LEFT:O(M,0,u,-10,0);break;case L0.RIGHT:O(M,0,u,10,0);break;case L0.UP:O(M,0,u,0,-10);break;case L0.DOWN:O(M,0,u,0,10);break;case L0.ENTER:case L0.SPACEBAR:M.preventDefault(),r()}});var S=Qu.extend({toggleVisibility:function(M){var k=Qu.map(p,function(O){return"#"+h+"-"+O.name}).concat(Qu.map(y,function(O){return"#"+h+"-"+O})).join(",");M?Ll(k,n).show():Ll(k,n).hide()},setClampRect:function(M){t=M,l(u)},setRect:s,getInnerRect:function(){return o(t,u)},setInnerRect:b,setViewPortRect:function(M){e=M,l(u)},destroy:function(){Qu.each(c,function(M){M.destroy()}),c=[]}},Xx);return S}({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},le.element.dom,ht);ye.toggleVisibility(!1),ye.on("updateRect",function(xe){var Te=xe.rect,Ee=y.get(),Ve={x:Math.round(Te.x/Ee),y:Math.round(Te.y/Ee),w:Math.round(Te.w/Ee),h:Math.round(Te.h/Ee)};S.set(Ve)}),b.set(ye)})})])])}],containerBehaviours:cn([Ur.config({}),zn("image-panel-events",[Mi(function(ne){Q(ne,h)})])])})),updateSrc:Q,zoom:function(ne,le){var ce=y.get(),ye=0<le?Math.min(2,ce+.1):Math.max(.1,ce-.1);y.set(ye),k.getOpt(ne).each(function(xe){var Te=xe.components()[1].element;Y(xe,Te)})},showCrop:function(){b.on(function(ne){ne.toggleVisibility(!0)})},hideCrop:function(){b.on(function(ne){ne.toggleVisibility(!1)})},getRect:function(){return S.get()},getMeasurements:function(){var ne=M.get();return{width:ne.w,height:ne.h}}}),G=(c=Bo(ev("Undo","undo",!0,function(ne){gn(ne,Li.undo(),{direction:1})},l=e)),f=Bo(ev("Redo","redo",!0,function(ne){gn(ne,Li.redo(),{direction:1})},l)),{container:du.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[c.asSpec(),f.asSpec(),ev("Zoom in","zoom-in",!1,function(ne){gn(ne,Li.zoom(),{direction:1})},l),ev("Zoom out","zoom-out",!1,function(ne){gn(ne,Li.zoom(),{direction:-1})},l)]}),updateButtonUndoStates:function(ne,le,ce){c.getOpt(ne).each(function(ye){B0(ye,le)}),f.getOpt(ne).each(function(ye){B0(ye,ce)})}}),X=function(u,e){function t(_n,Or,ni,xi){return Bo(oS({name:_n,text:_n,disabled:ni,primary:xi,icon:H.none(),borderless:!1},Or,e))}function n(_n,Or,ni,xi){return Bo(m_({name:_n,icon:H.some(_n),tooltip:H.some(Or),disabled:xi,primary:!1,borderless:!1},ni,e))}function r(_n,Or){_n.map(function(ni){var xi=ni.get(Or);xi.hasConfigured(Kn)&&Kn.disable(xi)})}function o(_n,Or){_n.map(function(ni){var xi=ni.get(Or);xi.hasConfigured(Kn)&&Kn.enable(xi)})}function i(_n,Or,ni){gn(_n,Or,ni)}function s(_n){return gr(_n,Tc.disable()),0}function l(_n){return gr(_n,Tc.enable()),0}function c(_n,Or){s(_n),i(_n,Li.transform(),{transform:Or}),l(_n)}function f(_n){return function(){Nr.getOpt(_n).each(function(Or){Ur.set(Or,[Lo])})}}function h(_n,Or){s(_n),i(_n,Li.transformApply(),{transform:Or,swap:f(_n)}),l(_n)}function p(){return t("Back",function(_n){return i(_n,Li.back(),{swap:f(_n)})},!1,!1)}function y(){return Bo({dom:{tag:"div",classes:["tox-spacer"]},behaviours:cn([Kn.config({})])})}function b(){return t("Apply",function(_n){return i(_n,Li.apply(),{swap:f(_n)})},!0,!0)}function S(_n,Or){return function(ni){return _n(ni,Or)}}function M(_n,Or){var ni,xi=Or;s(ni=_n),i(ni,Li.tempTransform(),{transform:xi}),l(ni)}function k(_n,Or,ni,xi,ga){var Jc=Fa.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(_n)}}),zl=Fa.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),Qc=Fa.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Bo(Fa.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:ni,maxX:ga,getInitialValue:ze({x:xi})},components:[Jc,zl,Qc],sliderBehaviours:cn([zr.config({})]),onChoose:Or}))}function O(_n,Or,ni,xi,ga){var Jc,zl,Qc,Fl,Ic,Oc,zd=(Jc=_n,zl=Or,Qc=ni,Fl=xi,Ic=ga,[p(),(Oc=zl,k(Jc,function(ed,bb,Fo){c(ed,S(Oc,Fo.x/100))},Qc,Fl,Ic)),b()]);return du.sketch({dom:F,components:zd.map(function(ed){return ed.asSpec()}),containerBehaviours:cn([zn("image-tools-filter-panel-buttons-events",[Ot(Tc.disable(),function(ed,bb){r(zd,ed)}),Ot(Tc.enable(),function(ed,bb){o(zd,ed)})])])})}function P(_n){return k(_n,function(Or,ni,xi){var ga=Lt.getOpt(Or),Jc=Ln.getOpt(Or),zl=Ht.getOpt(Or);ga.each(function(Qc){Jc.each(function(Fl){zl.each(function(Ic){var Oc,zd,ed,bb=Mn.getValue(Qc).x/100,Fo=Mn.getValue(Ic).x/100,j0=Mn.getValue(Fl).x/100,U0=(Oc=bb,zd=Fo,ed=j0,function(G_){return Yp(G_,(Gk=zd,jk=ed,Xp([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],[zm(Oc,0,2),0,0,0,0,0,zm(Gk,0,2),0,0,0,0,0,zm(jk,0,2),0,0,0,0,0,1,0,0,0,0,0,1])));var Gk,jk});c(Or,U0)})})})},0,100,200)}function R(_n,Or,ni){return function(xi){i(xi,Li.swap(),{transform:Or,swap:function(){Nr.getOpt(xi).each(function(ga){Ur.set(ga,[_n]),ni(ga)})}})}}var F={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},G=ht,X=[p(),y(),t("Apply",function(_n){h(_n,function(Or){var zl,Qc,Fl,Ic,Oc,zd=u.getRect();return Qc=zd.x,Fl=zd.y,Ic=zd.w,Oc=zd.h,(zl=Or).toCanvas().then(function(ed){return function(u,e,t,n,r,o){var i=C0(r,o);return Ng(i).drawImage(u,-t,-n),Bm(i,e)}(ed,zl.getType(),Qc,Fl,Ic,Oc)})}),u.hideCrop()},!1,!0)],Y=du.sketch({dom:F,components:X.map(function(_n){return _n.asSpec()}),containerBehaviours:cn([zn("image-tools-crop-buttons-events",[Ot(Tc.disable(),function(_n,Or){r(X,_n)}),Ot(Tc.enable(),function(_n,Or){o(X,_n)})])])}),Q=Bo($C({name:"size",label:H.none(),constrain:!0,disabled:!1},e)),ne=[p(),y(),Q,y(),t("Apply",function(_n){Q.getOpt(_n).each(function(Or){var ni,xi,ga=Mn.getValue(Or),Jc=parseInt(ga.width,10),zl=parseInt(ga.height,10),Qc=(ni=Jc,xi=zl,function(Fl){return Oc=ni,zd=xi,(Ic=Fl).toCanvas().then(function(ed){return uk(ed,Oc,zd).then(function(bb){return Bm(bb,Ic.getType())})});var Ic,Oc,zd});h(_n,Qc)})},!1,!0)],le=du.sketch({dom:F,components:ne.map(function(_n){return _n.asSpec()}),containerBehaviours:cn([zn("image-tools-resize-buttons-events",[Ot(Tc.disable(),function(_n,Or){r(ne,_n)}),Ot(Tc.enable(),function(_n,Or){o(ne,_n)})])])}),ce=S(f_,"h"),ye=S(f_,"v"),xe=S(Qy,-90),Te=S(Qy,90),Ee=[p(),y(),n("flip-horizontally","Flip horizontally",function(_n){M(_n,ce)},!1),n("flip-vertically","Flip vertically",function(_n){M(_n,ye)},!1),n("rotate-left","Rotate counterclockwise",function(_n){M(_n,xe)},!1),n("rotate-right","Rotate clockwise",function(_n){M(_n,Te)},!1),y(),b()],Ve=du.sketch({dom:F,components:Ee.map(function(_n){return _n.asSpec()}),containerBehaviours:cn([zn("image-tools-fliprotate-buttons-events",[Ot(Tc.disable(),function(_n,Or){r(Ee,_n)}),Ot(Tc.enable(),function(_n,Or){o(Ee,_n)})])])}),Be=[p(),y(),b()],nt=du.sketch({dom:F,components:Be.map(function(_n){return _n.asSpec()})}),bt=O("Brightness",Qw,-100,0,100),_t=O("Contrast",eS,-100,0,100),wt=O("Gamma",Nx,-100,0,100),Lt=P("R"),Ht=P("G"),Ln=P("B"),Ft=[p(),Lt,Ht,Ln,b()],Yn=du.sketch({dom:F,components:Ft.map(function(_n){return _n.asSpec()})}),or=H.some(Rx),Tr=H.some(Ld),Ko=[n("crop","Crop",R(Y,H.none(),function(_n){u.showCrop()}),!1),n("resize","Resize",R(le,H.none(),function(_n){Q.getOpt(_n).each(function(Or){var ni=u.getMeasurements();Mn.setValue(Or,{width:ni.width,height:ni.height})})}),!1),n("orientation","Orientation",R(Ve,H.none(),G),!1),n("brightness","Brightness",R(bt,H.none(),G),!1),n("sharpen","Sharpen",R(nt,or,G),!1),n("contrast","Contrast",R(_t,H.none(),G),!1),n("color-levels","Color levels",R(Yn,H.none(),G),!1),n("gamma","Gamma",R(wt,H.none(),G),!1),n("invert","Invert",R(nt,Tr,G),!1)],Lo=du.sketch({dom:F,components:Ko.map(function(_n){return _n.asSpec()})}),Nr=Bo(du.sketch({dom:{tag:"div"},components:[Lo],containerBehaviours:cn([Ur.config({})])}));return{memContainer:Nr,getApplyButton:function(_n){return Nr.getOpt(_n).map(function(Or){var ni=Or.components()[0];return ni.components()[ni.components().length-1]})}}}(F,e);function Y(ne,le){k.getOpt(ne).each(function(ce){var ye=y.get(),xe=ws(ce.element),Te=Ra(ce.element),Ee=le.dom.naturalWidth*ye,Ve=le.dom.naturalHeight*ye,Be=Math.max(0,xe/2-Ee/2),nt=Math.max(0,Te/2-Ve/2),bt={left:Be.toString()+"px",top:nt.toString()+"px",width:Ee.toString()+"px",height:Ve.toString()+"px",position:"absolute"};lc(le,bt),p.getOpt(ce).each(function(_t){lc(_t.element,bt)}),b.on(function(_t){var wt=S.get();_t.setRect({x:wt.x*ye+Be,y:wt.y*ye+nt,w:wt.w*ye,h:wt.h*ye}),_t.setClampRect({x:Be,y:nt,w:Ee,h:Ve}),_t.setViewPortRect({x:0,y:0,w:xe,h:Te})})})}function Q(ne,le){var ce,ye=Pe.fromTag("img");return rr(ye,"src",le),ce=ye.dom,new km(function(xe){var Te=function(){ce.removeEventListener("load",Te),xe(ce)};ce.complete?xe(ce):ce.addEventListener("load",Te)}).then(function(){ne.getSystem().isConnected()&&k.getOpt(ne).map(function(xe){var Te=md({element:ye});Ur.replaceAt(xe,1,H.some(Te));var Ee=M.get(),Ve={x:0,y:0,w:ye.dom.naturalWidth,h:ye.dom.naturalHeight};M.set(Ve);var Be,nt=ab.inflate(Ve,-20,-20);S.set(nt),Ee.w===Ve.w&&Ee.h===Ve.h||(Be=ye,k.getOpt(xe).each(function(bt){var _t=ws(bt.element),wt=Ra(bt.element),Ln=Math.min(_t/Be.dom.naturalWidth,wt/Be.dom.naturalHeight);y.set(1<=Ln?1:Ln)})),Y(xe,ye)})})}return{dom:{tag:"div",attributes:{role:"presentation"}},components:[X.memContainer.asSpec(),F.memContainer.asSpec(),G.container],behaviours:cn([Mn.config({store:{mode:"manual",getValue:function(){return O.getBlobState()}}}),zn("image-tools-events",[Ot(Li.undo(),function(ne,le){var ce=O.undo();R(ne,ce).then(function(ye){P(ne),t(ne)})}),Ot(Li.redo(),function(ne,le){var ce=O.redo();R(ne,ce).then(function(ye){P(ne),t(ne)})}),Ot(Li.zoom(),function(ne,le){F.zoom(ne,le.event.direction)}),Ot(Li.back(),function(ne,le){var ce,ye=s(ce=ne);R(ce,ye).then(function(xe){P(ce)}),(0,le.event.swap)(),F.hideCrop()}),Ot(Li.apply(),function(ne,le){O.applyTempState(function(){s(ne),(0,le.event.swap)()})}),Ot(Li.transform(),function(ne,le){return i(ne,le.event.transform,ht)}),Ot(Li.tempTransform(),function(ne,le){var ce=le.event.transform;o(ne,O.getTempState().blob,ce,function(ye){return O.addTempState(ye)},ht)}),Ot(Li.transformApply(),function(ne,le){var ce=ne,ye=le.event.transform,xe=le.event.swap,Te=O.getBlobState().blob;o(ce,Te,ye,function(Ee){var Ve=O.addBlobState(Ee);return s(ce),Ve},xe)}),Ot(Li.swap(),function(ne,le){G.updateButtonUndoStates(ne,!1,!1);var ye=le.event.swap;le.event.transform.fold(function(){ye()},function(xe){i(ne,xe,ye)})})]),Kp()])}}function bS(u){return!yn(u,"items")}function tv(u,e){var t=u.label.map(function(l){return Im(l,e)}),n=[Kn.config({disabled:function(){return u.disabled||e.isDisabled()}}),us(),pr.config({mode:"execution",useEnter:!0!==u.multiline,useControlEnter:!0===u.multiline,execute:function(l){return gr(l,$1),H.some(!0)}}),zn("textfield-change",[Ot(va(),function(l,c){gn(l,uc,{name:u.name})}),Ot(wf(),function(l,c){gn(l,uc,{name:u.name})})]),xa.config({})],r=u.validation.map(function(l){return $f.config({getRoot:function(c){return ur(c.element)},invalidClass:"tox-invalid",validator:{validate:function(c){var f=Mn.getValue(c),h=l.validator(f);return Nh(!0===h?Sr.value(f):Sr.error(h))},validateOnLoad:l.validateOnLoad}})}).toArray(),o=u.placeholder.fold(ze({}),function(l){return{placeholder:e.translate(l)}}),i=u.inputMode.fold(ze({}),function(l){return{inputmode:l}}),s=_e(_e({},o),i);return Ed(t,zo.parts.field({tag:!0===u.multiline?"textarea":"input",inputAttributes:s,inputClasses:[u.classname],inputBehaviours:cn(pe([n,r])),selectOnFocus:!1,factory:Np}),(u.flex?["tox-form__group--stretched"]:[]).concat(u.maximized?["tox-form-group--maximize"]:[]),[Kn.config({disabled:function(){return u.disabled||e.isDisabled()},onDisabled:function(l){zo.getField(l).each(Kn.disable)},onEnabled:function(l){zo.getField(l).each(Kn.enable)}}),us()])}function __(u){var e=$n(null);return dl({readState:function(){return{timer:null!==e.get()?"set":"unset"}},setTimer:function(t){e.set(t)},cancel:function(){var t=e.get();null!==t&&t.cancel()}})}function z0(u,e,t){var n=Mn.getValue(t);Mn.setValue(e,n),Qx(e)}function w_(u,e){var t=u.element,n=Zl(t),r=t.dom;"number"!==Wi(t,"type")&&e(r,n)}function ub(u){return{type:"menuitem",value:u.url,text:u.title,meta:{attach:u.attach},onAction:ht}}function S_(u,e){return{type:"menuitem",value:e,text:u,meta:{attach:void 0},onAction:ht}}function YM(u,e){return t=u,Mt(xt(e,function(n){return n.type===t}),ub);var t}function Zx(u,e){var t=u.toLowerCase();return xt(e,function(n){return lo((void 0!==n.meta&&void 0!==n.meta.text?n.meta:n).text.toLowerCase(),t)||lo(n.value.toLowerCase(),t)})}function Iu(u){return function(e,t,n){return St(t,"name").fold(function(){return u(t,n)},function(r){return e.field(r,u(t,n))})}}function $x(u,e,t){var n=j(t,{shared:{interpreter:function(r){return SD(u,r,n)}}});return SD(u,e,n)}function C_(u,e,t){function n(){return Pe.fromDom(u.getContentAreaContainer())}function r(){return S||!t()}var o,i,s,l,c,f,h,p,y,b,S=ax(u);return{inlineDialog:(h=n,p=e,y=r,b={maxHeightFunction:vh()},function(){return y()?{type:"node",root:Uo(h()),node:H.from(h()),bubble:Qg(12,12,Y2),layouts:{onRtl:function(){return[lf]},onLtr:function(){return[Is]}},overrides:b}:{type:"hotspot",hotspot:p(),bubble:Qg(-12,12,Y2),layouts:{onRtl:function(){return[os]},onLtr:function(){return[wu]}},overrides:b}}),banner:(l=n,c=e,f=r,function(){return f()?{type:"node",root:Uo(l()),node:H.from(l()),layouts:{onRtl:function(){return[oc]},onLtr:function(){return[oc]}}}:{type:"hotspot",hotspot:c(),layouts:{onRtl:function(){return[au]},onLtr:function(){return[au]}}}}),cursor:(i=u,function(){return{type:"selection",root:s(),getSelection:function(){var M=i.selection.getRng();return H.some(ef.range(Pe.fromDom(M.startContainer),M.startOffset,Pe.fromDom(M.endContainer),M.endOffset))}}}),node:(o=s=function(){return Pe.fromDom(u.getBody())},function(M){return{type:"node",root:o(),node:M}})}}function Kx(u){return H.from(u.getParam("style_formats")).filter(Eo).map(function(e){var t,n,r=(t=u,n=$2(e),t.formatter?o(n.customFormats):t.on("init",function(){o(n.customFormats)}),n.formats);function o(i){wn(i,function(s){t.formatter.has(s.name)||t.formatter.register(s.name,s.format)})}return u.getParam("style_formats_merge",!1,"boolean")?Z2.concat(r):r}).getOr(Z2)}function F0(u,e,t){var n={type:"formatter",isSelected:e(u.format),getStylePreview:t(u.format)};return j(u,n)}function dk(u,e,t,n){var r=function(o){return Mt(o,function(i){var s,l,c,f,h,p=ri(i);if(Lr(i,"items")){var y=r(i.items);return j(j(i,{type:"submenu"}),{getStyleItems:ze(y)})}return Lr(i,"format")?F0(i,t,n):1===p.length&&fi(p,"title")?j(i,{type:"separator"}):(f={type:"formatter",format:c="custom-"+(l=lr((s=i).name)?s.name:jn(s.title)),isSelected:t(c),getStylePreview:n(c)},h=j(s,f),u.formatter.register(l,h),h)})};return r(e)}function fk(u){return function(e){return!(!Sn(t=e)||1!==t.nodeType||e.contentEditable!==u&&e.getAttribute("data-mce-contenteditable")!==u);var t}}function a(u,e,t,n,r){return{type:u,title:e,url:t,level:n,attach:r}}function d(u){return u.innerText||u.textContent}function g(u){return u&&"A"===u.nodeName&&void 0!==(u.id||u.name)&&W2(u)}function v(u){return u&&/^(H[1-6])$/.test(u.nodeName)}function x(u){return v(u)&&W2(u)}function C(u){var e,t=u.id||jn("h");return a("header",d(u),"#"+t,v(e=u)?parseInt(e.nodeName.substr(1),10):0,function(){u.id=t})}function A(u){var e=u.id||u.name;return a("anchor",d(u)||"#"+e,"#"+e,0,ht)}function E(u){return 0<AI(u.title).length}function z(u){return lr(u)&&/^https?/.test(u)}function L(u){return Zt(u)&&Cn(u,function(e){return!(Eo(t=e)&&t.length<=5&&je(t,z));var t}).isNone()}function U(){var u,e=Hy.getItem(kS);if(null===e)return{};try{u=JSON.parse(e)}catch(t){if(t instanceof SyntaxError)return console.log("Local storage "+kS+" was not valid JSON",t),{};throw t}return L(u)?u:(console.log("Local storage "+kS+" was not valid format",u),{})}function V(u){return St(U(),u).getOr([])}function Z(u,e){var t,n;z(u)&&(n=xt(St(t=U(),e).getOr([]),function(r){return r!==u}),t[e]=[u].concat(n).slice(0,5),function(r){if(!L(r))throw new Error("Bad format for history:\n"+JSON.stringify(r));Hy.setItem(kS,JSON.stringify(r))}(t))}function ee(u){return!!u}function oe(u){return Pt(Qu.makeMap(u,/[, ]/),ee)}function re(u){return H.from(u.getParam("file_picker_callback")).filter(xr)}function ie(u){return H.from(u).filter(lr).getOrUndefined()}function ue(u){return{getHistory:V,addToHistory:Z,getLinkInformation:function(){return!1===(e=u).getParam("typeahead_urls")?H.none():H.some({targets:CD(e.getBody()),anchorTop:ie(e.getParam("anchor_top","#top")),anchorBottom:ie(e.getParam("anchor_bottom","#bottom"))});var e},getValidationHandler:function(){return H.from(void 0===(t=(e=u).getParam("file_picker_validator_handler",void 0,"function"))?e.getParam("filepicker_validator_handler",void 0,"function"):t);var e,t},getUrlPicker:function(e){return t=c=u,n=f=e,o=H.some((r=t).getParam("file_picker_types")).filter(ee),i=H.some(r.getParam("file_browser_callback_types")).filter(ee),s=o.or(i).map(oe),l=re(r).fold(Er,function(h){return s.fold(dn,function(p){return 0<ri(p).length&&p})}),(Bi(l)?l?re(t):H.none():l[n]?re(t):H.none()).map(function(h){return function(p){return Em(function(y){var b=_e({filetype:f,fieldname:p.fieldname},H.from(p.meta).getOr({}));h.call(c,function(S,M){if(!lr(S))throw new Error("Expected value to be string");if(void 0!==M&&!Zt(M))throw new Error("Expected meta to be a object");y({value:S,meta:M})},p.value,b)})}});var t,n,r,o,i,s,l,c,f}}}function he(u){return(Vn(Gi(u,"position"),"fixed")?H.none():Jr(u)).orThunk(function(){var e=Pe.fromTag("span");return ur(u).bind(function(t){Hi(t,e);var n=Jr(e);return ja(e),n})})}function Ie(u){return he(u).map(Pc).getOrThunk(function(){return oi(0,0)})}function We(u,e){var t=u.element;vs(t,e.transitionClass),Ai(t,e.fadeOutClass),vs(t,e.fadeInClass),e.onShow(u)}function ve(u,e){var t=u.element;vs(t,e.transitionClass),Ai(t,e.fadeInClass),vs(t,e.fadeOutClass),e.onHide(u)}function Se(u,e,t){return je(u,function(n){switch(n){case"bottom":return e.bottom<=t.bottom;case"top":return e.y>=t.y}})}function Oe(u,e){return e.getInitialPos().map(function(t){return pn(t.bounds.x,t.bounds.y,ws(u),Ra(u))})}function Je(u,e,t){return t.getInitialPos().bind(function(n){switch(t.clearInitialPos(),n.position){case"static":return H.some(MD.static());case"absolute":var r=he(u).map(Ks).getOrThunk(function(){return Ks(Ga())});return H.some(MD.absolute(zc("absolute",St(n.style,"left").map(function(o){return e.x-r.x}),St(n.style,"top").map(function(o){return e.y-r.y}),St(n.style,"right").map(function(o){return r.right-e.right}),St(n.style,"bottom").map(function(o){return r.bottom-e.bottom}))));default:return H.none()}})}function gt(u,e,t){t.setDocked(!1),wn(["left","right","top","bottom","position"],function(n){return co(u.element,n)}),e.onUndocked(u)}function Ge(u,e,t,n){var r="fixed"===n.position;t.setDocked(r),mv(u.element,n),(r?e.onDocked:e.onUndocked)(u)}function Qe(u,e,t,n,r){void 0===r&&(r=!1),e.contextual.each(function(o){o.lazyContext(u).each(function(i){var s=i.y<n.bottom&&i.bottom>n.y;s!==t.isVisible()&&(t.setVisible(s),r&&!s?(ih(u.element,[o.fadeOutClass]),o.onHide(u)):(s?We:ve)(u,o))})})}function Ye(u,e,t){var n,r,o,i,s,l;t.isDocked()&&(r=e,l=(n=u).element,(o=t).setDocked(!1),Oe(s=n.element,i=o).bind(function(c){return Je(s,c,i)}).each(function(c){c.fold(function(){return gt(n,r,o)},function(f){return Ge(n,r,o,f)},ht)}),o.setVisible(!0),r.contextual.each(function(c){Xa(l,[c.fadeInClass,c.fadeOutClass,c.transitionClass]),c.onShow(n)}),MS(n,r,o))}function et(u,e){return fi(Kc.getModes(u),e)}function Ct(u){var e=u.element;ur(e).each(function(t){var n,r,o="padding-"+Kc.getModes(u)[0];Kc.isDocked(u)?(n=ws(t),Ar(e,"width",n+"px"),Ar(t,o,Ec(r=e)+(parseInt(Wa(r,"margin-top"),10)||0)+(parseInt(Wa(r,"margin-bottom"),10)||0)+"px")):(co(e,"width"),co(t,o))})}function en(u,e){e?(Ai(u,V0.fadeOutClass),ih(u,[V0.transitionClass,V0.fadeInClass])):(Ai(u,V0.fadeInClass),ih(u,[V0.fadeOutClass,V0.transitionClass]))}function sn(u,e){var t=Pe.fromDom(u.getContainer());e?(vs(t,DD),Ai(t,rA)):(vs(t,rA),Ai(t,DD))}function Tt(u,e){function t(l){i().each(function(c){return l(c.element)})}function n(l){u.inline||Ct(l),sn(u,Kc.isDocked(l)),l.getSystem().broadcastOn([wd()],{}),i().each(function(c){return c.getSystem().broadcastOn([wd()],{})})}var r,o=Zo(),i=e.getSink,s=u.inline?[]:[Ol.config({channels:((r={})[tT()]={onReceive:Ct},r)})];return me([zr.config({}),Kc.config({contextual:_e({lazyContext:function(l){var c=Ec(l.element),f=u.inline?u.getContentAreaContainer():u.getContainer(),h=Ks(Pe.fromDom(f)),p=h.height-c,y=h.y+(et(l,"top")?0:c);return H.some(pn(h.x,y,h.width,p))},onShow:function(){t(function(l){return en(l,!0)})},onShown:function(l){t(function(c){return Xa(c,[V0.transitionClass,V0.fadeInClass])}),o.get().each(function(c){var f,h=l.element,p=rt(f=c);xd(p).filter(function(y){return!Rt(f,y)}).filter(function(y){return Rt(y,Pe.fromDom(p.dom.body))||$t(h,y)}).each(function(){return _u(f)}),o.clear()})},onHide:function(l){var f=i;yc(l.element).orThunk(function(){return f().toOptional().bind(function(h){return yc(h.element)})}).fold(o.clear,o.set),t(function(h){return en(h,!1)})},onHidden:function(){t(function(l){return Xa(l,[V0.transitionClass])})}},V0),lazyViewport:function(l){var c=rl(),f=u.getParam("toolbar_sticky_offset",0,"number"),h=c.y+(et(l,"top")?f:0),p=c.height-(et(l,"bottom")?f:0);return pn(c.x,h,c.width,p)},modes:[e.header.getDockingMode()],onDocked:n,onUndocked:n})],s,!0)}function Dt(u){return wi("menubutton",II,u)}function xn(u,e){return e.getAnimationRoot.fold(function(){return u.element},function(t){return t(u)})}function bn(u){return u.dimension.property}function Jt(u,e){return u.dimension.getDimension(e)}function Xn(u,e){Xa(xn(u,e),[e.shrinkingClass,e.growingClass])}function Bt(u,e){Ai(u.element,e.openClass),vs(u.element,e.closedClass),Ar(u.element,bn(e),"0px"),Qo(u.element)}function Tn(u,e){Ai(u.element,e.closedClass),vs(u.element,e.openClass),co(u.element,bn(e))}function tn(u,e,t,n){t.setCollapsed(),Ar(u.element,bn(e),Jt(e,u.element)),Qo(u.element),Xn(u,e),Bt(u,e),e.onStartShrink(u),e.onShrunk(u)}function An(u,e,t){var n=Jt(e,u.element);("0px"===n?tn:function(r,o,i,s){var l=s.getOrThunk(function(){return Jt(o,r.element)});i.setCollapsed(),Ar(r.element,bn(o),l),Qo(r.element);var c=xn(r,o);Ai(c,o.growingClass),vs(c,o.shrinkingClass),Bt(r,o),o.onStartShrink(r)})(u,e,t,H.some(n))}function Hn(u,e,t){var n=xn(u,e),r=La(n,e.shrinkingClass),o=Jt(e,u.element);Tn(u,e);var i=Jt(e,u.element);(r?function(){Ar(u.element,bn(e),o),Qo(u.element)}:function(){Bt(u,e)})(),Ai(n,e.shrinkingClass),vs(n,e.growingClass),Tn(u,e),Ar(u.element,bn(e),i),t.setExpanded(),e.onStartGrow(u)}function mo(u,e,t){return!0===La(xn(u,e),e.growingClass)}function Ae(u,e,t){return!0===La(xn(u,e),e.shrinkingClass)}function Ze(u){return"<alloy.field."+u+">"}function It(u){return{element:function(){return u.element.dom}}}function Vt(u){return ho.getCurrent(u).bind(function(e){return Dc.isGrowing(e)||Dc.hasGrown(e)?ho.getCurrent(e).bind(function(t){return Ao(H0.getSlotNames(t),function(n){return H0.isShowing(t,n)})}):H.none()})}function fn(u){var e=Pe.fromHtml(u),t=ko(e),n=Jo(void 0!==e.dom.attributes?e.dom.attributes:[],function(i,s){var l;return"class"===s.name?i:_e(_e({},i),((l={})[s.name]=s.value,l))},{}),r=Array.prototype.slice.call(e.dom.classList,0),o=0===t.length?{}:{innerHtml:rh(e)};return _e({tag:mt(e),classes:r,attributes:n},o)}function nr(u){return ho.getCurrent(u).each(function(e){return _u(e.element)})}function bi(u,e,t){return{within:u,extra:e,withinWidth:t}}function di(u,e,t){var n,r=(n=function(s,l){var c=t(s);return H.some({element:s,start:l,finish:l+c,width:c})},Jo(u,function(s,l){return n(l,s.len).fold(ze(s),function(c){return{len:c.finish,list:s.list.concat([c])}})},{len:0,list:[]}).list),o=xt(r,function(s){return s.finish<=e}),i=on(o,function(s,l){return s+l.width},0);return{within:o,extra:r.slice(o.length),withinWidth:i}}function ir(u){return Mt(u,function(e){return e.element})}function ti(u,e){var t=Mt(e,function(n){return Qr(n)});Gm.setGroups(u,t)}function Ii(u,e,t){var n,r,o,i,s,l,c,f,h,p,y,b,S,M,k,O,P,R,F,G,X=e.builtGroups.get();0!==X.length&&(n=da(u,e,"primary"),r=_a.getCoupled(u,"overflowGroup"),Ar(n.element,"visibility","hidden"),i=ut(o=X.concat([r]),function(Y){return yc(Y.element).bind(function(Q){return Y.getSystem().getByDom(Q).toOptional()})}),t([]),ti(n,o),s=ws(n.element),c=s,f=e.builtGroups.get(),p=r,R=(P=(0===(y=di(f,c,h=function(Y){return ws(Y.element)})).extra.length?H.some(y):H.none()).getOrThunk(function(){return di(f,c-h(p),h)})).within,G=P.withinWidth,0===(l=1===(F=P.extra).length&&F[0].width<=h(p)?(O=G,bi(ir(R.concat(F)),[],O)):1<=F.length?(S=F,M=p,k=G,bi(ir(R).concat([M]),ir(S),k)):(b=G,bi(ir(R),[],b))).extra.length?(Ur.remove(n,r),t([])):(ti(n,l.within),t(l.extra)),co(n.element,"visibility"),Qo(n.element),i.each(zr.focus))}function fu(u,e){var t=_a.getCoupled(u,"toolbarSandbox");Kr.isOpen(t)?Kr.close(t):Kr.open(t,e.toolbar())}function wa(u,e,t,n){var r=t.getBounds.map(function(i){return i()}),o=t.lazySink(u).getOrDie();Du.positionWithinBounds(o,e,{anchor:{type:"hotspot",hotspot:u,layouts:n,overrides:{maxWidthFunction:iT()}}},r)}function mf(u,e,t,n,r){Gm.setGroups(e,r),wa(u,e,t,n),Oo.on(u)}function ls(u){return Mt(u,function(e){return Qr(e)})}function el(u,e,t){Ii(u,t,function(n){t.overflowGroups.set(n),e.getOpt(u).each(function(r){t1.setGroups(r,ls(n))})})}function Vh(u,e){fo(u,e,"overflow-button").bind(function(){return fo(u,e,"overflow")}).each(function(t){xD(u,e),Dc.toggleGrow(t)})}function lb(u){var e=u.title.fold(function(){return{}},function(t){return{attributes:{title:t}}});return{dom:_e({tag:"div",classes:["tox-toolbar__group"]},e),components:[DS.parts.items({})],items:u.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:cn([xa.config({}),zr.config({})])}}function Qf(u){return DS.sketch(lb(u))}function Hh(u,e){var t=Mi(function(n){var r=Mt(u.initGroups,Qf);Gm.setGroups(n,r)});return cn([dx(u.providers.isDisabled),us(),pr.config({mode:e,onEscape:u.onEscape,selector:".tox-toolbar__group"}),zn("toolbar-events",[t])])}function eh(u){var e=u.cyclicKeying?"cyclic":"acyclic";return{uid:u.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":lb({title:H.none(),items:[]}),"overflow-button":$p({name:"more",icon:H.some("more-drawer"),disabled:!1,tooltip:H.some("More..."),primary:!1,borderless:!1},H.none(),u.providers)},splitToolbarBehaviours:Hh(u,e)}}function xS(u){var e=u.cyclicKeying?"cyclic":"acyclic";return Gm.sketch({uid:u.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(u.type===ai.scrolling?["tox-toolbar--scrolling"]:[])},components:[Gm.parts.groups({})],toolbarBehaviours:Hh(u,e)})}function _S(u){return"string"==typeof u?u.split(" "):u}function k_(u,e){var t=_e(_e({},cb),e.menus),n=0<ri(e.menus).length,r=xt(_S(void 0===e.menubar||!0===e.menubar?"file edit view insert format tools table help":!1===e.menubar?"":e.menubar),function(o){var i=yn(cb,o);return n?i||St(e.menus,o).exists(function(s){return yn(s,"items")}):i});return xt(Mt(r,function(o){var i=t[o],s={title:i.title,items:_S(i.items)},l=e,c=u.getParam("removed_menuitems","").split(/[ ,]/);return{text:s.title,getItems:function(){return Dr(s.items,function(f){var h=f.toLowerCase();return 0===h.trim().length||Nn(c,function(p){return p===h})?[]:"separator"===h||"|"===h?[{type:"separator"}]:l.menuItems[h]?[l.menuItems[h]]:[]})}}}),function(o){return 0<o.getItems().length&&Nn(o.getItems(),function(i){return"separator"!==i.type})})}function wS(u){function e(){u._skinLoaded=!0,u.fire("SkinLoaded")}return function(){u.initialized?e():u.on("init",e)}}function SS(u,e,t){return new km(function(n,r){t.load(e,n,r),u.on("remove",function(){return t.unload(e)})})}function hk(u,e){var t,n,r,o,i,l,c,f,h=(r=(t=e).getParam("skin"),o=t.getParam("skin_url"),!1!==r&&(n=r||"oxide",o=o?t.documentBaseURI.toAbsolute(o):cM.baseURL+"/skins/ui/"+n),o);h&&e.contentCSS.push(h+(u?"/content.inline":"/content")+".min.css"),!1===e.getParam("skin")==0&&lr(h)?km.all([SS(e,h+"/skin.min.css",e.ui.styleSheetLoader),(l=e,c=h,f=Pe.fromDom(l.getElement()),ts(f).isSome()?SS(l,c+"/skin.shadowdom.min.css",Xf.DOM.styleSheetLoader):km.resolve())]).then(wS(e),(i=e,function(){return i.fire("SkinLoadError",{message:"Skin could not be loaded"})})):wS(e)()}function gk(u,e){return function(t){function n(){t.setActive(u.formatter.match(e));var o=u.formatter.formatChanged(e,t.setActive);r.set(o)}var r=so();return u.initialized?n():u.once("init",n),function(){u.off("init",n),r.clear()}}}function $M(u,e,t){return function(n){function r(){return t(n)}function o(){t(n),u.on(e,r)}return u.initialized?o():u.once("init",o),function(){u.off("init",o),u.off(e,r)}}}function bD(u){return function(e){return function(){u.undoManager.transact(function(){u.focus(),u.execCommand("mceToggleFormat",!1,e.format)})}}}function Bg(u,e){return function(){return u.execCommand(e)}}function M_(u,e,t){var n,r,o,i=t.dataset;return{items:(n=e,r=t,o=function(f,h,p){var y="formatter"===f.type&&r.isInvalid(f);return 0===h?y?[]:l(f,h,!1,p).toArray():l(f,h,y,p).toArray()},{validateItems:c,getFetch:function(f,h){return function(p,y){y(hf(c(h()),qf.CLOSE_ON_EXECUTE,f,!1))}}}),getStyleItems:"basic"===i.type?function(){return Mt(i.data,function(f){return F0(f,t.isSelectedFor,t.getPreviewFor)})}:i.getData};function l(f,h,p,y){var b=n.shared.providers.translate(f.title);if("separator"===f.type)return H.some({type:"separator",text:b});if("submenu"!==f.type)return H.some(_e({type:"togglemenuitem",text:b,icon:f.icon,active:f.isSelected(y),disabled:p,onAction:r.onAction(f)},f.getStylePreview().fold(function(){return{}},function(M){return{meta:{style:M}}})));var S=Dr(f.getStyleItems(),function(M){return o(M,h,y)});return 0===h&&S.length<=0?H.none():H.some({type:"nestedmenuitem",text:b,disabled:S.length<=0,getSubmenuItems:function(){return Dr(f.getStyleItems(),function(M){return o(M,h,y)})}})}function c(f){var h=r.getCurrentValue(),p=r.shouldHide?0:1;return Dr(f,function(y){return o(y,p,h)})}}function CS(u,e,t){var n=M_(0,e,t),r=n.items,o=n.getStyleItems,i=$M(u,"NodeChange",function(s){var l=s.getComponent();t.updateText(l)});return k0({text:t.icon.isSome()?H.none():t.text,icon:t.icon,tooltip:H.from(t.tooltip),role:H.none(),fetch:r.getFetch(e,o),onSetup:i,getApi:function(s){return{getComponent:ze(s)}},columns:1,presets:"normal",classes:t.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",e.shared)}function W2(u){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return K2(e)}return!1}(u)&&!J2(u)}function _I(u,e){function t(f){return d1(u)}function n(f,h){return function(p,y){return fo(p,u,y).map(function(b){return f(b,y)}).getOr(h)}}function r(f,h){return"true"!==Wi(f.element,"aria-hidden")}var o,i=n(r,!1),s=n(function(f,h){var p;r(f)&&(Ar(p=f.element,"display","none"),rr(p,"aria-hidden","true"),gn(f,hd(),{name:h,visible:!1}))}),l=(o=s,function(f,h){wn(h,function(p){return o(f,p)})}),c=n(function(f,h){var p;r(f)||(co(p=f.element,"display"),Mo(p,"aria-hidden"),gn(f,hd(),{name:h,visible:!0}))});return{uid:u.uid,dom:u.dom,components:e,behaviours:um(u.slotBehaviours),apis:{getSlotNames:t,getSlot:function(f,h){return fo(f,u,h)},isShowing:i,hideSlot:s,hideAllSlots:function(f){return l(f,t())},showSlot:c}}}function xD(u,e){fo(u,e,"overflow").each(function(t){Ii(u,e,function(n){var r=Mt(n,function(o){return Qr(o)});Gm.setGroups(t,r)}),fo(u,e,"overflow-button").each(function(n){Dc.hasGrown(t)&&Oo.on(n)}),Dc.refresh(t)})}var mk,Jx,KM,_D="data-value",wD=function(u,e,t,n){return Mt(t,function(r){return bS(r)?{type:"togglemenuitem",text:r.text,value:r.value,active:r.value===n,onAction:function(){Mn.setValue(u,r.value),gn(u,uc,{name:e}),zr.focus(u)}}:{type:"nestedmenuitem",text:r.text,getSubmenuItems:function(){return wD(u,e,r.items,n)}}})},G2=function(u,e){return ut(u,function(t){return bS(t)?si(t.value===e,t):G2(t.items,e)})},wI=Mu({name:"HtmlSelect",configFields:[Et("options"),as("selectBehaviours",[zr,Mn]),qe("selectClasses",[]),qe("selectAttributes",{}),bo("data")],factory:function(u,e){var t=Mt(u.options,function(r){return{dom:{tag:"option",value:r.value,innerHtml:r.text}}}),n=u.data.map(function(r){return On("initialValue",r)}).getOr({});return{uid:u.uid,dom:{tag:"select",classes:u.selectClasses,attributes:u.selectAttributes},components:t,behaviours:bs(u.selectBehaviours,[zr.config({}),Mn.config({store:_e({mode:"manual",getValue:function(r){return Zl(r.element)},setValue:function(r,o){Ao(u.options,function(i){return i.value===o}).isSome()&&cv(r.element,o)}},n)})])}}}),SI=Object.freeze({__proto__:null,events:function(u,e){var t=u.stream.streams.setup(u,e);return Ro([Ot(u.event,t),Jl(function(){return e.cancel()})].concat(u.cancelEvent.map(function(n){return[Ot(n,function(){return e.cancel()})]}).getOr([])))}}),CI=Object.freeze({__proto__:null,throttle:__,init:function(u){return u.stream.streams.state(u)}}),pk=Ia({fields:[Ns("stream",ps("mode",{throttle:[Et("delay"),qe("stopEvent",!0),wo("streams",{setup:function(u,e){var t=u.stream,n=x1(u.onStream,t.delay);return e.setTimer(n),function(r,o){n.throttle(r,o),t.stopEvent&&o.stop()}},state:__})]})),qe("event","input"),bo("cancelEvent"),ci("onStream")],name:"streaming",active:SI,state:CI}),Qx=function(u){w_(u,function(e,t){return e.setSelectionRange(t.length,t.length)})},JM=ze("alloy.typeahead.itemexecute"),j2=ze([bo("lazySink"),Et("fetch"),qe("minChars",5),qe("responseTime",1e3),oo("onOpen"),qe("getHotspot",H.some),qe("getAnchorOverrides",ze({})),qe("layouts",H.none()),qe("eventOrder",{}),al("model",{},[qe("getDisplayText",function(u){return void 0!==u.meta&&void 0!==u.meta.text?u.meta.text:u.value}),qe("selectsOver",!0),qe("populateFromBrowse",!0)]),oo("onSetValue"),Vs("onExecute"),oo("onItemExecute"),qe("inputClasses",[]),qe("inputAttributes",{}),qe("inputStyles",{}),qe("matchWidth",!0),qe("useMinWidth",!1),qe("dismissOnBlur",!0),Fs(["openClass"]),bo("initialData"),as("typeaheadBehaviours",[zr,Mn,pk,pr,Oo,_a]),vn("previewing",function(){return $n(!0)})].concat(yl()).concat(Gw())),U2=ze([Md({schema:[Gr()],name:"menu",overrides:function(u){return{fakeFocus:!0,onHighlight:function(e,t){u.previewing.get()?e.getSystem().getByUid(u.uid).each(function(n){(function(r,o,i){if(r.selectsOver){var s=Mn.getValue(o),l=r.getDisplayText(s),c=Mn.getValue(i);return 0===r.getDisplayText(c).indexOf(l)?H.some(function(){var f;z0(0,o,i),f=l.length,w_(o,function(h,p){return h.setSelectionRange(f,p.length)})}):H.none()}return H.none()})(u.model,n,t).fold(function(){return go.dehighlight(e,t)},function(r){return r()})}):e.getSystem().getByUid(u.uid).each(function(n){u.model.populateFromBrowse&&z0(0,n,t)}),u.previewing.set(!1)},onExecute:function(e,t){return e.getSystem().getByUid(u.uid).toOptional().map(function(n){return gn(n,JM(),{item:t}),!0})},onHover:function(e,t){u.previewing.set(!1),e.getSystem().getByUid(u.uid).each(function(n){u.model.populateFromBrowse&&z0(0,n,t)})}}}})]),kI=hi({name:"Typeahead",configFields:j2(),partFields:U2(),factory:function(u,e,t,n){function r(l,c,f){u.previewing.set(!1);var h=_a.getCoupled(l,"sandbox");Kr.isOpen(h)?ho.getCurrent(h).each(function(p){go.getHighlighted(p).fold(function(){f(p)},function(){Io(h,p.element,"keydown",c)})}):p0(u,o(l),l,h,n,function(p){ho.getCurrent(p).each(f)},kc.HighlightFirst).get(ht)}function o(l){return function(c){return c.map(function(f){var h=Dr(hn(f.menus),function(p){return xt(p.items,function(y){return"item"===y.type})});return Mn.getState(l).update(Mt(h,function(p){return p.data})),f})}}var i=h0(u),s=[zr.config({}),Mn.config({onSetValue:u.onSetValue,store:_e({mode:"dataset",getDataKey:function(l){return Zl(l.element)},getFallbackEntry:function(l){return{value:l,meta:{}}},setValue:function(l,c){cv(l.element,u.model.getDisplayText(c))}},u.initialData.map(function(l){return On("initialValue",l)}).getOr({}))}),pk.config({stream:{mode:"throttle",delay:u.responseTime,stopEvent:!1},onStream:function(l,c){var f,h=_a.getCoupled(l,"sandbox");zr.isFocused(l)&&Zl(l.element).length>=u.minChars&&(f=ho.getCurrent(h).bind(function(p){return go.getHighlighted(p).map(Mn.getValue)}),u.previewing.set(!0),p0(u,o(l),l,h,n,function(p){ho.getCurrent(h).each(function(y){f.fold(function(){u.model.selectsOver&&go.highlightFirst(y)},function(b){go.highlightBy(y,function(S){return Mn.getValue(S).value===b.value}),go.getHighlighted(y).orThunk(function(){return go.highlightFirst(y),H.none()})})})},kc.HighlightFirst).get(ht))},cancelEvent:Qh()}),pr.config({mode:"special",onDown:function(l,c){return r(l,c,go.highlightFirst),H.some(!0)},onEscape:function(l){var c=_a.getCoupled(l,"sandbox");return Kr.isOpen(c)?(Kr.close(c),H.some(!0)):H.none()},onUp:function(l,c){return r(l,c,go.highlightLast),H.some(!0)},onEnter:function(l){var c=_a.getCoupled(l,"sandbox"),f=Kr.isOpen(c);if(f&&!u.previewing.get())return ho.getCurrent(c).bind(function(p){return go.getHighlighted(p)}).map(function(p){return gn(l,JM(),{item:p}),!0});var h=Mn.getValue(l);return gr(l,Qh()),u.onExecute(c,l,h),f&&Kr.close(c),H.some(!0)}}),Oo.config({toggleClass:u.markers.openClass,aria:{mode:"expanded"}}),_a.config({others:{sandbox:function(l){return Kf(u,l,{onOpen:function(){return Oo.on(l)},onClose:function(){return Oo.off(l)}})}}}),zn("typeaheadevents",[nu(function(l){v0(u,o(l),l,n,ht,kc.HighlightFirst).get(ht)}),Ot(JM(),function(l,c){var f=_a.getCoupled(l,"sandbox");z0(0,l,c.event.item),gr(l,Qh()),u.onItemExecute(l,f,c.event.item,Mn.getValue(l)),Kr.close(f),Qx(l)})].concat(u.dismissOnBlur?[Ot(Hu(),function(l){var c=_a.getCoupled(l,"sandbox");yc(c.element).isNone()&&Kr.close(c)})]:[]))];return{uid:u.uid,dom:bx(j(u,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:_e(_e({},i),bs(u.typeaheadBehaviours,s)),eventOrder:u.eventOrder}}}),T_=function(u){return _e(_e({},u),{toCached:function(){return T_(u.toCached())},bindFuture:function(e){return T_(u.bind(function(t){return t.fold(function(n){return Nh(Sr.error(n))},function(n){return e(n)})}))},bindResult:function(e){return T_(u.map(function(t){return t.bind(e)}))},mapResult:function(e){return T_(u.map(function(t){return t.map(e)}))},mapError:function(e){return T_(u.map(function(t){return t.mapError(e)}))},foldResult:function(e,t){return u.map(function(n){return n.fold(e,t)})},withTimeout:function(e,t){return T_(Em(function(n){var r=!1,o=setTimeout(function(){r=!0,n(Sr.error(t()))},e);u.get(function(i){r||(clearTimeout(o),n(i))})}))}})},TI={type:"separator"},q2=jn("aria-invalid"),X2={bar:Iu(function(u,e){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Mt(u.items,e.shared.interpreter)}}),collection:Iu(function(u,e){return o=e.shared.providers,l=(r=u).label.map(function(h){return Im(h,o)}),c=t(function(h,p,y,b){p.stop(),o.isDisabled()||gn(h,Og,{name:r.name,value:b})}),f=[Ot(Vu(),t(function(h,p,y){_u(y)})),Ot(eu(),c),Ot(tu(),c),Ot(yu(),t(function(h,p,y){zs(h.element,"."+n0).each(function(b){Ai(b,n0)}),vs(y,n0)})),Ot(Ug(),t(function(h){zs(h.element,"."+n0).each(function(p){Ai(p,n0)})})),nu(t(function(h,p,y,b){gn(h,Og,{name:r.name,value:b})}))],Ed(l,zo.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==r.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Ut},behaviours:cn([Kn.config({disabled:o.isDisabled,onDisabled:function(h){n(h,function(p){vs(p,"tox-collection__item--state-disabled"),rr(p,"aria-disabled",!0)})},onEnabled:function(h){n(h,function(p){Ai(p,"tox-collection__item--state-disabled"),Mo(p,"aria-disabled")})}}),us(),Ur.config({}),Mn.config({store:{mode:"memory",initialValue:[]},onSetValue:function(h,p){var y=h,b=Mt(p,function(M){var k=Td.translate(M.text),O=1===r.columns?'<div class="tox-collection__item-label">'+k+"</div>":"",P='<div class="tox-collection__item-icon">'+M.icon+"</div>",R={_:" "," - ":" ","-":" "},F=k.replace(/\_| \- |\-/g,function(G){return R[G]});return'<div class="tox-collection__item'+(o.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+sc.encodeAllRaw(M.value)+'" title="'+F+'" aria-label="'+F+'">'+P+O+"</div>"}),S=Mt("auto"!==r.columns&&1<r.columns?rn(b,r.columns):[b],function(M){return'<div class="tox-collection__group">'+M.join("")+"</div>"});Yh(y.element,S.join("")),"auto"===r.columns&&Jb(h,5,"tox-collection__item").each(function(M){pr.setGridSize(h,M.numRows,M.numColumns)}),gr(h,PC)}}),xa.config({}),pr.config(1===(s=r.columns)?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===s?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:"."+nx}}),zn("collection-events",f)]),eventOrder:((i={})[Wu()]=["disabling","alloy.base.behaviour","collection-events"],i)}),["tox-form__group--collection"],[]);function t(h){return function(p,y){vc(y.event.target,"[data-collection-item-value]").each(function(b){h(p,y,b,Wi(b,"data-collection-item-value"))})}}function n(h,p){return Mt(su(h.element,".tox-collection__item"),p)}var r,o,i,s,l,c,f}),alertbanner:Iu(function(u,e){return du.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+(t=u).level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[pl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:Uk(t.icon,(n=e.shared.providers).icons),attributes:{title:n.translate(t.iconTooltip)}},action:function(r){gn(r,Og,{name:"alert-banner",value:t.url})},buttonBehaviours:cn([ew()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:n.translate(t.text)}}]});var t,n}),input:Iu(function(u,e){return n=e.shared.providers,tv({name:(t=u).name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:t.disabled,classname:"tox-textfield",validation:H.none(),maximized:t.maximized},n);var t,n}),textarea:Iu(function(u,e){return n=e.shared.providers,tv({name:(t=u).name,multiline:!0,label:t.label,inputMode:H.none(),placeholder:t.placeholder,flex:!0,disabled:t.disabled,classname:"tox-textarea",validation:H.none(),maximized:t.maximized},n);var t,n}),label:Iu(function(u,e){return r={dom:{tag:"label",innerHtml:(n=e.shared).providers.translate((t=u).label),classes:["tox-label"]}},o=Mt(t.items,n.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[r].concat(o),behaviours:cn([Kp(),Ur.config({}),IM(H.none()),pr.config({mode:"acyclic"})])};var t,n,r,o}),iframe:(mk=function(u,e){return t=u,n=e.shared.providers,i=pD&&t.sandboxed,s=_e(_e({},t.label.map(function(c){return{title:c}}).getOr({})),i?{sandbox:"allow-scripts allow-same-origin"}:{}),r=i,o=$n(""),l={getValue:function(c){return o.get()},setValue:function(c,f){var h;r?rr(c.element,"srcdoc",f):(rr(c.element,"src","javascript:''"),(h=c.element.dom.contentWindow.document).open(),h.write(f),h.close()),o.set(f)}},Ed(t.label.map(function(c){return Im(c,n)}),zo.parts.field({factory:{sketch:function(c){return AM({uid:c.uid,dom:{tag:"iframe",attributes:s},behaviours:cn([xa.config({}),zr.config({}),I0(H.none(),l.getValue,l.setValue)])})}}}),["tox-form__group--stretched"],[]);var t,n,r,o,i,s,l},function(u,e,t){var n=j(e,{source:"dynamic"});return Iu(mk)(u,n,t)}),button:Iu(function(u,e){return n=e.shared.providers,r=XC((t=u).name,"custom"),Ed(H.none(),zo.parts.field(_e({factory:pl},qC(t,H.some(r),n,[O0(""),Kp()]))),[],[]);var t,n,r}),checkbox:Iu(function(u,e){return r=u,o=e.shared.providers,i=Mn.config({store:{mode:"manual",getValue:function(f){return f.element.dom.checked},setValue:function(f,h){f.element.dom.checked=h}}}),s=zo.parts.field({factory:{sketch:Ut},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:cn([Kp(),Kn.config({disabled:function(){return r.disabled||o.isDisabled()}}),xa.config({}),zr.config({}),i,pr.config({mode:"special",onEnter:t,onSpace:t,stopSpaceKeyup:!0}),zn("checkbox-events",[Ot(ta(),function(f,h){gn(f,uc,{name:r.name})})])])}),l=zo.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:o.translate(r.label)},behaviours:cn([v_.config({})])}),c=Bo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[n("checked"),n("unchecked")]}),zo.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[s,c.asSpec(),l],fieldBehaviours:cn([Kn.config({disabled:function(){return r.disabled||o.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(f){zo.getField(f).each(Kn.disable)},onEnabled:function(f){zo.getField(f).each(Kn.enable)}}),us()])});function t(f){return f.element.dom.click(),H.some(!0)}function n(f){return xg("checked"===f?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+f]},o.icons)}var r,o,i,s,l,c}),colorinput:Iu(function(u,e){return n=u,o=e.colorinput,l=zo.parts.field({factory:Np,inputClasses:["tox-textfield"],onSetValue:function(h){return $f.run(h).get(ht)},inputBehaviours:cn([Kn.config({disabled:(r=e.shared).providers.isDisabled}),us(),xa.config({}),$f.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(h){return ur(h.element)},notify:{onValid:function(h){var p=Mn.getValue(h);gn(h,uS,{color:p})}},validator:{validateOnLoad:!1,validate:function(h){var p=Mn.getValue(h);if(0===p.length)return Nh(Sr.value(!0));var y=Pe.fromTag("span");Ar(y,"background-color",p);var b=Gi(y,"background-color").fold(function(){return Sr.error("blah")},function(S){return Sr.value(p)});return Nh(b)}}})]),selectOnFocus:!1}),c=n.label.map(function(h){return Im(h,r.providers)}),f=Bo((i={dom:{tag:"span",attributes:{"aria-label":r.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[wu,os,au]},onLtr:function(){return[os,wu,au]}},components:[],fetch:CC(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:function(h,p){f.getOpt(h).each(function(y){"custom"===p?o.colorPicker(function(b){b.fold(function(){return gr(y,Fx)},function(S){t(y,S),Ph(S)})},"#ffffff"):t(y,"remove"===p?"":p)})}},gf.sketch({dom:i.dom,components:i.components,toggleClass:"mce-active",dropdownBehaviours:cn([Dm((s=r).providers.isDisabled),us(),v_.config({}),xa.config({})]),layouts:i.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:function(h){return Em(function(p){return i.fetch(p)}).map(function(p){return H.from(Nw(j(Am(jn("menu-value"),p,function(y){i.onItemAction(h,y)},i.columns,i.presets,qf.CLOSE_ON_EXECUTE,Er,s.providers),{movement:Dg(i.columns,i.presets)})))})},parts:{menu:T1(0,0,i.presets)}}))),zo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:c.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[l,f.asSpec()]}]),fieldBehaviours:cn([zn("form-field-events",[Ot(uS,function(h,p){f.getOpt(h).each(function(y){Ar(y.element,"background-color",p.event.color)}),gn(h,uc,{name:n.name})}),Ot(JC,function(h,p){zo.getField(h).each(function(y){Mn.setValue(y,p.event.value),ho.getCurrent(h).each(zr.focus)})}),Ot(Fx,function(h,p){zo.getField(h).each(function(y){ho.getCurrent(h).each(zr.focus)})})])])});function t(h,p){gn(h,JC,{value:p})}var n,r,o,i,s,l,c,f}),colorpicker:Iu(function(u){var e=Bo(function(u,e){return Mu({name:"ColourPicker",configFields:[Et("dom"),qe("onValidHex",ht),qe("onInvalidHex",ht)],factory:function(t){function n(G,X,Y){P.getOpt(G).each(function(Q){M.setHue(Q,Y)})}function r(G,X){R.getOpt(G).each(function(Y){S.updateHex(Y,X)})}function o(G,X,Y,Q){var ne=Y,le=Op(X);k.paletteRgba.set(le),k.paletteHue.set(ne),wn(Q,function(ce){ce(G,X,Y)})}var i,s,l,c,f,h,p,y,b,S=function(u,e,t,n){function r(l,c,f,h,p){var y,b,S=u(rb+"range"),M=[zo.parts.label({dom:{tag:"label",innerHtml:f,attributes:{"aria-label":h}}}),zo.parts.field({data:p,factory:Np,inputAttributes:_e({type:"text"},"hex"===c?{"aria-live":"polite"}:{}),inputClasses:[e("textfield")],inputBehaviours:cn([(y=c,b=l,$f.config({invalidClass:e("invalid"),notify:{onValidate:function(O){gn(O,gS,{type:y})},onValid:function(O){gn(O,hS,{type:y,value:Mn.getValue(O)})},onInvalid:function(O){gn(O,Hm,{type:y,value:Mn.getValue(O)})}},validator:{validate:function(O){var P=Mn.getValue(O),R=b(P)?Sr.value(!0):Sr.error(u("aria.input.invalid"));return Nh(R)},validateOnLoad:!1}})),xa.config({})]),onSetValue:function(O){$f.isInvalid(O)&&$f.run(O).get(ht)}})],k="hex"!==c?[zo.parts["aria-descriptor"]({text:S})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:M.concat(k)}}function o(l,c){Mn.setValue(l,{red:c.red,green:c.green,blue:c.blue})}function i(l,c){s.getOpt(l).each(function(f){Ar(f.element,"background-color","#"+c.value)})}var s=Bo({dom:{tag:"div",classes:[e("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}});return Mu({factory:function(){function l(P){return b[P].get()}function c(P,R){b[P].set(R)}function f(P,R){var F=R.event;"hex"!==F.type?c(F.type,H.none()):n(P)}function h(P,R){var F,G,Y,Q=R.event;"hex"===Q.type?function(ne,le){t(ne);var ce=gM(le);c("hex",H.some(le));var ye=Op(ce);o(ne,ye),y(ye),gn(ne,Rg,{hex:ce}),i(ne,ce)}(P,Q.value):(F=P,G=Q.type,Y=parseInt(Q.value,10),c(G,H.some(Y)),l("red").bind(function(ne){return l("green").bind(function(le){return l("blue").map(function(ce){return ac(ne,le,ce,1)})})}).each(function(ne){var le,ce,ye=(le=F,ce=Id(ne),zh.getField(le,"hex").each(function(xe){zr.isFocused(xe)||Mn.setValue(le,{hex:ce.value})}),ce);gn(F,Rg,{hex:ye}),i(F,ye)}))}function p(P){return{label:u(rb+P+".label"),description:u(rb+P+".description")}}function y(P){var F=P.green,G=P.blue;c("red",H.some(P.red)),c("green",H.some(F)),c("blue",H.some(G))}var b={red:$n(H.some(255)),green:$n(H.some(255)),blue:$n(H.some(255)),hex:$n(H.some("ffffff"))},S=p("red"),M=p("green"),k=p("blue"),O=p("hex");return j(zh.sketch(function(P){return{dom:{tag:"form",classes:[e("rgb-form")],attributes:{"aria-label":u("aria.color.picker")}},components:[P.field("red",zo.sketch(r(lx,"red",S.label,S.description,255))),P.field("green",zo.sketch(r(lx,"green",M.label,M.description,255))),P.field("blue",zo.sketch(r(lx,"blue",k.label,k.description,255))),P.field("hex",zo.sketch(r(mM,"hex",O.label,O.description,"ffffff"))),s.asSpec()],formBehaviours:cn([$f.config({invalidClass:e("form-invalid")}),zn("rgb-form-events",[Ot(hS,h),Ot(Hm,f),Ot(gS,f)])])}}),{apis:{updateHex:function(P,R){var F;Mn.setValue(P,{hex:R.value}),o(P,F=Op(R)),y(F),i(P,R)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(l,c,f){l.updateHex(c,f)}},extraApis:{}})}(u,e,t.onValidHex,t.onInvalidHex),M=(y=Fa.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[(p=e)("sv-palette-spectrum")]}}),b=Fa.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[p("sv-palette-thumb")],innerHtml:"<div class="+p("sv-palette-inner-thumb")+' role="presentation"></div>'}}),Mu({factory:function(G){var X=ze({x:0,y:0}),Y=cn([ho.config({find:H.some}),zr.config({})]);return Fa.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[p("sv-palette")]},model:{mode:"xy",getInitialValue:X},rounded:!1,components:[y,b],onChange:function(Q,ne,le){gn(Q,Ux,{value:le})},onInit:function(Q,ne,le,ce){F(le.element.dom,j1(d0))},sliderBehaviours:Y})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(G,X,Y){var Q=Y;F(X.components()[0].element.dom,j1(H1(u0(Q,100,100))))},setThumb:function(G,X,Y){var Q=X,ne=U1(Op(Y));Fa.setValue(Q,{x:ne.saturation,y:100-ne.value})}},extraApis:{}})),k={paletteRgba:$n(d0),paletteHue:$n(0)},O=Bo((s=Fa.parts.spectrum({dom:{tag:"div",classes:[(i=e)("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=Fa.parts.thumb({dom:{tag:"div",classes:[i("hue-slider-thumb")],attributes:{role:"presentation"}}}),Fa.sketch({dom:{tag:"div",classes:[i("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:ze({y:0})},components:[s,l],sliderBehaviours:cn([zr.config({})]),onChange:function(G,X,Y){gn(G,jx,{value:Y})}}))),P=Bo(M.sketch({})),R=Bo(S.sketch({}));function F(G,X){var Y,Q,ne=G.width,le=G.height,ce=G.getContext("2d");null!==ce&&(ce.fillStyle=X,ce.fillRect(0,0,ne,le),(Y=ce.createLinearGradient(0,0,ne,0)).addColorStop(0,"rgba(255,255,255,1)"),Y.addColorStop(1,"rgba(255,255,255,0)"),ce.fillStyle=Y,ce.fillRect(0,0,ne,le),(Q=ce.createLinearGradient(0,0,0,le)).addColorStop(0,"rgba(0,0,0,0)"),Q.addColorStop(1,"rgba(0,0,0,1)"),ce.fillStyle=Q,ce.fillRect(0,0,ne,le))}return{uid:t.uid,dom:t.dom,components:[P.asSpec(),O.asSpec(),R.asSpec()],behaviours:cn([zn("colour-picker-events",[Ot(Rg,(h=[n,function(G,X,Y){O.getOpt(G).each(function(Q){Fa.setValue(Q,{y:100-Y/360*100})})},function(G,X){P.getOpt(G).each(function(Y){M.setThumb(Y,X)})}],function(G,X){var Y=X.event.hex;o(G,Y,U1(Op(Y)).hue,h)})),Ot(Ux,(f=[r],function(G,X){var Y=X.event.value,Q=k.paletteHue.get();o(G,_C(u0(Q,Y.x,100-Y.y)),Q,f)})),Ot(jx,(c=[n,r],function(G,X){var Y=(100-X.event.value.y)/100*360,Q=U1(k.paletteRgba.get());o(G,_C(u0(Y,Q.saturation,Q.value)),Y,c)}))]),ho.config({find:function(G){return R.getOpt(G)}}),pr.config({mode:"acyclic"})])}}})}(VC,function(t){return"tox-"+t}).sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(t){gn(t,Og,{name:"hex-valid",value:!0})},onInvalidHex:function(t){gn(t,Og,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[e.asSpec()],behaviours:cn([Mn.config({store:{mode:"manual",getValue:function(t){var n=e.get(t);return ho.getCurrent(n).bind(function(r){return Mn.getValue(r).hex}).map(function(r){return"#"+r}).getOr("")},setValue:function(t,n){var r=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(n),o=e.get(t);ho.getCurrent(o).fold(function(){console.log("Can not find form")},function(i){Mn.setValue(i,{hex:H.from(r[1]).getOr("")}),zh.getField(i,"hex").each(function(s){gr(s,va())})})}}}),Kp()])}}),dropzone:Iu(function(u,e){return function(u,e){function t(l,c){c.stop()}function n(l){return function(c,f){wn(l,function(h){h(c,f)})}}function r(l,c){Kn.isDisabled(l)||i(l,c.event.raw.dataTransfer.files)}function o(l,c){i(l,c.event.raw.target.files)}function i(l,c){var f,h;Mn.setValue(l,(f=c,h=Qu.explode(e.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string")),xt(hu(f),function(p){return Nn(h,function(y){return Me(p.name.toLowerCase(),"."+y.toLowerCase())})}))),gn(l,uc,{name:u.name})}var s=Bo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:cn([zn("input-file-events",[Xh(eu()),Xh(tu())])])});return Ed(u.label.map(function(l){return Im(l,e)}),zo.parts.field({factory:{sketch:function(l){return{uid:l.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:cn([O0([]),Kp(),Kn.config({}),Oo.config({toggleClass:"dragenter",toggleOnExecute:!1}),zn("dropzone-events",[Ot("dragenter",n([t,Oo.toggle])),Ot("dragleave",n([t,Oo.toggle])),Ot("dragover",t),Ot("drop",n([t,r])),Ot(ta(),o)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:e.translate("Drop an image here")}},pl.sketch({dom:{tag:"button",innerHtml:e.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[s.asSpec()],action:function(c){s.get(c).element.dom.click()},buttonBehaviours:cn([xa.config({}),Dm(e.isDisabled),us()])})]}]}}}}),["tox-form__group--stretched"],[])}(u,e.shared.providers)}),grid:Iu(function(u,e){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+u.columns+"col"]},components:Mt(u.items,e.shared.interpreter)}}),listbox:Iu(function(u,e){return r=(n=e).shared.providers,o=ia((t=u).items).filter(bS),i=t.label.map(function(l){return Im(l,r)}),s={dom:{tag:"div",classes:["tox-listboxfield"]},components:[zo.parts.field({dom:{},factory:{sketch:function(l){return k0({uid:l.uid,text:o.map(function(c){return c.text}),icon:H.none(),tooltip:t.label,role:H.none(),fetch:function(c,f){f(hf(wD(c,t.name,t.items,Mn.getValue(c)),qf.CLOSE_ON_EXECUTE,n,!1))},onSetup:ze(ht),getApi:ze({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[xa.config({}),Mn.config({store:{mode:"manual",initialValue:o.map(function(c){return c.value}).getOr(""),getValue:function(c){return Wi(c.element,_D)},setValue:function(c,f){G2(t.items,f).each(function(h){rr(c.element,_D,h.value),gn(c,Nl,{text:h.text})})}}})]},"tox-listbox",n.shared)}}})]},zo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:pe([i.toArray(),[s]]),fieldBehaviours:cn([Kn.config({disabled:ze(t.disabled),onDisabled:function(l){zo.getField(l).each(Kn.disable)},onEnabled:function(l){zo.getField(l).each(Kn.enable)}})])});var t,n,r,o,i,s}),selectbox:Iu(function(u,e){return n=e.shared.providers,r=Mt((t=u).items,function(s){return{text:n.translate(s.text),value:s.value}}),o=t.label.map(function(s){return Im(s,n)}),i={dom:{tag:"div",classes:["tox-selectfield"]},components:pe([[zo.parts.field({dom:{},selectAttributes:{size:t.size},options:r,factory:wI,selectBehaviours:cn([Kn.config({disabled:function(){return t.disabled||n.isDisabled()}}),xa.config({}),zn("selectbox-change",[Ot(ta(),function(s,l){gn(s,uc,{name:t.name})})])])})],(1<t.size?H.none():H.some(xg("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},n.icons))).toArray()])},zo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:pe([o.toArray(),[i]]),fieldBehaviours:cn([Kn.config({disabled:function(){return t.disabled||n.isDisabled()},onDisabled:function(s){zo.getField(s).each(Kn.disable)},onEnabled:function(s){zo.getField(s).each(Kn.enable)}}),us()])});var t,n,r,o,i}),sizeinput:Iu(function(u,e){return $C(u,e.shared.providers)}),urlinput:Iu(function(u,e){return function(u,e,t){function n(k){var O=Mn.getValue(k);t.addToHistory(O.value,u.filetype)}var r,o,i,s,l=e.shared.providers,c=zo.parts.field({factory:kI,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":q2,type:"url"},minChars:0,responseTime:0,fetch:function(k){var O,P,R,F,G=hf((O=u.filetype,P=t,R=Mn.getValue(k),F=void 0!==R.meta.text?R.meta.text:R.value,P.getLinkInformation().fold(function(){return[]},function(X){var Y=Zx(F,Mt(P.getHistory(O),function(Q){return S_(Q,Q)}));return"file"===O?Jo([Y,Zx(F,YM("header",X.targets)),Zx(F,pe([H.from(X.anchorTop).map(function(Q){return S_("<top>",Q)}).toArray(),YM("anchor",X.targets),H.from(X.anchorBottom).map(function(Q){return S_("<bottom>",Q)}).toArray()]))],function(Q,ne){return 0===Q.length||0===ne.length?Q.concat(ne):Q.concat(TI,ne)},[]):Y})),qf.BUBBLE_TO_SANDBOX,e,!1);return Nh(G)},getHotspot:function(k){return S.getOpt(k)},onSetValue:function(k,O){k.hasConfigured($f)&&$f.run(k).get(ht)},typeaheadBehaviours:cn(pe([t.getValidationHandler().map(function(k){return $f.config({getRoot:function(O){return ur(O.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(O,P){h.getOpt(O).each(function(R){rr(R.element,"title",l.translate(P))})}},validator:{validate:function(O){var P=Mn.getValue(O);return function(u){return T_(Em(u))}(function(R){k({type:u.filetype,url:P.value},function(F){var G,X;"invalid"===F.status?(G=Sr.error(F.message),R(G)):(X=Sr.value(F.message),R(X))})})},validateOnLoad:!1}})}).toArray(),[Kn.config({disabled:function(){return u.disabled||l.isDisabled()}}),xa.config({}),zn("urlinput-events",pe(["file"===u.filetype?[Ot(va(),function(k){gn(k,uc,{name:u.name})})]:[],[Ot(ta(),function(k){gn(k,uc,{name:u.name}),n(k)}),Ot(wf(),function(k){gn(k,uc,{name:u.name}),n(k)})]]))]])),eventOrder:((r={})[va()]=["streaming","urlinput-events","invalidating"],r),model:{getDisplayText:function(k){return k.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:e.shared.getSink,parts:{menu:T1(0,0,"normal")},onExecute:function(k,O,P){gn(O,$1,{})},onItemExecute:function(k,O,P,R){n(k),gn(k,uc,{name:u.name})}}),f=u.label.map(function(k){return Im(k,l)}),h=Bo((o="invalid",i=H.some(q2),xg("warning",{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+o],attributes:_e({title:l.translate(s=void 0===s?o:s),"aria-live":"polite"},i.fold(function(){return{}},function(k){return{id:k}}))},l.icons))),p=Bo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[h.asSpec()]}),y=t.getUrlPicker(u.filetype),b=jn("browser.url.event"),S=Bo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[c,p.asSpec()],behaviours:cn([Kn.config({disabled:function(){return u.disabled||l.isDisabled()}})])}),M=Bo(oS({name:u.name,icon:H.some("browse"),text:u.label.getOr(""),disabled:u.disabled,primary:!1,borderless:!0},function(k){return gr(k,b)},l,[],["tox-browse-url"]));return zo.sketch({dom:Fw([]),components:f.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:pe([[S.asSpec()],y.map(function(){return M.asSpec()}).toArray()])}]),fieldBehaviours:cn([Kn.config({disabled:function(){return u.disabled||l.isDisabled()},onDisabled:function(k){zo.getField(k).each(Kn.disable),M.getOpt(k).each(Kn.disable)},onEnabled:function(k){zo.getField(k).each(Kn.enable),M.getOpt(k).each(Kn.enable)}}),us(),zn("url-input-events",[Ot(b,function(k){ho.getCurrent(k).each(function(O){var P=Mn.getValue(O),R=_e({fieldname:u.name},P);y.each(function(F){F(R).get(function(G){Mn.setValue(O,G),gn(k,uc,{name:u.name})})})})})])])})}(u,e,e.urlinput)}),customeditor:Iu(function(u){var e=Zo(),t=Bo({dom:{tag:u.tag}}),n=Zo();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:cn([zn("custom-editor-events",[Mi(function(r){t.getOpt(r).each(function(o){(yn(u,"init")?u.init(o.element.dom):ok.load(u.scriptId,u.scriptUrl).then(function(i){return i(o.element.dom,u.settings)})).then(function(i){n.on(function(s){i.setValue(s)}),n.clear(),e.set(i)})})})]),Mn.config({store:{mode:"manual",getValue:function(){return e.get().fold(function(){return n.get().getOr("")},function(r){return r.getValue()})},setValue:function(r,o){e.get().fold(function(){n.set(o)},function(i){return i.setValue(o)})}}}),Kp()]),components:[t.asSpec()]}}),htmlpanel:Iu(function(u){return du.sketch("presentation"===u.presets?{dom:{tag:"div",classes:["tox-form__group"],innerHtml:u.html}}:{dom:{tag:"div",classes:["tox-form__group"],innerHtml:u.html,attributes:{role:"document"}},containerBehaviours:cn([xa.config({}),zr.config({})])})}),imagetools:Iu(function(u,e){return Yx(u,e.shared.providers)}),table:Iu(function(u,e){return function(u,e){function t(n){return{dom:{tag:"td",innerHtml:e.translate(n)}}}return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Mt(u.header,function(n){return{dom:{tag:"th",innerHtml:e.translate(n)}}})}]},{dom:{tag:"tbody"},components:Mt(u.cells,function(n){return{dom:{tag:"tr"},components:Mt(n,t)}})}],behaviours:cn([xa.config({}),zr.config({})])}}(u,e.shared.providers)}),panel:Iu(function(u,e){return{dom:{tag:"div",classes:u.classes},components:Mt(u.items,e.shared.interpreter)}})},DI={field:function(u,e){return e}},SD=function(u,e,t){return St(X2,e.type).fold(function(){return console.error('Unknown factory type "'+e.type+'", defaulting to container: ',e),e},function(n){return n(u,e,t)})},Y2={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},Z2=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],$2=function(u){return Jo(u,function(e,t){if(yn(t,"items")){var n=$2(t.items);return{customFormats:e.customFormats.concat(n.customFormats),formats:e.formats.concat([{title:t.title,items:n.formats}])}}if(yn(t,"inline")||yn(t,"block")||yn(t,"selector")){var r="custom-"+(lr(t.name)?t.name:t.title.toLowerCase());return{customFormats:e.customFormats.concat([{name:r,format:t}]),formats:e.formats.concat([{title:t.title,format:r,icon:t.icon}])}}return _e(_e({},e),{formats:e.formats.concat(t)})},{customFormats:[],formats:[]})},AI=Qu.trim,K2=fk("true"),J2=fk("false"),CD=function(u){var e=Mt(su(Pe.fromDom(u),"h1,h2,h3,h4,h5,h6,a:not([href])"),function(t){return t.dom});return xt(Mt(xt(e,x),C).concat(Mt(xt(e,g),A)),E)},kS="tinymce-url-history",Bd=vg,e1=kh,Q2=ze([qe("shell",!1),Et("makeItem"),qe("setupItem",ht),Sd("listBehaviours",[Ur])]),eA=ze([af({name:"items",overrides:function(){return{behaviours:cn([Ur.config({})])}}})]),tA=hi({name:ze("CustomList")(),configFields:Q2(),partFields:eA(),factory:function(u,e,t,n){var r=u.shell?{behaviours:[Ur.config({})],components:[]}:{behaviours:[],components:e};return{uid:u.uid,dom:u.dom,components:r.components,behaviours:bs(u.listBehaviours,r.behaviours),apis:{setItems:function(o,i){var s;s=o,(u.shell?H.some(s):fo(s,u,"items")).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(l){var c=Ur.contents(l),f=i.length,h=f-c.length,p=0<h?ar(h,function(){return u.makeItem()}):[],y=c.slice(f);wn(y,function(S){return Ur.remove(l,S)}),wn(p,function(S){return Ur.append(l,S)});var b=Ur.contents(l);wn(b,function(S,M){u.setupItem(o,S,i[M],M)})})}}}},apis:{setItems:function(u,e,t){u.setItems(e,t)}}}),D_=ze([Et("dom"),qe("shell",!0),as("toolbarBehaviours",[Ur])]),nA=ze([af({name:"groups",overrides:function(){return{behaviours:cn([Ur.config({})])}}})]),Gm=hi({name:"Toolbar",configFields:D_(),partFields:nA(),factory:function(u,e,t,n){var r=u.shell?{behaviours:[Ur.config({})],components:[]}:{behaviours:[],components:e};return{uid:u.uid,dom:u.dom,components:r.components,behaviours:bs(u.toolbarBehaviours,r.behaviours),apis:{setGroups:function(o,i){var s;s=o,(u.shell?H.some(s):fo(s,u,"groups")).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(l){Ur.set(l,i)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(u,e,t){u.setGroups(e,t)}}}),kD=ze([]),QM=Object.freeze({__proto__:null,setup:ht,isDocked:Er,getBehaviours:kD}),MD=ua([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),MS=function(u,e,t){var n,r,o,i;u.getSystem().isConnected()&&(o=t,i=(r=e).lazyViewport(n=u),o.isDocked()&&Qe(n,r,o,i),function(u,e,t){var n,r,o,i=u.element;return Vn(Gi(i,"position"),"fixed")?(r=e,Oe(n=i,o=t).filter(function(s){return Se(o.getModes(),s,r)}).bind(function(s){return Je(n,s,o)})):function(s,l,c){var f,h,p=Ks(s);if(Se(c.getModes(),p,l))return H.none();f=s,h=p,c.setInitialPos({style:function(){var O={},P=f.dom;if(Fi(P))for(var R=0;R<P.style.length;R++){var F=P.style.item(R);O[F]=P.style[F]}return O}(),position:Wa(f,"position")||"static",bounds:h});var y=rl(),S=l.y-y.y,M=y.bottom-l.bottom,k=p.y<=l.y;return H.some(MD.fixed(zc("fixed",H.some(p.x-y.x),k?H.some(S):H.none(),H.none(),k?H.none():H.some(M))))}(i,e,t)}(n,i,o).each(function(s){s.fold(function(){return gt(n,r,o)},function(l){return Ge(n,r,o,l)},function(l){Qe(n,r,o,i,!0),Ge(n,r,o,l)})}))},eT=Object.freeze({__proto__:null,refresh:MS,reset:Ye,isDocked:function(u,e,t){return t.isDocked()},getModes:function(u,e,t){return t.getModes()},setModes:function(u,e,t,n){return t.setModes(n)}}),TD=Object.freeze({__proto__:null,events:function(u,e){return Ro([xf(Xd(),function(t,n){u.contextual.each(function(r){La(t.element,r.transitionClass)&&(Xa(t.element,[r.transitionClass,r.fadeInClass]),(e.isVisible()?r.onShown:r.onHidden)(t)),n.stop()})}),Ot(ca(),function(t,n){MS(t,u,e)}),Ot(Cf(),function(t,n){Ye(t,u,e)})])}}),Kc=Ia({fields:[ka("contextual",[kr("fadeInClass"),kr("fadeOutClass"),kr("transitionClass"),Qi("lazyContext"),oo("onShow"),oo("onShown"),oo("onHide"),oo("onHidden")]),ki("lazyViewport",rl),gc("modes",["top","bottom"],De),oo("onDocked"),oo("onUndocked")],name:"docking",active:TD,apis:eT,state:Object.freeze({__proto__:null,init:function(u){var e=$n(!1),t=$n(!0),n=Zo(),r=$n(u.modes);return dl({isDocked:e.get,setDocked:e.set,getInitialPos:n.get,setInitialPos:n.set,clearInitialPos:n.clear,isVisible:t.get,setVisible:t.set,getModes:r.get,setModes:r.set,readState:function(){return"docked:  "+e.get()+", visible: "+t.get()+", modes: "+r.get().join(",")}})}})}),tT=ze(jn("toolbar-height-change")),V0={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},DD="tox-tinymce--toolbar-sticky-on",rA="tox-tinymce--toolbar-sticky-off",nT=Object.freeze({__proto__:null,setup:function(u,e,t){u.inline||(e.header.isPositionedAtTop()||u.on("ResizeEditor",function(){t().each(Kc.reset)}),u.on("ResizeWindow ResizeEditor",function(){t().each(Ct)}),u.on("SkinLoaded",function(){t().each(function(n){Kc.isDocked(n)?Kc.reset(n):Kc.refresh(n)})}),u.on("FullscreenStateChanged",function(){t().each(Kc.reset)})),u.on("AfterScrollIntoView",function(n){t().each(function(r){Kc.refresh(r);var o,i,s,l,c,f,h,p,y,b,S,M,k,O,P,R,F=r.element;B(F)&&(o=n,l=(s=rt(i=F)).dom.defaultView.innerHeight,c=Ei(s),h=rd(f=Pe.fromDom(o.elm)),p=Ra(f),b=(y=h.y)+p,S=Pc(i),M=Ra(i),O=(k=S.top)+M,P=Math.abs(k-c.top)<2,R=Math.abs(O-(c.top+l))<2,P&&y<O?qo(c.left,y-M,s):R&&k<b&&qo(c.left,y-l+p+M,s))})}),u.on("PostRender",function(){sn(u,!1)})},isDocked:function(u){return u().map(Kc.isDocked).getOr(!1)},getBehaviours:Tt}),rT=ae([kr("type"),Ns("items",fc([ge([kr("name"),Na("items",De)]),De]))].concat(Iy)),oA=[Si("text"),Si("tooltip"),Si("icon"),Qi("fetch"),ki("onSetup",function(){return ht})],II=ae(me([kr("type")],oA,!0)),OI=ae([kr("type"),Si("tooltip"),Si("icon"),Si("text"),jd("select"),Qi("fetch"),ki("onSetup",function(){return ht}),kl("presets","normal",["normal","color","listpreview"]),qe("columns",1),Qi("onAction"),Qi("onItemAction")]),AD=Mu({factory:function(u,e){var t={focus:pr.focusIn,setMenus:function(n,r){var o=Mt(r,function(i){return rS(Dt({type:"menubutton",text:i.text,fetch:function(s){s(i.getItems())}}).mapError(function(s){return jt(s)}).getOrDie(),"tox-mbtn",e.backstage,H.some("menuitem"))});Ur.set(n,o)}};return{uid:u.uid,dom:u.dom,components:[],behaviours:cn([Ur.config({}),zn("menubar-events",[Mi(function(n){u.onSetup(n)}),Ot(Vu(),function(n,r){zs(n.element,".tox-mbtn--active").each(function(o){vc(r.event.target,".tox-mbtn").each(function(i){Rt(o,i)||n.getSystem().getByDom(o).each(function(s){n.getSystem().getByDom(i).each(function(l){gf.expand(l),gf.close(s),zr.focus(l)})})})})}),Ot(ys(),function(n,r){r.event.prevFocus.bind(function(o){return n.getSystem().getByDom(o).toOptional()}).each(function(o){r.event.newFocus.bind(function(i){return n.getSystem().getByDom(i).toOptional()}).each(function(i){gf.isOpen(o)&&(gf.expand(i),gf.close(o))})})})]),pr.config({mode:"flow",selector:".tox-mbtn",onEscape:function(n){return u.onEscape(n),H.some(!0)}}),xa.config({})]),apis:t,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Et("dom"),Et("uid"),Et("onEscape"),Et("backstage"),qe("onSetup",ht)],apis:{focus:function(u,e){u.focus(e)},setMenus:function(u,e,t){u.setMenus(e,t)}}}),EI=Object.freeze({__proto__:null,refresh:function(u,e,t){var n;t.isExpanded()&&(co(u.element,bn(e)),n=Jt(e,u.element),Ar(u.element,bn(e),n))},grow:function(u,e,t){t.isExpanded()||Hn(u,e,t)},shrink:function(u,e,t){t.isExpanded()&&An(u,e,t)},immediateShrink:function(u,e,t){t.isExpanded()&&tn(u,e,t)},hasGrown:function(u,e,t){return t.isExpanded()},hasShrunk:function(u,e,t){return t.isCollapsed()},isGrowing:mo,isShrinking:Ae,isTransitioning:function(u,e,t){return mo(u,e)||Ae(u,e)},toggleGrow:function(u,e,t){(t.isExpanded()?An:Hn)(u,e,t)},disableTransitions:Xn}),ID=Object.freeze({__proto__:null,exhibit:function(u,e,t){return Qs(e.expanded?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:On(e.dimension.property,"0px")})},events:function(u,e){return Ro([xf(Xd(),function(t,n){n.event.raw.propertyName===u.dimension.property&&(Xn(t,u),e.isExpanded()&&co(t.element,u.dimension.property),(e.isExpanded()?u.onGrown:u.onShrunk)(t))})])}}),Dc=Ia({fields:[Et("closedClass"),Et("openClass"),Et("shrinkingClass"),Et("growingClass"),bo("getAnimationRoot"),oo("onShrunk"),oo("onStartShrink"),oo("onGrown"),oo("onStartGrow"),qe("expanded",!1),Ns("dimension",ps("property",{width:[wo("property","width"),wo("getDimension",function(u){return ws(u)+"px"})],height:[wo("property","height"),wo("getDimension",function(u){return Ra(u)+"px"})]}))],name:"sliding",active:ID,apis:EI,state:Object.freeze({__proto__:null,init:function(u){var e=$n(u.expanded);return dl({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:un(e.set,!1),setExpanded:un(e.set,!0),readState:function(){return"expanded: "+e.get()}})}})}),OD="container",iA=[as("slotBehaviours",[])],aA=Pt({getSlotNames:function(u,e){return u.getSlotNames(e)},getSlot:function(u,e,t){return u.getSlot(e,t)},isShowing:function(u,e,t){return u.isShowing(e,t)},hideSlot:function(u,e,t){return u.hideSlot(e,t)},hideAllSlots:function(u,e){return u.hideAllSlots(e)},showSlot:function(u,e,t){return u.showSlot(e,t)}},sv),H0=_e(_e({},aA),{sketch:function(u){var e,t={slot:function(o,i){return e.push(o),hp(OD,Ze(o),i)},record:ze(e=[])},n=u(t),r=Mt(t.record(),function(o){return ss({name:o,pname:Ze(o)})});return $u(OD,iA,r,_I,n)}}),PI=ae([Si("icon"),Si("tooltip"),ki("onShow",ht),ki("onHide",ht),ki("onSetup",function(){return ht})]),oT=jn("FixSizeEvent"),ED=jn("AutoSizeEvent"),sA=Object.freeze({__proto__:null,block:function(u,e,t,n){rr(u.element,"aria-busy",!0);var r=e.getRoot(u).getOr(u),o=cn([pr.config({mode:"special",onTab:function(){return H.some(!0)},onShiftTab:function(){return H.some(!0)}}),zr.config({})]),i=n(r,o),s=r.getSystem().build(i);Ur.append(r,Qr(s)),s.hasConfigured(pr)&&e.focus&&pr.focusIn(s),t.isBlocked()||e.onBlock(u),t.blockWith(function(){return Ur.remove(r,s)})},unblock:function(u,e,t){Mo(u.element,"aria-busy"),t.isBlocked()&&e.onUnblock(u),t.clear()}}),jm=Ia({fields:[ki("getRoot",H.none),ii("focus",!0),oo("onBlock"),oo("onUnblock")],name:"blocking",apis:sA,state:Object.freeze({__proto__:null,init:function(){var u=yv(function(e){return e.destroy()});return dl({readState:u.isSet,blockWith:function(e){u.set({destroy:e})},clear:u.clear,isBlocked:u.isSet})}})}),PD=ze([as("splitToolbarBehaviours",[_a]),vn("builtGroups",function(){return $n([])})]),uA=ze([Fs(["overflowToggledClass"]),jd("getOverflowBounds"),Et("lazySink"),vn("overflowGroups",function(){return $n([])})].concat(PD())),TS=ze([ss({factory:Gm,schema:D_(),name:"primary"}),Md({schema:D_(),name:"overflow"}),Md({name:"overflow-button"}),Md({name:"overflow-group"})]),iT=ze(function(u,e){var t=u,n=Math.floor(e);Ar(t,"max-width",Cl.max(t,n,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"])+"px")}),RI=ze([Fs(["toggledClass"]),Et("lazySink"),Qi("fetch"),jd("getBounds"),ka("fireDismissalEventInstead",[qe("event",cl())]),Pf()]),lA=ze([Md({name:"button",overrides:function(u){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:cn([Oo.config({toggleClass:u.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),Md({factory:Gm,schema:D_(),name:"toolbar",overrides:function(u){return{toolbarBehaviours:cn([pr.config({mode:"cyclic",onEscape:function(e){return fo(e,u,"button").each(zr.focus),H.none()}})])}}})]),t1=hi({name:"FloatingToolbarButton",factory:function(u,e,t,n){return _e(_e({},pl.sketch(_e(_e({},n.button()),{action:function(r){fu(r,n)},buttonBehaviours:Cd({dump:n.button().buttonBehaviours},[_a.config({others:{toolbarSandbox:function(r){return o=r,i=t,s=u,{dom:{tag:"div",attributes:{id:(l=ep()).id}},behaviours:cn([pr.config({mode:"special",onEscape:function(c){return Kr.close(c),H.some(!0)}}),Kr.config({onOpen:function(c,f){s.fetch().get(function(h){mf(o,f,s,i.layouts,h),l.link(o.element),pr.focusIn(f)})},onClose:function(){Oo.off(o),zr.focus(o),l.unlink(o.element)},isPartOf:function(c,f,h){return bu(f,h)||bu(o,h)},getAttachPoint:function(){return s.lazySink(o).getOrDie()}}),Ol.config({channels:_e(_e({},Ff(_e({isExtraPart:Er},s.fireDismissalEventInstead.map(function(c){return{fireEventInstead:{event:c.event}}}).getOr({})))),hl({doReposition:function(){Kr.getState(_a.getCoupled(o,"toolbarSandbox")).each(function(c){wa(o,c,s,i.layouts)})}}))})])};var o,i,s,l}}})])}))),{apis:{setGroups:function(r,o){Kr.getState(_a.getCoupled(r,"toolbarSandbox")).each(function(i){mf(r,i,u,t.layouts,o)})},reposition:function(r){Kr.getState(_a.getCoupled(r,"toolbarSandbox")).each(function(o){wa(r,o,u,t.layouts)})},toggle:function(r){fu(r,n)},getToolbar:function(r){return Kr.getState(_a.getCoupled(r,"toolbarSandbox"))},isOpen:function(r){return Kr.isOpen(_a.getCoupled(r,"toolbarSandbox"))}}})},configFields:RI(),partFields:lA(),apis:{setGroups:function(u,e,t){u.setGroups(e,t)},reposition:function(u,e){u.reposition(e)},toggle:function(u,e){u.toggle(e)},getToolbar:function(u,e){return u.getToolbar(e)},isOpen:function(u,e){return u.isOpen(e)}}}),aT=ze([Et("items"),Fs(["itemSelector"]),as("tgroupBehaviours",[pr])]),sT=ze([yp({name:"items",unit:"item"})]),DS=hi({name:"ToolbarGroup",configFields:aT(),partFields:sT(),factory:function(u,e,t,n){return{uid:u.uid,dom:u.dom,components:e,behaviours:bs(u.tgroupBehaviours,[pr.config({mode:"flow",selector:u.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),uT=hi({name:"SplitFloatingToolbar",configFields:uA(),partFields:TS(),factory:function(u,e,t,n){var r=Bo(t1.sketch({fetch:function(){return Em(function(o){o(ls(u.overflowGroups.get()))})},layouts:{onLtr:function(){return[wu,os]},onRtl:function(){return[os,wu]},onBottomLtr:function(){return[Il,Ds]},onBottomRtl:function(){return[Ds,Il]}},getBounds:t.getOverflowBounds,lazySink:u.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:u.markers.overflowToggledClass},parts:{button:n["overflow-button"](),toolbar:n.overflow()}}));return{uid:u.uid,dom:u.dom,components:e,behaviours:bs(u.splitToolbarBehaviours,[_a.config({others:{overflowGroup:function(){return DS.sketch(_e(_e({},n["overflow-group"]()),{items:[r.asSpec()]}))}}})]),apis:{setGroups:function(o,i){u.builtGroups.set(Mt(i,o.getSystem().build)),el(o,r,u)},refresh:function(o){return el(o,r,u)},toggle:function(o){r.getOpt(o).each(function(i){t1.toggle(i)})},isOpen:function(o){return r.getOpt(o).map(t1.isOpen).getOr(!1)},reposition:function(o){r.getOpt(o).each(function(i){t1.reposition(i)})},getOverflow:function(o){return r.getOpt(o).bind(t1.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(u,e,t){u.setGroups(e,t)},refresh:function(u,e){u.refresh(e)},reposition:function(u,e){u.reposition(e)},toggle:function(u,e){u.toggle(e)},isOpen:function(u,e){return u.isOpen(e)},getOverflow:function(u,e){return u.getOverflow(e)}}}),cA=ze([Fs(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),oo("onOpened"),oo("onClosed")].concat(PD())),dA=ze([ss({factory:Gm,schema:D_(),name:"primary"}),ss({factory:Gm,schema:D_(),name:"overflow",overrides:function(u){return{toolbarBehaviours:cn([Dc.config({dimension:{property:"height"},closedClass:u.markers.closedClass,openClass:u.markers.openClass,shrinkingClass:u.markers.shrinkingClass,growingClass:u.markers.growingClass,onShrunk:function(e){fo(e,u,"overflow-button").each(function(t){Oo.off(t),zr.focus(t)}),u.onClosed(e)},onGrown:function(e){pr.focusIn(e),u.onOpened(e)},onStartGrow:function(e){fo(e,u,"overflow-button").each(Oo.on)}}),pr.config({mode:"acyclic",onEscape:function(e){return fo(e,u,"overflow-button").each(zr.focus),H.some(!0)}})])}}}),Md({name:"overflow-button",overrides:function(u){return{buttonBehaviours:cn([Oo.config({toggleClass:u.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),Md({name:"overflow-group"})]),RD=hi({name:"SplitSlidingToolbar",configFields:cA(),partFields:dA(),factory:function(u,e,t,n){var r="alloy.toolbar.toggle";return{uid:u.uid,dom:u.dom,components:e,behaviours:bs(u.splitToolbarBehaviours,[_a.config({others:{overflowGroup:function(o){return DS.sketch(_e(_e({},n["overflow-group"]()),{items:[pl.sketch(_e(_e({},n["overflow-button"]()),{action:function(i){gr(o,r)}}))]}))}}}),zn("toolbar-toggle-events",[Ot(r,function(o){Vh(o,u)})])]),apis:{setGroups:function(o,i){var s=Mt(i,o.getSystem().build);u.builtGroups.set(s),xD(o,u)},refresh:function(o){return xD(o,u)},toggle:function(o){return Vh(o,u)},isOpen:function(o){return fo(o,u,"overflow").map(Dc.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(u,e,t){u.setGroups(e,t)},refresh:function(u,e){u.refresh(e)},toggle:function(u,e){u.toggle(e)},isOpen:function(u,e){return u.isOpen(e)}}}),fA=e1.optional({factory:AD,name:"menubar",schema:[Et("backstage")]}),lT=e1.optional({factory:{sketch:function(u){return tA.sketch({uid:u.uid,dom:u.dom,listBehaviours:cn([pr.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return xS({type:u.type,uid:jn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:u.providers,onEscape:function(){return u.onEscape(),H.some(!0)}})},setupItem:function(e,t,n,r){Gm.setGroups(t,n)},shell:!0})}},name:"multiple-toolbar",schema:[Et("dom"),Et("onEscape")]}),AS=e1.optional({factory:{sketch:function(u){return(u.type===ai.sliding?function(e){var t=RD.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=RD.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),r=eh(e);return RD.sketch(_e(_e({},r),{components:[t,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(o){o.getSystem().broadcastOn([tT()],{type:"opened"})},onClosed:function(o){o.getSystem().broadcastOn([tT()],{type:"closed"})}}))}:u.type===ai.floating?function(e){var t=eh(e),n=uT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return uT.sketch(_e(_e({},t),{lazySink:e.getSink,getOverflowBounds:function(){var r=e.moreDrawerData.lazyHeader().element,o=rd(r),i=yr(r),s=rd(i),l=Math.max(i.dom.scrollHeight,s.height);return pn(o.x+4,s.y,o.width-8,l)},parts:_e(_e({},t.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))}:xS)({type:u.type,uid:u.uid,onEscape:function(){return u.onEscape(),H.some(!0)},cyclicKeying:!1,initGroups:[],getSink:u.getSink,providers:u.providers,moreDrawerData:{lazyToolbar:u.lazyToolbar,lazyMoreButton:u.lazyMoreButton,lazyHeader:u.lazyHeader},attributes:u.attributes})}},name:"toolbar",schema:[Et("dom"),Et("onEscape"),Et("getSink")]}),NI=e1.optional({factory:{sketch:function(u){return{uid:u.uid,dom:u.dom,components:u.components,behaviours:cn((u.sticky?Tt:kD)(u.editor,u.sharedBackstage))}}},name:"header",schema:[Et("dom")]}),cT=e1.optional({name:"socket",schema:[Et("dom")]}),ND=e1.optional({factory:{sketch:function(u){return{uid:u.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:cn([xa.config({}),zr.config({}),Dc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(e){ho.getCurrent(e).each(H0.hideAllSlots),gr(e,ED)},onGrown:function(e){gr(e,ED)},onStartGrow:function(e){gn(e,oT,{width:Gi(e.element,"width").getOr("")})},onStartShrink:function(e){gn(e,oT,{width:ws(e.element)+"px"})}}),Ur.config({}),ho.config({find:function(e){return ia(Ur.contents(e))}})])}],behaviours:cn([A0(0),zn("sidebar-sliding-events",[Ot(oT,function(e,t){Ar(e.element,"width",t.event.width)}),Ot(ED,function(e,t){co(e.element,"width")})])])}}},name:"sidebar",schema:[Et("dom")]}),LI=e1.optional({factory:{sketch:function(u){return{uid:u.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:cn([Ur.config({}),jm.config({focus:!1}),ho.config({find:function(e){return ia(e.components())}})]),components:[]}}},name:"throbber",schema:[Et("dom")]}),Ea=hi({name:"OuterContainer",factory:function(u,e,t){return{uid:u.uid,dom:u.dom,components:e,apis:{getSocket:function(n){return Bd.getPart(n,u,"socket")},setSidebar:function(n,r){Bd.getPart(n,u,"sidebar").each(function(o){return function(u,e){ho.getCurrent(u).each(function(t){return Ur.set(t,[(n=e,H0.sketch(function(r){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:(o=r,s=Mt(ri(i=n),function(l){var f=Fu(wi("sidebar",PI,i[l]));return{name:l,getApi:It,onSetup:f.onSetup,onShow:f.onShow,onHide:f.onHide}}),Mt(s,function(l){var c=$n(ht);return o.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Rl([Ip(l,c),vl(l,c),Ot(hd(),function(f,h){var p=h.event;Ao(s,function(y){return y.name===p.name}).each(function(y){(p.visible?y.onShow:y.onHide)(y.getApi(f))})})])})})),slotBehaviours:Rl([Mi(function(l){return H0.hideAllSlots(l)})])};var o,i,s}))]);var n})}(o,r)})},toggleSidebar:function(n,r){Bd.getPart(n,u,"sidebar").each(function(o){var i=r;ho.getCurrent(o).each(function(s){ho.getCurrent(s).each(function(l){Dc.hasGrown(s)?H0.isShowing(l,i)?Dc.shrink(s):(H0.hideAllSlots(l),H0.showSlot(l,i)):(H0.hideAllSlots(l),H0.showSlot(l,i),Dc.grow(s))})})})},whichSidebar:function(n){return Bd.getPart(n,u,"sidebar").bind(Vt).getOrNull()},getHeader:function(n){return Bd.getPart(n,u,"header")},getToolbar:function(n){return Bd.getPart(n,u,"toolbar")},setToolbar:function(n,r){Bd.getPart(n,u,"toolbar").each(function(o){o.getApis().setGroups(o,r)})},setToolbars:function(n,r){Bd.getPart(n,u,"multiple-toolbar").each(function(o){tA.setItems(o,r)})},refreshToolbar:function(n){Bd.getPart(n,u,"toolbar").each(function(r){return r.getApis().refresh(r)})},toggleToolbarDrawer:function(n){Bd.getPart(n,u,"toolbar").each(function(r){var o=r.getApis().toggle;null!=o?H.some(o(r)):H.none()})},isToolbarDrawerToggled:function(n){return Bd.getPart(n,u,"toolbar").bind(function(r){return H.from(r.getApis().isOpen).map(function(o){return o(r)})}).getOr(!1)},getThrobber:function(n){return Bd.getPart(n,u,"throbber")},focusToolbar:function(n){Bd.getPart(n,u,"toolbar").orThunk(function(){return Bd.getPart(n,u,"multiple-toolbar")}).each(function(r){pr.focusIn(r)})},setMenubar:function(n,r){Bd.getPart(n,u,"menubar").each(function(o){AD.setMenus(o,r)})},focusMenubar:function(n){Bd.getPart(n,u,"menubar").each(function(r){AD.focus(r)})}},behaviours:u.behaviours}},configFields:[Et("dom"),Et("behaviours")],partFields:[NI,fA,AS,lT,cT,ND,LI],apis:{getSocket:function(u,e){return u.getSocket(e)},setSidebar:function(u,e,t){u.setSidebar(e,t)},toggleSidebar:function(u,e,t){u.toggleSidebar(e,t)},whichSidebar:function(u,e){return u.whichSidebar(e)},getHeader:function(u,e){return u.getHeader(e)},getToolbar:function(u,e){return u.getToolbar(e)},setToolbar:function(u,e,t){var n=Mt(t,Qf);u.setToolbar(e,n)},setToolbars:function(u,e,t){var n=Mt(t,function(r){return Mt(r,Qf)});u.setToolbars(e,n)},refreshToolbar:function(u,e){return u.refreshToolbar(e)},toggleToolbarDrawer:function(u,e){u.toggleToolbarDrawer(e)},isToolbarDrawerToggled:function(u,e){return u.isToolbarDrawerToggled(e)},getThrobber:function(u,e){return u.getThrobber(e)},setMenubar:function(u,e,t){u.setMenubar(e,t)},focusMenubar:function(u,e){u.focusMenubar(e)},focusToolbar:function(u,e){u.focusToolbar(e)}}}),cb={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},dT=un(hk,!1),fT=un(hk,!0);function vk(u,e,t,n){var r;return{type:"basic",data:(r=u.getParam(e,t,"string"),Mt(n===Jx.SemiColon?r.replace(/;$/,"").split(";"):r.split(" "),function(o){var i=o,s=o,l=o.split("=");return 1<l.length&&(i=l[0],s=l[1]),{title:i,format:s}}))}}function hA(u){var e={type:"basic",data:XD};return{tooltip:"Align",text:H.none(),icon:H.some("align-left"),isSelectedFor:function(t){return function(){return u.formatter.match(t)}},getCurrentValue:H.none,getPreviewFor:function(t){return H.none},onAction:function(t){return function(){return Ao(XD,function(n){return n.format===t.format}).each(function(n){return u.execCommand(n.command)})}},updateText:function(t){var n=Ao(XD,function(r){return u.formatter.match(r.format)}).fold(ze("left"),function(r){return r.title.toLowerCase()});gn(t,jM,{icon:"align-"+n})},dataset:e,shouldHide:!1,isInvalid:function(t){return!u.formatter.canApply(t.format)}}}function yk(u){return Mt(u.split(/\s*,\s*/),function(e){return e.replace(/^['"]+|['"]+$/g,"")})}function A_(u){function e(){function r(l){return l?yk(l)[0]:""}var o=u.queryCommandValue("FontName"),i=n.data,s=o?o.toLowerCase():"";return{matchOpt:Ao(i,function(l){var c=l.format;return c.toLowerCase()===s||r(c).toLowerCase()===r(s).toLowerCase()}).orThunk(function(){return si(0===(l=s).indexOf("-apple-system")&&(c=yk(l.toLowerCase()),je(vA,function(f){return-1<c.indexOf(f.toLowerCase())})),{title:t,format:s});var l,c}),font:o}}var t="System Font",n=vk(u,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",Jx.SemiColon);return{tooltip:"Fonts",text:H.some(t),icon:H.none(),isSelectedFor:function(r){return function(o){return o.exists(function(i){return i.format===r})}},getCurrentValue:function(){return e().matchOpt},getPreviewFor:function(r){return function(){return H.some({tag:"div",styles:-1===r.indexOf("dings")?{"font-family":r}:{}})}},onAction:function(r){return function(){u.undoManager.transact(function(){u.focus(),u.execCommand("FontName",!1,r.format)})}},updateText:function(r){var o=e(),l=o.matchOpt.fold(ze(o.font),function(c){return c.title});gn(r,Nl,{text:l})},dataset:n,shouldHide:!1,isInvalid:Er}}function hT(u){function e(){var r=H.none(),o=n.data,i=u.queryCommandValue("FontSize");if(i)for(var s=function(c){var f,h,p,y,b=(h=c,/[0-9.]+px$/.test(f=i)?(p=72*parseInt(f,10)/96,y=Math.pow(10,h||0),Math.round(p*y)/y+"pt"):St(OS,f).getOr(f)),S=St(YD,b).getOr("");r=Ao(o,function(M){return M.format===i||M.format===b||M.format===S})},l=3;r.isNone()&&0<=l;l--)s(l);return{matchOpt:r,size:i}}var t=ze(H.none),n=vk(u,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",Jx.Space);return{tooltip:"Font sizes",text:H.some("12pt"),icon:H.none(),isSelectedFor:function(r){return function(o){return o.exists(function(i){return i.format===r})}},getPreviewFor:t,getCurrentValue:function(){return e().matchOpt},onAction:function(r){return function(){u.undoManager.transact(function(){u.focus(),u.execCommand("FontSize",!1,r.format)})}},updateText:function(r){var o=e(),l=o.matchOpt.fold(ze(o.size),function(c){return c.title});gn(r,Nl,{text:l})},dataset:n,shouldHide:!1,isInvalid:Er}}function LD(u,e){var t=e(),n=Mt(t,function(r){return r.format});return H.from(u.formatter.closest(n)).bind(function(r){return Ao(t,function(o){return o.format===r})}).orThunk(function(){return si(u.formatter.match("p"),{title:"Paragraph",format:"p"})})}function gA(u){var e=vk(u,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",Jx.SemiColon);return{tooltip:"Blocks",text:H.some("Paragraph"),icon:H.none(),isSelectedFor:function(t){return function(){return u.formatter.match(t)}},getCurrentValue:H.none,getPreviewFor:function(t){return function(){var n=u.formatter.get(t);return H.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:u.dom.parseStyle(u.formatter.getCssText(t))})}},onAction:bD(u),updateText:function(t){var n=LD(u,function(){return e.data}).fold(ze("Paragraph"),function(r){return r.title});gn(t,Nl,{text:n})},dataset:e,shouldHide:!1,isInvalid:function(t){return!u.formatter.canApply(t.format)}}}function BD(u,e){return{tooltip:"Formats",text:H.some("Paragraph"),icon:H.none(),isSelectedFor:function(t){return function(){return u.formatter.match(t)}},getCurrentValue:H.none,getPreviewFor:function(t){return function(){var n=u.formatter.get(t);return void 0!==n?H.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:u.dom.parseStyle(u.formatter.getCssText(t))}):H.none()}},onAction:bD(u),updateText:function(t){var n=function(i){var s=i.items;return void 0!==s&&0<s.length?Dr(s,n):[{title:i.title,format:i.format}]},r=Dr(Kx(u),n),o=LD(u,ze(r)).fold(ze("Paragraph"),function(i){return i.title});gn(t,Nl,{text:o})},shouldHide:u.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(t){return!u.formatter.canApply(t.format)},dataset:e}}function mA(u){return{isDisabled:function(){return Kn.isDisabled(u)},setDisabled:function(e){return Kn.set(u,e)}}}function zD(u){return{setActive:function(e){Oo.set(u,e)},isActive:function(){return Oo.isOn(u)},isDisabled:function(){return Kn.isDisabled(u)},setDisabled:function(e){return Kn.set(u,e)}}}function FD(u,e){return u.map(function(t){return{"aria-label":e.translate(t),title:e.translate(t)}}).getOr({})}function gT(u,e,t,n,r,o){var i;return{dom:{tag:"button",classes:["tox-tbtn"].concat(e.isSome()?["tox-tbtn--select"]:[]),attributes:FD(t,o)},components:c0([u.map(function(s){return h_(s,o.icons)}),e.map(function(s){return g_(s,"tox-tbtn",o)})]),eventOrder:((i={})[Lc()]=["focusing","alloy.base.behaviour","common-button-display-events"],i),buttonBehaviours:cn([dx(o.isDisabled),us(),zn("common-button-display-events",[Ot(Lc(),function(s,l){l.event.prevent(),gr(s,xA)})])].concat(n.map(function(s){return th.config({channel:s,initialData:{icon:u,text:e},renderComponents:function(l,c){return c0([l.icon.map(function(f){return h_(f,o.icons)}),l.text.map(function(f){return g_(f,"tox-tbtn",o)})])}})}).toArray()).concat(r.getOr([])))}}function VD(u,e,t){var n,r=$n(ht),o=gT(u.icon,u.text,u.tooltip,H.none(),H.none(),t);return pl.sketch({dom:o.dom,components:o.components,eventOrder:qx,buttonBehaviours:cn([zn("toolbar-button-events",[(n={onAction:u.onAction,getApi:e.getApi},nu(function(i,s){By(n,i)(function(l){gn(i,lk,{buttonApi:l}),n.onAction(l)})})),Ip(e,r),vl(e,r)]),dx(function(){return u.disabled||t.isDisabled()}),us()].concat(e.toolbarButtonBehaviours))})}function IS(u,e){return function(t,n,r){var o=u(t).mapError(function(i){return jt(i)}).getOrDie();return e(o,n,r)}}function HD(u,e,t,n){var r,o=e.outerContainer,i=t.toolbar,s=t.buttons;Zn(i,lr)?(r=i.map(function(l){return Sk(u,{toolbar:l,buttons:s,allowToolbarGroups:t.allowToolbarGroups},{backstage:n},H.none())}),Ea.setToolbars(o,r)):Ea.setToolbar(o,Sk(u,t,{backstage:n},H.none()))}function bk(u){return/^[0-9\.]+(|px)$/i.test(""+u)?H.some(parseInt(""+u,10)):H.none()}function xk(u){return Fn(u)?u+"px":u}function mT(u,e,t){var n=e.filter(function(o){return u<o}),r=t.filter(function(o){return o<u});return n.or(r).getOr(u)}function pT(u){var e=Ey(u),t=O1(u),n=E1(u);return bk(e).map(function(r){return mT(r,t,n)})}function WD(u,e){var t=Ks(u);return{pos:e?t.y:t.bottom,bounds:t}}function GD(u,e){return Ot(lk,function(t,n){var r,o=u.get(t),i=(r=o,{hide:function(){return gr(r,$m())},getValue:function(){return Mn.getValue(r)}});e.onAction(i,n.event.buttonApi)})}function jD(u,e,t){return e.bottom-u.y>=(t=void 0===t?.01:t)&&u.bottom-e.y>=t}function UD(u){var e=function(r){var o=r.getBoundingClientRect();if(o.height<=0&&o.width<=0){var i=Wn(Pe.fromDom(r.startContainer),r.startOffset).element;return(gs(i)?ur(i):H.some(i)).filter(Ui).map(function(s){return s.dom.getBoundingClientRect()}).getOr(o)}return o}(u.selection.getRng());if(u.inline){var t=Ei();return pn(t.left+e.left,t.top+e.top,e.width,e.height)}var n=rd(Pe.fromDom(u.getBody()));return pn(n.x+e.left,n.y+e.top,e.width,e.height)}function vT(u,e,t,n){void 0===n&&(n=0);var r,o,i,s,l=es(window),c=Ks(Pe.fromDom(u.getContentAreaContainer())),f=Uf(u)||cf(u)||z1(u),h=(r=c,o=l,i=n,{x:s=Math.max(r.x+i,o.x),width:Math.min(r.right-i,o.right)-s}),p=h.x,y=h.width;if(u.inline&&!f)return pn(p,l.y,y,l.height);var b=function(k,O,P,R,F,G){var X=Pe.fromDom(k.getContainer()),Y=zs(X,".tox-editor-header").getOr(X),Q=Ks(Y),le=R&&!(Q.y>=O.bottom);if(k.inline&&le)return{y:Math.max(Q.bottom+G,P.y),bottom:P.bottom};if(k.inline&&!le)return{y:P.y,bottom:Math.min(Q.y-G,P.bottom)};var ce="line"===F?Ks(X):O;return le?{y:Math.max(Q.bottom+G,P.y),bottom:Math.min(ce.bottom-G,P.bottom)}:{y:Math.max(ce.y+G,P.y),bottom:Math.min(Q.y-G,P.bottom)}}(u,c,l,e.header.isPositionedAtTop(),t,n),S=b.y;return pn(p,S,y,b.bottom-S)}function n1(u){return"node"===u}function yT(u,e){var t=tr(xt(e,function(n){return n.predicate(u.dom)}),function(n){return"contexttoolbar"===n.type});return{contextToolbars:t.pass,contextForms:t.fail}}function qD(u,e,t,n){function r(){var Y=P.get().getOr("node"),Q=n1(Y)?1:0;return vT(u,S,Y,Q)}function o(){return!(u.removed||M()&&b.isContextMenuOpen())}function i(){if(o()){var Y=r(),Q=Vn(P.get(),"node")?(ne=u,k.get().filter(Rs).map(rd).getOrThunk(function(){return UD(ne)})):UD(u);return Y.height<=0||!jD(Q,Y)}return 1;var ne}function s(){k.clear(),O.clear(),P.clear(),ha.hide(R)}function l(){var Y;ha.isOpen(R)&&(co(Y=R.element,"display"),i()?Ar(Y,"display","none"):(O.set(0),ha.reposition(R)))}function c(Y){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Y],behaviours:cn([pr.config({mode:"acyclic"}),zn("pop-dialog-wrap-events",[Mi(function(Q){u.shortcuts.add("ctrl+F9","focus statusbar",function(){return pr.focusIn(Q)})}),Jl(function(Q){u.shortcuts.remove("ctrl+F9")})])])}}function h(Y,Q){var ne,le,ce,ye;X.cancel(),o()&&(ne=G(Y),ce=function(Y,Q){var ne,le,ce,ye,xe,Te,Ee,Ve="node"===Y?S.anchors.node(Q):S.anchors.cursor(),Be=(ne=u,le=Y,ce=M(),ye={lastElement:k.get,isReposition:function(){return Vn(O.get(),0)},getMode:function(){return Du.getMode(t)}},"line"===le?{bubble:Qg(12,0,CA),layouts:{onLtr:function(){return[Hs]},onRtl:function(){return[If]}},overrides:e2}:{bubble:Qg(0,12,CA,1/12),layouts:(xe=ne,Te=ye,Ee=le,ce?{onLtr:function(bt){return[au,os,wu,Ds,Il,Su].concat(nt(bt))},onRtl:function(bt){return[au,wu,os,Il,Ds,Su].concat(nt(bt))}}:{onLtr:function(bt){return[Su,au,Ds,os,Il,wu].concat(nt(bt))},onRtl:function(bt){return[Su,au,Il,wu,Ds,os].concat(nt(bt))}}),overrides:e2});function nt(bt){return n1(Ee)?[(_t=bt,function(wt,Lt,Ht,Ln,Ft){var Yn=function(u,e,t,n,r){var o=UD(u),i=n.lastElement().exists(function(f){return Rt(t,f)}),s=t,l=u.selection.getRng(),c=Wn(Pe.fromDom(l.startContainer),l.startOffset);return l.startContainer===l.endContainer&&l.startOffset===l.endOffset-1&&Rt(c.element,s)?i?K_:oc:i?function(f,h){var p=Gi(f,"position");Ar(f,"position",h);var y=jD(o,Ks(e))&&!n.isReposition()?Gb:K_;return p.each(function(b){return Ar(f,"position",b)}),y}(e,n.getMode()):("fixed"===n.getMode()?r.y+Ei().top:r.y)+(Ra(e)+12)<=o.y?oc:Sg}(xe,Ln,_t,Te,Ft),or=_e(_e({},wt),{y:Ft.y,height:Ft.height});return _e(_e({},Yn(or,Lt,Ht,Ln,Ft)),{alwaysFit:!0})})]:[];var _t}return j(Ve,Be)}(le=Y[0].position,Q),P.set(le),O.set(1),co(ye=R.element,"display"),Vn(ot(Q,k.get(),Rt),!0)||(Ai(ye,kT),Du.reset(t,R)),ha.showWithinBounds(R,c(ne),{anchor:ce,transition:{classes:[kT],mode:"placement"}},function(){return H.some(r())}),Q.fold(k.clear,k.set),i()&&Ar(ye,"display","none"))}var p,y,b=n.backstage,S=b.shared,M=Ca().deviceType.isTouch,k=Zo(),O=Zo(),P=Zo(),R=Uu((p={sink:t,onEscape:function(){return u.focus(),H.some(!0)}},y=$n([]),ha.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(Y){y.set([]),ha.getContent(Y).each(function(Q){co(Q.element,"visibility")}),Ai(Y.element,Ck),co(Y.element,"width")},inlineBehaviours:cn([zn("context-toolbar-events",[xf(Xd(),function(Y,Q){"width"===Q.event.raw.propertyName&&(Ai(Y.element,Ck),co(Y.element,"width"))}),Ot(CT,function(Y,Q){var ne=Y.element;co(ne,"width");var le=ws(ne);ha.setContent(Y,Q.event.contents),vs(ne,Ck);var ce=ws(ne);Ar(ne,"width",le+"px"),ha.getContent(Y).each(function(ye){Q.event.focus.bind(function(xe){return _u(xe),yc(ne)}).orThunk(function(){return pr.focusIn(ye),xd(Vi(ne))})}),Cc.setTimeout(function(){Ar(Y.element,"width",ce+"px")},0)}),Ot(t2,function(Y,Q){ha.getContent(Y).each(function(ne){y.set(y.get().concat([{bar:ne,focus:xd(Vi(Y.element))}]))}),gn(Y,CT,{contents:Q.event.forwardContents,focus:H.none()})}),Ot(ST,function(Y,Q){Ps(y.get()).each(function(ne){y.set(y.get().slice(0,y.get().length-1)),gn(Y,CT,{contents:Qr(ne.bar),focus:ne.focus})})})]),pr.config({mode:"special",onEscape:function(Y){return Ps(y.get()).fold(function(){return p.onEscape()},function(Q){return gr(Y,ST),H.some(!0)})}})]),lazySink:function(){return Sr.value(p.sink)}}))),F=pt(function(){return function(u,e){var t={},n=[],r=[],o={},i={},s=ri(u);return wn(s,function(l){var c,f,h,p,y,b=u[l];"contextform"===b.type?(h=l,y=Fu(wi("ContextForm",Dp,p=b)),(t[h]=y).launch.map(function(S){o["form:"+h]=_e(_e({},p.launch),{type:"contextformtogglebutton"===S.type?"togglebutton":"button",onAction:function(){e(y)}})}),("editor"===y.scope?r:n).push(y),i[h]=y):"contexttoolbar"===b.type&&(c=l,wi("ContextToolbar",Oh,f=b).each(function(S){("editor"===f.scope?r:n).push(S),i[c]=S}))}),{forms:t,inNodeScope:n,inEditorScope:r,lookupTable:i,formNavigators:o}}(e,function(Y){var Q=G([Y]);gn(R,t2,{forwardContents:c(Q)})})}),G=function(Y){var Q=u.ui.registry.getAll().buttons,ne=F(),le=_e(_e({},Q),ne.formNavigators),ce=Eh(u)===ai.scrolling?ai.scrolling:ai.default,ye=pe(Mt(Y,function(xe){return"contexttoolbar"===xe.type?Sk(u,{buttons:le,toolbar:xe.items,allowToolbarGroups:!1},n,H.some(["form:"])):SA(xe,S.providers)}));return xS({type:ce,uid:jn("context-toolbar"),initGroups:ye,onEscape:H.none,cyclicKeying:!0,providers:S.providers})},X=x1(function(){u.hasFocus()&&!u.removed&&(La(R.element,kT)?X.throttle():function(u,e){function t(i){return Rt(i,r)}var n,r=Pe.fromDom(e.getBody()),o=Pe.fromDom(e.selection.getNode());return t(n=o)||$t(r,n)?function(i,s,l){var c=yT(i,s);if(0<c.contextForms.length)return H.some({elem:i,toolbars:[c.contextForms[0]]});var f=yT(i,l);if(0<f.contextForms.length)return H.some({elem:i,toolbars:[f.contextForms[0]]});if(0<c.contextToolbars.length||0<f.contextToolbars.length){var h=function(p){if(p.length<=1)return p;function y(P){return Nn(p,function(R){return R.position===P})}function b(P){return xt(p,function(R){return R.position===P})}var S=y("selection"),M=y("node");if(S||M){if(M&&S){var k=b("node"),O=Mt(b("selection"),function(P){return _e(_e({},P),{position:"node"})});return k.concat(O)}return b(S?"selection":"node")}return b("line")}(c.contextToolbars.concat(f.contextToolbars));return H.some({elem:i,toolbars:h})}return H.none()}(o,u.inNodeScope,u.inEditorScope).orThunk(function(){return l=u,(i=t)(s=o)?H.none():Hr(s,function(c){if(Ui(c)){var f=yT(c,l.inNodeScope),p=f.contextForms,y=0<p.length?p:(S=f.contextToolbars).length<=1?S:b("selection").orThunk(function(){return b("node")}).orThunk(function(){return b("line")}).map(function(M){return M.position}).fold(function(){return[]},function(M){return xt(S,function(k){return k.position===M})});return 0<y.length?H.some({elem:c,toolbars:y}):H.none()}function b(M){return Ao(S,function(k){return k.position===M})}var S;return H.none()},i);var i,s,l}):H.none()}(F(),u).fold(s,function(Y){h(Y.toolbars,H.some(Y.elem))}))},17);u.on("init",function(){u.on("remove",s),u.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",l),u.on("click keyup focus SetContent",X.throttle),u.on(QD,s),u.on("contexttoolbar-show",function(Y){St(F().lookupTable,Y.toolbarKey).each(function(Q){h([Q],si(Y.target!==u,Y.target)),ha.getContent(R).each(pr.focusIn)})}),u.on("focusout",function(Y){Cc.setEditorTimeout(u,function(){yc(t.element).isNone()&&yc(R.element).isNone()&&s()},0)}),u.on("SwitchMode",function(){u.mode.isReadOnly()&&s()}),u.on("AfterProgressState",function(Y){Y.state?s():u.hasFocus()&&X.throttle()}),u.on("NodeChange",function(Y){yc(R.element).fold(X.throttle,ht)})})}(KM=Jx=Jx||{})[KM.SemiColon=0]="SemiColon",KM[KM.Space=1]="Space";var wk,bT,xT,XD=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],vA=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],YD={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},OS={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},BI=Object.freeze({__proto__:null,events:function(u,e){function t(n,r){u.updateState.each(function(o){var i=o(n,r);e.set(i)}),u.renderComponents.each(function(o){var i=Mt(o(r,e.get()),n.getSystem().build);ay(n,i)})}return Ro([Ot(Sf(),function(n,r){var i=r;i.universal||fi(i.channels,u.channel)&&t(n,i.data)}),Mi(function(n,r){u.initialData.each(function(o){t(n,o)})})])}}),yA=Object.freeze({__proto__:null,getState:function(u,e,t){return t}}),th=Ia({fields:[Et("channel"),bo("renderComponents"),bo("updateState"),bo("initialData")],name:"reflecting",active:BI,apis:yA,state:Object.freeze({__proto__:null,init:function(){var u=$n(H.none());return{readState:function(){return u.get().getOr("none")},get:u.get,set:u.set,clear:function(){return u.set(H.none())}}}})}),ZD=ze([Et("toggleClass"),Et("fetch"),ci("onExecute"),qe("getHotspot",H.some),qe("getAnchorOverrides",ze({})),Pf(),ci("onItemExecute"),bo("lazySink"),Et("dom"),oo("onOpen"),as("splitDropdownBehaviours",[_a,pr,zr]),qe("matchWidth",!1),qe("useMinWidth",!1),qe("eventOrder",{}),bo("role")].concat(Gw())),bA=ze([ss({factory:pl,schema:[Et("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:cn([zr.revoke()])}},overrides:function(u){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(u.uid).each(To)},buttonBehaviours:cn([Oo.config({toggleOnExecute:!1,toggleClass:u.toggleClass})])}}}),ss({factory:pl,schema:[Et("dom")],name:"button",defaults:function(){return{buttonBehaviours:cn([zr.revoke()])}},overrides:function(u){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(u.uid).each(function(t){u.onExecute(t,e)})}}}}),af({factory:{sketch:function(u){return{uid:u.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:u.text}}}},schema:[Et("text")],name:"aria-descriptor"}),Md({schema:[Gr()],name:"menu",defaults:function(u){return{onExecute:function(e,t){e.getSystem().getByUid(u.uid).each(function(n){u.onItemExecute(n,e,t)})}}}}),MM()]),_T=hi({name:"SplitDropdown",configFields:ZD(),partFields:bA(),factory:function(u,e,t,n){function r(f){ho.getCurrent(f).each(function(h){go.highlightFirst(h),pr.focusIn(h)})}function o(f){v0(u,Ut,f,n,r,kc.HighlightFirst).get(ht)}function i(f){return To(da(f,u,"button")),H.some(!0)}var s,l=_e(_e({},Ro([Mi(function(f,h){fo(f,u,"aria-descriptor").each(function(p){var y=jn("aria");rr(p.element,"id",y),rr(f.element,"aria-describedby",y)})})])),jr(H.some(o)));return{uid:u.uid,dom:u.dom,components:e,apis:{repositionMenus:function(f){Oo.isOn(f)&&Q1(f)}},eventOrder:_e(_e({},u.eventOrder),((s={})[Wu()]=["disabling","toggling","alloy.base.behaviour"],s)),events:l,behaviours:bs(u.splitDropdownBehaviours,[_a.config({others:{sandbox:function(f){var h=da(f,u,"arrow");return Kf(u,f,{onOpen:function(){Oo.on(h),Oo.on(f)},onClose:function(){Oo.off(h),Oo.off(f)}})}}}),pr.config({mode:"special",onSpace:i,onEnter:i,onDown:function(f){return o(f),H.some(!0)}}),zr.config({}),Oo.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:u.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(u,e){return u.repositionMenus(e)}}}),xA=jn("focus-button"),_A=function(u,e,t){return VD(u,{toolbarButtonBehaviours:[].concat(0<t.length?[zn("toolbarButtonWith",t)]:[]),getApi:mA,onSetup:u.onSetup},e)},$D=function(u,e,t){return j(VD(u,{toolbarButtonBehaviours:[Ur.config({}),Oo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<t.length?[zn("toolbarToggleButtonWith",t)]:[]),getApi:zD,onSetup:u.onSetup},e))},KD=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],E_={button:IS(sC,function(u,e){return _A(u,e.backstage.shared.providers,[])}),togglebutton:IS(uC,function(u,e){return $D(u,e.backstage.shared.providers,[])}),menubutton:IS(Dt,function(u,e){return rS(u,"tox-tbtn",e.backstage,H.none())}),splitbutton:IS(function(u){return wi("SplitButton",OI,u)},function(u,e){return n=u,r=e.backstage.shared,c=jn("channel-update-split-dropdown-display"),f=$n(ht),h={getApi:t,onSetup:n.onSetup},_T.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:_e({"aria-pressed":!1},FD(n.tooltip,r.providers))},onExecute:function(p){n.onAction(t(p))},onItemExecute:function(p,y,b){},splitDropdownBehaviours:cn([kw(r.providers.isDisabled),us(),zn("split-dropdown-events",[Ot(xA,zr.focus),Ip(h,f),vl(h,f)]),v_.config({})]),eventOrder:((o={})[lh()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:(i=t,s=n,l=r.providers,function(p){return Em(function(y){return s.fetch(y)}).map(function(y){return H.from(Nw(j(Am(jn("menu-value"),y,function(b){s.onItemAction(i(p),b)},s.columns,s.presets,qf.CLOSE_ON_EXECUTE,s.select.getOr(Er),l),{movement:Dg(s.columns,s.presets),menuBehaviours:Rl("auto"!==s.columns?[]:[Mi(function(b,S){Jb(b,4,mC(s.presets)).each(function(M){pr.setGridSize(b,M.numRows,M.numColumns)})})])})))})}),parts:{menu:T1(0,0,n.presets)},components:[_T.parts.button(gT(n.icon,n.text,H.none(),H.some(c),H.some([Oo.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),r.providers)),_T.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Uk("chevron-down",r.providers.icons)},buttonBehaviours:cn([kw(r.providers.isDisabled),us(),ew()])}),_T.parts["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]});function t(p){return{isDisabled:function(){return Kn.isDisabled(p)},setDisabled:function(y){return Kn.set(p,y)},setIconFill:function(y,b){zs(p.element,'svg path[id="'+y+'"], rect[id="'+y+'"]').each(function(S){rr(S,"fill",b)})},setIconStroke:function(y,b){zs(p.element,'svg path[id="'+y+'"], rect[id="'+y+'"]').each(function(S){rr(S,"stroke",b)})},setActive:function(y){rr(p.element,"aria-pressed",y),zs(p.element,"span").each(function(b){p.getSystem().getByDom(b).each(function(S){return Oo.set(S,y)})})},isActive:function(){return zs(p.element,"span").exists(function(y){return p.getSystem().getByDom(y).exists(Oo.isOn)})}}}var n,r,o,i,s,l,c,f,h}),grouptoolbarbutton:IS(function(u){return wi("GroupToolbarButton",rT,u)},function(u,e,t){var n,r,i,s,l,c=t.ui.registry.getAll().buttons,f=((n={})[ec]=e.backstage.shared.header.isPositionedAtTop()?Ba.TopToBottom:Ba.BottomToTop,n);if(Eh(t)!==ai.floating)throw new Error("Toolbar groups are only supported when using floating toolbar mode");return i=function(h){return Sk(t,{buttons:c,toolbar:h,allowToolbarGroups:!1},e,H.none())},s=f,t1.sketch({lazySink:(l=e.backstage.shared).getSink,fetch:function(){return Em(function(h){h(Mt(i(r.items),Qf))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:gT((r=u).icon,r.text,r.tooltip,H.none(),H.none(),l.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:s}}}})}),styleSelectButton:function(u,e){return CS(u,t=e.backstage,BD(u,_e({type:"advanced"},t.styleselect)));var t},fontsizeSelectButton:function(u,e){return CS(u,e.backstage,hT(u))},fontSelectButton:function(u,e){return CS(u,e.backstage,A_(u))},formatButton:function(u,e){return CS(u,e.backstage,gA(u))},alignMenuButton:function(u,e){return CS(u,e.backstage,hA(u))}},wT={styleselect:E_.styleSelectButton,fontsizeselect:E_.fontsizeSelectButton,fontselect:E_.fontSelectButton,formatselect:E_.formatButton,align:E_.alignMenuButton},Sk=function(u,e,t,n){var r,o,i,l=!1===(i=e.toolbar)?[]:void 0===i||!0===i?(r=e.buttons,o=Mt(KD,function(c){var f=xt(c.items,function(h){return yn(r,h)||yn(wT,h)});return{name:c.name,items:f}}),xt(o,function(c){return 0<c.items.length})):lr(i)?Mt(i.split("|"),function(c){return{items:c.trim().split(" ")}}):Zn(i,function(c){return yn(c,"name")&&yn(c,"items")})?i:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[]);return xt(Mt(l,function(c){var f=Dr(c.items,function(h){return 0===h.trim().length?[]:(p=u,S=e.allowToolbarGroups,M=t,k=n,St(y=e.buttons,(b=h).toLowerCase()).orThunk(function(){return k.bind(function(O){return ut(O,function(P){return St(y,P+b.toLowerCase())})})}).fold(function(){return St(wT,b.toLowerCase()).map(function(O){return O(p,M)}).orThunk(function(){return H.none()})},function(O){return"grouptoolbarbutton"!==O.type||S?(R=M,F=p,St(E_,(P=O).type).fold(function(){return console.error("skipping button defined by",P),H.none()},function(G){return H.some(G(P,R,F))})):(console.warn("Ignoring the '"+b+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),H.none());var P,R,F}).toArray());var p,y,b,S,M,k});return{title:H.from(u.translate(c.name)),items:f}}),function(c){return 0<c.items.length})},ES=Ca(),wA=ES.os.isiOS()&&ES.os.version.major<=12,zI=Object.freeze({__proto__:null,render:function(u,e,t,n,r){var o=$n(0),i=e.outerContainer;dT(u);var s=Pe.fromDom(r.targetNode),l=Uo(Vi(s));Fv(s,e.mothership,Wl),_h(l,e.uiMothership),u.on("PostRender",function(){HD(u,e,t,n),o.set(u.getWin().innerWidth),Ea.setMenubar(i,k_(u,t)),Ea.setSidebar(i,t.sidebar),function(k,O){function P(){var ye=Q.get();ye.left===X.innerWidth&&ye.top===X.innerHeight||(Q.set(oi(X.innerWidth,X.innerHeight)),cx(k))}function R(){var ye=k.getDoc().documentElement,xe=ne.get();xe.left===ye.offsetWidth&&xe.top===ye.offsetHeight||(ne.set(oi(ye.offsetWidth,ye.offsetHeight)),cx(k))}function F(ye){return k.fire("ScrollContent",ye)}var G=k.dom,X=k.getWin(),Y=k.getDoc().documentElement,Q=$n(oi(X.innerWidth,X.innerHeight)),ne=$n(oi(Y.offsetWidth,Y.offsetHeight));G.bind(X,"resize",P),G.bind(X,"scroll",F);var le=Ql(Pe.fromDom(k.getBody()),"load",R),ce=O.uiMothership.element;k.on("hide",function(){Ar(ce,"display","none")}),k.on("show",function(){co(ce,"display")}),k.on("NodeChange",R),k.on("remove",function(){le.unbind(),G.unbind(X,"resize",P),G.unbind(X,"scroll",F),X=null})}(u,e)});var f,h,p,y,b=Ea.getSocket(i).getOrDie("Could not find expected socket element");wA&&(lc(b.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),h=function(){u.fire("ScrollContent")},p=null,y=function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];cs(p)&&(p=setTimeout(function(){p=null,h.apply(null,k)},20))},f=Ws(b.element,"scroll",y),u.on("remove",f.unbind)),F1(u,e),u.addCommand("ToggleSidebar",function(k,O){Ea.toggleSidebar(i,O),u.fire("ToggleSidebar")}),u.addQueryValueHandler("ToggleSidebar",function(){return Ea.whichSidebar(i)});var S=Eh(u);return S!==ai.sliding&&S!==ai.floating||u.on("ResizeWindow ResizeEditor ResizeContent",function(){var k=u.getWin().innerWidth;k!==o.get()&&(Ea.refreshToolbar(e.outerContainer),o.set(k))}),{iframeContainer:b.element.dom,editorContainer:i.element.dom,api:{enable:function(){Ly(e,!1)},disable:function(){Ly(e,!0)},isDisabled:function(){return Kn.isDisabled(i)}}}}}),JD=Object.freeze({__proto__:null,render:function(u,e,t,n,r){var o=e.mothership,i=e.uiMothership,s=e.outerContainer,l=$n(null),c=Pe.fromDom(r.targetNode),f=function(u,e,t,n,r){function o(){return R.get()&&!u.removed}function i(F){return P?F.fold(ze(0),function(G){return 1<G.components().length?Ra(G.components()[1].element):0}):0}function s(){f.broadcastOn([wd()],{})}function l(F){var G,X,Y,Q,ne;void 0===F&&(F=!1),o()&&(y||(G=S.getOrThunk(function(){var le=bk(Wa(Ga(),"margin-left")).getOr(0);return ws(Ga())-Pc(e).left+le}),Ar(r.get().element,"max-width",G+"px")),P&&Ea.refreshToolbar(h),y||(X=i(Ea.getToolbar(h)),Y=Ks(e),Q=k()?Math.max(Y.y-Ra(r.get().element)+X,0):Y.bottom,lc(h.element,{position:"absolute",top:Math.round(Q)+"px",left:Math.round(Y.x)+"px"})),b&&(ne=r.get(),F?Kc.reset(ne):Kc.refresh(ne)),s())}function c(F){var G,X;void 0===F&&(F=!0),!y&&b&&o()&&(G=M.getDockingMode(),(X=function(Y){switch(bw(u)){case Mm.auto:var Q=i(Ea.getToolbar(h)),ne=Ra(Y.element)-Q,le=Ks(e);if(le.y>ne)return"top";var ce=yr(e),ye=Math.max(ce.dom.scrollHeight,Ra(ce));return le.bottom<ye-ne||rl().bottom<le.bottom-ne?"bottom":"top";case Mm.bottom:return"bottom";default:return"top"}}(r.get()))!==G&&(function(Y){var Q=r.get();Kc.setModes(Q,[Y]),M.setDockingMode(Y);var ne=k()?Ba.TopToBottom:Ba.BottomToTop;rr(Q.element,ec,ne)}(X),F&&l(!0)))}var f=t.uiMothership,h=t.outerContainer,p=Xf.DOM,y=ax(u),b=sx(u),S=E1(u).or(pT(u)),M=n.shared.header,k=M.isPositionedAtTop,O=Eh(u),P=O===ai.sliding||O===ai.floating,R=$n(!1);return{isVisible:o,isPositionedAtTop:k,show:function(){R.set(!0),Ar(h.element,"display","flex"),p.addClass(u.getBody(),"mce-edit-focus"),co(f.element,"display"),c(!1),l()},hide:function(){R.set(!1),t.outerContainer&&(Ar(h.element,"display","none"),p.removeClass(u.getBody(),"mce-edit-focus")),Ar(f.element,"display","none")},update:l,updateMode:c,repositionPopups:s}}(u,c,e,n,l),h=u.getParam("toolbar_persist",!1,"boolean");function p(){var S;l.get()?f.show():(l.set(Ea.getHeader(s).getOrDie()),_h(S=_w(u),o),_h(S,i),HD(u,e,t,n),Ea.setMenubar(s,k_(u,t)),f.show(),function(M,k,O,P){function R(X){var Y=WD(k,O.isPositionedAtTop()),Q=Y.pos,ne=Y.bounds,le=F.get(),ce=le.pos,ye=le.bounds,xe=ne.height!==ye.height||ne.width!==ye.width;F.set({pos:Q,bounds:ne}),xe&&cx(M,X),O.isVisible()&&(ce!==Q?O.update(!0):xe&&(O.updateMode(),O.repositionPopups()))}var F=$n(WD(k,O.isPositionedAtTop()));P||(M.on("activate",O.show),M.on("deactivate",O.hide)),M.on("SkinLoaded ResizeWindow",function(){return O.update(!0)}),M.on("NodeChange keydown",function(X){Cc.requestAnimationFrame(function(){return R(X)})}),M.on("ScrollWindow",function(){return O.updateMode()});var G=so();G.set(Ql(Pe.fromDom(M.getBody()),"load",R)),M.on("remove",function(){G.clear()})}(u,c,f,h),u.nodeChanged())}function y(){return Cc.setEditorTimeout(u,p,0)}return fT(u),u.on("show",p),u.on("hide",f.hide),h||(u.on("focus",y),u.on("blur",f.hide)),u.on("init",function(){(u.hasFocus()||h)&&y()}),F1(u,e),{editorContainer:s.element.dom,api:{show:function(){f.show()},hide:function(){f.hide()},enable:function(){Ly(e,!1)},disable:function(){Ly(e,!0)},isDisabled:function(){return Kn.isDisabled(s)}}}}}),QD="contexttoolbar-hide",SA=function(u,e){var t,n,r,o,i=u.label.fold(function(){return{}},function(c){return{"aria-label":c}}),s=Bo(Np.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:u.initValue(),inputAttributes:i,selectOnFocus:!0,inputBehaviours:cn([pr.config({mode:"special",onEnter:function(c){return l.findPrimary(c).map(function(f){return To(f),!0})},onLeft:function(c,f){return f.cut(),H.none()},onRight:function(c,f){return f.cut(),H.none()}})])})),l=(t=s,r=e,o=Mt(n=u.commands,function(c){return Bo(("contextformtogglebutton"===c.type?function(f,h,p){var b=Dn(h.original,["primary"]),S=Fu(uC(_e(_e({},b),{type:"togglebutton",onAction:ht})));return $D(S,p.backstage.shared.providers,[GD(f,h)])}:function(f,h,p){var b=Dn(h.original,["primary"]),S=Fu(sC(_e(_e({},b),{type:"button",onAction:ht})));return _A(S,p.backstage.shared.providers,[GD(f,h)])})(t,c,{backstage:{shared:{providers:r}}}))}),{asSpecs:function(){return Mt(o,function(c){return c.asSpec()})},findPrimary:function(c){return ut(n,function(f,h){return f.primary?H.from(o[h]).bind(function(p){return p.getOpt(c)}).filter(Qn(Kn.isDisabled)):H.none()})}});return[{title:H.none(),items:[s.asSpec()]},{title:H.none(),items:l.asSpecs()}]},CA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},e2={maxHeightFunction:vh(),maxWidthFunction:iT()},t2=jn("forward-slide"),ST=jn("backward-slide"),CT=jn("change-slide-event"),Ck="tox-pop--resizing",kT="tox-pop--transition",kk={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},kA=(xT=["Infinity",(wk="[0-9]+")+"\\."+PS(wk)+PS(bT="[eE][+-]?[0-9]+"),"\\."+wk+PS(bT),wk+PS(bT)].join("|"),new RegExp("^([+-]?(?:"+xT+"))(.*)$"));function PS(u){return"(?:"+u+")?"}function MT(u,e){function t(){var n=e.getOptions(u),r=e.getCurrent(u).map(e.hash),o=Zo();return Mt(n,function(i){return{type:"togglemenuitem",text:e.display(i),onSetup:function(s){function l(f){f&&(o.on(function(h){return h.setActive(!1)}),o.set(s)),s.setActive(f)}l(Vn(r,e.hash(i)));var c=e.watcher(u,i,l);return function(){o.clear(),c()}},onAction:function(){return e.setCurrent(u,i)}}})}u.ui.registry.addMenuButton(e.name,{tooltip:e.text,icon:e.icon,fetch:function(n){return n(t())},onSetup:e.onToolbarSetup}),u.ui.registry.addNestedMenuItem(e.name,{type:"nestedmenuitem",text:e.text,getSubmenuItems:t,onSetup:e.onMenuSetup})}function TT(u,e){return function(){u.execCommand("mceToggleFormat",!1,e)}}function DT(u,e){return $M(u,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(t){t.setDisabled(u.mode.isReadOnly()||!u.undoManager[e]())})}function Mk(u,e){return{type:"makeshift",x:u,y:e}}function n2(u){return"longpress"===u.type||0===u.type.indexOf("touch")}function r2(u,e,t){switch(t){case"node":return{type:"node",node:H.some(Pe.fromDom((n=u).selection.getNode())),root:Pe.fromDom(n.getBody())};case"point":return function(u,e){return"contextmenu"===e.type||"longpress"===e.type?u.inline?function(s){if(n2(s)){var l=s.touches[0];return Mk(l.pageX,l.pageY)}return Mk(s.pageX,s.pageY)}(e):(t=u.getContentAreaContainer(),n=function(s){if(n2(s)){var l=s.touches[0];return Mk(l.clientX,l.clientY)}return Mk(s.clientX,s.clientY)}(e),r=Xf.DOM.getPos(t),Mk(n.x+r.x,n.y+r.y)):N_(u);var t,n,r}(u,e);case"selection":return N_(u)}var n}function o2(u,e,t,n,r,o){function i(){var y,b,S,M,k,O,P,R,F,G;S=t(),M=n,k=r,P=!(h||c||f&&p),F=r2(y=u,b=e,R=O=o),G=_e({bubble:Qg(0,"point"===R?12:0,HI),layouts:EA,overrides:{maxWidthFunction:iT(),maxHeightFunction:vh()}},F),hf(S,qf.CLOSE_ON_EXECUTE,M,!0).map(function(Y){b.preventDefault(),ha.showMenuWithinBounds(k,{anchor:G},{menu:{markers:Zb("normal"),highlightImmediately:P},data:Y,type:"horizontal"},function(){return H.some(vT(y,M.shared,"node"===O?"node":"selection"))}),y.fire(QD)})}var s,l=Ca(),c=l.os.isiOS(),f=l.os.isOSX(),h=l.os.isAndroid(),p=l.deviceType.isTouch();(f||c)&&"node"!==o?(s=function(){(function(y){function b(){Cc.setEditorTimeout(y,function(){y.selection.setRng(S)},10),O()}var S=y.selection.getRng();function M(P){P.preventDefault(),P.stopImmediatePropagation()}function k(){return O()}y.once("touchend",b),y.on("mousedown",M,!0),y.once("longpresscancel",k);var O=function(){y.off("touchend",b),y.off("longpresscancel",k),y.off("mousedown",M)}})(u),i()},function(y,b){var S=y.selection;if(!(S.isCollapsed()||b.touches.length<1)){var M=b.touches[0],k=S.getRng();return Mv(y.getWin(),ef.domRange(k)).exists(function(O){return O.left<=M.clientX&&O.right>=M.clientX&&O.top<=M.clientY&&O.bottom>=M.clientY})}}(u,e)?s():(u.once("selectionchange",s),u.once("touchend",function(){return u.off("selectionchange",s)}))):i()}function AA(u){return"string"==typeof u?u.split(/[ ,]/):u}function AT(u){return u.getParam("contextmenu_never_use_native",!1,"boolean")}function Tk(u){return lr(u)?"|"===u:"separator"===u.type}function i2(u,e){if(0===e.length)return u;var t=Ps(u).filter(function(n){return!Tk(n)}).fold(function(){return[]},function(n){return[FT]});return u.concat(t).concat(e).concat([FT])}function r1(u,e){return"longpress"!==e.type&&(2!==e.button||e.target===u.getBody()&&""===e.pointerType)}function a2(u,e){return r1(u,e)?u.selection.getStart(!0):e.target}function IT(u,e,t){function n(s){return ha.hide(i)}function r(s){var l;AT(u)&&s.preventDefault(),s.ctrlKey&&!AT(u)||!1===u.getParam("contextmenu")||(l=function(c,f){var h=c.getParam("contextmenu_avoid_overlap","","string"),p=r1(c,f)?"selection":"point";if(tl(h)){var y=a2(c,f);return vx(Pe.fromDom(y),h)?"node":p}return p}(u,s),(o()?o2:function(c,f,h,p,y,b){var S=h(),M=r2(c,f,b);hf(S,qf.CLOSE_ON_EXECUTE,p,!1).map(function(k){f.preventDefault(),ha.showMenuAt(y,{anchor:M},{menu:{markers:Zb("normal")},data:k})})})(u,s,function(){var c,f,h,p=a2(u,s),y=u.ui.registry.getAll(),b=(h=(f=u).ui.registry.getAll().contextMenus,H.from(f.getParam("contextmenu")).map(AA).getOrThunk(function(){return xt(AA("link linkchecker image imagetools table spellchecker configurepermanentpen"),function(k){return yn(h,k)})})),S=y.contextMenus,M=p;return 0<(c=Jo(b,function(k,O){return St(S,O.toLowerCase()).map(function(P){var R=P.update(M);if(lr(R))return i2(k,R.split(" "));if(0<R.length){var F=Mt(R,VT);return i2(k,F)}return k}).getOrThunk(function(){return k.concat([O])})},[])).length&&Tk(c[c.length-1])&&c.pop(),c},t,i,l))}var o=Ca().deviceType.isTouch,i=Uu(ha.sketch({dom:{tag:"div"},lazySink:e,onEscape:function(){return u.focus()},onShow:function(){return t.setContextMenuState(!0)},onHide:function(){return t.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:cn([zn("dismissContextMenu",[Ot(cl(),function(s,l){Kr.close(s),u.focus()})])])}));u.on("init",function(){var s="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(o()?"":" ResizeWindow");u.on(s,n),u.on("longpress contextmenu",r)})}function OT(u){return function(e){return e.translate(-u.left,-u.top)}}function nv(u){return function(e){return e.translate(u.left,u.top)}}function rv(u){return function(e,t){return Jo(u,function(n,r){return r(n)},oi(e,t))}}function RS(u,e,t){return u.fold(rv([nv(t),OT(e)]),rv([OT(e)]),rv([]))}function P_(u,e,t){return u.fold(rv([nv(t)]),rv([]),rv([nv(e)]))}function s2(u,e,t){return u.fold(rv([]),rv([OT(t)]),rv([nv(e),OT(t)]))}function u2(u,e,t){var n=u.fold(function(r,o){return{position:H.some("absolute"),left:H.some(r+"px"),top:H.some(o+"px")}},function(r,o){return{position:H.some("absolute"),left:H.some(r-t.left+"px"),top:H.some(o-t.top+"px")}},function(r,o){return{position:H.some("fixed"),left:H.some(r+"px"),top:H.some(o+"px")}});return _e({right:H.none(),bottom:H.none()},n)}function Dk(u,e,t,n){function r(o,i){return function(s,l){var c=o(e,t,n);return i(s.getOr(c.left),l.getOr(c.top))}}return u.fold(r(s2,WT),r(P_,db),r(RS,ov))}function Ak(u,e){var t=Wi(u,e);return Gn(t)?NaN:parseInt(t,10)}function l2(u,e,t,n){return ut(u,function(r){var o,i,s=r.sensor,l=r.range.left,c=r.range.top,f=P_(e,o=t,i=n),h=P_(s,o,i);return Math.abs(f.left-h.left)<=l&&Math.abs(f.top-h.top)<=c?H.some({output:Dk(r.output,e,t,n),extra:r.extra}):H.none()})}function PT(u,e){var t;u.getSystem().addToGui(e),ur((t=e).element).filter(Ui).each(function(n){Gi(n,"z-index").each(function(r){rr(n,f2,r)}),Ar(n,"z-index",Wa(t.element,"z-index"))})}function c2(u){ur(u.element).filter(Ui).each(function(e){ui(e,f2).fold(function(){return co(e,"z-index")},function(t){return Ar(e,"z-index",t)}),Mo(e,f2)}),u.getSystem().removeFromGui(u)}function RT(u,e,t){return u.getSystem().build(du.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[e]},events:t}))}function NS(u,e){return{bounds:u.getBounds(),height:Ec(e.element),width:At(e.element)}}function NT(u,e,t,n,r){var o=t.update(n,r),i=t.getStartData().getOrThunk(function(){return NS(e,u)});o.each(function(s){var l,c,f,h,p,b,S,M,k,O,P,R,F,G,X,Y,Q,ne,le,ce,ye,xe,Te,Ee,Ve=u,Be=i,nt=s,bt=(l=e).getTarget(Ve.element);l.repositionTarget&&(c=Ei(rt(Ve.element)),f=Ie(bt),ye=Gi(ce=bt,"left"),xe=Gi(ce,"top"),Te=Gi(ce,"position"),Ee=function(_t,wt,Lt){return("fixed"===Lt?ov:WT)(parseInt(_t,10),parseInt(wt,10))},h=(ye.isSome()&&xe.isSome()&&Te.isSome()?H.some(Ee(ye.getOrDie(),xe.getOrDie(),Te.getOrDie())):H.none()).getOrThunk(function(){var _t=Pc(ce);return db(_t.left,_t.top)}),p=Ve,b=h,S=c,M=f,k=nt,O=Be,R=l.snaps.fold(function(){var _t,wt,Lt=RS((_t=k.left,wt=k.top,b.fold(function(Ht,Ln){return WT(Ht+_t,Ln+wt)},function(Ht,Ln){return db(Ht+_t,Ln+wt)},function(Ht,Ln){return ov(Ht+_t,Ln+wt)})),S,M);return ov(Lt.left,Lt.top)},function(_t){var wt=function(u,e,t,n,r,o){var i,s,l,c,f,h,p=(i=t,s=n,f=Ak(c=u.element,(l=e).leftAttr),h=Ak(c,l.topAttr),(isNaN(f)||isNaN(h)?H.none():H.some(oi(f,h))).fold(function(){return i},function(O){return ov(O.left+s.left,O.top+s.top)})),y=(e.mustSnap?BS:PA)(u,e,p,r,o),b=RS(p,r,o),S=e,M=b,k=u.element;return rr(k,S.leftAttr,M.left+"px"),rr(k,S.topAttr,M.top+"px"),y.fold(function(){return{coord:ov(b.left,b.top),extra:H.none()}},function(O){return{coord:O.output,extra:O.extra}})}(p,_t,b,k,S,M);return wt.extra.each(function(Lt){_t.onSensor(p,Lt)}),wt.coord}),X=(P=O).bounds,Y=P_(R,F=S,G=M),Q=iu(Y.left,X.x,X.x+X.width-P.width),ne=iu(Y.top,X.y,X.y+X.height-P.height),le=db(Q,ne),$i(bt,u2(R.fold(function(){var _t=s2(le,F,G);return WT(_t.left,_t.top)},ze(le),function(){var _t=RS(le,F,G);return ov(_t.left,_t.top)}),0,f))),l.onDrag(Ve,bt,nt)})}function LS(u,e,t,n){e.each(c2),t.snaps.each(function(o){var i,s;Mo(s=u.element,(i=o).leftAttr),Mo(s,i.topAttr)});var r=t.getTarget(u.element);n.reset(),t.onDrop(u,r)}function LT(u){return function(e,t){function n(r){t.setStartData(NS(e,r))}return Ro(me([Ot(ca(),function(r){t.getStartData().each(function(){return n(r)})})],u(e,t,n),!0))}}function BT(u,e,t){return[Ot(Lc(),function(n,r){var o,i,s,l,c;0===r.event.raw.button&&(r.stop(),s={drop:o=function(){return LS(n,H.some(l),u,e)},delayDrop:(i=IC(o,200)).schedule,forceDrop:o,move:function(f){i.cancel(),NT(n,u,e,h2,f)}},l=RT(n,u.blockerClass,(c=s,Ro([Ot(Lc(),c.forceDrop),Ot(jg(),c.drop),Ot(Jh(),function(f,h){c.move(h.event)}),Ot(Zm(),c.delayDrop)]))),t(n),PT(n,l))})]}function zT(u,e,t){function n(o){LS(o,r.get(),u,e),r.clear()}var r=Zo();return[Ot(ul(),function(o,i){i.stop();var l,c,f,h=RT(o,u.blockerClass,(c=l=function(){return n(o)},f=function(p){NT(o,u,e,m2,p)},Ro([Ot(ul(),c),Ot(Yo(),l),Ot(dv(),l),Ot(Da(),function(p,y){f(y.event)})])));r.set(h),t(o),PT(o,h)}),Ot(Da(),function(o,i){i.stop(),NT(o,u,e,m2,i.event)}),Ot(Yo(),function(o,i){i.stop(),n(o)}),Ot(dv(),n)]}function d2(u,e,t,n,r,o){return u.fold(function(){return fb.snap({sensor:db(t-20,n-20),range:oi(r,o),output:db(H.some(t),H.some(n)),extra:{td:e}})},function(i){var s=t-20,l=n-20,c=i.element.dom.getBoundingClientRect();return fb.snap({sensor:db(s,l),range:oi(40,40),output:db(H.some(t-c.width/2),H.some(n-c.height/2)),extra:{td:e}})})}function IA(u,e,t){return{getSnapPoints:u,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(n,r){var o=r.td,i=e.get(),s=o;i.exists(function(l){return Rt(l,s)})||(e.set(o),t(o))},mustSnap:!0}}function Ik(u){return Bo(pl.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:cn([fb.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:u}),v_.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))}var R_,o1,VI={name:"lineheight",text:"Line height",icon:"line-height",getOptions:function(u){return u.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},hash:function(u){return e=["fixed","relative","empty"],H.from(kA.exec(u)).bind(function(t){var n=Number(t[1]),r=t[2],o=r;return Nn(e,function(i){return Nn(kk[i],function(s){return o===s})})?H.some({value:n,unit:r}):H.none()}).map(function(t){return t.value+t.unit}).getOr(u);var e},display:Ut,watcher:function(u,e,t){return u.formatter.formatChanged("lineheight",t,!1,{value:e}).unbind},getCurrent:function(u){return H.from(u.queryCommandValue("LineHeight"))},setCurrent:function(u,e){return u.execCommand("LineHeight",!1,e)}},N_=function(u){return{type:"selection",root:Pe.fromDom(u.selection.getNode())}},EA={onLtr:function(){return[au,os,wu,Ds,Il,Su,oc,Sg,lf,Dh,Is,xs]},onRtl:function(){return[au,wu,os,Il,Ds,Su,oc,Sg,Is,xs,lf,Dh]}},HI={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},FT={type:"separator"},VT=function(u){function e(n){return{text:n.text,icon:n.icon,disabled:n.disabled,shortcut:n.shortcut}}var t;if(lr(u))return u;switch(u.type){case"separator":return FT;case"submenu":return _e(_e({type:"nestedmenuitem"},e(u)),{getSubmenuItems:function(){var n=u.getSubmenuItems();return lr(n)?n:Mt(n,VT)}});default:return _e(_e({type:"menuitem"},e(u)),{onAction:(t=u.onAction,function(){return t()})})}},HT=ua([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),WT=HT.offset,db=HT.absolute,ov=HT.fixed,BS=function(u,e,t,n,r){var o=e.getSnapPoints(u);return l2(o,t,n,r).orThunk(function(){return Jo(o,function(i,s){var l,c,f,h,p,y,b,S=(l=s.sensor,h=P_(t,c=n,f=r),p=P_(l,c,f),y=Math.abs(h.left-p.left),b=Math.abs(h.top-p.top),oi(y,b));return i.deltas.fold(function(){return{deltas:H.some(S),snap:H.some(s)}},function(M){return(S.left+S.top)/2<=(M.left+M.top)/2?{deltas:H.some(S),snap:H.some(s)}:i})},{deltas:H.none(),snap:H.none()}).snap.map(function(i){return{output:Dk(i.output,t,n,r),extra:i.extra}})})},PA=function(u,e,t,n,r){return l2(e.getSnapPoints(u),t,n,r)},GT=Object.freeze({__proto__:null,snapTo:function(u,e,t,n){var r,o,i,s=e.getTarget(u.element);e.repositionTarget&&(r=Ei(rt(u.element)),o=Ie(s),$i(s,u2(Dk((i=n).output,i.output,r,o),0,o)))}}),f2="data-initial-z-index",RA=ka("snaps",[Et("getSnapPoints"),oo("onSensor"),Et("leftAttr"),Et("topAttr"),qe("lazyViewport",rl),qe("mustSnap",!1)]),jT=[qe("useFixed",Er),Et("blockerClass"),qe("getTarget",Ut),qe("onDrag",ht),qe("repositionTarget",!0),qe("onDrop",ht),ki("getBounds",rl),RA],h2=Object.freeze({__proto__:null,getData:function(u){return H.from(oi(u.x,u.y))},getDelta:function(u,e){return oi(e.left-u.left,e.top-u.top)}}),g2=me(me([],jT,!0),[wo("dragger",{handlers:LT(BT)})],!1),m2=Object.freeze({__proto__:null,getData:function(u){var e,t=u.raw.touches;return 1===t.length?H.some(oi((e=t[0]).clientX,e.clientY)):H.none()},getDelta:function(u,e){return oi(e.left-u.left,e.top-u.top)}}),NA=me(me([],jT,!0),[wo("dragger",{handlers:LT(zT)})],!1),LA=me(me([],jT,!0),[wo("dragger",{handlers:LT(function(u,e,t){return me(me([],BT(u,e,t),!0),zT(u,e,t),!0)})})],!1),fb=ou({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:g2,touch:NA,mouseOrTouch:LA}),name:"dragging",active:{events:function(u,e){return u.dragger.handlers(u,e)}},extra:{snap:function(u){return{sensor:u.sensor,range:u.range,output:u.output,extra:H.from(u.extra)}}},state:Object.freeze({__proto__:null,init:function(){var u=H.none(),e=H.none(),t=ze({});return dl({readState:t,reset:function(){u=H.none(),e=H.none()},update:function(n,r){return n.getData(r).bind(function(o){return i=n,s=o,l=u.map(function(c){return i.getDelta(c,s)}),u=H.some(s),l;var i,s,l})},getStartData:function(){return e},setStartData:function(n){e=H.some(n)}})}}),apis:GT});function UT(u,e,t){var n,r,o,i,s,l,c=Pe.fromDom(u.getContainer());dt((n=u,r=e,o=t,i=Ra(c),s=ws(c),(l={}).height=mT(i+r.top,Qb(n),ex(n)),o===R_.Both&&(l.width=mT(s+r.left,O1(n),E1(n))),l),function(f,h){return Ar(c,h,xk(f)),0}),u.fire("ResizeEditor")}function zS(u,e,t,n){return UT(u,oi(20*t,20*n),e),H.some(!0)}function L_(u){function e(){return h.bind(Ea.getHeader)}function t(){return Sr.value(P)}function n(){return h.bind(function(Fo){return Ea.getThrobber(Fo)}).getOrDie("Could not find throbber element")}var r,o,i,s,l=u.inline,c=l?JD:zI,f=sx(u)?nT:QM,h=H.none(),p=Ca(),y=p.browser.isIE()?["tox-platform-ie"]:[],b=p.deviceType.isTouch()?["tox-platform-touch"]:[],S=ff(u),M=_w(u),k=Td.isRtl()?{attributes:{dir:"rtl"}}:{},O={attributes:((r={})[ec]=S?Ba.BottomToTop:Ba.TopToBottom,r)},P=Uu((o=Rt(Ga(),M)&&"grid"===Wa(M,"display"),i={dom:_e({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(y).concat(b)},k),behaviours:cn([Du.config({useFixed:function(){return f.isDocked(e)}})])},s={dom:{styles:{width:document.body.clientWidth+"px"}},events:Ro([Ot(Cf(),function(){Ar(Or.element,"width",document.body.clientWidth+"px")})])},j(i,o?s:{}))),R=Bo({dom:{tag:"div",classes:["tox-anchorbar"]}}),F=function(u,e,t){var n,r,o,i,s,l,c,f,h,p,y,b,S,M=$n(!1),k={isPositionedAtTop:function(){return"top"===n.get()},getDockingMode:(n=$n(ff(e)?"bottom":"top")).get,setDockingMode:n.set},O={shared:{providers:{icons:function(){return e.ui.registry.getAll().icons},menuItems:function(){return e.ui.registry.getAll().menuItems},translate:Td.translate,isDisabled:function(){return e.mode.isReadOnly()||e.ui.isDisabled()},getSetting:e.getParam.bind(e)},interpreter:function(F){return SD(DI,F,O)},anchors:C_(e,t,k.isPositionedAtTop),header:k,getSink:function(){return Sr.value(u)}},urlinput:ue(e),styleselect:(h=$n([]),p=$n([]),y=$n([]),b=$n([]),S=$n(!(f=function(F){var G=F.items;return void 0!==G&&0<G.length?Dr(G,f):[F.format]})),(c=e).on("PreInit",function(F){var G=Kx(c),X=dk(c,G,P,R);h.set(X),p.set(Dr(X,f))}),c.on("addStyleModifications",function(F){var G=dk(c,F.items,P,R);y.set(G),S.set(F.replace),b.set(Dr(G,f))}),{getData:function(){var F=S.get()?[]:h.get(),G=y.get();return F.concat(G)},getFlattenedKeys:function(){var F=S.get()?[]:p.get(),G=b.get();return F.concat(G)}}),colorinput:{colorPicker:function(F,G){f0(l)(F,G)},hasCustomColors:function(){return Pp(s)},getColors:function(){return Ow(i)},getColorCols:(o=i=s=l=e,function(){return Wy(o)})},dialog:{isDraggableModal:(r=e,function(){return r.getParam("draggable_modal",!1,"boolean")})},isContextMenuOpen:function(){return M.get()},setContextMenuState:function(F){return M.set(F)}};function P(F){return function(){return c.formatter.match(F)}}function R(F){return function(){var G=c.formatter.get(F);return void 0!==G?H.some({tag:0<G.length&&(G[0].inline||G[0].block)||"div",styles:c.dom.parseStyle(c.formatter.getCssText(F))}):H.none()}}return O}(P,u,function(){return h.bind(function(Fo){return R.getOpt(Fo)}).getOrDie("Could not find a anchor bar element")}),G=Ea.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:F,onEscape:function(){u.focus()}}),X=Eh(u),Y=Ea.parts.toolbar(_e({dom:{tag:"div",classes:["tox-toolbar"]},getSink:t,providers:F.shared.providers,onEscape:function(){u.focus()},type:X,lazyToolbar:function(){return h.bind(function(Fo){return Ea.getToolbar(Fo)}).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return e().getOrDie("Could not find header element")}},O)),Q=Ea.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:F.shared.providers,onEscape:function(){u.focus()},type:X}),ne=Ea.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),le=Ea.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),ce=Ea.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:F}),ye=u.getParam("statusbar",!0,"boolean")&&!l?H.some(function(u,e){var t,n,r,o,i,s,l,c,f,h,p,y,b,S,M,k;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(k=[],u.getParam("elementpath",!0,"boolean")&&k.push((b=u,M=e,(S={}).delimiter||(S.delimiter="\xbb"),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:cn([pr.config({mode:"flow",selector:"div[role=button]"}),Kn.config({disabled:M.isDisabled}),us(),xa.config({}),Ur.config({}),zn("elementPathEvents",[Mi(function(P,R){b.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return pr.focusIn(P)}),b.on("NodeChange",function(F){var G,X,Y=function(Q){for(var ne=[],le=Q.length;0<le--;){var ce=Q[le];if(1===ce.nodeType&&!function(xe){if(1===xe.nodeType&&("BR"===xe.nodeName||xe.getAttribute("data-mce-bogus")||"bookmark"===xe.getAttribute("data-mce-type")))return 1}(ce)){var ye=b.fire("ResolveName",{name:ce.nodeName.toLowerCase(),target:ce});if(ye.isDefaultPrevented()||ne.push({name:ye.name,element:ce}),ye.isPropagationStopped())break}}return ne}(F.parents);Ur.set(P,0<Y.length?(G=Mt(Y||[],function(Q,ne){return pl.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":ne,"tab-index":-1,"aria-level":ne+1},innerHtml:Q.name},action:function(le){b.focus(),b.selection.select(Q.element),b.nodeChanged()},buttonBehaviours:cn([Dm(M.isDisabled),us()])})}),X={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+S.delimiter+" "}},Jo(G.slice(1),function(Q,ne){var le=Q;return le.push(X),le.push(ne),le},[G[0]])):[])})})])]),components:[]})),u.hasPlugin("wordcount")&&k.push((h=u,p=e,pl.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:cn([Dm(p.isDisabled),us(),xa.config({}),Ur.config({}),Mn.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),zn("wordcount-events",[nu(function(P){var R=Mn.getValue(P),F="words"===R.mode?"characters":"words";Mn.setValue(P,{mode:F,count:R.count}),O(P,R.count,F)}),Mi(function(P){h.on("wordCountUpdate",function(R){var F=Mn.getValue(P).mode;Mn.setValue(P,{mode:F,count:R.wordCount}),O(P,R.wordCount,F)})})])]),eventOrder:((y={})[Wu()]=["disabling","alloy.base.behaviour","wordcount-events"],y)}))),u.getParam("branding",!0,"boolean")&&k.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(f=Td.translate(["Powered by {0}","Tiny"]))+'">'+f+"</a>"}}),t=0<k.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:k}]:[],o=e,s=!(i=r=u).hasPlugin("autoresize"),n=(c=!1===(l=i.getParam("resize",s))?R_.None:"both"===l?R_.Both:R_.Vertical)===R_.None?H.none():H.some(xg("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:o.translate("Resize")},behaviours:[fb.config({mode:"mouse",repositionTarget:!1,onDrag:function(P,R,F){return UT(r,F,c)},blockerClass:"tox-blocker"}),pr.config({mode:"special",onLeft:function(){return zS(r,c,-1,0)},onRight:function(){return zS(r,c,1,0)},onUp:function(){return zS(r,c,0,-1)},onDown:function(){return zS(r,c,0,1)}}),xa.config({}),zr.config({})]},o.icons)),t.concat(n.toArray()))};function O(P,R,F){return Ur.set(P,[sl(p.translate(["{0} "+F,R[F]]))])}}(u,F.shared.providers)):H.none(),xe={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[ne,le]},Te=z1(u),Ee=cf(u),Ve=Uf(u),Be=Ea.parts.header({dom:_e({tag:"div",classes:["tox-editor-header"]},O),components:pe([Ve?[G]:[],Te?[Q]:Ee?[Y]:[],ax(u)?[]:[R.asSpec()]]),sticky:sx(u),editor:u,sharedBackstage:F.shared}),nt=pe([S?[]:[Be],l?[]:[xe],S?[Be]:[]]),bt=pe([[{dom:{tag:"div",classes:["tox-editor-container"]},components:nt}],l?[]:ye.toArray(),[ce]]),_t=Tm(u),wt=_e(_e({role:"application"},Td.isRtl()?{dir:"rtl"}:{}),_t?{"aria-hidden":"true"}:{}),Lt=Uu(Ea.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(l?["tox-tinymce-inline"]:[]).concat(S?["tox-tinymce--toolbar-bottom"]:[]).concat(b).concat(y),styles:_e({visibility:"hidden"},_t?{opacity:"0",border:"0"}:{}),attributes:wt},components:bt,behaviours:cn([us(),Kn.config({disableClass:"tox-tinymce--disabled"}),pr.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}));h=H.some(Lt),u.shortcuts.add("alt+F9","focus menubar",function(){Ea.focusMenubar(Lt)}),u.shortcuts.add("alt+F10","focus toolbar",function(){Ea.focusToolbar(Lt)}),u.addCommand("ToggleToolbarDrawer",function(){Ea.toggleToolbarDrawer(Lt)}),u.addQueryStateHandler("ToggleToolbarDrawer",function(){return Ea.isToolbarDrawerToggled(Lt)});var Ht,Ln,Ft,Yn,or,Tr,Ko,Lo,Nr,_n=yx(Lt),Or=yx(P);return Ht=u,Ln=_n,Ft=Or,Yn=ng(),or=Ws(Yn,"touchstart",Jc),Tr=Ws(Yn,"touchmove",function(Fo){return xi(fv(),Fo)}),Ko=Ws(Yn,"touchend",function(Fo){return xi(uh(),Fo)}),Lo=Ws(Yn,"mousedown",Jc),Nr=Ws(Yn,"mouseup",function(Fo){0===Fo.raw.button&&ga(mp(),{target:Fo.target})}),Ht.on("PostRender",function(){Ht.on("click",zl),Ht.on("tap",zl),Ht.on("mouseup",Qc),Ht.on("mousedown",Fl),Ht.on("ScrollWindow",Ic),Ht.on("ResizeWindow",Oc),Ht.on("ResizeEditor",zd),Ht.on("AfterProgressState",ed),Ht.on("DismissPopups",bb)}),Ht.on("remove",function(){Ht.off("click",zl),Ht.off("tap",zl),Ht.off("mouseup",Qc),Ht.off("mousedown",Fl),Ht.off("ScrollWindow",Ic),Ht.off("ResizeWindow",Oc),Ht.off("ResizeEditor",zd),Ht.off("AfterProgressState",ed),Ht.off("DismissPopups",bb),Lo.unbind(),or.unbind(),Tr.unbind(),Ko.unbind(),Nr.unbind()}),Ht.on("detach",function(){Wc(Ln),Wc(Ft),Ln.destroy(),Ft.destroy()}),{mothership:_n,uiMothership:Or,backstage:F,renderUI:function(){var Fo,j0;f.setup(u,F.shared,e),function(u,e){var t,n,r,o,i,s,l,c,f,h,p,y,b,S,M,k,O,P,R,F,G,X,Y,Q,ne,le=u;wn([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(ce){le.ui.registry.addToggleButton(ce.name,{tooltip:ce.text,icon:ce.icon,onAction:Bg(le,ce.cmd),onSetup:gk(le,ce.name)})}),le.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:Bg(le,"JustifyNone")}),function(u){var e,t;(function(n){Qu.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(i,s){n.ui.registry.addToggleButton(i.name,{tooltip:i.text,icon:i.icon,onSetup:gk(n,i.name),onAction:TT(n,i.name)})});for(var r=1;r<=6;r++){var o="h"+r;n.ui.registry.addToggleButton(o,{text:o.toUpperCase(),tooltip:"Heading "+r,onSetup:gk(n,o),onAction:TT(n,o)})}})(u),e=u,Qu.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(n){e.ui.registry.addButton(n.name,{tooltip:n.text,icon:n.icon,onAction:Bg(e,n.action)})}),t=u,Qu.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(n){t.ui.registry.addToggleButton(n.name,{tooltip:n.text,icon:n.icon,onAction:Bg(t,n.action),onSetup:gk(t,n.name)})})}(Q=u),ne=Q,Qu.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(ce){ne.ui.registry.addMenuItem(ce.name,{text:ce.text,icon:ce.icon,shortcut:ce.shortcut,onAction:Bg(ne,ce.action)})}),ne.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:TT(ne,"code")}),Y=M_(0,p=f=e,hA(h=c=u)),h.ui.registry.addNestedMenuItem("align",{text:p.shared.providers.translate("Align"),getSubmenuItems:function(){return Y.items.validateItems(Y.getStyleItems())}}),S=M_(0,b=f,A_(y=c)),y.ui.registry.addNestedMenuItem("fontformats",{text:b.shared.providers.translate("Fonts"),getSubmenuItems:function(){return S.items.validateItems(S.getStyleItems())}}),M=c,O=_e({type:"advanced"},(k=f).styleselect),P=M_(0,k,BD(M,O)),M.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return P.items.validateItems(P.getStyleItems())}}),F=M_(0,f,gA(R=c)),R.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return F.items.validateItems(F.getStyleItems())}}),X=M_(0,f,hT(G=c)),G.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return X.items.validateItems(X.getStyleItems())}}),(s=i=u).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:DT(s,"hasUndo"),onAction:Bg(s,"undo")}),s.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:DT(s,"hasRedo"),onAction:Bg(s,"redo")}),(l=i).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:DT(l,"hasUndo"),onAction:Bg(l,"undo")}),l.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:DT(l,"hasRedo"),onAction:Bg(l,"redo")}),function(ce){var ye;(ye=ce).addCommand("mceApplyTextcolor",function(Ee,Ve){var Be,nt=Ee,bt=Ve;(Be=ye).undoManager.transact(function(){Be.focus(),Be.formatter.apply(nt,{value:bt}),Be.nodeChanged()})}),ye.addCommand("mceRemoveTextcolor",function(Ee){var Ve,Be=Ee;(Ve=ye).undoManager.transact(function(){Ve.focus(),Ve.formatter.remove(Be,{value:null},null,!0),Ve.nodeChanged()})});var xe=$n(null),Te=$n(null);Rh(ce,"forecolor","forecolor","Text color",xe),Rh(ce,"backcolor","hilitecolor","Background color",Te),Yf(ce,"forecolor","forecolor","Text color"),Yf(ce,"backcolor","hilitecolor","Background color")}(u),function(u){var e;u.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Bg(u,"mceToggleVisualAid")}),u.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:$M(e=u,"VisualAid",function(t){t.setActive(e.hasVisual)}),onAction:Bg(u,"mceToggleVisualAid")})}(u),(r=u).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:$M(o=r,"NodeChange",function(ce){ce.setDisabled(!o.queryCommandState("outdent"))}),onAction:Bg(r,"outdent")}),r.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:Bg(r,"indent")}),MT(t=u,VI),H.from((n=t).getParam("content_langs",void 0,"array")).map(function(ce){return{name:"language",text:"Language",icon:"language",getOptions:ze(ce),hash:function(ye){return Gn(ye.customCode)?ye.code:ye.code+"/"+ye.customCode},display:function(ye){return ye.title},watcher:function(ye,xe,Te){return ye.formatter.formatChanged("lang",Te,!1,{value:xe.code,customValue:xe.customCode}).unbind},getCurrent:function(ye){return br(Pe.fromDom(ye.selection.getNode()),function(xe){return H.some(xe).filter(Ui).bind(function(Te){return ui(Te,"lang").map(function(Ee){return{code:Ee,customCode:ui(Te,"data-mce-lang").getOrUndefined(),title:""}})})})},setCurrent:function(ye,xe){return ye.execCommand("Lang",!1,xe)},onToolbarSetup:function(ye){var xe=so();return ye.setActive(n.formatter.match("lang",{},void 0,!0)),xe.set(n.formatter.formatChanged("lang",ye.setActive,!0)),xe.clear}}}).each(function(ce){return MT(t,ce)})}(u,F),IT(u,t,F),j0=(Fo=u).ui.registry.getAll().sidebars,wn(ri(j0),function(j_){function xI(){return Vn(H.from(Fo.queryCommandValue("ToggleSidebar")),j_)}var tO=j0[j_];Fo.ui.registry.addToggleButton(j_,{icon:tO.icon,tooltip:tO.tooltip,onAction:function(eO){Fo.execCommand("ToggleSidebar",!1,j_),eO.setActive(xI())},onSetup:function(eO){function nO(){return eO.setActive(xI())}return Fo.on("ToggleSidebar",nO),function(){Fo.off("ToggleSidebar",nO)}}})}),function(u,e,t){function n(s){var l;!r.get()||"focusin"===(l=s).type&&(l.composed?ia(l.composedPath()):H.from(l.target)).map(Pe.fromDom).filter(Ui).exists(function(c){return La(c,"mce-pastebin")})||(s.preventDefault(),nr(e()),u.editorManager.setActive(u))}var r=$n(!1),o=Zo();function i(s){var l,c,f,h,p,y,b,S,M,k;s!==r.get()&&(r.set(s),l=u,c=e(),h=t.providers,S=c.element,M=f=s,k="data-mce-"+(p="tabindex"),H.from(l.iframeElement).map(Pe.fromDom).each(function(O){M?(ui(O,p).each(function(P){return rr(O,k,P)}),rr(O,p,-1)):(Mo(O,p),ui(O,k).each(function(P){rr(O,p,P),Mo(O,k)}))}),f?(jm.block(c,(b=h,function(O,P){return{dom:{tag:"div",attributes:{"aria-label":b.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:fn('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})),co(S,"display"),Mo(S,"aria-hidden"),l.hasFocus()&&nr(c)):(y=ho.getCurrent(c).exists(function(O){return rp(O.element)}),jm.unblock(c),Ar(S,"display","none"),rr(S,"aria-hidden","true"),y&&l.focus()),u.fire("AfterProgressState",{state:s}))}u.inline||u.on("PreInit",function(){u.dom.bind(u.getWin(),"focusin",n),u.on("BeforeExecCommand",function(s){"mcefocus"===s.command.toLowerCase()&&!0!==s.value&&n(s)})}),u.on("ProgressState",function(s){var l;o.on(Cc.clearTimeout),Fn(s.time)?(l=Cc.setEditorTimeout(u,function(){return i(s.state)},s.time),o.set(l)):(i(s.state),o.clear())})}(u,n,F.shared),Pt(u.getParam("toolbar_groups",{},"object"),function(j_,xI){u.ui.registry.addGroupToolbarButton(xI,j_)});var U0,G_=u.ui.registry.getAll(),Gk=G_.buttons,jk=G_.menuItems,H2=G_.contextToolbars,bI=G_.sidebars,QI=Ad(u),rO={menuItems:jk,menus:(U0=u.getParam("menu"))?Pt(U0,function(j_){return _e(_e({},j_),{items:j_.items})}):{},menubar:u.getParam("menubar"),toolbar:QI.getOrThunk(function(){return u.getParam("toolbar",!0)}),allowToolbarGroups:X===ai.floating,buttons:Gk,sidebar:bI};qD(u,H2,P,{backstage:F}),function(u,e){function t(O){var P=rd(O);return d2(b.getOpt(e),O,P.x,P.y,P.width,P.height)}function n(O){var P=rd(O);return d2(S.getOpt(e),O,P.right,P.bottom,P.width,P.height)}function r(O,P,R,F){var G=R(P);fb.snapTo(O,G),function(X){var Y=P.dom.getBoundingClientRect();co(X.element,"display");var Q=cr(Pe.fromDom(u.getBody())).dom.innerHeight;(Y[F]<0||Y[F]>Q)&&Ar(X.element,"display","none")}(O)}function o(O){return r(M,O,t,"top")}function i(O){return r(k,O,n,"bottom")}var s=$n([]),l=$n([]),c=$n(!1),f=Zo(),h=Zo(),p=IA(function(){return Mt(s.get(),t)},f,function(O){h.get().each(function(P){u.fire("TableSelectorChange",{start:O,finish:P})})}),y=IA(function(){return Mt(l.get(),n)},h,function(O){f.get().each(function(P){u.fire("TableSelectorChange",{start:P,finish:O})})}),b=Ik(p),S=Ik(y),M=Uu(b.asSpec()),k=Uu(S.asSpec());Ca().deviceType.isTouch()&&(u.on("TableSelectionChange",function(O){c.get()||(Zu(e,M),Zu(e,k),c.set(!0)),f.set(O.start),h.set(O.finish),O.otherCells.each(function(P){s.set(P.upOrLeftCells),l.set(P.downOrRightCells),o(O.start),i(O.finish)})}),u.on("ResizeEditor ResizeWindow ScrollContent",function(){f.get().each(o),h.get().each(i)}),u.on("TableSelectionClear",function(){c.get()&&(zf(M),zf(k),c.set(!1)),f.clear(),h.clear()}))}(u,P);var oO=u.getElement(),iO=function(){var Fo,j0,U0,G_,Gk,jk,H2=xk((G_=I1(U0=j0=u),Gk=Qb(U0),jk=ex(U0),bk(G_).map(function(QI){return mT(QI,Gk,jk)}).getOr(I1(j0)))),bI=xk(pT(Fo=u).getOr(Ey(Fo)));return u.inline||(ji("div","width",bI)&&Ar(Lt.element,"width",bI),ji("div","height",H2)?Ar(Lt.element,"height",H2):Ar(Lt.element,"height","200px")),H2}();return c.render(u,{mothership:_n,uiMothership:Or,outerContainer:Lt},rO,F,{targetNode:oO,height:iO})},getUi:function(){return{channels:{broadcastAll:Or.broadcast,broadcastOn:Or.broadcastOn,register:ht}}}};function xi(Fo,j0){wn([Ln,Ft],function(U0){U0.broadcastEvent(Fo,j0)})}function ga(Fo,j0){wn([Ln,Ft],function(U0){U0.broadcastOn([Fo],j0)})}function Jc(Fo){return ga(Hf(),{target:Fo.target})}function zl(Fo){return ga(Hf(),{target:Pe.fromDom(Fo.target)})}function Qc(Fo){0===Fo.button&&ga(mp(),{target:Pe.fromDom(Fo.target)})}function Fl(){wn(Ht.editorManager.get(),function(Fo){Ht!==Fo&&Fo.fire("DismissPopups",{relatedTarget:Ht})})}function Ic(Fo){return xi(ca(),ny(Fo))}function Oc(Fo){ga(wd(),{}),xi(Cf(),ny(Fo))}function zd(){return ga(wd(),{})}function ed(Fo){Fo.state&&ga(Hf(),{target:Pe.fromDom(Ht.getContainer())})}function bb(Fo){ga(Hf(),{target:Pe.fromDom(Fo.relatedTarget.getContainer())})}}function Ok(u){return Xt("items","items",{tag:"required",process:{}},ql(Xl(function(e){return wi("Checking item of "+u,sD,e).fold(function(t){return Sr.error(jt(t))},function(t){return Sr.value(t)})})))}function hb(u){return lr(u.type)&&lr(u.name)}function XT(u){return{internalDialog:Fu(wi("dialog",Ou,u)),dataValidator:(e=Dr(xt(uD(u),hb),function(t){return H.from(lD[t.type]).fold(function(){return[]},function(n){return[Ns(t.name,n)]})}),ae(e)),initialData:u.initialData};var e}function FS(u){var e=[],t={};return dt(u,function(n,r){n.fold(function(){e.push(r)},function(o){t[r]=o})}),0<e.length?Sr.error(e):Sr.value(t)}function p2(u,e){Ar(u,"height",e+"px"),Ca().browser.isIE()?co(u,"flex-basis"):Ar(u,"flex-basis",e+"px")}function YT(u,e,t){pd(u,'[role="dialog"]').each(function(n){zs(n,'[role="tablist"]').each(function(r){t.get().map(function(o){return Ar(e,"height","0"),Ar(e,"flex-basis","0"),Math.min(o,(s=e,l=r,c=yr(i=n).dom,f="fixed"===Wa(pd(i,".tox-dialog-wrap").getOr(i),"position")?Math.max(c.clientHeight,window.innerHeight):Math.max(c.offsetHeight,c.scrollHeight),h=Ra(s),p=s.dom.offsetLeft>=l.dom.offsetLeft+ws(l)?Math.max(Ra(l),h):h,y=parseInt(Wa(i,"margin-top"),10)||0,b=parseInt(Wa(i,"margin-bottom"),10)||0,f-(Ra(i)+y+b-p)));var i,s,l,c,f,h,p,y,b}).each(function(o){p2(e,o)})})})}function Ek(u){return zs(u,'[role="tabpanel"]')}function BA(u,e){function t(f){var h=FS(Mn.getValue(f)).getOr({}),p=i.get(),y=j(p,h);i.set(y)}function n(f){var h=i.get();Mn.setValue(f,h)}var r,o,i=$n({}),s=$n(null),l=Mt(u.tabs,function(f){return{value:f.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:e.shared.providers.translate(f.title)},view:function(){return[zh.sketch(function(h){return{dom:{tag:"div",classes:["tox-form"]},components:Mt(f.items,function(p){return $x(h,p,e)}),formBehaviours:cn([pr.config({mode:"acyclic",useTabstopAt:Qn(qp)}),zn("TabView.form.events",[Mi(n),Jl(t)]),Ol.config({channels:er([{key:pI,value:{onReceive:t}},{key:Ys,value:{onReceive:n}}])})])}})]}}}),c=(r=l,o=Zo(),{extraEvents:[Mi(function(f){var h=f.element;Ek(h).each(function(p){var y;Ar(p,"visibility","hidden"),f.getSystem().getByDom(p).toOptional().each(function(b){var S,M,k;ia(zi((M=p,k=b,Mt(S=r,function(O,P){Ur.set(k,S[P].view());var R=M.dom.getBoundingClientRect();return Ur.set(k,[]),R.height})),function(O,P){return P<O?-1:O<P?1:0})).fold(o.clear,o.set)}),YT(h,p,o),co(p,"visibility"),y=f,ia(r).each(function(b){return GS.showTab(y,b.value)}),Cc.requestAnimationFrame(function(){YT(h,p,o)})})}),Ot(Cf(),function(f){var h=f.element;Ek(h).each(function(p){YT(h,p,o)})}),Ot(PC,function(f,h){var p=f.element;Ek(p).each(function(y){var b=xd(Vi(y));Ar(y,"visibility","hidden");var S=Gi(y,"height").map(function(k){return parseInt(k,10)});co(y,"height"),co(y,"flex-basis");var M=y.dom.getBoundingClientRect().height;S.forall(function(k){return k<M})?(o.set(M),YT(p,y,o)):S.each(function(k){p2(y,k)}),co(y,"visibility"),b.each(_u)})})],selectFirst:!1});return GS.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(f,h,p){var y=Mn.getValue(h);gn(f,SM,{name:y,oldName:s.get()}),s.set(y)},tabs:l,components:[GS.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Fk.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:cn([xa.config({})])}),GS.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:c.selectFirst,tabSectionBehaviours:cn([zn("tabpanel",c.extraEvents),pr.config({mode:"acyclic"}),ho.config({find:function(f){return ia(GS.getViewItems(f))}}),Mn.config({store:{mode:"manual",getValue:function(f){return f.getSystem().broadcastOn([pI],{}),i.get()},setValue:function(f,h){i.set(h),f.getSystem().broadcastOn([Ys],{})}}})])})}function v2(u,e,t,n){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:_e(_e({},e.map(function(r){return{id:r}}).getOr({})),n?{"aria-live":"polite"}:{})},components:[],behaviours:cn([A0(0),th.config({channel:yb,updateState:function(r,o){return H.some({isTabPanel:function(){return"tabpanel"===o.body.type}})},renderComponents:function(r){return"tabpanel"!==r.body.type?[(o=r.body,i=t,{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[(s=Bo(zh.sketch(function(l){return{dom:{tag:"div",classes:["tox-form"].concat(o.classes)},components:Mt(o.items,function(c){return $x(l,c,i)})}}))).asSpec()]}],behaviours:cn([pr.config({mode:"acyclic",useTabstopAt:Qn(qp)}),D0(s),HM(s,{postprocess:function(l){return FS(l).fold(function(c){return console.error(c),{}},Ut)}})])})]:[BA(r.body,t)];var o,i,s},initialData:u})])}}function zA(u,e){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[u,e]}}function y2(u,e){return Os.parts.close(pl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close")}},action:u,buttonBehaviours:cn([xa.config({})])}))}function b2(){return Os.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})}function x2(u,e){return Os.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:fn("<p>"+e.translate(u)+"</p>")}]}]})}function FA(u){return Os.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:u})}function VA(u,e){return[du.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:u}),du.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:e})]}function ZT(u){var e,t="tox-dialog",n=t+"-wrap",r=n+"__backdrop",o=t+"__disable-scroll";return Os.sketch({lazySink:u.lazySink,onEscape:function(i){return u.onEscape(i),H.some(!0)},useTabstopAt:function(i){return!qp(i)},dom:{tag:"div",classes:[t].concat(u.extraClasses),styles:_e({position:"relative"},u.extraStyles)},components:me([u.header,u.body],u.footer.toArray(),!0),parts:{blocker:{dom:fn('<div class="'+n+'"></div>'),components:[{dom:{tag:"div",classes:vI?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:n,modalBehaviours:cn(me([zr.config({}),zn("dialog-events",u.dialogEvents.concat([xf(yu(),function(i,s){pr.focusIn(i)})])),zn("scroll-lock",[Mi(function(){vs(Ga(),o)}),Jl(function(){Ai(Ga(),o)})])],u.extraBehaviours,!0)),eventOrder:_e(((e={})[Wu()]=["dialog-events"],e[lh()]=["scroll-lock","dialog-events","alloy.base.behaviour"],e[qg()]=["alloy.base.behaviour","dialog-events","scroll-lock"],e),u.eventOrder)})}function HA(u){return pl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":u.translate("Close"),title:u.translate("Close")}},components:[xg("close",{tag:"div",classes:["tox-icon"]},u.icons)],action:function(e){gr(e,Ig)}})}function _2(u,e,t){function n(r){return[sl(t.translate(r.title))]}return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:_e({},e.map(function(r){return{id:r}}).getOr({}))},components:n(u),behaviours:cn([th.config({channel:jS,renderComponents:n})])}}function w2(){return{dom:fn('<div class="tox-dialog__draghandle"></div>')}}function $T(u,e){return t={title:e.shared.providers.translate(u),draggable:e.dialog.isDraggableModal()},n=e.shared.providers,r=Os.parts.title(_2(t,H.none(),n)),o=Os.parts.draghandle(w2()),i=Os.parts.close(HA(n)),s=[r].concat(t.draggable?[o]:[]).concat([i]),du.sketch({dom:fn('<div class="tox-dialog__header"></div>'),components:s});var t,n,r,o,i,s}function S2(u,e,t){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":t.translate(u)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:e,components:[{dom:fn('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}function B_(u,e,t){return{onClose:function(){return t.closeWindow()},onBlock:function(n){Os.setBusy(u(),function(r,o){return S2(n.message,o,e)})},onUnblock:function(){Os.setIdle(u())}}}function C2(u,e,t,n){var r;return Uu(ZT(_e(_e({},u),{lazySink:n.shared.getSink,extraBehaviours:me([th.config({channel:vb,updateState:function(o,i){return H.some(i)},initialData:e}),O0({})],u.extraBehaviours,!0),onEscape:function(o){gr(o,Ig)},dialogEvents:t,eventOrder:((r={})[Sf()]=[th.name(),Ol.name()],r[lh()]=["scroll-lock",th.name(),"messages","dialog-events","alloy.base.behaviour"],r[qg()]=["alloy.base.behaviour","dialog-events","messages",th.name(),"scroll-lock"],r)})))}function WA(u){return Mt(u,function(e){return"menu"===e.type?(n=Mt((t=e).items,function(r){var o=$n(!1);return _e(_e({},r),{storage:o})}),_e(_e({},t),{items:n})):e;var t,n})}function KT(u){return Jo(u,function(e,t){return"menu"!==t.type?e:Jo(t.items,function(n,r){return n[r.name]=r.storage,n},e)},{})}function GA(u,e){return[q0(yu(),WC),u(Om,function(t,n){e.onClose(),n.onClose()}),u(Ig,function(t,n,r,o){n.onCancel(t),gr(o,Om)}),Ot(g0,function(t,n){return e.onUnblock()}),Ot(Rd,function(t,n){return e.onBlock(n.event)})]}function jA(u,e){function t(r,o){return du.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+r]},components:Mt(o,function(i){return i.memento.asSpec()})})}var n=tr(e.map(function(r){return r.footerButtons}).getOr([]),function(r){return"start"===r.align});return[t("start",n.pass),t("end",n.fail)]}function UA(u,e){return{dom:fn('<div class="tox-dialog__footer"></div>'),components:[],behaviours:cn([th.config({channel:F2,initialData:u,updateState:function(t,n){var r=Mt(n.buttons,function(o){var i=Bo(Bx(o,o.type,e));return{name:o.name,align:o.align,memento:i}});return H.some({lookupByName:function(o,i){return s=o,l=i,Ao(r,function(c){return c.name===l}).bind(function(c){return c.memento.getOpt(s)});var s,l},footerButtons:r})},renderComponents:jA})])}}function qA(u,e){return Os.parts.footer(UA(u,e))}function Pk(u,e){if(u.getRoot().getSystem().isConnected()){var t=ho.getCurrent(u.getFormWrapper()).getOr(u.getFormWrapper());return zh.getField(t,e).fold(function(){var n=u.getFooter();return th.getState(n).get().bind(function(r){return r.lookupByName(t,e)})},function(n){return H.some(n)})}return H.none()}function XA(u,e,t){function n(o){var i=u.getRoot();i.getSystem().isConnected()&&o(i)}var r={getData:function(){var o=u.getRoot(),i=o.getSystem().isConnected()?u.getFormWrapper():o,s=Mn.getValue(i),l=Pt(t,function(c){return c.get()});return _e(_e({},s),l)},setData:function(o){n(function(i){var s,l,c=r.getData(),f=_e(_e({},c),o),h=(s=f,l=u.getRoot(),th.getState(l).get().map(function(y){return Fu(wi("data",y.dataValidator,s))}).getOr(s)),p=u.getFormWrapper();Mn.setValue(p,h),dt(t,function(y,b){yn(f,b)&&y.set(f[b])})})},disable:function(o){Pk(u,o).each(Kn.disable)},enable:function(o){Pk(u,o).each(Kn.enable)},focus:function(o){Pk(u,o).each(zr.focus)},block:function(o){if(!lr(o))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");n(function(i){gn(i,Rd,{message:o})})},unblock:function(){n(function(o){gr(o,g0)})},showTab:function(o){n(function(i){var s=u.getBody();th.getState(s).get().exists(function(l){return l.isTabPanel()})&&ho.getCurrent(s).each(function(l){GS.showTab(l,o)})})},redial:function(o){n(function(i){var s=e(o);i.getSystem().broadcastOn([vb],s),i.getSystem().broadcastOn([jS],s.internalDialog),i.getSystem().broadcastOn([yb],s.internalDialog),i.getSystem().broadcastOn([F2],s.internalDialog),r.setData(s.initialData)})},close:function(){n(function(o){gr(o,Om)})}};return r}function YA(u){return Zt(u)&&-1!==Wk.indexOf(u.mceAction)}function ZA(u){function t(p,y,b,S){return H_.open(function(M,k,O){function P(){return or.on(function(Nr){ha.reposition(Nr),Kc.refresh(Nr)})}var R,F,G,X,Y,Q,ne,le,ce,ye,Te,Ee,Ve,Be,nt,bt,_t,wt,Lt,Ht,Ln,Ft,Yn=Fu(wi("data",O,k)),or=Zo(),Tr=s.shared.header.isPositionedAtTop(),Ko=(F={dataValidator:O,initialData:Yn,internalDialog:M},G={redial:H_.redial,closeWindow:function(){or.on(ha.hide),l.off("ResizeEditor",P),or.clear(),b(Ko.instanceApi)}},X=s,Y=S,Ve=jn("dialog-label"),Be=jn("dialog-content"),nt=Bo((le={title:F.internalDialog.title,draggable:!0},ce=Ve,ye=X.shared.providers,du.sketch({dom:fn('<div class="tox-dialog__header"></div>'),components:[_2(le,H.some(ce),ye),w2(),HA(ye)],containerBehaviours:cn([fb.config({mode:"mouse",blockerClass:"blocker",getTarget:function(Nr){return vc(Nr,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),bt=Bo((Te=X,Ee=Y,v2({body:F.internalDialog.body},H.some(Be),Te,Ee))),wt=KT(_t=WA(F.internalDialog.buttons)),Lt=Bo(yI({buttons:_t},X)),Ht=V2(function(){return Ft},{onBlock:function(Nr){jm.block(Ln,function(_n,Or){return S2(Nr.message,Or,X.shared.providers)})},onUnblock:function(){jm.unblock(Ln)},onClose:function(){return G.closeWindow()}},X.shared.getSink),Ln=Uu({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((Q={role:"dialog"})["aria-labelledby"]=Ve,Q["aria-describedby"]=Be,Q)},eventOrder:((ne={})[Sf()]=[th.name(),Ol.name()],ne[Wu()]=["execute-on-form"],ne[lh()]=["reflecting","execute-on-form"],ne),behaviours:cn([pr.config({mode:"cyclic",onEscape:function(Nr){return gr(Nr,Om),H.some(!0)},useTabstopAt:function(Nr){return!qp(Nr)&&("button"!==mt(Nr)||"disabled"!==Wi(Nr,"disabled"))}}),th.config({channel:vb,updateState:function(Nr,_n){return H.some(_n)},initialData:F}),zr.config({}),zn("execute-on-form",Ht.concat([xf(yu(),function(Nr,_n){pr.focusIn(Nr)})])),jm.config({getRoot:function(){return H.some(Ln)}}),Ur.config({}),O0({})]),components:[nt.asSpec(),bt.asSpec(),Lt.asSpec()]}),Ft=XA({getRoot:ze(Ln),getFooter:function(){return Lt.get(Ln)},getBody:function(){return bt.get(Ln)},getFormWrapper:function(){var Nr=bt.get(Ln);return ho.getCurrent(Nr).getOr(Nr)}},G.redial,wt),{dialog:Ln,instanceApi:Ft}),Lo=Uu(ha.sketch(_e(_e({lazySink:s.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},Tr?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:cn(me([zn("window-manager-inline-events",[Ot(cl(),function(Nr,_n){gr(Ko.dialog,Ig)})])],(R=l,c&&Tr?[]:[Kc.config({contextual:{lazyContext:function(){return H.some(Ks(Pe.fromDom(R.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]),!0)),isExtraPart:function(Nr,_n){return vx(Or=_n,".tox-alert-dialog")||vx(Or,".tox-confirm-dialog");var Or}})));return or.set(Lo),ha.showWithin(Lo,Qr(Ko.dialog),{anchor:y},H.some(Ga())),c&&Tr||(Kc.refresh(Lo),l.on("ResizeEditor",P)),Ko.instanceApi.setData(Yn),pr.focusIn(Ko.dialog),Ko.instanceApi},p)}var n,r,o,i,s=u.backstage,l=u.editor,c=sx(l),f=(r=(n=u).backstage.shared,{open:function(p,y){function b(){Os.hide(O),y()}var S=Bo(Bx({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:H.none()},"cancel",n.backstage)),M=b2(),k=y2(b,r.providers),O=Uu(ZT({lazySink:function(){return r.getSink()},header:zA(M,k),body:x2(p,r.providers),footer:H.some(FA(VA([],[S.asSpec()]))),onEscape:b,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ot(Ig,b)],eventOrder:{}}));Os.show(O);var P=S.get(O);zr.focus(P)}}),h=(i=(o=u).backstage.shared,{open:function(p,y){function b(F){Os.hide(P),y(F)}var S=Bo(Bx({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:H.none()},"submit",o.backstage)),M=Bx({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:H.none()},"cancel",o.backstage),k=b2(),O=y2(function(){return b(!1)},i.providers),P=Uu(ZT({lazySink:function(){return i.getSink()},header:zA(k,O),body:x2(p,i.providers),footer:H.some(FA(VA([],[M,S.asSpec()]))),onEscape:function(){return b(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ot(Ig,function(){return b(!1)}),Ot($1,function(){return b(!0)})],eventOrder:{}}));Os.show(P);var R=S.get(P);zr.focus(R)}});return{open:function(p,y,b){return void 0!==y&&"toolbar"===y.inline?t(p,s.shared.anchors.inlineDialog(),b,y.ariaAttrs):void 0!==y&&"cursor"===y.inline?t(p,s.shared.anchors.cursor(),b,y.ariaAttrs):function(p,y){return H_.open(function(b,S,M){var k,O,P,R,F,G,X,Y,Q,ne,le,ce,ye,xe,Te=S,Ee=(O={redial:H_.redial,closeWindow:function(){Os.hide(Ee.dialog),y(Ee.instanceApi)}},G=$T((k={dataValidator:M,initialData:Te,internalDialog:b}).internalDialog.title,P=s),R=P,F=v2({body:k.internalDialog.body},H.none(),R,!1),X=Os.parts.body(F),Q=KT(Y=WA(k.internalDialog.buttons)),ne=qA({buttons:Y},P),le=V2(function(){return xe},B_(function(){return ye},P.shared.providers,O),P.shared.getSink),ce=function(){switch(k.internalDialog.size){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(),ye=C2({header:G,body:X,footer:H.some(ne),extraClasses:ce,extraBehaviours:[],extraStyles:{}},k,le,P),xe=XA({getRoot:ze(ye),getBody:function(){return Os.getBody(ye)},getFooter:function(){return Os.getFooter(ye)},getFormWrapper:function(){var Ve=Os.getBody(ye);return ho.getCurrent(Ve).getOr(Ve)}},O.redial,Q),{dialog:ye,instanceApi:xe});return Os.show(Ee.dialog),Ee.instanceApi.setData(Te),Ee.instanceApi},p)}(p,b)},openUrl:function(p,y){return b=y,H_.openUrl(function(S){var M=function(u,e,t,n){var r,o,i,s=$T(u.title,n),l=(o={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[AM({dom:{tag:"iframe",attributes:{src:u.url}},behaviours:cn([xa.config({}),zr.config({})])})]}],behaviours:cn([pr.config({mode:"acyclic",useTabstopAt:Qn(qp)})])},Os.parts.body(o)),c=u.buttons.bind(function(P){return 0===P.length?H.none():H.some(qA({buttons:P},n))}),f=Hk(function(){return k},B_(function(){return M},n.shared.providers,e)),h=_e(_e({},u.height.fold(function(){return{}},function(P){return{height:P+"px","max-height":P+"px"}})),u.width.fold(function(){return{}},function(P){return{width:P+"px","max-width":P+"px"}})),p=u.width.isNone()&&u.height.isNone()?["tox-dialog--width-lg"]:[],y=new W_(u.url,{base_uri:new W_(window.location.href)}),b=y.protocol+"://"+y.host+(y.port?":"+y.port:""),S=so(),M=C2({header:s,body:l,footer:c,extraClasses:p,extraBehaviours:[zn("messages",[Mi(function(){var P=Ws(Pe.fromDom(window),"message",function(R){var F,G;y.isSameOrigin(new W_(R.raw.origin))&&(YA(F=R.raw.data)?function(X,Y,Q){switch(Q.mceAction){case"insertContent":X.insertContent(Q.content);break;case"setContent":X.setContent(Q.content);break;case"execCommand":var ne=!!Bi(Q.ui)&&Q.ui;X.execCommand(Q.cmd,ne,Q.value);break;case"close":Y.close();break;case"block":Y.block(Q.message);break;case"unblock":Y.unblock()}}(t,k,F):!YA(G=F)&&Zt(G)&&yn(G,"mceAction")&&u.onMessage(k,F))});S.set(P)}),Jl(S.clear)]),Ol.config({channels:((r={})[Vk]={onReceive:function(P,R){zs(P.element,"iframe").each(function(F){F.dom.contentWindow.postMessage(R,b)})}},r)})],extraStyles:h},u,f,n),k={block:function(P){if(!lr(P))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");O(function(R){gn(R,Rd,{message:P})})},unblock:function(){O(function(P){gr(P,g0)})},close:function(){O(function(P){gr(P,Om)})},sendMessage:function(P){O(function(R){R.getSystem().broadcastOn([Vk],P)})}};function O(P){i.getSystem().isConnected()&&P(i)}return{dialog:i=M,instanceApi:k}}(S,{closeWindow:function(){Os.hide(M.dialog),b(M.instanceApi)}},l,s);return Os.show(M.dialog),M.instanceApi},p);var b},alert:function(p,y){f.open(p,function(){y()})},close:function(p){p.close()},confirm:function(p,y){h.open(p,function(b){y(b)})}}}(o1=R_=R_||{})[o1.None=0]="None",o1[o1.Both=1]="Both",o1[o1.Vertical=2]="Vertical";var QT,$A=ze([Et("lazySink"),bo("dragBlockClass"),ki("getBounds",rl),qe("useTabstopAt",dn),qe("eventOrder",{}),as("modalBehaviours",[pr]),Vs("onExecute"),Mb("onEscape")]),eD={sketch:Ut},KA=ze([af({name:"draghandle",overrides:function(u,e){return{behaviours:cn([fb.config({mode:"mouse",getTarget:function(t){return pd(t,'[role="dialog"]').getOr(t)},blockerClass:u.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(e,null,2)).message),getBounds:u.getDragBounds})])}}}),ss({schema:[Et("dom")],name:"title"}),ss({factory:eD,schema:[Et("dom")],name:"close"}),ss({factory:eD,schema:[Et("dom")],name:"body"}),af({factory:eD,schema:[Et("dom")],name:"footer"}),Md({factory:{sketch:function(u,e){return _e(_e({},u),{dom:e.dom,components:e.components})}},schema:[qe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),qe("components",[])],name:"blocker"})]),Os=hi({name:"ModalDialog",configFields:$A(),partFields:KA(),factory:function(u,e,t,n){var r,o=Zo(),i=jn("modal-events"),s=_e(_e({},u.eventOrder),((r={})[lh()]=[i].concat(u.eventOrder["alloy.system.attached"]||[]),r));return{uid:u.uid,dom:u.dom,components:e,apis:{show:function(l){o.set(l);var c=u.lazySink(l).getOrDie(),f=n.blocker(),h=c.getSystem().build(_e(_e({},f),{components:f.components.concat([Qr(l)]),behaviours:cn([zr.config({}),zn("dialog-blocker-events",[xf(yu(),function(){pr.focusIn(l)})])])}));Zu(c,h),pr.focusIn(l)},hide:function(l){o.clear(),ur(l.element).each(function(c){l.getSystem().getByDom(c).each(function(f){zf(f)})})},getBody:function(l){return da(l,u,"body")},getFooter:function(l){return da(l,u,"footer")},setIdle:function(l){jm.unblock(l)},setBusy:function(l,c){jm.block(l,c)}},eventOrder:s,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:bs(u.modalBehaviours,[Ur.config({}),pr.config({mode:"cyclic",onEnter:u.onExecute,onEscape:u.onEscape,useTabstopAt:u.useTabstopAt}),jm.config({getRoot:o.get}),zn(i,[Mi(function(l){var c,f,h,p=l.element,y=da(l,u,"title").element,b=ui(p,"id").fold(function(){var S=jn("dialog-label");return rr(y,"id",S),S},Ut);rr(p,"aria-labelledby",b),c=l.element,f=da(l,u,"body").element,h=H.from(Wi(c,"id")).fold(function(){var S=jn("dialog-describe");return rr(f,"id",S),S},Ut),rr(c,"aria-describedby",h)})])])}},apis:{show:function(u,e){u.show(e)},hide:function(u,e){u.hide(e)},getBody:function(u,e){return u.getBody(e)},getFooter:function(u,e){return u.getFooter(e)},setBusy:function(u,e,t){u.setBusy(e,t)},setIdle:function(u,e){u.setIdle(e)}}}),gb=ae([kr("type"),kr("name")].concat(df)),WI=Ne,Rk=[Xt("name","name",ol(function(){return jn("button-name")}),De),Si("icon"),kl("align","end",["start","end"]),ii("primary",!1),ii("disabled",!1)],VS=me(me([],Rk,!0),[kr("text")],!1),k2=me([qa("type",["submit","cancel","custom"])],VS,!0),tD=ps("type",{submit:k2,cancel:k2,custom:k2,menu:me([qa("type",["menu"]),Si("text"),Si("tooltip"),Si("icon"),Na("items",gb)],Rk,!0)}),JA=[kr("type"),kr("text"),qa("level",["info","warn","error","success"]),kr("icon"),qe("url","")],QA=ae(JA),GI=[kr("type"),kr("text"),ii("disabled",!1),ii("primary",!1),Xt("name","name",ol(function(){return jn("button-name")}),De),Si("icon"),ii("borderless",!1)],jI=ae(GI),eI=[kr("type"),kr("name"),kr("label"),ii("disabled",!1)],M2=ae(eI),tI=Ne,nD=[kr("type"),kr("name")],zg=nD.concat([Si("label")]),Fg=zg.concat([qe("columns","auto")]),T2=ae(Fg),nI=ge([kr("value"),kr("text"),kr("icon")]),z_=ae(zg),Sa=De,Nk=ae(zg),UI=De,rI=nD.concat([ea("tag","textarea"),kr("scriptId"),kr("scriptUrl"),Di("settings",void 0,an)]),oI=nD.concat([ea("tag","textarea"),Qi("init")]),D2=Xl(function(u){return wi("customeditor.old",pu(oI),u).orThunk(function(){return wi("customeditor.new",pu(rI),u)})}),Bl=De,A2=ae(zg),Ac=ql(te),Wh=[kr("type"),kr("html"),kl("presets","presentation",["presentation","document"])],I2=ae(Wh),iI=zg.concat([ii("sandboxed",!0)]),W0=ae(iI),Lk=De,O2=zg.concat([Ns("currentState",ae([Et("blob"),kr("url")]))]),aI=ae(O2),sI=zg.concat([Si("inputMode"),Si("placeholder"),ii("maximized",!1),ii("disabled",!1)]),rD=ae(sI),Vg=De,F_=[kr("text"),kr("value")],E2=[kr("text"),Na("items",(QT=pt(function(){return oD}),{extract:function(u,e){return QT().extract(u,e)},toString:function(){return QT().toString()}}))],oD=fc([ae(F_),ae(E2)]),P2=zg.concat([Na("items",oD),ii("disabled",!1)]),qI=ae(P2),R2=De,XI=zg.concat([sd("items",[kr("text"),kr("value")]),qh("size",1),ii("disabled",!1)]),YI=ae(XI),ZI=De,uI=zg.concat([ii("constrain",!0),ii("disabled",!1)]),N2=ae(uI),iD=ae([kr("width"),kr("height")]),HS=[kr("type"),Na("header",De),Na("cells",ql(De))],aD=ae(HS),G0=zg.concat([Si("placeholder"),ii("maximized",!1),ii("disabled",!1)]),V_=ae(G0),$I=De,WS=zg.concat([kl("filetype","file",["image","media","file"]),qe("disabled",!1)]),L2=ae(WS),lI=ae([kr("value"),qe("meta",{})]),sD=qm(function(){return Gd("type",{alertbanner:QA,bar:ae((t=Ok("bar"),[kr("type"),t])),button:jI,checkbox:M2,colorinput:z_,colorpicker:Nk,dropzone:A2,grid:ae((u=Ok("grid"),[kr("type"),Ns("columns",Ce),u])),iframe:W0,input:rD,listbox:qI,selectbox:YI,sizeinput:N2,textarea:V_,urlinput:L2,customeditor:D2,htmlpanel:I2,imagetools:aI,collection:T2,label:ae((e=Ok("label"),[kr("type"),kr("label"),e])),table:aD,panel:mb});var u,e,t}),cI=[kr("type"),qe("classes",[]),Na("items",sD)],mb=ae(cI),KI=[Xt("name","name",ol(function(){return jn("tab-name")}),De),kr("title"),Na("items",sD)],dI=[kr("type"),sd("tabs",KI)],iv=ae(dI),fI=VS,B2=tD,Ou=ae([kr("title"),Ns("body",Gd("type",{panel:mb,tabpanel:iv})),ea("size","normal"),Na("buttons",B2),qe("initialData",{}),ki("onAction",ht),ki("onChange",ht),ki("onSubmit",ht),ki("onClose",ht),ki("onCancel",ht),qe("onTabChange",ht)]),hI=ae(me([qa("type",["cancel","custom"])],fI,!0)),Bk=ae([kr("title"),kr("url"),Wg("height"),Wg("width"),Uh("buttons",hI),ki("onAction",ht),ki("onCancel",ht),ki("onClose",ht),ki("onMessage",ht)]),uD=function(u){return Zt(u)?[u].concat(Dr(hn(u),uD)):Eo(u)?Dr(u,uD):[]},lD={checkbox:tI,colorinput:Sa,colorpicker:UI,dropzone:Ac,input:Vg,iframe:Lk,sizeinput:iD,selectbox:ZI,listbox:R2,size:iD,textarea:$I,urlinput:lI,customeditor:Bl,collection:nI,togglemenuitem:WI},H_={open:function(u,e){var t=XT(e);return u(t.internalDialog,t.initialData,t.dataValidator)},openUrl:function(u,e){return u(Fu(wi("dialog",Bk,e)))},redial:XT},zk=Mu({name:"TabButton",configFields:[qe("uid",void 0),Et("value"),Xt("dom","dom",_i(function(){return{attributes:{role:"tab",id:jn("aria"),"aria-selected":"false"}}}),be()),bo("action"),qe("domModification",{}),as("tabButtonBehaviours",[zr,pr,Mn]),Et("view")],factory:function(u,e){return{uid:u.uid,dom:u.dom,components:u.components,events:jr(u.action),behaviours:bs(u.tabButtonBehaviours,[zr.config({}),pr.config({mode:"execution",useSpace:!0,useEnter:!0}),Mn.config({store:{mode:"memory",initialValue:u.value}})]),domModification:u.domModification}}}),pb=ze([Et("tabs"),Et("dom"),qe("clickToDismiss",!1),as("tabbarBehaviours",[go,pr]),Fs(["tabClass","selectedClass"])]),JI=ze([yp({factory:zk,name:"tabs",unit:"tab",overrides:function(u){return{action:function(e){var t=e.getSystem().getByUid(u.uid).getOrDie(),n=go.isHighlighted(t,e);(n&&u.clickToDismiss?function(r,o){go.dehighlight(r,o),gn(r,gd(),{tabbar:r,button:o})}:n?ht:function(r,o){go.highlight(r,o),gn(r,kf(),{tabbar:r,button:o})})(t,e)},domModification:{classes:[u.markers.tabClass]}}}})]),Fk=hi({name:"Tabbar",configFields:pb(),partFields:JI(),factory:function(u,e,t,n){return{uid:u.uid,dom:u.dom,components:e,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:bs(u.tabbarBehaviours,[go.config({highlightClass:u.markers.selectedClass,itemClass:u.markers.tabClass,onHighlight:function(r,o){rr(o.element,"aria-selected","true")},onDehighlight:function(r,o){rr(o.element,"aria-selected","false")}}),pr.config({mode:"flow",getInitial:function(r){return go.getHighlighted(r).map(function(o){return o.element})},selector:"."+u.markers.tabClass,executeOnMove:!0})])}}}),gI=Mu({name:"Tabview",configFields:[as("tabviewBehaviours",[Ur])],factory:function(u,e){return{uid:u.uid,dom:u.dom,behaviours:bs(u.tabviewBehaviours,[Ur.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),z2=ze([qe("selectFirst",!0),oo("onChangeTab"),oo("onDismissTab"),qe("tabs",[]),as("tabSectionBehaviours",[])]),mI=ze([ss({factory:Fk,schema:[Et("dom"),il("markers",[Et("tabClass"),Et("selectedClass")])],name:"tabbar",defaults:function(u){return{tabs:u.tabs}}}),ss({factory:gI,name:"tabview"})]),GS=hi({name:"TabSection",configFields:z2(),partFields:mI(),factory:function(u,e,t,n){function r(o,i){fo(o,u,"tabbar").each(function(s){i(s).each(To)})}return{uid:u.uid,dom:u.dom,components:e,behaviours:um(u.tabSectionBehaviours),events:Ro(pe([u.selectFirst?[Mi(function(o,i){r(o,go.getFirst)})]:[],[Ot(kf(),function(o,i){var s=i.event.button,l=Mn.getValue(s);fo(s,u,"tabview").each(function(c){Ao(u.tabs,function(f){return f.value===l}).each(function(f){var h=f.view();ui(s.element,"id").each(function(p){rr(c.element,"aria-labelledby",p)}),Ur.set(c,h),u.onChangeTab(c,s,h)})})}),Ot(gd(),function(o,i){u.onDismissTab(o,i.event.button)})]])),apis:{getViewItems:function(o){return fo(o,u,"tabview").map(function(i){return Ur.contents(i)}).getOr([])},showTab:function(o,i){r(o,function(s){return Ao(go.getCandidates(s),function(l){return Mn.getValue(l)===i}).filter(function(l){return!go.isHighlighted(s,l)})})}}}},apis:{getViewItems:function(u,e){return u.getViewItems(e)},showTab:function(u,e,t){u.showTab(e,t)}}}),pI="send-data-to-section",Ys="send-data-to-view",vb=jn("update-dialog"),jS=jn("update-title"),yb=jn("update-body"),F2=jn("update-footer"),Vk=jn("body-send-message"),vI=fx.deviceType.isTouch(),Hk=function(u,e){function t(n,r){return Ot(n,function(o,i){var l;l=function(c,f){r(u(),c,i.event,o)},th.getState(o).get().each(function(c){l(c)})})}return me(me([],GA(t,e),!0),[t(Og,function(n,r,o){r.onAction(n,{name:o.name})})],!1)},V2=function(u,e,t){function n(r,o){return Ot(r,function(i,s){var c;c=function(f,h){o(u(),f,s.event,i)},th.getState(i).get().each(function(f){c(f.internalDialog)})})}return me(me([],GA(n,e),!0),[n($1,function(r,o){return o.onSubmit(r)}),n(uc,function(r,o,i){o.onChange(r,{name:i.name})}),n(Og,function(r,o,i,s){function l(){return pr.focusIn(s)}function c(p){return Zs(p,"disabled")||ui(p,"aria-disabled").exists(function(y){return"true"===y})}var f=Vi(s.element),h=xd(f);o.onAction(r,{name:i.name,value:i.value}),xd(f).fold(l,function(p){c(p)||h.exists(function(y){return $t(p,y)&&c(y)})?l():t().toOptional().filter(function(y){return!$t(y.element,p)}).each(l)})}),n(SM,function(r,o,i){o.onTabChange(r,{newTabName:i.name,oldTabName:i.oldName})}),Jl(function(r){var o=u();Mn.setValue(r,o.getData())})],!1)},yI=UA,W_=tinymce.util.Tools.resolve("tinymce.util.URI"),Wk=["insertContent","setContent","execCommand","close","block","unblock"];Rn.add("silver",function(u){var e=L_(u),t=e.uiMothership,n=e.backstage,r=e.renderUI,o=e.getUi;return function(u,e){function t(){return i.get().isSome()}function n(){t()&&ha.hide(l)}var r,o,i=Zo(),s=$n(!1),l=Uu(ha.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:cn([zn("dismissAutocompleter",[Ot(cl(),function(){return c()})])]),lazySink:e.getSink})),c=function(){var b;t()&&(b=i.get().map(function(S){return S.element}),Dy(b.getOr(Pe.fromDom(u.selection.getNode()))).each(Pu),n(),i.clear(),s.set(!1))},f=pt(function(){return b=qt(M=Pt(u.ui.registry.getAll().popups,function(P){return wi("Autocompleter",Ay,P).fold(function(R){throw new Error(jt(R))},Ut)}),function(P){return P.ch}),S={},wn(b,function(P){S[P]={}}),k=ri(S),O=hn(M),{dataset:M,triggerChars:k,lookupByChar:function(P){return xt(O,function(R){return R.ch===P})}};var b,S,M,k,O}),h=function(b){var S=b;i.get().map(function(M){return Zc(u.dom,u.selection.getRng(),M.triggerChar).bind(function(k){return mw(u,f,k,S)})}).getOrThunk(function(){return M=u,O=(k=f)(),P=M.selection.getRng(),R=M.dom,F=P,ut(O.triggerChars,function(G){return Zc(R,F,G)}).bind(function(G){return mw(M,k,G)});var M,k,O,P,R,F}).fold(c,function(M){var k,O=M.context;t()||(k=function(u,e){return Dy(Pe.fromDom(u.selection.getNode())).getOrThunk(function(){var t,n,r=Pe.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',u.getDoc());return Hi(r,Pe.fromDom(e.extractContents())),e.insertNode(r.dom),ur(r).each(function(o){return o.dom.normalize()}),t=X_,(n=function(o){for(var i=ko(o),s=i.length-1;0<=s;s--){var l=i[s];if(t(l))return H.some(l);var c=n(l);if(c.isSome())return c}return H.none()})(r).map(function(o){var i;u.selection.setCursorLocation(o.dom,"img"===mt(i=o)?1:up(i).fold(function(){return ko(i).length},function(s){return s.length}))}),r})}(u,O.range),i.set({triggerChar:O.triggerChar,element:k,matchLength:O.text.length}),s.set(!1)),M.lookupData.then(function(P){i.get().map(function(R){var F,G,X,Y,Q=M.context;R.triggerChar===Q.triggerChar&&(G=Q.triggerChar,Y=ut(X=P,function(ne){return H.from(ne.columns)}).getOr(1),0<(F=Dr(X,function(ne){return function(u,e,t,n,r,o,i){var s=1===n,l=!s||D1(u);return po(Mt(u,function(c){switch(c.type){case"separator":return wi("Autocompleter.Separator",Yb,c).fold(Dd,function(f){return H.some(px(f))});case"cardmenuitem":return wi("cardmenuitem",r0,c).fold(Dd,function(f){return H.some((h=_e(_e({},f),{onAction:function(M){f.onAction(M),t(f.value,f.meta)}}),p=r,y=o,b={itemBehaviours:ux(f.meta,o),cardText:{matchText:e,highlightOn:i}},S={dom:Cw(h.label),optComponents:[H.some({dom:{tag:"div",classes:[Ap,Ry]},components:Dw(h.items,b)})]},s0({data:zy(_e({text:H.none()},h)),disabled:h.disabled,getApi:function(M){return{isDisabled:function(){return Kn.isDisabled(M)},setDisabled:function(k){Kn.set(M,k),wn(su(M.element,"*"),function(O){M.getSystem().getByDom(O).each(function(P){P.hasConfigured(Kn)&&Kn.set(P,k)})})}}},onAction:h.onAction,onSetup:h.onSetup,triggersSubmenu:!1,itemBehaviours:H.from(b.itemBehaviours).getOr([])},S,p,y.providers)));var h,p,y,b,S});default:return wi("Autocompleter.Item",dC,c).fold(Dd,function(f){return H.some(function(h,p,y,b,S,M,k,O){void 0===O&&(O=!0);var P=Fy({presets:"normal",textContent:H.none(),htmlContent:y?h.text.map(function(R){return bC(R,p)}):H.none(),ariaLabel:h.text,iconContent:h.icon,shortcutContent:H.none(),checkMark:H.none(),caret:H.none(),value:h.value},k.providers,O,h.icon);return s0({data:zy(h),disabled:h.disabled,getApi:ze({}),onAction:function(R){return S(h.value,h.meta)},onSetup:ze(ht),triggersSubmenu:!1,itemBehaviours:ux(h.meta,k)},P,M,k.providers)}(f,e,s,0,t,r,o,l))})}}))}(ne.items,ne.matchText,function(le,ce){var ye=u.selection.getRng();Zc(u.dom,ye,G).fold(function(){return console.error("Lost context. Cursor probably moved")},function(xe){var Te=xe.range,Ee={hide:function(){c()},reload:function(Ve){n(),h(Ve)}};s.set(!0),ne.onAction(Ee,Te,le,ce),s.set(!1)})},Y,qf.BUBBLE_TO_SANDBOX,e,ne.highlightOn)})).length?function(ne,le,ce,ye){ne.matchLength=le.text.length;var xe,Te,Ee,Ve,Be,nt,bt=ut(ce,function(_t){return H.from(_t.columns)}).getOr(1);ha.showAt(l,Cp.sketch((xe=Oy("autocompleter-value",!0,ye,bt,"normal"),Te=bt,Ve=((Ee=Ew.ContentFocus)===Ew.ContentFocus?Rv:Vf)(),Be=Dg(Te,"normal"),nt=Zb("normal"),{dom:xe.dom,components:xe.components,items:xe.items,value:xe.value,markers:{selectedItem:nt.selectedItem,item:nt.item},movement:Be,fakeFocus:Ee===Ew.ContentFocus,focusManager:Ve,menuBehaviours:Rl("auto"!==Te?[]:[Mi(function(_t,wt){Jb(_t,4,nt.item).each(function(Lt){pr.setGridSize(_t,Lt.numRows,Lt.numColumns)})})])})),{anchor:{type:"node",root:Pe.fromDom(u.getBody()),node:H.from(ne.element)}}),ha.getContent(l).each(go.highlightFirst)}(R,Q,P,F):(10<=Q.text.length-R.matchLength?c:n)())})})})},p={onKeypress:x1(function(b){27!==b.which&&h()},50),cancelIfNecessary:c,isMenuOpen:function(){return ha.isOpen(l)},isActive:t,isProcessingAction:s.get,getView:function(){return ha.getContent(l)}};function y(b,S){gn(b,cd(),{raw:S})}!1===u.hasPlugin("rtc")&&((o=u).on("keypress compositionend",(r=p).onKeypress.throttle),o.on("remove",r.onKeypress.cancel),o.on("keydown",function(b){function S(){return r.getView().bind(go.getHighlighted)}8===b.which&&r.onKeypress.throttle(b),r.isActive()&&(27===b.which&&r.cancelIfNecessary(),r.isMenuOpen()?13===b.which?(S().each(To),b.preventDefault()):40===b.which?(S().fold(function(){r.getView().each(go.highlightFirst)},function(M){y(M,b)}),b.preventDefault(),b.stopImmediatePropagation()):37!==b.which&&38!==b.which&&39!==b.which||S().each(function(M){y(M,b),b.preventDefault(),b.stopImmediatePropagation()}):13!==b.which&&38!==b.which&&40!==b.which||r.cancelIfNecessary())}),o.on("NodeChange",function(b){r.isActive()&&!r.isProcessingAction()&&Dy(Pe.fromDom(b.element)).isNone()&&r.cancelIfNecessary()}))}(u,n.shared),{renderUI:r,getWindowManagerImpl:ze(ZA({editor:u,backstage:n})),getNotificationManagerImpl:function(){return i=u,s=t,l=n.shared,{open:function(c,f){function h(){f(),ha.hide(b)}var p=!c.closeButton&&c.timeout&&(0<c.timeout||c.timeout<0),y=Uu(b1.sketch({text:c.text,level:fi(["success","error","warning","warn","info"],c.type)?c.type:void 0,progress:!0===c.progressBar,icon:H.from(c.icon),closeButton:!p,onAction:h,iconProvider:l.providers.icons,translationProvider:l.providers.translate})),b=Uu(ha.sketch(_e({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:l.getSink,fireDismissalEventInstead:{}},l.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));function S(){var M=Ks(Pe.fromDom(i.getContentAreaContainer())),k=rl(),O=iu(k.x,M.x,M.right),P=iu(k.y,M.y,M.bottom),R=Math.max(M.right,k.right),F=Math.max(M.bottom,k.bottom);return H.some(pn(O,P,R-O,F-P))}return s.add(b),0<c.timeout&&Cc.setTimeout(function(){h()},c.timeout),{close:h,moveTo:function(M,k){ha.showAt(b,Qr(y),{anchor:{type:"makeshift",x:M,y:k}})},moveRel:function(M,k){var O,P,R,F=Qr(y),G={maxHeightFunction:vh()};"banner"!==k&&Sn(M)?(O=function(){switch(k){case"bc-bc":return Sg;case"tc-tc":return oc;case"tc-bc":return Su;default:return au}}(),P={type:"node",root:Ga(),node:H.some(Pe.fromDom(M)),overrides:G,layouts:{onRtl:function(){return[O]},onLtr:function(){return[O]}}},ha.showWithinBounds(b,F,{anchor:P},S)):(R=_e(_e({},l.anchors.banner()),{overrides:G}),ha.showWithinBounds(b,F,{anchor:R},S))},text:function(M){b1.updateText(y,M)},settings:c,getEl:function(){return y.element.dom},progressBar:{value:function(M){b1.updateProgress(y,M)}}}},close:function(c){c.close()},reposition:function(c){0<c.length&&wn(c,function(f,h){0===h?f.moveRel(null,"banner"):f.moveRel(c[h-1].getEl(),"bc-tc")})},getArgs:function(c){return c.settings}};var i,s,l},ui:o()}})}(),function(){"use strict";function Un(ot){return function(Nt){return $e=typeof(Me=Nt),(null===Me?"null":"object"==$e&&(Array.prototype.isPrototypeOf(Me)||Me.constructor&&"Array"===Me.constructor.name)?"array":"object"==$e&&(String.prototype.isPrototypeOf(Me)||Me.constructor&&"String"===Me.constructor.name)?"string":$e)===ot;var Me,$e}}function Co(ot){return function(Nt){return typeof Nt===ot}}function Yr(){}function Cr(ot){return function(){return ot}}function Zn(ot){return ot}function ht(ot,Nt){return ot===Nt}function En(){return xr}var Ut=tinymce.util.Tools.resolve("tinymce.PluginManager"),Jn=tinymce.util.Tools.resolve("tinymce.util.VK"),lr=Un("string"),Zt=Un("array"),cs=Co("boolean"),Bi=Co("function"),Gn=Cr(!1),Sn=Cr(!null),xr={fold:function(ot,Nt){return ot()},isSome:Gn,isNone:Sn,getOr:Zn,getOrThunk:Fn,getOrDie:function(ot){throw new Error(ot||"error: getOrDie called on none.")},getOrNull:Cr(null),getOrUndefined:Cr(void 0),or:Zn,orThunk:Fn,map:En,each:Yr,bind:En,exists:Gn,forall:Sn,filter:function(){return xr},toArray:function(){return[]},toString:Cr("none()")};function Fn(ot){return ot()}function Qn(ot){for(var Nt=[],Me=0,$e=ot.length;Me<$e;++Me){if(!Zt(ot[Me]))throw new Error("Arr.flatten item "+Me+" was not an array, input: "+ot);Vn.apply(Nt,ot[Me])}return Nt}function Zi(ot,Nt){for(var Me=0;Me<ot.length;Me++){var $e=Nt(ot[Me],Me);if($e.isSome())return $e}return St.none()}function Er(ot,Nt,Me){return void 0===Me&&(Me=ht),ot.exists(function($e){return Me($e,Nt)})}function dn(ot,Nt){return ot?St.some(Nt):St.none()}function Rn(ot){var Nt=ot.getParam("link_assume_external_targets",!1);return cs(Nt)&&Nt?1:!lr(Nt)||"http"!==Nt&&"https"!==Nt?0:Nt}function _e(ot){return ot.getParam("default_link_target")}function Dn(ot){return ot.getParam("target_list",!0)}function me(ot){return ot.getParam("rel_list",[],"array")}function Kt(ot){return ot.getParam("allow_unsafe_link_target",!1,"boolean")}function Pr(ot){return lr(ot.value)?ot.value:""}function _r(ot){return void 0===ot&&(ot=Pr),function(Nt){return St.from(Nt).map(function(Me){return si(Me,ot)})}}function Nn(ot,Nt){return Fi.call(ot,Nt)}function ar(ot){return ot&&"a"===ot.nodeName.toLowerCase()}function rn(ot){return ar(ot)&&!!Ja(ot)}function Mt(ot,Nt){if(ot.collapsed)return[];for(var Me=ot.cloneContents(),$e=new Ka(Me.firstChild,Me),Pe=[],mt=Me.firstChild;Nt(mt)&&Pe.push(mt),mt=$e.next(););return Pe}function tr(ot){return/^\w+:/i.test(ot)}function xt(ot,Nt){function Me(pt){return pt.filter(function(mn){return-1===po.inArray(Pe,mn)})}var $e,Pe=["noopener"],mt=ot?ot.split(/\s+/):[],lt=Nt?0<($e=Me($e=mt)).length?$e.concat(Pe):Pe:Me(mt);return 0<lt.length?po.trim(lt.sort().join(" ")):""}function on(ot,Nt){return Nt=Nt||ot.selection.getNode(),H(Nt)?ot.dom.select("a[href]",Nt)[0]:ot.dom.getParent(Nt,"a[href]")}function Jo(ot,Nt){return(Nt?Nt.innerText||Nt.textContent:ot.getContent({format:"text"})).replace(/\uFEFF/g,"")}function Ao(ot){return 0<po.grep(ot,rn).length}function hr(ot){var Nt=ot.schema.getTextInlineElements();return 0===Mt(ot.selection.getRng(),function(Me){return 1===Me.nodeType&&!ar(Me)&&!Nn(Nt,Me.nodeName.toLowerCase())}).length}function Dr(ot,Nt,Me){var $e,Pe,mt,lt,mn,Qt,ln,kn,nn,Rt=($e=ot,Pe=Me.href,lo(lo({},Me),{href:aa.isDomSafe(Pe,"a",$e.settings)?Pe:""}));ot.hasPlugin("rtc",!0)?ot.execCommand("createlink",!1,(mn=Rt.href,Qt=Rt.rel,ln=Rt.target,kn=Rt.text,nn=Rt.title,function(ot,Nt,Me,$e){!function(Pe){for(var mt=tl(Pe),lt=0,pt=mt.length;lt<pt;lt++){var mn=mt[lt];(ln=mn,!1===function(ot){return null===ot}(Qt=Pe[mn])?Me:$e)(Qt,ln)}var Qt,ln}(ot)}({class:Rt.class.getOrNull(),href:mn,rel:Qt.getOrNull(),target:ln.getOrNull(),text:kn.getOrNull(),title:nn.getOrNull()},0,(mt=lt={},function($t,rt){mt[rt]=$t}),Yr),lt)):function(ot,Nt,Me){var $e,Pe,mt,lt,pt,mn,Qt,ln=ot.selection.getNode(),kn=on(ot,ln),nn=(Pe=ot,mt=function(ot,Nt,Me){return function($e){for(var mt=0,lt=$e.length;mt<lt;mt++)Me=Nt(Me,$e[mt])}(["title","rel","class","target"]),Me}(0,function(Rt,$t){return $e[$t].each(function(rt){Rt[$t]=0<rt.length?rt:null}),Rt},{href:($e=Me).href}),Qt=lo({},mt),0<me(Pe).length||!1!==Kt(Pe)||(lt=xt(Qt.rel,"_blank"===Qt.target),Qt.rel=lt||null),St.from(Qt.target).isNone()&&!1===Dn(Pe)&&(Qt.target=_e(Pe)),Qt.href=(pt=Qt.href,"http"!==(mn=Rn(Pe))&&"https"!==mn||tr(pt)?pt:mn+"://"+pt),Qt);ot.undoManager.transact(function(){var Rt,$t,rt,vr,yr,cr,Jr;Me.href===Nt.href&&Nt.attach(),kn?(ot.focus(),yr=ot,cr=kn,Jr=nn,Me.text.each(function(ko){Nn(cr,"innerText")?cr.innerText=ko:cr.textContent=ko}),yr.dom.setAttribs(cr,Jr),yr.selection.select(cr)):(Rt=ot,rt=Me.text,vr=nn,H($t=ln)?hs(Rt,$t,vr):rt.fold(function(){Rt.execCommand("mceInsertLink",!1,vr)},function(ko){Rt.insertContent(Rt.dom.createHTML("a",vr,Rt.dom.encode(ko)))}))})}(ot,Nt,Rt)}function je(ot){var Nt;ot.hasPlugin("rtc",!0)?ot.execCommand("unlink"):(Nt=ot).undoManager.transact(function(){var Me,$e,Pe,mt,lt,pt,mn,Qt=Nt.selection.getNode();H(Qt)?fs(Nt,Qt):($e=(Me=Nt).dom,mt=(Pe=Me.selection).getBookmark(),lt=Pe.getRng().cloneRange(),pt=$e.getParent(lt.startContainer,"a[href]",Me.getBody()),mn=$e.getParent(lt.endContainer,"a[href]",Me.getBody()),pt&&lt.setStartBefore(pt),mn&&lt.setEndAfter(mn),Pe.setRng(lt),Me.execCommand("unlink"),Pe.moveToBookmark(mt)),Nt.focus()})}function gi(ot){var Nt=ot.href;return 0<Nt.indexOf("@")&&-1===Nt.indexOf("/")&&-1===Nt.indexOf("mailto:")?St.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(Me){return lo(lo({},Me),{href:"mailto:"+Nt})}}):St.none()}function Es(ot,Nt,Me){var $e=ot.getAttrib(Nt,Me);return null!==$e&&0<$e.length?St.some($e):St.none()}function sr(ot,Nt){return ot.dom.getParent(Nt,"a[href]")}function zi(ot){return sr(ot,ot.selection.getStart())}function ds(ot,Nt){var Me,$e;Nt&&(Me=Ja(Nt),/^#/.test(Me)?($e=ot.$(Me)).length&&ot.selection.scrollIntoView($e[0],!0):function(Pe){var mt=document.createElement("a");mt.target="_blank",mt.href=Pe,mt.rel="noreferrer noopener";var lt,pt,mn=document.createEvent("MouseEvents");mn.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),lt=mt,pt=mn,document.body.appendChild(lt),lt.dispatchEvent(pt),document.body.removeChild(lt)}(Nt.href))}function ia(ot){return function(){!function(ot){var Nt,Me=on(Nt=ot);yn(Nt,Me).then(function($e){var Pe,mt,lt,pt,Qt=lt=ot,ln=(Pe=pt=$e).anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),kn=Pe.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],nn=St.from(_e(Qt)),Rt=Pe.anchor,$t={url:{value:mt=Rt.url.getOr(""),meta:{original:{value:mt}}},text:Rt.text.getOr(""),title:Rt.title.getOr(""),anchor:mt,link:mt,rel:Rt.rel.getOr(""),target:Rt.target.or(nn).getOr(""),linkClass:Rt.linkClass.getOr("")},rt=Pe.catalogs,vr=fi($t,rt);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Qn([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],ln,kn,function(yr){for(var cr=[],ur=function(ko){cr.push(ko)},Jr=0;Jr<yr.length;Jr++)yr[Jr].each(ur);return cr}([rt.anchor.map(mi.createUi("anchor","Anchors")),rt.rels.map(mi.createUi("rel","Rel")),rt.targets.map(mi.createUi("target","Open link in...")),rt.link.map(mi.createUi("link","Link list")),rt.classes.map(mi.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:$t,onChange:function(yr,cr){vr.onChange(yr.getData,{name:cr.name}).each(function(Jr){yr.setData(Jr)})},onSubmit:function(yr){var cr=yr.getData();if(!cr.url.value)return je(lt),void yr.close();function ur(dr){return St.from(cr[dr]).filter(function(Qa){return!Er(pt.anchor[dr],Qa)})}var Jr={href:cr.url.value,text:ur("text"),target:ur("target"),rel:ur("rel"),class:ur("linkClass"),title:ur("title")},ko={href:cr.url.value,attach:void 0!==cr.url.meta&&cr.url.meta.attach?cr.url.meta.attach:Yr};ri(lt,Jr).then(function(dr){Dr(lt,ko,dr)}),yr.close()}}}).then(function($e){ot.windowManager.open($e)})}(ot)}}function Ps(ot){return function(){ds(ot,zi(ot))}}function ut(ot,Nt){return ot.on("NodeChange",Nt),function(){return ot.off("NodeChange",Nt)}}function dt(ot){return function(Nt){function Me(){return Nt.setActive(!ot.mode.isReadOnly()&&null!==on(ot,ot.selection.getNode()))}return Me(),ut(ot,Me)}}function Pt(ot){return function(Nt){function Me(){return Nt.setDisabled(null===on(ot,ot.selection.getNode()))}return Me(),ut(ot,Me)}}function qt(ot){return function(Nt){function Me(Pe){return Ao(Pe)||0<Mt(ot.selection.getRng(),rn).length}var $e=ot.dom.getParents(ot.selection.getStart());return Nt.setDisabled(!Me($e)),ut(ot,function(Pe){return Nt.setDisabled(!Me(Pe.parents))})}}function Cn(ot){var Nt=Qn(function(Me,$e){for(var Pe=Me.length,mt=new Array(Pe),lt=0;lt<Pe;lt++)mt[lt]=$e(Me[lt]);return mt}(ot.dom.select("a:not([href])"),function(Me){var $e=Me.name||Me.id;return $e?[{text:$e,value:"#"+$e}]:[]}));return 0<Nt.length?St.some([{text:"None",value:""}].concat(Nt)):St.none()}var hn=function(ot){function Nt(){return Pe}function Me(mt){return mt(ot)}var $e=Cr(ot),Pe={fold:function(mt,lt){return lt(ot)},isSome:Sn,isNone:Gn,getOr:$e,getOrThunk:$e,getOrDie:$e,getOrNull:$e,getOrUndefined:$e,or:Nt,orThunk:Nt,map:function(mt){return hn(mt(ot))},each:function(mt){mt(ot)},bind:Me,exists:Me,forall:Me,filter:function(mt){return mt(ot)?Pe:xr},toArray:function(){return[ot]},toString:function(){return"some("+ot+")"}};return Pe},St={some:hn,none:En,from:function(ot){return null==ot?xr:hn(ot)}},Lr=Array.prototype.indexOf,Vn=Array.prototype.push,po=tinymce.util.Tools.resolve("tinymce.util.Tools"),si=function(ot,Nt){var Me=[];return po.each(ot,function($e){var Pe,mt,lt,pt=lr((Pe=$e).text)?Pe.text:lr(Pe.title)?Pe.title:"";void 0!==$e.menu?(mt=si($e.menu,Nt),Me.push({text:pt,items:mt})):(lt=Nt($e),Me.push({text:pt,value:lt}))}),Me},mi={sanitize:function(ot){return _r(Pr)(ot)},sanitizeWith:_r,createUi:function(ot,Nt){return function(Me){return{name:ot,type:"listbox",label:Nt,items:Me}}},getValue:Pr},lo=function(){return(lo=Object.assign||function(ot){for(var Nt,Me=1,$e=arguments.length;Me<$e;Me++)for(var Pe in Nt=arguments[Me])Object.prototype.hasOwnProperty.call(Nt,Pe)&&(ot[Pe]=Nt[Pe]);return ot}).apply(this,arguments)},tl=Object.keys,Fi=Object.hasOwnProperty,Ka=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),aa=tinymce.util.Tools.resolve("tinymce.util.URI"),Ja=function(ot){return ot.getAttribute("data-mce-href")||ot.getAttribute("href")},H=function(ot){return ot&&"FIGURE"===ot.nodeName&&/\bimage\b/i.test(ot.className)},fs=function(ot,Nt){var Me,$e=ot.dom.select("img",Nt)[0];!$e||(Me=ot.dom.getParents($e,"a[href]",Nt)[0])&&(Me.parentNode.insertBefore($e,Me),ot.dom.remove(Me))},hs=function(ot,Nt,Me){var $e,Pe=ot.dom.select("img",Nt)[0];Pe&&($e=ot.dom.create("a",Me),Pe.parentNode.insertBefore($e,Pe),$e.appendChild(Pe))},Pa=function(ot,Nt){return Zi(Nt,function(Me){return Nn($e=Me,"items")&&null!=$e.items?Pa(ot,Me.items):dn(Me.value===ot,Me);var $e})},fi=function(ot,Nt){var $e={text:ot.text,title:ot.title};return{onChange:function(Pe,mt){var pt,mn,ln,kn,nn=mt.name;return"url"===nn?(pt=Pe(),ln=dn($e.text.length<=0,St.from((mn=pt.url).meta.text).getOr(mn.value)),kn=dn($e.title.length<=0,St.from(pt.url.meta.title).getOr("")),ln.isSome()||kn.isSome()?St.some(lo(lo({},ln.map(function(Rt){return{text:Rt}}).getOr({})),kn.map(function(Rt){return{title:Rt}}).getOr({}))):St.none()):-1<Lr.call(["anchor","link"],nn)?function(Pe,mt){var lt,pt,ln,kn,nn=("link"===(lt=mt.name)?Nt.link:"anchor"===lt?Nt.anchor:St.none()).getOr([]);return kn=0<(pt=$e.text).length,void 0!==(ln=Pe[mt.name])?Pa(ln,nn).map(function(Rt){return{url:{value:Rt.value,meta:{text:kn?pt:Rt.text,attach:Yr}},text:kn?pt:Rt.text}}):St.none()}(Pe(),mt):("text"!==nn&&"title"!==nn||($e[nn]=Pe()[nn]),St.none())}}},wn=tinymce.util.Tools.resolve("tinymce.util.Delay"),hu=tinymce.util.Tools.resolve("tinymce.util.Promise"),ri=function(ot,Nt){return Zi([gi,(Me=Rn(ot),$e=ot.getParam("link_default_protocol","http","string"),function(Pe){var mt=Pe.href;return 1===Me&&!tr(mt)||0===Me&&/^\s*www(\.|\d\.)/i.test(mt)?St.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+$e+":// prefix?",preprocess:function(lt){return lo(lo({},lt),{href:$e+"://"+mt})}}):St.none()})],function(Pe){return Pe(Nt)}).fold(function(){return hu.resolve(Nt)},function(Pe){return new hu(function(mt){var lt=ot,pt=Pe.message,Qt=lt.selection.getRng();wn.setEditorTimeout(lt,function(){lt.windowManager.confirm(pt,function(ln){lt.selection.setRng(Qt),function(ln){mt(ln?Pe.preprocess(Nt):Nt)}(ln)})})})});var Me,$e},ao=tinymce.util.Tools.resolve("tinymce.util.XHR"),bl=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],yn=function(ot,Nt){return Pe=($e=ot).getParam("link_list"),new hu(function(mt){lr(Pe)?ao.send({url:Pe,success:function(lt){return mt(function(pt){try{return St.some(JSON.parse(pt))}catch(mn){return St.none()}}(lt))},error:function(lt){return mt(St.none())}}):Bi(Pe)?Pe(function(lt){return mt(St.some(lt))}):mt(St.from(Pe))}).then(function(mt){return mt.bind(mi.sanitizeWith(Me)).map(function(lt){return 0<lt.length?[{text:"None",value:""}].concat(lt):lt})}).then(function(mt){var lt,pt,mn,Qt,ln,kn,nn,Rt,$t,rt,vr=(pt=Nt,mn=(lt=ot).dom,Qt=hr(lt)?St.some(Jo(lt.selection,pt)):St.none(),ln=pt?St.some(mn.getAttrib(pt,"href")):St.none(),kn=pt?St.from(mn.getAttrib(pt,"target")):St.none(),nn=Es(mn,pt,"rel"),Rt=Es(mn,pt,"class"),{url:ln,text:Qt,title:Es(mn,pt,"title"),target:kn,rel:nn,linkClass:Rt});return{anchor:vr,catalogs:{targets:(rt=Dn(ot),Zt(rt)?mi.sanitize(rt).orThunk(function(){return St.some(bl)}):!1===rt?St.none():St.some(bl)),rels:function(yr,cr){var ur=me(yr);if(0<ur.length){var Jr=Er(cr,"_blank");return(!1===Kt(yr)?mi.sanitizeWith(function(ko){return xt(mi.getValue(ko),Jr)}):mi.sanitize)(ur)}return St.none()}(ot,vr.target),classes:0<($t=ot.getParam("link_class_list",[],"array")).length?mi.sanitize($t):St.none(),anchor:Cn(ot),link:mt},optNode:St.from(Nt),flags:{titleEnabled:ot.getParam("link_title",!0,"boolean")}}});function Me(mt){return $e.convertURL(mt.value||mt.url,"href")}var $e,Pe};Ut.add("link",function(ot){var Nt,Me,$e,Pe,mt,lt,pt;function mn(Qt){var ln=pt.selection.getNode();return Qt.setDisabled(!on(pt,ln)),Yr}(Nt=ot).ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:ia(Nt),onSetup:dt(Nt)}),Nt.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ps(Nt),onSetup:Pt(Nt)}),Nt.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return je(Nt)},onSetup:qt(Nt)}),(Me=ot).ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ps(Me),onSetup:Pt(Me)}),Me.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:ia(Me)}),Me.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return je(Me)},onSetup:qt(Me)}),($e=ot).ui.registry.addContextMenu("link",{update:function(Qt){return Ao($e.dom.getParents(Qt,"a"))?"link unlink openlink":"link"}}),(pt=ot).ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:dt(pt)},label:"Link",predicate:function(Qt){return!!on(pt,Qt)&&pt.getParam("link_context_toolbar",!1,"boolean")},initValue:function(){var Qt=on(pt);return Qt?Ja(Qt):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(Qt){var ln=pt.selection.getNode();return Qt.setActive(!!on(pt,ln)),dt(pt)(Qt)},onAction:function(Qt){var ln=Qt.getValue(),kn=function(nn){var Rt=on(pt),$t=hr(pt);if(Rt||!$t)return St.none();var rt=Jo(pt.selection,Rt);return St.some(0<rt.length?rt:nn)}(ln);Dr(pt,{href:ln,attach:Yr},{href:ln,text:kn,title:St.none(),rel:St.none(),target:St.none(),class:St.none()}),pt.selection.collapse(!1),Qt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:mn,onAction:function(Qt){je(pt),Qt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:mn,onAction:function(Qt){Ps(pt)(),Qt.hide()}}]}),(lt=ot).on("click",function(Qt){var ln=sr(lt,Qt.target);ln&&Jn.metaKeyPressed(Qt)&&(Qt.preventDefault(),ds(lt,ln))}),lt.on("keydown",function(Qt){var ln=zi(lt);ln&&13===Qt.keyCode&&!0===Qt.altKey&&!1===Qt.shiftKey&&!1===Qt.ctrlKey&&!1===Qt.metaKey&&(Qt.preventDefault(),ds(lt,ln))}),(Pe=ot).addCommand("mceLink",function(){Pe.getParam("link_quicklink",!1,"boolean")?Pe.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):ia(Pe)()}),(mt=ot).addShortcut("Meta+K","",function(){mt.execCommand("mceLink")})})}(),function(){"use strict";function Un(Me){var $e=Me;return{get:function(){return $e},set:function(Pe){$e=Pe}}}function Co(Me){return null!=Me}function Yr(){}function Cr(Me){return function(){return Me}}function Zn(Me){return Me}function ht(){return Zt}var ze=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ut=function(Me){return Pe=typeof($e=Me),"array"==(null===$e?"null":"object"==Pe&&(Array.prototype.isPrototypeOf($e)||$e.constructor&&"Array"===$e.constructor.name)?"array":"object"==Pe&&(String.prototype.isPrototypeOf($e)||$e.constructor&&"String"===$e.constructor.name)?"string":Pe);var $e,Pe},Jn=Cr(!1),lr=Cr(!0),Zt={fold:function(Me,$e){return Me()},isSome:Jn,isNone:lr,getOr:Zn,getOrThunk:Eo,getOrDie:function(Me){throw new Error(Me||"error: getOrDie called on none.")},getOrNull:Cr(null),getOrUndefined:Cr(void 0),or:Zn,orThunk:Eo,map:ht,each:Yr,bind:ht,exists:Jn,forall:lr,filter:function(){return Zt},toArray:function(){return[]},toString:Cr("none()")};function Eo(Me){return Me()}function cs(Me,$e){for(var Pe=0,mt=Me.length;Pe<mt;Pe++)if($e(Me[Pe],Pe))return!0;return!1}function Bi(Me,$e){for(var Pe=Me.length,mt=new Array(Pe),lt=0;lt<Pe;lt++)mt[lt]=$e(Me[lt],lt);return mt}function Gn(Me,$e){for(var Pe=0,mt=Me.length;Pe<mt;Pe++)$e(Me[Pe],Pe)}function Sn(){var Me,$e,Pe=(Me=Yr,$e=Un(po.none()),{clear:function(){mt(),$e.set(po.none())},isSet:function(){return $e.get().isSome()},get:function(){return $e.get()},set:function(lt){mt(),$e.set(po.some(lt))}});function mt(){return $e.get().each(Me)}return tl(tl({},Pe),{on:function(lt){return Pe.get().each(lt)}})}function xr(Me,$e,Pe){return""===$e||Me.length>=$e.length&&Me.substr(Pe,Pe+$e.length)===$e}function Fn(Me,$e){return Me.fire("PastePlainTextToggle",{state:$e})}function un(Me){return Me.getParam("paste_data_images",!1)}function Qn(Me){return Me.getParam("paste_retain_style_properties")}function Zi(Me){return Me.getParam("validate")}function Er(Me){return Me.getParam("paste_data_images",!1,"boolean")}function dn(Me){return H.explode(Me.getParam("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string"))}function Rn(Me){return-1!==Me.indexOf(hs)}function Dn(Me,$e){return H.each($e,function(Pe){Me=Pe.constructor===RegExp?Me.replace(Pe,""):Me.replace(Pe[0],Pe[1])}),Me}function me(Me){return Dn(Me,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function($e,Pe,mt){return Pe||mt?"\xa0":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function Kt(Me){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(Me)||/class="OutlineElement/.test(Me)||/id="?docs\-internal\-guid\-/.test(Me)}function _r(Me,$e){return{content:Me,cancelled:$e}}function Nn(Me,$e){return Me.insertContent($e,{merge:Me.getParam("paste_merge_formats",!0),paste:!0}),!0}function ar(Me){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(Me)}function rn(Me,$e,Pe){return!(!1!==Me.selection.isCollapsed()||!ar($e)||(lt=$e,pt=Pe,(mt=Me).undoManager.extra(function(){pt(mt,lt)},function(){mt.execCommand("mceInsertLink",!1,lt)}),0));var mt,lt,pt}function Mt(Me,$e,Pe){return mt=Me,!(!ar(lt=$e)||!cs(dn(mt),function(ln){return xr(kn=lt.toLowerCase(),nn="."+ln.toLowerCase(),kn.length-nn.length);var kn,nn})||(mn=$e,Qt=Pe,(pt=Me).undoManager.extra(function(){Qt(pt,mn)},function(){pt.insertContent('<img src="'+mn+'">')}),0));var mt,lt,pt,mn,Qt}function tr(Me){return"\n"===Me||"\r"===Me}function xt(Me,$e,Pe,mt){var lt,pt,mn,Qt,ln=function(Me,$e,Pe){var mt,lt,pt,mn,Qt,ln,kn,nn,Rt,$t,rt,vr,yr=Kt($e),cr=yr?(lt=$e,(mt=Me).getParam("paste_enable_default_filters",!0)?function(Me,$e){var Pe,mt=Qn(Me);mt&&(Pe=H.makeMap(mt.split(/[, ]/))),$e=Dn($e,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(ln,kn){return 0<kn.length?kn.replace(/./," ").slice(Math.floor(kn.length/2)).split("").join("\xa0"):""}]]);var lt=Me.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody"),pt=bl({valid_elements:lt,valid_children:"-li[p]"});H.each(pt.elements,function(ln){ln.attributes.class||(ln.attributes.class={},ln.attributesOrder.push("class")),ln.attributes.style||(ln.attributes.style={},ln.attributesOrder.push("style"))});var mn=hu({},pt);mn.addAttributeFilter("style",function(ln){for(var kn,nn=ln.length;nn--;)(kn=ln[nn]).attr("style",function(Rt,$t,rt,vr){var yr={},cr=Rt.dom.parseStyle(vr);return H.each(cr,function(ur,Jr){switch(Jr){case"mso-list":var ko=/\w+ \w+([0-9]+)/i.exec(vr);ko&&(rt._listLevel=parseInt(ko[1],10)),/Ignore/i.test(ur)&&rt.firstChild&&(rt._listIgnore=!0,rt.firstChild._listIgnore=!0);break;case"horiz-align":Jr="text-align";break;case"vert-align":Jr="vertical-align";break;case"font-color":case"mso-foreground":Jr="color";break;case"mso-background":case"mso-highlight":Jr="background";break;case"font-weight":case"font-style":return void("normal"!==ur&&(yr[Jr]=ur));case"mso-element":if(/^(comment|comment-list)$/i.test(ur))return void rt.remove()}0!==Jr.indexOf("mso-comment")?0!==Jr.indexOf("mso-")&&("all"===Qn(Rt)||$t&&$t[Jr])&&(yr[Jr]=ur):rt.remove()}),/(bold)/i.test(yr["font-weight"])&&(delete yr["font-weight"],rt.wrap(new ao("b",1))),/(italic)/i.test(yr["font-style"])&&(delete yr["font-style"],rt.wrap(new ao("i",1))),Rt.dom.serializeStyle(yr,rt.name)||null}(Me,Pe,kn,kn.attr("style"))),"span"===kn.name&&kn.parent&&!kn.attributes.length&&kn.unwrap()}),mn.addAttributeFilter("class",function(ln){for(var kn,nn,Rt=ln.length;Rt--;)nn=(kn=ln[Rt]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(nn)&&kn.remove(),kn.attr("class",null)}),mn.addNodeFilter("del",function(ln){for(var kn=ln.length;kn--;)ln[kn].remove()}),mn.addNodeFilter("a",function(ln){for(var kn,nn,Rt,$t=ln.length;$t--;)nn=(kn=ln[$t]).attr("href"),Rt=kn.attr("name"),nn&&-1!==nn.indexOf("#_msocom_")?kn.remove():!(nn=nn&&0===nn.indexOf("file://")?(nn=nn.split("#")[1])&&"#"+nn:nn)&&!Rt||Rt&&!/^_?(?:toc|edn|ftn)/i.test(Rt)?kn.unwrap():kn.attr({href:nn,name:Rt})});var Qt=mn.parse($e);return Me.getParam("paste_convert_word_fake_lists",!0)&&function(ln){for(var kn,nn,Rt=1,$t=function(Wn){var Rr="";if(3===Wn.type)return Wn.value;if(Wn=Wn.firstChild)for(;Rr+=$t(Wn),Wn=Wn.next;);return Rr},rt=function(Wn,Rr){if(3===Wn.type&&Rr.test(Wn.value))return Wn.value=Wn.value.replace(Rr,""),!1;if(Wn=Wn.firstChild)do{if(!rt(Wn,Rr))return!1}while(Wn=Wn.next);return!0},vr=function(Wn){if(Wn._listIgnore)Wn.remove();else if(Wn=Wn.firstChild)for(;vr(Wn),Wn=Wn.next;);},yr=function(Wn,Rr,Uo){var Va=Wn._listLevel||Rt;(kn=Va!==Rt?Va<Rt?kn&&kn.parent.parent:(nn=kn,null):kn)&&kn.name===Rr?kn.append(Wn):(nn=nn||kn,kn=new ao(Rr,1),1<Uo&&kn.attr("start",""+Uo),Wn.wrap(kn)),Wn.name="li",Rt<Va&&nn&&nn.lastChild.append(kn),Rt=Va,vr(Wn),rt(Wn,/^\u00a0+/),rt(Wn,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),rt(Wn,/^\u00a0+/)},cr=[],ur=ln.firstChild;null!=ur;)if(cr.push(ur),null!==(ur=ur.walk()))for(;void 0!==ur&&ur.parent!==ln;)ur=ur.walk();for(var Jr,ko,dr,Qa=0;Qa<cr.length;Qa++)"p"===(ln=cr[Qa]).name&&ln.firstChild?(Jr=$t(ln),/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(Jr)?yr(ln,"ul"):function(Wn){var Rr=!1;return Wn=Jr.replace(/^[\u00a0 ]+/,""),H.each([/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],function(Uo){if(Uo.test(Wn))return!(Rr=!0)}),Rr}(Jr)?(dr=1,yr(ln,"ol",dr=(ko=/([0-9]+)\./.exec(Jr))?parseInt(ko[1],10):dr)):ln._listLevel?yr(ln,"ul",1):kn=null):(nn=kn,kn=null)}(Qt),ri({validate:Zi(Me)},pt).serialize(Qt)}(mt,lt):lt):$e;return rt=(pt=Me).fire("PastePreProcess",{content:cr,internal:mn=Pe,wordContent:Qt=yr}),vr=function(ur,Jr){var ko=hu({},ur.schema);ko.addNodeFilter("meta",function(Qa){H.each(Qa,function(Wn){Wn.remove()})});var dr=ko.parse(Jr,{forced_root_block:!1,isRootContent:!0});return ri({validate:Zi(ur)},ur.schema).serialize(dr)}(pt,rt.content),pt.hasEventListeners("PastePostProcess")&&!rt.isDefaultPrevented()?(kn=mn,nn=Qt,Rt=(ln=pt).dom.create("div",{style:"display:none"},vr),_r(($t=ln.fire("PastePostProcess",{node:Rt,internal:kn,wordContent:nn})).node.innerHTML,$t.isDefaultPrevented())):_r(vr,rt.isDefaultPrevented())}(Me,$e,Pe);!1===ln.cancelled&&(lt=Me,pt=ln.content,mt||!1===lt.getParam("smart_paste",!0)?Nn(lt,pt):(mn=lt,Qt=pt,H.each([rn,Mt,Nn],function(kn){return!0!==kn(mn,Qt,Nn)})))}function on(Me,$e,Pe){var mt=Pe||Rn($e);xt(Me,$e.replace(hs,""),mt,!1)}function Jo(Me,$e){var Pe,mt,lt,pt,mn,Qt,kn=function(Me,$e,Pe){return $e?(mt=!0===$e?"p":$e,lt=Pe,pt=Me.split(/\n\n/),mn=function(kn,nn){var $t=[],rt="<"+kn;if("object"==typeof nn){for(var vr in nn)fi.call(nn,vr)&&$t.push(vr+'="'+wn.encodeAllRaw(nn[vr])+'"');$t.length&&(rt+=" "+$t.join(" "))}return rt+">"}(mt,lt),Qt="</"+mt+">",1===(ln=H.map(pt,function(kn){return kn.split(/\n/).join("<br />")})).length?ln[0]:H.map(ln,function(kn){return mn+kn+Qt}).join("")):Me.replace(/\r?\n/g,"<br>");var mt,lt,pt,mn,Qt,ln}((Pe=Me.dom.encode($e).replace(/\r\n/g,"\n"),pt=(mt=Me.getParam("paste_tab_spaces",4,"number"))<=0?"":new Array(mt+1).join(" "),mn=Pe.replace(/\t/g,pt),Qt={pcIsSpace:!(lt=function(nn,Rt){return-1!==" \f\t\v".indexOf(Rt)||"\xa0"===Rt?nn.pcIsSpace||""===nn.str||nn.str.length===mn.length-1||($t=nn.str.length+1)<mn.length&&0<=$t&&tr(mn[$t])?{pcIsSpace:!1,str:nn.str+"\xa0"}:{pcIsSpace:!0,str:nn.str+" "}:{pcIsSpace:tr(Rt),str:nn.str+Rt};var $t}),str:""},Gn(mn,function(nn,Rt){Qt=lt(Qt,nn)}),Qt.str),Me.getParam("forced_root_block"),Me.getParam("forced_root_block_attrs"));xt(Me,kn,!1,!0)}function Ao(Me){var $e,Pe={};if(Me&&(!Me.getData||($e=Me.getData("Text"))&&0<$e.length&&-1===$e.indexOf("data:text/mce-internal,")&&(Pe["text/plain"]=$e),Me.types))for(var mt=0;mt<Me.types.length;mt++){var lt=Me.types[mt];try{Pe[lt]=Me.getData(lt)}catch(pt){Pe[lt]=""}}return Pe}function hr(Me,$e){return $e in Me&&0<Me[$e].length}function pe(Me){return hr(Me,"text/html")||hr(Me,"text/plain")}function Dr(Me,$e,Pe){var mt,lt,pt,mn,Qt,ln="paste"===$e.type?$e.clipboardData:$e.dataTransfer;if(Er(Me)&&ln){var kn=(mt=Me,pt=(lt=ln).items?function(nn){for(var Rt=[],$t=0,rt=nn.length;$t<rt;++$t){if(!Ut(nn[$t]))throw new Error("Arr.flatten item "+$t+" was not an array, input: "+nn);mi.apply(Rt,nn[$t])}return Rt}(Bi(lo(lt.items),function(nn){return"file"===nn.kind?[nn.getAsFile()]:[]})):[],mn=lt.files?lo(lt.files):[],function(nn,Rt){for(var $t=[],rt=0,vr=nn.length;rt<vr;rt++){var yr=nn[rt];Rt(yr,rt)&&$t.push(yr)}return $t}(0<pt.length?pt:mn,(Qt=dn(mt),function(nn){return xr(nn.type,"image/",0)&&cs(Qt,function(Rt){return $t=Rt.toLowerCase(),(H.hasOwn(rt={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"},$t)?"image/"+rt[$t]:"image/"+$t)===nn.type;var $t,rt})})));if(0<kn.length)return $e.preventDefault(),aa.all(Bi(kn,function(nn){return new aa(function(Rt){var $t=Co(nn.getAsFile)?nn.getAsFile():nn,rt=new window.FileReader;rt.onload=function(){Rt({blob:$t,uri:rt.result})},rt.readAsDataURL($t)})})).then(function(nn){Pe&&Me.selection.setRng(Pe),Gn(nn,function(Rt){var $t,rt,vr,yr,cr,ur,Jr,ko,Qa,Wn,Rr,Uo,Va,Ha,rr,Wi,ui,Zs,Mo;$t=Me,vr=(rt=Rt).uri,rr=(Ha=(yr=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(vr))?{type:yr[1],data:decodeURIComponent(yr[2])}:{type:null,data:null}).data,Wi=Ha.type,ui=yn(),Zs=rt.blob,(Mo=new Image).src=rt.uri,Uo=Mo,!(Va=$t.getParam("images_dataimg_filter"))||Va(Uo)?(Qa=void 0,(ur=(cr=$t.editorUpload.blobCache).getByData(rr,Wi))?Qa=ur:(ko=(Jr=$t.getParam("images_reuse_filename")&&Co(Zs.name))?(Wn=$t,Co(Rr=Zs.name.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i))?Wn.dom.encode(Rr[1]):null):ui,Qa=cr.create(ui,Zs,rr,ko,Jr?Zs.name:void 0),cr.add(Qa)),on($t,'<img src="'+Qa.blobUri()+'">',!1)):on($t,'<img src="'+rt.uri+'">',!1)})}),!0}return!1}function je(Me){return Ja.metaKeyPressed(Me)&&86===Me.keyCode||Me.shiftKey&&45===Me.keyCode}function Es(Me){return Fi.ie&&Me.inline?document.body:Me.getBody()}function sr(Me,$e,Pe,mt){!function(lt,pt,mn){if(!1===Fi.iOS&&"function"==typeof(null==lt?void 0:lt.setData))try{return lt.clearData(),lt.setData("text/html",pt),lt.setData("text/plain",mn),lt.setData(Pa(),pt),1}catch(Qt){return}}(Me.clipboardData,$e.html,$e.text)?Pe($e.html,mt):(Me.preventDefault(),mt())}function zi(Me){return function($e,Pe){var mt=hs+$e,lt=Me.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),pt=Me.dom.create("div",{contenteditable:"true"},mt);Me.dom.setStyles(lt,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),lt.appendChild(pt),Me.dom.add(Me.getBody(),lt);var mn=Me.selection.getRng();pt.focus();var Qt=Me.dom.createRng();Qt.selectNodeContents(pt),Me.selection.setRng(Qt),Ka.setTimeout(function(){Me.selection.setRng(mn),lt.parentNode.removeChild(lt),Pe()},0)}}function ds(Me){return{html:Me.selection.getContent({contextual:!0}),text:Me.selection.getContent({format:"text"})}}function ia(Me){return!Me.selection.isCollapsed()||($e=Me).dom.getParent($e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",$e.getBody());var $e}function Ps(Me,$e){return Nt.getCaretRangeFromPoint($e.clientX,$e.clientY,Me.getDoc())}function ut(Me,$e){Me.focus(),Me.selection.setRng($e)}function dt(Me,$e){Me.on("PastePreProcess",function(Pe){Pe.content=$e(Me,Pe.content,Pe.internal,Pe.wordContent)})}function Pt(Me,$e){if(!Kt($e))return $e;var Pe=[];return H.each(Me.schema.getBlockElements(),function(mt,lt){Pe.push(lt)}),$e=Dn($e,[[new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+Pe.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),"$1"]]),Dn($e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function qt(Me,$e,Pe,mt){if(mt||Pe)return $e;var lt,pt,mn,Qt=Me.getParam("paste_webkit_styles");return!1===Me.getParam("paste_remove_styles_if_webkit",!0)||"all"===Qt?$e:($e=(lt=Qt?Qt.split(/[, ]/):lt)?(pt=Me.dom,mn=Me.selection.getNode(),$e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(ln,kn,nn,Rt){var $t=pt.parseStyle(pt.decode(nn)),rt={};if("none"===lt)return kn+Rt;for(var vr=0;vr<lt.length;vr++){var yr=$t[lt[vr]],cr=pt.getStyle(mn,lt[vr],!0);/color/.test(lt[vr])&&(yr=pt.toHex(yr),cr=pt.toHex(cr)),cr!==yr&&(rt[lt[vr]]=yr)}var ur=pt.serializeStyle(rt,"span");return ur?kn+' style="'+ur+'"'+Rt:kn+Rt})):$e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")).replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(ln,kn,nn,Rt){return kn+' style="'+nn+'"'+Rt})}function Cn(Me,$e){Me.$("a",$e).find("font,u").each(function(Pe,mt){Me.dom.remove(mt,!0)})}function hn(Me,$e){return function(Pe){function mt(lt){return Pe.setActive(lt.state)}return Pe.setActive("text"===$e.pasteFormat.get()),Me.on("PastePlainTextToggle",mt),function(){return Me.off("PastePlainTextToggle",mt)}}}function St(Me){return Me.dom.get("mcepastebin")}var Lr,Vn=function(Me){function $e(){return lt}function Pe(pt){return pt(Me)}var mt=Cr(Me),lt={fold:function(pt,mn){return mn(Me)},isSome:lr,isNone:Jn,getOr:mt,getOrThunk:mt,getOrDie:mt,getOrNull:mt,getOrUndefined:mt,or:$e,orThunk:$e,map:function(pt){return Vn(pt(Me))},each:function(pt){pt(Me)},bind:Pe,exists:Pe,forall:Pe,filter:function(pt){return pt(Me)?lt:Zt},toArray:function(){return[Me]},toString:function(){return"some("+Me+")"}};return lt},po={some:Vn,none:ht,from:function(Me){return null==Me?Zt:Vn(Me)}},si=Array.prototype.slice,mi=Array.prototype.push,lo="function"==typeof Array.from?Array.from:function(Me){return si.call(Me)},tl=function(){return(tl=Object.assign||function(Me){for(var $e,Pe=1,mt=arguments.length;Pe<mt;Pe++)for(var lt in $e=arguments[Pe])Object.prototype.hasOwnProperty.call($e,lt)&&(Me[lt]=$e[lt]);return Me}).apply(this,arguments)},Fi=tinymce.util.Tools.resolve("tinymce.Env"),Ka=tinymce.util.Tools.resolve("tinymce.util.Delay"),aa=tinymce.util.Tools.resolve("tinymce.util.Promise"),Ja=tinymce.util.Tools.resolve("tinymce.util.VK"),H=tinymce.util.Tools.resolve("tinymce.util.Tools"),fs="x-tinymce/html",hs="\x3c!-- "+fs+" --\x3e",Pa=Cr(fs),fi=Object.hasOwnProperty,wn=tinymce.util.Tools.resolve("tinymce.html.Entities"),hu=tinymce.util.Tools.resolve("tinymce.html.DomParser"),ri=tinymce.util.Tools.resolve("tinymce.html.Serializer"),ao=tinymce.util.Tools.resolve("tinymce.html.Node"),bl=tinymce.util.Tools.resolve("tinymce.html.Schema"),yn=(Lr=0,function(){return"mceclip"+Lr++}),ot=function(Me,$e){var Pe=St(Me);return Pe&&"mcepastebin"===Pe.id&&Pe.innerHTML===$e},Nt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils");ze.add("paste",function(Me){if(0==(!!Me.hasPlugin("powerpaste",!0)&&(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0))){var $e=Un(!1),Pe=Un(Me.getParam("paste_as_text",!1)?"text":"html"),mt=(Jr=Pe,ko=function(Me){var $e=Un(null),Pe="%MCEPASTEBIN%";return{create:function(){return function(mt,lt,pt){var mn=mt.dom,Qt=mt.getBody();lt.set(mt.selection.getRng());var ln,kn,Rt,$t=mt.dom.add(Es(mt),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},"%MCEPASTEBIN%");(Fi.ie||Fi.gecko)&&mn.setStyle($t,"left","rtl"===mn.getStyle(Qt,"direction",!0)?65535:-65535),mn.bind($t,"beforedeactivate focusin focusout",function(rt){rt.stopPropagation()}),kn=$t,Es(Rt=ln=mt)!==Rt.getBody()&&ln.dom.bind(kn,"paste keyup",function(rt){ot(ln,"%MCEPASTEBIN%")||ln.fire("paste")}),$t.focus(),mt.selection.select($t,!0)}(Me,$e)},remove:function(){return function(mt,lt){if(St(mt)){for(var pt,mn=lt.get();pt=mt.dom.get("mcepastebin");)mt.dom.remove(pt),mt.dom.unbind(pt);mn&&mt.selection.setRng(mn)}lt.set(null)}(Me,$e)},getEl:function(){return St(Me)},getHtml:function(){return function(mt){function lt(nn,Rt){nn.appendChild(Rt),mt.dom.remove(Rt,!0)}var pt=H.grep(Es(mt).childNodes,function(nn){return"mcepastebin"===nn.id}),mn=pt.shift();H.each(pt,function(nn){lt(mn,nn)});for(var Qt=mt.dom.select("div[id=mcepastebin]",mn),ln=Qt.length-1;0<=ln;ln--){var kn=mt.dom.create("div");mn.insertBefore(kn,Qt[ln]),lt(kn,Qt[ln])}return mn?mn.innerHTML:""}(Me)},getLastRng:$e.get,isDefault:function(){return ot(Me,Pe)},isDefaultContent:function(mt){return mt===Pe}}}(ur=Me),ur.on("PreInit",function(){return function(Me,$e,Pe){var mt,lt,pt,mn,Qt,ln,kn;function nn(Rt,$t,rt,vr,yr){var cr;hr($t,"text/html")?cr=$t["text/html"]:(cr=pt.getHtml(),yr=yr||Rn(cr),pt.isDefaultContent(cr)&&(vr=!0)),cr=me(cr),pt.remove();var ur,Jr,ko,dr,Qa,Wn,Rr,Uo,Va=!1===yr&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(cr),Ha=ar(cr);((vr=!cr.length||Va&&!Ha||vr)||Ha)&&(cr=hr($t,"text/plain")&&Va?$t["text/plain"]:(ur=cr,Jr=bl(),ko=hu({},Jr),dr="",Qa=Jr.getShortEndedElements(),Wn=H.makeMap("script noscript style textarea video audio iframe object"," "),Rr=Jr.getBlockElements(),Uo=function(rr){var Wi=rr.name,ui=rr;if("br"!==Wi){if("wbr"!==Wi)if(Qa[Wi]&&(dr+=" "),Wn[Wi])dr+=" ";else{if(3===rr.type&&(dr+=rr.value),!rr.shortEnded&&(rr=rr.firstChild))for(;Uo(rr),rr=rr.next;);Rr[Wi]&&ui.next&&(dr+="\n","p"===Wi&&(dr+="\n"))}}else dr+="\n"},ur=Dn(ur,[/<!\[[^\]]+\]>/g]),Uo(ko.parse(ur)),dr)),pt.isDefaultContent(cr)?rt||Rt.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):vr?Jo(Rt,cr):on(Rt,cr,yr)}lt=Me,pt=$e,mn=Pe,ln=Sn(),kn=Sn(),lt.on("keyup",kn.clear),lt.on("keydown",function(Rt){function $t(rt){je(rt)&&!rt.isDefaultPrevented()&&pt.remove()}if(je(Rt)&&!Rt.isDefaultPrevented()&&(!(Qt=Rt.shiftKey&&86===Rt.keyCode)||!Fi.webkit||-1===navigator.userAgent.indexOf("Version/"))){if(Rt.stopImmediatePropagation(),ln.set(Rt),kn.set(!0),Fi.ie&&Qt)return Rt.preventDefault(),void lt.fire("paste",{ieFake:!0});pt.remove(),pt.create(),lt.once("keyup",$t),lt.once("paste",function(){lt.off("keyup",$t)})}}),lt.on("paste",function(Rt){var $t=ln.isSet()||kn.isSet();$t&&ln.clear();var rt,vr=Ao(Rt.clipboardData||lt.getDoc().dataTransfer),yr="text"===mn.get()||Qt,cr=hr(vr,Pa());Qt=!1,Rt.isDefaultPrevented()||(rt=Rt.clipboardData,-1!==navigator.userAgent.indexOf("Android")&&rt&&rt.items&&0===rt.items.length)||!pe(vr)&&Dr(lt,Rt,pt.getLastRng()||lt.selection.getRng())?pt.remove():($t||Rt.preventDefault(),!Fi.ie||$t&&!Rt.ieFake||hr(vr,"text/html")||(pt.create(),lt.dom.bind(pt.getEl(),"paste",function(ur){ur.stopPropagation()}),lt.getDoc().execCommand("Paste",!1,null),vr["text/html"]=pt.getHtml()),hr(vr,"text/html")?(Rt.preventDefault(),cr=cr||Rn(vr["text/html"]),nn(lt,vr,$t,yr,cr)):Ka.setEditorTimeout(lt,function(){nn(lt,vr,$t,yr,cr)},0))}),Me.parser.addNodeFilter("img",function(Rt,$t,rt){var vr;if(!Er(Me)&&rt.data&&!0===rt.data.paste)for(var yr=Rt.length;yr--;)(mt=Rt[yr].attr("src"))&&(0!==mt.indexOf("webkit-fake-url")&&(Me.getParam("allow_html_data_urls",!1,"boolean")||0!==mt.indexOf("data:"))||(vr=Rt[yr]).attr("data-mce-object")||mt===Fi.transparentSrc||vr.remove())})}(ur,ko,Jr)}),{pasteFormat:Jr,pasteHtml:function(Wn,Rr){return on(ur,Wn,Rr)},pasteText:function(Wn){return Jo(ur,Wn)},pasteImageData:function(Wn,Rr){return Dr(ur,Wn,Rr)},getDataTransferItems:Ao,hasHtmlOrText:pe,hasContentType:hr}),vr=Me;return Fi.webkit&&dt(vr,qt),Fi.ie&&(dt(vr,Pt),cr=Cn,(yr=vr).on("PastePostProcess",function(Wn){cr(yr,Wn.node)})),($t=Me).ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:dr,onSetup:hn($t,rt=mt)}),$t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:dr,onSetup:hn($t,rt)}),Rt=mt,(nn=Me).addCommand("mceTogglePlainTextPaste",function(){var Wn,Rr=nn;"text"===(Wn=Rt).pasteFormat.get()?(Wn.pasteFormat.set("html"),Fn(Rr,!1)):(Wn.pasteFormat.set("text"),Fn(Rr,!0)),Rr.focus()}),nn.addCommand("mceInsertClipboardContent",function(Wn,Rr){Rr.content&&Rt.pasteHtml(Rr.content,Rr.internal),Rr.text&&Rt.pasteText(Rr.text)}),function(Wn){var Rr=Wn.plugins.paste,Uo=Wn.getParam("paste_preprocess");Uo&&Wn.on("PastePreProcess",function(Ha){Uo.call(Rr,Rr,Ha)});var Va=Wn.getParam("paste_postprocess");Va&&Wn.on("PastePostProcess",function(Ha){Va.call(Rr,Rr,Ha)})}(Me),(Qt=Me).on("cut",(ln=Qt,function(Wn){ia(ln)&&sr(Wn,ds(ln),zi(ln),function(){var Rr;Fi.browser.isChrome()||Fi.browser.isFirefox()?(Rr=ln.selection.getRng(),Ka.setEditorTimeout(ln,function(){ln.selection.setRng(Rr),ln.execCommand("Delete")},0)):ln.execCommand("Delete")})})),Qt.on("copy",(kn=Qt,function(Wn){ia(kn)&&sr(Wn,ds(kn),zi(kn),Yr)})),pt=mt,mn=$e,(lt=Me).getParam("paste_block_drop",!1)&&lt.on("dragend dragover draggesture dragdrop drop drag",function(Wn){Wn.preventDefault(),Wn.stopPropagation()}),un(lt)||lt.on("drop",function(Wn){var Rr=Wn.dataTransfer;Rr&&Rr.files&&0<Rr.files.length&&Wn.preventDefault()}),lt.on("drop",function(Wn){var Rr,Uo,Va,Ha,rr=Ps(lt,Wn);Wn.isDefaultPrevented()||mn.get()||(Rr=pt.getDataTransferItems(Wn.dataTransfer),Uo=pt.hasContentType(Rr,Pa()),(!pt.hasHtmlOrText(Rr)||(Va=Rr["text/plain"])&&0===Va.indexOf("file://"))&&pt.pasteImageData(Wn,rr)||!rr||!lt.getParam("paste_filter_drop",!0)||(Ha=Rr["mce-internal"]||Rr["text/html"]||Rr["text/plain"])&&(Wn.preventDefault(),Ka.setEditorTimeout(lt,function(){lt.undoManager.transact(function(){Rr["mce-internal"]&&lt.execCommand("Delete"),ut(lt,rr),Ha=me(Ha),Rr["text/html"]?pt.pasteHtml(Ha,Uo):pt.pasteText(Ha)})})))}),lt.on("dragstart",function(Wn){mn.set(!0)}),lt.on("dragover dragend",function(Wn){un(lt)&&!1===mn.get()&&(Wn.preventDefault(),ut(lt,Ps(lt,Wn))),"dragend"===Wn.type&&mn.set(!1)}),{clipboard:mt}}var lt,pt,mn,Qt,ln,kn,nn,Rt,$t,rt,yr,cr,ur,Jr,ko;function dr(){return $t.execCommand("mceTogglePlainTextPaste")}})}(),function(){"use strict";function Un(_){return function(D){return W=typeof(B=D),(null===B?"null":"object"==W&&(Array.prototype.isPrototypeOf(B)||B.constructor&&"Array"===B.constructor.name)?"array":"object"==W&&(String.prototype.isPrototypeOf(B)||B.constructor&&"String"===B.constructor.name)?"string":W)===_;var B,W}}function Co(_){return function(D){return typeof D===_}}function Yr(_){return function(D){return _===D}}function Cr(_){return null!=_}function Zn(){}function ht(_){return function(){return _}}function En(_){return _}function ze(_,D){return _===D}var Ut=Un("string"),Jn=Un("object"),lr=Un("array"),Zt=Yr(null),Eo=Co("boolean"),cs=Yr(void 0),Bi=Co("function"),Gn=Co("number");function Sn(_){for(var D=[],B=1;B<arguments.length;B++)D[B-1]=arguments[B];return function(){for(var W=[],K=0;K<arguments.length;K++)W[K]=arguments[K];var J=D.concat(W);return _.apply(null,J)}}function xr(_){return function(D){return!_(D)}}function Fn(){return Zi}var un=ht(!1),Qn=ht(!0),Zi={fold:function(_,D){return _()},isSome:un,isNone:Qn,getOr:En,getOrThunk:Er,getOrDie:function(_){throw new Error(_||"error: getOrDie called on none.")},getOrNull:ht(null),getOrUndefined:ht(void 0),or:En,orThunk:Er,map:Fn,each:Zn,bind:Fn,exists:un,forall:Qn,filter:function(){return Zi},toArray:function(){return[]},toString:ht("none()")};function Er(_){return _()}function dn(_,D){return-1<Es.call(_,D)}function Rn(_,D){for(var B=0,W=_.length;B<W;B++)if(D(_[B],B))return!0;return!1}function _e(_,D){for(var B=[],W=0;W<_;W++)B.push(D(W));return B}function Dn(_,D){for(var B=_.length,W=new Array(B),K=0;K<B;K++)W[K]=D(_[K],K);return W}function me(_,D){for(var B=0,W=_.length;B<W;B++)D(_[B],B)}function Kt(_,D){for(var B=[],W=[],K=0,J=_.length;K<J;K++){var se=_[K];(D(se,K)?B:W).push(se)}return{pass:B,fail:W}}function Pr(_,D){for(var B=[],W=0,K=_.length;W<K;W++){var J=_[W];D(J,W)&&B.push(J)}return B}function _r(_,D,B){return function(W){for(var J=W.length-1;0<=J;J--)B=D(B,W[J],J)}(_),B}function ro(_,D,B){return me(_,function(W,K){B=D(B,W,K)}),B}function Nn(_,D){return function(B,W,K){for(var J=0,se=B.length;J<se;J++){var fe=B[J];if(W(fe,J))return je.some(fe);if(K(fe,J))break}return je.none()}(_,D,un)}function ar(_,D){for(var B=0,W=_.length;B<W;B++)if(D(_[B],B))return je.some(B);return je.none()}function rn(_){for(var D=[],B=0,W=_.length;B<W;++B){if(!lr(_[B]))throw new Error("Arr.flatten item "+B+" was not an array, input: "+_);_s.apply(D,_[B])}return D}function Mt(_,D){return rn(Dn(_,D))}function tr(_,D){for(var B=0,W=_.length;B<W;++B)if(!0!==D(_[B],B))return!1;return!0}function xt(_,D){for(var B={},W=0,K=_.length;W<K;W++){var J=_[W];B[String(J)]=D(J,W)}return B}function on(_){return[_]}function Jo(_,D){return 0<=D&&D<_.length?je.some(_[D]):je.none()}function Ao(_){return Jo(_,0)}function hr(_){return Jo(_,_.length-1)}function pe(_,D){for(var B=0;B<_.length;B++){var W=D(_[B],B);if(W.isSome())return W}return je.none()}var Dr=function(_){function D(){return K}function B(J){return J(_)}var W=ht(_),K={fold:function(J,se){return se(_)},isSome:Qn,isNone:un,getOr:W,getOrThunk:W,getOrDie:W,getOrNull:W,getOrUndefined:W,or:D,orThunk:D,map:function(J){return Dr(J(_))},each:function(J){J(_)},bind:B,exists:B,forall:B,filter:function(J){return J(_)?K:Zi},toArray:function(){return[_]},toString:function(){return"some("+_+")"}};return K},je={some:Dr,none:Fn,from:function(_){return null==_?Zi:Dr(_)}},gi=Array.prototype.slice,Es=Array.prototype.indexOf,_s=Array.prototype.push,sr=function(){return(sr=Object.assign||function(_){for(var D,B=1,W=arguments.length;B<W;B++)for(var K in D=arguments[B])Object.prototype.hasOwnProperty.call(D,K)&&(_[K]=D[K]);return _}).apply(this,arguments)};function zi(_,D,B){if(B||2===arguments.length)for(var W,K=0,J=D.length;K<J;K++)!W&&K in D||((W=W||Array.prototype.slice.call(D,0,K))[K]=D[K]);return _.concat(W||Array.prototype.slice.call(D))}function ds(_){var D,B=!1;return function(){for(var W=[],K=0;K<arguments.length;K++)W[K]=arguments[K];return B||(B=!0,D=_.apply(null,W)),D}}function ia(_,D){var B=String(D).toLowerCase();return Nn(_,function(W){return W.search(B)})}function Ps(_,D,B){return""===D||_.length>=D.length&&_.substr(B,B+D.length)===D}function ut(_,D){return-1!==_.indexOf(D)}function dt(_,D){return Ps(_,D,_.length-D.length)}function Pt(_){return 0<_.length}function qt(_){return function(D){return ut(D,_)}}function Cn(_){return window.matchMedia(_).matches}function hn(_,D){var B=_.dom;if(1!==B.nodeType)return!1;var W=B;if(void 0!==W.matches)return W.matches(D);if(void 0!==W.msMatchesSelector)return W.msMatchesSelector(D);if(void 0!==W.webkitMatchesSelector)return W.webkitMatchesSelector(D);if(void 0!==W.mozMatchesSelector)return W.mozMatchesSelector(D);throw new Error("Browser lacks native selectors")}function St(_){return 1!==_.nodeType&&9!==_.nodeType&&11!==_.nodeType||0===_.childElementCount}function Lr(_,D){var B=void 0===D?document:D.dom;return St(B)?je.none():je.from(B.querySelector(_)).map(rt.fromDom)}function Vn(_,D){return _.dom===D.dom}function po(_,D){return $t().browser.isIE()?(K=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(_.dom.compareDocumentPosition(D.dom)&K)):(J=_.dom)!==(se=D.dom)&&J.contains(se);var K,J,se}function si(_,D){for(var B=yr(_),W=0,K=B.length;W<K;W++){var J=B[W];D(_[J],J)}}function mi(_,D){return ur(_,function(B,W){return{k:W,v:D(B,W)}})}function lo(_,D){var B={},W=D,K=B,J=function(fe,we){K[we]=fe},se=Zn;return si(_,function(fe,we){(W(fe,we)?J:se)(fe,we)}),B}function tl(_,D){var B=[];return si(_,function(W,K){B.push(D(W,K))}),B}function Fi(_){return tl(_,En)}function Ka(_){return yr(_).length}function aa(_,D){return Jr(_,D)?je.from(_[D]):je.none()}function Ja(_,D){return Jr(_,D)&&null!=_[D]}function H(_,D,B){return{element:_,rowspan:D,colspan:B}}function fs(_,D,B){return{element:_,cells:D,section:B}}function hs(_,D,B){return{element:_,isNew:D,isLocked:B}}function Pa(_,D,B,W){return{element:_,cells:D,section:B,isNew:W}}function fi(){return bl(0,0)}function wn(_){function D(K){return function(){return B===K}}var B=_.current;return{current:B,version:_.version,isEdge:D("Edge"),isChrome:D("Chrome"),isIE:D("IE"),isOpera:D("Opera"),isFirefox:D(Pe),isSafari:D("Safari")}}function hu(_){function D(K){return function(){return B===K}}var B=_.current;return{current:B,version:_.version,isWindows:D(pt),isiOS:D("iOS"),isAndroid:D(mn),isOSX:D("OSX"),isLinux:D("Linux"),isSolaris:D(Qt),isFreeBSD:D(ln),isChromeOS:D(kn)}}function ri(_){if(null==_)throw new Error("Node cannot be null or undefined");return{dom:_}}var ao,bl=function(_,D){return{major:_,minor:D}},yn={nu:bl,detect:function(_,D){var B,W,K=String(D).toLowerCase();return 0===_.length?fi():(W=function(se,fe){for(var we=0;we<se.length;we++){var ke=se[we];if(ke.test(fe))return ke}}(_,B=K))?bl(J(1),J(2)):{major:0,minor:0};function J(se){return Number(B.replace(W,"$"+se))}},unknown:fi},ot=function(_,D){return Ps(_,D,0)},Nt=(ao=/^\s+|\s+$/g,function(_){return _.replace(ao,"")}),Me=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,$e={browsers:ht([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(_){return ut(_,"edge/")&&ut(_,"chrome")&&ut(_,"safari")&&ut(_,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Me],search:function(_){return ut(_,"chrome")&&!ut(_,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(_){return ut(_,"msie")||ut(_,"trident")}},{name:"Opera",versionRegexes:[Me,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:qt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:qt("firefox")},{name:"Safari",versionRegexes:[Me,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(_){return(ut(_,"safari")||ut(_,"mobile/"))&&ut(_,"applewebkit")}}]),oses:ht([{name:"Windows",search:qt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(_){return ut(_,"iphone")||ut(_,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:qt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:qt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:qt("linux"),versionRegexes:[]},{name:"Solaris",search:qt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:qt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:qt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},Pe="Firefox",mt=function(){return wn({current:void 0,version:yn.unknown()})},lt=wn,pt=(ht("Edge"),ht("Chrome"),ht("IE"),ht("Opera"),ht(Pe),ht("Safari"),"Windows"),mn="Android",Qt="Solaris",ln="FreeBSD",kn="ChromeOS",nn=function(){return hu({current:void 0,version:yn.unknown()})},Rt=hu,$t=(ht(pt),ht("iOS"),ht(mn),ht("Linux"),ht("OSX"),ht(Qt),ht(ln),ht(kn),ds(function(){return _=navigator.userAgent,D=je.from(navigator.userAgentData),B=Cn,at=$e.browsers(),vt=$e.oses(),{browser:Ue=D.bind(function(Wt){return Ke=at,pe(Wt.brands,function(Gt){var yt=Gt.brand.toLowerCase();return Nn(Ke,function(Bn){var Yt;return yt===(null===(Yt=Bn.brand)||void 0===Yt?void 0:Yt.toLowerCase())}).map(function(Bn){return{current:Bn.name,version:yn.nu(parseInt(Gt.version,10),0)}})});var Ke}).orThunk(function(){return ia(at,Wt=_).map(function(Ke){var Gt=yn.detect(Ke.versionRegexes,Wt);return{current:Ke.name,version:Gt}});var Wt}).fold(mt,lt),os:st=ia(vt,W=_).map(function(Wt){var Ke=yn.detect(Wt.versionRegexes,W);return{current:Wt.name,version:Ke}}).fold(nn,Rt),deviceType:(J=Ue,se=_,fe=B,we=(K=st).isiOS()&&!0===/ipad/i.test(se),ke=K.isiOS()&&!we,Fe=(Le=K.isiOS()||K.isAndroid())||fe("(pointer:coarse)"),Re=we||!ke&&Le&&fe("(min-device-width:768px)"),tt=ke||Le&&!Re,He=J.isSafari()&&K.isiOS()&&!1===/safari/i.test(se),{isiPad:ht(we),isiPhone:ht(ke),isTablet:ht(Re),isPhone:ht(tt),isTouch:ht(Fe),isAndroid:K.isAndroid,isiOS:K.isiOS,isWebView:ht(He),isDesktop:ht(!tt&&!Re&&!He)})};var _,D,B,W,K,J,se,fe,we,ke,Le,Fe,Re,tt,He,at,vt,Ue,st})),rt={fromHtml:function(_,D){var B=(D||document).createElement("div");if(B.innerHTML=_,!B.hasChildNodes()||1<B.childNodes.length)throw console.error("HTML does not have a single root node",_),new Error("HTML must have a single root node");return ri(B.childNodes[0])},fromTag:function(_,D){return ri((D||document).createElement(_))},fromText:function(_,D){return ri((D||document).createTextNode(_))},fromDom:ri,fromPoint:function(_,D,B){return je.from(_.dom.elementFromPoint(D,B)).map(ri)}},vr=hn,yr=Object.keys,cr=Object.hasOwnProperty,ur=function(_,D){var B={};return si(_,function(W,K){var J=D(W,K);B[J.k]=J.v}),B},Jr=function(_,D){return cr.call(_,D)},ko=["tfoot","thead","tbody","colgroup"];function dr(_){return _.dom.nodeName.toLowerCase()}function Qa(_){return _.dom.nodeType}function Wn(_){return function(D){return Qa(D)===_}}function Rr(_){return 8===Qa(_)||"#comment"===dr(_)}function Uo(_){return function(D){return Wa(D)&&dr(D)===_}}function Va(_){return rt.fromDom(_.dom.ownerDocument)}function Ha(_){return ji(_)?_:Va(_)}function rr(_){return je.from(_.dom.parentNode).map(rt.fromDom)}function Wi(_,D){for(var B=Bi(D)?D:un,W=_.dom,K=[];null!=W.parentNode;){var J=W.parentNode,se=rt.fromDom(J);if(K.push(se),!0===B(se))break;W=J}return K}function ui(_){return je.from(_.dom.previousSibling).map(rt.fromDom)}function Zs(_){return je.from(_.dom.nextSibling).map(rt.fromDom)}function Mo(_){return Dn(_.dom.childNodes,rt.fromDom)}function Eu(_,D){return je.from(_.dom.childNodes[D]).map(rt.fromDom)}function Vl(_){return rt.fromDom(_.dom.host)}function Ar(_,D,B){return W=function(K){return hn(K,D)},Pr(Wi(_,B),W);var W}function lc(_,D){return B=function(W){return hn(W,D)},Pr(Mo(_),B);var B}function $i(_,D){return St(B=void 0===_?document:_.dom)?[]:Dn(B.querySelectorAll(D),rt.fromDom);var B}"undefined"!=typeof window||Function("return this;")();var Wa=Wn(1),Gi=Wn(3),ji=Wn(9),co=Wn(11),Qo=Bi(Element.prototype.attachShadow)&&Bi(Node.prototype.getRootNode),Hl=ht(Qo),Ra=Qo?function(_){return rt.fromDom(_.dom.getRootNode())}:Ha,wr=function(_){var D=Gi(_)?_.dom.parentNode:_.dom;if(null==D||null===D.ownerDocument)return!1;var B,W,K,J,se,fe=D.ownerDocument;return K=rt.fromDom(D),se=Ra(K),(co(J=se)&&Cr(J.dom.host)?je.some(se):je.none()).fold(function(){return fe.body.contains(D)},(B=wr,W=Vl,function(we){return B(W(we))}))},Pc=function(_){var D=_.dom.body;if(null==D)throw new Error("Body is not available yet");return rt.fromDom(D)},ws=function(_,D){var B=[];return me(Mo(_),function(W){B=(B=D(W)?B.concat([W]):B).concat(ws(W,D))}),B};function At(_,D,B,W,K){return _(B,W)?je.some(B):Bi(K)&&K(B)?je.none():D(B,W,K)}function it(_,D,B){for(var W=_.dom,K=Bi(B)?B:un;W.parentNode;){var J=rt.fromDom(W=W.parentNode);if(D(J))return je.some(J);if(K(J))break}return je.none()}function Oi(_,D,B){return it(_,function(W){return hn(W,D)},B)}function td(_,D){return B=function(W){return hn(W,D)},Nn(_.dom.childNodes,function(W){return B(rt.fromDom(W))}).map(rt.fromDom);var B}function Wl(_,D){return Lr(D,_)}function Ss(_,D,B){return At(hn,Oi,_,D,B)}function $s(_,D,B){if(!(Ut(B)||Eo(B)||Gn(B)))throw console.error("Invalid call to Attribute.set. Key ",D,":: Value ",B,":: Element ",_),new Error("Attribute value was not simple");_.setAttribute(D,B+"")}function ma(_,D,B){$s(_.dom,D,B)}function Pu(_,D){var B=_.dom;si(D,function(W,K){$s(B,K,W)})}function Ei(_,D){var B=_.dom.getAttribute(D);return null===B?void 0:B}function qo(_,D){return je.from(Ei(_,D))}function xl(_){return ro(_.dom.attributes,function(D,B){return D[B.name]=B.value,D},{})}function es(_,D,B){return void 0===B&&(B=ze),_.exists(function(W){return B(W,D)})}function nd(_){for(var D=[],B=function(K){D.push(K)},W=0;W<_.length;W++)_[W].each(B);return D}function rd(_,D,B){return _.isSome()&&D.isSome()?je.some(B(_.getOrDie(),D.getOrDie())):je.none()}function gu(_,D){return _?je.some(D):je.none()}function Cs(_){return void 0!==_.style&&Bi(_.style.getPropertyValue)}function Ru(_,D,B){if(!Ut(B))throw console.error("Invalid call to CSS.set. Property ",D,":: Value ",B,":: Element ",_),new Error("CSS value must be a string: "+B);Cs(_)&&_.style.setProperty(D,B)}function pi(_,D,B){Ru(_.dom,D,B)}function Fd(_,D){var B=_.dom;si(D,function(W,K){Ru(B,K,W)})}function Ui(_,D){var B=_.dom,W=window.getComputedStyle(B).getPropertyValue(D);return""!==W||wr(_)?W:Mr(B,D)}function gs(_,D){var W=Mr(_.dom,D);return je.from(W).filter(function(K){return 0<K.length})}function od(_,D){var B,W=D;Cs(B=_.dom)&&B.style.removeProperty(W),es(qo(_,"style").map(Nt),"")&&Ji(_,"style")}function _l(_,D,B){return void 0===B&&(B=0),qo(_,D).map(function(W){return parseInt(W,10)}).getOr(B)}function pf(_,D){return _l(_,D,1)}function Gl(_){return Uo("col")(_)?1<_l(_,"span",1):1<pf(_,"colspan")}function Vd(_){return 1<pf(_,"rowspan")}function nl(_,D){return parseInt(Ui(_,D),10)}function Gh(_,D){return ol(_,D,Qn)}function jh(_,D){return B=["td","th"],(K=void 0===(K=D)?un:D)(W=_)?je.none():dn(B,dr(W))?je.some(W):Oi(W,B.join(","),function(J){return hn(J,"table")||K(J)});var B,W,K}function wl(_){return Gh(_,"th,td")}function Po(_){return hn(_,"colgroup")?lc(_,"col"):Mt(yf(_),function(D){return lc(D,"col")})}function li(_,D){return Ss(_,"table",D)}function Hd(_){return Gh(_,"tr")}function Nu(_,D){return Dn(_,function(B){if("colgroup"!==dr(B))return fs(B,W=Dn(wl(B),function(K){return H(K,_l(K,"rowspan",1),_l(K,"colspan",1))}),D(B));var W=Dn(Po(B),function(K){return H(K,1,_l(K,"span",1))});return fs(B,W,"colgroup")})}function Wd(_){return rr(_).map(function(D){var B=dr(D);return dn(ko,B)?B:"tbody"}).getOr("tbody")}function vf(_){var D=Hd(_);return Nu(zi(zi([],yf(_),!0),D,!0),Wd)}function jl(_,D,B){var W=_.cells,K=W.slice(0,D),J=W.slice(D),se=K.concat(B).concat(J);return bf(_,se)}function Ca(_,D,B){return jl(_,D,[B])}function id(_,D,B){_.cells[D]=B}function Lu(_,D){return _.cells[D]}function sa(_,D){return Lu(_,D).element}function Vi(_){return _.cells.length}function ts(_){var D=Kt(_,function(B){return"colgroup"===B.section});return{rows:D.fail,cols:D.pass}}function Sl(_,D,B){var W=Dn(_.cells,B);return Pa(D(_.element),W,_.section,!0)}function Rs(_){return qo(_,_i).bind(function(D){return je.from(D.match(/\d+/g))}).map(function(D){return xt(D,Qn)})}function Ga(_){var D,B=tl(ro(ts(_).rows,function(W,K){return me(K.cells,function(J,se){J.isLocked&&(W[se]=!0)}),W},{}),function(W,K){return parseInt(K,10)});return(D=gi.call(B,0)).sort(void 0),D}function cc(_){var D={},B=[],W=Ao(_).map(function(Re){return Re.element}).bind(li).bind(Rs).getOr({}),K=0,J=0,se=0,fe=Kt(_,function(Re){return"colgroup"===Re.section}),we=fe.pass;me(fe.fail,function(Re){var tt=[];me(Re.cells,function(He){for(var at=0;void 0!==D[se+","+at];)at++;for(var vt=Ja(W,at.toString()),Ue={element:He.element,rowspan:He.rowspan,colspan:He.colspan,row:se,column:at,isLocked:vt},st=0;st<He.colspan;st++)for(var Wt=0;Wt<He.rowspan;Wt++){var Ke=at+st;D[se+Wt+","+Ke]=Ue,J=Math.max(J,Ke+1)}tt.push(Ue)}),K++,B.push(fs(Re.element,tt,Re.section)),se++});var ke=hr(we).map(function(Re){var tt,He,at=(tt={},He=0,me(Re.cells,function(vt){var Ue=vt.colspan;_e(Ue,function(st){var Wt=He+st;tt[Wt]={element:vt.element,colspan:Ue,column:Wt}}),He+=Ue}),tt);return{colgroups:[{element:Re.element,columns:Fi(at)}],columns:at}}).getOrThunk(function(){return{colgroups:[],columns:{}}});return{grid:{rows:K,columns:J},access:D,all:B,columns:ke.columns,colgroups:ke.colgroups}}function Rc(_,D){return D.column<=_.finishCol&&D.column+D.colspan-1>=_.startCol&&D.row<=_.finishRow&&D.row+D.rowspan-1>=_.startRow}function Bu(_,D){return D.column>=_.startCol&&D.column+D.colspan-1<=_.finishCol&&D.row>=_.startRow&&D.row+D.rowspan-1<=_.finishRow}function ks(_,D,B){var W=Zr.findItem(_,D,Vn),K=Zr.findItem(_,B,Vn);return W.bind(function(J){return K.map(function(se){return fe=J,we=se,{startRow:Math.min(fe.row,we.row),startCol:Math.min(fe.column,we.column),finishRow:Math.max(fe.row+fe.rowspan-1,we.row+we.rowspan-1),finishCol:Math.max(fe.column+fe.colspan-1,we.column+we.colspan-1)};var fe,we})})}function oi(_,D,B){return ks(_,D,B).map(function(W){return Dn(Zr.filterItems(_,Sn(Rc,W)),function(K){return K.element})})}function dc(_,D){return Zr.findItem(_,D,function(B,W){return po(W,B)}).map(function(B){return B.element})}function Cl(_,D,B,W,K){var J=mu(_),se=Vn(_,B)?je.some(D):dc(J,D),fe=Vn(_,K)?je.some(W):dc(J,W);return se.bind(function(we){return fe.bind(function(ke){return oi(J,we,ke)})})}function Ms(_,D){rr(_).each(function(B){B.dom.insertBefore(D.dom,_.dom)})}function Hi(_,D){Zs(_).fold(function(){rr(_).each(function(B){qr(B,D)})},function(B){Ms(B,D)})}function ja(_,D){Eu(_,0).fold(function(){qr(_,D)},function(B){_.dom.insertBefore(D.dom,B.dom)})}function Um(_,D){Ms(_,D),qr(D,_)}function Vo(_,D){me(D,function(B,W){Hi(0===W?_:D[W-1],B)})}function pn(_,D){me(D,function(B){qr(_,B)})}function Ks(_){_.dom.textContent="",me(Mo(_),function(D){ns(D)})}function rl(_){var D,B=Mo(_);0<B.length&&(D=_,me(B,function(W){Ms(D,W)})),ns(_)}function Ki(_){return zu.get(_)}function Ua(_){return zu.getOption(_)}function Sr(_,D){return zu.set(_,D)}function ad(_,D){return Pr(Mt(_.all,function(B){return B.cells}),D)}var Hg,Ul,Ji=function(_,D){_.dom.removeAttribute(D)},Mr=function(_,D){return Cs(_)?_.style.getPropertyValue(D):""},nh=ht(10),In=ht(10),ol=function(_,D,B){return Mt(Mo(_),function(W){return hn(W,D)?B(W)?[W]:[]:ol(W,D,B)})},yf=function(_){return li(_).fold(ht([]),function(D){return lc(D,"colgroup")})},bf=function(_,D){return Pa(_.element,D,_.section,_.isNew)},_i="data-snooker-locked-cols",Zr={fromTable:function(_){return cc(vf(_))},generate:cc,getAt:function(_,D,B){return je.from(_.access[D+","+B])},findItem:function(_,D,B){var W=ad(_,function(K){return B(D,K.element)});return 0<W.length?je.some(W[0]):je.none()},filterItems:ad,justCells:function(_){return Mt(_.all,function(D){return D.cells})},justColumns:function(_){return Fi(_.columns)},hasColumns:function(_){return 0<yr(_.columns).length},getColumnAt:function(_,D){return je.from(_.columns[D])}},mu=Zr.fromTable,qr=function(_,D){_.dom.appendChild(D.dom)},ns=function(_){var D=_.dom;null!==D.parentNode&&D.parentNode.removeChild(D)},zu=(Hg=Gi,{get:function(_){if(!Hg(_))throw new Error("Can only get text value of a text node");return Ul(_).getOr("")},getOption:Ul=function(_){return Hg(_)?je.from(_.dom.nodeValue):je.none()},set:function(_,D){if(!Hg(_))throw new Error("Can only set raw text value of a text node");_.dom.nodeValue=D}}),qm=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function pu(){return{up:ht({selector:Oi,closest:Ss,predicate:it,all:Wi}),down:ht({selector:$i,predicate:ws}),styles:ht({get:Ui,getRaw:gs,set:pi,remove:od}),attrs:ht({get:Ei,set:ma,remove:Ji,copyTo:function(_,D){Pu(D,xl(_))}}),insert:ht({before:Ms,after:Hi,afterAll:Vo,append:qr,appendAll:pn,prepend:ja,wrap:Um}),remove:ht({unwrap:rl,remove:ns}),create:ht({nu:rt.fromTag,clone:function(_){return rt.fromDom(_.dom.cloneNode(!1))},text:rt.fromText}),query:ht({comparePosition:function(_,D){return _.dom.compareDocumentPosition(D.dom)},prevSibling:ui,nextSibling:Zs}),property:ht({children:Mo,name:dr,parent:rr,document:function(_){return Ha(_).dom},isText:Gi,isComment:Rr,isElement:Wa,isSpecial:function(_){return dn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],dr(_))},getLanguage:function(_){return Wa(_)?qo(_,"lang"):je.none()},getText:Ki,setText:Sr,isBoundary:function(_){return!!Wa(_)&&("body"===dr(_)||dn(qm,dr(_)))},isEmptyTag:function(_){return!!Wa(_)&&dn(["br","img","hr","input"],dr(_))},isNonEditable:function(_){return Wa(_)&&"false"===Ei(_,"contenteditable")}}),eq:Vn,is:vr}}function ql(_,D){return T(N,function(B,W){return _(W)},D)}function fc(_){return Oi(_,"table")}function ms(_,D,B){function W(K){return function(J){return void 0!==B&&B(J)||Vn(J,K)}}return Vn(_,D)?je.some({boxes:je.some([_]),start:_,finish:D}):fc(_).bind(function(K){return fc(D).bind(function(J){if(Vn(K,J))return je.some({boxes:(ke=_,Le=D,oi(mu(K),ke,Le)),start:_,finish:D});if(po(K,J)){var se=0<(fe=Ar(D,"td,th",W(K))).length?fe[fe.length-1]:D;return je.some({boxes:Cl(K,_,K,D,J),start:_,finish:se})}if(po(J,K)){var fe,we=0<(fe=Ar(_,"td,th",W(J))).length?fe[fe.length-1]:_;return je.some({boxes:Cl(J,_,K,D,J),start:_,finish:we})}return I(N,_,D,void 0).shared.bind(function(Fe){return Ss(Fe,"table",B).bind(function(Re){var tt=Ar(D,"td,th",W(Re)),He=0<tt.length?tt[tt.length-1]:D,at=Ar(_,"td,th",W(Re)),vt=0<at.length?at[at.length-1]:_;return je.some({boxes:Cl(Re,_,K,D,J),start:vt,finish:He})})});var ke,Le})})}function Gd(_,D){var B=$i(_,D);return 0<B.length?je.some(B):je.none()}function Xl(_,D,B){return Wl(_,D).bind(function(W){return Wl(_,B).bind(function(K){return ql(fc,[W,K]).map(function(J){return{first:W,last:K,table:J}})})})}function Fu(_,D,B,W){return _.fold(D,B,W)}function qi(_,D){return rt.fromDom(_.dom.cloneNode(D))}function ps(_){return qi(_,!1)}function Nc(_){return qi(_,!0)}function Et(_,D){var B=rt.fromTag(D);return Pu(B,xl(_)),B}function Ns(_,D){function B(K){var J=D(K);if(J<=0||null===J){var se=Ui(K,_);return parseFloat(se)||0}return J}function W(K,J){return ro(J,function(se,fe){var we=Ui(K,fe),ke=void 0===we?0:parseInt(we,10);return isNaN(ke)?se:se+ke},0)}return{set:function(K,J){if(!Gn(J)&&!J.match(/^[0-9]+$/))throw new Error(_+".set accepts only positive integer values. Value was "+J);var se=K.dom;Cs(se)&&(se.style[_]=J+"px")},get:B,getOuter:B,aggregate:W,max:function(K,J,se){var fe=W(K,se);return fe<J?J-fe:0}}}function kr(){var _=$t().browser;return _.isIE()||_.isEdge()}function qa(_,D,B){return W=Ui(_,D),K=B,J=parseFloat(W),(isNaN(J)?je.none():je.some(J)).getOr(K);var W,K,J}function Qi(_){return Ui(_,"box-sizing")}function il(_,D,B,W){return D-qa(_,"padding-"+B,0)-qa(_,"padding-"+W,0)-qa(_,"border-"+B+"-width",0)-qa(_,"border-"+W+"-width",0)}function sd(_,D){var B=_.dom,W=B.getBoundingClientRect().width||B.offsetWidth;return"border-box"===D?W:il(_,W,"left","right")}function Na(_){return be.get(_)}function bo(_){return be.getOuter(_)}function hc(_,D){void 0===D&&(D=Qn);var B=_.grid,W=_e(B.columns,En),K=_e(B.rows,En);return Dn(W,function(J){return Ne(function(){return Mt(K,function(se){return Zr.getAt(_,se,J).filter(function(fe){return fe.column===J}).toArray()})},function(se){return 1===se.colspan&&D(se.element)},function(){return Zr.getAt(_,0,J)})})}function Wg(_){var D=_.grid,B=_e(D.rows,En),W=_e(D.columns,En);return Dn(B,function(K){return Ne(function(){return Mt(W,function(J){return Zr.getAt(_,K,J).filter(function(se){return se.row===K}).fold(ht([]),function(se){return[se]})})},function(J){return 1===J.rowspan},function(){return Zr.getAt(_,K,0)})})}function Si(_,D){return function(B){return"rtl"===Xe(B)?D:_}}function jd(_){return ft.get(_)}function Uh(_){return ft.getOuter(_)}function ka(_,D){return void 0!==_?_:void 0!==D?D:0}function qe(_){var D=_.dom.ownerDocument,B=D.body,W=D.defaultView,K=D.documentElement;if(B===_.dom)return Xt(B.offsetLeft,B.offsetTop);var J=ka(null==W?void 0:W.pageYOffset,K.scrollTop),se=ka(null==W?void 0:W.pageXOffset,K.scrollLeft),fe=ka(K.clientTop,B.clientTop),we=ka(K.clientLeft,B.clientLeft);return vn(_).translate(se-we,J-fe)}function Di(_,D){return{row:_,y:D}}function qh(_,D){return{col:_,x:D}}function ea(_){return qe(_).left+bo(_)}function kl(_){return qe(_).left}function ii(_,D){return qh(_,kl(D))}function ki(_,D){return qh(_,ea(D))}function gc(_){return qe(_).top}function al(_,D){return Di(_,gc(D))}function $n(_,D){return Di(_,gc(D)+Uh(D))}function ua(_,D,B){if(0===B.length)return[];var W=Dn(B.slice(1),function(J,se){return J.map(function(fe){return _(se,fe)})}),K=B[B.length-1].map(function(J){return D(B.length-1,J)});return W.concat([K])}function ud(_){if(!lr(_))throw new Error("cases must be an array");if(0===_.length)throw new Error("there must be at least one case");var D=[],B={};return me(_,function(W,K){var J=yr(W);if(1!==J.length)throw new Error("one and only one name per case");var se=J[0],fe=W[se];if(void 0!==B[se])throw new Error("duplicate key detected:"+se);if("cata"===se)throw new Error("cannot have a case named cata (sorry)");if(!lr(fe))throw new Error("case arguments must be an array");D.push(se),B[se]=function(){for(var we=[],ke=0;ke<arguments.length;ke++)we[ke]=arguments[ke];var Le=we.length;if(Le!==fe.length)throw new Error("Wrong number of arguments to case "+se+". Expected "+fe.length+" ("+fe+"), got "+Le);return{fold:function(){for(var Fe=[],Re=0;Re<arguments.length;Re++)Fe[Re]=arguments[Re];if(Fe.length!==_.length)throw new Error("Wrong number of arguments to fold. Expected "+_.length+", got "+Fe.length);return Fe[K].apply(null,we)},match:function(Fe){var Re=yr(Fe);if(D.length!==Re.length)throw new Error("Wrong number of arguments to match. Expected: "+D.join(",")+"\nActual: "+Re.join(","));if(!tr(D,function(tt){return dn(Re,tt)}))throw new Error("Not all branches were specified when using match. Specified: "+Re.join(", ")+"\nRequired: "+D.join(", "));return Fe[se].apply(null,we)},log:function(Fe){console.log(Fe,{constructors:D,constructor:se,params:we})}}}}),B}var Yl,mc,m,T=function(_,D,B){return 0<B.length?(W=_,K=D,J=B[0],_r(B.slice(1),function(se,fe){var we=K(W,fe);return function(_,D,B){return D.bind(function(W){return B.filter(Sn(_.eq,W))})}(W,se,we)},K(W,J))):je.none();var W,K,J},I=function(_,D,B,W){function K(Le){return ar(Le,W).fold(function(){return Le},function(Fe){return Le.slice(0,Fe+1)})}void 0===W&&(W=un);var J=[D].concat(_.up().all(D)),se=[B].concat(_.up().all(B)),fe=K(J),we=K(se),ke=Nn(fe,function(Le){return Rn(we,Sn(_.eq,Le))});return{firstpath:fe,secondpath:we,shared:ke}},N=pu(),j=Gd,q=ud([{none:[]},{multiple:["elements"]},{single:["element"]}]),$=q.none,te=q.multiple,ae=q.single,ge=tinymce.util.Tools.resolve("tinymce.PluginManager"),be=Ns("width",function(_){return _.dom.offsetWidth}),Ce=function(_){return sd(_,"content-box")},De=function(_){return kr()?sd(_,Qi(_)):qa(_,"width",_.dom.offsetWidth)},Ne=function(_,D,B){var W=_();return Nn(W,D).orThunk(function(){return je.from(W[0]).orThunk(B)}).map(function(K){return K.element})},Xe=function(_){return"rtl"===Ui(_,"direction")?"rtl":"ltr"},ft=Ns("height",function(_){var D=_.dom;return wr(_)?D.getBoundingClientRect().height:D.offsetHeight}),jt=function(_,D){return{left:_,top:D,translate:function(B,W){return jt(_+B,D+W)}}},Xt=jt,vn=function(_){var D,B=_.dom,W=B.ownerDocument.body;return W===B?Xt(W.offsetLeft,W.offsetTop):wr(_)?(D=B.getBoundingClientRect(),Xt(D.left,D.top)):Xt(0,0)},On={delta:En,positions:function(_){return ua(al,$n,_)},edge:gc},er=Si({delta:En,edge:kl,positions:function(_){return ua(ii,ki,_)}},{delta:function(_){return-_},edge:ea,positions:function(_){return ua(ki,ii,_)}}),$r={delta:function(_,D){return er(D).delta(_,D)},positions:function(_,D){return er(D).positions(_,D)},edge:function(_){return er(_).edge(_)}},Hr={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},br=(m=["Infinity",(Yl="[0-9]+")+"\\."+Xo(Yl)+Xo(mc="[eE][+-]?[0-9]+"),"\\."+Yl+Xo(mc),Yl+Xo(mc)].join("|"),new RegExp("^([+-]?(?:"+m+"))(.*)$"));function Xo(_){return"(?:"+_+")?"}function xo(_,D,B){var W=je.from(_.dom.parentElement).map(rt.fromDom).getOrThunk(function(){return Pc(Va(_))});return D(_)/B(W)*100}function Wr(_,D){pi(_,"width",D+"px")}function gr(_,D){pi(_,"width",D+"%")}function gn(_,D){pi(_,"height",D+"px")}function Ho(_,D){return gs(_,D).orThunk(function(){return qo(_,D).map(function(B){return B+"px"})})}function Io(_){return Ho(_,"width")}function rs(_){return xo(_,Na,Ce)}function Ma(_){return(Pf(_)?Na:De)(_)}function Ot(_){return function(_){var D,B,W,K,J,se,fe,we,ke,Le,Fe=function(_){return kr()?(B=Qi(D=_),K=(W=D.dom).getBoundingClientRect().height||W.offsetHeight,"border-box"===B?K:il(D,K,"top","bottom")):qa(_,"height",_.dom.offsetHeight);var D,B,W,K}(_)+"px";return Fe?(D=Fe,B=_,W=jd,K=gn,Le=parseFloat(D),dt(D,"%")&&"table"!==dr(B)?(se=Le,fe=W,we=K,ke=li(J=B).map(function(Re){var tt=fe(Re);return Math.floor(se/100*tt)}).getOr(se),we(J,ke),ke):Le):jd(_)}(D=_)/pf(D,"rowspan");var D}function vu(_,D,B){pi(_,"width",D+B)}function Ls(_){return xo(_,Na,Ce)+"%"}function pa(_){return Io(_).getOrThunk(function(){return Ma(_)+"px"})}function q0(_){return Ho(_,"height").getOrThunk(function(){return Ot(_)+"px"})}function Xh(_,D,B,W,K,J){return _.filter(W).fold(function(){return J(function(se,fe){if(fe<0||fe>=se.length-1)return je.none();var we=se[fe].fold(function(){var Le,Fe;return pe((Le=se.slice(0,fe),(Fe=gi.call(Le,0)).reverse(),Fe),function(Re,tt){return Re.map(function(He){return{value:He,delta:tt+1}})})},function(Le){return je.some({value:Le,delta:0})}),ke=se[fe+1].fold(function(){return pe(se.slice(fe+1),function(Le,Fe){return Le.map(function(Re){return{value:Re,delta:Fe+1}})})},function(Le){return je.some({value:Le,delta:1})});return we.bind(function(Le){return ke.map(function(Fe){var Re=Fe.delta+Le.delta;return Math.abs(Fe.value-Le.value)/Re})})}(B,D))},function(se){return K(se)})}function xf(_,D,B,W){var K=hc(_),J=Zr.hasColumns(_)?Dn(Zr.justColumns(_),function(we){return je.from(we.element)}):K,se=[je.some($r.edge(D))].concat(Dn($r.positions(K,D),function(we){return we.map(function(ke){return ke.x})})),fe=xr(Gl);return Dn(J,function(we,ke){return Xh(we,ke,se,fe,function(Le){return Re=Le,He=(tt=$t().browser).isChrome()||tt.isFirefox(),!l1(Re)||He?B(Le):Xh(null!=(Fe=K[ke])?Fe:je.none(),ke,se,fe,function(at){return W(je.some(Na(at)))},W);var Fe,Re,tt,He},W)})}function rh(_){return _.map(function(D){return D+"px"}).getOr("")}function Yh(_,D,B){return xf(_,D,Ma,function(W){return W.getOrThunk(B.minCellWidth)})}function Ud(_,D,B,W,K){var J=Wg(_),se=[je.some(B.edge(D))].concat(Dn(B.positions(J,D),function(fe){return fe.map(function(we){return we.y})}));return Dn(J,function(fe,we){return Xh(fe,we,se,xr(Vd),W,K)})}function jn(_,D){return function(){return wr(_)?D(_):parseFloat(gs(_,"width").getOr("0"))}}function av(_){var D=jn(_,function(W){return parseFloat(Ls(W))}),B=jn(_,Na);return{width:D,pixelWidth:B,getWidths:function(W,K){return J=K,xf(W,_,rs,function(se){return se.fold(function(){return J.minCellWidth()},function(fe){return fe/J.pixelWidth()*100})});var J},getCellDelta:function(W){return W/B()*100},singleColumnWidth:function(W,K){return[100-W]},minCellWidth:function(){return nh()/B()*100},setElementWidth:gr,adjustTableWidth:function(W){var K=D();gr(_,K+W/100*K)},isRelative:!0,label:"percent"}}function qd(_){var D=jn(_,Na);return{width:D,pixelWidth:D,getWidths:function(B,W){return Yh(B,_,W)},getCellDelta:En,singleColumnWidth:function(B,W){return[Math.max(nh(),B+W)-B]},minCellWidth:nh,setElementWidth:Wr,adjustTableWidth:function(B){var W=D()+B;Wr(_,W)},isRelative:!1,label:"pixel"}}function Zh(_){return"img"===dr(_)?1:Ua(_).fold(function(){return Mo(_).length},function(D){return D.length})}function sv(_){return Ua(_).filter(function(D){return 0!==D.trim().length||-1<D.indexOf("\xa0")}).isSome()||dn(oy,dr(_))}function Js(_){return D=sv,(B=function(W){for(var K=0;K<W.childNodes.length;K++){var J=rt.fromDom(W.childNodes[K]);if(D(J))return je.some(J);var se=B(W.childNodes[K]);if(se.isSome())return se}return je.none()})(_.dom);var D,B}function Qs(_){return Rf(_,sv)}function uv(_){return function(){var D=rt.fromTag("td",_.dom);return qr(D,rt.fromTag("br",_.dom)),D}}function oh(_){return function(){return rt.fromTag("col",_.dom)}}function Ym(_){return function(){return rt.fromTag("colgroup",_.dom)}}function X0(_){return function(){return rt.fromTag("tr",_.dom)}}function lv(_,D,B){var W,K,J=(pn(K=Et(W=_,D),Mo(Nc(W))),K);return si(B,function(se,fe){null===se?Ji(J,fe):ma(J,fe,se)}),J}function vs(_){return _}function Ai(_,D,B){function W(K,J){var se=K.element.dom,fe=J.dom;Cs(se)&&Cs(fe)&&(fe.style.cssText=se.style.cssText),od(J,"height"),1!==K.colspan&&od(J,"width")}return{col:function(K){var J=rt.fromTag(dr(K.element),D.dom);return W(K,J),_(K.element,J),J},colgroup:Ym(D),row:X0(D),cell:function(K){var J,se,fe,we,ke,Le=rt.fromTag(dr(K.element),D.dom),Fe=B.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Re=0<Fe.length?(se=Le,fe=Fe,Js(J=K.element).map(function(tt){return _r(Ar(tt,fe.join(","),function(He){return Vn(He,J)}),function(He,at){var vt=ps(at);return Ji(vt,"contenteditable"),qr(He,vt),vt},se)}).getOr(se)):Le;return qr(Re,rt.fromTag("br")),W(K,Le),we=K.element,ke=Le,si(yh,function(tt,He){return qo(we,He).filter(function(at){return dn(tt,at)}).each(function(at){return ma(ke,He,at)})}),_(K.element,Le),Le},replace:lv,colGap:oh(D),gap:uv(D)}}function La(_){return{col:oh(_),colgroup:Ym(_),row:X0(_),cell:uv(_),replace:vs,colGap:oh(_),gap:uv(_)}}function ih(_){return Dn(_,rt.fromDom)}function Xa(_){return rt.fromDom(_.getBody())}function Zl(_){return _.getBoundingClientRect().width}function cv(_){return _.getBoundingClientRect().height}function pc(_){return function(D){return Vn(D,Xa(_))}}function Ta(_){return/^\d+(\.\d+)?$/.test(_)?_+"px":_}function $h(_){function D(B){return Ji(B,"data-mce-style")}Ji(_,"data-mce-style"),me(wl(_),D),me(Po(_),D)}function ld(_){return rt.fromDom(_.selection.getStart())}function sl(_){return Fu(_.get(),ht([]),En,on)}function ah(_,D,B){return{element:B,mergable:(J=D,se=Yu,Fu(_.get(),je.none,function(fe){return fe.length<=1?je.none():function(_,D,B){return Xl(_,D,B).bind(function(W){function K(we){return Vn(_,we)}var J="thead,tfoot,tbody,table",se=Oi(W.first,J,K),fe=Oi(W.last,J,K);return se.bind(function(we){return fe.bind(function(ke){return Vn(we,ke)?(Re=W.first,tt=W.last,He=mu(W.table),ks(Le=He,Re,tt).bind(function(at){return function(vt,Ue){for(var st=!0,Wt=Sn(Bu,Ue),Ke=Ue.startRow;Ke<=Ue.finishRow;Ke++)for(var Gt=Ue.startCol;Gt<=Ue.finishCol;Gt++)st=st&&Zr.getAt(vt,Ke,Gt).exists(Wt);return st?je.some(Ue):je.none()}(Le,at)})):je.none();var Le,Re,tt,He})})})}(J,se.firstSelectedSelector,se.lastSelectedSelector).map(function(we){return{bounds:we,cells:fe}})},je.none)),unmergable:0<(K=sl(_)).length&&tr(K,function(fe){return W(fe,"rowspan")||W(fe,"colspan")})?je.some(K):je.none(),selection:sl(_)};function W(fe,we){return qo(fe,we).exists(function(ke){return 1<parseInt(ke,10)})}var K,J,se}function _f(_){return function(D,B){var W,K=dr(D);return Ss("col"===K||"colgroup"===K?li(W=D).bind(function(J){return j(J,Yu.firstSelectedSelector)}).fold(ht(W),function(J){return J[0]}):D,_,B)}}function la(_,D,B){for(var W=0,K=_;K<D;K++)W+=void 0!==B[K]?B[K]:0;return W}function ul(_,D,B){var W,K,J,se;me((K=D,Zr.hasColumns(W=_)?(se=K,Dn(Zr.justColumns(W),function(fe,we){return{element:fe.element,width:se[we],colspan:fe.colspan}})):(J=K,Dn(Zr.justCells(W),function(fe){var we=la(fe.column,fe.column+fe.colspan,J);return{element:fe.element,width:we,colspan:fe.colspan}}))),function(fe){B.setElementWidth(fe.element,fe.width)})}function Da(_,D,B,W,K){var J,se,fe,we,ke,Le,Fe,Re,tt,He,at=Zr.fromTable(_),vt=K.getCellDelta(D),Ue=K.getWidths(at,K),st=B===at.grid.columns-1,Wt=W.clampTableDelta(Ue,B,vt,K.minCellWidth(),st),Ke=(se=B,fe=Wt,we=K,ke=W,Re=(J=Ue).slice(0),Fe=se,tt=0===(Le=J).length?ec.none():1===Le.length?ec.only(0):0===Fe?ec.left(0,1):Fe===Le.length-1?ec.right(Fe-1,Fe):0<Fe&&Fe<Le.length-1?ec.middle(Fe-1,Fe,Fe+1):ec.none(),He=ht(Dn(Re,ht(0))),tt.fold(He,function(Gt){return we.singleColumnWidth(Re[Gt],fe)},function(Gt,yt){return ke.calcLeftEdgeDeltas(Re,Gt,yt,fe,we.minCellWidth(),we.isRelative)},function(Gt,yt,Bn){return ke.calcMiddleDeltas(Re,Gt,yt,Bn,fe,we.minCellWidth(),we.isRelative)},function(Gt,yt){return ke.calcRightEdgeDeltas(Re,Gt,yt,fe,we.minCellWidth(),we.isRelative)}));ul(at,Dn(Ke,function(Gt,yt){return Gt+Ue[yt]}),K),W.resizeTable(K.adjustTableWidth,Wt,st)}function Yo(_){return Dn(_,ht(0))}function dv(_,D,B,W,K){return K(_.slice(0,D)).concat(W).concat(K(_.slice(B)))}function Lc(_){return function(D,B,W,K){if(_(W)){var J=Math.max(K,D[B]-Math.abs(W)),se=Math.abs(J-D[B]);return 0<=W?se:-se}return W}}function Jh(){function _(B,W,K,J){var se=(100+K)/100,fe=Math.max(J,(B[W]+K)/se);return Dn(B,function(we,ke){return(ke===W?fe:we/se)-we})}function D(B,W,K,J,se,fe){return fe?_(B,W,J,se):(Le=K,Fe=ug(we=B,ke=W,J,se),dv(we,ke,Le+1,[Fe,0],Yo));var we,ke,Le,Fe}return{resizeTable:function(B,W){return B(W)},clampTableDelta:ug,calcLeftEdgeDeltas:D,calcMiddleDeltas:function(B,W,K,J,se,fe,we){return D(B,K,J,se,fe,we)},calcRightEdgeDeltas:function(B,W,K,J,se,fe){if(fe)return _(B,K,J,se);var we=ug(B,K,J,se);return Yo(B.slice(0,K)).concat([we])},calcRedestributedWidths:function(B,W,K,J){if(J){var se=(W+K)/W,fe=Dn(B,function(we){return we/se});return{delta:100*se-100,newSizes:fe}}return{delta:K,newSizes:B}}}}function Zm(){function _(D,B,W,K,J){var se=bh(D,0<=K?W:B,K,J);return dv(D,B,W+1,[se,-se],Yo)}return{resizeTable:function(D,B,W){W&&D(B)},clampTableDelta:function(D,B,W,K,J){if(J){if(0<=W)return W;var se=ro(D,function(fe,we){return fe+we-K},0);return Math.max(-se,W)}return ug(D,B,W,K)},calcLeftEdgeDeltas:_,calcMiddleDeltas:function(D,B,W,K,J,se){return _(D,W,K,J,se)},calcRightEdgeDeltas:function(D,B,W,K,J,se){return se?Yo(D):Dn(D,ht(K/D.length))},calcRedestributedWidths:function(D,B,W,K){return{delta:0,newSizes:D}}}}function jg(_,D,B){var W=B.substring(0,B.length-_.length),K=parseFloat(W);return W===K.toString()?D(K):am.invalid(B)}function Vu(_,D,B){var W,K,J,se,fe=xh.from(B),we=tr(_,function(ke){return"0px"===ke})?(W=_.length,K=fe.fold(function(){return ht("")},function(ke){return ht(ke/W+"px")},function(){return ht(100/W+"%")}),_e(W,K)):(J=_,se=D,fe.fold(function(){return J},function(ke){return Fe=(Le=ke)/se,Dn(J,function(Re){return xh.from(Re).fold(function(){return Re},function(tt){return tt*Fe+"px"},function(tt){return tt/100*Le+"px"})});var Le,Fe},function(ke){return Le=se,Dn(J,function(Fe){return xh.from(Fe).fold(function(){return Fe},function(Re){return Re/Le*100+"%"},function(Re){return Re+"%"})});var Le}));return Wo(we)}function yu(_,D){return 0===_.length?D:_r(_,function(B,W){return xh.from(W).fold(ht(0),En,En)+B},0)}function Ug(_){return Sv(_).fold(ht("px"),ht("px"),ht("%"))}function cd(_,D,B){var W=Zr.fromTable(_),K=W.all,J=Zr.justCells(W),se=Zr.justColumns(W);D.each(function(fe){var we,ke,Le,Fe,Re=Ug(fe),tt=Na(_),He=Vu(xf(W,_,pa,rh),tt,fe);Zr.hasColumns(W)?(Le=He,Fe=Re,me(se,function(at,vt){var Ue=yu([Le[vt]],nh());pi(at.element,"width",Ue+Fe)})):(we=He,ke=Re,me(J,function(at){var vt=yu(we.slice(at.column,at.colspan+at.column),nh());pi(at.element,"width",vt+ke)})),pi(_,"width",fe)}),B.each(function(fe){var we=Ug(fe),ke=jd(_),Le=Vu(Ud(W,_,On,q0,rh),ke,fe),Fe=K,Re=we;me(J,function(tt){var He=yu(Le.slice(tt.row,tt.rowspan+tt.row),In());pi(tt.element,"height",He+Re)}),me(Fe,function(tt,He){pi(tt.element,"height",Le[He])}),pi(_,"height",fe)})}function ll(_){return Zr.fromTable(_).grid}function va(_){var D=[];return{bind:function(B){if(void 0===B)throw new Error("Event bind error: undefined handler");D.push(B)},unbind:function(B){D=Pr(D,function(W){return W!==B})},trigger:function(){for(var B=[],W=0;W<arguments.length;W++)B[W]=arguments[W];var K={};me(_,function(J,se){K[J]=B[se]}),me(D,function(J){J(K)})}}}function ta(_){return{registry:mi(_,function(D){return{bind:D.bind,unbind:D.unbind}}),trigger:mi(_,function(D){return D.trigger})}}function eu(_){return _.slice(0).sort()}function dd(_,D){var B=Pr(D,function(W){return!dn(_,W)});0<B.length&&function(){throw new Error("Unsupported keys for object: "+eu(B).join(", "))}()}function Xd(_){return function(D,B,W){if(0===B.length)throw new Error("You must specify at least one required field.");var K;return function(J,se){if(!lr(se))throw new Error("The "+J+" fields must be an array. Was: "+se+".");me(se,function(fe){if(!Ut(fe))throw new Error("The value "+fe+" in the "+J+" fields was not a string.")})}("required",B),Nn(K=eu(B),function(J,se){return se<K.length-1&&J===K[se+1]}).each(function(J){throw new Error("The field: "+J+" occurs more than once in the combined fields: ["+K.join(", ")+"].")}),function(J){var se=yr(J);tr(B,function(we){return dn(se,we)})||function(we,ke){throw new Error("All required keys ("+eu(we).join(", ")+") were not specified. Specified keys were: "+eu(ke).join(", ")+".")}(B,se),D(B,se);var fe=Pr(B,function(we){return!W.validate(J[we],we)});return 0<fe.length&&function(we,ke){throw new Error("All values need to be of type: "+ke+". Keys ("+eu(we).join(", ")+") were not.")}(fe,W.label),J}}(dd,_,{validate:Bi,label:"function"})}function fd(_){function D(){return _.stopPropagation()}function B(){return _.preventDefault()}var W,K,J=rt.fromDom(function(fe){if(Hl()&&Cr(fe.target)){var we=rt.fromDom(fe.target);if(Wa(we)&&function(_){return Cr(_.dom.shadowRoot)}(we)&&fe.composed&&fe.composedPath){var ke=fe.composedPath();if(ke)return Ao(ke)}}return je.from(fe.target)}(_).getOr(_.target)),se=(W=B,K=D,function(){for(var fe=[],we=0;we<arguments.length;we++)fe[we]=arguments[we];return W(K.apply(null,fe))});return{target:J,x:_.clientX,y:_.clientY,stop:D,prevent:B,kill:se,raw:_}}function $l(_,D,B){return se=ef,fe=B,(W=_).dom.addEventListener(K=D,we=function(ke){se(ke)&&fe(fd(ke))},!1),{unbind:Sn(sm,W,K,we,!1)};var W,K,se,fe,we}function sh(_){return void 0!==_.dom.classList}function wf(_,D){sh(_)?_.dom.classList.add(D):function(_,D){return K=D,ma(_,"class",(void 0===(W=Ei(_,"class"))||""===W?[]:W.split(" ")).concat([K]).join(" ")),1;var W,K}(_,D)}function Sf(_,D){return sh(_)&&_.dom.classList.contains(D)}function Wu(_){var D=_.replace(/\./g,"-");return{resolve:function(B){return D+"-"+B}}}function Bs(_){return Ss(_,"[contenteditable]")}function tu(_,D){return void 0===D&&(D=!1),!$t().browser.isIE()&&wr(_)?_.dom.isContentEditable:Bs(_).fold(ht(D),function(B){return"true"===su(B)})}function Yd(_){me($i(_.parent(),"."+tf),ns)}function $m(_,D,B){var W=_.origin();me(D,function(K){K.each(function(J){var se=B(W,J);wf(se,tf),qr(_.parent(),se)})})}function Ml(_,D){var B;Yd(_),_.isResizable(D)&&function(_,D,B,W,K){var J,se,fe,we,ke,Le=qe(B),Fe=D.isResizable,Re=0<W.length?On.positions(W,B):[],tt=0<Re.length?(J=Fe,Mt(_.all,function(qn,Fr){return J(qn.element)?[Fr]:[]})):[];se=D,fe=Pr(Re,function(qn,Fr){return Rn(tt,function(fr){return Fr===fr})}),we=Le,ke=bo(B),$m(se,fe,function(qn,Fr){var fr,Vr,io,Br,to,zn=(fr=Fr.row,Vr=we.left-qn.left,io=Fr.y-qn.top,Br=ke,Fd(to=rt.fromTag("div"),{position:"absolute",left:Vr+"px",top:io-3.5+"px",height:"7px",width:Br+"px"}),Pu(to,{"data-row":fr,role:"presentation"}),to);return wf(zn,Mv),zn});var at,vt,Ue,st,Wt,Ke,Gt,yt=0<K.length?$r.positions(K,B):[],Bn=0<yt.length?(vt=Fe,Ue=[],_e((at=_).grid.columns,function(qn){Zr.getColumnAt(at,qn).map(function(Fr){return Fr.element}).forall(vt)&&Ue.push(qn)}),Pr(Ue,function(qn){return tr(Zr.filterItems(at,function(Fr){return Fr.column===qn}),function(Fr){return vt(Fr.element)})})):[];st=D,Wt=Pr(yt,function(qn,Fr){return Rn(Bn,function(fr){return Fr===fr})}),Ke=Le,Gt=Uh(B),$m(st,Wt,function(qn,Fr){var fr,Vr,io,Br,to,zn=(fr=Fr.col,Vr=Fr.x-qn.left,io=Ke.top-qn.top,Br=Gt,Fd(to=rt.fromTag("div"),{position:"absolute",left:Vr-3.5+"px",top:io+"px",height:Br+"px",width:"7px"}),Pu(to,{"data-column":fr,role:"presentation"}),to);return wf(zn,Nf),zn})}(B=Zr.fromTable(D),_,D,Wg(B),hc(B))}function fv(_,D){me($i(_.parent(),"."+tf),D)}function uh(_){fv(_,function(D){pi(D,"display","none")})}function ca(_){fv(_,function(D){pi(D,"display","block")})}function lh(_,D){return _.fire("newrow",{node:D})}function qg(_,D){return _.fire("newcell",{node:D})}function cl(_,D,B){_.fire("TableModified",sr(sr({},B),{table:D}))}function xb(_){return _.getParam("table_sizing_mode","auto")}function ys(_){return _.getParam("table_responsive_width")}function hd(_){return _.getParam("table_border_widths",cp,"array")}function kf(_){return _.getParam("table_border_styles",Ib,"array")}function gd(_){return _.getParam("table_default_attributes",iy,"object")}function Kl(_){return _.getParam("table_default_styles",function(D){var B;if(fp(D)){var W=D.dom,K=null!==(B=W.getParent(D.selection.getStart(),W.isBlock))&&void 0!==B?B:D.getBody(),J=Ce(rt.fromDom(K));return sr(sr({},Bf),{width:J+"px"})}return lg(D)?lo(Bf,function(se,fe){return"width"!==fe}):Bf}(_),"object")}function hv(_){return _.getParam("table_cell_advtab",!0,"boolean")}function gv(_){return _.getParam("table_row_advtab",!0,"boolean")}function Ro(_){return _.getParam("table_advtab",!0,"boolean")}function Mi(_){return _.getParam("table_style_by_css",!1,"boolean")}function Jl(_){return _.getParam("table_cell_class_list",[],"array")}function Xg(_){return _.getParam("table_class_list",[],"array")}function nu(_){return"relative"===xb(_)||!0===ys(_)}function _o(_){var D="section",B=_.getParam("table_header_type",D,"string");return dn(["section","cells","sectionCells","auto"],B)?B:D}function Zd(_){var D=_.getParam("table_column_resizing",dp,"string");return Nn(["preservetable","resizetable"],function(B){return B===D}).getOr(dp)}function $d(_){return"preservetable"===Zd(_)}function _b(_){return"resizetable"===Zd(_)}function eg(_){var D=_.getParam("table_clone_elements");return Ut(D)?je.some(D.split(/[ ,]/)):Array.isArray(D)?je.some(D):je.none()}function Mf(_){return _.getParam("table_background_color_map",[],"array")}function Yg(_){return _.getParam("table_border_color_map",[],"array")}function Km(_,D){return(nu(_)?Qd:fp(_)?ry:wv)(D)}function Gu(_){Ji(_,"width")}function Tf(_){return"false"!==Ei(_,"data-mce-resize")}function Df(_,D){return{element:_,offset:D}}function ju(_,D){return(_.property().isText(D)?_.property().getText(D):_.property().children(D)).length}function Ts(_,D){1===pf(_,"colspan")&&Io(_).bind(function(B){return W=["fixed","relative","empty"],je.from(br.exec(B)).bind(function(K){var J=Number(K[1]),se=K[2],fe=se;return Rn(W,function(we){return Rn(Hr[we],function(ke){return fe===ke})})?je.some({value:J,unit:se}):je.none()});var W}).each(function(B){var W=B.value/2;vu(_,W,B.unit),vu(D,W,B.unit)})}function dl(_){return tr(_,function(D){return Wc(D.element)})}function i1(_){var D="thead"===_.section,B=es(El(_.cells),"th");return D||B?{type:"header",subType:D&&B?"sectionCells":D?"section":"cells"}:"tfoot"===_.section?{type:"footer"}:{type:"body"}}function ru(_,D,B){return hs(B(_.element,D),!0,_.isLocked)}function Y0(_,D){return _.section!==D?Pa(_.element,_.cells,D,_.isNew):_}function md(){return{transformRow:Y0,transformCell:function(_,D,B){var W,K,J=B(_.element,D);return hs("td"!==dr(J)?(K=Et(W=J,"td"),Ms(W,K),pn(K,Mo(W)),ns(W),K):J,_.isNew,_.isLocked)}}}function Z0(){return{transformRow:Y0,transformCell:ru}}function Uu(){return{transformRow:function(_,D){return Y0(_,"thead"===D?"tbody":D)},transformCell:ru}}function Qr(_,D,B,W){B===W?Ji(_,D):ma(_,D,B)}function wb(_,D,B){hr(lc(_,D)).fold(function(){return ja(_,B)},function(W){return Hi(W,B)})}function Qm(_,D){if(0===_.length)return 0;var B=_[0];return ar(_,function(W){return!D(B.element,W.element)}).getOr(_.length)}function pd(_,D,B){var W=[];me(_.colgroups,function(Le){for(var Fe=[],Re=0;Re<_.grid.columns;Re++){var tt=Zr.getColumnAt(_,Re).map(function(He){return hs(He.element,B,!1)}).getOrThunk(function(){return hs(D.colGap(),!0,!1)});Fe.push(tt)}W.push(Pa(Le.element,Fe,"colgroup",B))});for(var K=0;K<_.grid.rows;K++){for(var J=[],se=0;se<_.grid.columns;se++){var fe=Zr.getAt(_,K,se).map(function(Le){return hs(Le.element,B,Le.isLocked)}).getOrThunk(function(){return hs(D.gap(),!0,!1)});J.push(fe)}var we=_.all[K],ke=Pa(we.element,J,we.section,B);W.push(ke)}return W}function zs(_){return function(_,D){var B=Dn(_,function(W){return Dn(W.cells,un)});return Dn(_,function(W,K){var J=Mt(W.cells,function(se,fe){if(!1!==B[K][fe])return[];var we,ke,Le,Fe,Re,tt,He,at,vt=(Fe=D,at="colgroup"===(He=(we=_)[ke=K]).section,{colspan:Qm(He.cells.slice(Le=fe),Fe),rowspan:at?1:Qm((Re=we.slice(ke),tt=Le,Dn(Re,function(Ue){return Lu(Ue,tt)})),Fe)});return function(Ue,st,Wt,Ke){for(var Gt=Ue;Gt<Ue+Wt;Gt++)for(var yt=st;yt<st+Ke;yt++)B[Gt][yt]=!0}(K,fe,vt.rowspan,vt.colspan),[{element:se.element,rowspan:vt.rowspan,colspan:vt.colspan,isNew:se.isNew}]});return{element:W.element,cells:J,section:W.section,isNew:W.isNew}})}(_,Vn)}function vc(_,D){return pe(_.all,function(B){return Nn(B.cells,function(W){return Vn(D,W.element)})})}function ep(_,D,B){var W=nd(Dn(D.selection,function(K){return jh(K).bind(function(J){return vc(_,J)}).filter(B)}));return gu(0<W.length,W)}function Aa(_,D,B,W,K){return function(J,se,fe,we,ke){var Le=Zr.fromTable(se),Fe=je.from(null==ke?void 0:ke.section).getOrThunk(vh);return D(Le,fe).map(function(Re){var tt=pd(Le,we,!1),He=_(tt,Re,Vn,K(we),Fe),at=Ga(He.grid);return{info:Re,grid:zs(He.grid),cursor:He.cursor,lockedColumns:at}}).bind(function(Re){var tt=function(_,D){function W(Le,Fe){0<Le.length?function(Le,Fe){var Re,tt,He;pn((Ks(He=td(Re=_,tt=Fe).getOrThunk(function(){var at=rt.fromTag(tt,Va(Re).dom);return"thead"===tt?wb(Re,"caption,colgroup",at):"colgroup"===tt?wb(Re,"caption",at):qr(Re,at),at})),He),("colgroup"===Fe?function(at){return Mt(at,function(vt){return Dn(vt.cells,function(Ue){return Qr(Ue.element,"span",Ue.colspan,1),Ue.element})})}:function(at){return Dn(at,function(vt){vt.isNew&&K.push(vt.element);var Ue=vt.element;return Ks(Ue),me(vt.cells,function(st){st.isNew&&J.push(st.element),Qr(st.element,"colspan",st.colspan,1),Qr(st.element,"rowspan",st.rowspan,1),qr(Ue,st.element)}),Ue})})(Le))}(Le,Fe):td(_,Fe).each(ns)}var K=[],J=[],se=[],fe=[],we=[],ke=[];return me(D,function(Le){switch(Le.section){case"thead":se.push(Le);break;case"tbody":fe.push(Le);break;case"tfoot":we.push(Le);break;case"colgroup":ke.push(Le)}}),W(ke,"colgroup"),W(se,"thead"),W(fe,"tbody"),W(we,"tfoot"),{newRows:K,newCells:J}}(se,Re.grid),He=je.from(null==ke?void 0:ke.sizing).getOrThunk(function(){return wv(se)}),at=je.from(null==ke?void 0:ke.resize).getOrThunk(Zm);return B(se,Re.grid,Re.info,{sizing:He,resize:at,section:Fe}),W(se),Ml(J,se),Ji(se,_i),0<Re.lockedColumns.length&&ma(se,_i,Re.lockedColumns.join(",")),je.some({cursor:Re.cursor,newRows:tt.newRows,newCells:tt.newCells})})}}function vd(_,D){return ep(_,D,Qn).map(function(B){return{cells:B,generators:D.generators,clipboard:D.clipboard}})}function bu(_,D){return ep(_,D,Qn)}function ch(_,D){return ep(_,D,function(B){return!B.isLocked})}function tp(_,D){return tr(D,function(B){return vc(_,B).exists(function(W){return!W.isLocked})})}function $0(_,D){return D.mergable.filter(function(B){return tp(_,B.cells)})}function Sb(_,D){return D.unmergable.filter(function(B){return tp(_,B)})}function Cb(_,D,B,W){for(var K=ts(_).rows,J=!0,se=0;se<K.length;se++)for(var fe=0;fe<Vi(K[0]);fe++){var we=K[se],ke=Lu(we,fe),Le=B(ke.element,D);!0===Le&&!1===J?id(we,fe,hs(W(),!0,ke.isLocked)):!0===Le&&(J=!1)}return _}function vo(_,D){return{rowDelta:0,colDelta:Vi(_[0])-Vi(D[0])}}function Gr(_,D){return{rowDelta:_.length-D.length,colDelta:0}}function Fs(_,D,B,W){var K="colgroup"===D.section?B.col:B.cell;return _e(_,function(J){return hs(K(),!0,W(J))})}function Af(_,D,B,W){var K=_[_.length-1];return _.concat(_e(D,function(){var se=Sl(K,"colgroup"===K.section?B.colgroup:B.row,En),fe=Fs(se.cells.length,se,B,function(we){return Jr(W,we.toString())});return bf(se,fe)}))}function oo(_,D,B,W){return Dn(_,function(K){var J=Fs(D,K,B,un);return jl(K,W,J)})}function Vs(_,D,B){var W=D.colDelta<0?oo:En,K=D.rowDelta<0?Af:En,J=Ga(_),se=Vi(_[0]),fe=Rn(J,function(Le){return Le===se-1}),we=W(_,Math.abs(D.colDelta),B,fe?se-1:se),ke=Ga(we);return K(we,Math.abs(D.rowDelta),B,xt(ke,Qn))}function ci(_,D,B){return Pr(B,function(W){return W>=_.column&&W<=Vi(D[0])+_.column})}function wo(_,D,B,W,K){var J=_,se=K,fe=W.cell;0<J&&J<D[0].cells.length&&me(D,function(ke){var Fe=ke.cells[J];se(Fe.element,ke.cells[J-1].element)&&id(ke,J,hs(fe(),!0,Fe.isLocked))});var we=Vs(B,Gr(B,D),W);return Dn(Vs(D,Gr(D,we),W),function(ke,Le){return jl(ke,_,we[Le].cells)})}function Bc(_,D,B,W,K){!function(_,D,B,W){var J,se=ts(_).rows;0<D&&D<se.length&&(J=B,me(ro(se[D-1].cells,function(fe,we){return Rn(fe,function(ke){return J(ke.element,we.element)})?fe:fe.concat([we])},[]),function(fe){for(var we=je.none(),ke=D;ke<se.length;ke++)for(var Le=0;Le<Vi(se[0]);Le++)!function(Fe){var Re=se[ke],tt=Lu(Re,Fe);B(tt.element,fe.element)&&(we=we.isNone()?je.some(W()):we).each(function(He){id(Re,Fe,hs(He,!0,tt.isLocked))})}(Le)}))}(D,_,K,W.cell);var J,se,fe=Ga(D),we=vo(D,B),ke=Vs(D,sr(sr({},we),{colDelta:we.colDelta-fe.length}),W),Le=ts(ke),Fe=Le.cols,Re=Le.rows,tt=Ga(ke),He=vo(B,D),at=sr(sr({},He),{colDelta:He.colDelta+tt.length}),vt=Vs((J=W,se=tt,Dn(B,function(Ue){return ro(se,function(st,Wt){return Ca(st,Wt,Fs(1,Ue,J,Qn)[0])},Ue)})),at,W);return Fe.concat(Re.slice(0,_)).concat(vt).concat(Re.slice(_,Re.length))}function Pi(_,D,B,W,K){var se,fe,we,ke=ts(_),Le=ke.rows,Fe=ke.cols,Re=Le.slice(0,D),tt=Le.slice(D),He=(se=function(at,vt){return 0<D&&D<Le.length&&W(sa(Le[D-1],vt),sa(Le[D],vt))?Lu(Le[D],vt):hs(K(at.element,W),!0,at.isLocked)},fe=W,we=K,Sl(Le[B],function(at){return we(at,fe)},se));return Fe.concat(Re).concat([He]).concat(tt)}function qu(_,D,B,W,K){return Dn(_,function(J){var fe,we=0<D&&D<Vi(J)&&W(sa(J,D-1),sa(J,D)),ke=(fe=K,"colgroup"!==J.section&&we?Lu(J,D):hs(fe(Lu(J,B).element,W),!0,!1));return Ca(J,D,ke)})}function vi(_,D,B,W){return void 0!==sa((J=_)[se=D],B)&&0<se&&W(sa(J[se-1],B),sa(J[se],B))||(K=_[D],0<B&&W(sa(K,B-1),sa(K,B)));var K,J,se}function dh(_,D,B,W){function K(J){return("row"===J?Vd:Gl)(D)?J+"group":J}return _?Wc(D)?K(B):null:W&&Wc(D)?K("row"===B?"col":"row"):null}function yd(_,D,B){return hs(B(_.element,D),!0,_.isLocked)}function ei(_,D,B,W,K,J,se){return Dn(_,function(fe,we){return Fe=Dn((ke=fe).cells,function(Re,tt){if(at=Re,Rn(D,function(vt){return B(at.element,vt.element)})){var He=se(Re,we,tt)?K(Re,B,W):Re;return J(He,we,tt).each(function(vt){var Ue=He.element;si({scope:je.from(vt)},function(st,Wt){st.fold(function(){Ji(Ue,Wt)},function(Ke){$s(Ue.dom,Wt,Ke)})})}),He}return Re;var at}),Pa(ke.element,Fe,ke.section,ke.isNew);var ke,Fe})}function fl(_,D,B){return Mt(_,function(W,K){return vi(_,K,D,B)?[]:[Lu(W,D)]})}function Yi(_,D,B,W,K){var J,se,fe,we,ke=ts(_).rows,Le=Mt(D,function(He){return fl(ke,He,W)}),Fe=Dn(_,function(He){return dl(He.cells)}),Re=(J=Le,tr(se=Fe,En)&&dl(J)?Qn:function(He,at,vt){return!("th"===dr(He.element)&&se[at])}),tt=(fe=B,we=Fe,function(He,at){return je.some(dh(fe,He.element,"row",we[at]))});return ei(_,Le,W,K,yd,tt,Re)}function Hs(_,D,B,W){var K=ts(_).rows;return ei(_,Dn(D,function(J){return Lu(K[J.row],J.column)}),B,W,yd,je.none,Qn)}function If(_){return ro(_,function(D,B){return Rn(D,function(W){return W.column===B.column})?D:D.concat([B])},[]).sort(function(D,B){return D.column-B.column})}function bd(_){return"tr"===dr(_)||Eb(_)}function np(_){return{element:_,colspan:_l(_,"colspan",1),rowspan:_l(_,"rowspan",1)}}function Zg(_){return qo(_,"scope").map(function(D){return D.substr(0,3)})}function $g(_){return D=_,B=wh.property().name(D),dn(xc,B);var D,B}function fh(_){return D=_,dn(["ol","ul"],wh.property().name(D));var D}function Tl(_){return tu(_,!0)}function U_(_){0===wl(_).length&&ns(_)}function Ia(_,D){return{grid:_,cursor:D}}function ou(_,D,B){var W,K,J,se,fe;return Ia(_,(W=D,K=B,fe=ts(_).rows,je.from(null===(se=null===(J=fe[W])||void 0===J?void 0:J.cells[K])||void 0===se?void 0:se.element).filter(Tl).orThunk(function(){return pe(fe,function(ke){return pe(ke.cells,function(Le){var Fe=Le.element;return gu(Tl(Fe),Fe)})})})))}function ng(_){return ro(_,function(D,B){return Rn(D,function(W){return W.row===B.row})?D:D.concat([B])},[]).sort(function(D,B){return D.row-B.row})}function _u(_,D){return function(B,W,K,J,se){return ou(function(fe,we,ke,Le,Fe,Re,tt){var He=ts(fe),at=He.cols,vt=He.rows,Ue=vt[we[0]],st=Mt(we,function(Vr){return to=Fe,Mt((io=vt)[Br=Vr].cells,function(zn,Ri){return vi(io,Br,Ri,to)?[]:[zn]});var io,Br,to}),Wt=Dn(Ue.cells,function(Vr,io){return dl(fl(vt,io,Fe))}),Ke=zi([],vt,!0);me(we,function(Vr){Ke[Vr]=tt.transformRow(vt[Vr],ke)});var Gt,yt,Bn,Yt,qn=at.concat(Ke),Fr=(Gt=Ue,tr(yt=Wt,En)&&dl(Gt.cells)?Qn:function(Vr,io,Br){return!("th"===dr(Vr.element)&&yt[Br])}),fr=(Bn=Le,Yt=Wt,function(Vr,io,Br){return je.some(dh(Bn,Vr.element,"col",Yt[Br]))});return ei(qn,st,Fe,Re,tt.transformCell,fr,Fr)}(B,Dn(ng(W),function(fe){return fe.row}),_,D,K,J.replaceOrInit,se),W[0].row,W[0].column)}}function rp(_,D,B){var W,K=(W=B.section,Nu(_,function(){return W}));return pd(Zr.generate(K),D,!0)}function xd(_,D,B,W){var K=W.sizing,J=Zr.generate(D);ul(J,K.getWidths(J,K),K)}function yc(_,D,B,W){var K=B,J=W.sizing,se=W.resize,fe=Zr.generate(D),we=J.getWidths(fe,J),ke=J.pixelWidth(),Le=se.calcRedestributedWidths(we,ke,K.pixelDelta,J.isRelative),Re=Le.delta;ul(fe,Le.newSizes,J),J.adjustTableWidth(Re)}function hh(_,D){return Rn(D,function(B){return 0===B.column&&B.isLocked})}function zc(_,D){return Rn(D,function(B){return B.column+B.colspan>=_.grid.columns&&B.isLocked})}function mv(_,D){var B=hc(_);return ro(If(D),function(W,K){return W+B[K.column].map(bo).getOr(0)},0)}function Xu(_){return function(D,B){return bu(D,B).filter(function(W){return!(_?hh:zc)(D,W)}).map(function(W){return{details:W,pixelDelta:mv(D,W)}})}}function Dl(_){return function(D,B){return vd(D,B).filter(function(W){return!(_?hh:zc)(D,W.cells)})}}function pv(_,D){var B=Zr.fromTable(_);return bu(B,D).bind(function(W){var K=W[W.length-1],J=W[0].column,se=K.column+K.colspan,fe=rn(Dn(B.all,function(we){return Pr(we.cells,function(ke){return ke.column>=J&&ke.column<se})}));return El(fe)}).getOr("")}function op(_,D){return bu(Zr.fromTable(_),D).bind(El).getOr("")}function Of(_,D,B,W){return _e(_,function(K){return function(J,se,fe,we){for(var ke=rt.fromTag("tr"),Le=0;Le<J;Le++){var Fe=rt.fromTag(we<se||Le<fe?"th":"td");Le<fe&&ma(Fe,"scope","row"),we<se&&ma(Fe,"scope","col"),qr(Fe,rt.fromTag("br")),qr(ke,Fe)}return ke}(D,B,W,K)})}function Al(_,D){_.selection.select(D.dom,!0),_.selection.collapse(!0)}function ip(_,D,B,W,K){var J=Kl(_),se={styles:J,attributes:gd(_),colGroups:_.getParam("table_use_colgroups",!1,"boolean")};return _.undoManager.ignore(function(){var fe=function(Re,tt,He,at,vt,Ue){void 0===Ue&&(Ue=Gs);var st,Wt,Ke=rt.fromTag("table"),Gt="cells"!==vt;Fd(Ke,Ue.styles),Pu(Ke,Ue.attributes),Ue.colGroups&&qr(Ke,(st=tt,Wt=rt.fromTag("colgroup"),_e(st,function(){return qr(Wt,rt.fromTag("col"))}),Wt));var yt,Bn=Math.min(Re,He);Gt&&0<He&&(yt=rt.fromTag("thead"),qr(Ke,yt),pn(yt,Of(He,tt,"sectionCells"===vt?Bn:0,at)));var Yt=rt.fromTag("tbody");return qr(Ke,Yt),pn(Yt,Of(Gt?Re-Bn:Re,tt,Gt?0:He,at)),Ke}(B,D,K,W,_o(_),se);ma(fe,"data-mce-id","__mce");var we,ke,Le,Fe=(we=fe,ke=rt.fromTag("div"),Le=rt.fromDom(we.dom.cloneNode(!0)),qr(ke,Le),ke.dom.innerHTML);_.insertContent(Fe),_.addVisual()}),Wl(Xa(_),'table[data-mce-id="__mce"]').map(function(fe){var we,ke,Le;return fp(_)?Tv(fe):lg(_)?ay(fe):(nu(_)||Ut(we=J.width)&&-1!==we.indexOf("%"))&&Go(fe),$h(fe),Ji(fe,"data-mce-id"),ke=_,me($i(fe,"tr"),function(Fe){lh(ke,Fe.dom),me($i(Fe,"th,td"),function(Re){qg(ke,Re.dom)})}),Le=_,Wl(fe,"td,th").each(Sn(Al,Le)),fe.dom}).getOr(null)}function Kg(_,D,B,W,K){function J(fe){return Gn(fe)&&0<fe}return void 0===W&&(W={}),J(D)&&J(B)?ip(_,B,D,W.headerColumns||0,W.headerRows||0):(console.error(K),null)}function ap(_){return function(){return _().fold(function(){return[]},function(D){return Dn(D,function(B){return B.dom})})}}function K0(_){return function(D){var B=0<D.length?je.some(ih(D)):je.none();_(B)}}function mh(_,D,B){var W=_l(_,D,1);1===B||W<=1?Ji(_,D):ma(_,D,Math.min(B,W))}function Jg(_,D,B){return function(W,K){for(var J=0;J<K.length;J++){var se=_.getStyle(K[J],B);if((W=void 0===W?se:W)!==se)return""}return W}(void 0,_.select("td,th",D))}function sp(_,D,B){B&&_.formatter.apply("align"+B,{},D)}function iu(_,D){_c.each("left center right".split(" "),function(B){_.formatter.remove("align"+B,{},D)})}function bc(_){return f1.test(B=_)||dm.test(B)?je.some({value:(ot(D=_,"#")?D.substring("#".length):D).toUpperCase()}):je.none();var D,B}function os(_){var D=_.toString(16);return(1===D.length?"0"+D:D).toUpperCase()}function wu(_){return{value:os(_.red)+os(_.green)+os(_.blue)}}function Ds(_,D,B,W){return{red:_,green:D,blue:B,alpha:W}}function Il(_,D,B,W){return Ds(parseInt(_,10),parseInt(D,10),parseInt(B,10),parseFloat(W))}function Su(_){var D=_;return{get:function(){return D},set:function(B){D=B}}}function au(_){function D(){return B.get().each(_)}var B=Su(je.none());return{clear:function(){D(),B.set(je.none())},isSet:function(){return B.get().isSome()},get:function(){return B.get()},set:function(W){D(),B.set(je.some(W))}}}function ya(){var _=au(Zn);return sr(sr({},_),{on:function(D){return _.get().each(D)}})}function rg(_){return Ja(_,"menu")}function Fc(_,D){return function(B){var W;_.execCommand("mceTableApplyCellStyle",!1,((W={})[D]=B,W))}}function cn(_,D,B,W,K){return function(J){return J(Sh(_,D,B,W,K))}}function Cu(_,D,B){var W=Dn(D,function(K){return{text:K.title,value:"#"+bc(J=K.value).orThunk(function(){return function(se){if("transparent"===se)return je.some(Ds(0,0,0,0));var fe=mg.exec(se);if(null!==fe)return je.some(Il(fe[1],fe[2],fe[3],"1"));var we=Rb.exec(se);return null!==we?je.some(Il(we[1],we[2],we[3],we[4])):je.none()}(J).map(wu)}).getOrThunk(function(){var se=document.createElement("canvas");se.height=1,se.width=1;var fe=se.getContext("2d");fe.clearRect(0,0,se.width,se.height),fe.fillStyle="#FFFFFF",fe.fillStyle=J,fe.fillRect(0,0,1,1);var we=fe.getImageData(0,0,1,1).data;return wu(Ds(we[0],we[1],we[2],we[3]))}).value,type:"choiceitem"};var J});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:0<W.length?W:void 0,allowCustomColors:!1},onAction:function(K){var J;_.execCommand("mceTableApplyCellStyle",!1,((J={})[B]="remove"===K.value?"":K.value,J))}}]}function vv(_){return function(){var D=_.queryCommandValue("mceTableRowType");_.execCommand("mceTableRowType",!1,{type:"header"===D?"body":"header"})}}function Ya(_){return function(){var D=_.queryCommandValue("mceTableColType");_.execCommand("mceTableColType",!1,{type:"th"===D?"td":"th"})}}function Ol(_){return fy.concat((0<(D=fm(Jl(_))).length?je.some({name:"class",type:"listbox",label:"Class",items:D}):je.none()).toArray());var D}function Ef(_,D){var B=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(fm(kf(_)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===D?[{name:"borderwidth",type:"input",label:"Border width"}].concat(B):B}}function kt(_){return function(D,B){var W=D.dom;return{setAttrib:function(K,J){_&&!J||W.setAttrib(B,K,J)},setStyle:function(K,J){_&&!J||W.setStyle(B,K,J)},setFormat:function(K,J){_&&!J||(""===J?D.formatter.remove(K,{value:null},B,!0):D.formatter.apply(K,{value:J},B))}}}}function Kd(_){return function(D){return ot(D,"rgb")?_.toHex(D):D}}function og(_,D){var B=rt.fromDom(D);return{borderwidth:gs(B,"border-width").getOr(""),borderstyle:gs(B,"border-style").getOr(""),bordercolor:gs(B,"border-color").map(Kd(_)).getOr(""),backgroundcolor:gs(B,"background-color").map(Kd(_)).getOr("")}}function J0(_){var D=_[0];return me(_.slice(1),function(B){me(yr(D),function(W){si(B,function(K,J){var se=D[W];""!==se&&W===J&&se!==K&&(D[W]="")})})}),D}function yv(_,D,B,W){return Nn(_,function(K){return!cs(B.formatter.matchNode(W,D+K))}).getOr("")}function so(_,D){var B=Zr.fromTable(_);return Dn(Pr(Zr.justCells(B),function(W){return Rn(D,function(K){return Vn(W.element,K)})}),function(W){return{element:W.element.dom,column:Zr.getColumnAt(B,W.column).map(function(K){return K.element.dom})}})}function Zo(_,D,B,W){var K=W.getData();W.close(),_.undoManager.transact(function(){var J,se=_,fe=D,we=B,ke=lo(J=K,function(Le,Fe){return we[Fe]!==Le});0<Ka(ke)&&1<=fe.length&&li(fe[0]).each(function(Le){var Fe,Re,tt,He=so(Le,fe),at=0<Ka(lo(ke,function(Ue,st){return"scope"!==st&&"celltype"!==st})),vt=Jr(ke,"celltype");(at||Jr(ke,"scope"))&&(Fe=se,Re=J,tt=1===He.length,me(He,function(Ue){var st,Wt,Ke,Gt,yt,Bn,Yt=Ue.element,qn=tt?eo.normal(Fe,Yt):eo.ifTruthy(Fe,Yt),Fr=Ue.column.map(function(Vr){return tt?eo.normal(Fe,Vr):eo.ifTruthy(Fe,Vr)}).getOr(qn),fr=Re;(st=qn).setAttrib("scope",fr.scope),st.setAttrib("class",fr.class),st.setStyle("height",Ta(fr.height)),Fr.setStyle("width",Ta(fr.width)),hv(Fe)&&((Wt=qn).setFormat("tablecellbackgroundcolor",(Ke=Re).backgroundcolor),Wt.setFormat("tablecellbordercolor",Ke.bordercolor),Wt.setFormat("tablecellborderstyle",Ke.borderstyle),Wt.setFormat("tablecellborderwidth",Ta(Ke.borderwidth))),tt&&(iu(Fe,Yt),Gt=Fe,yt=Yt,_c.each("top middle bottom".split(" "),function(Vr){Gt.formatter.remove("valign"+Vr,{},yt)})),Re.halign&&sp(Fe,Yt,Re.halign),!Re.valign||(Bn=Re.valign)&&Fe.formatter.apply("valign"+Bn,{},Yt)})),vt&&se.execCommand("mceTableCellType",!1,{type:J.celltype,no_events:!0}),cl(se,Le.dom,{structure:vt,style:at})}),_.focus()})}function Ws(_,D){var B,W,K,J,se,fe=im(D);0!==fe.length&&(W=_,B=J0(li((K=fe)[0]).map(function(we){return Dn(so(we,K),function(ke){return Fe=W,Re=ke.element,tt=hv(W),at=Fe.dom,vt=ke.column.getOr(Re),sr({width:Le(vt,"width"),height:Le(Re,"height"),scope:at.getAttrib(Re,"scope"),celltype:Re.nodeName.toLowerCase(),class:at.getAttrib(Re,"class",""),halign:wc(Fe,Re),valign:gp(Fe,Re)},tt?og(at,Re):{});function Le(Ue,st){return at.getStyle(Ue,st)||at.getAttrib(Ue,st)}var Fe,Re,tt,at,vt})}).getOrDie()),J={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ol(_)},Ef(_,"cell")]},se={type:"panel",items:[{type:"grid",columns:2,items:Ol(_)}]},_.windowManager.open({title:"Cell Properties",size:"normal",body:hv(_)?J:se,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:B,onSubmit:Sn(Zo,_,fe,B)}))}function Ql(_){return Nb.concat((0<(D=fm(_.getParam("table_row_class_list",[],"array"))).length?je.some({name:"class",type:"listbox",label:"Class",items:D}):je.none()).toArray());var D}function Tb(_,D,B,W){var K=W.getData();W.close(),_.undoManager.transact(function(){var J,se,fe,we,ke,Le,Fe,Re=_,tt=D,He=B,at=lo(J=K,function(vt,Ue){return He[Ue]!==vt});0<Ka(at)&&(se=Jr(at,"type"),(fe=!se||1<Ka(at))&&(we=Re,ke=J,Le=He,Fe=1===tt.length,me(tt,function(vt){var Ue,st,Wt,Ke=Fe?eo.normal(we,vt):eo.ifTruthy(we,vt),Gt=ke;(Ue=Ke).setAttrib("class",Gt.class),Ue.setStyle("height",Ta(Gt.height)),gv(we)&&((st=Ke).setStyle("background-color",(Wt=ke).backgroundcolor),st.setStyle("border-color",Wt.bordercolor),st.setStyle("border-style",Wt.borderstyle)),ke.align!==Le.align&&(iu(we,vt),sp(we,vt,ke.align))})),se&&Re.execCommand("mceTableRowType",!1,{type:J.type,no_events:!0}),li(rt.fromDom(tt[0])).each(function(vt){return cl(Re,vt.dom,{structure:se,style:fe})})),_.focus()})}function Q0(_){var D,B,W,K,J,se,fe,we=(D=ld(_),B=Yu.selected,K=(W=om(D)).bind(function(ke){return li(ke)}).map(Hd),rd(W,K,function(ke,Le){return Pr(Le,function(Fe){return Rn(ih(Fe.dom.cells),function(Re){return"1"===Ei(Re,B)||Vn(Re,ke)})})}).getOr([]));0!==we.length&&(J=J0(Dn(we,function(ke){return Le=_,Fe=ke.dom,Re=gv(_),sr({height:(He=Le.dom).getStyle(Fe,"height")||He.getAttrib(Fe,"height"),class:He.getAttrib(Fe,"class",""),type:li(rt.fromDom(tt=Fe)).map(function(at){var vt={selection:ih(tt.cells)};return hi(at,vt)}).getOr(""),align:wc(Le,Fe)},Re?og(He,Fe):{});var Le,Fe,Re,tt,He})),se={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ql(_)},Ef(_,"row")]},fe={type:"panel",items:[{type:"grid",columns:2,items:Ql(_)}]},_.windowManager.open({title:"Row Properties",size:"normal",body:gv(_)?se:fe,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:J,onSubmit:Sn(Tb,_,Dn(we,function(ke){return ke.dom}),J)}))}function s1(_,D,B,W){var K=_.dom,J=W.getData(),se=lo(J,function(fe,we){return B[we]!==fe});W.close(),""===J.class&&delete J.class,_.undoManager.transact(function(){var fe,we,ke,Le,Fe;D||(fe=parseInt(J.cols,10)||1,we=parseInt(J.rows,10)||1,D=ip(_,fe,we,0,0)),0<Ka(se)&&(function(Re,tt,He){var at,vt=Re.dom,Ue={},st={};if(Ue.class=He.class,st.height=Ta(He.height),vt.getAttrib(tt,"width")&&!Mi(Re)?Ue.width=(at=He.width)?at.replace(/px$/,""):"":st.width=Ta(He.width),Mi(Re)?(st["border-width"]=Ta(He.border),st["border-spacing"]=Ta(He.cellspacing)):(Ue.border=He.border,Ue.cellpadding=He.cellpadding,Ue.cellspacing=He.cellspacing),Mi(Re)&&tt.children)for(var Wt=0;Wt<tt.children.length;Wt++)uo(vt,tt.children[Wt],{"border-width":Ta(He.border),padding:Ta(He.cellpadding)}),Ro(Re)&&uo(vt,tt.children[Wt],{"border-color":He.bordercolor});Ro(Re)&&(st["background-color"]=He.backgroundcolor,st["border-color"]=He.bordercolor,st["border-style"]=He.borderstyle),Ue.style=vt.serializeStyle(sr(sr({},Kl(Re)),st)),vt.setAttribs(tt,sr(sr({},gd(Re)),Ue))}(_,D,J),((ke=K.select("caption",D)[0])&&!J.caption||!ke&&J.caption)&&_.execCommand("mceTableToggleCaption"),""===J.align?iu(_,D):sp(_,D,J.align)),_.focus(),_.addVisual(),0<Ka(se)&&(Fe=!(Le=Jr(se,"caption"))||1<Ka(se),cl(_,D,{structure:Le,style:Fe}))})}function ig(_,D){var B,W,K,J,se,fe,we,ke,Le,Fe,Re,tt,He,at,vt,Ue,st,Wt,Ke,Gt=_.dom,yt=(K=Ro(W=_),ke=Kl(W),Le=gd(W),Fe=K?(J=W.dom,{borderstyle:aa(ke,"border-style").getOr(""),bordercolor:Kd(J)(aa(ke,"border-color").getOr("")),backgroundcolor:Kd(J)(aa(ke,"background-color").getOr(""))}):{},sr(sr(sr(sr(sr(sr({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),ke),Le),Fe),(we=ke["border-width"],Mi(W)&&we?{border:we}:aa(Le,"border").fold(function(){return{}},function(Br){return{border:Br}}))),(se=aa(ke,"border-spacing").or(aa(Le,"cellspacing")).fold(function(){return{}},function(Br){return{cellspacing:Br}}),fe=aa(ke,"border-padding").or(aa(Le,"cellpadding")).fold(function(){return{}},function(Br){return{cellpadding:Br}}),sr(sr({},se),fe))));!1===D?(B=Gt.getParent(_.selection.getStart(),"table",_.getBody()))?(tt=B,He=Ro(Re=_),st=Re.dom,Wt=Mi(Re)?st.getStyle(tt,"border-spacing")||st.getAttrib(tt,"cellspacing"):st.getAttrib(tt,"cellspacing")||st.getStyle(tt,"border-spacing"),Ke=Mi(Re)?Jg(st,tt,"padding")||st.getAttrib(tt,"cellpadding"):st.getAttrib(tt,"cellpadding")||Jg(st,tt,"padding"),yt=sr({width:st.getStyle(tt,"width")||st.getAttrib(tt,"width"),height:st.getStyle(tt,"height")||st.getAttrib(tt,"height"),cellspacing:Wt,cellpadding:Ke,border:(at=st,Ue=gs(rt.fromDom(vt=tt),"border-width"),Mi(Re)&&Ue.isSome()?Ue.getOr(""):at.getAttrib(vt,"border")||Jg(Re.dom,vt,"border-width")||Jg(Re.dom,vt,"border")),caption:!!st.select("caption",tt)[0],class:st.getAttrib(tt,"class",""),align:wc(Re,tt)},He?og(st,tt):{})):Ro(_)&&(yt.borderstyle="",yt.bordercolor="",yt.backgroundcolor=""):(yt.cols="1",yt.rows="1",Ro(_)&&(yt.borderstyle="",yt.bordercolor="",yt.backgroundcolor=""));var Bn=fm(Xg(_));0<Bn.length&&yt.class&&(yt.class=yt.class.replace(/\s*mce\-item\-table\s*/g,""));var Yt,qn,Fr,fr,Vr={type:"grid",columns:2,items:(Yt=Bn,qn=D?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],Fr=_.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],fr=0<Yt.length?[{type:"listbox",name:"class",label:"Class",items:Yt}]:[],qn.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(Fr).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(fr))},io=Ro(_)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[Vr]},Ef(_,"table")]}:{type:"panel",items:[Vr]};_.windowManager.open({title:"Table Properties",size:"normal",body:io,onSubmit:Sn(s1,_,B,yt),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:yt})}function ag(_){return rm(ld(_),pc(_))}function em(_,D){return li(_,D).bind(function(B){var W=wl(B);return ar(W,function(K){return Vn(_,K)}).map(function(K){return{index:K,all:W}})})}function Jd(_,D){var B=_.document.createRange();return B.selectNode(D.dom),B}function Ba(_,D){var B=_.document.createRange();return tc(B,D),B}function ey(_,D,B){var W,K=_.document.createRange(),J=K;return D.fold(function(se){J.setStartBefore(se.dom)},function(se,fe){J.setStart(se.dom,fe)},function(se){J.setStartAfter(se.dom)}),W=K,B.fold(function(se){W.setEndBefore(se.dom)},function(se,fe){W.setEnd(se.dom,fe)},function(se){W.setEndAfter(se.dom)}),K}function ty(_,D,B,W,K){var J=_.document.createRange();return J.setStart(D.dom,B),J.setEnd(W.dom,K),J}function q_(_){return{left:_.left,top:_.top,right:_.right,bottom:_.bottom,width:_.width,height:_.height}}function tm(_,D,B){return D(rt.fromDom(B.startContainer),B.startOffset,rt.fromDom(B.endContainer),B.endOffset)}function nm(_,D){var B,W,K,J=(B=_,D.match({domRange:function(se){return{ltr:ht(se),rtl:je.none}},relative:function(se,fe){return{ltr:ds(function(){return ey(B,se,fe)}),rtl:ds(function(){return je.some(ey(B,fe,se))})}},exact:function(se,fe,we,ke){return{ltr:ds(function(){return ty(B,se,fe,we,ke)}),rtl:ds(function(){return je.some(ty(B,we,ke,se,fe))})}}}));return(K=(W=J).ltr()).collapsed?W.rtl().filter(function(se){return!1===se.collapsed}).map(function(se){return nc.rtl(rt.fromDom(se.endContainer),se.endOffset,rt.fromDom(se.startContainer),se.startOffset)}).getOrThunk(function(){return tm(0,nc.ltr,K)}):tm(0,nc.ltr,K)}function $o(_,D){return nm(_,D).match({ltr:function(B,W,K,J){var se=_.document.createRange();return se.setStart(B.dom,W),se.setEnd(K.dom,J),se},rtl:function(B,W,K,J){var se=_.document.createRange();return se.setStart(K.dom,J),se.setEnd(B.dom,W),se}})}function ny(_,D){return{parent:ht(je.from(_.dom.documentElement).map(rt.fromDom).getOr(_)),view:ht(_),origin:ht(Xt(0,0)),isResizable:D}}function bv(_){return Io(_).exists(function(D){return sg.test(D)})}function xv(_){return Io(_).exists(function(D){return u1.test(D)})}function ph(_){return Io(_).isNone()}function vh(){return{transformRow:En,transformCell:ru}}function yi(_,D){function B(K){if(bd(K))return Eb((se={element:K}).element)?_.colgroup(se):_.row(se);var J,se,fe=(J=D(K),fg(J.element)?_.col(J):_.cell(J));return W=je.some({item:K,replacement:fe}),fe}void 0===D&&(D=np);var W=je.none();return{getOrInit:function(K,J){return W.fold(function(){return B(K)},function(se){return J(K,se.item)?se.replacement:B(K)})}}}function Pn(_){return function(D){function B(K){var J=D.replace(K,_,"td"===_?{scope:null}:{});return W.push({item:K,sub:J}),J}var W=[];return{replaceOrInit:function(K,J){return bd(K)||fg(K)?K:(se=K,fe=J,Nn(W,function(we){return fe(we.item,se)}).fold(function(){return B(K)},function(we){return J(K,we.item)?we.sub:B(K)}));var se,fe}}}}function is(_){return{unmerge:function(D){var B=Zg(D);return B.each(function(W){return ma(D,"scope",W)}),function(){var W=_.cell({element:D,colspan:1,rowspan:1});return od(W,"width"),od(D,"width"),B.each(function(K){return ma(W,"scope",K)}),W}},merge:function(D){return od(D[0],"width"),function(){var B=nd(Dn(D,Zg));if(0===B.length)return je.none();var W=B[0],K=["row","col"];return Rn(B,function(J){return J!==W&&dn(K,J)})?je.none():je.from(W)}().fold(function(){return Ji(D[0],"scope")},function(B){return ma(D[0],"scope",B+"group")}),ht(D[0])}}}var sg=/(\d+(\.\d+)?)%/,u1=/(\d+(\.\d+)?)px|em/,Pf=Uo("col"),_v=ht(sg),l1=Uo("col"),wv=function(_){return Io(_).fold(function(){return{width:B=jn(D=_,Na),pixelWidth:B,getWidths:function(K,J){return Yh(K,D,J)},getCellDelta:W=ht(0),singleColumnWidth:ht([0]),minCellWidth:W,setElementWidth:Zn,adjustTableWidth:Zn,isRelative:!0,label:"none"};var D,B,W},function(D){return B=_,W=D,(null!==_v().exec(W)?av:qd)(B);var B,W})},ry=qd,Qd=av,oy=["img","br"],Rf=function(_,D){var B=function(W){for(var K=Mo(W),J=K.length-1;0<=J;J--){var se=K[J];if(D(se))return je.some(se);var fe=B(se);if(fe.isSome())return fe}return je.none()};return B(_)},yh={scope:["row","col"]},Yu={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},rm=_f("th,td,caption"),om=_f("th,td"),im=sl,Db=ud([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),ec=sr({},Db),ug=Lc(function(_){return _<0}),bh=Lc(Qn),am=ud([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),xh=sr(sr({},am),{from:function(_){return dt(_,"%")?jg("%",am.percent,_):dt(_,"px")?jg("px",am.pixels,_):am.invalid(_)}}),Wo=function(_){if(0===_.length)return _;var D,B,W=_r(_,function(J,se){var fe=xh.from(se).fold(function(){return{value:se,remainder:0}},function(we){return ke=we,{value:(Le=Math.floor(ke))+"px",remainder:ke-Le};var ke,Le},function(we){return{value:we+"%",remainder:0}});return{output:[fe.value].concat(J.output),remainder:J.remainder+fe.remainder}},{output:[],remainder:0}),K=W.output;return K.slice(0,K.length-1).concat([(D=K[K.length-1],B=Math.round(W.remainder),xh.from(D).fold(ht(D),function(J){return J+B+"px"},function(J){return J+B+"%"}))])},Sv=xh.from,Vc=Xd(["compare","extract","mutate","sink"]),Cv=Xd(["element","start","stop","destroy"]),c1=Xd(["forceDrop","drop","move","delayDrop"]),sm=function(_,D,B,W){_.dom.removeEventListener(D,B,W)},ef=Qn,Hc=fd,up=Wu("ephox-dragster").resolve,X_=Vc({compare:function(_,D){return Xt(D.left-_.left,D.top-_.top)},extract:function(_){return je.some(Xt(_.x,_.y))},sink:function(_,D){var B,W,K,J=(B=D,W=sr({layerClass:up("blocker")},B),ma(K=rt.fromTag("div"),"role","presentation"),Fd(K,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),wf(K,up("blocker")),wf(K,W.layerClass),{element:ht(K),destroy:function(){ns(K)}}),se=$l(J.element(),"mousedown",_.forceDrop),fe=$l(J.element(),"mouseup",_.drop),we=$l(J.element(),"mousemove",_.move),ke=$l(J.element(),"mouseout",_.delayDrop);return Cv({element:J.element,start:function(Le){qr(Le,J.element())},stop:function(){ns(J.element())},destroy:function(){J.destroy(),fe.unbind(),we.unbind(),ke.unbind(),se.unbind()}})},mutate:function(_,D){_.mutate(D.left,D.top)}}),su=function(_){return _.dom.contentEditable},kv=Wu("ephox-snooker").resolve,tf=kv("resizer-bar"),Mv=kv("resizer-rows"),Nf=kv("resizer-cols"),Ab=kv("resizer-bar-dragging"),Lf={structure:!1,style:!0},No={structure:!0,style:!1},lp={structure:!0,style:!0},Bf={"border-collapse":"collapse",width:"100%"},cp=_e(5,function(_){var D=_+1+"px";return{title:D,value:D}}),Ib=Dn(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(_){return{title:_,value:_.toLowerCase()}}),iy={border:"1"},dp="preservetable",fp=function(_){return"fixed"===xb(_)||!1===ys(_)},lg=function(_){return"responsive"===xb(_)},Go=function(_){var D=Ls(_);cd(_,je.some(D),je.none()),Gu(_)},Tv=function(_){var D=Na(_)+"px";cd(_,je.some(D),je.none()),Gu(_)},ay=function(_){od(_,"width");var D=Po(_);me(0<D.length?D:wl(_),function(B){od(B,"width"),Gu(B)}),Gu(_)},Zu="bar-",Dv=function(_,D,B){return _.property().isText(D)&&0===_.property().getText(D).trim().length||_.property().isComment(D)?B(D).bind(function(W){return Dv(_,W,B).orThunk(function(){return je.some(W)})}):je.none()},zf=function(_,D){var B=Dv(_,D,_.query().prevSibling).getOr(D);if(_.property().isText(B))return Df(B,ju(_,B));var W=_.property().children(B);return 0<W.length?zf(_,W[W.length-1]):Df(B,ju(_,B))},cg=zf,_h=pu(),Wc=Uo("th"),El=function(_){var D=Pr(_,function(B){return Wc(B.element)});return 0===D.length?je.some("td"):D.length===_.length?je.some("th"):je.none()},dg=md,Av=Z0,Ob=Uu,Ff=function(_){return{isValue:Qn,isError:un,getOr:ht(_),getOrThunk:ht(_),getOrDie:ht(_),or:function(D){return Ff(_)},orThunk:function(D){return Ff(_)},fold:function(D,B){return B(_)},map:function(D){return Ff(D(_))},mapError:function(D){return Ff(_)},each:function(D){D(_)},bind:function(D){return D(_)},exists:function(D){return D(_)},forall:function(D){return D(_)},toOptional:function(){return je.some(_)}}},hl=function(_){return{isValue:un,isError:Qn,getOr:En,getOrThunk:function(D){return D()},getOrDie:function(){return D=String(_),function(){throw new Error(D)}();var D},or:En,orThunk:function(D){return D()},fold:function(D,B){return D(_)},map:function(D){return hl(_)},mapError:function(D){return hl(D(_))},each:Zn,bind:function(D){return hl(_)},exists:un,forall:Qn,toOptional:je.none}},uu={value:Ff,error:hl,fromOption:function(_,D){return _.fold(function(){return hl(D)},Ff)}},fg=Uo("col"),Eb=Uo("colgroup"),xc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],wh=pu(),as=_u("thead",!0),um=_u("tbody",!1),bs=_u("tfoot",!1),lm=Pn("th"),hg=Pn("td"),gg=Aa(function(_,D,B,W){var K=D[0].row;return ou(_r(ng(D),function(J,se){return{grid:Pi(J.grid,K,se.row+J.delta,B,W.getOrInit),delta:J.delta+1}},{grid:_,delta:0}).grid,K,D[0].column)},bu,Zn,Zn,yi),Gc=Aa(function(_,D,B,W){var K=ng(D),J=K[K.length-1],se=J.row+J.rowspan;return ou(_r(K,function(fe,we){return Pi(fe,se,we.row,B,W.getOrInit)},_),se,D[0].column)},bu,Zn,Zn,yi),Iv=Aa(function(_,D,B,W){var K=D.details,J=If(K),se=J[0].column;return ou(_r(J,function(fe,we){return{grid:qu(fe.grid,se,we.column+fe.delta,B,W.getOrInit),delta:fe.delta+1}},{grid:_,delta:0}).grid,K[0].row,se)},Xu(!0),yc,Zn,yi),sy=Aa(function(_,D,B,W){var K=D.details,J=K[K.length-1],se=J.column+J.colspan;return ou(_r(If(K),function(fe,we){return qu(fe,se,we.column,B,W.getOrInit)},_),K[0].row,se)},Xu(!1),yc,Zn,yi),hp=Aa(function(_,D,B,W){var K,J,se=If(D.details),fe=(K=_,J=Dn(se,function(ke){return ke.column}),Mt(K,function(ke){var Fe=_r(J,function(Re,tt){return 0<=tt&&tt<Re.length?Re.slice(0,tt).concat(Re.slice(tt+1)):Re},ke.cells);return 0<Fe.length?[Pa(ke.element,Fe,ke.section,ke.isNew)]:[]}));return ou(fe,se[0].row,Math.min(se[0].column,0<fe.length?fe[0].cells.length-1:0))},function(_,D){return ch(_,D).map(function(B){return{details:B,pixelDelta:-mv(_,B)}})},yc,U_,yi),uy=Aa(function(_,D,B,W){var K,J,se,fe,we=ng(D),ke=(K=we[0].row,J=we[we.length-1].row,fe=(se=ts(_)).rows,se.cols.concat(fe.slice(0,K)).concat(fe.slice(J+1)));return ou(ke,Math.min(D[0].row,0<ke.length?ke.length-1:0),D[0].column)},bu,Zn,U_,yi),ku=Aa(function(_,D,B,W){return ou(Yi(_,Dn(If(D),function(K){return K.column}),!0,B,W.replaceOrInit),D[0].row,D[0].column)},ch,Zn,Zn,lm),Ov=Aa(function(_,D,B,W){return ou(Yi(_,Dn(If(D),function(K){return K.column}),!1,B,W.replaceOrInit),D[0].row,D[0].column)},ch,Zn,Zn,hg),gl=Aa(as,ch,Zn,Zn,lm),fo=Aa(um,ch,Zn,Zn,hg),da=Aa(bs,ch,Zn,Zn,hg),Pb=Aa(function(_,D,B,W){return ou(Hs(_,D,B,W.replaceOrInit),D[0].row,D[0].column)},ch,Zn,Zn,lm),ly=Aa(function(_,D,B,W){return ou(Hs(_,D,B,W.replaceOrInit),D[0].row,D[0].column)},ch,Zn,Zn,hg),d1=Aa(function(_,D,B,W){var K=D.cells;return function(_){function D(J){return"br"===dr(J)}var W,K=0===(W=Mt(_,function(J){var se=Mo(J);return tr(se,function(fe){return D(fe)||Gi(fe)&&0===Ki(fe).trim().length})?[]:se.concat(function(J){return Qs(J).bind(function(se){var fe=Zs(se).map(function(we){return!!$g(we)||(ke=we,!!dn(["br","img","hr","input"],wh.property().name(ke))&&"img"!==dr(we));var ke}).getOr(!1);return rr(se).map(function(we){return!0===fe||"li"===dr(ke=we)||it(ke,fh).isSome()||D(se)||$g(we)&&!Vn(J,we)?[]:[rt.fromTag("br")];var ke})}).getOr([])}(J))})).length?[rt.fromTag("br")]:W;Ks(_[0]),pn(_[0],K)}(K),Ia(function(J,se,fe){var we=ts(J).rows;if(0===we.length)return J;for(var ke=se.startRow;ke<=se.finishRow;ke++)for(var Le=se.startCol;Le<=se.finishCol;Le++){var Fe=we[ke],Re=Lu(Fe,Le).isLocked;id(Fe,Le,hs(fe(),!1,Re))}return J}(_,D.bounds,W.merge(K)),je.from(K[0]))},$0,xd,Zn,is),_d=Aa(function(_,D,B,W){return Ia(_r(D,function(K,J){return Cb(K,J,B,W.unmerge(J))},_),je.from(D[0]))},Sb,xd,Zn,is),Ev=Aa(function(_,D,B,W){var J,se=(J=D.generators,pd(Zr.fromTable(D.clipboard),J,!0));return function(_,D,B,W,K){var J,se,fe,we=Ga(D),ke=(J=_,se=we,fe=Vi(D[0]),{row:ts(D).cols.length+J.row,column:Nn(_e(fe-J.column,function(Re){return Re+J.column}),function(Re){return tr(se,function(tt){return tt!==Re})}).getOr(fe-1)}),Le=ts(B).rows,Fe=ci(ke,Le,we);return function(Re,tt,He){if(Re.row>=tt.length||Re.column>Vi(tt[0]))return uu.error("invalid start address out of table bounds, row: "+Re.row+", column: "+Re.column);var at=tt.slice(Re.row),vt=at[0].cells.slice(Re.column),Ue=Vi(He[0]);return uu.value({rowDelta:at.length-He.length,colDelta:vt.length-Ue})}(ke,D,Le).map(function(Re){var tt=sr(sr({},Re),{colDelta:Re.colDelta-Fe.length}),He=Vs(D,tt,W),at=Ga(He),vt=ci(ke,Le,at);return function(Ue,st,Wt,Ke,Gt,yt){for(var Bn,Yt,qn,Fr,fr,Vr=Ue.row,io=Ue.column,Br=Vr+Wt.length,to=io+Vi(Wt[0])+yt.length,zn=xt(yt,Qn),Ri=Vr;Ri<Br;Ri++)for(var Xr,Ci,So,Do=0,na=io;na<to;na++)zn[na]?Do++:(Fr=void 0,Fr=Sn(Gt,Lu((Bn=st)[Yt=Ri],qn=na).element),fr=Bn[Yt],1<Bn.length&&1<Vi(fr)&&(0<qn&&Fr(sa(fr,qn-1))||qn<fr.cells.length-1&&Fr(sa(fr,qn+1))||0<Yt&&Fr(sa(Bn[Yt-1],qn))||Yt<Bn.length-1&&Fr(sa(Bn[Yt+1],qn)))&&Cb(st,sa(st[Ri],na),Gt,Ke.cell),Ci=(Xr=Lu(Wt[Ri-Vr],na-io-Do)).element,So=Ke.replace(Ci),id(st[Ri],na,hs(So,!0,Xr.isLocked)));return st}(ke,He,Le,W,K,vt)})}({row:D.row,column:D.column},_,se,D.generators,B).fold(function(){return Ia(_,je.some(D.element))},function(fe){return ou(fe,D.row,D.column)})},function(_,D){return jh(D.element).bind(function(B){return vc(_,B).map(function(W){return sr(sr({},W),{generators:D.generators,clipboard:D.clipboard})})})},xd,Zn,yi),cy=Aa(function(_,D,B,W){var K=ts(_).rows;return ou(wo(D.cells[0].column,_,rp(D.clipboard,D.generators,K[D.cells[0].row]),D.generators,B),D.cells[0].row,D.cells[0].column)},Dl(!0),Zn,Zn,yi),dy=Aa(function(_,D,B,W){var K=ts(_).rows;return ou(wo(D.cells[D.cells.length-1].column+D.cells[D.cells.length-1].colspan,_,rp(D.clipboard,D.generators,K[D.cells[0].row]),D.generators,B),D.cells[0].row,D.cells[0].column)},Dl(!1),Zn,Zn,yi),$u=Aa(function(_,D,B,W){var K=ts(_).rows,J=D.cells[0].row;return ou(Bc(J,_,rp(D.clipboard,D.generators,K[J]),D.generators,B),D.cells[0].row,D.cells[0].column)},vd,Zn,Zn,yi),Mu=Aa(function(_,D,B,W){var K=ts(_).rows;return ou(Bc(D.cells[D.cells.length-1].row+D.cells[D.cells.length-1].rowspan,_,rp(D.clipboard,D.generators,K[D.cells[0].row]),D.generators,B),D.cells[0].row,D.cells[0].column)},vd,Zn,Zn,yi),hi=function(_,D){var B=Zr.fromTable(_);return bu(B,D).bind(function(W){var K=W[W.length-1],J=W[0].row,se=K.row+K.rowspan;return function(){var fe=Dn(B.all.slice(J,se),function(Fe){return i1(Fe).type}),we=dn(fe,"header"),ke=dn(fe,"footer");if(we||ke){var Le=dn(fe,"body");return!we||Le||ke?we||Le||!ke?je.none():je.some("footer"):je.some("header")}return je.some("body")}()}).getOr("")},Gs={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},_c=tinymce.util.Tools.resolve("tinymce.util.Tools"),cm=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],f1=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,dm=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,mg=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Rb=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,fm=function(_){return Dn(_,function(D){var B=D.text||D.title;return rg(D)?{text:B,items:fm(D.menu)}:{text:B,value:D.value}})},Sh=function(_,D,B,W,K){return Dn(B,function(J){var se,fe,we,ke,Le=J.text||J.title;return rg(J)?{type:"nestedmenuitem",text:Le,getSubmenuItems:function(){return Sh(_,D,J.menu,W,K)}}:{text:Le,type:"togglemenuitem",onAction:function(){return K(J.value)},onSetup:(se=_,fe=D,we=W,ke=J.value,function(Fe){function Re(){function at(Ue){return se.formatter.match(we,{value:ke},Ue.dom,He)}var vt=im(fe);He?(Fe.setActive(!Rn(vt,at)),tt.set(se.formatter.formatChanged(we,function(Ue){return Fe.setActive(!Ue)},!0))):(Fe.setActive(tr(vt,at)),tt.set(se.formatter.formatChanged(we,Fe.setActive,!1,{value:ke})))}var tt=au(function(at){return at.unbind()}),He=!Pt(ke);return se.initialized?Re():se.on("init",Re),tt.clear})}})},hm=function(_){return Mt(_,function(D){return rg(D)?[sr(sr({},D),{menu:hm(D.menu)})]:Pt(D.value)?[D]:[]})},fy=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:cm}],eo={normal:kt(!1),ifTruthy:kt(!0)},wc=Sn(yv,["left","center","right"],"align"),gp=Sn(yv,["top","middle","bottom"],"valign"),Nb=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],uo=function(_,D,B,W){if("TD"===D.tagName||"TH"===D.tagName)Ut(B)?_.setStyle(D,B,W):_.setStyle(D,B);else if(D.children)for(var K=0;K<D.children.length;K++)uo(_,D.children[K],B,W)},Pv={remove_similar:!0,inherit:!1},Vf=sr({selector:"td,th"},Pv),Rv={tablecellbackgroundcolor:sr({styles:{backgroundColor:"%value"}},Vf),tablecellverticalalign:sr({styles:{"vertical-align":"%value"}},Vf),tablecellbordercolor:sr({styles:{borderColor:"%value"}},Vf),tablecellclass:sr({classes:["%value"]},Vf),tableclass:sr({selector:"table",classes:["%value"]},Pv),tablecellborderstyle:sr({styles:{borderStyle:"%value"}},Vf),tablecellborderwidth:sr({styles:{borderWidth:"%value"}},Vf)},Nv=ud([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),nf=sr(sr({},Nv),{none:function(_){return Nv.none(_=void 0===_?void 0:_)}}),jc=function(_,D,B,W,K){void 0===K&&(K=Qn);var J=1===W;if(!J&&B<=0)return nf.first(_[0]);if(J&&B>=_.length-1)return nf.last(_[_.length-1]);var se=B+W,fe=_[se];return K(fe)?nf.middle(D,fe):jc(_,D,se,W,K)},gm=function(_,D,B,W){return{start:_,soffset:D,finish:B,foffset:W}},mm=ud([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),za={before:mm.before,on:mm.on,after:mm.after,cata:function(_,D,B,W){return _.fold(D,B,W)},getStart:function(_){return _.fold(En,En,En)}},pg=ud([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Tu={domRange:pg.domRange,relative:pg.relative,exact:pg.exact,exactFromRange:function(_){return pg.exact(_.start,_.soffset,_.finish,_.foffset)},getWin:function(_){var D=_.match({domRange:function(B){return rt.fromDom(B.startContainer)},relative:function(B,W){return za.getStart(B)},exact:function(B,W,K,J){return B}});return rt.fromDom(Ha(D).dom.defaultView)},range:gm},tc=function(_,D){return _.selectNodeContents(D.dom)},nc=ud([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);function Pl(_,D,B){return D>=_.left&&D<=_.right&&B>=_.top&&B<=_.bottom}function Ku(_,D){return D-_.left<_.right-D}function rf(_,D,B){var W=_.dom.createRange();return W.selectNode(D.dom),W.collapse(B),W}function Lv(_,D,B){var W=_.dom.createRange();W.selectNode(D.dom);var K=Ku(W.getBoundingClientRect(),B);return(!0===K?Js:Qs)(D).map(function(J){return rf(_,J,K)})}function US(_,D,B){var W=Ku(D.dom.getBoundingClientRect(),B);return je.some(rf(_,D,W))}function pm(_,D){var B=dr(_);return"input"===B?za.after(_):dn(["br","img"],B)?0===D?za.before(_):za.after(_):za.on(_,D)}function hy(_,D){var B=_.fold(za.before,pm,za.after),W=D.fold(za.before,pm,za.after);return Tu.relative(B,W)}function of(_,D,B,W){var K=pm(_,D),J=pm(B,W);return Tu.relative(K,J)}function ba(_){return je.from(_.getSelection())}function Du(_,D){ba(_).each(function(B){B.removeAllRanges(),B.addRange(D)})}function Bv(_,D,B,W,K){Du(_,ty(_,D,B,W,K))}function zv(_,D){return nm(_,D).match({ltr:function(B,W,K,J){Bv(_,B,W,K,J)},rtl:function(B,W,K,J){ba(_).each(function(se){if(se.setBaseAndExtent)se.setBaseAndExtent(B.dom,W,K.dom,J);else if(se.extend)try{we=K,ke=J,(fe=se).collapse(B.dom,W),fe.extend(we.dom,ke)}catch(Le){Bv(_,K,J,B,W)}else Bv(_,K,J,B,W);var fe,we,ke})}})}function Lb(_,D,B,W,K){zv(_,of(D,B,W,K))}function Fv(_,D,B){zv(_,hy(D,B))}function Y_(_){if(0<_.rangeCount){var D=_.getRangeAt(0),B=_.getRangeAt(_.rangeCount-1);return je.some(gm(rt.fromDom(D.startContainer),D.startOffset,rt.fromDom(B.endContainer),B.endOffset))}return je.none()}function vm(_){if(null===_.anchorNode||null===_.focusNode)return Y_(_);var D,B,W,K,J,se,fe,we,ke,Le,Fe,Re=rt.fromDom(_.anchorNode),tt=rt.fromDom(_.focusNode);return se=B=_.anchorOffset,fe=W=tt,we=K=_.focusOffset,(ke=Va(J=D=Re).dom.createRange()).setStart(J.dom,se),ke.setEnd(fe.dom,we),Le=ke,Fe=Vn(D,W)&&B===K,Le.collapsed&&!Fe?je.some(gm(Re,_.anchorOffset,tt,_.focusOffset)):Y_(_)}function Kr(_,D,B){Du(_,((B=void 0===B||B)?Ba:Jd)(_,D))}function Hf(_){return ba(_).filter(function(D){return 0<D.rangeCount}).bind(vm).map(function(D){return Tu.exact(D.start,D.soffset,D.finish,D.foffset)})}function wd(_,D,B){return kh(_,D,(K=tu,em(W=B,void 0).fold(function(){return nf.none(W)},function(J){return jc(J.all,W,J.index,1,K)})));var W,K}function mp(_,D){var B=$o(_,D);return gm(rt.fromDom(B.startContainer),B.startOffset,rt.fromDom(B.endContainer),B.endOffset)}function Bb(_,D){return{item:_,mode:D}}function Ju(_,D,B,W){return void 0===W&&(W=ss),_.property().parent(D).map(function(K){return Bb(K,W)})}function Vv(_){return function(D){return 0===_.property().children(D).length}}function Hv(_,D){return Xc(yg,_,Vv(yg),D)}function zb(_,D){return yy(yg,_,Vv(yg),D)}function h1(_){return Ss(_,"tr")}function Fb(_){return"br"===dr(_)}function Sd(_,D){return{left:_.left,top:_.top+D,right:_.right,bottom:_.bottom+D}}function Cd(_,D){return{left:_.left,top:_.top-D,right:_.right,bottom:_.bottom-D}}function pp(_,D,B){return{left:_.left+D,top:_.top+B,right:_.right+D,bottom:_.bottom+B}}function kd(_){return{left:_.left,top:_.top,right:_.right,bottom:_.bottom}}function Wf(_,D){return je.some(_.getRect(D))}function mr(_,D,B){return Wa(D)?Wf(_,D).map(kd):Gi(D)?(W=_,K=D,(0<=(J=B)&&J<Zh(K)?W.getRangedRect(K,J,K,J+1):0<J?W.getRangedRect(K,J-1,K,J):je.none()).map(kd)):je.none();var W,K,J}function Z_(_,D){return Wa(D)?Wf(_,D).map(kd):Gi(D)?_.getRangedRect(D,0,D,Zh(D)).map(kd):je.none()}function qc(_,D,B){return At(function(W,K){return K(W)},it,D,$g,void 0).fold(un,function(W){return Z_(_,W).exists(function(K){return(J=B).left<(se=K).left||Math.abs(se.right-J.left)<1||J.left>se.right;var J,se})})}function Wv(_,D,B){var W,K=_.move(B,5),J=xp(D,_,B,K,100).getOr(K),se=J,fe=D;return((W=_).point(se)>fe.getInnerHeight()?je.some(W.point(se)-fe.getInnerHeight()):W.point(se)<0?je.some(-W.point(se)):je.none()).fold(function(){return D.situsFromPoint(J.left,_.point(J))},function(we){return D.scrollBy(0,we),D.situsFromPoint(J.left,_.point(J)-we)})}function ym(_,D,B,W,K){return Ss(W,"td,th",D).bind(function(J){return Ss(J,"table",D).bind(function(se){return Le=se,it(K,function(He){return rr(He).exists(function(at){return Vn(at,Le)})},void 0).isSome()?(fe=Fe=_,we=Re=D,ke=tt=B,fe.getSelection().bind(function(He){return function(_,D,B,W){var K,J,se,fe,we,ke,Le;return(Fb(D)?(K=_,(se=W).traverse(J=D).orThunk(function(){return by(J,se.gather,K)}).map(se.relative)):(fe=_,we=W,Eu(ke=D,Le=B).filter(Fb).orThunk(function(){return Eu(ke,Le-1).filter(Fb)}).bind(function(Fe){return we.traverse(Fe).fold(function(){return by(Fe,we.gather,fe).map(we.relative)},function(Re){return rr(tt=Re).bind(function(He){var at=Mo(He);return go(at,tt).map(function(vt){return{parent:He,children:at,element:tt,index:vt}})}).map(function(He){return za.on(He.parent,He.index)});var tt})}))).map(function(Fe){return{start:Fe,finish:Fe}})}(we,He.finish,He.foffset,ke).fold(function(){return je.some(Df(He.finish,He.foffset))},function(at){var vt=fe.fromSitus(at),Ue=qv.verify(fe,He.finish,He.foffset,vt.finish,vt.foffset,ke.failure,we);return qv.cata(Ue,function(st){return je.none()},function(){return je.none()},function(st){return je.some(Df(st,0))},function(st){return je.some(Df(st,Zh(st)))})})}).bind(function(He){return _p(Fe,Re,He.element,He.offset,tt,20).map(Fe.fromSitus)}).bind(function(He){return Ss(He.finish,"td,th",D).map(function(at){return{start:J,finish:at,range:He}})})):je.none();var fe,we,ke,Le,Fe,Re,tt})})}function bm(_,D,B,W,K,J){return $t().browser.isIE()?je.none():J(W,D).orThunk(function(){return ym(_,D,B,W,K).map(function(se){var fe=se.range;return vg(je.some(py(fe.start,fe.soffset,fe.finish,fe.foffset)),!0)})})}function rc(_,D){return Ss(_,"tr",D).bind(function(B){return Ss(B,"table",D).bind(function(W){var K=$i(W,"tr");return Vn(B,K[0])?Xc(yg,W,function(J){return Qs(J).isSome()},D).map(function(J){var se=Zh(J);return vg(je.some(py(J,se,J,se)),!0)}):je.none()})})}function Gv(_,D){return Ss(_,"tr",D).bind(function(B){return Ss(B,"table",D).bind(function(W){var K=$i(W,"tr");return Vn(B,K[K.length-1])?yy(yg,W,function(J){return Js(J).isSome()},D).map(function(J){return vg(je.some(py(J,0,J,0)),!0)}):je.none()})})}function Vb(_,D,B,W,K,J,se){return ym(_,B,W,K,J).bind(function(fe){return m1(D,B,fe.start,fe.finish,se)})}function jv(_,D){return Ss(_,"td,th",D)}function Ch(_){return function(D){return D===_}}function gy(_){return 37<=_&&_<=40}function my(_){return{elementFromPoint:function(D,B){return rt.fromPoint(rt.fromDom(_.document),D,B)},getRect:function(D){return D.dom.getBoundingClientRect()},getRangedRect:function(D,B,W,K){var J,se,fe,we=Tu.exact(D,B,W,K);return 0<(se=0<(fe=(J=$o(_,we)).getClientRects()).length?fe[0]:J.getBoundingClientRect()).width||0<se.height?je.some(se).map(q_):je.none()},getSelection:function(){return Hf(_).map(function(D){return mp(_,D)})},fromSitus:function(D){var B=Tu.relative(D.start,D.finish);return mp(_,B)},situsFromPoint:function(D,B){return W=D,K=B,J=rt.fromDom(_.document),yp(J,W,K).map(function(se){return gm(rt.fromDom(se.startContainer),se.startOffset,rt.fromDom(se.endContainer),se.endOffset)}).map(function(se){return bp(se.start,se.soffset,se.finish,se.foffset)});var W,K,J},clearSelection:function(){ba(_).each(function(D){return D.removeAllRanges()})},collapseSelection:function(D){void 0===D&&(D=!1),Hf(_).each(function(B){return B.fold(function(W){return W.collapse(D)},function(W,K){var J=D?W:K;Fv(_,J,J)},function(W,K,J,se){var fe=D?W:J,we=D?K:se;Lb(_,fe,we,fe,we)})})},setSelection:function(D){Lb(_,D.start,D.soffset,D.finish,D.foffset)},setRelativeSelection:function(D,B){Fv(_,D,B)},selectNode:function(D){Kr(_,D,!1)},selectContents:function(D){Kr(_,D)},getInnerHeight:function(){return _.innerHeight},getScrollY:function(){var D=rt.fromDom(_.document),B=void 0!==D?D.dom:document;return Xt(B.body.scrollLeft||B.documentElement.scrollLeft,B.body.scrollTop||B.documentElement.scrollTop).top},scrollBy:function(D,B){var W,K=D,J=B,se=rt.fromDom(_.document);(W=(void 0!==se?se.dom:document).defaultView)&&W.scrollBy(K,J)}}}function vp(_,D){return{rows:_,cols:D}}function Hb(_){return!1===Sf(rt.fromDom(_.target),"ephox-snooker-resizer-bar")}function ss(_,D,B,W){return void 0===W&&(W=As),B.sibling(_,D).map(function(K){return Bb(K,W)})}var af=function(_,D,B,W){return Gi(D)?(J=D,se=B,fe=W,(we=(K=_).dom.createRange()).selectNode(J.dom),pe(we.getClientRects(),function(He){return Pl(He,se,fe)?je.some(He):je.none()}).map(function(He){return function(_,D,B,W,K){function J(we){var ke=_.dom.createRange();return ke.setStart(D.dom,we),ke.collapse(!0),ke}var se=Ki(D).length,fe=function(we,ke,Le,Fe){if(0===Fe)return 0;if(we===Le)return Fe-1;for(var Re=Le,tt=1;tt<Fe;tt++){var He=J(tt).getBoundingClientRect(),at=Math.abs(we-He.left);if(ke<=He.bottom){if(ke<He.top||Re<at)return tt-1;Re=at}}return 0}(B,W,K.right,se);return J(fe)}(K,J,se,fe,He)})):(Le=D,Fe=B,Re=W,tt=(ke=_).dom.createRange(),pe(Mo(Le),function(He){return tt.selectNode(He.dom),Pl(tt.getBoundingClientRect(),Fe,Re)?af(ke,He,Fe,Re):je.none()}));var K,J,se,fe,we,ke,Le,Fe,Re,tt},yp=document.caretPositionFromPoint?function(_,D,B){var W,K;return je.from(null===(K=(W=_.dom).caretPositionFromPoint)||void 0===K?void 0:K.call(W,D,B)).bind(function(J){if(null===J.offsetNode)return je.none();var se=_.dom.createRange();return se.setStart(J.offsetNode,J.offset),se.collapse(),je.some(se)})}:document.caretRangeFromPoint?function(_,D,B){var W,K;return je.from(null===(K=(W=_.dom).caretRangeFromPoint)||void 0===K?void 0:K.call(W,D,B))}:function(_,D,B){return rt.fromPoint(_,D,B).bind(function(W){function K(){return J=_,fe=D,(0===Mo(se=W).length?US:Lv)(J,se,fe);var J,se,fe}return 0===Mo(W).length?K():function(J,se,fe,we){var ke=J.dom.createRange();ke.selectNode(se.dom);var Le=ke.getBoundingClientRect();return function(Fe,Re,tt,He){var at=Fe.dom.createRange();at.selectNode(Re.dom);var vt=at.getBoundingClientRect(),Ue=Math.max(vt.left,Math.min(vt.right,tt)),st=Math.max(vt.top,Math.min(vt.bottom,He));return af(Fe,Re,Ue,st)}(J,se,Math.max(Le.left,Math.min(Le.right,fe)),Math.max(Le.top,Math.min(Le.bottom,we)))}(_,W,D,B).orThunk(K)})},Uv=tinymce.util.Tools.resolve("tinymce.util.VK"),kh=function(_,D,B){return B.fold(je.none,je.none,function(W,K){return Js(K).map(function(J){return Le=Tu.exact(J,0,J,0),we=Tu.getWin(fe=Le).dom,ke=fe.match({domRange:function(Fe){var Re=rt.fromDom(Fe.startContainer),tt=rt.fromDom(Fe.endContainer);return of(Re,Fe.startOffset,tt,Fe.endOffset)},relative:hy,exact:of}),nm(we,ke).match({ltr:se,rtl:se});function se(Fe,Re,tt,He){return ty(we,Fe,Re,tt,He)}var fe,we,ke,Le})},function(W){return _.execCommand("mceTableInsertRowAfter"),wd(_,D,W)})},g1=["table","li","dl"],vg=function(_,D){return{selection:_,kill:D}},bp=function(_,D,B,W){return{start:za.on(_,D),finish:za.on(B,W)}},py=bp,m1=function(_,D,B,W,K){return Vn(B,W)?je.none():ms(B,W,D).bind(function(J){var se=J.boxes.getOr([]);return 1<se.length?(K(_,se,J.start,J.finish),je.some(vg(je.some(py(B,0,B,Zh(B))),!0))):je.none()})},As=function(_,D,B,W){void 0===W&&(W=As);var K=_.property().children(D);return B.first(K).map(function(J){return Bb(J,W)})},ho=[{current:Ju,next:ss,fallback:je.none()},{current:ss,next:As,fallback:je.some(Ju)},{current:As,next:As,fallback:je.some(ss)}],Wb=function(_,D,B,W,K){return Nn(K=void 0===K?ho:K,function(J){return J.current===B}).bind(function(J){return J.current(_,D,W,J.next).orThunk(function(){return J.fallback.bind(function(se){return Wb(_,D,se,W)})})})},vy=function(_,D,B,W,K,J){return Wb(_,D,W,K).bind(function(se){return J(se.item)?je.none():B(se.item)?je.some(se.item):vy(_,se.item,B,se.mode,K,J)})},Xc=function(_,D,B,W){return vy(_,D,B,ss,{sibling:function(K,J){return K.query().prevSibling(J)},first:function(K){return 0<K.length?je.some(K[K.length-1]):je.none()}},W)},yy=function(_,D,B,W){return vy(_,D,B,ss,{sibling:function(K,J){return K.query().nextSibling(J)},first:function(K){return 0<K.length?je.some(K[0]):je.none()}},W)},yg=pu(),Kn=ud([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),qv=sr(sr({},Kn),{verify:function(_,D,B,W,K,J,se){return Ss(W,"td,th",se).bind(function(fe){return Ss(D,"td,th",se).map(function(we){return Vn(fe,we)?Vn(W,fe)&&Zh(fe)===K?J(we):Kn.none("in same cell"):ql(h1,[fe,we]).fold(function(){return Le=fe,Fe=(ke=_).getRect(we),(Re=ke.getRect(Le)).right>Fe.left&&Re.left<Fe.right?Kn.success():J(we);var ke,Le,Fe,Re},function(ke){return J(we)})})}).getOr(Kn.none("default"))},cata:function(_,D,B,W,K){return _.fold(D,B,W,K)}}),go=function(_,D){return ar(_,Sn(Vn,D))},by=function(_,D,B){return D(_,B).bind(function(W){return Gi(W)&&0===Ki(W).trim().length?by(W,D,B):je.some(W)})},js=ud([{none:[]},{retry:["caret"]}]),Oa={point:function(_){return _.bottom},adjuster:function(_,D,B,W,K){var J=Sd(K,5);return Math.abs(B.bottom-W.bottom)<1||B.top>K.bottom?js.retry(J):B.top===K.bottom?js.retry(Sd(K,1)):qc(_,D,K)?js.retry(pp(J,5,0)):js.none()},move:Sd,gather:zb},xp=function(_,D,B,W,K){return 0===K?je.some(W):(se=_,fe=W.left,we=D.point(W),se.elementFromPoint(fe,we).filter(function(ke){return"table"===dr(ke)}).isSome()?(J=K-1,xp(_,D,B,D.move(W,5),J)):_.situsFromPoint(W.left,D.point(W)).bind(function(ke){return ke.start.fold(je.none,function(Le){return Z_(_,Le).bind(function(Fe){return D.adjuster(_,Le,Fe,B,W).fold(je.none,function(Re){return xp(_,D,B,Re,K-1)})}).orThunk(function(){return je.some(W)})},je.none)}));var J,se,fe,we},lu={tryUp:Sn(Wv,{point:function(_){return _.top},adjuster:function(_,D,B,W,K){var J=Cd(K,5);return Math.abs(B.top-W.top)<1||B.bottom<K.top?js.retry(J):B.bottom===K.top?js.retry(Cd(K,1)):qc(_,D,K)?js.retry(pp(J,5,0)):js.none()},move:Cd,gather:Hv}),tryDown:Sn(Wv,Oa),ieTryUp:function(_,D){return _.situsFromPoint(D.left,D.top-5)},ieTryDown:function(_,D){return _.situsFromPoint(D.left,D.bottom+5)},getJumpSize:ht(5)},_p=function(_,D,B,W,K,J){return 0===J?je.none():Mh(_,D,B,W,K).bind(function(se){var fe=_.fromSitus(se),we=qv.verify(_,B,W,fe.finish,fe.foffset,K.failure,D);return qv.cata(we,function(){return je.none()},function(){return je.some(se)},function(ke){return Vn(B,ke)&&0===W?xm(_,B,W,Cd,K):_p(_,D,ke,0,K,J-1)},function(ke){return Vn(B,ke)&&W===Zh(ke)?xm(_,B,W,Sd,K):_p(_,D,ke,Zh(ke),K,J-1)})})},xm=function(_,D,B,W,K){return mr(_,D,B).bind(function(J){return _m(_,K,W(J,lu.getJumpSize()))})},_m=function(_,D,B){var W=$t().browser;return W.isChrome()||W.isSafari()||W.isFirefox()||W.isEdge()?D.otherRetry(_,B):W.isIE()?D.ieRetry(_,B):je.none()},Mh=function(_,D,B,W,K){return mr(_,B,W).bind(function(J){return _m(_,K,J)})},Th={traverse:Zs,gather:zb,relative:za.before,otherRetry:lu.tryDown,ieRetry:lu.ieTryDown,failure:qv.failedDown},sf={traverse:ui,gather:Hv,relative:za.before,otherRetry:lu.tryUp,ieRetry:lu.ieTryUp,failure:qv.failedUp},xy=Ch(38),Za=Ch(40),Xv={isBackward:Ch(37),isForward:Ch(39)},Yv={isBackward:Ch(39),isForward:Ch(37)},Zv=tinymce.util.Tools.resolve("tinymce.Env");ge.add("table",function(_){var D,B,W,K,J,se,fe,we,ke,Le,Fe,Re,tt=(D=function(){return Xa(_)},B=function(){return om(ld(_),pc(_))},W=Yu.selectedSelector,{get:function(){return j(D(),W).fold(function(){return B().fold($,ae)},function(Ke){return te(Ke)})}}),He=function(_,D){function B(Ue){return tt.forall(function(st){return!st[Ue]})}function W(){return rm(ld(_),pc(_)).bind(function(Ue){return rd(li(Ue),rm(rt.fromDom(_.selection.getEnd()),pc(_)).bind(li),function(st,Wt){return Vn(st,Wt)?He(Ue)?je.some({element:Ke=Ue,mergable:je.none(),unmergable:je.none(),selection:[Ke]}):je.some(ah(D,st,Ue)):je.none();var Ke}).bind(En)})}function K(Ue){return li(Ue.element).map(function(st){var Wt=Zr.fromTable(st),Ke=ro(bu(Wt,Ue).getOr([]),function(Gt,yt){return yt.isLocked&&(Gt.onAny=!0,0===yt.column?Gt.onFirst=!0:yt.column+yt.colspan>=Wt.grid.columns&&(Gt.onLast=!0)),Gt},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:$0(Wt,Ue).isSome(),unmergeable:Sb(Wt,Ue).isSome(),locked:Ke}})}function J(){Fe.set(ds(W)()),tt=Fe.get().bind(K),me(Re.get(),function(Ue){return Ue()})}function se(Ue){return Ue(),Re.set(Re.get().concat([Ue])),function(){Re.set(Pr(Re.get(),function(st){return st!==Ue}))}}function fe(Ue,st){return se(function(){return Fe.get().fold(function(){Ue.setDisabled(!0)},function(Wt){Ue.setDisabled(st(Wt))})})}function we(Ue,st,Wt){return se(function(){return Fe.get().fold(function(){Ue.setDisabled(!0),Ue.setActive(!1)},function(Ke){Ue.setDisabled(st(Ke)),Ue.setActive(Wt(Ke))})})}function ke(Ue){return tt.exists(function(st){return st.locked[Ue]})}function Le(Ue,st){return function(Wt){return we(Wt,function(Ke){return He(Ke.element)},function(){return _.queryCommandValue(Ue)===st})}}var Fe=Su(je.none()),Re=Su([]),tt=je.none(),He=Uo("caption"),at=Le("mceTableRowType","header"),vt=Le("mceTableColType","th");return _.on("NodeChange ExecCommand TableSelectorChange",J),{onSetupTable:function(Ue){return fe(Ue,function(st){return!1})},onSetupCellOrRow:function(Ue){return fe(Ue,function(st){return He(st.element)})},onSetupColumn:function(Ue){return function(st){return fe(st,function(Wt){return He(Wt.element)||ke(Ue)})}},onSetupPasteable:function(Ue){return function(st){return fe(st,function(Wt){return He(Wt.element)||Ue().isNone()})}},onSetupPasteableColumn:function(Ue,st){return function(Wt){return fe(Wt,function(Ke){return He(Ke.element)||Ue().isNone()||ke(st)})}},onSetupMergeable:function(Ue){return fe(Ue,function(st){return B("mergeable")})},onSetupUnmergeable:function(Ue){return fe(Ue,function(st){return B("unmergeable")})},resetTargets:J,onSetupTableWithCaption:function(Ue){return we(Ue,un,function(st){return li(st.element,pc(_)).exists(function(Wt){return td(Wt,"caption").isSome()})})},onSetupTableRowHeaders:at,onSetupTableColumnHeaders:vt,targets:Fe.get}}(_,tt),at=function(_){function D(ke){return"TABLE"===ke.nodeName}function B(ke){return Km(_,ke)}function W(){return($d(_)?Zm:Jh)()}var K,J,se=je.none(),fe=je.none(),we=je.none();return _.on("init",function(){var ke,Le,Fe,Re,tt,He,at,vt,Ue,st,Wt,Ke,Gt,yt,Bn=(Le=Tf,(ke=_).inline?(He=Xa(ke),Fd(vt=rt.fromTag("div"),{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),qr(Pc(rt.fromDom(document)),vt),at=Le,{parent:ht(vt),view:ht(He),origin:ht(Xt(0,0)),isResizable:at}):ny(rt.fromDom(ke.getDoc()),Le));we=je.some(Bn),tt=_.getParam("object_resizing",!0),(Ut(tt)?"table"===tt:tt)&&_.getParam("table_resize_bars",!0,"boolean")&&(Fe=W(),Ue=Fe,st=B,Wt=On,Ke=$r,Gt=function(_){function D(Ue,st){return je.from(Ei(Ue,st))}var B,W,K,J,se,fe,we=(J=ta({drag:va(["xDelta","yDelta","target"])}),se=je.none(),(fe={mutate:function(Ue,st){K.trigger.drag(Ue,st)},events:(K=ta({drag:va(["xDelta","yDelta"])})).registry}).events.drag.bind(function(Ue){se.each(function(st){J.trigger.drag(Ue.xDelta,Ue.yDelta,st)})}),{assign:function(Ue){se=je.some(Ue)},get:function(){return se},mutate:fe.mutate,events:J.registry}),ke=(W=void 0!==(B={}).mode?B.mode:X_,function(Ue,st,Wt){function Ke(){io.stop(),qn.isOn()&&(qn.off(),Yt.trigger.stop())}var Gt,yt,Bn=!1,Yt=ta({start:va([]),stop:va([])}),qn=function(){var _,D,B={onEvent:Zn,reset:Zn,events:ta({move:va(["info"])}).registry},W=(_=je.none(),{onEvent:function(J,se){se.extract(J).each(function(fe){var we=se,ke=fe,Le=_.map(function(Fe){return we.compare(Fe,ke)});_=je.some(ke),Le.each(function(Fe){D.trigger.move(Fe)})})},reset:function(){_=je.none()},events:(D=ta({move:va(["info"])})).registry}),K=B;return{on:function(){K.reset(),K=W},off:function(){K.reset(),K=B},isOn:function(){return K===W},onEvent:function(J,se){K.onEvent(J,se)},events:W.events}}(),Fr=(Gt=Ke,yt=null,{cancel:fr,throttle:function(){for(var Br=[],to=0;to<arguments.length;to++)Br[to]=arguments[to];fr(),yt=setTimeout(function(){yt=null,Gt.apply(null,Br)},200)}});function fr(){Zt(yt)||(clearTimeout(yt),yt=null)}function Vr(Br){return function(){for(var to=[],zn=0;zn<arguments.length;zn++)to[zn]=arguments[zn];Bn&&Br.apply(null,to)}}qn.events.move.bind(function(Br){st.mutate(Ue,Br.info)});var io=st.sink(c1({forceDrop:Ke,drop:Vr(Ke),move:Vr(function(Br){Fr.cancel(),qn.onEvent(Br,st)}),delayDrop:Vr(Fr.throttle)}),Wt);return{element:io.element,go:function(Br){io.start(Br),qn.on(),Yt.trigger.start()},on:function(){Bn=!0},off:function(){Bn=!1},destroy:function(){io.destroy()},events:Yt.registry}}(we,W,B)),Le=je.none();function Fe(Ue,st){return nl(Ue,st)-_l(Ue,"data-initial-"+st,0)}function Re(Ue,st){vt.trigger.startAdjust(),we.assign(Ue),ma(Ue,"data-initial-"+st,nl(Ue,st)),wf(Ue,Ab),pi(Ue,"opacity","0.2"),ke.go(_.parent())}function tt(Ue){return Vn(Ue,_.view())}we.events.drag.bind(function(Ue){D(Ue.target,"data-row").each(function(st){var Wt=nl(Ue.target,"top");pi(Ue.target,"top",Wt+Ue.yDelta+"px")}),D(Ue.target,"data-column").each(function(st){var Wt=nl(Ue.target,"left");pi(Ue.target,"left",Wt+Ue.xDelta+"px")})}),ke.events.stop.bind(function(){we.get().each(function(Ue){Le.each(function(st){D(Ue,"data-row").each(function(Wt){var Ke=Fe(Ue,"top");Ji(Ue,"data-initial-top"),vt.trigger.adjustHeight(st,Ke,parseInt(Wt,10))}),D(Ue,"data-column").each(function(Wt){var Ke=Fe(Ue,"left");Ji(Ue,"data-initial-left"),vt.trigger.adjustWidth(st,Ke,parseInt(Wt,10))}),Ml(_,st)})})});var He=$l(_.parent(),"mousedown",function(Ue){Sf(Ue.target,Mv)&&Re(Ue.target,"top"),Sf(Ue.target,Nf)&&Re(Ue.target,"left")}),at=$l(_.view(),"mouseover",function(Ue){Ss(Ue.target,"table",tt).filter(tu).fold(function(){wr(Ue.target)&&Yd(_)},function(st){Le=je.some(st),Ml(_,st)})}),vt=ta({adjustHeight:va(["table","delta","row"]),adjustWidth:va(["table","delta","column"]),startAdjust:va([])});return{destroy:function(){He.unbind(),at.unbind(),ke.destroy(),Yd(_)},refresh:function(Ue){Ml(_,Ue)},on:ke.on,off:ke.off,hideBars:Sn(uh,_),showBars:Sn(ca,_),events:vt.registry}}(Bn),yt=ta({beforeResize:va(["table","type"]),afterResize:va(["table","type"]),startDrag:va([])}),Gt.events.adjustHeight.bind(function(Yt){var qn=Yt.table;yt.trigger.beforeResize(qn,"row");var Fr,fr,Vr,io,Br,to,zn,Ri,Xr,Ci=Wt.delta(Yt.delta,qn);fr=Ci,Vr=Yt.row,io=Wt,Ri=Dn(Ud(zn=Zr.fromTable(Fr=qn),Fr,io,Ot,function(So){return So.getOrThunk(In)}),function(So,Do){return Vr===Do?Math.max(fr+So,In()):So}),Br=Ri,Xr=Dn(Zr.justCells(zn),function(So){var Do=la(So.row,So.row+So.rowspan,Br);return{element:So.element,height:Do,rowspan:So.rowspan}}),me((to=Ri,Dn(zn.all,function(So,Do){return{element:So.element,height:to[Do]}})),function(So){gn(So.element,So.height)}),me(Xr,function(So){gn(So.element,So.height)}),gn(Fr,_r(Ri,function(So,Do){return So+Do},0)),yt.trigger.afterResize(qn,"row")}),Gt.events.startAdjust.bind(function(Yt){yt.trigger.startDrag()}),Gt.events.adjustWidth.bind(function(Yt){var qn=Yt.table;yt.trigger.beforeResize(qn,"col");var Fr=Ke.delta(Yt.delta,qn),fr=st(qn);Da(qn,Fr,Yt.column,Ue,fr),yt.trigger.afterResize(qn,"col")}),(Re={on:Gt.on,off:Gt.off,hideBars:Gt.hideBars,showBars:Gt.showBars,destroy:Gt.destroy,events:yt.registry}).on(),Re.events.startDrag.bind(function(Yt){se=je.some(_.selection.getRng())}),Re.events.beforeResize.bind(function(Yt){var qn,Fr=Yt.table.dom,fr=_,Vr=Zl(qn=Fr),io=cv(Fr);fr.fire("ObjectResizeStart",{target:qn,width:Vr,height:io,origin:Zu+Yt.type})}),Re.events.afterResize.bind(function(Yt){var qn,Fr,fr,Vr,Br=Yt.table,to=Br.dom;$h(Br),se.each(function(zn){_.selection.setRng(zn),_.focus()}),qn=_,fr=Zl(Fr=to),Vr=cv(to),qn.fire("ObjectResized",{target:Fr,width:fr,height:Vr,origin:Zu+Yt.type}),_.undoManager.add()}),fe=je.some(Re))}),_.on("ObjectResizeStart",function(ke){var Le,Fe,Re,tt,He=ke.target;D(He)&&(Le=rt.fromDom(He),me(_.dom.select(".mce-clonedresizable"),function(at){_.dom.addClass(at,"mce-"+Zd(_)+"-columns")}),!xv(Le)&&fp(_)?Tv(Le):!bv(Le)&&nu(_)&&Go(Le),ph(Le)&&ot(ke.origin,Zu)&&Go(Le),K=ke.width,J=lg(_)?"":(tt=(Fe=_).dom.getStyle(Re=He,"width")||Fe.dom.getAttrib(Re,"width"),je.from(tt).filter(Pt).getOr("")))}),_.on("ObjectResized",function(ke){var Le,Fe,Re,tt,He,at,vt,Ue,st,Wt,Ke=ke.target;D(Ke)&&(Le=rt.fromDom(Ke),ot(Fe=ke.origin,"corner-")&&(Re=Le,tt=ke.width,Wt=dt(Fe,"e"),""===J&&Go(Re),tt!==K&&""!==J?(pi(Re,"width",J),He=W(),at=B(Re),vt=$d(_)||Wt?ll(Re).columns-1:0,Da(Re,tt-K,vt,He,at)):/^(\d+(\.\d+)?)%$/.test(J)&&pi(Re,"width",tt*parseFloat(J.replace("%",""))/K+"%"),/^(\d+(\.\d+)?)px$/.test(J)&&(st=Zr.fromTable(Ue=Re),Zr.hasColumns(st)||me(wl(Ue),function(Gt){pi(Gt,"width",Ui(Gt,"width")),Ji(Gt,"width")}))),$h(Le),cl(_,Le.dom,Lf))}),_.on("SwitchMode",function(){fe.each(function(ke){_.mode.isReadOnly()?ke.hideBars():ke.showBars()})}),{lazyResize:function(){return fe},lazyWire:function(){return we.getOr(ny(rt.fromDom(_.getBody()),Tf))},destroy:function(){fe.each(function(ke){ke.destroy()}),we.each(function(ke){_.inline&&ns(ke.parent())})}}}(_),vt=function(_,D,B){var W=function(_,D,B){function W(fe){Ji(fe,_.selected),Ji(fe,_.firstSelected),Ji(fe,_.lastSelected)}function K(fe){ma(fe,_.selected,"1")}function J(fe){se(fe),B()}function se(fe){me($i(fe,_.selectedSelector+","+_.firstSelectedSelector+","+_.lastSelectedSelector),W)}return{clearBeforeUpdate:se,clear:J,selectRange:function(fe,we,ke,Le){J(fe),me(we,K),ma(ke,_.firstSelected,"1"),ma(Le,_.lastSelected,"1"),D(we,ke,Le)},selectedSelector:_.selectedSelector,firstSelectedSelector:_.firstSelectedSelector,lastSelectedSelector:_.lastSelectedSelector}}(Yu,function(K,J,se){B.targets().each(function(fe){li(J).each(function(we){var ke,Le,Fe,Re=eg(_),tt=Ai(Zn,rt.fromDom(_.getDoc()),Re),He=(ke=fe,Le=tt,bu(Fe=Zr.fromTable(we),ke).map(function(at){var vt,Ue,st=pd(Fe,Le,!1);return{upOrLeftCells:Mt(zs(st.slice(0,(vt=at)[vt.length-1].row+1)),function(Wt){return Dn(Wt.cells.slice(0,vt[vt.length-1].column+1),function(Ke){return Ke.element})}),downOrRightCells:Mt(zs(st.slice((Ue=at)[0].row+Ue[0].rowspan-1,st.length)),function(Wt){return Dn(Wt.cells.slice(Ue[0].column+Ue[0].colspan-1,Wt.cells.length),function(Ke){return Ke.element})})}}));_.fire("TableSelectionChange",{cells:K,start:J,finish:se,otherCells:He})})})},function(){_.fire("TableSelectionClear")});return _.on("init",function(K){var J,se,fe,we,ke,Le,Fe,Re,tt,He,at,vt,Ue,st,Wt,Ke,Gt=_.getWin(),yt=Xa(_),Bn=pc(_),Yt=(J=my(Gt),{clearstate:(at=J,vt=yt,Ue=Bn,st=W,Wt=ya(),(se={clearstate:Ke=Wt.clear,mousedown:function(Xr){st.clear(vt),jv(Xr.target,Ue).each(Wt.set)},mouseover:function(Xr){Vr(Xr)},mouseup:function(Xr){Vr(Xr),Ke()}}).clearstate),mousedown:se.mousedown,mouseover:se.mouseover,mouseup:se.mouseup}),qn=(He=my(Gt),{keydown:function(Xr,Ci,So,Do,na,ra){var fa=Xr.raw,jr=fa.which,Yc=!0===fa.shiftKey;return Gd(Fe,tt.selectedSelector).fold(function(){return gy(jr)&&!Yc&&tt.clearBeforeUpdate(Fe),Za(jr)&&Yc?Sn(Vb,He,Fe,Re,Th,Do,Ci,tt.selectRange):xy(jr)&&Yc?Sn(Vb,He,Fe,Re,sf,Do,Ci,tt.selectRange):Za(jr)?Sn(bm,He,Re,Th,Do,Ci,Gv):xy(jr)?Sn(bm,He,Re,sf,Do,Ci,rc):je.none},function(oa){function Ti(bg){return function(){return pe(bg,function(uf){return Dh=Fe,function(_,D,B,W,K){return J=K,Nn(_,function(se){return hn(se,J)}).bind(function(se){return we=D,ke=B,li(fe=se).bind(function(Le){var Fe=mu(Le),Re=we,tt=ke;return Zr.findItem(Fe,fe,Vn).bind(function(He){return Zr.getAt(Fe,(0<Re?He.row+He.rowspan-1:He.row)+Re,(0<tt?He.column+He.colspan-1:He.column)+tt).map(function(Ue){return Ue.element})})}).bind(function(Le){return Re=W,Oi(Fe=Le,"table").bind(function(tt){return Wl(tt,Re).bind(function(He){return ms(He,Fe).bind(function(at){return at.boxes.map(function(vt){return{boxes:vt,start:at.start,finish:at.finish}})})})});var Fe,Re});var fe,we,ke});var J}(oa,uf.rows,uf.cols,(Is=tt).firstSelectedSelector,Is.lastSelectedSelector).map(function(lf){return Is.clearBeforeUpdate(Dh),Is.selectRange(Dh,lf.boxes,lf.start,lf.finish),lf.boxes});var Dh,Is}).fold(function(){return Xl(Fe,tt.firstSelectedSelector,tt.lastSelectedSelector).map(function(uf){var Au=Za(jr)||ra.isForward(jr)?za.after:za.before;return He.setRelativeSelection(za.on(uf.first,0),Au(uf.table)),tt.clear(Fe),vg(je.none(),!0)})},function(uf){return je.some(vg(je.none(),!0))})}}return Za(jr)&&Yc?Ti([vp(1,0)]):xy(jr)&&Yc?Ti([vp(-1,0)]):ra.isBackward(jr)&&Yc?Ti([vp(0,-1),vp(-1,0)]):ra.isForward(jr)&&Yc?Ti([vp(0,1),vp(1,0)]):gy(jr)&&!Yc?fr:je.none})()},keyup:function(Xr,Ci,So,Do,na){return Gd(Fe,tt.selectedSelector).fold(function(){var ra,fa,jr,Yc,oa,Ti=Xr.raw;return!0===Ti.shiftKey&&gy(Ti.which)?(ra=Fe,fa=Re,oa=tt.selectRange,Vn(jr=Ci,Yc=Do)&&So===na?je.none():Ss(jr,"td,th",fa).bind(function(uf){return Ss(Yc,"td,th",fa).bind(function(Au){return m1(ra,fa,uf,Au,oa)})})):je.none()},je.none)}}),Fr=(fe=Fe=yt,we=Re=Bn,ke=tt=W,Le=my(Gt),function(Xr,Ci){ke.clearBeforeUpdate(fe),ms(Xr,Ci,we).each(function(So){var Do=So.boxes.getOr([]);ke.selectRange(fe,Do,So.start,So.finish),Le.selectContents(Ci),Le.collapseSelection()})});function fr(){return tt.clear(Fe),je.none()}function Vr(Xr){Wt.on(function(Ci){st.clearBeforeUpdate(vt),jv(Xr.target,Ue).each(function(So){ms(Ci,So,Ue).each(function(Do){var na,ra,fa,jr=Do.boxes.getOr([]);1===jr.length?(ra="false"===su(na=jr[0]),fa=es(Bs(Xr.target),na,Vn),ra&&fa&&(st.selectRange(vt,jr,na,na),at.selectContents(na))):1<jr.length&&(st.selectRange(vt,jr,Do.start,Do.finish),at.selectContents(So))})})})}function io(Xr,Ci){!0===Xr.raw.shiftKey&&(Ci.kill&&Xr.kill(),Ci.selection.each(function(So){var Do=Tu.relative(So.start,So.finish),na=$o(Gt,Do);_.selection.setRng(na)}))}function Br(Xr){return 0===Xr.button}_.on("TableSelectorChange",function(Xr){return Fr(Xr.start,Xr.finish)});var to,zn,Ri=(to=Su(rt.fromDom(yt)),zn=Su(0),{touchEnd:function(Xr){var Ci,So,Do=rt.fromDom(Xr.target);"td"!==dr(Do)&&"th"!==dr(Do)||(Ci=to.get(),So=zn.get(),Vn(Ci,Do)&&Xr.timeStamp-So<300&&(Xr.preventDefault(),Fr(Do,Do))),to.set(Do),zn.set(Xr.timeStamp)}});_.on("dragstart",function(Xr){Yt.clearstate()}),_.on("mousedown",function(Xr){Br(Xr)&&Hb(Xr)&&Yt.mousedown(Hc(Xr))}),_.on("mouseover",function(Xr){var Ci;(void 0===(Ci=Xr).buttons||Zv.browser.isEdge()&&0===Ci.buttons||0!=(1&Ci.buttons))&&Hb(Xr)&&Yt.mouseover(Hc(Xr))}),_.on("mouseup",function(Xr){Br(Xr)&&Hb(Xr)&&Yt.mouseup(Hc(Xr))}),_.on("touchend",Ri.touchEnd),_.on("keyup",function(Xr){var Ci,So,Do,na=Hc(Xr);na.raw.shiftKey&&gy(na.raw.which)&&(Ci=_.selection.getRng(),So=rt.fromDom(Ci.startContainer),Do=rt.fromDom(Ci.endContainer),qn.keyup(na,So,Ci.startOffset,Do,Ci.endOffset).each(function(ra){io(na,ra)}))}),_.on("keydown",function(Xr){var Ci=Hc(Xr);D().each(function(fa){return fa.hideBars()});var So=_.selection.getRng(),Do=rt.fromDom(So.startContainer),na=rt.fromDom(So.endContainer),ra=Si(Xv,Yv)(rt.fromDom(_.selection.getStart()));qn.keydown(Ci,Do,So.startOffset,na,So.endOffset,ra).each(function(fa){io(Ci,fa)}),D().each(function(fa){return fa.showBars()})}),_.on("NodeChange",function(){var Xr=_.selection;ql(li,[rt.fromDom(Xr.getStart()),rt.fromDom(Xr.getEnd())]).fold(function(){return W.clear(yt)},Zn)})}),{clear:W.clear}}(_,at.lazyResize,He),Ue=function(_,D,B){function W(fe){return"table"===dr(Xa(fe))}function K(fe,we,ke,Le,Fe){return function(Re,tt,He){void 0===He&&(He=!1),$h(Re);var at=Le(),vt=rt.fromDom(_.getDoc()),Ue=Ai(ke,vt,J),st={sizing:Km(_,Re),resize:(_b(_)?Jh:Zm)(),section:function(Wt){switch(_o(_)){case"section":return dg();case"sectionCells":return Av();case"cells":return Ob();default:return function(Ke,Gt){switch(pe(Zr.fromTable(Ke).all,function(Bn){var Yt=i1(Bn);return"header"===Yt.type?je.from(Yt.subType):je.none()}).getOr("section")){case"section":return md();case"sectionCells":return Z0();case"cells":return Uu()}}(Wt)}}(Re)};return we(Re)?fe(at,Re,tt,Ue,st).bind(function(Wt){me(Wt.newRows,function(yt){lh(_,yt.dom)}),me(Wt.newCells,function(yt){qg(_,yt.dom)});var Ke,Gt=(Ke=Re,Wt.cursor.fold(function(){return Ao(wl(Ke)).filter(wr).map(function(yt){D.clear(Ke);var Bn=_.dom.createRng();return Bn.selectNode(yt.dom),_.selection.setRng(Bn),ma(yt,"data-mce-selected","1"),Bn})},function(yt){var Bn=cg(_h,yt),Yt=_.dom.createRng();return Yt.setStart(Bn.element.dom,Bn.offset),Yt.setEnd(Bn.element.dom,Bn.offset),_.selection.setRng(Yt),D.clear(Ke),je.some(Yt)}));return wr(Re)&&($h(Re),He||cl(_,Re.dom,Fe)),Gt.map(function(yt){return{rng:yt,effect:Fe}})}):je.none()}}var J=eg(_),se=_b(_)?Zn:Ts;return{deleteRow:K(uy,function(fe){return!1===W(_)||1<ll(fe).rows},Zn,B,No),deleteColumn:K(hp,function(fe){return!1===W(_)||1<ll(fe).columns},Zn,B,No),insertRowsBefore:K(gg,Qn,Zn,B,No),insertRowsAfter:K(Gc,Qn,Zn,B,No),insertColumnsBefore:K(Iv,Qn,se,B,No),insertColumnsAfter:K(sy,Qn,se,B,No),mergeCells:K(d1,Qn,Zn,B,No),unmergeCells:K(_d,Qn,Zn,B,No),pasteColsBefore:K(cy,Qn,Zn,B,No),pasteColsAfter:K(dy,Qn,Zn,B,No),pasteRowsBefore:K($u,Qn,Zn,B,No),pasteRowsAfter:K(Mu,Qn,Zn,B,No),pasteCells:K(Ev,Qn,Zn,B,lp),makeCellsHeader:K(Pb,Qn,Zn,B,No),unmakeCellsHeader:K(ly,Qn,Zn,B,No),makeColumnsHeader:K(ku,Qn,Zn,B,No),unmakeColumnsHeader:K(Ov,Qn,Zn,B,No),makeRowsHeader:K(gl,Qn,Zn,B,No),makeRowsBody:K(fo,Qn,Zn,B,No),makeRowsFooter:K(da,Qn,Zn,B,No),getTableRowType:hi,getTableCellType:op,getTableColType:pv}}(_,vt,at.lazyWire),st=(K=ya(),J=ya(),{getRows:K.get,setRows:function(Ke){Ke.fold(K.clear,K.set),J.clear()},clearRows:K.clear,getColumns:J.get,setColumns:function(Ke){Ke.fold(J.clear,J.set),K.clear()},clearColumns:J.clear});return function(_,D,B,W,K){function J(He){return li(He,tt)}function se(He){return om(ld(at=_),pc(at)).bind(function(vt){return J(vt).map(function(Ue){return He(Ue,vt)})});var at}function fe(He){_.focus()}function we(He,at){return void 0===at&&(at=!1),se(function(vt,Ue){var st=ah(W,vt,Ue);He(vt,st,at).each(fe)})}function ke(){return se(function(He,at){var vt,Ue,st,Wt=ah(W,He,at),Ke=Ai(Zn,rt.fromDom(_.getDoc()),je.none());return vt=Wt,Ue=Ke,bu(st=Zr.fromTable(He),vt).bind(function(Gt){var yt=zs(Mt(ts(pd(st,Ue,!1)).rows.slice(Gt[0].row,Gt[Gt.length-1].row+Gt[Gt.length-1].rowspan),function(Bn){var Yt=Pr(Bn.cells,function(qn){return!qn.isLocked});return 0<Yt.length?[sr(sr({},Bn),{cells:Yt})]:[]}));return gu(0<yt.length,yt)}).map(function(Gt){return Dn(Gt,function(yt){var Bn=ps(yt.element);return me(yt.cells,function(Yt){var qn=Nc(Yt.element);Qr(qn,"colspan",Yt.colspan,1),Qr(qn,"rowspan",Yt.rowspan,1),qr(Bn,qn)}),Bn})})})}function Le(){return se(function(He,at){var vt,Ue;return vt=ah(W,He,at),ch(Ue=Zr.fromTable(He),vt).map(function(Wt){var Ke,Gt,yt=Wt[Wt.length-1],Bn=Wt[0].column,Yt=yt.column+yt.colspan,qn=function(fr,Vr,io){if(Zr.hasColumns(fr)){var Br=Dn(Pr(Zr.justColumns(fr),function(zn){return zn.column>=Vr&&zn.column<io}),function(zn){var Ri=Nc(zn.element);return mh(Ri,"span",io-Vr),Ri}),to=rt.fromTag("colgroup");return pn(to,Br),[to]}return[]}(Ue,Bn,Yt),Fr=(Ke=Bn,Gt=Yt,Dn(Ue.all,function(fr){var Vr=Dn(Pr(fr.cells,function(Br){return Br.column>=Ke&&Br.column<Gt}),function(Br){var to=Nc(Br.element);return mh(to,"colspan",Gt-Ke),to}),io=rt.fromTag("tr");return pn(io,Vr),io}));return zi(zi([],qn,!0),Fr,!0)})})}function Fe(He,at){return at().each(function(vt){var Ue=Dn(vt,Nc);se(function(st,Wt){var Ke,Gt,yt=La(rt.fromDom(_.getDoc())),Bn=(Ke=Ue,Gt=yt,{selection:sl(W),clipboard:Ke,generators:Gt});He(st,Bn).each(fe)})})}function Re(He){return function(at,vt){return aa(vt,"type").each(function(Ue){we(He(Ue),vt.no_events)})}}var tt=pc(_);si({mceTableSplitCells:function(){return we(D.unmergeCells)},mceTableMergeCells:function(){return we(D.mergeCells)},mceTableInsertRowBefore:function(){return we(D.insertRowsBefore)},mceTableInsertRowAfter:function(){return we(D.insertRowsAfter)},mceTableInsertColBefore:function(){return we(D.insertColumnsBefore)},mceTableInsertColAfter:function(){return we(D.insertColumnsAfter)},mceTableDeleteCol:function(){return we(D.deleteColumn)},mceTableDeleteRow:function(){return we(D.deleteRow)},mceTableCutCol:function(){return Le().each(function(He){K.setColumns(He),we(D.deleteColumn)})},mceTableCutRow:function(){return ke().each(function(He){K.setRows(He),we(D.deleteRow)})},mceTableCopyCol:function(){return Le().each(function(He){return K.setColumns(He)})},mceTableCopyRow:function(){return ke().each(function(He){return K.setRows(He)})},mceTablePasteColBefore:function(){return Fe(D.pasteColsBefore,K.getColumns)},mceTablePasteColAfter:function(){return Fe(D.pasteColsAfter,K.getColumns)},mceTablePasteRowBefore:function(){return Fe(D.pasteRowsBefore,K.getRows)},mceTablePasteRowAfter:function(){return Fe(D.pasteRowsAfter,K.getRows)},mceTableDelete:function(){return ag(_).each(function(He){li(He,tt).filter(xr(tt)).each(function(at){var vt,Ue=rt.fromText("");Hi(at,Ue),ns(at),_.dom.isEmpty(_.getBody())?(_.setContent(""),_.selection.setCursorLocation()):((vt=_.dom.createRng()).setStart(Ue.dom,0),vt.setEnd(Ue.dom,0),_.selection.setRng(vt),_.nodeChanged())})})},mceTableCellToggleClass:function(He,at){se(function(vt){var Ue=im(W),st=tr(Ue,function(Wt){return _.formatter.match("tablecellclass",{value:at},Wt.dom)})?_.formatter.remove:_.formatter.apply;me(Ue,function(Wt){return st("tablecellclass",{value:at},Wt.dom)}),cl(_,vt.dom,Lf)})},mceTableToggleClass:function(He,at){se(function(vt){_.formatter.toggle("tableclass",{value:at},vt.dom),cl(_,vt.dom,Lf)})},mceTableToggleCaption:function(){ag(_).each(function(He){li(He,tt).each(function(at){td(at,"caption").fold(function(){var vt,Ue,st=rt.fromTag("caption");qr(st,rt.fromText("Caption")),Ue=st,Eu(vt=at,0).fold(function(){qr(vt,Ue)},function(Wt){Ms(Wt,Ue)}),_.selection.setCursorLocation(st.dom,0)},function(vt){Uo("caption")(He)&&Lr("td",at).each(function(Ue){return _.selection.setCursorLocation(Ue.dom,0)}),ns(vt)}),cl(_,at.dom,No)})})},mceTableSizingMode:function(He,at){return vt=at,ag(_).each(function(Ue){lg(_)||fp(_)||nu(_)||li(Ue,tt).each(function(st){"relative"!==vt||bv(st)?"fixed"!==vt||xv(st)?"responsive"!==vt||ph(st)||ay(st):Tv(st):Go(st),$h(st),cl(_,st.dom,No)})});var vt},mceTableCellType:Re(function(He){return"th"===He?D.makeCellsHeader:D.unmakeCellsHeader}),mceTableColType:Re(function(He){return"th"===He?D.makeColumnsHeader:D.unmakeColumnsHeader}),mceTableRowType:Re(function(He){switch(He){case"header":return D.makeRowsHeader;case"footer":return D.makeRowsFooter;default:return D.makeRowsBody}})},function(He,at){return _.addCommand(at,He)}),si({mceTableProps:Sn(ig,_,!1),mceTableRowProps:Sn(Q0,_),mceTableCellProps:Sn(Ws,_,W)},function(He,at){return _.addCommand(at,function(){return He()})}),_.addCommand("mceInsertTable",function(He,at){Jn(at)&&0<yr(at).length?Kg(_,at.rows,at.columns,at.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):ig(_,!0)}),_.addCommand("mceTableApplyCellStyle",function(He,at){function vt(Wt){return"tablecell"+Wt.toLowerCase().replace("-","")}var Ue,st;!Jn(at)||0!==(Ue=im(W)).length&&(function(Wt){for(var Ke in Wt)if(cr.call(Wt,Ke))return;return 1}(st=lo(at,function(Wt,Ke){return _.formatter.has(vt(Ke))&&Ut(Wt)}))||(si(st,function(Wt,Ke){me(Ue,function(Gt){eo.normal(_,Gt.dom).setFormat(vt(Ke),Wt)})}),J(Ue[0]).each(function(Wt){return cl(_,Wt.dom,Lf)})))})}(_,Ue,0,tt,st),Le=Ue,Fe=tt,Re=pc(ke=_),si({mceTableRowType:function(){return Wt(Le.getTableRowType)},mceTableCellType:function(){return Wt(Le.getTableCellType)},mceTableColType:function(){return Wt(Le.getTableColType)}},function(Ke,Gt){return ke.addQueryValueHandler(Gt,Ke)}),function(_,D,B){_.on("BeforeGetContent",function(W){!0===W.selection&&Fu(D.get(),Zn,function(K){W.preventDefault(),li(K[0]).map(function(J){var se=function(_,D){function B(Gt){return hn(Gt.element,D)}var W,J,se,fe,we,ke,Le,Fe,Re,tt,He,at=Nc(_),vt=vf(at),Ue=wv(_),st=Zr.generate(vt),Wt=(W=B,J=st.grid.rows,se=st.grid.columns,we=fe=0,ke=[],Le=[],si(st.access,function(Gt){var yt,Bn,Yt,qn;ke.push(Gt),W(Gt)&&(Le.push(Gt),Bn=(yt=Gt.row)+Gt.rowspan-1,qn=(Yt=Gt.column)+Gt.colspan-1,yt<J?J=yt:fe<Bn&&(fe=Bn),Yt<se?se=Yt:we<qn&&(we=qn))}),{minRow:J,minCol:se,maxRow:fe,maxCol:we,allCells:ke,selectedCells:Le});return me(ol(at,"th,td",function(Gt){return hn(Gt,"th:not([data-mce-selected]),td:not([data-mce-selected])")}),ns),function(Gt,yt,Bn,Yt){for(var qn,Fr,fr,Vr=yt.grid.columns,io=yt.grid.rows,Br=0;Br<io;Br++)for(var to=!1,zn=0;zn<Vr;zn++)Br<Bn.minRow||Br>Bn.maxRow||zn<Bn.minCol||zn>Bn.maxCol||(Zr.getAt(yt,Br,zn).filter(Yt).isNone()?(qn=to,Fr=Gt[Br].element,fr=rt.fromTag("td"),qr(fr,rt.fromTag("br")),(qn?qr:ja)(Fr,fr)):to=!0)}(vt,st,Wt,B),Fe=at,Re=Wt,tt=st,He=function(Gt,yt,Bn,Yt){if(0===Yt.minCol&&yt.grid.columns===Yt.maxCol+1)return 0;var qn=Yh(yt,Gt,Bn),Fr=ro(qn,function(Vr,io){return Vr+io},0),fr=ro(qn.slice(Yt.minCol,Yt.maxCol+1),function(Vr,io){return Vr+io},0)/Fr*Bn.pixelWidth()-Bn.pixelWidth();return Bn.getCellDelta(fr)}(_,Zr.fromTable(_),Ue,Wt),si(tt.columns,function(Gt){(Gt.column<Re.minCol||Gt.column>Re.maxCol)&&ns(Gt.element)}),me(Pr(Gh(Fe,"tr"),function(Gt){return 0===Gt.dom.childElementCount}),ns),Re.minCol!==Re.maxCol&&Re.minRow!==Re.maxRow||me(Gh(Fe,"th,td"),function(Gt){Ji(Gt,"rowspan"),Ji(Gt,"colspan")}),Ji(Fe,_i),Ji(Fe,"data-snooker-col-series"),wv(Fe).adjustTableWidth(He),at}(J,"[data-mce-selected]");return $h(se),[se]}).each(function(J){var se;W.content="text"===W.format?Dn(J,function(fe){return fe.dom.innerText}).join(""):(se=_,Dn(J,function(fe){return se.selection.serializer.serialize(fe.dom,{})}).join(""))})},Zn)}),_.on("BeforeSetContent",function(W){!0===W.selection&&!0===W.paste&&Ao(im(D)).each(function(K){li(K).each(function(J){var se,fe,we,Le=Pr((se=W.content,(fe=document.createElement("div")).innerHTML=se,Mo(rt.fromDom(fe))),function(Re){return"meta"!==dr(Re)}),Fe=Uo("table");1===Le.length&&Fe(Le[0])&&(W.preventDefault(),we=La(rt.fromDom(_.getDoc())),B.pasteCells(J,{element:K,clipboard:Le[0],generators:we}).each(function(){_.focus()}))})})})}(_,tt,Ue),function(Ke,Gt,yt,Bn){function Yt(Ri){return function(){return Ke.execCommand(Ri)}}function qn(Ri){Ke.execCommand("mceInsertTable",!1,{rows:Ri.numRows,columns:Ri.numColumns})}var Fr={text:"Table properties",onSetup:yt.onSetupTable,onAction:Yt("mceTableProps")},fr={text:"Delete table",icon:"table-delete-table",onSetup:yt.onSetupTable,onAction:Yt("mceTableDelete")};Ke.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:Yt("mceTableInsertRowBefore"),onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:Yt("mceTableInsertRowAfter"),onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:Yt("mceTableDeleteRow"),onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:Yt("mceTableRowProps"),onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:Yt("mceTableCutRow"),onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:Yt("mceTableCopyRow"),onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:Yt("mceTablePasteRowBefore"),onSetup:yt.onSetupPasteable(Bn.getRows)}),Ke.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:Yt("mceTablePasteRowAfter"),onSetup:yt.onSetupPasteable(Bn.getRows)});var Vr={type:"nestedmenuitem",text:"Row",getSubmenuItems:ht("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};Ke.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:Yt("mceTableInsertColBefore"),onSetup:yt.onSetupColumn("onFirst")}),Ke.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:Yt("mceTableInsertColAfter"),onSetup:yt.onSetupColumn("onLast")}),Ke.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:Yt("mceTableDeleteCol"),onSetup:yt.onSetupColumn("onAny")}),Ke.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:Yt("mceTableCutCol"),onSetup:yt.onSetupColumn("onAny")}),Ke.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:Yt("mceTableCopyCol"),onSetup:yt.onSetupColumn("onAny")}),Ke.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:Yt("mceTablePasteColBefore"),onSetup:yt.onSetupPasteableColumn(Bn.getColumns,"onFirst")}),Ke.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:Yt("mceTablePasteColAfter"),onSetup:yt.onSetupPasteableColumn(Bn.getColumns,"onLast")});var io={type:"nestedmenuitem",text:"Column",getSubmenuItems:ht("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};Ke.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:Yt("mceTableCellProps"),onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:Yt("mceTableMergeCells"),onSetup:yt.onSetupMergeable}),Ke.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:Yt("mceTableSplitCells"),onSetup:yt.onSetupUnmergeable});var Br={type:"nestedmenuitem",text:"Cell",getSubmenuItems:ht("tablecellprops tablemergecells tablesplitcells")};!1===Ke.getParam("table_grid",!0,"boolean")?Ke.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:Yt("mceInsertTable")}):Ke.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:qn}]}}),Ke.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:Yt("mceInsertTable")}),Ke.ui.registry.addMenuItem("tableprops",Fr),Ke.ui.registry.addMenuItem("deletetable",fr),Ke.ui.registry.addNestedMenuItem("row",Vr),Ke.ui.registry.addNestedMenuItem("column",io),Ke.ui.registry.addNestedMenuItem("cell",Br),Ke.ui.registry.addContextMenu("table",{update:function(){return yt.resetTargets(),yt.targets().fold(ht(""),function(Ri){return"caption"===dr(Ri.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var to=hm(Xg(Ke));0!==to.length&&Ke.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return Sh(Ke,Gt,to,"tableclass",function(Ri){return Ke.execCommand("mceTableToggleClass",!1,Ri)})},onSetup:yt.onSetupTable});var zn=hm(Jl(Ke));0!==zn.length&&Ke.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return Sh(Ke,Gt,zn,"tablecellclass",function(Ri){return Ke.execCommand("mceTableCellToggleClass",!1,Ri)})},onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return Sh(Ke,Gt,cm,"tablecellverticalalign",Fc(Ke,"vertical-align"))},onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return Sh(Ke,Gt,hd(Ke),"tablecellborderwidth",Fc(Ke,"border-width"))},onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return Sh(Ke,Gt,kf(Ke),"tablecellborderstyle",Fc(Ke,"border-style"))},onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:Yt("mceTableToggleCaption"),onSetup:yt.onSetupTableWithCaption}),Ke.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return Cu(Ke,Mf(Ke),"background-color")},onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return Cu(Ke,Yg(Ke),"border-color")},onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:vv(Ke),onSetup:yt.onSetupTableRowHeaders}),Ke.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:Ya(Ke),onSetup:yt.onSetupTableColumnHeaders})}(_,tt,He,st),function(Ke,Gt,yt,Bn){function Yt(fr){return function(){return Ke.execCommand(fr)}}Ke.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(fr){return fr("inserttable | cell row column | advtablesort | tableprops deletetable")}}),Ke.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:Yt("mceTableProps"),icon:"table",onSetup:yt.onSetupTable}),Ke.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:Yt("mceTableDelete"),icon:"table-delete-table",onSetup:yt.onSetupTable}),Ke.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:Yt("mceTableCellProps"),icon:"table-cell-properties",onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:Yt("mceTableMergeCells"),icon:"table-merge-cells",onSetup:yt.onSetupMergeable}),Ke.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:Yt("mceTableSplitCells"),icon:"table-split-cells",onSetup:yt.onSetupUnmergeable}),Ke.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:Yt("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:Yt("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:Yt("mceTableDeleteRow"),icon:"table-delete-row",onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:Yt("mceTableRowProps"),icon:"table-row-properties",onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:Yt("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:yt.onSetupColumn("onFirst")}),Ke.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:Yt("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:yt.onSetupColumn("onLast")}),Ke.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:Yt("mceTableDeleteCol"),icon:"table-delete-column",onSetup:yt.onSetupColumn("onAny")}),Ke.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:Yt("mceTableCutRow"),onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:Yt("mceTableCopyRow"),onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:Yt("mceTablePasteRowBefore"),onSetup:yt.onSetupPasteable(Bn.getRows)}),Ke.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:Yt("mceTablePasteRowAfter"),onSetup:yt.onSetupPasteable(Bn.getRows)}),Ke.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:Yt("mceTableCutCol"),onSetup:yt.onSetupColumn("onAny")}),Ke.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:Yt("mceTableCopyCol"),onSetup:yt.onSetupColumn("onAny")}),Ke.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:Yt("mceTablePasteColBefore"),onSetup:yt.onSetupPasteableColumn(Bn.getColumns,"onFirst")}),Ke.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:Yt("mceTablePasteColAfter"),onSetup:yt.onSetupPasteableColumn(Bn.getColumns,"onLast")}),Ke.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:Yt("mceInsertTable"),icon:"table"});var qn=hm(Xg(Ke));0!==qn.length&&Ke.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:cn(Ke,Gt,qn,"tableclass",function(fr){return Ke.execCommand("mceTableToggleClass",!1,fr)}),onSetup:yt.onSetupTable});var Fr=hm(Jl(Ke));0!==Fr.length&&Ke.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:cn(Ke,Gt,Fr,"tablecellclass",function(fr){return Ke.execCommand("mceTableCellToggleClass",!1,fr)}),onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:cn(Ke,Gt,cm,"tablecellverticalalign",Fc(Ke,"vertical-align")),onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:cn(Ke,Gt,hd(Ke),"tablecellborderwidth",Fc(Ke,"border-width")),onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:cn(Ke,Gt,kf(Ke),"tablecellborderstyle",Fc(Ke,"border-style")),onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:Yt("mceTableToggleCaption"),icon:"table-caption",onSetup:yt.onSetupTableWithCaption}),Ke.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(fr){return fr(Cu(Ke,Mf(Ke),"background-color"))},onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(fr){return fr(Cu(Ke,Yg(Ke),"border-color"))},onSetup:yt.onSetupCellOrRow}),Ke.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:vv(Ke),onSetup:yt.onSetupTableRowHeaders}),Ke.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:Ya(Ke),onSetup:yt.onSetupTableColumnHeaders})}(_,tt,He,st),0<(we=(fe=_).getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")).length&&fe.ui.registry.addContextToolbar("table",{predicate:function(Ke){return fe.dom.is(Ke,"table")&&fe.getBody().contains(Ke)},items:we,scope:"node",position:"node"}),_.on("PreInit",function(){_.serializer.addTempAttr(Yu.firstSelected),_.serializer.addTempAttr(Yu.lastSelected),_.formatter.register(Rv)}),_.getParam("table_tab_navigation",!0,"boolean")&&_.on("keydown",function(Ke){var Gt,yt,Bn,Yt,qn=_,Fr=vt;(Gt=Ke).keyCode===Uv.TAB&&(yt=Xa(qn),Bn=function(fr){var Vr=dr(fr);return Vn(fr,yt)||dn(g1,Vr)},Yt=qn.selection.getRng(),jh(rt.fromDom(Gt.shiftKey?Yt.startContainer:Yt.endContainer),Bn).each(function(fr){Gt.preventDefault(),li(fr,Bn).each(Fr.clear),qn.selection.collapse(Gt.shiftKey),(Gt.shiftKey?function(Vr,io,Br){return kh(Vr,io,(zn=tu,em(to=Br,void 0).fold(function(){return nf.none()},function(Ri){return jc(Ri.all,to,Ri.index,-1,zn)})));var to,zn}:wd)(qn,Bn,fr).each(function(Vr){qn.selection.setRng(Vr)})}))}),_.on("remove",function(){at.destroy()}),{insertTable:(se=_,function(Ke,Gt,yt){var Bn=Kg(se,Gt,Ke,yt=void 0===yt?{}:yt,"Invalid values for insertTable - rows and columns values are required to insert a table.");return se.undoManager.add(),Bn}),setClipboardRows:K0(st.setRows),getClipboardRows:ap(st.getRows),setClipboardCols:K0(st.setColumns),getClipboardCols:ap(st.getColumns),resizeHandler:at,selectionTargets:He};function Wt(Ke){return om(ld(ke)).bind(function(Gt){return li(Gt,Re).map(function(yt){var Bn=ah(Fe,yt,Gt);return Ke(yt,Bn)})}).getOr("")}})}(),function(Un,Co){"object"==typeof exports&&"undefined"!=typeof module?Co(exports):"function"==typeof define&&define.amd?define(["exports"],Co):Co(Un.echarts={})}(this,function(Un){"use strict";var e,t,n,r,o,i,Zi,Co=2311,Yr=function(){return Co++},Cr="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:(t={},n=(e=navigator.userAgent).match(/Firefox\/([\d.]+)/),r=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge\/([\d.]+)/),i=/micromessenger/i.test(e),n&&(t.firefox=!0,t.version=n[1]),r&&(t.ie=!0,t.version=r[1]),o&&(t.edge=!0,t.version=o[1]),i&&(t.weChat=!0),{browser:t,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!t.ie&&!t.edge,pointerEventsSupported:"onpointerdown"in window&&(t.edge||t.ie&&11<=t.version),domSupported:"undefined"!=typeof document}),Zn={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},ht={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},En=Object.prototype.toString,ze=Array.prototype,Ut=ze.forEach,Jn=ze.filter,lr=ze.slice,Zt=ze.map,Eo=ze.reduce,cs={};function Bi(e,t){"createCanvas"===e&&(Zi=null),cs[e]=t}function Gn(e){if(null==e||"object"!=typeof e)return e;var t=e,n=En.call(e);if("[object Array]"===n){if(!ia(e)){t=[];for(var r=0,o=e.length;r<o;r++)t[r]=Gn(e[r])}}else if(ht[n]){if(!ia(e)){var i=e.constructor;if(e.constructor.from)t=i.from(e);else for(t=new i(e.length),r=0,o=e.length;r<o;r++)t[r]=Gn(e[r])}}else if(!Zn[n]&&!ia(e)&&!Ao(e))for(var s in t={},e)e.hasOwnProperty(s)&&(t[s]=Gn(e[s]));return t}function Sn(e,t,n){if(!xt(t)||!xt(e))return n?Gn(t):e;for(var r in t)if(t.hasOwnProperty(r)){var o=e[r],i=t[r];!xt(i)||!xt(o)||rn(i)||rn(o)||Ao(i)||Ao(o)||on(i)||on(o)||ia(i)||ia(o)?!n&&r in e||(e[r]=Gn(t[r])):Sn(o,i,n)}return e}function xr(e,t){for(var n=e[0],r=1,o=e.length;r<o;r++)n=Sn(n,e[r],t);return n}function Fn(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function un(e,t,n){for(var r in t)t.hasOwnProperty(r)&&(n?null!=t[r]:null==e[r])&&(e[r]=t[r]);return e}function Qn(){return cs.createCanvas()}function Er(){return Zi=Zi||Qn().getContext("2d")}function dn(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n}return-1}function Rn(e,t){var n=e.prototype;function r(){}for(var o in r.prototype=t.prototype,e.prototype=new r,n)n.hasOwnProperty(o)&&(e.prototype[o]=n[o]);(e.prototype.constructor=e).superClass=t}function _e(e,t,n){un(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,n)}function Dn(e){if(e)return"string"!=typeof e&&"number"==typeof e.length}function me(e,t,n){if(e&&t)if(e.forEach&&e.forEach===Ut)e.forEach(t,n);else if(e.length===+e.length)for(var r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e);else for(var i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function Kt(e,t,n){if(e&&t){if(e.map&&e.map===Zt)return e.map(t,n);for(var r=[],o=0,i=e.length;o<i;o++)r.push(t.call(n,e[o],o,e));return r}}function Pr(e,t,n,r){if(e&&t){if(e.reduce&&e.reduce===Eo)return e.reduce(t,n,r);for(var o=0,i=e.length;o<i;o++)n=t.call(r,n,e[o],o,e);return n}}function _r(e,t,n){if(e&&t){if(e.filter&&e.filter===Jn)return e.filter(t,n);for(var r=[],o=0,i=e.length;o<i;o++)t.call(n,e[o],o,e)&&r.push(e[o]);return r}}function ro(e,t,n){if(e&&t)for(var r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return e[r]}function Nn(e,t){var n=lr.call(arguments,2);return function(){return e.apply(t,n.concat(lr.call(arguments)))}}function ar(e){var t=lr.call(arguments,1);return function(){return e.apply(this,t.concat(lr.call(arguments)))}}function rn(e){return"[object Array]"===En.call(e)}function Mt(e){return"function"==typeof e}function tr(e){return"[object String]"===En.call(e)}function xt(e){var t=typeof e;return"function"==t||!!e&&"object"==t}function on(e){return!!Zn[En.call(e)]}function Jo(e){return!!ht[En.call(e)]}function Ao(e){return"object"==typeof e&&"number"==typeof e.nodeType&&"object"==typeof e.ownerDocument}function hr(e){return e!=e}function pe(e){for(var t=0,n=arguments.length;t<n;t++)if(null!=arguments[t])return arguments[t]}function Dr(e,t){return null!=e?e:t}function je(e,t,n){return null!=e?e:null!=t?t:n}function gi(){return Function.call.apply(lr,arguments)}function Es(e){if("number"==typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function _s(e,t){if(!e)throw new Error(t)}function sr(e){return null==e?null:"function"==typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}cs.createCanvas=function(){return document.createElement("canvas")};var zi="__ec_primitive__";function ds(e){e[zi]=!0}function ia(e){return e[zi]}function Ps(e){var t=rn(e);this.data={};var n=this;function r(o,i){t?n.set(o,i):n.set(i,o)}e instanceof Ps?e.each(r):e&&me(e,r)}function ut(e){return new Ps(e)}function dt(e,t){for(var n=new e.constructor(e.length+t.length),r=0;r<e.length;r++)n[r]=e[r];var o=e.length;for(r=0;r<t.length;r++)n[r+o]=t[r];return n}function Pt(){}Ps.prototype={constructor:Ps,get:function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},set:function(e,t){return this.data[e]=t},each:function(e,t){for(var n in void 0!==t&&(e=Nn(e,t)),this.data)this.data.hasOwnProperty(n)&&e(this.data[n],n)},removeKey:function(e){delete this.data[e]}};var qt=(Object.freeze||Object)({$override:Bi,clone:Gn,merge:Sn,mergeAll:xr,extend:Fn,defaults:un,createCanvas:Qn,getContext:Er,indexOf:dn,inherits:Rn,mixin:_e,isArrayLike:Dn,each:me,map:Kt,reduce:Pr,filter:_r,find:ro,bind:Nn,curry:ar,isArray:rn,isFunction:Mt,isString:tr,isObject:xt,isBuiltInObject:on,isTypedArray:Jo,isDom:Ao,eqNaN:hr,retrieve:pe,retrieve2:Dr,retrieve3:je,slice:gi,normalizeCssArray:Es,assert:_s,trim:sr,setAsPrimitive:ds,isPrimitive:ia,createHashMap:ut,concatArray:dt,noop:Pt}),Cn="undefined"==typeof Float32Array?Array:Float32Array;function hn(e,t){var n=new Cn(2);return null==e&&(e=0),null==t&&(t=0),n[0]=e,n[1]=t,n}function St(e,t){return e[0]=t[0],e[1]=t[1],e}function Lr(e){var t=new Cn(2);return t[0]=e[0],t[1]=e[1],t}function Vn(e,t,n){return e[0]=t,e[1]=n,e}function po(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function si(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function mi(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function lo(e){return Math.sqrt(Fi(e))}function Fi(e){return e[0]*e[0]+e[1]*e[1]}function aa(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function Ja(e,t){var n=lo(t);return 0===n?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}function H(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var fs=H;function hs(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Pa=hs;function fi(e,t,n,r){return e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e}function wn(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o+n[4],e[1]=n[1]*r+n[3]*o+n[5],e}function hu(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function ri(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}var ao=(Object.freeze||Object)({create:hn,copy:St,clone:Lr,set:Vn,add:po,scaleAndAdd:si,sub:mi,len:lo,length:lo,lenSquare:Fi,lengthSquare:Fi,mul:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},div:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:aa,normalize:Ja,distance:H,dist:fs,distanceSquare:hs,distSquare:Pa,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},lerp:fi,applyTransform:wn,min:hu,max:ri});function bl(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function yn(e,t){return{target:e,topTarget:t&&t.topTarget}}bl.prototype={constructor:bl,_dragStart:function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent;t&&((this._draggingTarget=t).dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.dispatchToElement(yn(t,e),"dragstart",e.event))},_drag:function(e){var t=this._draggingTarget;if(t){var n=e.offsetX,r=e.offsetY,o=n-this._x,i=r-this._y;this._x=n,this._y=r,t.drift(o,i,e),this.dispatchToElement(yn(t,e),"drag",e.event);var s=this.findHover(n,r,t).target,l=this._dropTarget;t!==(this._dropTarget=s)&&(l&&s!==l&&this.dispatchToElement(yn(l,e),"dragleave",e.event),s&&s!==l&&this.dispatchToElement(yn(s,e),"dragenter",e.event))}},_dragEnd:function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.dispatchToElement(yn(t,e),"dragend",e.event),this._dropTarget&&this.dispatchToElement(yn(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null}};var ot=Array.prototype.slice,Nt=function(e){this._$handlers={},this._$eventProcessor=e};function Me(e,t,n,r,o,i){var y,b,s=e._$handlers;if("function"==typeof n&&(o=r,r=n,n=null),!r||!t)return e;b=e._$eventProcessor,null!=(y=n)&&b&&b.normalizeQuery&&(y=b.normalizeQuery(y)),n=y,s[t]||(s[t]=[]);for(var l=0;l<s[t].length;l++)if(s[t][l].h===r)return e;var c={h:r,one:i,query:n,ctx:o||e,callAtLast:r.zrEventfulCallAtLast},f=s[t].length-1,h=s[t][f];return h&&h.callAtLast?s[t].splice(f,0,c):s[t].push(c),e}Nt.prototype={constructor:Nt,one:function(e,t,n,r){return Me(this,e,t,n,r,!0)},on:function(e,t,n,r){return Me(this,e,t,n,r,!1)},isSilent:function(e){var t=this._$handlers;return!t[e]||!t[e].length},off:function(e,t){var n=this._$handlers;if(!e)return this._$handlers={},this;if(t){if(n[e]){for(var r=[],o=0,i=n[e].length;o<i;o++)n[e][o].h!==t&&r.push(n[e][o]);n[e]=r}n[e]&&0===n[e].length&&delete n[e]}else delete n[e];return this},trigger:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var r=arguments,o=r.length;3<o&&(r=ot.call(r,1));for(var i=t.length,s=0;s<i;){var l=t[s];if(n&&n.filter&&null!=l.query&&!n.filter(e,l.query))s++;else{switch(o){case 1:l.h.call(l.ctx);break;case 2:l.h.call(l.ctx,r[1]);break;case 3:l.h.call(l.ctx,r[1],r[2]);break;default:l.h.apply(l.ctx,r)}l.one?(t.splice(s,1),i--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this},triggerWithContext:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var r=arguments,o=r.length;4<o&&(r=ot.call(r,1,r.length-1));for(var i=r[r.length-1],s=t.length,l=0;l<s;){var c=t[l];if(n&&n.filter&&null!=c.query&&!n.filter(e,c.query))l++;else{switch(o){case 1:c.h.call(i);break;case 2:c.h.call(i,r[1]);break;case 3:c.h.call(i,r[1],r[2]);break;default:c.h.apply(i,r)}c.one?(t.splice(l,1),s--):l++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this}};var $e=Math.log(2);function Pe(e,t,n,r,o,i){var s=r+"-"+o,l=e.length;if(i.hasOwnProperty(s))return i[s];if(1===t){var c=Math.round(Math.log((1<<l)-1&~o)/$e);return e[n][c]}for(var f=r|1<<n,h=n+1;r&1<<h;)h++;for(var p=0,y=0,b=0;y<l;y++){var S=1<<y;S&o||(p+=(b%2?-1:1)*e[n][y]*Pe(e,t-1,h,f,o|S,i),b++)}return i[s]=p}function mt(e,t){var n=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],r={},o=Pe(n,8,0,0,0,r);if(0!==o){for(var i=[],s=0;s<8;s++)for(var l=0;l<8;l++)null==i[l]&&(i[l]=0),i[l]+=((s+l)%2?-1:1)*Pe(n,7,0===s?1:0,1<<s,1<<l,r)/o*t[s];return function(c,f,h){var p=f*i[6]+h*i[7]+1;c[0]=(f*i[0]+h*i[1]+i[2])/p,c[1]=(f*i[3]+h*i[4]+i[5])/p}}}var lt="___zrEVENTSAVED",pt=[];function mn(e,t,n,r,o){if(t.getBoundingClientRect&&Cr.domSupported&&!Qt(t)){var i=t[lt]||(t[lt]={}),s=function(l,c,f){for(var h=f?"invTrans":"trans",p=c[h],y=c.srcCoords,b=!0,S=[],M=[],k=0;k<4;k++){var O=l[k].getBoundingClientRect(),P=2*k,R=O.left,F=O.top;S.push(R,F),b=b&&y&&R===y[P]&&F===y[1+P],M.push(l[k].offsetLeft,l[k].offsetTop)}return b&&p?p:(c.srcCoords=S,c[h]=f?mt(M,S):mt(S,M))}(function(l,c){var f=c.markers;if(f)return f;f=c.markers=[];for(var h=["left","right"],p=["top","bottom"],y=0;y<4;y++){var b=document.createElement("div"),M=y%2,k=(y>>1)%2;b.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",h[M]+":0",p[k]+":0",h[1-M]+":auto",p[1-k]+":auto",""].join("!important;"),l.appendChild(b),f.push(b)}return f}(t,i),i,o);if(s)return s(e,n,r),!0}return!1}function Qt(e){return"CANVAS"===e.nodeName.toUpperCase()}var ln="undefined"!=typeof window&&!!window.addEventListener,kn=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,nn=[];function Rt(e,t,n,r){return n=n||{},r||!Cr.canvasSupported?$t(e,t,n):Cr.browser.firefox&&null!=t.layerX&&t.layerX!==t.offsetX?(n.zrX=t.layerX,n.zrY=t.layerY):null!=t.offsetX?(n.zrX=t.offsetX,n.zrY=t.offsetY):$t(e,t,n),n}function $t(e,t,n){if(Cr.domSupported&&e.getBoundingClientRect){var r=t.clientX,o=t.clientY;if(Qt(e)){var i=e.getBoundingClientRect();return n.zrX=r-i.left,void(n.zrY=o-i.top)}if(mn(nn,e,r,o))return n.zrX=nn[0],void(n.zrY=nn[1])}n.zrX=n.zrY=0}function rt(e){return e||window.event}function vr(e,t,n){if(null!=(t=rt(t)).zrX)return t;var r=t.type;if(r&&0<=r.indexOf("touch")){var o="touchend"!==r?t.targetTouches[0]:t.changedTouches[0];o&&Rt(e,o,t,n)}else Rt(e,t,t,n),t.zrDelta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3;var i=t.button;return null==t.which&&void 0!==i&&kn.test(t.type)&&(t.which=1&i?1:2&i?3:4&i?2:0),t}function yr(e,t,n,r){ln?e.addEventListener(t,n,r):e.attachEvent("on"+t,n)}var cr=ln?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0};function ur(e){return 2===e.which||3===e.which}function Jr(){this._track=[]}function ko(e){var t=e[1][0]-e[0][0],n=e[1][1]-e[0][1];return Math.sqrt(t*t+n*n)}Jr.prototype={constructor:Jr,recognize:function(e,t,n){return this._doTrack(e,t,n),this._recognize(e)},clear:function(){return this._track.length=0,this},_doTrack:function(e,t,n){var r=e.touches;if(r){for(var o={points:[],touches:[],target:t,event:e},i=0,s=r.length;i<s;i++){var l=r[i],c=Rt(n,l,{});o.points.push([c.zrX,c.zrY]),o.touches.push(l)}this._track.push(o)}},_recognize:function(e){for(var t in dr)if(dr.hasOwnProperty(t)){var n=dr[t](this._track,e);if(n)return n}}};var dr={pinch:function(e,t){var l,n=e.length;if(n){var r=(e[n-1]||{}).points,o=(e[n-2]||{}).points||r;if(o&&1<o.length&&r&&1<r.length){var i=ko(r)/ko(o);isFinite(i)||(i=1),t.pinchScale=i;var s=[((l=r)[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2];return t.pinchX=s[0],t.pinchY=s[1],{type:"pinch",target:e[0].target,event:t}}}}};function Wn(){cr(this.event)}function Rr(){}function Uo(e,t,n,r){Nt.call(this),this.storage=e,this.painter=t,this.painterRoot=r,n=n||new Rr,this.proxy=null,this._hovered={},bl.call(this),this.setHandlerProxy(n)}Rr.prototype.dispose=function(){};var Va=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];function Ha(e,t,n){if(e[e.rectHover?"rectContain":"contain"](t,n)){for(var r,o=e;o;){if(o.clipPath&&!o.clipPath.contain(t,n))return!1;o.silent&&(r=!0),o=o.parent}return!r||"silent"}return!1}function rr(e,t,n){var r=e.painter;return t<0||t>r.getWidth()||n<0||n>r.getHeight()}Uo.prototype={constructor:Uo,setHandlerProxy:function(e){this.proxy&&this.proxy.dispose(),e&&(me(Va,function(t){e.on&&e.on(t,this[t],this)},this),e.handler=this),this.proxy=e},mousemove:function(e){var t=e.zrX,n=e.zrY,r=rr(this,t,n),o=this._hovered,i=o.target;i&&!i.__zr&&(i=(o=this.findHover(o.x,o.y)).target);var s=this._hovered=r?{x:t,y:n}:this.findHover(t,n),l=s.target,c=this.proxy;c.setCursor&&c.setCursor(l?l.cursor:"default"),i&&l!==i&&this.dispatchToElement(o,"mouseout",e),this.dispatchToElement(s,"mousemove",e),l&&l!==i&&this.dispatchToElement(s,"mouseover",e)},mouseout:function(e){var t=e.zrEventControl,n=e.zrIsToLocalDOM;"only_globalout"!==t&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==t&&(n||this.trigger("globalout",{type:"globalout",event:e}))},resize:function(e){this._hovered={}},dispatch:function(e,t){var n=this[e];n&&n.call(this,t)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},dispatchToElement:function(e,t,n){var l,c,r=(e=e||{}).target;if(!r||!r.silent){for(var o="on"+t,i={type:t,event:c=n,target:(l=e).target,topTarget:l.topTarget,cancelBubble:!1,offsetX:c.zrX,offsetY:c.zrY,gestureEvent:c.gestureEvent,pinchX:c.pinchX,pinchY:c.pinchY,pinchScale:c.pinchScale,wheelDelta:c.zrDelta,zrByTouch:c.zrByTouch,which:c.which,stop:Wn};r&&(r[o]&&(i.cancelBubble=r[o].call(r,i)),r.trigger(t,i),r=r.parent,!i.cancelBubble););i.cancelBubble||(this.trigger(t,i),this.painter&&this.painter.eachOtherLayer(function(s){"function"==typeof s[o]&&s[o].call(s,i),s.trigger&&s.trigger(t,i)}))}},findHover:function(e,t,n){for(var r=this.storage.getDisplayList(),o={x:e,y:t},i=r.length-1;0<=i;i--){var s;if(r[i]!==n&&!r[i].ignore&&(s=Ha(r[i],e,t))&&(o.topTarget||(o.topTarget=r[i]),"silent"!==s)){o.target=r[i];break}}return o},processGesture:function(e,t){this._gestureMgr||(this._gestureMgr=new Jr);var n=this._gestureMgr;"start"===t&&n.clear();var r=n.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===t&&n.clear(),r){var o=r.type;e.gestureEvent=o,this.dispatchToElement({target:r.target},o,r.event)}}},me(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){Uo.prototype[e]=function(t){var n,r,o=t.zrX,i=t.zrY,s=rr(this,o,i);if("mouseup"===e&&s||(r=(n=this.findHover(o,i)).target),"mousedown"===e)this._downEl=r,this._downPoint=[t.zrX,t.zrY],this._upEl=r;else if("mouseup"===e)this._upEl=r;else if("click"===e){if(this._downEl!==this._upEl||!this._downPoint||4<fs(this._downPoint,[t.zrX,t.zrY]))return;this._downPoint=null}this.dispatchToElement(n,e,t)}}),_e(Uo,Nt),_e(Uo,bl);var Wi="undefined"==typeof Float32Array?Array:Float32Array;function ui(){var e=new Wi(6);return Zs(e),e}function Zs(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Mo(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Eu(e,t,n){var o=t[1]*n[0]+t[3]*n[1],i=t[0]*n[2]+t[2]*n[3],s=t[1]*n[2]+t[3]*n[3],l=t[0]*n[4]+t[2]*n[5]+t[4],c=t[1]*n[4]+t[3]*n[5]+t[5];return e[0]=t[0]*n[0]+t[2]*n[1],e[1]=o,e[2]=i,e[3]=s,e[4]=l,e[5]=c,e}function Vl(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}function Ar(e,t,n){var r=t[0],o=t[2],i=t[4],s=t[1],l=t[3],c=t[5],f=Math.sin(n),h=Math.cos(n);return e[0]=r*h+s*f,e[1]=-r*f+s*h,e[2]=o*h+l*f,e[3]=-o*f+h*l,e[4]=h*i+f*c,e[5]=h*c-f*i,e}function lc(e,t,n){var r=n[0],o=n[1];return e[0]=t[0]*r,e[1]=t[1]*o,e[2]=t[2]*r,e[3]=t[3]*o,e[4]=t[4]*r,e[5]=t[5]*o,e}function $i(e,t){var n=t[0],r=t[2],o=t[4],i=t[1],s=t[3],l=t[5],c=n*s-i*r;return c?(e[0]=s*(c=1/c),e[1]=-i*c,e[2]=-r*c,e[3]=n*c,e[4]=(r*l-s*o)*c,e[5]=(i*o-n*l)*c,e):null}function Wa(e){var t=ui();return Mo(t,e),t}var Gi=(Object.freeze||Object)({create:ui,identity:Zs,copy:Mo,mul:Eu,translate:Vl,rotate:Ar,scale:lc,invert:$i,clone:Wa}),ji=Zs;function co(e){return 5e-5<e||e<-5e-5}var Qo=function(e){(e=e||{}).position||(this.position=[0,0]),null==e.rotation&&(this.rotation=0),e.scale||(this.scale=[1,1]),this.origin=this.origin||null},Hl=Qo.prototype;Hl.transform=null,Hl.needLocalTransform=function(){return co(this.rotation)||co(this.position[0])||co(this.position[1])||co(this.scale[0]-1)||co(this.scale[1]-1)};var Ra=[];Hl.updateTransform=function(){var e=this.parent,t=e&&e.transform,n=this.needLocalTransform(),r=this.transform;if(n||t){r=r||ui(),n?this.getLocalTransform(r):ji(r),t&&(n?Eu(r,e.transform,r):Mo(r,e.transform)),this.transform=r;var o=this.globalScaleRatio;if(null!=o&&1!==o){this.getGlobalScale(Ra);var i=Ra[0]<0?-1:1,s=Ra[1]<0?-1:1,l=((Ra[0]-i)*o+i)/Ra[0]||0,c=((Ra[1]-s)*o+s)/Ra[1]||0;r[0]*=l,r[1]*=l,r[2]*=c,r[3]*=c}this.invTransform=this.invTransform||ui(),$i(this.invTransform,r)}else r&&ji(r)},Hl.getLocalTransform=function(e){return Qo.getLocalTransform(this,e)},Hl.setTransform=function(e){var t=this.transform,n=e.dpr||1;t?e.setTransform(n*t[0],n*t[1],n*t[2],n*t[3],n*t[4],n*t[5]):e.setTransform(n,0,0,n,0,0)},Hl.restoreTransform=function(e){var t=e.dpr||1;e.setTransform(t,0,0,t,0,0)};var Ec=[],wr=ui();Hl.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],n=e[2]*e[2]+e[3]*e[3],r=this.position,o=this.scale;co(t-1)&&(t=Math.sqrt(t)),co(n-1)&&(n=Math.sqrt(n)),e[0]<0&&(t=-t),e[3]<0&&(n=-n),r[0]=e[4],r[1]=e[5],o[0]=t,o[1]=n,this.rotation=Math.atan2(-e[1]/n,e[0]/t)}},Hl.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(Eu(Ec,e.invTransform,t),t=Ec);var n=this.origin;n&&(n[0]||n[1])&&(wr[4]=n[0],wr[5]=n[1],Eu(Ec,t,wr),Ec[4]-=n[0],Ec[5]-=n[1],t=Ec),this.setLocalTransform(t)}},Hl.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1])):(e[0]=1,e[1]=1),e},Hl.transformCoordToLocal=function(e,t){var n=[e,t],r=this.invTransform;return r&&wn(n,n,r),n},Hl.transformCoordToGlobal=function(e,t){var n=[e,t],r=this.transform;return r&&wn(n,n,r),n},Qo.getLocalTransform=function(e,t){ji(t=t||[]);var n=e.origin,r=e.scale||[1,1],o=e.rotation||0,i=e.position||[0,0];return n&&(t[4]-=n[0],t[5]-=n[1]),lc(t,t,r),o&&Ar(t,t,o),n&&(t[4]+=n[0],t[5]+=n[1]),t[4]+=i[0],t[5]+=i[1],t};var Pc={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)},backIn:function(e){return e*e*(2.70158*e-1.70158)},backOut:function(e){return--e*e*(2.70158*e+1.70158)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)},bounceIn:function(e){return 1-Pc.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*Pc.bounceIn(2*e):.5*Pc.bounceOut(2*e-1)+.5}};function ws(e){this._target=e.target,this._life=e.life||1e3,this._delay=e.delay||0,this._initialized=!1,this.loop=null!=e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this._pausedTime=0,this._paused=!1}function At(){this.head=null,this.tail=null,this._len=0}ws.prototype={constructor:ws,step:function(e,t){if(this._initialized||(this._startTime=e+this._delay,this._initialized=!0),this._paused)this._pausedTime+=t;else{var n=(e-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var r=this.easing,o="string"==typeof r?Pc[r]:r,i="function"==typeof o?o(n):n;return this.fire("frame",i),1===n?this.loop?(this.restart(e),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(e){this._startTime=e-(e-this._startTime-this._pausedTime)%this._life+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(e,t){this[e="on"+e]&&this[e](this._target,t)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var it=At.prototype;function Oi(e){this._list=new At,this._map={},this._maxSize=e||10,this._lastRemovedEntry=null}it.insert=function(e){var t=new td(e);return this.insertEntry(t),t},it.insertEntry=function(e){this.head?((this.tail.next=e).prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},it.remove=function(e){var t=e.prev,n=e.next;t?t.next=n:this.head=n,n?n.prev=t:this.tail=t,e.next=e.prev=null,this._len--},it.len=function(){return this._len},it.clear=function(){this.head=this.tail=null,this._len=0};var td=function(e){this.value=e},Wl=Oi.prototype;Wl.put=function(e,t){var n=this._list,r=this._map,o=null;if(null==r[e]){var i=n.len(),s=this._lastRemovedEntry;if(i>=this._maxSize&&0<i){var l=n.head;n.remove(l),delete r[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=t:s=new td(t),s.key=e,n.insertEntry(s),r[e]=s}return o},Wl.get=function(e){var t=this._map[e],n=this._list;if(null!=t)return t!==n.tail&&(n.remove(t),n.insertEntry(t)),t.value},Wl.clear=function(){this._list.clear(),this._map={}};var Ss={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function $s(e){return(e=Math.round(e))<0?0:255<e?255:e}function ma(e){return e<0?0:1<e?1:e}function Pu(e){return e.length&&"%"===e.charAt(e.length-1)?$s(parseFloat(e)/100*255):$s(parseInt(e,10))}function Ei(e){return e.length&&"%"===e.charAt(e.length-1)?ma(parseFloat(e)/100):ma(parseFloat(e))}function qo(e,t,n){return n<0?n+=1:1<n&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function xl(e,t,n){return e+(t-e)*n}function es(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e}function nd(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var rd=new Oi(20),gu=null;function Cs(e,t){gu&&nd(gu,t),gu=rd.put(e,gu||t.slice())}function Ru(e,t){if(e){t=t||[];var n=rd.get(e);if(n)return nd(t,n);var r,o=(e+="").replace(/ /g,"").toLowerCase();if(o in Ss)return nd(t,Ss[o]),Cs(e,t),t;if("#"===o.charAt(0))return 4===o.length?0<=(r=parseInt(o.substr(1),16))&&r<=4095?(es(t,(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1),Cs(e,t),t):void es(t,0,0,0,1):7===o.length?0<=(r=parseInt(o.substr(1),16))&&r<=16777215?(es(t,(16711680&r)>>16,(65280&r)>>8,255&r,1),Cs(e,t),t):void es(t,0,0,0,1):void 0;var i=o.indexOf("("),s=o.indexOf(")");if(-1!==i&&s+1===o.length){var l=o.substr(0,i),c=o.substr(i+1,s-(i+1)).split(","),f=1;switch(l){case"rgba":if(4!==c.length)return void es(t,0,0,0,1);f=Ei(c.pop());case"rgb":return 3!==c.length?void es(t,0,0,0,1):(es(t,Pu(c[0]),Pu(c[1]),Pu(c[2]),f),Cs(e,t),t);case"hsla":return 4!==c.length?void es(t,0,0,0,1):(c[3]=Ei(c[3]),pi(c,t),Cs(e,t),t);case"hsl":return 3!==c.length?void es(t,0,0,0,1):(pi(c,t),Cs(e,t),t);default:return}}es(t,0,0,0,1)}}function pi(e,t){var n=(parseFloat(e[0])%360+360)%360/360,r=Ei(e[1]),o=Ei(e[2]),i=o<=.5?o*(r+1):o+r-o*r,s=2*o-i;return es(t=t||[],$s(255*qo(s,i,n+1/3)),$s(255*qo(s,i,n)),$s(255*qo(s,i,n-1/3)),1),4===e.length&&(t[3]=e[3]),t}function Fd(e,t){var n=Ru(e);if(n){for(var r=0;r<3;r++)n[r]=t<0?n[r]*(1-t)|0:(255-n[r])*t+n[r]|0,255<n[r]?n[r]=255:e[r]<0&&(n[r]=0);return nl(n,4===n.length?"rgba":"rgb")}}function Ui(e){var t=Ru(e);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function gs(e,t,n){if(t&&t.length&&0<=e&&e<=1){n=n||[];var r=e*(t.length-1),o=Math.floor(r),i=Math.ceil(r),s=t[o],l=t[i],c=r-o;return n[0]=$s(xl(s[0],l[0],c)),n[1]=$s(xl(s[1],l[1],c)),n[2]=$s(xl(s[2],l[2],c)),n[3]=ma(xl(s[3],l[3],c)),n}}function _l(e,t,n){if(t&&t.length&&0<=e&&e<=1){var r=e*(t.length-1),o=Math.floor(r),i=Math.ceil(r),s=Ru(t[o]),l=Ru(t[i]),c=r-o,f=nl([$s(xl(s[0],l[0],c)),$s(xl(s[1],l[1],c)),$s(xl(s[2],l[2],c)),ma(xl(s[3],l[3],c))],"rgba");return n?{color:f,leftIndex:o,rightIndex:i,value:r}:f}}function Gl(e,t,n,r){if(e=Ru(e))return e=function(o){if(o){var i,s,l=o[0]/255,c=o[1]/255,f=o[2]/255,h=Math.min(l,c,f),p=Math.max(l,c,f),y=p-h,b=(p+h)/2;if(0==y)s=i=0;else{s=b<.5?y/(p+h):y/(2-p-h);var S=((p-l)/6+y/2)/y,M=((p-c)/6+y/2)/y,k=((p-f)/6+y/2)/y;l===p?i=k-M:c===p?i=1/3+S-k:f===p&&(i=2/3+M-S),i<0&&(i+=1),1<i&&(i-=1)}var O=[360*i,s,b];return null!=o[3]&&O.push(o[3]),O}}(e),null!=t&&(e[0]=function(o){return(o=Math.round(o))<0?0:360<o?360:o}(t)),null!=n&&(e[1]=Ei(n)),null!=r&&(e[2]=Ei(r)),nl(pi(e),"rgba")}function Vd(e,t){if((e=Ru(e))&&null!=t)return e[3]=ma(t),nl(e,"rgba")}function nl(e,t){if(e&&e.length){var n=e[0]+","+e[1]+","+e[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(n+=","+e[3]),t+"("+n+")"}}var Gh=(Object.freeze||Object)({parse:Ru,lift:Fd,toHex:Ui,fastLerp:gs,fastMapToColor:gs,lerp:_l,mapToColor:_l,modifyHSL:Gl,modifyAlpha:Vd,stringify:nl}),jh=Array.prototype.slice;function wl(e,t){return e[t]}function Po(e,t,n){e[t]=n}function li(e,t,n){return(t-e)*n+e}function Hd(e,t,n){return.5<n?t:e}function Nu(e,t,n,r,o){var i=e.length;if(1===o)for(var s=0;s<i;s++)r[s]=li(e[s],t[s],n);else{var l=i&&e[0].length;for(s=0;s<i;s++)for(var c=0;c<l;c++)r[s][c]=li(e[s][c],t[s][c],n)}}function Wd(e,t,n){var r=e.length,o=t.length;if(r!==o)if(o<r)e.length=o;else for(var i=r;i<o;i++)e.push(1===n?t[i]:jh.call(t[i]));var s=e[0]&&e[0].length;for(i=0;i<e.length;i++)if(1===n)isNaN(e[i])&&(e[i]=t[i]);else for(var l=0;l<s;l++)isNaN(e[i][l])&&(e[i][l]=t[i][l])}function vf(e,t,n){if(e===t)return!0;var r=e.length;if(r!==t.length)return!1;if(1===n){for(var o=0;o<r;o++)if(e[o]!==t[o])return!1}else{var i=e[0].length;for(o=0;o<r;o++)for(var s=0;s<i;s++)if(e[o][s]!==t[o][s])return!1}return!0}function jl(e,t,n,r,o,i,s,l,c){var f=e.length;if(1===c)for(var h=0;h<f;h++)l[h]=Ca(e[h],t[h],n[h],r[h],o,i,s);else{var p=e[0].length;for(h=0;h<f;h++)for(var y=0;y<p;y++)l[h][y]=Ca(e[h][y],t[h][y],n[h][y],r[h][y],o,i,s)}}function Ca(e,t,n,r,o,i,s){var l=.5*(n-e),c=.5*(r-t);return(2*(t-n)+l+c)*s+(-3*(t-n)-2*l-c)*i+l*o+t}function id(e){if(Dn(e)){var t=e.length;if(Dn(e[0])){for(var n=[],r=0;r<t;r++)n.push(jh.call(e[r]));return n}return jh.call(e)}return e}function Lu(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}function sa(e,t,n,r,o,i){var Ve,Be,s=e._getter,l=e._setter,c="spline"===t,f=r.length;if(f){var h,p=Dn(r[0].value),y=!1,b=!1,S=p?Dn((Be=(Ve=r)[Ve.length-1].value)&&Be[0])?2:1:0;r.sort(function(Ve,Be){return Ve.time-Be.time}),h=r[f-1].time;for(var M=[],k=[],O=r[0].value,P=!0,R=0;R<f;R++){M.push(r[R].time/h);var F=r[R].value;if(p&&vf(F,O,S)||!p&&F===O||(P=!1),"string"==typeof(O=F)){var G=Ru(F);G?(F=G,y=!0):b=!0}k.push(F)}if(i||!P){var X=k[f-1];for(R=0;R<f-1;R++)p?Wd(k[R],X,S):!isNaN(k[R])||isNaN(X)||b||y||(k[R]=X);p&&Wd(s(e._target,o),X,S);var Y,Q,ne,le,ce,ye=0,xe=0;if(y)var Te=[0,0,0,0];var Ee=new ws({target:e._target,life:h,loop:e._loop,delay:e._delay,onframe:function(Ve,Be){var nt;if(Be<0)nt=0;else if(Be<xe){for(nt=Math.min(ye+1,f-1);0<=nt&&!(M[nt]<=Be);nt--);nt=Math.min(nt,f-2)}else{for(nt=ye;nt<f&&!(M[nt]>Be);nt++);nt=Math.min(nt-1,f-2)}xe=Be;var bt=M[(ye=nt)+1]-M[nt];if(0!=bt)if(Y=(Be-M[nt])/bt,c)if(ne=k[nt],Q=k[0===nt?nt:nt-1],le=k[f-2<nt?f-1:nt+1],ce=k[f-3<nt?f-1:nt+2],p)jl(Q,ne,le,ce,Y,Y*Y,Y*Y*Y,s(Ve,o),S);else{if(y)_t=jl(Q,ne,le,ce,Y,Y*Y,Y*Y*Y,Te,1),_t=Lu(Te);else{if(b)return Hd(ne,le,Y);_t=Ca(Q,ne,le,ce,Y,Y*Y,Y*Y*Y)}l(Ve,o,_t)}else if(p)Nu(k[nt],k[nt+1],Y,s(Ve,o),S);else{var _t;if(y)Nu(k[nt],k[nt+1],Y,Te,1),_t=Lu(Te);else{if(b)return Hd(k[nt],k[nt+1],Y);_t=li(k[nt],k[nt+1],Y)}l(Ve,o,_t)}},ondestroy:n});return t&&"spline"!==t&&(Ee.easing=t),Ee}}}function Vi(e,t,n,r){this._tracks={},this._target=e,this._loop=t||!1,this._getter=n||wl,this._setter=r||Po,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}Vi.prototype={when:function(e,t){var n=this._tracks;for(var r in t)if(t.hasOwnProperty(r)){if(!n[r]){n[r]=[];var o=this._getter(this._target,r);if(null==o)continue;0!==e&&n[r].push({time:0,value:id(o)})}n[r].push({time:e,value:t[r]})}return this},during:function(e){return this._onframeList.push(e),this},pause:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].pause();this._paused=!0},resume:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var e=this._doneList,t=e.length,n=0;n<t;n++)e[n].call(this)},start:function(e,t){function n(){--i||o._doneCallback()}var r,o=this,i=0;for(var s in this._tracks)if(this._tracks.hasOwnProperty(s)){var l=sa(this,e,n,this._tracks[s],s,t);l&&(this._clipList.push(l),i++,this.animation&&this.animation.addClip(l),r=l)}if(r){var c=r.onframe;r.onframe=function(f,h){c(f,h);for(var p=0;p<o._onframeList.length;p++)o._onframeList[p](f,h)}}return i||this._doneCallback(),this},stop:function(e){for(var t=this._clipList,n=this.animation,r=0;r<t.length;r++){var o=t[r];e&&o.onframe(this._target,1),n&&n.removeClip(o)}t.length=0},delay:function(e){return this._delay=e,this},done:function(e){return e&&this._doneList.push(e),this},getClips:function(){return this._clipList}};var ts=1;"undefined"!=typeof window&&(ts=Math.max(window.devicePixelRatio||1,1));var Sl=ts;function Ga(){this.animators=[]}function Rc(e,t,n,r,o,i,s,l){tr(r)?(i=o,o=r,r=0):Mt(o)?(i=o,o="linear",r=0):Mt(r)?(i=r,r=0):n=Mt(n)?(i=n,500):n||500,e.stopAnimation(),function y(b,S,M,k,O,P,R){var F={},G=0;for(var X in k)k.hasOwnProperty(X)&&(null!=M[X]?xt(k[X])&&!Dn(k[X])?y(b,S?S+"."+X:X,M[X],k[X],O,P,R):(R?(F[X]=M[X],Bu(b,S,X,k[X])):F[X]=k[X],G++):null==k[X]||R||Bu(b,S,X,k[X]));0<G&&b.animate(S,!1).when(null==O?500:O,F).delay(P||0)}(e,"",e,t,n,r,l);var c=e.animators.slice(),f=c.length;function h(){--f||i&&i()}f||i&&i();for(var p=0;p<c.length;p++)c[p].done(h).start(o,s)}function Bu(e,t,n,r){if(t){var o={};o[t]={},o[t][n]=r,e.attr(o)}else e.attr(n,r)}Ga.prototype={constructor:Ga,animate:function(e,t){var n,r=!1,o=this,i=this.__zr;if(e){var s=e.split("."),l=o;r="shape"===s[0];for(var c=0,f=s.length;c<f;c++)l=l&&l[s[c]];l&&(n=l)}else n=o;if(n){var h=o.animators,p=new Vi(n,t);return p.during(function(y){o.dirty(r)}).done(function(){h.splice(dn(h,p),1)}),h.push(p),i&&i.animation.addAnimator(p),p}},stopAnimation:function(e){for(var t=this.animators,n=t.length,r=0;r<n;r++)t[r].stop(e);return t.length=0,this},animateTo:function(e,t,n,r,o,i){Rc(this,e,t,n,r,o,i)},animateFrom:function(e,t,n,r,o,i){Rc(this,e,t,n,r,o,i,!0)}};var ks=function(e){Qo.call(this,e),Nt.call(this,e),Ga.call(this,e),this.id=e.id||Yr()};ks.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(e,t){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var n=this.transform;(n=n||(this.transform=[1,0,0,1,0,0]))[4]+=e,n[5]+=t,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(e,t){},attrKV:function(e,t){if("position"===e||"scale"===e||"origin"===e){if(t){var n=this[e];(n=n||(this[e]=[]))[0]=t[0],n[1]=t[1]}}else this[e]=t},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(e,t){if("string"==typeof e)this.attrKV(e,t);else if(xt(e))for(var n in e)e.hasOwnProperty(n)&&this.attrKV(n,e[n]);return this.dirty(!1),this},setClipPath:function(e){var t=this.__zr;t&&e.addSelfToZr(t),this.clipPath&&this.clipPath!==e&&this.removeClipPath(),(this.clipPath=e).__zr=t,(e.__clipTarget=this).dirty(!1)},removeClipPath:function(){var e=this.clipPath;e&&(e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(e){this.__zr=e;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.addAnimator(t[n]);this.clipPath&&this.clipPath.addSelfToZr(e)},removeSelfFromZr:function(e){this.__zr=null;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.removeAnimator(t[n]);this.clipPath&&this.clipPath.removeSelfFromZr(e)}},_e(ks,Ga),_e(ks,Qo),_e(ks,Nt);var oi,dc,Cl,Ms,Hi=wn,ja=Math.min,Um=Math.max;function Vo(e,t,n,r){n<0&&(e+=n,n=-n),r<0&&(t+=r,r=-r),this.x=e,this.y=t,this.width=n,this.height=r}Vo.prototype={constructor:Vo,union:function(e){var t=ja(e.x,this.x),n=ja(e.y,this.y);this.width=Um(e.x+e.width,this.x+this.width)-t,this.height=Um(e.y+e.height,this.y+this.height)-n,this.x=t,this.y=n},applyTransform:(oi=[],dc=[],Cl=[],Ms=[],function(e){if(e){oi[0]=Cl[0]=this.x,oi[1]=Ms[1]=this.y,dc[0]=Ms[0]=this.x+this.width,dc[1]=Cl[1]=this.y+this.height,Hi(oi,oi,e),Hi(dc,dc,e),Hi(Cl,Cl,e),Hi(Ms,Ms,e),this.x=ja(oi[0],dc[0],Cl[0],Ms[0]),this.y=ja(oi[1],dc[1],Cl[1],Ms[1]);var t=Um(oi[0],dc[0],Cl[0],Ms[0]),n=Um(oi[1],dc[1],Cl[1],Ms[1]);this.width=t-this.x,this.height=n-this.y}}),calculateTransform:function(e){var t=e.width/this.width,n=e.height/this.height,r=ui();return Vl(r,r,[-this.x,-this.y]),lc(r,r,[t,n]),Vl(r,r,[e.x,e.y]),r},intersect:function(e){if(!e)return!1;e instanceof Vo||(e=Vo.create(e));var t=this;return!(t.x+t.width<e.x||e.x+e.width<t.x||t.y+t.height<e.y||e.y+e.height<t.y)},contain:function(e,t){var n=this;return e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height},clone:function(){return new Vo(this.x,this.y,this.width,this.height)},copy:function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},Vo.create=function(e){return new Vo(e.x,e.y,e.width,e.height)};var pn=function(e){for(var t in ks.call(this,e=e||{}),e)e.hasOwnProperty(t)&&(this[t]=e[t]);this._children=[],this.__storage=null,this.__dirty=!0};function Ki(e,t,n,r){var o=t+1;if(o===n)return 1;if(r(e[o++],e[t])<0){for(;o<n&&r(e[o],e[o-1])<0;)o++;!function(i,s,l){for(l--;s<l;){var c=i[s];i[s++]=i[l],i[l--]=c}}(e,t,o)}else for(;o<n&&0<=r(e[o],e[o-1]);)o++;return o-t}function Ua(e,t,n,r,o){for(r===t&&r++;r<n;r++){for(var i,s=e[r],l=t,c=r;l<c;)o(s,e[i=l+c>>>1])<0?c=i:l=1+i;var f=r-l;switch(f){case 3:e[l+3]=e[l+2];case 2:e[l+2]=e[l+1];case 1:e[l+1]=e[l];break;default:for(;0<f;)e[l+f]=e[l+f-1],f--}e[l]=s}}function Sr(e,t,n,r,o,i){var s=0,l=0,c=1;if(0<i(e,t[n+o])){for(l=r-o;c<l&&0<i(e,t[n+o+c]);)(c=1+((s=c)<<1))<=0&&(c=l);l<c&&(c=l),s+=o,c+=o}else{for(l=o+1;c<l&&i(e,t[n+o-c])<=0;)(c=1+((s=c)<<1))<=0&&(c=l);l<c&&(c=l);var f=s;s=o-c,c=o-f}for(s++;s<c;){var h=s+(c-s>>>1);0<i(e,t[n+h])?s=h+1:c=h}return c}function ad(e,t,n,r,o,i){var s=0,l=0,c=1;if(i(e,t[n+o])<0){for(l=o+1;c<l&&i(e,t[n+o-c])<0;)(c=1+((s=c)<<1))<=0&&(c=l);l<c&&(c=l);var f=s;s=o-c,c=o-f}else{for(l=r-o;c<l&&0<=i(e,t[n+o+c]);)(c=1+((s=c)<<1))<=0&&(c=l);l<c&&(c=l),s+=o,c+=o}for(s++;s<c;){var h=s+(c-s>>>1);i(e,t[n+h])<0?c=h:s=h+1}return c}function Hg(e,t){var n,r,o=7,i=0,s=[];function l(c){var f=n[c],h=r[c],p=n[c+1],y=r[c+1];r[c]=h+y,c===i-3&&(n[c+1]=n[c+2],r[c+1]=r[c+2]),i--;var b=ad(e[p],e,f,h,0,t);f+=b,0!=(h-=b)&&0!==(y=Sr(e[f+h-1],e,p,y,y-1,t))&&(h<=y?function(S,M,k,O){var P=0;for(P=0;P<M;P++)s[P]=e[S+P];var R=0,F=k,G=S;if(e[G++]=e[F++],0!=--O){if(1===M){for(P=0;P<O;P++)e[G+P]=e[F+P];return e[G+O]=s[R]}for(var X,Y,Q,ne=o;;){Y=X=0,Q=!1;do{if(t(e[F],s[R])<0){if(e[G++]=e[F++],Y++,(X=0)==--O){Q=!0;break}}else if(e[G++]=s[R++],X++,Y=0,1==--M){Q=!0;break}}while((X|Y)<ne);if(Q)break;do{if(0!==(X=ad(e[F],s,R,M,0,t))){for(P=0;P<X;P++)e[G+P]=s[R+P];if(G+=X,R+=X,(M-=X)<=1){Q=!0;break}}if(e[G++]=e[F++],0==--O){Q=!0;break}if(0!==(Y=Sr(s[R],e,F,O,0,t))){for(P=0;P<Y;P++)e[G+P]=e[F+P];if(G+=Y,F+=Y,0==(O-=Y)){Q=!0;break}}if(e[G++]=s[R++],1==--M){Q=!0;break}ne--}while(7<=X||7<=Y);if(Q)break;ne<0&&(ne=0),ne+=2}if((o=ne)<1&&(o=1),1===M){for(P=0;P<O;P++)e[G+P]=e[F+P];e[G+O]=s[R]}else{if(0===M)throw new Error;for(P=0;P<M;P++)e[G+P]=s[R+P]}}else for(P=0;P<M;P++)e[G+P]=s[R+P]}(f,h,p,y):function(S,M,k,O){var P=0;for(P=0;P<O;P++)s[P]=e[k+P];var R=S+M-1,F=O-1,G=k+O-1,X=0,Y=0;if(e[G--]=e[R--],0!=--M){if(1===O){for(Y=1+(G-=M),X=1+(R-=M),P=M-1;0<=P;P--)e[Y+P]=e[X+P];return e[G]=s[F]}for(var Q=o;;){var ne=0,le=0,ce=!1;do{if(t(s[F],e[R])<0){if(e[G--]=e[R--],ne++,(le=0)==--M){ce=!0;break}}else if(e[G--]=s[F--],le++,ne=0,1==--O){ce=!0;break}}while((ne|le)<Q);if(ce)break;do{if(0!=(ne=M-ad(s[F],e,S,M,M-1,t))){for(M-=ne,Y=1+(G-=ne),X=1+(R-=ne),P=ne-1;0<=P;P--)e[Y+P]=e[X+P];if(0===M){ce=!0;break}}if(e[G--]=s[F--],1==--O){ce=!0;break}if(0!=(le=O-Sr(e[R],s,0,O,O-1,t))){for(O-=le,Y=1+(G-=le),X=1+(F-=le),P=0;P<le;P++)e[Y+P]=s[X+P];if(O<=1){ce=!0;break}}if(e[G--]=e[R--],0==--M){ce=!0;break}Q--}while(7<=ne||7<=le);if(ce)break;Q<0&&(Q=0),Q+=2}if((o=Q)<1&&(o=1),1===O){for(Y=1+(G-=M),X=1+(R-=M),P=M-1;0<=P;P--)e[Y+P]=e[X+P];e[G]=s[F]}else{if(0===O)throw new Error;for(X=G-(O-1),P=0;P<O;P++)e[X+P]=s[P]}}else for(X=G-(O-1),P=0;P<O;P++)e[X+P]=s[P]}(f,h,p,y))}n=[],r=[],this.mergeRuns=function(){for(;1<i;){var c=i-2;if(1<=c&&r[c-1]<=r[c]+r[c+1]||2<=c&&r[c-2]<=r[c]+r[c-1])r[c-1]<r[c+1]&&c--;else if(r[c]>r[c+1])break;l(c)}},this.forceMergeRuns=function(){for(;1<i;){var c=i-2;0<c&&r[c-1]<r[c+1]&&c--,l(c)}},this.pushRun=function(c,f){n[i]=c,r[i]=f,i+=1}}function Ul(e,t,n,r){var o=(r=r||e.length)-(n=n||0);if(!(o<2)){var i=0;if(o<32)Ua(e,n,r,n+(i=Ki(e,n,r,t)),t);else{var s=new Hg(e,t),l=function(f){for(var h=0;32<=f;)h|=1&f,f>>=1;return f+h}(o);do{if((i=Ki(e,n,r,t))<l){var c=o;l<c&&(c=l),Ua(e,n,n+c,n+i,t),i=c}s.pushRun(n,i),s.mergeRuns(),o-=i,n+=i}while(0!==o);s.forceMergeRuns()}}}function Ji(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}function Mr(){this._roots=[],this._displayList=[],this._displayListLen=0}pn.prototype={constructor:pn,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},childOfName:function(e){for(var t=this._children,n=0;n<t.length;n++)if(t[n].name===e)return t[n]},childCount:function(){return this._children.length},add:function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},addBefore:function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var n=this._children,r=n.indexOf(t);0<=r&&(n.splice(r,0,e),this._doAdd(e))}return this},_doAdd:function(e){e.parent&&e.parent.remove(e);var t=(e.parent=this).__storage,n=this.__zr;t&&t!==e.__storage&&(t.addToStorage(e),e instanceof pn&&e.addChildrenToStorage(t)),n&&n.refresh()},remove:function(e){var t=this.__zr,n=this.__storage,r=this._children,o=dn(r,e);return o<0||(r.splice(o,1),e.parent=null,n&&(n.delFromStorage(e),e instanceof pn&&e.delChildrenFromStorage(n)),t&&t.refresh()),this},removeAll:function(){var e,t,n=this._children,r=this.__storage;for(t=0;t<n.length;t++)e=n[t],r&&(r.delFromStorage(e),e instanceof pn&&e.delChildrenFromStorage(r)),e.parent=null;return n.length=0,this},eachChild:function(e,t){for(var n=this._children,r=0;r<n.length;r++)e.call(t,n[r],r);return this},traverse:function(e,t){for(var n=0;n<this._children.length;n++){var r=this._children[n];e.call(t,r),"group"===r.type&&r.traverse(e,t)}return this},addChildrenToStorage:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.addToStorage(n),n instanceof pn&&n.addChildrenToStorage(e)}},delChildrenFromStorage:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.delFromStorage(n),n instanceof pn&&n.delChildrenFromStorage(e)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(e){for(var t=null,n=new Vo(0,0,0,0),r=e||this._children,o=[],i=0;i<r.length;i++){var s=r[i];if(!s.ignore&&!s.invisible){var l=s.getBoundingRect(),c=s.getLocalTransform(o);c?(n.copy(l),n.applyTransform(c),(t=t||n.clone()).union(n)):(t=t||l.clone()).union(l)}}return t||n}},Rn(pn,ks),Mr.prototype={constructor:Mr,traverse:function(e,t){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(e,t)},getDisplayList:function(e,t){return t=t||!1,e&&this.updateDisplayList(t),this._displayList},updateDisplayList:function(e){this._displayListLen=0;for(var t=this._roots,n=this._displayList,r=0,o=t.length;r<o;r++)this._updateAndAddDisplayable(t[r],null,e);n.length=this._displayListLen,Cr.canvasSupported&&Ul(n,Ji)},_updateAndAddDisplayable:function(e,t,n){if(!e.ignore||n){e.beforeUpdate(),e.__dirty&&e.update(),e.afterUpdate();var r=e.clipPath;if(r){t=t?t.slice():[];for(var o=r,i=e;o;)o.parent=i,o.updateTransform(),t.push(o),o=(i=o).clipPath}if(e.isGroup){for(var s=e._children,l=0;l<s.length;l++){var c=s[l];e.__dirty&&(c.__dirty=!0),this._updateAndAddDisplayable(c,t,n)}e.__dirty=!1}else e.__clipPaths=t,this._displayList[this._displayListLen++]=e}},addRoot:function(e){e.__storage!==this&&(e instanceof pn&&e.addChildrenToStorage(this),this.addToStorage(e),this._roots.push(e))},delRoot:function(e){if(null==e){for(var t=0;t<this._roots.length;t++){var n=this._roots[t];n instanceof pn&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(e instanceof Array){t=0;for(var r=e.length;t<r;t++)this.delRoot(e[t])}else{var o=dn(this._roots,e);0<=o&&(this.delFromStorage(e),this._roots.splice(o,1),e instanceof pn&&e.delChildrenFromStorage(this))}},addToStorage:function(e){return e&&(e.__storage=this,e.dirty(!1)),this},delFromStorage:function(e){return e&&(e.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:Ji};var nh={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},In=function(e,t,n){return nh.hasOwnProperty(t)?n*e.dpr:n},bf=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],_i=function(e){this.extendFrom(e,!1)};function Zr(e,t,n){var r=null==t.x?0:t.x,o=null==t.x2?1:t.x2,i=null==t.y?0:t.y,s=null==t.y2?0:t.y2;return t.global||(r=r*n.width+n.x,o=o*n.width+n.x,i=i*n.height+n.y,s=s*n.height+n.y),r=isNaN(r)?0:r,o=isNaN(o)?1:o,i=isNaN(i)?0:i,s=isNaN(s)?0:s,e.createLinearGradient(r,i,o,s)}function mu(e,t,n){var r=n.width,o=n.height,i=Math.min(r,o),s=null==t.x?.5:t.x,l=null==t.y?.5:t.y,c=null==t.r?.5:t.r;return t.global||(s=s*r+n.x,l=l*o+n.y,c*=i),e.createRadialGradient(s,l,0,s,l,c)}for(var qr=_i.prototype={constructor:_i,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(e,t,n){var r=this,o=n&&n.style,i=!o||1!==e.__attrCachedBy;e.__attrCachedBy=1;for(var s=0;s<bf.length;s++){var l=bf[s],c=l[0];!i&&r[c]===o[c]||(e[c]=In(e,c,r[c]||l[1]))}!i&&r.fill===o.fill||(e.fillStyle=r.fill),!i&&r.stroke===o.stroke||(e.strokeStyle=r.stroke),!i&&r.opacity===o.opacity||(e.globalAlpha=null==r.opacity?1:r.opacity),!i&&r.blend===o.blend||(e.globalCompositeOperation=r.blend||"source-over"),this.hasStroke()&&(e.lineWidth=r.lineWidth/(this.strokeNoScale&&t&&t.getLineScale?t.getLineScale():1))},hasFill:function(){var e=this.fill;return null!=e&&"none"!==e},hasStroke:function(){var e=this.stroke;return null!=e&&"none"!==e&&0<this.lineWidth},extendFrom:function(e,t){if(e)for(var n in e)!e.hasOwnProperty(n)||!0!==t&&(!1===t?this.hasOwnProperty(n):null==e[n])||(this[n]=e[n])},set:function(e,t){"string"==typeof e?this[e]=t:this.extendFrom(e,!0)},clone:function(){var e=new this.constructor;return e.extendFrom(this,!0),e},getGradient:function(e,t,n){for(var r=("radial"===t.type?mu:Zr)(e,t,n),o=t.colorStops,i=0;i<o.length;i++)r.addColorStop(o[i].offset,o[i].color);return r}},ns=0;ns<bf.length;ns++){var zu=bf[ns];zu[0]in qr||(qr[zu[0]]=zu[1])}function qm(e,t){this.image=e,this.repeat=t,this.type="pattern"}function pu(){return!1}function ql(e,t,n){var r=Qn(),o=t.getWidth(),i=t.getHeight(),s=r.style;return s&&(s.position="absolute",s.left=0,s.top=0,s.width=o+"px",s.height=i+"px",r.setAttribute("data-zr-dom-id",e)),r.width=o*n,r.height=i*n,r}function fc(e,t,n){var r;n=n||Sl,"string"==typeof e?r=ql(e,t,n):xt(e)&&(e=(r=e).id),this.id=e;var o=(this.dom=r).style;o&&(r.onselectstart=pu,o["-webkit-user-select"]="none",o["user-select"]="none",o["-webkit-touch-callout"]="none",o["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",o.padding=0,o.margin=0,o["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=t,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n}_i.getGradient=qr.getGradient,fc.prototype={constructor:fc,__dirty:!0,__used:!(qm.prototype.getCanvasPattern=function(e){return e.createPattern(this.image,this.repeat||"repeat")}),__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var e=this.dpr;this.domBack=ql("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},resize:function(e,t){var n=this.dpr,r=this.dom,o=r.style,i=this.domBack;o&&(o.width=e+"px",o.height=t+"px"),r.width=e*n,r.height=t*n,i&&(i.width=e*n,i.height=t*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(e,t){var n,r=this.dom,o=this.ctx,i=r.width,s=r.height,l=(t=t||this.clearColor,this.motionBlur&&!e),c=this.lastFrameAlpha,f=this.dpr;if(l&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,i/f,s/f)),o.clearRect(0,0,i,s),t&&"transparent"!==t&&(t.colorStops?(n=t.__canvasGradient||_i.getGradient(o,t,{x:0,y:0,width:i,height:s}),t.__canvasGradient=n):t.image&&(n=qm.prototype.getCanvasPattern.call(t,o)),o.save(),o.fillStyle=n||t,o.fillRect(0,0,i,s),o.restore()),l){var h=this.domBack;o.save(),o.globalAlpha=c,o.drawImage(h,0,0,i,s),o.restore()}}};var ms="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){setTimeout(e,16)},Gd=new Oi(50);function Xl(e){if("string"!=typeof e)return e;var t=Gd.get(e);return t&&t.image}function Xm(e,t,n,r,o){if(e){if("string"!=typeof e)return e;if(t&&t.__zrImageSrc===e||!n)return t;var i=Gd.get(e),s={hostEl:n,cb:r,cbPayload:o};return i?Fu(t=i.image)||i.pending.push(s):((t=new Image).onload=t.onerror=wi,Gd.put(e,t.__cachedImgObj={image:t,pending:[s]}),t.src=t.__zrImageSrc=e),t}return t}function wi(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var n=e.pending[t],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}e.pending.length=0}function Fu(e){return e&&e.width&&e.height}var qi={},ps=0,Et=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,Ns="12px sans-serif",kr={};function qa(e,t){var n=e+":"+(t=t||Ns);if(qi[n])return qi[n];for(var r,o,i=(e+"").split("\n"),s=0,l=0,c=i.length;l<c;l++)s=Math.max((r=i[l],o=t,kr.measureText(r,o)).width,s);return 5e3<ps&&(ps=0,qi={}),ps++,qi[n]=s}function Qi(e,t,n,r,o,i,s,l){return s?(p=r,P=(k=ka(e,{rich:s,truncate:l,font:t,textAlign:h=n,textPadding:o,textLineHeight:i})).outerHeight,new Vo(il(0,O=k.outerWidth,h),sd(0,P,p),O,P)):function(c,f,h,p,y,b,S){var M=Uh(c,f,y,b,S),k=qa(c,f);y&&(k+=y[1]+y[3]);var O=M.outerHeight,F=new Vo(il(0,k,h),sd(0,O,p),k,O);return F.lineHeight=M.lineHeight,F}(e,t,n,r,o,i,l);var h,p,k,O,P}function il(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function sd(e,t,n){return"middle"===n?e-=t/2:"bottom"===n&&(e-=t),e}function Na(e,t,n){var o=t.textDistance,i=n.x,s=n.y;o=o||0;var l=n.height,c=n.width,f=l/2,h="left",p="top";switch(t.textPosition){case"left":i-=o,s+=f,h="right",p="middle";break;case"right":i+=o+c,s+=f,p="middle";break;case"top":i+=c/2,s-=o,h="center",p="bottom";break;case"bottom":i+=c/2,s+=l+o,h="center";break;case"inside":i+=c/2,s+=f,h="center",p="middle";break;case"insideLeft":i+=o,s+=f,p="middle";break;case"insideRight":i+=c-o,s+=f,h="right",p="middle";break;case"insideTop":i+=c/2,s+=o,h="center";break;case"insideBottom":i+=c/2,s+=l-o,h="center",p="bottom";break;case"insideTopLeft":i+=o,s+=o;break;case"insideTopRight":i+=c-o,s+=o,h="right";break;case"insideBottomLeft":i+=o,s+=l-o,p="bottom";break;case"insideBottomRight":i+=c-o,s+=l-o,h="right",p="bottom"}return(e=e||{}).x=i,e.y=s,e.textAlign=h,e.textVerticalAlign=p,e}function bo(e,t,n,r,o){if(!t)return"";var i=(e+"").split("\n");o=hc(t,n,r,o);for(var s=0,l=i.length;s<l;s++)i[s]=Wg(i[s],o);return i.join("\n")}function hc(e,t,n,r){(r=Fn({},r)).font=t,n=Dr(n,"..."),r.maxIterations=Dr(r.maxIterations,2);var o=r.minChar=Dr(r.minChar,0);r.cnCharWidth=qa("\u56fd",t);var i=r.ascCharWidth=qa("a",t);r.placeholder=Dr(r.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<o&&i<=s;l++)s-=i;var c=qa(n,t);return s<c&&(n="",c=0),s=e-c,r.ellipsis=n,r.ellipsisWidth=c,r.contentWidth=s,r.containerWidth=e,r}function Wg(e,t){var n=t.containerWidth,r=t.font,o=t.contentWidth;if(!n)return"";var i=qa(e,r);if(i<=n)return e;for(var s=0;;s++){if(i<=o||s>=t.maxIterations){e+=t.ellipsis;break}var l=0===s?Si(e,o,t.ascCharWidth,t.cnCharWidth):0<i?Math.floor(e.length*o/i):0;i=qa(e=e.substr(0,l),r)}return""===e&&(e=t.placeholder),e}function Si(e,t,n,r){for(var o=0,i=0,s=e.length;i<s&&o<t;i++){var l=e.charCodeAt(i);o+=0<=l&&l<=127?n:r}return i}function jd(e){return qa("\u56fd",e)}function Uh(e,t,n,r,o){null!=e&&(e+="");var i=Dr(r,jd(t)),s=e?e.split("\n"):[],l=s.length*i,c=l,f=!0;if(n&&(c+=n[0]+n[2]),e&&o){f=!1;var h=o.outerHeight,p=o.outerWidth;if(null!=h&&h<c)e="",s=[];else if(null!=p)for(var y=hc(p-(n?n[1]+n[3]:0),t,o.ellipsis,{minChar:o.minChar,placeholder:o.placeholder}),b=0,S=s.length;b<S;b++)s[b]=Wg(s[b],y)}return{lines:s,height:l,outerHeight:c,lineHeight:i,canCacheByTextString:f}}function ka(e,t){var n={lines:[],width:0,height:0};if(null!=e&&(e+=""),!e)return n;for(var r,o=Et.lastIndex=0;null!=(r=Et.exec(e));){var i=r.index;o<i&&qe(n,e.substring(o,i)),qe(n,r[2],r[1]),o=Et.lastIndex}o<e.length&&qe(n,e.substring(o,e.length));var s=n.lines,l=0,c=0,f=[],h=t.textPadding,p=t.truncate,y=p&&p.outerWidth,b=p&&p.outerHeight;h&&(null!=y&&(y-=h[1]+h[3]),null!=b&&(b-=h[0]+h[2]));for(var S=0;S<s.length;S++){for(var M=s[S],k=0,O=0,P=0;P<M.tokens.length;P++){var R=(xe=M.tokens[P]).styleName&&t.rich[xe.styleName]||{},F=xe.textPadding=R.textPadding,G=xe.font=R.font||t.font,X=xe.textHeight=Dr(R.textHeight,jd(G));if(F&&(X+=F[0]+F[2]),xe.height=X,xe.lineHeight=je(R.textLineHeight,t.textLineHeight,X),xe.textAlign=R&&R.textAlign||t.textAlign,xe.textVerticalAlign=R&&R.textVerticalAlign||"middle",null!=b&&l+xe.lineHeight>b)return{lines:[],width:0,height:0};xe.textWidth=qa(xe.text,G);var Y=R.textWidth,Q=null==Y||"auto"===Y;if("string"==typeof Y&&"%"===Y.charAt(Y.length-1))xe.percentWidth=Y,f.push(xe),Y=0;else{if(Q){Y=xe.textWidth;var ne=R.textBackgroundColor,le=ne&&ne.image;le&&Fu(le=Xl(le))&&(Y=Math.max(Y,le.width*X/le.height))}var ce=F?F[1]+F[3]:0;Y+=ce;var ye=null!=y?y-O:null;null!=ye&&ye<Y&&(!Q||ye<ce?(xe.text="",xe.textWidth=Y=0):(xe.text=bo(xe.text,ye-ce,G,p.ellipsis,{minChar:p.minChar}),xe.textWidth=qa(xe.text,G),Y=xe.textWidth+ce))}O+=xe.width=Y,R&&(k=Math.max(k,xe.lineHeight))}M.width=O,l+=M.lineHeight=k,c=Math.max(c,O)}for(n.outerWidth=n.width=Dr(t.textWidth,c),n.outerHeight=n.height=Dr(t.textHeight,l),h&&(n.outerWidth+=h[1]+h[3],n.outerHeight+=h[0]+h[2]),S=0;S<f.length;S++){var xe,Te=(xe=f[S]).percentWidth;xe.width=parseInt(Te,10)/100*c}return n}function qe(e,t,n){for(var r=""===t,o=t.split("\n"),i=e.lines,s=0;s<o.length;s++){var l=o[s],c={styleName:n,text:l,isLineHolder:!l&&!r};if(s)i.push({tokens:[c]});else{var f=(i[i.length-1]||(i[0]={tokens:[]})).tokens,h=f.length;1===h&&f[0].isLineHolder?f[0]=c:!l&&h&&!r||f.push(c)}}}function Di(e){var t=(e.fontSize||e.fontFamily)&&[e.fontStyle,e.fontWeight,(e.fontSize||12)+"px",e.fontFamily||"sans-serif"].join(" ");return t&&sr(t)||e.textFont||e.font}function qh(e,t){var n,r,o,i,s,l=t.x,c=t.y,f=t.width,h=t.height,p=t.r;f<0&&(l+=f,f=-f),h<0&&(c+=h,h=-h),"number"==typeof p?n=r=o=i=p:p instanceof Array?1===p.length?n=r=o=i=p[0]:2===p.length?(n=o=p[0],r=i=p[1]):3===p.length?(n=p[0],r=i=p[1],o=p[2]):(n=p[0],r=p[1],o=p[2],i=p[3]):n=r=o=i=0,f<n+r&&(n*=f/(s=n+r),r*=f/s),f<o+i&&(o*=f/(s=o+i),i*=f/s),h<r+o&&(r*=h/(s=r+o),o*=h/s),h<n+i&&(n*=h/(s=n+i),i*=h/s),e.moveTo(l+n,c),e.lineTo(l+f-r,c),0!==r&&e.arc(l+f-r,c+r,r,-Math.PI/2,0),e.lineTo(l+f,c+h-o),0!==o&&e.arc(l+f-o,c+h-o,o,0,Math.PI/2),e.lineTo(l+i,c+h),0!==i&&e.arc(l+i,c+h-i,i,Math.PI/2,Math.PI),e.lineTo(l,c+n),0!==n&&e.arc(l+n,c+n,n,Math.PI,1.5*Math.PI)}kr.measureText=function(e,t){var n=Er();return n.font=t||Ns,n.measureText(e)};var ea=Ns,kl={left:1,right:1,center:1},ii={top:1,bottom:1,middle:1},ki=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],gc={},al={};function $n(e){return ua(e),me(e.rich,ua),e}function ua(e){if(e){e.font=Di(e);var t=e.textAlign;"middle"===t&&(t="center"),e.textAlign=null==t||kl[t]?t:"left";var n=e.textVerticalAlign||e.textBaseline;"center"===n&&(n="middle"),e.textVerticalAlign=null==n||ii[n]?n:"top",e.textPadding&&(e.textPadding=Es(e.textPadding))}}function ud(e,t,n,r,o,i){r.rich?function(s,l,c,f,h,p){9!==p&&(l.__attrCachedBy=0);var y=s.__textCotentBlock;y&&!s.__dirtyText||(y=s.__textCotentBlock=ka(c,f)),function(b,S,M,k,O){var P=M.width,R=M.outerWidth,F=M.outerHeight,G=k.textPadding,X=I(al,b,k,O),Y=X.baseX,Q=X.baseY,ne=X.textAlign,le=X.textVerticalAlign;Yl(S,k,O,Y,Q);var ce=il(Y,R,ne),ye=sd(Q,F,le),xe=ce,Te=ye;G&&(xe+=G[3],Te+=G[0]);var Ee=xe+P;m(k)&&w(b,S,k,ce,ye,R,F);for(var Ve=0;Ve<M.lines.length;Ve++){for(var Be,nt=M.lines[Ve],bt=nt.tokens,_t=bt.length,wt=nt.lineHeight,Lt=nt.width,Ht=0,Ln=xe,Ft=Ee,Yn=_t-1;Ht<_t&&(!(Be=bt[Ht]).textAlign||"left"===Be.textAlign);)mc(b,S,Be,k,wt,Te,Ln,"left"),Lt-=Be.width,Ln+=Be.width,Ht++;for(;0<=Yn&&"right"===(Be=bt[Yn]).textAlign;)mc(b,S,Be,k,wt,Te,Ft,"right"),Lt-=Be.width,Ft-=Be.width,Yn--;for(Ln+=(P-(Ln-xe)-(Ee-Ft)-Lt)/2;Ht<=Yn;)mc(b,S,Be=bt[Ht],k,wt,Te,Ln+Be.width/2,"center"),Ln+=Be.width,Ht++;Te+=wt}}(s,l,y,f,h)}(e,t,n,r,o,i):function(s,l,c,f,h,p){var y,b=m(f),S=!1,M=2===l.__attrCachedBy;9!==p?(p&&(y=p.style,S=!b&&M&&y),l.__attrCachedBy=b?0:2):M&&(l.__attrCachedBy=0);var k=f.font||ea;S&&k===(y.font||ea)||(l.font=k);var O=s.__computedFont;s.__styleFont!==k&&(s.__styleFont=k,O=s.__computedFont=l.font);var P=f.textPadding,F=s.__textCotentBlock;F&&!s.__dirtyText||(F=s.__textCotentBlock=Uh(c,O,P,f.textLineHeight,f.truncate));var G=F.outerHeight,X=F.lines,Y=F.lineHeight,Q=I(al,s,f,h),ne=Q.baseX,le=Q.baseY,ce=Q.textAlign||"left",ye=Q.textVerticalAlign;Yl(l,f,h,ne,le);var xe=sd(le,G,ye),Te=ne,Ee=xe;if(b||P){var Ve=qa(c,O);P&&(Ve+=P[1]+P[3]);var Be=il(ne,Ve,ce);b&&w(s,l,f,Be,xe,Ve,G),P&&(Te=te(ne,ce,P),Ee+=P[0])}l.textAlign=ce,l.textBaseline="middle",l.globalAlpha=f.opacity||1;for(var nt=0;nt<ki.length;nt++){var bt=ki[nt],_t=bt[0],wt=bt[1],Lt=f[_t];S&&Lt===y[_t]||(l[wt]=In(l,wt,Lt||bt[2]))}Ee+=Y/2;var Ht=f.textStrokeWidth,Ft=!S||Ht!==(S?y.textStrokeWidth:null),Yn=!S||Ft||f.textStroke!==y.textStroke,or=j(f.textStroke,Ht),Tr=q(f.textFill);if(or&&(Ft&&(l.lineWidth=Ht),Yn&&(l.strokeStyle=or)),Tr&&(S&&f.textFill===y.textFill||(l.fillStyle=Tr)),1===X.length)or&&l.strokeText(X[0],Te,Ee),Tr&&l.fillText(X[0],Te,Ee);else for(nt=0;nt<X.length;nt++)or&&l.strokeText(X[nt],Te,Ee),Tr&&l.fillText(X[nt],Te,Ee),Ee+=Y}(e,t,n,r,o,i)}function Yl(e,t,n,r,o){if(n&&t.textRotation){var i=t.textOrigin;"center"===i?(r=n.width/2+n.x,o=n.height/2+n.y):i&&(r=i[0]+n.x,o=i[1]+n.y),e.translate(r,o),e.rotate(-t.textRotation),e.translate(-r,-o)}}function mc(e,t,n,r,o,i,s,l){var c=r.rich[n.styleName]||{};c.text=n.text;var f=n.textVerticalAlign,h=i+o/2;"top"===f?h=i+n.height/2:"bottom"===f&&(h=i+o-n.height/2),!n.isLineHolder&&m(c)&&w(e,t,c,"right"===l?s-n.width:"center"===l?s-n.width/2:s,h-n.height/2,n.width,n.height);var p=n.textPadding;p&&(s=te(s,l,p),h-=n.height/2-p[2]-n.textHeight/2),N(t,"shadowBlur",je(c.textShadowBlur,r.textShadowBlur,0)),N(t,"shadowColor",c.textShadowColor||r.textShadowColor||"transparent"),N(t,"shadowOffsetX",je(c.textShadowOffsetX,r.textShadowOffsetX,0)),N(t,"shadowOffsetY",je(c.textShadowOffsetY,r.textShadowOffsetY,0)),N(t,"textAlign",l),N(t,"textBaseline","middle"),N(t,"font",n.font||ea);var y=j(c.textStroke||r.textStroke,S),b=q(c.textFill||r.textFill),S=Dr(c.textStrokeWidth,r.textStrokeWidth);y&&(N(t,"lineWidth",S),N(t,"strokeStyle",y),t.strokeText(n.text,s,h)),b&&(N(t,"fillStyle",b),t.fillText(n.text,s,h))}function m(e){return!!(e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor)}function w(e,t,n,r,o,i,s){var l=n.textBackgroundColor,c=n.textBorderWidth,f=n.textBorderColor,h=tr(l);if(N(t,"shadowBlur",n.textBoxShadowBlur||0),N(t,"shadowColor",n.textBoxShadowColor||"transparent"),N(t,"shadowOffsetX",n.textBoxShadowOffsetX||0),N(t,"shadowOffsetY",n.textBoxShadowOffsetY||0),h||c&&f){t.beginPath();var p=n.textBorderRadius;p?qh(t,{x:r,y:o,width:i,height:s,r:p}):t.rect(r,o,i,s),t.closePath()}if(h)if(N(t,"fillStyle",l),null!=n.fillOpacity){var y=t.globalAlpha;t.globalAlpha=n.fillOpacity*n.opacity,t.fill(),t.globalAlpha=y}else t.fill();else if(xt(l)){var b=l.image;(b=Xm(b,null,e,T,l))&&Fu(b)&&t.drawImage(b,r,o,i,s)}c&&f&&(N(t,"lineWidth",c),N(t,"strokeStyle",f),null!=n.strokeOpacity?(y=t.globalAlpha,t.globalAlpha=n.strokeOpacity*n.opacity,t.stroke(),t.globalAlpha=y):t.stroke())}function T(e,t){t.image=e}function I(e,t,n,r){var o=n.x||0,i=n.y||0,s=n.textAlign,l=n.textVerticalAlign;if(r){var c=n.textPosition;if(c instanceof Array)o=r.x+$(c[0],r.width),i=r.y+$(c[1],r.height);else{var f=t&&t.calculateTextPosition?t.calculateTextPosition(gc,n,r):Na(gc,n,r);o=f.x,i=f.y,s=s||f.textAlign,l=l||f.textVerticalAlign}var h=n.textOffset;h&&(o+=h[0],i+=h[1])}return(e=e||{}).baseX=o,e.baseY=i,e.textAlign=s,e.textVerticalAlign=l,e}function N(e,t,n){return e[t]=In(e,t,n),e[t]}function j(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function q(e){return null==e||"none"===e?null:e.image||e.colorStops?"#000":e}function $(e,t){return"string"==typeof e?0<=e.lastIndexOf("%")?parseFloat(e)/100*t:parseFloat(e):e}function te(e,t,n){return"right"===t?e-n[1]:"center"===t?e+n[3]/2-n[1]/2:e+n[3]}function ae(e,t){return null!=e&&(e||t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor||t.textPadding)}function ge(){}var be=new Vo;function Ce(e){for(var t in ks.call(this,e=e||{}),e)e.hasOwnProperty(t)&&"style"!==t&&(this[t]=e[t]);this.style=new _i(e.style,this),this._rect=null,this.__clipPaths=null}function De(e){Ce.call(this,e)}Ce.prototype={constructor:Ce,type:"displayable",__dirty:!0,invisible:!(ge.prototype={constructor:ge,drawRectText:function(e,t){var n=this.style;t=n.textRect||t,this.__dirty&&$n(n);var r=n.text;if(null!=r&&(r+=""),ae(r,n)){e.save();var o=this.transform;n.transformText?this.setTransform(e):o&&(be.copy(t),be.applyTransform(o),t=be),ud(this,e,r,n,t,9),e.restore()}}}),z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(e){},afterBrush:function(e){},brush:function(e,t){},getBoundingRect:function(){},contain:function(e,t){return this.rectContain(e,t)},traverse:function(e,t){e.call(t,this)},rectContain:function(e,t){var n=this.transformCoordToLocal(e,t);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(e){return this.animate("style",e)},attrKV:function(e,t){"style"!==e?ks.prototype.attrKV.call(this,e,t):this.style.set(t)},setStyle:function(e,t){return this.style.set(e,t),this.dirty(!1),this},useStyle:function(e){return this.style=new _i(e,this),this.dirty(!1),this},calculateTextPosition:null},Rn(Ce,ks),_e(Ce,ge),De.prototype={constructor:De,type:"image",brush:function(e,t){var n=this.style,r=n.image;n.bind(e,this,t);var o=this._image=Xm(r,this._image,this,this.onload);if(o&&Fu(o)){var i=n.x||0,s=n.y||0,l=n.width,c=n.height,f=o.width/o.height;if(null==l&&null!=c?l=c*f:null==c&&null!=l?c=l/f:null==l&&null==c&&(l=o.width,c=o.height),this.setTransform(e),n.sWidth&&n.sHeight){var h=n.sx||0,p=n.sy||0;e.drawImage(o,h,p,n.sWidth,n.sHeight,i,s,l,c)}else if(n.sx&&n.sy){var y=l-(h=n.sx),b=c-(p=n.sy);e.drawImage(o,h,p,y,b,i,s,l,c)}else e.drawImage(o,i,s,l,c);null!=n.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))}},getBoundingRect:function(){var e=this.style;return this._rect||(this._rect=new Vo(e.x||0,e.y||0,e.width||0,e.height||0)),this._rect}},Rn(De,Ce);var Ne=314159;function Xe(e){return parseInt(e,10)}var ft=new Vo(0,0,0,0),an=new Vo(0,0,0,0);function jt(e,t,n){this.type="canvas";var r=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=n=Fn({},n||{}),this.dpr=n.devicePixelRatio||Sl,this._singleCanvas=r;var o=(this.root=e).style;o&&(o["-webkit-tap-highlight-color"]="transparent",o["-webkit-user-select"]=o["user-select"]=o["-webkit-touch-callout"]="none",e.innerHTML=""),this.storage=t;var p,y,b,i=this._zlevelList=[],s=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,r){var l=e.width,c=e.height;null!=n.width&&(l=n.width),null!=n.height&&(c=n.height),this.dpr=n.devicePixelRatio||1,e.width=l*this.dpr,e.height=c*this.dpr,this._width=l,this._height=c;var f=new fc(e,this,this.dpr);f.__builtin__=!0,f.initContext(),(s[Ne]=f).zlevel=Ne,i.push(Ne),this._domRoot=e}else{this._width=this._getSize(0),this._height=this._getSize(1);var h=this._domRoot=(p=this._width,y=this._height,(b=document.createElement("div")).style.cssText=["position:relative","width:"+p+"px","height:"+y+"px","padding:0","margin:0","border-width:0"].join(";")+";",b);e.appendChild(h)}this._hoverlayer=null,this._hoverElements=[]}function Xt(e){this.stage=(e=e||{}).stage||{},this.onframe=e.onframe||function(){},this._clips=[],this._running=!1,this._paused=!1,Nt.call(this)}jt.prototype={constructor:jt,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(e){var t=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,e,this._redrawId);for(var r=0;r<n.length;r++){var i=this._layers[n[r]];!i.__builtin__&&i.refresh&&i.refresh(0===r?this._backgroundColor:null)}return this.refreshHover(),this},addHover:function(e,t){if(!e.__hoverMir){var n=new e.constructor({style:e.style,shape:e.shape,z:e.z,z2:e.z2,silent:e.silent});return(n.__from=e).__hoverMir=n,t&&n.setStyle(t),this._hoverElements.push(n),n}},removeHover:function(e){var n=this._hoverElements,r=dn(n,e.__hoverMir);0<=r&&n.splice(r,1),e.__hoverMir=null},clearHover:function(e){for(var t=this._hoverElements,n=0;n<t.length;n++){var r=t[n].__from;r&&(r.__hoverMir=null)}t.length=0},refreshHover:function(){var e=this._hoverElements,t=e.length,n=this._hoverlayer;if(n&&n.clear(),t){Ul(e,this.storage.displayableSortFunc);var r={};(n=n||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(var o=0;o<t;){var i=e[o],s=i.__from;s&&s.__zr?(o++,s.invisible||(i.transform=s.transform,i.invTransform=s.invTransform,i.__clipPaths=s.__clipPaths,this._doPaintEl(i,n,!0,r))):(e.splice(o,1),s.__hoverMir=null,t--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(e,t,n){if(this._redrawId===n){t=t||!1,this._updateLayerStatus(e);var r=this._doPaintList(e,t);if(this._needsManuallyCompositing&&this._compositeManually(),!r){var o=this;ms(function(){o._paintList(e,t,n)})}}},_compositeManually:function(){var e=this.getLayer(Ne).ctx,t=this._domRoot.width,n=this._domRoot.height;e.clearRect(0,0,t,n),this.eachBuiltinLayer(function(r){r.virtual&&e.drawImage(r.dom,0,0,t,n)})},_doPaintList:function(e,t){for(var n=[],r=0;r<this._zlevelList.length;r++)(l=this._layers[this._zlevelList[r]]).__builtin__&&l!==this._hoverlayer&&(l.__dirty||t)&&n.push(l);for(var i=!0,s=0;s<n.length;s++){var l,c=(l=n[s]).ctx,f={};c.save();var h=t?l.__startIndex:l.__drawIndex,p=!t&&l.incremental&&Date.now,y=p&&Date.now(),b=l.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(l.__startIndex===l.__endIndex)l.clear(!1,b);else if(h===l.__startIndex){var S=e[h];S.incremental&&S.notClear&&!t||l.clear(!1,b)}-1===h&&(console.error("For some unknown reason. drawIndex is -1"),h=l.__startIndex);for(var M=h;M<l.__endIndex;M++){var k=e[M];if(this._doPaintEl(k,l,t,f),k.__dirty=k.__dirtyText=!1,p&&15<Date.now()-y)break}l.__drawIndex=M,l.__drawIndex<l.__endIndex&&(i=!1),f.prevElClipPaths&&c.restore(),c.restore()}return Cr.wxa&&me(this._layers,function(O){O&&O.ctx&&O.ctx.draw&&O.ctx.draw()}),i},_doPaintEl:function(e,t,n,r){var c,f,h,o=t.ctx,i=e.transform;if((t.__dirty||n)&&!e.invisible&&0!==e.style.opacity&&(!i||i[0]||i[3])&&(!e.culling||(f=this._width,h=this._height,ft.copy((c=e).getBoundingRect()),c.transform&&ft.applyTransform(c.transform),an.width=f,an.height=h,ft.intersect(an)))){var s=e.__clipPaths,l=r.prevElClipPaths;l&&!function(c,f){if(c===f)return!1;if(!c||!f||c.length!==f.length)return!0;for(var h=0;h<c.length;h++)if(c[h]!==f[h])return!0;return!1}(s,l)||(l&&(o.restore(),r.prevElClipPaths=null,r.prevEl=null),s&&(o.save(),function(c,f){for(var h=0;h<c.length;h++){var p=c[h];p.setTransform(f),f.beginPath(),p.buildPath(f,p.shape),f.clip(),p.restoreTransform(f)}}(s,o),r.prevElClipPaths=s)),e.beforeBrush&&e.beforeBrush(o),e.brush(o,r.prevEl||null),(r.prevEl=e).afterBrush&&e.afterBrush(o)}},getLayer:function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Ne);var n=this._layers[e];return n||((n=new fc("zr_"+e,this,this.dpr)).zlevel=e,n.__builtin__=!0,this._layerConfig[e]?Sn(n,this._layerConfig[e],!0):this._layerConfig[e-.01]&&Sn(n,this._layerConfig[e-.01],!0),t&&(n.virtual=t),this.insertLayer(e,n),n.initContext()),n},insertLayer:function(e,t){var f,n=this._layers,r=this._zlevelList,o=r.length,i=null,s=-1,l=this._domRoot;if(n[e]);else if((f=t)&&(f.__builtin__||"function"==typeof f.resize&&"function"==typeof f.refresh)){if(0<o&&e>r[0]){for(s=0;s<o-1&&!(r[s]<e&&r[s+1]>e);s++);i=n[r[s]]}if(r.splice(s+1,0,e),!(n[e]=t).virtual)if(i){var c=i.dom;c.nextSibling?l.insertBefore(t.dom,c.nextSibling):l.appendChild(t.dom)}else l.firstChild?l.insertBefore(t.dom,l.firstChild):l.appendChild(t.dom)}},eachLayer:function(e,t){var n,r,o=this._zlevelList;for(r=0;r<o.length;r++)e.call(t,this._layers[n=o[r]],n)},eachBuiltinLayer:function(e,t){var n,r,o,i=this._zlevelList;for(o=0;o<i.length;o++)(n=this._layers[r=i[o]]).__builtin__&&e.call(t,n,r)},eachOtherLayer:function(e,t){var n,r,o,i=this._zlevelList;for(o=0;o<i.length;o++)(n=this._layers[r=i[o]]).__builtin__||e.call(t,n,r)},getLayers:function(){return this._layers},_updateLayerStatus:function(e){function t(f){o&&(o.__endIndex!==f&&(o.__dirty=!0),o.__endIndex=f)}if(this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1}),this._singleCanvas)for(var n=1;n<e.length;n++)if((s=e[n]).zlevel!==e[n-1].zlevel||s.incremental){this._needsManuallyCompositing=!0;break}var r,o=null,i=0;for(n=0;n<e.length;n++){var s,l,c=(s=e[n]).zlevel;r!==c&&(r=c,i=0),s.incremental?((l=this.getLayer(c+.001,this._needsManuallyCompositing)).incremental=!0,i=1):l=this.getLayer(c+(0<i?.01:0),this._needsManuallyCompositing),l!==o&&(l.__used=!0,l.__startIndex!==n&&(l.__dirty=!0),l.__startIndex=n,l.__drawIndex=l.incremental?-1:n,t(n),o=l),s.__dirty&&(l.__dirty=!0,l.incremental&&l.__drawIndex<0&&(l.__drawIndex=n))}t(n),this.eachBuiltinLayer(function(f,h){!f.__used&&0<f.getElementCount()&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(e){e.clear()},setBackgroundColor:function(e){this._backgroundColor=e},configLayer:function(e,t){if(t){var n=this._layerConfig;n[e]?Sn(n[e],t,!0):n[e]=t;for(var r=0;r<this._zlevelList.length;r++){var o=this._zlevelList[r];(o===e||o===e+.01)&&Sn(this._layers[o],n[e],!0)}}},delLayer:function(e){var t=this._layers,n=this._zlevelList,r=t[e];r&&(r.dom.parentNode.removeChild(r.dom),delete t[e],n.splice(dn(n,e),1))},resize:function(e,t){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var r=this._opts;if(null!=e&&(r.width=e),null!=t&&(r.height=t),e=this._getSize(0),t=this._getSize(1),n.style.display="",this._width!==e||t!==this._height){for(var o in n.style.width=e+"px",n.style.height=t+"px",this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,t);me(this._progressiveLayers,function(i){i.resize(e,t)}),this.refresh(!0)}this._width=e,this._height=t}else{if(null==e||null==t)return;this._width=e,this._height=t,this.getLayer(Ne).resize(e,t)}return this},clearLayer:function(e){var t=this._layers[e];t&&t.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(e){if(this._singleCanvas&&!this._compositeManually)return this._layers[Ne].dom;var t=new fc("image",this,(e=e||{}).pixelRatio||this.dpr);if(t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor),e.pixelRatio<=this.dpr){this.refresh();var n=t.dom.width,r=t.dom.height,o=t.ctx;this.eachLayer(function(f){f.__builtin__?o.drawImage(f.dom,0,0,n,r):f.renderToCanvas&&(t.ctx.save(),f.renderToCanvas(t.ctx),t.ctx.restore())})}else for(var i={},s=this.storage.getDisplayList(!0),l=0;l<s.length;l++)this._doPaintEl(s[l],t,!0,i);return t.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,n=["width","height"][e],r=["clientWidth","clientHeight"][e],o=["paddingLeft","paddingTop"][e],i=["paddingRight","paddingBottom"][e];if(null!=t[n]&&"auto"!==t[n])return parseFloat(t[n]);var s=this.root,l=document.defaultView.getComputedStyle(s);return(s[r]||Xe(l[n])||Xe(s.style[n]))-(Xe(l[o])||0)-(Xe(l[i])||0)|0},pathToImage:function(e,t){t=t||this.dpr;var n=document.createElement("canvas"),r=n.getContext("2d"),o=e.getBoundingRect(),i=e.style,s=i.shadowBlur*t,l=i.shadowOffsetX*t,c=i.shadowOffsetY*t,f=i.hasStroke()?i.lineWidth:0,h=Math.max(f/2,s-l),p=Math.max(f/2,l+s),y=Math.max(f/2,s-c),b=Math.max(f/2,c+s),S=o.width+h+p,M=o.height+y+b;n.width=S*t,n.height=M*t,r.scale(t,t),r.clearRect(0,0,S,M),r.dpr=t;var k={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[h-o.x,y-o.y],e.rotation=0,e.scale=[1,1],e.updateTransform(),e&&e.brush(r);var O=new De({style:{x:0,y:0,image:n}});return null!=k.position&&(O.position=e.position=k.position),null!=k.rotation&&(O.rotation=e.rotation=k.rotation),null!=k.scale&&(O.scale=e.scale=k.scale),O}},Xt.prototype={constructor:Xt,addClip:function(e){this._clips.push(e)},addAnimator:function(e){e.animation=this;for(var t=e.getClips(),n=0;n<t.length;n++)this.addClip(t[n])},removeClip:function(e){var t=dn(this._clips,e);0<=t&&this._clips.splice(t,1)},removeAnimator:function(e){for(var t=e.getClips(),n=0;n<t.length;n++)this.removeClip(t[n]);e.animation=null},_update:function(){for(var e=(new Date).getTime()-this._pausedTime,t=e-this._time,n=this._clips,r=n.length,o=[],i=[],s=0;s<r;s++){var l=n[s],c=l.step(e,t);c&&(o.push(c),i.push(l))}for(s=0;s<r;)n[s]._needsRemove?(n[s]=n[r-1],n.pop(),r--):s++;for(r=o.length,s=0;s<r;s++)i[s].fire(o[s]);this._time=e,this.onframe(t),this.trigger("frame",t),this.stage.update&&this.stage.update()},_startLoop:function(){var e=this;this._running=!0,ms(function t(){e._running&&(ms(t),e._paused||e._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(e,t){var n=new Vi(e,(t=t||{}).loop,t.getter,t.setter);return this.addAnimator(n),n}},_e(Xt,Nt);var vn,On,er=Cr.domSupported,$r=(On={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:vn=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:Kt(vn,function(e){var t=e.replace("mouse","pointer");return On.hasOwnProperty(t)?t:e})}),Hr_mouse=["mousemove","mouseup"],Hr_pointer=["pointermove","pointerup"];function br(e){return"mousewheel"===e&&Cr.browser.firefox?"DOMMouseScroll":e}function Xo(e){var t=e.pointerType;return"pen"===t||"touch"===t}function xo(e){e&&(e.zrByTouch=!0)}function Wr(e,t){for(var n=t,r=!1;n&&9!==n.nodeType&&!(r=n.domBelongToZr||n!==t&&n===e.painterRoot);)n=n.parentNode;return r}function gr(e,t){this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}var gn=gr.prototype;gn.stopPropagation=gn.stopImmediatePropagation=gn.preventDefault=Pt;var To={mousedown:function(e){e=vr(this.dom,e),this._mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=vr(this.dom,e);var t=this._mayPointerCapture;!t||e.zrX===t[0]&&e.zrY===t[1]||vu(this,!0),this.trigger("mousemove",e)},mouseup:function(e){e=vr(this.dom,e),vu(this,!1),this.trigger("mouseup",e)},mouseout:function(e){e=vr(this.dom,e),this._pointerCapturing&&(e.zrEventControl="no_globalout"),e.zrIsToLocalDOM=Wr(this,e.toElement||e.relatedTarget),this.trigger("mouseout",e)},touchstart:function(e){xo(e=vr(this.dom,e)),this._lastTouchMoment=new Date,this.handler.processGesture(e,"start"),To.mousemove.call(this,e),To.mousedown.call(this,e)},touchmove:function(e){xo(e=vr(this.dom,e)),this.handler.processGesture(e,"change"),To.mousemove.call(this,e)},touchend:function(e){xo(e=vr(this.dom,e)),this.handler.processGesture(e,"end"),To.mouseup.call(this,e),+new Date-this._lastTouchMoment<300&&To.click.call(this,e)},pointerdown:function(e){To.mousedown.call(this,e)},pointermove:function(e){Xo(e)||To.mousemove.call(this,e)},pointerup:function(e){To.mouseup.call(this,e)},pointerout:function(e){Xo(e)||To.mouseout.call(this,e)}};me(["click","mousewheel","dblclick","contextmenu"],function(e){To[e]=function(t){t=vr(this.dom,t),this.trigger(e,t)}});var Ho={pointermove:function(e){Xo(e)||Ho.mousemove.call(this,e)},pointerup:function(e){Ho.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this._pointerCapturing;vu(this,!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function Ma(e,t,n,r){e.mounted[t]=n,e.listenerOpts[t]=r,yr(e.domTarget,br(t),n,r)}function Ot(e){var t,n,r,i=e.mounted;for(var s in i)i.hasOwnProperty(s)&&(t=e.domTarget,n=br(s),r=i[s],ln?t.removeEventListener(n,r,e.listenerOpts[s]):t.detachEvent("on"+n,r));e.mounted={}}function vu(e,t){if(e._mayPointerCapture=null,er&&e._pointerCapturing^t){e._pointerCapturing=t;var n=e._globalHandlerScope;t?function(e,t){function n(r){Ma(t,r,function(o){o=rt(o),Wr(e,o.target)||(o=function(i,s){return vr(i.dom,new gr(i,s),!0)}(e,o),t.domHandlers[r].call(e,o))},{capture:!0})}Cr.pointerEventsSupported?me(Hr_pointer,n):Cr.touchEventsSupported||me(Hr_mouse,n)}(e,n):Ot(n)}}function Ls(e,t){this.domTarget=e,this.domHandlers=t,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function pa(e,t){Nt.call(this),this.dom=e,this.painterRoot=t,this._localHandlerScope=new Ls(e,To),er&&(this._globalHandlerScope=new Ls(document,Ho)),this._pointerCapturing=!1,this._mayPointerCapture=null,function(e,t){var n=t.domHandlers;Cr.pointerEventsSupported?me($r.pointer,function(r){Ma(t,r,function(o){n[r].call(e,o)})}):(Cr.touchEventsSupported&&me($r.touch,function(r){Ma(t,r,function(o){n[r].call(e,o),function(i){i.touching=!0,null!=i.touchTimer&&(clearTimeout(i.touchTimer),i.touchTimer=null),i.touchTimer=setTimeout(function(){i.touching=!1,i.touchTimer=null},700)}(t)})}),me($r.mouse,function(r){Ma(t,r,function(o){o=rt(o),t.touching||n[r].call(e,o)})}))}(this,this._localHandlerScope)}var q0=pa.prototype;q0.dispose=function(){Ot(this._localHandlerScope),er&&Ot(this._globalHandlerScope)},q0.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},_e(pa,Nt);var Xh=!Cr.canvasSupported,xf={canvas:jt},rh={};function Yh(e,t){var n=new jn(Yr(),e,t);return rh[n.id]=n}function Ud(e,t){xf[e]=t}var jn=function(e,t,n){n=n||{},this.dom=t,this.id=e;var r=this,o=new Mr,i=n.renderer;if(Xh){if(!xf.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");i="vml"}else i&&xf[i]||(i="canvas");var s=new xf[i](t,o,n,e);this.storage=o,this.painter=s;var l=Cr.node||Cr.worker?null:new pa(s.getViewportRoot(),s.root);this.handler=new Uo(o,s,l,s.root),this.animation=new Xt({stage:{update:Nn(this.flush,this)}}),this.animation.start();var c=o.delFromStorage,f=o.addToStorage;o.delFromStorage=function(h){c.call(o,h),h&&h.removeSelfFromZr(r)},o.addToStorage=function(h){f.call(o,h),h.addSelfToZr(r)}};jn.prototype={constructor:jn,getId:function(){return this.id},add:function(e){this.storage.addRoot(e),this._needsRefresh=!0},remove:function(e){this.storage.delRoot(e),this._needsRefresh=!0},configLayer:function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this._needsRefresh=!0},setBackgroundColor:function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var e;this._needsRefresh&&(e=!0,this.refreshImmediately()),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately()),e&&this.trigger("rendered")},addHover:function(e,t){if(this.painter.addHover){var n=this.painter.addHover(e,t);return this.refreshHover(),n}},removeHover:function(e){this.painter.removeHover&&(this.painter.removeHover(e),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(e){this.painter.resize((e=e||{}).width,e.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,t){return this.painter.pathToImage(e,t)},setCursorStyle:function(e){this.handler.setCursorStyle(e)},findHover:function(e,t){return this.handler.findHover(e,t)},on:function(e,t,n){this.handler.on(e,t,n)},off:function(e,t){this.handler.off(e,t)},trigger:function(e,t){this.handler.trigger(e,t)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(e){delete rh[e]}(this.id)}};var av=(Object.freeze||Object)({version:"4.3.2",init:Yh,dispose:function(e){if(e)e.dispose();else{for(var t in rh)rh.hasOwnProperty(t)&&rh[t].dispose();rh={}}return this},getInstance:function(e){return rh[e]},registerPainter:Ud}),qd=me,Gg=xt,Zh=rn,sv="series\0";function Js(e){return e instanceof Array?e:null==e?[]:[e]}function Qs(e,t,n){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var r=0,o=n.length;r<o;r++){var i=n[r];!e.emphasis[t].hasOwnProperty(i)&&e[t].hasOwnProperty(i)&&(e.emphasis[t][i]=e[t][i])}}}var uv=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function oh(e){return!Gg(e)||Zh(e)||e instanceof Date?e:e.value}function Ym(e,t){t=(t||[]).slice();var n=Kt(e||[],function(r,o){return{exist:r}});return qd(t,function(r,o){if(Gg(r)){for(var i=0;i<n.length;i++)if(!n[i].option&&null!=r.id&&n[i].exist.id===r.id+"")return n[i].option=r,void(t[o]=null);for(i=0;i<n.length;i++){var s=n[i].exist;if(!(n[i].option||null!=s.id&&null!=r.id||null==r.name||vs(r)||vs(s)||s.name!==r.name+""))return n[i].option=r,void(t[o]=null)}}}),qd(t,function(r,o){if(Gg(r)){for(var i=0;i<n.length;i++)if(!n[i].option&&!vs(n[i].exist)&&null==r.id){n[i].option=r;break}i>=n.length&&n.push({option:r})}}),n}function X0(e){var t=ut();qd(e,function(n,r){var o=n.exist;o&&t.set(o.id,n)}),qd(e,function(n,r){var o=n.option;_s(!o||null==o.id||!t.get(o.id)||t.get(o.id)===n,"id duplicates: "+(o&&o.id)),o&&null!=o.id&&t.set(o.id,n),n.keyInfo||(n.keyInfo={})}),qd(e,function(n,r){var o=n.exist,i=n.option,s=n.keyInfo;if(Gg(i)){if(s.name=null!=i.name?i.name+"":o?o.name:sv+r,o)s.id=o.id;else if(null!=i.id)s.id=i.id+"";else for(var l=0;s.id="\0"+s.name+"\0"+l++,t.get(s.id););t.set(s.id,n)}})}function lv(e){var t=e.name;return!(!t||!t.indexOf(sv))}function vs(e){return Gg(e)&&e.id&&0===(e.id+"").indexOf("\0_ec_\0")}function Ai(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?rn(t.dataIndex)?Kt(t.dataIndex,function(n){return e.indexOfRawIndex(n)}):e.indexOfRawIndex(t.dataIndex):null!=t.name?rn(t.name)?Kt(t.name,function(n){return e.indexOfName(n)}):e.indexOfName(t.name):void 0}function La(){var e="__\0ec_inner_"+ih+++"_"+Math.random().toFixed(5);return function(t){return t[e]||(t[e]={})}}var ih=0;function Xa(e,t,n){if(tr(t)){var r={};r[t+"Index"]=0,t=r}var o=n&&n.defaultMainType;!o||Zl(t,o+"Index")||Zl(t,o+"Id")||Zl(t,o+"Name")||(t[o+"Index"]=0);var i={};return qd(t,function(s,l){if(s=t[l],"dataIndex"!==l&&"dataIndexInside"!==l){var c=l.match(/^(\w+)(Index|Id|Name)$/)||[],f=c[1],h=(c[2]||"").toLowerCase();if(!(!f||!h||null==s||"index"===h&&"none"===s||n&&n.includeMainTypes&&dn(n.includeMainTypes,f)<0)){var p={mainType:f};"index"===h&&"all"===s||(p[h]=s);var y=e.queryComponents(p);i[f+"Models"]=y,i[f+"Model"]=y[0]}}else i[l]=s}),i}function Zl(e,t){return e&&e.hasOwnProperty(t)}function cv(e,t,n){e.setAttribute?e.setAttribute(t,n):e[t]=n}function pc(e){return"auto"===e?Cr.domSupported?"html":"richText":e||"html"}function Ta(e,t){var n=ut(),r=[];return me(e,function(o){var i=t(o);(n.get(i)||(r.push(i),n.set(i,[]))).push(o)}),{keys:r,buckets:n}}var ld="___EC__COMPONENT__CONTAINER___";function sl(e){var t={main:"",sub:""};return e&&(e=e.split("."),t.main=e[0]||"",t.sub=e[1]||""),t}function ah(e){(e.$constructor=e).extend=function(t){function n(){t.$constructor?t.$constructor.apply(this,arguments):r.apply(this,arguments)}var r=this;return Fn(n.prototype,t),n.extend=this.extend,n.superCall=la,n.superApply=ul,Rn(n,this),n.superClass=r,n}}var _f=0;function Kh(e){var t=["__\0is_clz",_f++,Math.random().toFixed(3)].join("_");e.prototype[t]=!0,e.isInstance=function(n){return!(!n||!n[t])}}function la(e,t){var n=gi(arguments,2);return this.superClass.prototype[t].apply(e,n)}function ul(e,t,n){return this.superClass.prototype[t].apply(e,n)}function Da(e,t){t=t||{};var n={};if(e.registerClass=function(o,i){return i&&(_s(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(s=i),'componentType "'+s+'" illegal'),(i=sl(i)).sub?i.sub!==ld&&((function(s){var l=n[s.main];return l&&l[ld]||((l=n[s.main]={})[ld]=!0),l}(i))[i.sub]=o):n[i.main]=o),o;var s},e.getClass=function(o,i,s){var l=n[o];if(l&&l[ld]&&(l=i?l[i]:null),s&&!l)throw new Error(i?"Component "+o+"."+(i||"")+" not exists. Load it first.":o+".type should be specified.");return l},e.getClassesByMainType=function(o){o=sl(o);var i=[],s=n[o.main];return s&&s[ld]?me(s,function(l,c){c!==ld&&i.push(l)}):i.push(s),i},e.hasClass=function(o){return o=sl(o),!!n[o.main]},e.getAllClassMainTypes=function(){var o=[];return me(n,function(i,s){o.push(s)}),o},e.hasSubTypes=function(o){o=sl(o);var i=n[o.main];return i&&i[ld]},e.parseClassType=sl,t.registerWhenExtend){var r=e.extend;r&&(e.extend=function(o){var i=r.call(this,o);return e.registerClass(i,o.type)})}return e}function Yo(e){for(var t=0;t<e.length;t++)e[t][1]||(e[t][1]=e[t][0]);return function(n,r,o){for(var i={},s=0;s<e.length;s++){var l=e[s][1];if(!(r&&0<=dn(r,l)||o&&dn(o,l)<0)){var c=n.getShallow(l);null!=c&&(i[e[s][0]]=c)}}return i}}var dv=Yo([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Lc={getLineStyle:function(e){var t=dv(this,e);return t.lineDash=this.getLineDash(t.lineWidth),t},getLineDash:function(e){null==e&&(e=1);var t=this.get("type"),n=Math.max(e,2),r=4*e;return"solid"!==t&&null!=t&&("dashed"===t?[r,r]:[n,n])}},Jh=Yo([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),Zm={getAreaStyle:function(e,t){return Jh(this,e,t)}},jg=Math.pow,Vu=Math.sqrt,cd=Vu(3),ll=1/3,va=hn(),ta=hn(),eu=hn();function dd(e){return-1e-8<e&&e<1e-8}function Xd(e){return 1e-8<e||e<-1e-8}function Xi(e,t,n,r,o){var i=1-o;return i*i*(i*e+3*o*t)+o*o*(o*r+3*i*n)}function fd(e,t,n,r,o){var i=1-o;return 3*(((t-e)*i+2*(n-t)*o)*i+(r-n)*o*o)}function $l(e,t,n,r,o){var i=6*n-12*t+6*e,s=9*t+3*r-3*e-9*n,l=3*t-3*e,c=0;if(dd(s))Xd(i)&&0<=(h=-l/i)&&h<=1&&(o[c++]=h);else{var f=i*i-4*s*l;if(dd(f))o[0]=-i/(2*s);else if(0<f){var h,p=Vu(f),y=(-i-p)/(2*s);0<=(h=(-i+p)/(2*s))&&h<=1&&(o[c++]=h),0<=y&&y<=1&&(o[c++]=y)}}return c}function sh(e,t,n,r,o,i){var s=(t-e)*o+e,l=(n-t)*o+t,c=(r-n)*o+n,f=(l-s)*o+s,h=(c-l)*o+l,p=(h-f)*o+f;i[0]=e,i[1]=s,i[2]=f,i[3]=p,i[4]=p,i[5]=h,i[6]=c,i[7]=r}function Hu(e,t,n,r){var o=1-r;return o*(o*e+2*r*t)+r*r*n}function wf(e,t,n,r){return 2*((1-r)*(t-e)+r*(n-t))}function Sf(e,t,n){var r=e+n-2*t;return 0==r?.5:(e-t)/r}function Wu(e,t,n,r,o){var i=(t-e)*r+e,s=(n-t)*r+t,l=(s-i)*r+i;o[0]=e,o[1]=i,o[2]=l,o[3]=l,o[4]=s,o[5]=n}var Bs=Math.min,tu=Math.max,Yd=Math.sin,$m=Math.cos,Qh=2*Math.PI,Ml=hn(),fv=hn(),uh=hn();function ca(e,t,n){if(0!==e.length){var r,o=e[0],i=o[0],s=o[0],l=o[1],c=o[1];for(r=1;r<e.length;r++)i=Bs(i,(o=e[r])[0]),s=tu(s,o[0]),l=Bs(l,o[1]),c=tu(c,o[1]);t[0]=i,t[1]=l,n[0]=s,n[1]=c}}function Cf(e,t,n,r,o,i){o[0]=Bs(e,n),o[1]=Bs(t,r),i[0]=tu(e,n),i[1]=tu(t,r)}var lh=[],qg=[];function cl(e,t,n,r,o,i,s,l,c,f){var h,p=$l,y=Xi,b=p(e,n,o,s,lh);for(c[0]=1/0,c[1]=1/0,f[0]=-1/0,f[1]=-1/0,h=0;h<b;h++){var S=y(e,n,o,s,lh[h]);c[0]=Bs(S,c[0]),f[0]=tu(S,f[0])}for(b=p(t,r,i,l,qg),h=0;h<b;h++){var M=y(t,r,i,l,qg[h]);c[1]=Bs(M,c[1]),f[1]=tu(M,f[1])}c[0]=Bs(e,c[0]),f[0]=tu(e,f[0]),c[0]=Bs(s,c[0]),f[0]=tu(s,f[0]),c[1]=Bs(t,c[1]),f[1]=tu(t,f[1]),c[1]=Bs(l,c[1]),f[1]=tu(l,f[1])}function xb(e,t,n,r,o,i,s,l,c){var f=hu,h=ri,p=Math.abs(o-i);if(p%Qh<1e-4&&1e-4<p)return l[0]=e-n,l[1]=t-r,c[0]=e+n,void(c[1]=t+r);if(Ml[0]=$m(o)*n+e,Ml[1]=Yd(o)*r+t,fv[0]=$m(i)*n+e,fv[1]=Yd(i)*r+t,f(l,Ml,fv),h(c,Ml,fv),(o%=Qh)<0&&(o+=Qh),(i%=Qh)<0&&(i+=Qh),i<o&&!s?i+=Qh:o<i&&s&&(o+=Qh),s){var y=i;i=o,o=y}for(var b=0;b<i;b+=Math.PI/2)o<b&&(uh[0]=$m(b)*n+e,uh[1]=Yd(b)*r+t,f(l,uh,l),h(c,uh,c))}var ys={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},hd=[],kf=[],gd=[],Kl=[],hv=Math.min,gv=Math.max,Ro=Math.cos,Mi=Math.sin,Jl=Math.sqrt,Xg=Math.abs,nu="undefined"!=typeof Float32Array,_o=function(e){this._saveData=!e,this._saveData&&(this.data=[]),this._ctx=null};function Zd(e,t,n,r,o,i,s){if(0===o)return!1;var c,l=o;if(t+l<s&&r+l<s||s<t-l&&s<r-l||e+l<i&&n+l<i||i<e-l&&i<n-l)return!1;if(e===n)return Math.abs(i-e)<=l/2;var f=(c=(t-r)/(e-n))*i-s+(e*r-n*t)/(e-n);return f*f/(c*c+1)<=l/2*l/2}function $d(e,t,n,r,o,i,s,l,c,f,h){if(0===c)return!1;var p=c;return!(t+p<h&&r+p<h&&i+p<h&&l+p<h||h<t-p&&h<r-p&&h<i-p&&h<l-p||e+p<f&&n+p<f&&o+p<f&&s+p<f||f<e-p&&f<n-p&&f<o-p&&f<s-p)&&function(y,b,S,M,k,O,P,R,F,G,X){var Y,Q,ne,le,ce,ye=.005,xe=1/0;va[0]=F,va[1]=G;for(var Te=0;Te<1;Te+=.05)ta[0]=Xi(y,S,k,P,Te),ta[1]=Xi(b,M,O,R,Te),(le=Pa(va,ta))<xe&&(Y=Te,xe=le);xe=1/0;for(var Ee=0;Ee<32&&!(ye<1e-4);Ee++)ne=Y+ye,ta[0]=Xi(y,S,k,P,Q=Y-ye),ta[1]=Xi(b,M,O,R,Q),le=Pa(ta,va),0<=Q&&le<xe?(Y=Q,xe=le):(eu[0]=Xi(y,S,k,P,ne),eu[1]=Xi(b,M,O,R,ne),ce=Pa(eu,va),ne<=1&&ce<xe?(Y=ne,xe=ce):ye*=.5);return Vu(xe)}(e,t,n,r,o,i,s,l,f,h)<=p/2}function _b(e,t,n,r,o,i,s,l,c){if(0===s)return!1;var f=s;return!(t+f<c&&r+f<c&&i+f<c||c<t-f&&c<r-f&&c<i-f||e+f<l&&n+f<l&&o+f<l||l<e-f&&l<n-f&&l<o-f)&&function(h,p,y,b,S,M,k,O,P){var R,F=.005,G=1/0;va[0]=k,va[1]=O;for(var X=0;X<1;X+=.05)ta[0]=Hu(h,y,S,X),ta[1]=Hu(p,b,M,X),(le=Pa(va,ta))<G&&(R=X,G=le);G=1/0;for(var Y=0;Y<32&&!(F<1e-4);Y++){var Q=R-F,ne=R+F;ta[0]=Hu(h,y,S,Q),ta[1]=Hu(p,b,M,Q);var le=Pa(ta,va);if(0<=Q&&le<G)R=Q,G=le;else{eu[0]=Hu(h,y,S,ne),eu[1]=Hu(p,b,M,ne);var ce=Pa(eu,va);ne<=1&&ce<G?(R=ne,G=ce):F*=.5}}return Vu(G)}(e,t,n,r,o,i,l,c)<=f/2}_o.prototype={constructor:_o,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(e,t,n){this._ux=Xg((n=n||0)/Sl/e)||0,this._uy=Xg(n/Sl/t)||0},getContext:function(){return this._ctx},beginPath:function(e){return(this._ctx=e)&&e.beginPath(),e&&(this.dpr=e.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(e,t){return this.addData(ys.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},lineTo:function(e,t){var n=Xg(e-this._xi)>this._ux||Xg(t-this._yi)>this._uy||this._len<5;return this.addData(ys.L,e,t),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(e,t):this._ctx.lineTo(e,t)),n&&(this._xi=e,this._yi=t),this},bezierCurveTo:function(e,t,n,r,o,i){return this.addData(ys.C,e,t,n,r,o,i),this._ctx&&(this._needsDash()?this._dashedBezierTo(e,t,n,r,o,i):this._ctx.bezierCurveTo(e,t,n,r,o,i)),this._xi=o,this._yi=i,this},quadraticCurveTo:function(e,t,n,r){return this.addData(ys.Q,e,t,n,r),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(e,t,n,r):this._ctx.quadraticCurveTo(e,t,n,r)),this._xi=n,this._yi=r,this},arc:function(e,t,n,r,o,i){return this.addData(ys.A,e,t,n,n,r,o-r,0,i?0:1),this._ctx&&this._ctx.arc(e,t,n,r,o,i),this._xi=Ro(o)*n+e,this._yi=Mi(o)*n+t,this},arcTo:function(e,t,n,r,o){return this._ctx&&this._ctx.arcTo(e,t,n,r,o),this},rect:function(e,t,n,r){return this._ctx&&this._ctx.rect(e,t,n,r),this.addData(ys.R,e,t,n,r),this},closePath:function(){this.addData(ys.Z);var e=this._ctx,t=this._x0,n=this._y0;return e&&(this._needsDash()&&this._dashedLineTo(t,n),e.closePath()),this._xi=t,this._yi=n,this},fill:function(e){e&&e.fill(),this.toStatic()},stroke:function(e){e&&e.stroke(),this.toStatic()},setLineDash:function(e){if(e instanceof Array){this._lineDash=e;for(var t=this._dashIdx=0,n=0;n<e.length;n++)t+=e[n];this._dashSum=t}return this},setLineDashOffset:function(e){return this._dashOffset=e,this},len:function(){return this._len},setData:function(e){var t=e.length;this.data&&this.data.length===t||!nu||(this.data=new Float32Array(t));for(var n=0;n<t;n++)this.data[n]=e[n];this._len=t},appendPath:function(e){e instanceof Array||(e=[e]);for(var t=e.length,n=0,r=this._len,o=0;o<t;o++)n+=e[o].len();for(nu&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+n)),o=0;o<t;o++)for(var i=e[o].data,s=0;s<i.length;s++)this.data[r++]=i[s];this._len=r},addData:function(e){if(this._saveData){var t=this.data;this._len+arguments.length>t.length&&(this._expandData(),t=this.data);for(var n=0;n<arguments.length;n++)t[this._len++]=arguments[n];this._prevCmd=e}},_expandData:function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(e,t){var n,r,o=this._dashSum,i=this._dashOffset,s=this._lineDash,l=this._ctx,c=this._xi,f=this._yi,h=e-c,p=t-f,y=Jl(h*h+p*p),b=c,S=f,M=s.length;for(i<0&&(i=o+i),b-=(i%=o)*(h/=y),S-=i*(p/=y);0<h&&b<=e||h<0&&e<=b||0===h&&(0<p&&S<=t||p<0&&t<=S);)b+=h*(n=s[r=this._dashIdx]),S+=p*n,this._dashIdx=(r+1)%M,0<h&&b<c||h<0&&c<b||0<p&&S<f||p<0&&f<S||l[r%2?"moveTo":"lineTo"](0<=h?hv(b,e):gv(b,e),0<=p?hv(S,t):gv(S,t));this._dashOffset=-Jl((h=b-e)*h+(p=S-t)*p)},_dashedBezierTo:function(e,t,n,r,o,i){var s,l,c,f,h,p=this._dashSum,y=this._dashOffset,b=this._lineDash,S=this._ctx,M=this._xi,k=this._yi,O=Xi,P=0,R=this._dashIdx,F=b.length,G=0;for(y<0&&(y=p+y),y%=p,s=0;s<1;s+=.1)l=O(M,e,n,o,s+.1)-O(M,e,n,o,s),c=O(k,t,r,i,s+.1)-O(k,t,r,i,s),P+=Jl(l*l+c*c);for(;R<F&&!(y<(G+=b[R]));R++);for(s=(G-y)/P;s<=1;)f=O(M,e,n,o,s),h=O(k,t,r,i,s),R%2?S.moveTo(f,h):S.lineTo(f,h),s+=b[R]/P,R=(R+1)%F;R%2!=0&&S.lineTo(o,i),this._dashOffset=-Jl((l=o-f)*l+(c=i-h)*c)},_dashedQuadraticTo:function(e,t,n,r){var o=n,i=r;n=(n+2*e)/3,r=(r+2*t)/3,this._dashedBezierTo(e=(this._xi+2*e)/3,t=(this._yi+2*t)/3,n,r,o,i)},toStatic:function(){var e=this.data;e instanceof Array&&(e.length=this._len,nu&&(this.data=new Float32Array(e)))},getBoundingRect:function(){hd[0]=hd[1]=gd[0]=gd[1]=Number.MAX_VALUE,kf[0]=kf[1]=Kl[0]=Kl[1]=-Number.MAX_VALUE;for(var e,t,n,r,o,i,s,l,c,f,h,p,y,b,S=this.data,M=0,k=0,O=0,P=0,R=0;R<S.length;){var F=S[R++];switch(1===R&&(O=M=S[R],P=k=S[R+1]),F){case ys.M:M=O=S[R++],k=P=S[R++],gd[0]=O,gd[1]=P,Kl[0]=O,Kl[1]=P;break;case ys.L:Cf(M,k,S[R],S[R+1],gd,Kl),M=S[R++],k=S[R++];break;case ys.C:cl(M,k,S[R++],S[R++],S[R++],S[R++],S[R],S[R+1],gd,Kl),M=S[R++],k=S[R++];break;case ys.Q:t=k,n=S[R++],r=S[R++],i=S[R+1],s=gd,l=Kl,f=c=void 0,f=Hu,h=tu(Bs((c=Sf)(e=M,n,o=S[R]),1),0),p=tu(Bs(c(t,r,i),1),0),y=f(e,n,o,h),b=f(t,r,i,p),s[0]=Bs(e,o,y),s[1]=Bs(t,i,b),l[0]=tu(e,o,y),l[1]=tu(t,i,b),M=S[R++],k=S[R++];break;case ys.A:var G=S[R++],X=S[R++],Y=S[R++],Q=S[R++],ne=S[R++],le=S[R++]+ne;R+=1;var ce=1-S[R++];1===R&&(O=Ro(ne)*Y+G,P=Mi(ne)*Q+X),xb(G,X,Y,Q,ne,le,ce,gd,Kl),M=Ro(le)*Y+G,k=Mi(le)*Q+X;break;case ys.R:Cf(O=M=S[R++],P=k=S[R++],O+S[R++],P+S[R++],gd,Kl);break;case ys.Z:M=O,k=P}hu(hd,hd,gd),ri(kf,kf,Kl)}return 0===R&&(hd[0]=hd[1]=kf[0]=kf[1]=0),new Vo(hd[0],hd[1],kf[0]-hd[0],kf[1]-hd[1])},rebuildPath:function(e){for(var t,n,r,o,i,s,l=this.data,c=this._ux,f=this._uy,h=this._len,p=0;p<h;){var y=l[p++];switch(1===p&&(t=r=l[p],n=o=l[p+1]),y){case ys.M:t=r=l[p++],n=o=l[p++],e.moveTo(r,o);break;case ys.L:i=l[p++],s=l[p++],(Xg(i-r)>c||Xg(s-o)>f||p===h-1)&&(e.lineTo(i,s),r=i,o=s);break;case ys.C:e.bezierCurveTo(l[p++],l[p++],l[p++],l[p++],l[p++],l[p++]),r=l[p-2],o=l[p-1];break;case ys.Q:e.quadraticCurveTo(l[p++],l[p++],l[p++],l[p++]),r=l[p-2],o=l[p-1];break;case ys.A:var b=l[p++],S=l[p++],M=l[p++],k=l[p++],O=l[p++],P=l[p++],R=l[p++],F=l[p++],G=k<M?M:k,X=k<M?1:M/k,Y=k<M?k/M:1,Q=O+P;.001<Math.abs(M-k)?(e.translate(b,S),e.rotate(R),e.scale(X,Y),e.arc(0,0,G,O,Q,1-F),e.scale(1/X,1/Y),e.rotate(-R),e.translate(-b,-S)):e.arc(b,S,G,O,Q,1-F),1===p&&(t=Ro(O)*M+b,n=Mi(O)*k+S),r=Ro(Q)*M+b,o=Mi(Q)*k+S;break;case ys.R:t=r=l[p],n=o=l[p+1],e.rect(l[p++],l[p++],l[p++],l[p++]);break;case ys.Z:e.closePath(),r=t,o=n}}}},_o.CMD=ys;var eg=2*Math.PI;function Mf(e){return(e%=eg)<0&&(e+=eg),e}var Yg=2*Math.PI;function Km(e,t,n,r,o,i,s,l,c){if(0===s)return!1;var f=s;l-=e,c-=t;var h=Math.sqrt(l*l+c*c);if(n<h-f||h+f<n)return!1;if(Math.abs(r-o)%Yg<1e-4)return!0;if(i){var p=r;r=Mf(o),o=Mf(p)}else r=Mf(r),o=Mf(o);o<r&&(o+=Yg);var y=Math.atan2(c,l);return y<0&&(y+=Yg),r<=y&&y<=o||r<=y+Yg&&y+Yg<=o}function Gu(e,t,n,r,o,i){if(t<i&&r<i||i<t&&i<r||r===t)return 0;var s=r<t?1:-1,l=(i-t)/(r-t);1!=l&&0!=l||(s=r<t?.5:-.5);var c=l*(n-e)+e;return c===o?1/0:o<c?s:0}var Tf=_o.CMD,tg=2*Math.PI,ju=[-1,-1,-1],Ts=[-1,-1];function dl(e,t,n,r,o,i,s,l,c,f){if(t<f&&r<f&&i<f&&l<f||f<t&&f<r&&f<i&&f<l)return 0;var h,p=function(R,F,G,X,Y,Q){var ne=X+3*(F-G)-R,le=3*(G-2*F+R),ce=3*(F-R),ye=R-Y,xe=le*le-3*ne*ce,Te=le*ce-9*ne*ye,Ee=ce*ce-3*le*ye,Ve=0;if(dd(xe)&&dd(Te))dd(le)?Q[0]=0:0<=(or=-ce/le)&&or<=1&&(Q[Ve++]=or);else{var Be=Te*Te-4*xe*Ee;if(dd(Be)){var nt=Te/xe,bt=-nt/2;0<=(or=-le/ne+nt)&&or<=1&&(Q[Ve++]=or),0<=bt&&bt<=1&&(Q[Ve++]=bt)}else if(0<Be){var _t=Vu(Be),wt=xe*le+1.5*ne*(-Te+_t),Lt=xe*le+1.5*ne*(-Te-_t);0<=(or=(-le-((wt=wt<0?-jg(-wt,ll):jg(wt,ll))+(Lt=Lt<0?-jg(-Lt,ll):jg(Lt,ll))))/(3*ne))&&or<=1&&(Q[Ve++]=or)}else{var Ht=(2*xe*le-3*ne*Te)/(2*Vu(xe*xe*xe)),Ln=Math.acos(Ht)/3,Ft=Vu(xe),Yn=Math.cos(Ln),or=(-le-2*Ft*Yn)/(3*ne),Tr=(bt=(-le+Ft*(Yn+cd*Math.sin(Ln)))/(3*ne),(-le+Ft*(Yn-cd*Math.sin(Ln)))/(3*ne));0<=or&&or<=1&&(Q[Ve++]=or),0<=bt&&bt<=1&&(Q[Ve++]=bt),0<=Tr&&Tr<=1&&(Q[Ve++]=Tr)}}return Ve}(t,r,i,l,f,ju);if(0===p)return 0;for(var y,b,S=0,M=-1,k=0;k<p;k++){var O=ju[k],P=0===O||1===O?.5:1;Xi(e,n,o,s,O)<c||(M<0&&(M=$l(t,r,i,l,Ts),Ts[1]<Ts[0]&&1<M&&(h=Ts[0],Ts[0]=Ts[1],Ts[1]=h),y=Xi(t,r,i,l,Ts[0]),1<M&&(b=Xi(t,r,i,l,Ts[1]))),S+=2===M?O<Ts[0]?y<t?P:-P:O<Ts[1]?b<y?P:-P:l<b?P:-P:O<Ts[0]?y<t?P:-P:l<y?P:-P)}return S}function i1(e,t,n,r,o,i,s,l){if(t<l&&r<l&&i<l||l<t&&l<r&&l<i)return 0;var c=function(S,M,k,O,P){var R=S-2*M+k,F=2*(M-S),G=S-O,X=0;if(dd(R))Xd(F)&&0<=(Q=-G/F)&&Q<=1&&(P[X++]=Q);else{var Y=F*F-4*R*G;if(dd(Y))0<=(Q=-F/(2*R))&&Q<=1&&(P[X++]=Q);else if(0<Y){var Q,ne=Vu(Y),le=(-F-ne)/(2*R);0<=(Q=(-F+ne)/(2*R))&&Q<=1&&(P[X++]=Q),0<=le&&le<=1&&(P[X++]=le)}}return X}(t,r,i,l,ju);if(0===c)return 0;var f=Sf(t,r,i);if(0<=f&&f<=1){for(var h=0,p=Hu(t,r,i,f),y=0;y<c;y++){var b=0===ju[y]||1===ju[y]?.5:1;Hu(e,n,o,ju[y])<s||(h+=ju[y]<f?p<t?b:-b:i<p?b:-b)}return h}return b=0===ju[0]||1===ju[0]?.5:1,Hu(e,n,o,ju[0])<s?0:i<t?b:-b}function ru(e,t,n,r,o,i,s,l){if(n<(l-=t)||l<-n)return 0;var c=Math.sqrt(n*n-l*l);ju[0]=-c,ju[1]=c;var f=Math.abs(r-o);if(f<1e-4)return 0;if(f%tg<1e-4){o=tg;var h=i?1:-1;return s>=ju[r=0]+e&&s<=ju[1]+e?h:0}i?(c=r,r=Mf(o),o=Mf(c)):(r=Mf(r),o=Mf(o)),o<r&&(o+=tg);for(var p=0,y=0;y<2;y++){var b=ju[y];if(s<b+e){var S=Math.atan2(l,b);h=i?1:-1,S<0&&(S=tg+S),(r<=S&&S<=o||r<=S+tg&&S+tg<=o)&&(S>Math.PI/2&&S<1.5*Math.PI&&(h=-h),p+=h)}}return p}function Y0(e,t,n,r,o){for(var i=0,s=0,l=0,c=0,f=0,h=0;h<e.length;){var p=e[h++];switch(p===Tf.M&&1<h&&(n||(i+=Gu(s,l,c,f,r,o))),1===h&&(c=s=e[h],f=l=e[h+1]),p){case Tf.M:s=c=e[h++],l=f=e[h++];break;case Tf.L:if(n){if(Zd(s,l,e[h],e[h+1],t,r,o))return!0}else i+=Gu(s,l,e[h],e[h+1],r,o)||0;s=e[h++],l=e[h++];break;case Tf.C:if(n){if($d(s,l,e[h++],e[h++],e[h++],e[h++],e[h],e[h+1],t,r,o))return!0}else i+=dl(s,l,e[h++],e[h++],e[h++],e[h++],e[h],e[h+1],r,o)||0;s=e[h++],l=e[h++];break;case Tf.Q:if(n){if(_b(s,l,e[h++],e[h++],e[h],e[h+1],t,r,o))return!0}else i+=i1(s,l,e[h++],e[h++],e[h],e[h+1],r,o)||0;s=e[h++],l=e[h++];break;case Tf.A:var y=e[h++],b=e[h++],S=e[h++],M=e[h++],k=e[h++],O=e[h++];h+=1;var P=1-e[h++],R=Math.cos(k)*S+y,F=Math.sin(k)*M+b;1<h?i+=Gu(s,l,R,F,r,o):(c=R,f=F);var G=(r-y)*M/S+y;if(n){if(Km(y,b,M,k,k+O,P,t,G,o))return!0}else i+=ru(y,b,M,k,k+O,P,G,o);s=Math.cos(k+O)*S+y,l=Math.sin(k+O)*M+b;break;case Tf.R:if(c=s=e[h++],f=l=e[h++],R=c+e[h++],F=f+e[h++],n){if(Zd(c,f,R,f,t,r,o)||Zd(R,f,R,F,t,r,o)||Zd(R,F,c,F,t,r,o)||Zd(c,F,c,f,t,r,o))return!0}else i+=Gu(R,f,R,F,r,o),i+=Gu(c,F,c,f,r,o);break;case Tf.Z:if(n){if(Zd(s,l,c,f,t,r,o))return!0}else i+=Gu(s,l,c,f,r,o);s=c,l=f}}return n||Math.abs(l-f)<1e-4||(i+=Gu(s,l,c,f,r,o)||0),0!==i}var md=qm.prototype.getCanvasPattern,Z0=Math.abs,Uu=new _o(!0);function Qr(e){Ce.call(this,e),this.path=null}function wb(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}Qr.prototype={constructor:Qr,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(e,t){var n,r=this.style,o=this.path||Uu,i=r.hasStroke(),s=r.hasFill(),l=r.fill,c=r.stroke,f=s&&!!l.colorStops,h=i&&!!c.colorStops,p=s&&!!l.image,y=i&&!!c.image;r.bind(e,this,t),this.setTransform(e),this.__dirty&&(f&&(n=n||this.getBoundingRect(),this._fillGradient=r.getGradient(e,l,n)),h&&(n=n||this.getBoundingRect(),this._strokeGradient=r.getGradient(e,c,n))),f?e.fillStyle=this._fillGradient:p&&(e.fillStyle=md.call(l,e)),h?e.strokeStyle=this._strokeGradient:y&&(e.strokeStyle=md.call(c,e));var b=r.lineDash,S=r.lineDashOffset,M=!!e.setLineDash,k=this.getGlobalScale();if(o.setScale(k[0],k[1],this.segmentIgnoreThreshold),this.__dirtyPath||b&&!M&&i?(o.beginPath(e),b&&!M&&(o.setLineDash(b),o.setLineDashOffset(S)),this.buildPath(o,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(e.beginPath(),this.path.rebuildPath(e)),s)if(null!=r.fillOpacity){var O=e.globalAlpha;e.globalAlpha=r.fillOpacity*r.opacity,o.fill(e),e.globalAlpha=O}else o.fill(e);b&&M&&(e.setLineDash(b),e.lineDashOffset=S),i&&(null!=r.strokeOpacity?(O=e.globalAlpha,e.globalAlpha=r.strokeOpacity*r.opacity,o.stroke(e),e.globalAlpha=O):o.stroke(e)),b&&M&&e.setLineDash([]),null!=r.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))},buildPath:function(e,t,n){},createPathProxy:function(){this.path=new _o},getBoundingRect:function(){var e=this._rect,t=this.style,n=!e;if(n){var r=this.path;r=r||(this.path=new _o),this.__dirtyPath&&(r.beginPath(),this.buildPath(r,this.shape,!1)),e=r.getBoundingRect()}if(this._rect=e,t.hasStroke()){var o=this._rectWithStroke||(this._rectWithStroke=e.clone());if(this.__dirty||n){o.copy(e);var i=t.lineWidth,s=t.strokeNoScale?this.getLineScale():1;t.hasFill()||(i=Math.max(i,this.strokeContainThreshold||4)),1e-10<s&&(o.width+=i/s,o.height+=i/s,o.x-=i/s/2,o.y-=i/s/2)}return o}return e},contain:function(e,t){var n=this.transformCoordToLocal(e,t),r=this.getBoundingRect(),o=this.style;if(r.contain(e=n[0],t=n[1])){var i=this.path.data;if(o.hasStroke()){var s=o.lineWidth,l=o.strokeNoScale?this.getLineScale():1;if(1e-10<l&&(o.hasFill()||(s=Math.max(s,this.strokeContainThreshold)),Y0(i,s/l,!0,e,t)))return!0}if(o.hasFill())return Y0(i,0,!1,e,t)}return!1},dirty:function(e){null==e&&(e=!0),e&&(this.__dirtyPath=e,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(e){return this.animate("shape",e)},attrKV:function(e,t){"shape"===e?(this.setShape(t),this.__dirtyPath=!0,this._rect=null):Ce.prototype.attrKV.call(this,e,t)},setShape:function(e,t){var n=this.shape;if(n){if(xt(e))for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);else n[e]=t;this.dirty(!0)}return this},getLineScale:function(){var e=this.transform;return e&&1e-10<Z0(e[0]-1)&&1e-10<Z0(e[3]-1)?Math.sqrt(Z0(e[0]*e[3]-e[2]*e[1])):1}},Qr.extend=function(e){function t(r){Qr.call(this,r),e.style&&this.style.extendFrom(e.style,!1);var o=e.shape;if(o){this.shape=this.shape||{};var i=this.shape;for(var s in o)!i.hasOwnProperty(s)&&o.hasOwnProperty(s)&&(i[s]=o[s])}e.init&&e.init.call(this,r)}for(var n in Rn(t,Qr),e)"style"!==n&&"shape"!==n&&(t.prototype[n]=e[n]);return t},Rn(Qr,Ce);var Jm=_o.CMD,Qm=[[],[],[]],a1=Math.sqrt,pd=Math.atan2,vc=Math.sqrt,ep=Math.sin,Aa=Math.cos,vd=Math.PI,bu=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(wb(e)*wb(t))},ch=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(bu(e,t))};function tp(e,t,n,r,o,i,s,l,c,f,h){var p=c*(vd/180),y=Aa(p)*(e-n)/2+ep(p)*(t-r)/2,b=-1*ep(p)*(e-n)/2+Aa(p)*(t-r)/2,S=y*y/(s*s)+b*b/(l*l);1<S&&(s*=vc(S),l*=vc(S));var M=(o===i?-1:1)*vc((s*s*(l*l)-s*s*(b*b)-l*l*(y*y))/(s*s*(b*b)+l*l*(y*y)))||0,k=M*s*b/l,O=M*-l*y/s,P=(e+n)/2+Aa(p)*k-ep(p)*O,R=(t+r)/2+ep(p)*k+Aa(p)*O,F=ch([1,0],[(y-k)/s,(b-O)/l]),G=[(y-k)/s,(b-O)/l],X=[(-1*y-k)/s,(-1*b-O)/l],Y=ch(G,X);bu(G,X)<=-1&&(Y=vd),1<=bu(G,X)&&(Y=0),0===i&&0<Y&&(Y-=2*vd),1===i&&Y<0&&(Y+=2*vd),h.addData(f,P,R,s,l,F,Y,p,i)}var $0=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,Sb=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Cb(e,t){var n=function(r){if(!r)return new _o;for(var o,i=0,s=0,l=i,c=s,f=new _o,h=_o.CMD,p=r.match($0),y=0;y<p.length;y++){for(var b,S=p[y],M=S.charAt(0),k=S.match(Sb)||[],O=k.length,P=0;P<O;P++)k[P]=parseFloat(k[P]);for(var R=0;R<O;){var F,G,X,Y,Q,ne,le,ce=i,ye=s;switch(M){case"l":i+=k[R++],s+=k[R++],f.addData(b=h.L,i,s);break;case"L":i=k[R++],s=k[R++],f.addData(b=h.L,i,s);break;case"m":i+=k[R++],s+=k[R++],f.addData(b=h.M,i,s),l=i,c=s,M="l";break;case"M":i=k[R++],s=k[R++],f.addData(b=h.M,i,s),l=i,c=s,M="L";break;case"h":i+=k[R++],f.addData(b=h.L,i,s);break;case"H":i=k[R++],f.addData(b=h.L,i,s);break;case"v":s+=k[R++],f.addData(b=h.L,i,s);break;case"V":s=k[R++],f.addData(b=h.L,i,s);break;case"C":f.addData(b=h.C,k[R++],k[R++],k[R++],k[R++],k[R++],k[R++]),i=k[R-2],s=k[R-1];break;case"c":f.addData(b=h.C,k[R++]+i,k[R++]+s,k[R++]+i,k[R++]+s,k[R++]+i,k[R++]+s),i+=k[R-2],s+=k[R-1];break;case"S":F=i,G=s;var xe=f.len(),Te=f.data;o===h.C&&(F+=i-Te[xe-4],G+=s-Te[xe-3]),ce=k[R++],ye=k[R++],i=k[R++],s=k[R++],f.addData(b=h.C,F,G,ce,ye,i,s);break;case"s":F=i,G=s,xe=f.len(),Te=f.data,o===h.C&&(F+=i-Te[xe-4],G+=s-Te[xe-3]),ce=i+k[R++],ye=s+k[R++],i+=k[R++],s+=k[R++],f.addData(b=h.C,F,G,ce,ye,i,s);break;case"Q":ce=k[R++],ye=k[R++],i=k[R++],s=k[R++],f.addData(b=h.Q,ce,ye,i,s);break;case"q":ce=k[R++]+i,ye=k[R++]+s,i+=k[R++],s+=k[R++],f.addData(b=h.Q,ce,ye,i,s);break;case"T":F=i,G=s,xe=f.len(),Te=f.data,o===h.Q&&(F+=i-Te[xe-4],G+=s-Te[xe-3]),i=k[R++],s=k[R++],f.addData(b=h.Q,F,G,i,s);break;case"t":F=i,G=s,xe=f.len(),Te=f.data,o===h.Q&&(F+=i-Te[xe-4],G+=s-Te[xe-3]),i+=k[R++],s+=k[R++],f.addData(b=h.Q,F,G,i,s);break;case"A":X=k[R++],Y=k[R++],Q=k[R++],ne=k[R++],le=k[R++],tp(ce=i,ye=s,i=k[R++],s=k[R++],ne,le,X,Y,Q,b=h.A,f);break;case"a":X=k[R++],Y=k[R++],Q=k[R++],ne=k[R++],le=k[R++],tp(ce=i,ye=s,i+=k[R++],s+=k[R++],ne,le,X,Y,Q,b=h.A,f)}}"z"!==M&&"Z"!==M||(f.addData(b=h.Z),i=l,s=c),o=b}return f.toStatic(),f}(e);return(t=t||{}).buildPath=function(r){if(r.setData)r.setData(n.data),(o=r.getContext())&&r.rebuildPath(o);else{var o=r;n.rebuildPath(o)}},t.applyTransform=function(r){(function(e,t){var n,r,o,i,s,l=e.data,c=Jm.M,f=Jm.C,h=Jm.L,p=Jm.R,y=Jm.A,b=Jm.Q;for(i=o=0;o<l.length;){switch(n=l[o++],i=o,r=0,n){case c:case h:r=1;break;case f:r=3;break;case b:r=2;break;case y:var S=t[4],M=t[5],k=a1(t[0]*t[0]+t[1]*t[1]),O=a1(t[2]*t[2]+t[3]*t[3]),P=pd(-t[1]/O,t[0]/k);l[o]*=k,l[o++]+=S,l[o]*=O,l[o++]+=M,l[o++]*=k,l[o++]*=O,l[o++]+=P,l[o++]+=P,i=o+=2;break;case p:R[0]=l[o++],R[1]=l[o++],wn(R,R,t),l[i++]=R[0],l[i++]=R[1],R[0]+=l[o++],R[1]+=l[o++],wn(R,R,t),l[i++]=R[0],l[i++]=R[1]}for(s=0;s<r;s++){var R;(R=Qm[s])[0]=l[o++],R[1]=l[o++],wn(R,R,t),l[i++]=R[0],l[i++]=R[1]}}})(n,r),this.dirty(!0)},t}function kb(e,t){return new Qr(Cb(e,t))}var vo=function(e){Ce.call(this,e)};function Gr(e){return Cr.browser.ie&&11<=Cr.browser.version?function(){var t,n=this.__clipPaths,r=this.style;if(n)for(var o=0;o<n.length;o++){var i=n[o],s=i&&i.shape,l=i&&i.type;if(s&&("sector"===l&&s.startAngle===s.endAngle||"rect"===l&&(!s.width||!s.height))){for(var c=0;c<Af.length;c++)Af[c][2]=r[Af[c][0]],r[Af[c][0]]=Af[c][1];t=!0;break}}if(e.apply(this,arguments),t)for(c=0;c<Af.length;c++)r[Af[c][0]]=Af[c][2]}:e}vo.prototype={constructor:vo,type:"text",brush:function(e,t){var n=this.style;this.__dirty&&$n(n),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var r=n.text;null!=r&&(r+=""),ae(r,n)?(this.setTransform(e),ud(this,e,r,n,null,t),this.restoreTransform(e)):e.__attrCachedBy=0},getBoundingRect:function(){var e=this.style;if(this.__dirty&&$n(e),!this._rect){var t=e.text;null!=t?t+="":t="";var n=Qi(e.text+"",e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich);if(n.x+=e.x||0,n.y+=e.y||0,j(e.textStroke,e.textStrokeWidth)){var r=e.textStrokeWidth;n.x-=r/2,n.y-=r/2,n.width+=r,n.height+=r}this._rect=n}return this._rect}},Rn(vo,Ce);var Fs=Qr.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(e,t,n){n&&e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI,!0)}}),Af=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],oo=Qr.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:Gr(Qr.prototype.brush),buildPath:function(e,t){var n=t.cx,r=t.cy,o=Math.max(t.r0||0,0),i=Math.max(t.r,0),s=t.startAngle,l=t.endAngle,c=t.clockwise,f=Math.cos(s),h=Math.sin(s);e.moveTo(f*o+n,h*o+r),e.lineTo(f*i+n,h*i+r),e.arc(n,r,i,s,l,!c),e.lineTo(Math.cos(l)*o+n,Math.sin(l)*o+r),0!==o&&e.arc(n,r,o,l,s,c),e.closePath()}}),Vs=Qr.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(e,t){var n=t.cx,r=t.cy,o=2*Math.PI;e.moveTo(n+t.r,r),e.arc(n,r,t.r,0,o,!1),e.moveTo(n+t.r0,r),e.arc(n,r,t.r0,0,o,!0)}});function ci(e,t,n,r,o,i,s){var l=.5*(n-e),c=.5*(r-t);return(2*(t-n)+l+c)*s+(-3*(t-n)-2*l-c)*i+l*o+t}function Mb(e,t,n){var r=t.points,o=t.smooth;if(r&&2<=r.length){if(o&&"spline"!==o){var i=function(y,b,S,M){var k,O,P,R,F=[],G=[],X=[],Y=[];if(M){P=[1/0,1/0],R=[-1/0,-1/0];for(var Q=0,ne=y.length;Q<ne;Q++)hu(P,P,y[Q]),ri(R,R,y[Q]);hu(P,P,M[0]),ri(R,R,M[1])}for(Q=0,ne=y.length;Q<ne;Q++){var le=y[Q];if(S)k=y[Q?Q-1:ne-1],O=y[(Q+1)%ne];else{if(0===Q||Q===ne-1){F.push(Lr(y[Q]));continue}k=y[Q-1],O=y[Q+1]}mi(G,O,k),aa(G,G,b);var ce=H(le,k),ye=H(le,O),xe=ce+ye;0!==xe&&(ce/=xe,ye/=xe),aa(X,G,-ce),aa(Y,G,ye);var Te=po([],le,X),Ee=po([],le,Y);M&&(ri(Te,Te,P),hu(Te,Te,R),ri(Ee,Ee,P),hu(Ee,Ee,R)),F.push(Te),F.push(Ee)}return S&&F.push(F.shift()),F}(r,o,n,t.smoothConstraint);e.moveTo(r[0][0],r[0][1]);for(var s=r.length,l=0;l<(n?s:s-1);l++){var c=i[2*l],f=i[2*l+1],h=r[(l+1)%s];e.bezierCurveTo(c[0],c[1],f[0],f[1],h[0],h[1])}}else{"spline"===o&&(r=function(y,b){for(var S=y.length,M=[],k=0,O=1;O<S;O++)k+=H(y[O-1],y[O]);var P=k/2;for(P=P<S?S:P,O=0;O<P;O++){var R,F,G,X=O/(P-1)*(b?S:S-1),Y=Math.floor(X),Q=X-Y,ne=y[Y%S];G=b?(R=y[(Y-1+S)%S],F=y[(Y+1)%S],y[(Y+2)%S]):(R=y[0===Y?Y:Y-1],F=y[S-2<Y?S-1:Y+1],y[S-3<Y?S-1:Y+2]);var le=Q*Q,ce=Q*le;M.push([ci(R[0],ne[0],F[0],G[0],Q,le,ce),ci(R[1],ne[1],F[1],G[1],Q,le,ce)])}return M}(r,n)),e.moveTo(r[0][0],r[0][1]),l=1;for(var p=r.length;l<p;l++)e.lineTo(r[l][0],r[l][1])}n&&e.closePath()}}var wo=Qr.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(e,t){Mb(e,t,!0)}}),Bc=Qr.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(e,t){Mb(e,t,!1)}}),Pi=Math.round;function qu(e,t,n){if(t){var r=t.x1,o=t.x2,i=t.y1,s=t.y2;e.x1=r,e.x2=o,e.y1=i,e.y2=s;var l=n&&n.lineWidth;l&&(Pi(2*r)===Pi(2*o)&&(e.x1=e.x2=dh(r,l,!0)),Pi(2*i)===Pi(2*s)&&(e.y1=e.y2=dh(i,l,!0)))}}function vi(e,t,n){if(t){var r=t.x,o=t.y,i=t.width,s=t.height;e.x=r,e.y=o,e.width=i,e.height=s;var l=n&&n.lineWidth;l&&(e.x=dh(r,l,!0),e.y=dh(o,l,!0),e.width=Math.max(dh(r+i,l,!1)-e.x,0===i?0:1),e.height=Math.max(dh(o+s,l,!1)-e.y,0===s?0:1))}}function dh(e,t,n){if(!t)return e;var r=Pi(2*e);return(r+Pi(t))%2==0?r/2:(r+(n?1:-1))/2}var yd={},ei=Qr.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(e,t){var n,r,o,i;this.subPixelOptimize?(vi(yd,t,this.style),n=yd.x,r=yd.y,o=yd.width,i=yd.height,yd.r=t.r,t=yd):(n=t.x,r=t.y,o=t.width,i=t.height),t.r?qh(e,t):e.rect(n,r,o,i),e.closePath()}}),fl={},Yi=Qr.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n,r,o,i;i=this.subPixelOptimize?(qu(fl,t,this.style),n=fl.x1,r=fl.y1,o=fl.x2,fl.y2):(n=t.x1,r=t.y1,o=t.x2,t.y2);var s=t.percent;0!==s&&(e.moveTo(n,r),s<1&&(o=n*(1-s)+o*s,i=r*(1-s)+i*s),e.lineTo(o,i))},pointAt:function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]}}),Hs=[];function If(e,t,n){return null===e.cpx2||null===e.cpy2?[(n?fd:Xi)(e.x1,e.cpx1,e.cpx2,e.x2,t),(n?fd:Xi)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(n?wf:Hu)(e.x1,e.cpx1,e.x2,t),(n?wf:Hu)(e.y1,e.cpy1,e.y2,t)]}function bd(e){this.colorStops=e||[]}var np=Qr.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.x1,r=t.y1,o=t.x2,i=t.y2,s=t.cpx1,l=t.cpy1,c=t.cpx2,f=t.cpy2,h=t.percent;0!==h&&(e.moveTo(n,r),null==c||null==f?(h<1&&(Wu(n,s,o,h,Hs),s=Hs[1],o=Hs[2],Wu(r,l,i,h,Hs),l=Hs[1],i=Hs[2]),e.quadraticCurveTo(s,l,o,i)):(h<1&&(sh(n,s,c,o,h,Hs),s=Hs[1],c=Hs[2],o=Hs[3],sh(r,l,f,i,h,Hs),l=Hs[1],f=Hs[2],i=Hs[3]),e.bezierCurveTo(s,l,c,f,o,i)))},pointAt:function(e){return If(this.shape,e,!1)},tangentAt:function(e){var t=If(this.shape,e,!0);return Ja(t,t)}}),Zg=Qr.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.cx,r=t.cy,o=Math.max(t.r,0),i=t.startAngle,s=t.endAngle,l=t.clockwise,c=Math.cos(i),f=Math.sin(i);e.moveTo(c*o+n,f*o+r),e.arc(n,r,o,i,s,!l)}}),$g=Qr.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var e=this.__dirtyPath,t=this.shape.paths,n=0;n<t.length;n++)e=e||t[n].__dirtyPath;this.__dirtyPath=e,this.__dirty=this.__dirty||e},beforeBrush:function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),n=0;n<e.length;n++)e[n].path||e[n].createPathProxy(),e[n].path.setScale(t[0],t[1],e[n].segmentIgnoreThreshold)},buildPath:function(e,t){for(var n=t.paths||[],r=0;r<n.length;r++)n[r].buildPath(e,n[r].shape,!0)},afterBrush:function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),Qr.prototype.getBoundingRect.call(this)}});function fh(e,t,n,r,o,i){this.x=null==e?0:e,this.y=null==t?0:t,this.x2=null==n?1:n,this.y2=null==r?0:r,this.type="linear",this.global=i||!1,bd.call(this,o)}function xu(e,t,n,r,o){this.x=null==e?.5:e,this.y=null==t?.5:t,this.r=null==n?.5:n,this.type="radial",this.global=o||!1,bd.call(this,r)}function Tl(e){Ce.call(this,e),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}bd.prototype={constructor:bd,addColorStop:function(e,t){this.colorStops.push({offset:e,color:t})}},fh.prototype={constructor:fh},Rn(fh,bd),xu.prototype={constructor:xu},Rn(xu,bd),Tl.prototype.incremental=!0,Tl.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},Tl.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.dirty()},Tl.prototype.addDisplayables=function(e,t){t=t||!1;for(var n=0;n<e.length;n++)this.addDisplayable(e[n],t)},Tl.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},Tl.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++)(t=this._displayables[e]).parent=this,t.update(),t.parent=null;for(e=0;e<this._temporaryDisplayables.length;e++){var t;(t=this._temporaryDisplayables[e]).parent=this,t.update(),t.parent=null}},Tl.prototype.brush=function(e,t){for(var n=this._cursor;n<this._displayables.length;n++)(r=this._displayables[n]).beforeBrush&&r.beforeBrush(e),r.brush(e,n===this._cursor?null:this._displayables[n-1]),r.afterBrush&&r.afterBrush(e);for(this._cursor=n,n=0;n<this._temporaryDisplayables.length;n++){var r;(r=this._temporaryDisplayables[n]).beforeBrush&&r.beforeBrush(e),r.brush(e,0===n?null:this._temporaryDisplayables[n-1]),r.afterBrush&&r.afterBrush(e)}this._temporaryDisplayables=[],this.notClear=!0};var U_=[];Tl.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new Vo(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var n=this._displayables[t],r=n.getBoundingRect().clone();n.needLocalTransform()&&r.applyTransform(n.getLocalTransform(U_)),e.union(r)}this._rect=e}return this._rect},Tl.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t);if(this.getBoundingRect().contain(n[0],n[1]))for(var r=0;r<this._displayables.length;r++)if(this._displayables[r].contain(e,t))return!0;return!1},Rn(Tl,Ce);var Ia=Math.max,ou=Math.min,ng={},rp={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},xd="emphasis",hh=1,zc={},mv={};function Xu(e){return Qr.extend(e)}function Dl(e,t){mv[e]=t}function pv(e){if(mv.hasOwnProperty(e))return mv[e]}function op(e,t,n,r){var o=kb(e,t);return n&&("center"===r&&(n=Of(n,o.getBoundingRect())),ip(o,n)),o}function gh(e,t,n){var r=new De({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(o){"center"===n&&r.setStyle(Of(t,{width:o.width,height:o.height}))}});return r}function Of(e,t){var n,r=t.width/t.height,o=e.height*r;return n=o<=e.width?e.height:(o=e.width)/r,{x:e.x+e.width/2-o/2,y:e.y+e.height/2-n/2,width:o,height:n}}var Al=function(e,t){for(var n=[],r=e.length,o=0;o<r;o++){var i=e[o];i.path||i.createPathProxy(),i.__dirtyPath&&i.buildPath(i.path,i.shape,!0),n.push(i.path)}var s=new Qr(t);return s.createPathProxy(),s.buildPath=function(l){l.appendPath(n);var c=l.getContext();c&&l.rebuildPath(c)},s};function ip(e,t){if(e.applyTransform){var n=e.getBoundingRect().calculateTransform(t);e.applyTransform(n)}}var Kg=dh;function ap(e){return null!=e&&"none"!==e}var K0=ut(),mh=0;function Jg(e){var t=e.__hoverStl;if(t&&!e.__highlighted){var n=e.__zr,r=e.useHoverLayer&&n&&"canvas"===n.painter.type;if(e.__highlighted=r?"layer":"plain",!(e.isGroup||!n&&e.useHoverLayer)){var o=e,i=e.style;r&&(i=(o=n.addHover(e)).style),og(i),r||function(s){if(s.__hoverStlDirty){s.__hoverStlDirty=!1;var l=s.__hoverStl;if(l){var c=s.__cachedNormalStl={};s.__cachedNormalZ2=s.z2;var f=s.style;for(var h in l)null!=l[h]&&(c[h]=f[h]);c.fill=f.fill,c.stroke=f.stroke}else s.__cachedNormalStl=s.__cachedNormalZ2=null}}(o),i.extendFrom(t),sp(i,t,"fill"),sp(i,t,"stroke"),Kd(i),r||(e.dirty(!1),e.z2+=1)}}}function sp(e,t,n){!ap(t[n])&&ap(e[n])&&(e[n]=function(r){if("string"!=typeof r)return r;var o=K0.get(r);return o||(o=Fd(r,-.1),mh<1e4&&(K0.set(r,o),mh++)),o}(e[n]))}function iu(e){var t=e.__highlighted;if(t&&(e.__highlighted=!1,!e.isGroup))if("layer"===t)e.__zr&&e.__zr.removeHover(e);else{var n=e.style,r=e.__cachedNormalStl;r&&(og(n),e.setStyle(r),Kd(n));var o=e.__cachedNormalZ2;null!=o&&e.z2-o==1&&(e.z2=o)}}function bc(e,t,n){var r,o="normal",i="normal";e.__highlighted&&(o=xd,r=!0),t(e,n),e.__highlighted&&(i=xd,r=!0),e.isGroup&&e.traverse(function(s){s.isGroup||t(s,n)}),r&&e.__highDownOnUpdate&&e.__highDownOnUpdate(o,i)}function os(e,t){t=e.__hoverStl=!1!==t&&(e.hoverStyle||t||{}),e.__hoverStlDirty=!0,e.__highlighted&&(e.__cachedNormalStl=null,iu(e),Jg(e))}function wu(e){au(this,e)||this.__highByOuter||bc(this,Jg)}function Ds(e){au(this,e)||this.__highByOuter||bc(this,iu)}function Il(e){this.__highByOuter|=1<<(e||0),bc(this,Jg)}function Su(e){(this.__highByOuter&=~(1<<(e||0)))||bc(this,iu)}function au(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function ya(e,t){rg(e,!0),bc(e,os,t)}function rg(e,t){var n=!1===t;if(e.__highDownSilentOnTouch=e.highDownSilentOnTouch,e.__highDownOnUpdate=e.highDownOnUpdate,!n||e.__highDownDispatcher){var r=n?"off":"on";e[r]("mouseover",wu)[r]("mouseout",Ds),e[r]("emphasis",Il)[r]("normal",Su),e.__highByOuter=e.__highByOuter||0,e.__highDownDispatcher=!n}}function Fc(e){return!(!e||!e.__highDownDispatcher)}function cn(e){var t=zc[e];return null==t&&hh<=32&&(t=zc[e]=hh++),t}function Cu(e,t,n,r,o,i,s){var l,c=(o=o||ng).labelFetcher,f=o.labelDataIndex,h=o.labelDimIndex,p=o.labelProp,y=n.getShallow("show"),b=r.getShallow("show");(y||b)&&(c&&(l=c.getFormattedLabel(f,"normal",null,h,p)),null==l&&(l=Mt(o.defaultText)?o.defaultText(f,o):o.defaultText));var S=y?l:null,M=b?Dr(c?c.getFormattedLabel(f,"emphasis",null,h,p):null,l):null;null==S&&null==M||(Ya(e,n,i,o),Ya(t,r,s,o,!0)),e.text=S,t.text=M}function vv(e,t,n){var r=e.style;t&&(og(r),e.setStyle(t),Kd(r)),r=e.__hoverStl,n&&r&&(og(r),Fn(r,n),Kd(r))}function Ya(e,t,n,r,o){return Ol(e,t,r,o),n&&Fn(e,n),e}function Ol(e,t,n,r){if((n=n||ng).isRectText){var o;n.getTextPosition?o=n.getTextPosition(t,r):"outside"===(o=t.getShallow("position")||(r?null:"inside"))&&(o="top"),e.textPosition=o,e.textOffset=t.getShallow("offset");var i=t.getShallow("rotate");null!=i&&(i*=Math.PI/180),e.textRotation=i,e.textDistance=Dr(t.getShallow("distance"),r?null:5)}var s,l=t.ecModel,c=l&&l.option.textStyle,f=function(y){for(var b;y&&y!==y.ecModel;){var S=(y.option||ng).rich;if(S)for(var M in b=b||{},S)S.hasOwnProperty(M)&&(b[M]=1);y=y.parentModel}return b}(t);if(f)for(var h in s={},f)if(f.hasOwnProperty(h)){var p=t.getModel(["rich",h]);Ef(s[h]={},p,c,n,r)}return e.rich=s,Ef(e,t,c,n,r,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),e}function Ef(e,t,n,r,o,i){n=!o&&n||ng,e.textFill=kt(t.getShallow("color"),r)||n.color,e.textStroke=kt(t.getShallow("textBorderColor"),r)||n.textBorderColor,e.textStrokeWidth=Dr(t.getShallow("textBorderWidth"),n.textBorderWidth),o||(i&&(e.insideRollbackOpt=r,Kd(e)),null==e.textFill&&(e.textFill=r.autoColor)),e.fontStyle=t.getShallow("fontStyle")||n.fontStyle,e.fontWeight=t.getShallow("fontWeight")||n.fontWeight,e.fontSize=t.getShallow("fontSize")||n.fontSize,e.fontFamily=t.getShallow("fontFamily")||n.fontFamily,e.textAlign=t.getShallow("align"),e.textVerticalAlign=t.getShallow("verticalAlign")||t.getShallow("baseline"),e.textLineHeight=t.getShallow("lineHeight"),e.textWidth=t.getShallow("width"),e.textHeight=t.getShallow("height"),e.textTag=t.getShallow("tag"),i&&r.disableBox||(e.textBackgroundColor=kt(t.getShallow("backgroundColor"),r),e.textPadding=t.getShallow("padding"),e.textBorderColor=kt(t.getShallow("borderColor"),r),e.textBorderWidth=t.getShallow("borderWidth"),e.textBorderRadius=t.getShallow("borderRadius"),e.textBoxShadowColor=t.getShallow("shadowColor"),e.textBoxShadowBlur=t.getShallow("shadowBlur"),e.textBoxShadowOffsetX=t.getShallow("shadowOffsetX"),e.textBoxShadowOffsetY=t.getShallow("shadowOffsetY")),e.textShadowColor=t.getShallow("textShadowColor")||n.textShadowColor,e.textShadowBlur=t.getShallow("textShadowBlur")||n.textShadowBlur,e.textShadowOffsetX=t.getShallow("textShadowOffsetX")||n.textShadowOffsetX,e.textShadowOffsetY=t.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function kt(e,t){return"auto"!==e?e:t&&t.autoColor?t.autoColor:null}function Kd(e){var t,n=e.textPosition,r=e.insideRollbackOpt;if(r&&null==e.textFill){var o=r.autoColor,s=r.useInsideStyle,l=!1!==s&&(!0===s||r.isRectText&&n&&"string"==typeof n&&0<=n.indexOf("inside")),c=!l&&null!=o;(l||c)&&(t={textFill:e.textFill,textStroke:e.textStroke,textStrokeWidth:e.textStrokeWidth}),l&&(e.textFill="#fff",null==e.textStroke&&(e.textStroke=o,null==e.textStrokeWidth&&(e.textStrokeWidth=2))),c&&(e.textFill=o)}e.insideRollback=t}function og(e){var t=e.insideRollback;t&&(e.textFill=t.textFill,e.textStroke=t.textStroke,e.textStrokeWidth=t.textStrokeWidth,e.insideRollback=null)}function J0(e,t){var n=t&&t.getModel("textStyle");return sr([e.fontStyle||n&&n.getShallow("fontStyle")||"",e.fontWeight||n&&n.getShallow("fontWeight")||"",(e.fontSize||n&&n.getShallow("fontSize")||12)+"px",e.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}function yv(e,t,n,r,o,i){if("function"==typeof o&&(i=o,o=null),r&&r.isAnimationEnabled()){var s=e?"Update":"",l=r.getShallow("animationDuration"+s),c=r.getShallow("animationEasing"+s),f=r.getShallow("animationDelay"+s);"function"==typeof f&&(f=f(o,r.getAnimationDelayParams?r.getAnimationDelayParams(t,o):null)),"function"==typeof l&&(l=l(o)),0<l?t.animateTo(n,l,f||0,c,i,!!i):(t.stopAnimation(),t.attr(n),i&&i())}else t.stopAnimation(),t.attr(n),i&&i()}function so(e,t,n,r,o){yv(!0,e,t,n,r,o)}function Zo(e,t,n,r,o){yv(!1,e,t,n,r,o)}function Ws(e,t){for(var n=Zs([]);e&&e!==t;)Eu(n,e.getLocalTransform(),n),e=e.parent;return n}function Ql(e,t,n){return t&&!Dn(t)&&(t=Qo.getLocalTransform(t)),n&&(t=$i([],t)),wn([],e,t)}function Tb(e,t,n){var r=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),o=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),i=["left"===e?-r:"right"===e?r:0,"top"===e?-o:"bottom"===e?o:0];return i=Ql(i,t,n),Math.abs(i[0])>Math.abs(i[1])?0<i[0]?"right":"left":0<i[1]?"bottom":"top"}function Q0(e,t,n,r){if(e&&t){var o,i=(o={},e.traverse(function(l){!l.isGroup&&l.anid&&(o[l.anid]=l)}),o);t.traverse(function(l){if(!l.isGroup&&l.anid){var c=i[l.anid];if(c){var f=s(l);l.attr(s(c)),so(l,f,n,l.dataIndex)}}})}function s(l){var c={position:Lr(l.position),rotation:l.rotation};return l.shape&&(c.shape=Fn({},l.shape)),c}}function s1(e,t){return Kt(e,function(n){var r=n[0];r=Ia(r,t.x),r=ou(r,t.x+t.width);var o=n[1];return o=Ia(o,t.y),[r,o=ou(o,t.y+t.height)]})}function ig(e,t,n){var r=(t=Fn({rectHover:!0},t)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(r.image=e.slice(8),un(r,n),new De(t)):op(e.replace("path://",""),t,n,"center")}function ag(e,t,n,r,o){for(var i=0,s=o[o.length-1];i<o.length;i++){var l=o[i];if(Qg(e,t,n,r,l[0],l[1],s[0],s[1]))return!0;s=l}}function Qg(e,t,n,r,o,i,s,l){var O,c=n-e,f=r-t,h=s-o,p=l-i,y=em(h,p,c,f);if((O=y)<=1e-6&&-1e-6<=O)return!1;var b=e-o,S=t-i,M=em(b,S,c,f)/y;if(M<0||1<M)return!1;var k=em(b,S,h,p)/y;return!(k<0||1<k)}function em(e,t,n,r){return e*r-n*t}Dl("circle",Fs),Dl("sector",oo),Dl("ring",Vs),Dl("polygon",wo),Dl("polyline",Bc),Dl("rect",ei),Dl("line",Yi),Dl("bezierCurve",np),Dl("arc",Zg);var Jd=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:1,CACHED_LABEL_STYLE_PROPERTIES:rp,extendShape:Xu,extendPath:function(e,t){return function(n,r){return Qr.extend(Cb(n,r))}(e,t)},registerShape:Dl,getShapeClass:pv,makePath:op,makeImage:gh,mergePath:Al,resizePath:ip,subPixelOptimizeLine:function(e){return qu(e.shape,e.shape,e.style),e},subPixelOptimizeRect:function(e){return vi(e.shape,e.shape,e.style),e},subPixelOptimize:Kg,setElementHoverStyle:os,setHoverStyle:ya,setAsHighDownDispatcher:rg,isHighDownDispatcher:Fc,getHighlightDigit:cn,setLabelStyle:Cu,modifyLabelStyle:vv,setTextStyle:Ya,setText:function(e,t,n){var r,o={isRectText:!0};!1===n?r=!0:o.autoColor=n,Ol(e,t,o,r)},getFont:J0,updateProps:so,initProps:Zo,getTransform:Ws,applyTransform:Ql,transformDirection:Tb,groupTransition:Q0,clipPointsByRect:s1,clipRectByRect:function(e,t){var n=Ia(e.x,t.x),r=ou(e.x+e.width,t.x+t.width),o=Ia(e.y,t.y),i=ou(e.y+e.height,t.y+t.height);if(n<=r&&o<=i)return{x:n,y:o,width:r-n,height:i-o}},createIcon:ig,linePolygonIntersect:ag,lineLineIntersect:Qg,Group:pn,Image:De,Text:vo,Circle:Fs,Sector:oo,Ring:Vs,Polygon:wo,Polyline:Bc,Rect:ei,Line:Yi,BezierCurve:np,Arc:Zg,IncrementalDisplayable:Tl,CompoundPath:$g,LinearGradient:fh,RadialGradient:xu,BoundingRect:Vo}),Ba=["textStyle","color"],ey={getTextColor:function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(Ba):null)},getFont:function(){return J0({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(e){return Qi(e,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}},ty=Yo([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),q_={getItemStyle:function(e,t){var n=ty(this,e,t),r=this.getBorderLineDash();return r&&(n.lineDash=r),n},getBorderLineDash:function(){var e=this.get("borderType");return"solid"===e||null==e?null:"dashed"===e?[5,5]:[1,1]}},tm=_e,nm=La();function $o(e,t,n){this.parentModel=t,this.ecModel=n,this.option=e}function ny(e,t,n){for(var r=0;r<t.length&&(!t[r]||null!=(e=e&&"object"==typeof e?e[t[r]]:null));r++);return null==e&&n&&(e=n.get(t)),e}function bv(e,t){var n=nm(e).getParent;return n?n.call(e,t):e.parentModel}$o.prototype={constructor:$o,init:null,mergeOption:function(e){Sn(this.option,e,!0)},get:function(e,t){return null==e?this.option:ny(this.option,this.parsePath(e),!t&&bv(this,e))},getShallow:function(e,t){var n=this.option,r=null==n?n:n[e],o=!t&&bv(this,e);return null==r&&o&&(r=o.getShallow(e)),r},getModel:function(e,t){var n;return new $o(null==e?this.option:ny(this.option,e=this.parsePath(e)),t=t||(n=bv(this,e))&&n.getModel(e),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(Gn(this.option))},setReadOnly:function(e){},parsePath:function(e){return"string"==typeof e&&(e=e.split(".")),e},customizeGetParent:function(e){nm(this).getParent=e},isAnimationEnabled:function(){if(!Cr.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},ah($o),Kh($o),tm($o,Lc),tm($o,Zm),tm($o,ey),tm($o,q_);var xv=0;function ph(e){return[e||"",xv++,Math.random().toFixed(5)].join("_")}function yi(e,t,n,r){var o=t[1]-t[0],i=n[1]-n[0];if(0==o)return 0==i?n[0]:(n[0]+n[1])/2;if(r)if(0<o){if(e<=t[0])return n[0];if(e>=t[1])return n[1]}else{if(e>=t[0])return n[0];if(e<=t[1])return n[1]}else{if(e===t[0])return n[0];if(e===t[1])return n[1]}return(e-t[0])/o*i+n[0]}function Pn(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return"string"==typeof e?function(n){return n.replace(/^\s+|\s+$/g,"")}(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e}function is(e,t,n){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),n?e:+e}function sg(e){return e.sort(function(t,n){return t-n}),e}function u1(e){if(e=+e,isNaN(e))return 0;for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Pf(e){var t=e.toString(),n=t.indexOf("e");if(0<n){var r=+t.slice(n+1);return r<0?-r:0}var o=t.indexOf(".");return o<0?0:t.length-1-o}function _v(e,t){var n=Math.log,r=Math.LN10,o=Math.floor(n(e[1]-e[0])/r),i=Math.round(n(Math.abs(t[1]-t[0]))/r),s=Math.min(Math.max(-o+i,0),20);return isFinite(s)?s:20}function l1(e,t,n){if(!e[t])return 0;var r=Pr(e,function(S,M){return S+(isNaN(M)?0:M)},0);if(0===r)return 0;for(var o=Math.pow(10,n),i=Kt(e,function(S){return(isNaN(S)?0:S)/r*o*100}),s=100*o,l=Kt(i,function(S){return Math.floor(S)}),c=Pr(l,function(S,M){return S+M},0),f=Kt(i,function(S,M){return S-l[M]});c<s;){for(var h=Number.NEGATIVE_INFINITY,p=null,y=0,b=f.length;y<b;++y)f[y]>h&&(h=f[y],p=y);++l[p],f[p]=0,++c}return l[t]/o}var wv=9007199254740991;function ry(e){var t=2*Math.PI;return(e%t+t)%t}function Qd(e){return-1e-4<e&&e<1e-4}var oy=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Rf(e){if(e instanceof Date)return e;if("string"!=typeof e)return null==e?new Date(NaN):new Date(Math.round(e));var t=oy.exec(e);if(!t)return new Date(NaN);if(t[8]){var n=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(n-=t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,n,+(t[5]||0),+t[6]||0,+t[7]||0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,+t[7]||0)}function yh(e){return Math.pow(10,Yu(e))}function Yu(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return 10<=e/Math.pow(10,t)&&t++,t}function rm(e,t){var n=Yu(e),r=Math.pow(10,n),o=e/r;return e=(t?o<1.5?1:o<2.5?2:o<4?3:o<7?5:10:o<1?1:o<2?2:o<3?3:o<5?5:10)*r,-20<=n?+e.toFixed(n<0?-n:0):e}function om(e){e.sort(function(l,c){return function f(h,p,y){return h.interval[y]<p.interval[y]||h.interval[y]===p.interval[y]&&(h.close[y]-p.close[y]==(y?-1:1)||!y&&f(h,p,1))}(l,c,0)?-1:1});for(var t=-1/0,n=1,r=0;r<e.length;){for(var o=e[r].interval,i=e[r].close,s=0;s<2;s++)o[s]<=t&&(o[s]=t,i[s]=s?1:1-n),t=o[s],n=i[s];o[0]===o[1]&&i[0]*i[1]!=1?e.splice(r,1):r++}return e}function im(e){return 0<=e-parseFloat(e)}var Db=(Object.freeze||Object)({linearMap:yi,parsePercent:Pn,round:is,asc:sg,getPrecision:u1,getPrecisionSafe:Pf,getPixelPrecision:_v,getPercentWithPrecision:l1,MAX_SAFE_INTEGER:wv,remRadian:ry,isRadianAroundZero:Qd,parseDate:Rf,quantity:yh,quantityExponent:Yu,nice:rm,quantile:function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),o=+e[r-1],i=n-r;return i?o+i*(e[r]-o):o},reformIntervals:om,isNumeric:im});function ec(e){return isNaN(e)?"-":(e=(e+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<e.length?"."+e[1]:"")}function ug(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(n,r){return r.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var bh=Es,am=/([&<>"'])/g,xh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Wo(e){return null==e?"":(e+"").replace(am,function(t,n){return xh[n]})}function Sv(e,t){return"{"+e+(null==t?"":t)+"}"}var Vc=["a","b","c","d","e","f","g"];function Cv(e,t,n){rn(t)||(t=[t]);var r=t.length;if(!r)return"";for(var o=t[0].$vars||[],i=0;i<o.length;i++){var s=Vc[i];e=e.replace(Sv(s),Sv(s,0))}for(var l=0;l<r;l++)for(var c=0;c<o.length;c++){var f=t[l][o[c]];e=e.replace(Sv(Vc[c],l),n?Wo(f):f)}return e}function c1(e,t,n){return me(t,function(r,o){e=e.replace("{"+o+"}",n?Wo(r):r)}),e}function sm(e,t){var n=(e=tr(e)?{color:e,extraCssText:t}:e||{}).color,o=(t=e.extraCssText,e.renderMode||"html"),i=e.markerId||"X";return n?"html"===o?"subItem"===e.type?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Wo(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+Wo(n)+";"+(t||"")+'"></span>':{renderMode:o,content:"{marker"+i+"|}  ",style:{color:n}}:""}function ef(e,t){return"0000".substr(0,t-(e+="").length)+e}function Hc(e,t,n){"week"!==e&&"month"!==e&&"quarter"!==e&&"half-year"!==e&&"year"!==e||(e="MM-dd\nyyyy");var r=Rf(t),o=n?"UTC":"",i=r["get"+o+"FullYear"](),s=r["get"+o+"Month"]()+1,l=r["get"+o+"Date"](),c=r["get"+o+"Hours"](),f=r["get"+o+"Minutes"](),h=r["get"+o+"Seconds"](),p=r["get"+o+"Milliseconds"]();return e.replace("MM",ef(s,2)).replace("M",s).replace("yyyy",i).replace("yy",i%100).replace("dd",ef(l,2)).replace("d",l).replace("hh",ef(c,2)).replace("h",c).replace("mm",ef(f,2)).replace("m",f).replace("ss",ef(h,2)).replace("s",h).replace("SSS",ef(p,3))}function up(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)}var X_=bo;function su(e,t){if("_blank"===t||"blank"===t){var n=window.open();n.opener=null,n.location=e}else window.open(e,t)}var kv=(Object.freeze||Object)({addCommas:ec,toCamelCase:ug,normalizeCssArray:bh,encodeHTML:Wo,formatTpl:Cv,formatTplSimple:c1,getTooltipMarker:sm,formatTime:Hc,capitalFirst:up,truncateText:X_,getTextBoundingRect:function(e){return Qi(e.text,e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich,e.truncate)},getTextRect:function(e,t,n,r,o,i,s,l){return Qi(e,t,n,r,o,l,i,s)},windowOpen:su}),tf=me,Mv=["left","right","top","bottom","width","height"],Nf=[["width","left","right"],["height","top","bottom"]];function Ab(e,t,n,r,o){var i=0,s=0;null==r&&(r=1/0),null==o&&(o=1/0);var l=0;t.eachChild(function(c,f){var h,p,y=c.position,b=c.getBoundingRect(),S=t.childAt(f+1),M=S&&S.getBoundingRect();if("horizontal"===e){var k=b.width+(M?-M.x+b.x:0);l=r<(h=i+k)||c.newline?(i=0,h=k,s+=l+n,b.height):Math.max(l,b.height)}else{var O=b.height+(M?-M.y+b.y:0);l=o<(p=s+O)||c.newline?(i+=l+n,s=0,p=O,b.width):Math.max(l,b.width)}c.newline||(y[0]=i,y[1]=s,"horizontal"===e?i=h+n:s=p+n)})}var Lf=Ab;function No(e,t,n){n=bh(n||0);var r=t.width,o=t.height,i=Pn(e.left,r),s=Pn(e.top,o),l=Pn(e.right,r),c=Pn(e.bottom,o),f=Pn(e.width,r),h=Pn(e.height,o),p=n[2]+n[0],y=n[1]+n[3],b=e.aspect;switch(isNaN(f)&&(f=r-l-y-i),isNaN(h)&&(h=o-c-p-s),null!=b&&(isNaN(f)&&isNaN(h)&&(r/o<b?f=.8*r:h=.8*o),isNaN(f)&&(f=b*h),isNaN(h)&&(h=f/b)),isNaN(i)&&(i=r-l-f-y),isNaN(s)&&(s=o-c-h-p),e.left||e.right){case"center":i=r/2-f/2-n[3];break;case"right":i=r-f-y}switch(e.top||e.bottom){case"middle":case"center":s=o/2-h/2-n[0];break;case"bottom":s=o-h-p}i=i||0,s=s||0,isNaN(f)&&(f=r-y-i-(l||0)),isNaN(h)&&(h=o-p-s-(c||0));var S=new Vo(i+n[3],s+n[0],f,h);return S.margin=n,S}function lp(e,t,n,r,o){var i=!o||!o.hv||o.hv[0],s=!o||!o.hv||o.hv[1],l=o&&o.boundingMode||"all";if(i||s){var c;if("raw"===l)c="group"===e.type?new Vo(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(c=e.getBoundingRect(),e.needLocalTransform()){var f=e.getLocalTransform();(c=c.clone()).applyTransform(f)}t=No(un({width:c.width,height:c.height},t),n,r);var h=e.position,p=i?t.x-c.x:0,y=s?t.y-c.y:0;e.attr("position","raw"===l?[p,y]:[h[0]+p,h[1]+y])}}function Bf(e,t,n){xt(n)||(n={});var r=n.ignoreSize;rn(r)||(r=[r,r]);var o=s(Nf[0],0),i=s(Nf[1],1);function s(h,p){var y={},b=0,S={},M=0;if(tf(h,function(P){S[P]=e[P]}),tf(h,function(P){l(t,P)&&(y[P]=S[P]=t[P]),c(y,P)&&b++,c(S,P)&&M++}),r[p])return c(t,h[1])?S[h[2]]=null:c(t,h[2])&&(S[h[1]]=null),S;if(2!==M&&b){if(2<=b)return y;for(var k=0;k<h.length;k++){var O=h[k];if(!l(y,O)&&l(e,O)){y[O]=e[O];break}}return y}return S}function l(h,p){return h.hasOwnProperty(p)}function c(h,p){return null!=h[p]&&"auto"!==h[p]}function f(h,p,y){tf(h,function(b){p[b]=y[b]})}f(Nf[0],e,o),f(Nf[1],e,i)}function cp(e){return Ib({},e)}function Ib(e,t){return t&&e&&tf(Mv,function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}ar(Ab,"vertical"),ar(Ab,"horizontal");var iy,dp,fp,lg=La(),Go=$o.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(e,t,n,r){$o.call(this,e,t,n,r),this.uid=ph("ec_cpt_model")},init:function(e,t,n,r){this.mergeDefaultAndTheme(e,n)},mergeDefaultAndTheme:function(e,t){var n=this.layoutMode,r=n?cp(e):{};Sn(e,t.getTheme().get(this.mainType)),Sn(e,this.getDefaultOption()),n&&Bf(e,r,n)},mergeOption:function(e,t){Sn(this.option,e,!0);var n=this.layoutMode;n&&Bf(this.option,e,n)},optionUpdated:function(e,t){},getDefaultOption:function(){var e=lg(this);if(!e.defaultOption){for(var t=[],n=this.constructor;n;){var r=n.prototype.defaultOption;r&&t.push(r),n=n.superClass}for(var o={},i=t.length-1;0<=i;i--)o=Sn(o,t[i],!0);e.defaultOption=o}return e.defaultOption},getReferringComponents:function(e){return this.ecModel.queryComponents({mainType:e,index:this.get(e+"Index",!0),id:this.get(e+"Id",!0)})}});function Tv(e,t){return e[t]||(e[t]={predecessor:[],successor:[]}),e[t]}Da(Go,{registerWhenExtend:!0}),dp={},(iy=Go).registerSubTypeDefaulter=function(e,t){e=sl(e),dp[e.main]=t},iy.determineSubType=function(e,t){var n=t.type;if(!n){var r=sl(e).main;iy.hasSubTypes(e)&&dp[r]&&(n=dp[r](t))}return n},fp=function(e){var t=[];return me(Go.getClassesByMainType(e),function(n){t=t.concat(n.prototype.dependencies||[])}),t=Kt(t,function(n){return sl(n).main}),"dataset"!==e&&dn(t,"dataset")<=0&&t.unshift("dataset"),t},Go.topologicalTravel=function(e,t,n,r){if(e.length){var o=(S={},M=[],me(b=t,function(k){var R,F,G,O=Tv(S,k),P=(R=O.originalDeps=fp(k),F=b,G=[],me(R,function(X){0<=dn(F,X)&&G.push(X)}),G);O.entryCount=P.length,0===O.entryCount&&M.push(k),me(P,function(R){dn(O.predecessor,R)<0&&O.predecessor.push(R);var F=Tv(S,R);dn(F.successor,R)<0&&F.successor.push(k)})}),{graph:S,noEntryList:M}),i=o.graph,s=o.noEntryList,l={};for(me(e,function(b){l[b]=!0});s.length;){var c=s.pop(),f=i[c],h=!!l[c];h&&(n.call(r,c,f.originalDeps.slice()),delete l[c]),me(f.successor,h?y:p)}me(l,function(){throw new Error("Circle dependency may exists")})}var b,S,M;function p(b){i[b].entryCount--,0===i[b].entryCount&&s.push(b)}function y(b){l[b]=!0,p(b)}},_e(Go,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}});var ay="";"undefined"!=typeof navigator&&(ay=navigator.platform||"");var Zu={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:ay.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},Dv=La(),zf={clearColorPalette:function(){Dv(this).colorIdx=0,Dv(this).colorNameMap={}},getColorFromPalette:function(e,t,n){var r=Dv(t=t||this),o=r.colorIdx||0,i=r.colorNameMap=r.colorNameMap||{};if(i.hasOwnProperty(e))return i[e];var s=Js(this.get("color",!0)),l=this.get("colorLayer",!0),c=null!=n&&l?function(h,p){for(var y=h.length,b=0;b<y;b++)if(h[b].length>p)return h[b];return h[y-1]}(l,n):s;if((c=c||s)&&c.length){var f=c[o];return e&&(i[e]=f),r.colorIdx=(o+1)%c.length,f}}},cg="original",_h="arrayRows",Wc="objectRows",El="keyedColumns",dg="unknown",Av="typedArray";function hl(e){this.fromDataset=e.fromDataset,this.data=e.data||(e.sourceFormat===El?{}:[]),this.sourceFormat=e.sourceFormat||dg,this.seriesLayoutBy=e.seriesLayoutBy||"column",this.dimensionsDefine=e.dimensionsDefine,this.encodeDefine=e.encodeDefine&&ut(e.encodeDefine),this.startIndex=e.startIndex||0,this.dimensionsDetectCount=e.dimensionsDetectCount}hl.seriesDataToSource=function(e){return new hl({data:e,sourceFormat:Jo(e)?Av:cg,fromDataset:!1})},Kh(hl);var fg=La();function Eb(e){var t=e.option,n=t.data,r=Jo(n)?Av:cg,o=!1,i=t.seriesLayoutBy,s=t.sourceHeader,l=t.dimensions,c=bs(e);if(c){var f=c.option;n=f.source,r=fg(c).sourceFormat,o=!0,i=i||f.seriesLayoutBy,null==s&&(s=f.sourceHeader),l=l||f.dimensions}var h=function(p,y,b,S,M){if(!p)return{dimensionsDefine:xc(M)};var k,O;if(y===_h)"auto"===S||null==S?wh(function(R){null!=R&&"-"!==R&&(tr(R)?null==O&&(O=1):O=0)},b,p,10):O=S?1:0,M||1!==O||(M=[],wh(function(R,F){M[F]=null!=R?R:""},b,p)),k=M?M.length:"row"===b?p.length:p[0]?p[0].length:null;else if(y===Wc)M=M||function(R){for(var F,G=0;G<R.length&&!(F=R[G++]););if(F){var X=[];return me(F,function(Y,Q){X.push(Q)}),X}}(p);else if(y===El)M||(M=[],me(p,function(R,F){M.push(F)}));else if(y===cg){var P=oh(p[0]);k=rn(P)&&P.length||1}return{startIndex:O,dimensionsDefine:xc(M),dimensionsDetectCount:k}}(n,r,i,s,l);fg(e).source=new hl({data:n,fromDataset:o,seriesLayoutBy:i,sourceFormat:r,dimensionsDefine:h.dimensionsDefine,startIndex:h.startIndex,dimensionsDetectCount:h.dimensionsDetectCount,encodeDefine:t.encode})}function xc(e){if(e){var t=ut();return Kt(e,function(n,r){if(null==(n=Fn({},xt(n)?n:{name:n})).name)return n;n.name+="",null==n.displayName&&(n.displayName=n.name);var o=t.get(n.name);return o?n.name+="-"+o.count++:t.set(n.name,{count:1}),n})}}function wh(e,t,n,r){if(null==r&&(r=1/0),"row"===t)for(var o=0;o<n.length&&o<r;o++)e(n[o]?n[o][0]:null,o);else{var i=n[0]||[];for(o=0;o<i.length&&o<r;o++)e(i[o],o)}}function as(e,t,n){var r={},o=bs(t);if(!o||!e)return r;var i,s,l=[],c=[],h=fg(t.ecModel).datasetMap,p=o.uid+"_"+n.seriesLayoutBy;me(e=e.slice(),function(M,k){xt(M)||(e[k]={name:M}),"ordinal"===M.type&&null==i&&(s=S(e[i=k])),r[M.name]=[]});var y=h.get(p)||h.set(p,{categoryWayDim:s,valueWayDim:0});function b(M,k,O){for(var P=0;P<O;P++)M.push(k+P)}function S(M){var k=M.dimsDef;return k?k.length:1}return me(e,function(M,k){var O=M.name,P=S(M);if(null==i){var R=y.valueWayDim;b(r[O],R,P),b(c,R,P),y.valueWayDim+=P}else i===k?(b(r[O],0,P),b(l,0,P)):(b(r[O],R=y.categoryWayDim,P),b(c,R,P),y.categoryWayDim+=P)}),l.length&&(r.itemName=l),c.length&&(r.seriesName=c),r}function um(e,t,n){var r={};if(!bs(e))return r;var o,i=t.sourceFormat,s=t.dimensionsDefine;i!==Wc&&i!==El||me(s,function(f,h){"name"===(xt(f)?f.name:f)&&(o=h)});var l=function(){for(var f={},h={},p=[],y=0,b=Math.min(5,n);y<b;y++){var S=lm(t.data,i,t.seriesLayoutBy,s,t.startIndex,y);p.push(S);var M=3===S;if(M&&null==f.v&&y!==o&&(f.v=y),null!=f.n&&f.n!==f.v&&(M||3!==p[f.n])||(f.n=y),k(f)&&3!==p[f.n])return f;M||(2===S&&null==h.v&&y!==o&&(h.v=y),null!=h.n&&h.n!==h.v||(h.n=y))}function k(O){return null!=O.v&&null!=O.n}return k(f)?f:k(h)?h:null}();if(l){r.value=l.v;var c=null!=o?o:l.n;r.itemName=[c],r.seriesName=[c]}return r}function bs(e){var t=e.option;if(!t.data)return e.ecModel.getComponent("dataset",t.datasetIndex||0)}function lm(e,t,n,r,o,i){var s,l,c;if(Jo(e))return 3;if(r){var f=r[i];xt(f)?(l=f.name,c=f.type):tr(f)&&(l=f)}if(null!=c)return"ordinal"===c?1:3;if(t===_h)if("row"===n){for(var h=e[i],p=0;p<(h||[]).length&&p<5;p++)if(null!=(s=M(h[o+p])))return s}else for(p=0;p<e.length&&p<5;p++){var y=e[o+p];if(y&&null!=(s=M(y[i])))return s}else if(t===Wc){if(!l)return 3;for(p=0;p<e.length&&p<5;p++)if((b=e[p])&&null!=(s=M(b[l])))return s}else if(t===El){if(!l||!(h=e[l])||Jo(h))return 3;for(p=0;p<h.length&&p<5;p++)if(null!=(s=M(h[p])))return s}else if(t===cg)for(p=0;p<e.length&&p<5;p++){var b,S=oh(b=e[p]);if(!rn(S))return 3;if(null!=(s=M(S[i])))return s}function M(k){var O=tr(k);return null!=k&&isFinite(k)&&""!==k?O?2:3:O&&"-"!==k?1:void 0}return 3}var hg="\0_ec_inner",gg=$o.extend({init:function(e,t,n,r){n=n||{},this.option=null,this._theme=new $o(n),this._optionManager=r},setOption:function(e,t){_s(!(hg in e),"please use chart.getOption()"),this._optionManager.setOption(e,t),this.resetOption(null)},resetOption:function(e){var t=!1,n=this._optionManager;if(!e||"recreate"===e){var r=n.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this.mergeOption(r)):function(s){var l,f;s=s,this.option={},this.option[hg]=1,this._componentsMap=ut({series:[]}),f=(l=s).color&&!l.colorLayer,me(this._theme.option,function(h,p){"colorLayer"===p&&f||Go.hasClass(p)||("object"==typeof h?l[p]=l[p]?Sn(l[p],h,!1):Gn(h):null==l[p]&&(l[p]=h))}),Sn(s,Zu,!1),this.mergeOption(s)}.call(this,r),t=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var o=n.getTimelineOption(this);o&&(this.mergeOption(o),t=!0)}if(!e||"recreate"===e||"media"===e){var i=n.getMediaOption(this,this._api);i.length&&me(i,function(s){this.mergeOption(s,t=!0)},this)}return t},mergeOption:function(e){var t=this.option,n=this._componentsMap,r=[];(function(o){fg(o).datasetMap=ut()})(this),me(e,function(o,i){null!=o&&(Go.hasClass(i)?i&&r.push(i):t[i]=null==t[i]?Gn(o):Sn(t[i],o,!0))}),Go.topologicalTravel(r,Go.getAllClassMainTypes(),function(o,i){var s=Js(e[o]),l=Ym(n.get(o),s);X0(l),me(l,function(f,h){var b,S,p=f.option;xt(p)&&(f.keyInfo.mainType=o,f.keyInfo.subType=(S=f.exist,(b=p).type?b.type:S?S.subType:Go.determineSubType(o,b)))});var c=function(f,h){rn(h)||(h=h?[h]:[]);var p={};return me(h,function(y){p[y]=(f.get(y)||[]).slice()}),p}(n,i);t[o]=[],n.set(o,[]),me(l,function(f,h){var p=f.exist,y=f.option;if(_s(xt(y)||p,"Empty component definition"),y){var b=Go.getClass(o,f.keyInfo.subType,!0);if(p&&p.constructor===b)p.name=f.keyInfo.name,p.mergeOption(y,this),p.optionUpdated(y,!1);else{var S=Fn({dependentModels:c,componentIndex:h},f.keyInfo);Fn(p=new b(y,this,this,S),S),p.init(y,this,this,S),p.optionUpdated(null,!0)}}else p.mergeOption({},this),p.optionUpdated({},!1);n.get(o)[h]=p,t[o][h]=p.option},this),"series"===o&&Gc(this,n.get("series"))},this),this._seriesIndicesMap=ut(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var e=Gn(this.option);return me(e,function(t,n){if(Go.hasClass(n)){for(var r=(t=Js(t)).length-1;0<=r;r--)vs(t[r])&&t.splice(r,1);e[n]=t}}),delete e[hg],e},getTheme:function(){return this._theme},getComponent:function(e,t){var n=this._componentsMap.get(e);if(n)return n[t||0]},queryComponents:function(e){var t=e.mainType;if(!t)return[];var n,r=e.index,o=e.id,i=e.name,s=this._componentsMap.get(t);if(!s||!s.length)return[];if(null!=r)rn(r)||(r=[r]),n=_r(Kt(r,function(f){return s[f]}),function(f){return!!f});else if(null!=o){var l=rn(o);n=_r(s,function(f){return l&&0<=dn(o,f.id)||!l&&f.id===o})}else if(null!=i){var c=rn(i);n=_r(s,function(f){return c&&0<=dn(i,f.name)||!c&&f.name===i})}else n=s.slice();return Iv(n,e)},findComponents:function(e){var t,n,r,o,i,l=e.mainType,c=(n=l+"Index",r=l+"Id",o=l+"Name",!(t=e.query)||null==t[n]&&null==t[r]&&null==t[o]?null:{mainType:l,index:t[n],id:t[r],name:t[o]});return i=Iv(c?this.queryComponents(c):this._componentsMap.get(l),e),e.filter?_r(i,e.filter):i},eachComponent:function(e,t,n){var r=this._componentsMap;"function"==typeof e?(n=t,t=e,r.each(function(o,i){me(o,function(s,l){t.call(n,i,s,l)})})):tr(e)?me(r.get(e),t,n):xt(e)&&me(this.findComponents(e),t,n)},getSeriesByName:function(e){return _r(this._componentsMap.get("series"),function(t){return t.name===e})},getSeriesByIndex:function(e){return this._componentsMap.get("series")[e]},getSeriesByType:function(e){return _r(this._componentsMap.get("series"),function(t){return t.subType===e})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(e,t){me(this._seriesIndices,function(n){var r=this._componentsMap.get("series")[n];e.call(t,r,n)},this)},eachRawSeries:function(e,t){me(this._componentsMap.get("series"),e,t)},eachSeriesByType:function(e,t,n){me(this._seriesIndices,function(r){var o=this._componentsMap.get("series")[r];o.subType===e&&t.call(n,o,r)},this)},eachRawSeriesByType:function(e,t,n){return me(this.getSeriesByType(e),t,n)},isSeriesFiltered:function(e){return null==this._seriesIndicesMap.get(e.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(e,t){Gc(this,_r(this._componentsMap.get("series"),e,t))},restoreData:function(e){var t=this._componentsMap;Gc(this,t.get("series"));var n=[];t.each(function(r,o){n.push(o)}),Go.topologicalTravel(n,Go.getAllClassMainTypes(),function(r,o){me(t.get(r),function(i){"series"===r&&function(s,l){if(l){var c=l.seiresIndex,f=l.seriesId,h=l.seriesName;return null!=c&&s.componentIndex!==c||null!=f&&s.id!==f||null!=h&&s.name!==h}}(i,e)||i.restoreData()})})}});function Gc(e,t){e._seriesIndicesMap=ut(e._seriesIndices=Kt(t,function(n){return n.componentIndex})||[])}function Iv(e,t){return t.hasOwnProperty("subType")?_r(e,function(n){return n.subType===t.subType}):e}_e(gg,zf);var sy=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function hp(e){me(sy,function(t){this[t]=Nn(e[t],e)},this)}var uy={};function ku(){this._coordinateSystems=[]}ku.prototype={constructor:ku,create:function(e,t){var n=[];me(uy,function(r,o){var i=r.create(e,t);n=n.concat(i||[])}),this._coordinateSystems=n},update:function(e,t){me(this._coordinateSystems,function(n){n.update&&n.update(e,t)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},ku.register=function(e,t){uy[e]=t},ku.get=function(e){return uy[e]};var Ov=me,gl=Gn,fo=Kt,da=Sn,Pb=/^(min|max)?(.+)$/;function ly(e){this._api=e,this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[]}function d1(e,t,n){var r={width:t,height:n,aspectratio:t/n},o=!0;return me(e,function(i,s){var h,p,y,l=s.match(Pb);if(l&&l[1]&&l[2]){var c=l[1],f=l[2].toLowerCase();h=r[f],p=i,!("min"===(y=c)?p<=h:"max"===y?h<=p:h===p)&&(o=!1)}}),o}ly.prototype={constructor:ly,setOption:function(e,t){e&&me(Js(e.series),function(o){o&&o.data&&Jo(o.data)&&ds(o.data)}),e=gl(e);var n=this._optionBackup,r=function(o,i,s){var l,c,f=[],h=[],p=o.timeline;return o.baseOption&&(c=o.baseOption),(p||o.options)&&(c=c||{},f=(o.options||[]).slice()),o.media&&(c=c||{},Ov(o.media,function(b){b&&b.option&&(b.query?h.push(b):l=l||b)})),(c=c||o).timeline||(c.timeline=p),Ov([c].concat(f).concat(Kt(h,function(b){return b.option})),function(b){Ov(i,function(S){S(b,s)})}),{baseOption:c,timelineOptions:f,mediaDefault:l,mediaList:h}}.call(this,e,t,!n);this._newBaseOption=r.baseOption,n?(function(o,i){Ov(i=i||{},function(s,l){if(null!=s){var c=o[l];if(Go.hasClass(l)){s=Js(s);var f=Ym(c=Js(c),s);o[l]=fo(f,function(h){return h.option&&h.exist?da(h.exist,h.option,!0):h.exist||h.option})}else o[l]=da(c,s,!0)}})}(n.baseOption,r.baseOption),r.timelineOptions.length&&(n.timelineOptions=r.timelineOptions),r.mediaList.length&&(n.mediaList=r.mediaList),r.mediaDefault&&(n.mediaDefault=r.mediaDefault)):this._optionBackup=r},mountOption:function(e){var t=this._optionBackup;return this._timelineOptions=fo(t.timelineOptions,gl),this._mediaList=fo(t.mediaList,gl),this._mediaDefault=gl(t.mediaDefault),this._currentMediaIndices=[],gl(e?t.baseOption:this._newBaseOption)},getTimelineOption:function(e){var t,n=this._timelineOptions;if(n.length){var r=e.getComponent("timeline");r&&(t=gl(n[r.getCurrentIndex()],!0))}return t},getMediaOption:function(e){var h,t=this._api.getWidth(),n=this._api.getHeight(),r=this._mediaList,o=this._mediaDefault,i=[],s=[];if(!r.length&&!o)return s;for(var l=0,c=r.length;l<c;l++)d1(r[l].query,t,n)&&i.push(l);return!i.length&&o&&(i=[-1]),i.length&&(h=this._currentMediaIndices,!(i.join(",")===h.join(",")))&&(s=fo(i,function(f){return gl(-1===f?o.option:r[f].option)})),this._currentMediaIndices=i,s}};var _d=me,Ev=xt,cy=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function dy(e){var t=e&&e.itemStyle;if(t)for(var n=0,r=cy.length;n<r;n++){var o=cy[n],i=t.normal,s=t.emphasis;i&&i[o]&&(e[o]=e[o]||{},e[o].normal?Sn(e[o].normal,i[o]):e[o].normal=i[o],i[o]=null),s&&s[o]&&(e[o]=e[o]||{},e[o].emphasis?Sn(e[o].emphasis,s[o]):e[o].emphasis=s[o],s[o]=null)}}function $u(e,t,n){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var r=e[t].normal,o=e[t].emphasis;r&&(n?(e[t].normal=e[t].emphasis=null,un(e[t],r)):e[t]=r),o&&(e.emphasis=e.emphasis||{},e.emphasis[t]=o)}}function Mu(e){$u(e,"itemStyle"),$u(e,"lineStyle"),$u(e,"areaStyle"),$u(e,"label"),$u(e,"labelLine"),$u(e,"upperLabel"),$u(e,"edgeLabel")}function hi(e,t){var n=Ev(e)&&e[t],r=Ev(n)&&n.textStyle;if(r)for(var o=0,i=uv.length;o<i;o++)r.hasOwnProperty(t=uv[o])&&(n[t]=r[t])}function Gs(e){e&&(Mu(e),hi(e,"label"),e.emphasis&&hi(e.emphasis,"label"))}function _c(e){return rn(e)?e:e?[e]:[]}function cm(e){return(rn(e)?e[0]:e)||{}}function dm(e){me(mg,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var mg=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Rb=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],fm=function(e,t){(function(e,t){_d(_c(e.series),function(r){Ev(r)&&function(o){if(Ev(o)){dy(o),Mu(o),hi(o,"label"),hi(o,"upperLabel"),hi(o,"edgeLabel"),o.emphasis&&(hi(o.emphasis,"label"),hi(o.emphasis,"upperLabel"),hi(o.emphasis,"edgeLabel")),(s=o.markPoint)&&(dy(s),Gs(s)),(l=o.markLine)&&(dy(l),Gs(l));var i=o.markArea;i&&Gs(i);var s,l,c=o.data;if("graph"===o.type){c=c||o.nodes;var f=o.links||o.edges;if(f&&!Jo(f))for(var h=0;h<f.length;h++)Gs(f[h]);me(o.categories,function(b){Mu(b)})}if(c&&!Jo(c))for(h=0;h<c.length;h++)Gs(c[h]);if((s=o.markPoint)&&s.data){var p=s.data;for(h=0;h<p.length;h++)Gs(p[h])}if((l=o.markLine)&&l.data){var y=l.data;for(h=0;h<y.length;h++)rn(y[h])?(Gs(y[h][0]),Gs(y[h][1])):Gs(y[h])}"gauge"===o.type?(hi(o,"axisLabel"),hi(o,"title"),hi(o,"detail")):"treemap"===o.type?($u(o.breadcrumb,"itemStyle"),me(o.levels,function(b){Mu(b)})):"tree"===o.type&&Mu(o.leaves)}}(r)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),_d(n,function(r){_d(_c(e[r]),function(o){o&&(hi(o,"axisLabel"),hi(o.axisPointer,"label"))})}),_d(_c(e.parallel),function(r){var o=r&&r.parallelAxisDefault;hi(o,"axisLabel"),hi(o&&o.axisPointer,"label")}),_d(_c(e.calendar),function(r){$u(r,"itemStyle"),hi(r,"dayLabel"),hi(r,"monthLabel"),hi(r,"yearLabel")}),_d(_c(e.radar),function(r){hi(r,"name")}),_d(_c(e.geo),function(r){Ev(r)&&(Gs(r),_d(_c(r.regions),function(o){Gs(o)}))}),_d(_c(e.timeline),function(r){Gs(r),$u(r,"label"),$u(r,"itemStyle"),$u(r,"controlStyle",!0);var o=r.data;rn(o)&&me(o,function(i){xt(i)&&($u(i,"label"),$u(i,"itemStyle"))})}),_d(_c(e.toolbox),function(r){$u(r,"iconStyle"),_d(r.feature,function(o){$u(o,"iconStyle")})}),hi(cm(e.axisPointer),"label"),hi(cm(e.tooltip).axisPointer,"label")})(e,t),e.series=Js(e.series),me(e.series,function(n){if(xt(n)){var r=n.type;if("line"===r)null!=n.clipOverflow&&(n.clip=n.clipOverflow);else if("pie"===r||"gauge"===r)null!=n.clockWise&&(n.clockwise=n.clockWise);else if("gauge"===r){var o=function(i,s){s=s.split(",");for(var l=i,c=0;c<s.length&&null!=(l=l&&l[s[c]]);c++);return l}(n,"pointer.color");null!=o&&function(i,s,l,c){s=s.split(",");for(var f,h=i,p=0;p<s.length-1;p++)null==h[f=s[p]]&&(h[f]={}),h=h[f];null!=h[s[p]]||(h[s[p]]=l)}(n,"itemStyle.color",o)}dm(n)}}),e.dataRange&&(e.visualMap=e.dataRange),me(Rb,function(n){var r=e[n];r&&(rn(r)||(r=[r]),me(r,function(o){dm(o)}))})};function Sh(e){me(e,function(t,n){var r=[],o=[NaN,NaN],s=t.data,l=t.isStackedByIndex,c=s.map([t.stackResultDimension,t.stackedOverDimension],function(f,h,p){var y,b,S=s.get(t.stackedDimension,p);if(isNaN(S))return o;l?b=s.getRawIndex(p):y=s.get(t.stackedByDimension,p);for(var M=NaN,k=n-1;0<=k;k--){var O=e[k];if(l||(b=O.data.rawIndexOf(O.stackedByDimension,y)),0<=b){var P=O.data.getByRawIndex(O.stackResultDimension,b);if(0<=S&&0<P||S<=0&&P<0){S+=P,M=P;break}}}return r[0]=S,r[1]=M,r});s.hostModel.setData(c),t.data=c})}function hm(e,t){hl.isInstance(e)||(e=hl.seriesDataToSource(e)),this._source=e;var n=this._data=e.data,r=e.sourceFormat;r===Av&&(this._offset=0,this._dimSize=t,this._data=n),Fn(this,eo[r===_h?r+"_"+e.seriesLayoutBy:r])}var fy=hm.prototype;fy.pure=!1;var eo={arrayRows_column:{pure:fy.persistent=!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(e){return this._data[e+this._source.startIndex]},appendData:Nb},arrayRows_row:{pure:!0,count:function(){var e=this._data[0];return e?Math.max(0,e.length-this._source.startIndex):0},getItem:function(e){e+=this._source.startIndex;for(var t=[],n=this._data,r=0;r<n.length;r++){var o=n[r];t.push(o?o[e]:null)}return t},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:wc,getItem:gp,appendData:Nb},keyedColumns:{pure:!0,count:function(){var t=this._data[this._source.dimensionsDefine[0].name];return t?t.length:0},getItem:function(e){for(var t=[],n=this._source.dimensionsDefine,r=0;r<n.length;r++){var o=this._data[n[r].name];t.push(o?o[e]:null)}return t},appendData:function(e){var t=this._data;me(e,function(n,r){for(var o=t[r]||(t[r]=[]),i=0;i<(n||[]).length;i++)o.push(n[i])})}},original:{count:wc,getItem:gp,appendData:Nb},typedArray:{persistent:!(fy.getSource=function(){return this._source}),pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(e,t){t=t||[];for(var n=this._dimSize*(e-=this._offset),r=0;r<this._dimSize;r++)t[r]=this._data[n+r];return t},appendData:function(e){this._data=e},clean:function(){this._offset+=this.count(),this._data=null}}};function wc(){return this._data.length}function gp(e){return this._data[e]}function Nb(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}var uo={arrayRows:Pv,objectRows:function(e,t,n,r){return null!=n?e[r]:e},keyedColumns:Pv,original:function(e,t,n,r){var o=oh(e);return null!=n&&o instanceof Array?o[n]:o},typedArray:Pv};function Pv(e,t,n,r){return null!=n?e[n]:e}var Vf={arrayRows:Rv,objectRows:function(e,t,n,r){return Nv(e[t],this._dimensionInfos[t])},keyedColumns:Rv,original:function(e,t,n,r){var o=e&&(null==e.value?e:e.value);return!this._rawData.pure&&function(i){return Gg(i)&&!(i instanceof Array)}(e)&&(this.hasItemOption=!0),Nv(o instanceof Array?o[r]:o,this._dimensionInfos[t])},typedArray:function(e,t,n,r){return e[r]}};function Rv(e,t,n,r){return Nv(e[r],this._dimensionInfos[t])}function Nv(e,t){var n=t&&t.type;if("ordinal"!==n)return"time"===n&&"number"!=typeof e&&null!=e&&"-"!==e&&(e=+Rf(e)),null==e||""===e?NaN:+e;var r=t&&t.ordinalMeta;return r?r.parseAndCollect(e):e}function nf(e,t,n){if(e){var r=e.getRawDataItem(t);if(null!=r){var o,i,s=e.getProvider().getSource().sourceFormat,l=e.getDimensionInfo(n);return l&&(o=l.name,i=l.index),uo[s](r,t,i,o)}}}function jc(e,t,n){if(e){var r=e.getProvider().getSource().sourceFormat;if(r===cg||r===Wc){var o=e.getRawDataItem(t);return r!==cg||xt(o)||(o=null),o?o[n]:void 0}}}var gm=/\{@(.+?)\}/g,mm={getDataParams:function(e,t){var n=this.getData(t),r=this.getRawValue(e,t),o=n.getRawIndex(e),i=n.getName(e),s=n.getRawDataItem(e),l=n.getItemVisual(e,"color"),c=n.getItemVisual(e,"borderColor"),f=this.ecModel.getComponent("tooltip"),h=pc(f&&f.get("renderMode")),p=this.mainType,y="series"===p,b=n.userOutput;return{componentType:p,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:y?this.subType:null,seriesIndex:this.seriesIndex,seriesId:y?this.id:null,seriesName:y?this.name:null,name:i,dataIndex:o,data:s,dataType:t,value:r,color:l,borderColor:c,dimensionNames:b?b.dimensionNames:null,encode:b?b.encode:null,marker:sm({color:l,renderMode:h}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(e,t,n,r,o){t=t||"normal";var i=this.getData(n),s=i.getItemModel(e),l=this.getDataParams(e,n);null!=r&&l.value instanceof Array&&(l.value=l.value[r]);var c=s.get("normal"===t?[o||"label","formatter"]:[t,o||"label","formatter"]);return"function"==typeof c?(l.status=t,l.dimensionIndex=r,c(l)):"string"==typeof c?Cv(c,l).replace(gm,function(f,h){var p=h.length;return"["===h.charAt(0)&&"]"===h.charAt(p-1)&&(h=+h.slice(1,p-1)),nf(i,e,h)}):void 0},getRawValue:function(e,t){return nf(this.getData(t),e)},formatTooltip:function(){}};function za(e){return new pg(e)}function pg(e){this._reset=(e=e||{}).reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}var Tu=pg.prototype;Tu.perform=function(e){var t,n=this._upstream,r=e&&e.skip;if(this._dirty&&n){var o=this.context;o.data=o.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!r&&(t=this._plan(this.context));var i,s=h(this._modBy),l=this._modDataCount||0,c=h(e&&e.modBy),f=e&&e.modDataCount||0;function h(O){return 1<=O||(O=1),O}s===c&&l===f||(t="reset"),!this._dirty&&"reset"!==t||(this._dirty=!1,i=function(O,P){var R,F;O._dueIndex=O._outputDueEnd=O._dueEnd=0,O._settedOutputEnd=null,!P&&O._reset&&((R=O._reset(O.context))&&R.progress&&(F=R.forceFirstProgress,R=R.progress),rn(R)&&!R.length&&(R=null)),O._progress=R,O._modBy=O._modDataCount=null;var G=O._downstream;return G&&G.dirty(),F}(this,r)),this._modBy=c,this._modDataCount=f;var p=e&&e.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var y=this._dueIndex,b=Math.min(null!=p?this._dueIndex+p:1/0,this._dueEnd);if(!r&&(i||y<b)){var S=this._progress;if(rn(S))for(var M=0;M<S.length;M++)hy(this,S[M],y,b,c,f);else hy(this,S,y,b,c,f)}this._dueIndex=b,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:b}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var tc,nc,Pl,Uc,Ku,rf,Lv=rf={reset:function(e,t,n,r){nc=e,tc=t,Pl=n,Uc=r,Ku=Math.ceil(Uc/Pl),rf.next=1<Pl&&0<Uc?pm:US}};function US(){return nc<tc?nc++:null}function pm(){var e=nc%Ku*Pl+Math.ceil(nc/Ku),t=tc<=nc?null:e<Uc?e:nc;return nc++,t}function hy(e,t,n,r,o,i){Lv.reset(n,r,o,i),e._callingProgress=t,e._callingProgress({start:n,end:r,count:r-n,next:Lv.next},e.context)}Tu.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},Tu.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},Tu.pipe=function(e){this._downstream===e&&!this._dirty||((this._downstream=e)._upstream=this,e.dirty())},Tu.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},Tu.getUpstream=function(){return this._upstream},Tu.getDownstream=function(){return this._downstream},Tu.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e};var of=La(),ba=Go.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(e,t,n,r){this.seriesIndex=this.componentIndex,this.dataTask=za({count:Bv,reset:zv}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,n),Eb(this);var o=this.getInitialData(e,n);Fv(o,this),this.dataTask.context.data=o,of(this).dataBeforeProcessed=o,Du(this)},mergeDefaultAndTheme:function(e,t){var n=this.layoutMode,r=n?cp(e):{},o=this.subType;Go.hasClass(o)&&(o+="Series"),Sn(e,t.getTheme().get(this.subType)),Sn(e,this.getDefaultOption()),Qs(e,"label",["show"]),this.fillDataTextStyle(e.data),n&&Bf(e,r,n)},mergeOption:function(e,t){e=Sn(this.option,e,!0),this.fillDataTextStyle(e.data);var n=this.layoutMode;n&&Bf(this.option,e,n),Eb(this);var r=this.getInitialData(e,t);Fv(r,this),this.dataTask.dirty(),this.dataTask.context.data=r,of(this).dataBeforeProcessed=r,Du(this)},fillDataTextStyle:function(e){if(e&&!Jo(e))for(var t=["show"],n=0;n<e.length;n++)e[n]&&e[n].label&&Qs(e[n],"label",t)},getInitialData:function(){},appendData:function(e){this.getRawData().appendData(e.data)},getData:function(e){var t=vm(this);if(t){var n=t.context.data;return null==e?n:n.getLinkedData(e)}return of(this).data},setData:function(e){var t=vm(this);if(t){var n=t.context;n.data!==e&&t.modifyOutputEnd&&t.setOutputEnd(e.count()),n.outputData=e,t!==this.dataTask&&(n.data=e)}of(this).data=e},getSource:function(){return function(e){return fg(e).source}(this)},getRawData:function(){return of(this).dataBeforeProcessed},getBaseAxis:function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},formatTooltip:function(e,t,n,r){var o=this,i="html"===(r=r||"html")?"<br/>":"\n",s="richText"===r,l={},c=0,h=this.getData(),p=h.mapDimension("defaultedTooltip",!0),y=p.length,b=this.getRawValue(e),S=rn(b),M=h.getItemVisual(e,"color");xt(M)&&M.colorStops&&(M=(M.colorStops[0]||{}).color),M=M||"transparent";var X,k=(1<y||S&&!y?function(X){var Y=Pr(X,function(ye,xe,Te){var Ee=h.getDimensionInfo(Te);return ye|(Ee&&!1!==Ee.tooltip&&null!=Ee.displayName)},0),Q=[];function ne(ye,xe){var Te=h.getDimensionInfo(xe);if(Te&&!1!==Te.otherDims.tooltip){var Ee=Te.type,Ve="sub"+o.seriesIndex+"at"+c,Be=sm({color:M,type:"subItem",renderMode:r,markerId:Ve}),bt=(Y?("string"==typeof Be?Be:Be.content)+Wo(Te.displayName||"-")+": ":"")+Wo("ordinal"===Ee?ye+"":"time"===Ee?t?"":Hc("yyyy/MM/dd hh:mm:ss",ye):ec(ye));bt&&Q.push(bt),s&&(l[Ve]=M,++c)}}p.length?me(p,function(ye){ne(nf(h,e,ye),ye)}):me(X,ne);var le=Y?s?"\n":"<br/>":"",ce=le+Q.join(le||", ");return{renderMode:r,content:ce,style:l}}(b):(X=y?nf(h,e,p[0]):S?b[0]:b,{renderMode:r,content:Wo(ec(X)),style:l})).content,O=o.seriesIndex+"at"+c,P=sm({color:M,type:"item",renderMode:r,markerId:O});l[O]=M,++c;var R=h.getName(e),F=this.name;lv(this)||(F=""),F=F?Wo(F)+(t?": ":i):"";var G="string"==typeof P?P:P.content;return{html:t?G+F+k:F+G+(R?Wo(R)+": "+k:k),markers:l}},isAnimationEnabled:function(){if(Cr.node)return!1;var e=this.getShallow("animation");return e&&this.getData().count()>this.getShallow("animationThreshold")&&(e=!1),e},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(e,t,n){var r=this.ecModel;return zf.getColorFromPalette.call(this,e,t,n)||r.getColorFromPalette(e,t,n)},coordDimToDataDim:function(e){return this.getRawData().mapDimension(e,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function Du(e){var t=e.name;lv(e)||(e.name=function(n){var r=n.getRawData(),o=r.mapDimension("seriesName",!0),i=[];return me(o,function(s){var l=r.getDimensionInfo(s);l.displayName&&i.push(l.displayName)}),i.join(" ")}(e)||t)}function Bv(e){return e.model.getRawData().count()}function zv(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),Lb}function Lb(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function Fv(e,t){me(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,ar(Y_,t))})}function Y_(e){var t=vm(e);t&&t.setOutputEnd(this.count())}function vm(e){var t=(e.ecModel||{}).scheduler,n=t&&t.getPipeline(e.uid);if(n){var r=n.currentTask;if(r){var o=r.agentStubMap;o&&(r=o.get(e.uid))}return r}}_e(ba,mm),_e(ba,zf);var Kr=function(){this.group=new pn,this.uid=ph("viewComponent")},Hf=Kr.prototype={constructor:Kr,init:function(e,t){},render:function(e,t,n,r){},dispose:function(){},filterForExposedEvent:null};function wd(){var e=La();return function(t){var n=e(t),r=t.pipelineContext,o=n.large,i=n.progressiveRender,s=n.large=r&&r.large,l=n.progressiveRender=r&&r.progressiveRender;return!!(o^s||i^l)&&"reset"}}Hf.updateView=Hf.updateLayout=Hf.updateVisual=function(e,t,n,r){},ah(Kr),Da(Kr,{registerWhenExtend:!0});var mp=La(),Bb=wd();function Ju(){this.group=new pn,this.uid=ph("viewChart"),this.renderTask=za({plan:h1,reset:Fb}),this.renderTask.context={view:this}}var Vv=Ju.prototype={type:"chart",init:function(e,t){},render:function(e,t,n,r){},highlight:function(e,t,n,r){zb(e.getData(),r,"emphasis")},downplay:function(e,t,n,r){zb(e.getData(),r,"normal")},remove:function(e,t){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};function Hv(e,t,n){if(e&&(e.trigger(t,n),e.isGroup&&!Fc(e)))for(var r=0,o=e.childCount();r<o;r++)Hv(e.childAt(r),t,n)}function zb(e,t,n){var r=Ai(e,t),o=t&&null!=t.highlightKey?cn(t.highlightKey):null;null!=r?me(Js(r),function(i){Hv(e.getItemGraphicEl(i),n,o)}):e.eachItemGraphicEl(function(i){Hv(i,n,o)})}function h1(e){return Bb(e.model)}function Fb(e){var t=e.model,n=e.ecModel,r=e.api,o=e.payload,i=t.pipelineContext.progressiveRender,s=e.view,l=o&&mp(o).updateMethod,c=i?"incrementalPrepareRender":l&&s[l]?l:"render";return"render"!==c&&s[c](t,n,r,o),Mn[c]}Vv.updateView=Vv.updateLayout=Vv.updateVisual=function(e,t,n,r){this.render(e,t,n,r)},ah(Ju),Da(Ju,{registerWhenExtend:!0}),Ju.markUpdateMethod=function(e,t){mp(e).updateMethod=t};var Mn={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},Sd="\0__throttleOriginMethod",Cd="\0__throttleRate",pp="\0__throttleType";function kd(e,t,n){var r,o,i,s,l,c=0,f=0,h=null;function p(){f=(new Date).getTime(),h=null,e.apply(i,s||[])}function y(){r=(new Date).getTime(),i=this,s=arguments;var b=l||t,S=l||n;l=null,o=r-(S?c:f)-b,clearTimeout(h),S?h=setTimeout(p,b):0<=o?p():h=setTimeout(p,-o),c=r}return t=t||0,y.clear=function(){h&&(clearTimeout(h),h=null)},y.debounceNextCall=function(b){l=b},y}function Wf(e,t,n,r){var o=e[t];if(o){var i=o[Sd]||o;if(o[Cd]!==n||o[pp]!==r){if(null==n||!r)return e[t]=i;(o=e[t]=kd(i,n,"debounce"===r))[Sd]=i,o[pp]=r,o[Cd]=n}return o}}function mr(e,t){var n=e[t];n&&n[Sd]&&(e[t]=n[Sd])}var Z_={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData(),r=(e.visualColorAccessPath||"itemStyle.color").split("."),o=e.get(r),i=!Mt(o)||o instanceof bd?null:o;o&&!i||(o=e.getColorFromPalette(e.name,null,t.getSeriesCount())),n.setVisual("color",o);var s=(e.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),l=e.get(s);if(n.setVisual("borderColor",l),!t.isSeriesFiltered(e))return i&&n.each(function(c){n.setItemVisual(c,"color",i(e.getDataParams(c)))}),{dataEach:n.hasItemOption?function(c,f){var h=c.getItemModel(f),p=h.get(r,!0),y=h.get(s,!0);null!=p&&c.setItemVisual(f,"color",p),null!=y&&c.setItemVisual(f,"borderColor",y)}:null}}},qc={legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}},ym=Math.PI;function bm(e,t,n,r){this.ecInstance=e,this.api=t,n=this._dataProcessorHandlers=n.slice(),r=this._visualHandlers=r.slice(),this._allHandlers=n.concat(r),this._stageTaskMap=ut()}var rc=bm.prototype;function Gv(e,t,n,r,o){var i;function s(l,c){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(c.__pipeline.id))}o=o||{},me(t,function(l,c){if(!o.visualType||o.visualType===l.visualType){var f=e._stageTaskMap.get(l.uid),h=f.seriesTaskMap,p=f.overallTask;if(p){var y,b=p.agentStubMap;b.each(function(M){s(o,M)&&(M.dirty(),y=!0)}),y&&p.dirty(),Vb(p,r);var S=e.getPerformArgs(p,o.block);b.each(function(M){M.perform(S)}),i|=p.perform(S)}else h&&h.each(function(M,k){s(o,M)&&M.dirty();var O=e.getPerformArgs(M,o.block);O.skip=!l.performRawSeries&&n.isSeriesFiltered(M.context.model),Vb(M,r),i|=M.perform(O)})}}),e.unfinished|=i}rc.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(n){var r=n.overallTask;r&&r.dirty()})},rc.getPerformArgs=function(e,t){if(e.__pipeline){var n=this._pipelineMap.get(e.__pipeline.id),r=n.context,o=!t&&n.progressiveEnabled&&(!r||r.progressiveRender)&&e.__idxInPipeline>n.blockIndex?n.step:null,i=r&&r.modDataCount;return{step:o,modBy:null!=i?Math.ceil(i/o):null,modDataCount:i}}},rc.getPipeline=function(e){return this._pipelineMap.get(e)},rc.updateStreamModes=function(e,t){var n=this._pipelineMap.get(e.uid),r=e.getData().count(),o=n.progressiveEnabled&&t.incrementalPrepareRender&&r>=n.threshold,i=e.get("large")&&r>=e.get("largeThreshold"),s="mod"===e.get("progressiveChunkMode")?r:null;e.pipelineContext=n.context={progressiveRender:o,modDataCount:s,large:i}},rc.restorePipelines=function(e){var t=this,n=t._pipelineMap=ut();e.eachSeries(function(r){var o=r.getProgressive(),i=r.uid;n.set(i,{id:i,head:null,tail:null,threshold:r.getProgressiveThreshold(),progressiveEnabled:o&&!(r.preventIncremental&&r.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),yp(t,r,r.dataTask)})},rc.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.ecInstance.getModel(),n=this.api;me(this._allHandlers,function(r){var o=e.get(r.uid)||e.set(r.uid,[]);r.reset&&function(i,s,l,c,f){var h=l.seriesTaskMap||(l.seriesTaskMap=ut()),p=s.seriesType,y=s.getTargetSeries;function b(M){var k=M.uid,O=h.get(k)||h.set(k,za({plan:vp,reset:Hb,count:af}));O.context={model:M,ecModel:c,api:f,useClearVisual:s.isVisual&&!s.isLayout,plan:s.plan,reset:s.reset,scheduler:i},yp(i,M,O)}s.createOnAllSeries?c.eachRawSeries(b):p?c.eachRawSeriesByType(p,b):y&&y(c,f).each(b);var S=i._pipelineMap;h.each(function(M,k){S.get(k)||(M.dispose(),h.removeKey(k))})}(this,r,o,t,n),r.overallReset&&function(i,s,l,c,f){var h=l.overallTask=l.overallTask||za({reset:jv});h.context={ecModel:c,api:f,overallReset:s.overallReset,scheduler:i};var p=h.agentStubMap=h.agentStubMap||ut(),y=s.seriesType,b=s.getTargetSeries,S=!0,M=s.modifyOutputEnd;function k(P){var R=P.uid,F=p.get(R);F||(F=p.set(R,za({reset:Ch,onDirty:my})),h.dirty()),F.context={model:P,overallProgress:S,modifyOutputEnd:M},F.agent=h,F.__block=S,yp(i,P,F)}y?c.eachRawSeriesByType(y,k):b?b(c,f).each(k):(S=!1,me(c.getSeries(),k));var O=i._pipelineMap;p.each(function(P,R){O.get(R)||(P.dispose(),h.dirty(),p.removeKey(R))})}(this,r,o,t,n)},this)},rc.prepareView=function(e,t,n,r){var o=e.renderTask,i=o.context;i.model=t,i.ecModel=n,i.api=r,o.__block=!e.incrementalPrepareRender,yp(this,t,o)},rc.performDataProcessorTasks=function(e,t){Gv(this,this._dataProcessorHandlers,e,t,{block:!0})},rc.performVisualTasks=function(e,t,n){Gv(this,this._visualHandlers,e,t,n)},rc.performSeriesTasks=function(e){var t;e.eachSeries(function(n){t|=n.dataTask.perform()}),this.unfinished|=t},rc.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})};var Vb=rc.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)};function jv(e){e.overallReset(e.ecModel,e.api,e.payload)}function Ch(e,t){return e.overallProgress&&gy}function gy(){this.agent.dirty(),this.getDownstream().dirty()}function my(){this.agent&&this.agent.dirty()}function vp(e){return e.plan&&e.plan(e.model,e.ecModel,e.api,e.payload)}function Hb(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Js(e.reset(e.model,e.ecModel,e.api,e.payload));return 1<t.length?Kt(t,function(n,r){return Md(r)}):ss}var ss=Md(0);function Md(e){return function(t,n){var r=n.data,o=n.resetDefines[e];if(o&&o.dataEach)for(var i=t.start;i<t.end;i++)o.dataEach(r,i);else o&&o.progress&&o.progress(t,r)}}function af(e){return e.data.count()}function yp(e,t,n){var o=e._pipelineMap.get(t.uid);o.head||(o.head=n),o.tail&&o.tail.pipe(n),(o.tail=n).__idxInPipeline=o.count++,n.__pipeline=o}bm.wrapStageHandler=function(e,t){return Mt(e)&&(e={overallReset:e,seriesType:function(n){Uv=null;try{n(kh,g1)}catch(r){}return Uv}(e)}),e.uid=ph("stageHandler"),t&&(e.visualType=t),e};var Uv,kh={},g1={};function vg(e,t){for(var n in t.prototype)e[n]=Pt}function bp(){return{axisLine:{lineStyle:{color:As}},axisTick:{lineStyle:{color:As}},axisLabel:{textStyle:{color:As}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:As}}}}vg(kh,gg),vg(g1,hp),kh.eachSeriesByType=kh.eachRawSeriesByType=function(e){Uv=e},kh.eachComponent=function(e){"series"===e.mainType&&e.subType&&(Uv=e.subType)};var py=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],m1={color:py,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],py]},As="#eee",ho=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],Wb={color:ho,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:As},crossStyle:{color:As},label:{color:"#000"}}},legend:{textStyle:{color:As}},textStyle:{color:As},title:{textStyle:{color:As}},toolbox:{iconStyle:{normal:{borderColor:As}}},dataZoom:{textStyle:{color:As}},visualMap:{textStyle:{color:As}},timeline:{lineStyle:{color:As},itemStyle:{normal:{color:ho[1]}},label:{normal:{textStyle:{color:As}}},controlStyle:{normal:{color:As,borderColor:As}}},timeAxis:bp(),logAxis:bp(),valueAxis:bp(),categoryAxis:bp(),line:{symbol:"circle"},graph:{color:ho},gauge:{title:{textStyle:{color:As}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};Wb.categoryAxis.splitLine.show=!1,Go.extend({type:"dataset",defaultOption:{seriesLayoutBy:"column",sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(e){var t=e.option.source,n=dg;if(Jo(t))n=Av;else if(rn(t)){0===t.length&&(n=_h);for(var r=0,o=t.length;r<o;r++){var i=t[r];if(null!=i){if(rn(i)){n=_h;break}if(xt(i)){n=Wc;break}}}}else if(xt(t)){for(var s in t)if(t.hasOwnProperty(s)&&Dn(t[s])){n=El;break}}else if(null!=t)throw new Error("Invalid data");fg(e).sourceFormat=n}(this)}}),Kr.extend({type:"dataset"});var vy=Qr.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(e,t){var n=t.cx,r=t.cy,o=t.rx,i=t.ry,s=.5522848*o,l=.5522848*i;e.moveTo(n-o,r),e.bezierCurveTo(n-o,r-l,n-s,r-i,n,r-i),e.bezierCurveTo(n+s,r-i,n+o,r-l,n+o,r),e.bezierCurveTo(n+o,r+l,n+s,r+i,n,r+i),e.bezierCurveTo(n-s,r+i,n-o,r+l,n-o,r),e.closePath()}}),Xc=/[\s,]+/;function yy(e){for(tr(e)&&(e=(new DOMParser).parseFromString(e,"text/xml")),9===e.nodeType&&(e=e.firstChild);"svg"!==e.nodeName.toLowerCase()||1!==e.nodeType;)e=e.nextSibling;return e}function yg(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}yg.prototype.parse=function(e,t){t=t||{};var n=yy(e);if(!n)throw new Error("Illegal svg");var r=new pn;this._root=r;var o=n.getAttribute("viewBox")||"",i=parseFloat(n.getAttribute("width")||t.width),s=parseFloat(n.getAttribute("height")||t.height);isNaN(i)&&(i=null),isNaN(s)&&(s=null),Oa(n,r,null,!0);for(var l,c,f=n.firstChild;f;)this._parseNode(f,r),f=f.nextSibling;if(o){var h=sr(o).split(Xc);4<=h.length&&(l={x:parseFloat(h[0]||0),y:parseFloat(h[1]||0),width:parseFloat(h[2]),height:parseFloat(h[3])})}if(l&&null!=i&&null!=s&&(c=_m(l,i,s),!t.ignoreViewBox)){var p=r;(r=new pn).add(p),p.scale=c.scale.slice(),p.position=c.position.slice()}return t.ignoreRootClip||null==i||null==s||r.setClipPath(new ei({shape:{x:0,y:0,width:i,height:s}})),{root:r,width:i,height:s,viewBoxRect:l,viewBoxTransform:c}},yg.prototype._parseNode=function(e,t){var n,r,o=e.nodeName.toLowerCase();if("defs"===o?this._isDefine=!0:"text"===o&&(this._isText=!0),this._isDefine){if(r=qv[o]){var i=r.call(this,e),s=e.getAttribute("id");s&&(this._defs[s]=i)}}else(r=Kn[o])&&(n=r.call(this,e,t),t.add(n));for(var l=e.firstChild;l;)1===l.nodeType&&this._parseNode(l,n),3===l.nodeType&&this._isText&&this._parseText(l,n),l=l.nextSibling;"defs"===o?this._isDefine=!1:"text"===o&&(this._isText=!1)},yg.prototype._parseText=function(e,t){if(1===e.nodeType){var n=e.getAttribute("dx")||0,r=e.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(r)}var o=new vo({style:{text:e.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});go(t,o),Oa(e,o,this._defs);var i=o.style.fontSize;i&&i<9&&(o.style.fontSize=9,o.scale=o.scale||[1,1],o.scale[0]*=i/9,o.scale[1]*=i/9);var s=o.getBoundingRect();return this._textX+=s.width,t.add(o),o};var Kn={g:function(e,t){var n=new pn;return go(t,n),Oa(e,n,this._defs),n},rect:function(e,t){var n=new ei;return go(t,n),Oa(e,n,this._defs),n.setShape({x:parseFloat(e.getAttribute("x")||0),y:parseFloat(e.getAttribute("y")||0),width:parseFloat(e.getAttribute("width")||0),height:parseFloat(e.getAttribute("height")||0)}),n},circle:function(e,t){var n=new Fs;return go(t,n),Oa(e,n,this._defs),n.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),r:parseFloat(e.getAttribute("r")||0)}),n},line:function(e,t){var n=new Yi;return go(t,n),Oa(e,n,this._defs),n.setShape({x1:parseFloat(e.getAttribute("x1")||0),y1:parseFloat(e.getAttribute("y1")||0),x2:parseFloat(e.getAttribute("x2")||0),y2:parseFloat(e.getAttribute("y2")||0)}),n},ellipse:function(e,t){var n=new vy;return go(t,n),Oa(e,n,this._defs),n.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),rx:parseFloat(e.getAttribute("rx")||0),ry:parseFloat(e.getAttribute("ry")||0)}),n},polygon:function(e,t){var n=e.getAttribute("points");n=n&&by(n);var r=new wo({shape:{points:n||[]}});return go(t,r),Oa(e,r,this._defs),r},polyline:function(e,t){var n=new Qr;go(t,n),Oa(e,n,this._defs);var r=e.getAttribute("points");return r=r&&by(r),new Bc({shape:{points:r||[]}})},image:function(e,t){var n=new De;return go(t,n),Oa(e,n,this._defs),n.setStyle({image:e.getAttribute("xlink:href"),x:e.getAttribute("x"),y:e.getAttribute("y"),width:e.getAttribute("width"),height:e.getAttribute("height")}),n},text:function(e,t){var n=e.getAttribute("x")||0,r=e.getAttribute("y")||0,o=e.getAttribute("dx")||0,i=e.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(o),this._textY=parseFloat(r)+parseFloat(i);var s=new pn;return go(t,s),Oa(e,s,this._defs),s},tspan:function(e,t){var n=e.getAttribute("x"),r=e.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=r&&(this._textY=parseFloat(r));var o=e.getAttribute("dx")||0,i=e.getAttribute("dy")||0,s=new pn;return go(t,s),Oa(e,s,this._defs),this._textX+=o,this._textY+=i,s},path:function(e,t){var n=kb(e.getAttribute("d")||"");return go(t,n),Oa(e,n,this._defs),n}},qv={lineargradient:function(e){var i=new fh(parseInt(e.getAttribute("x1")||0,10),parseInt(e.getAttribute("y1")||0,10),parseInt(e.getAttribute("x2")||10,10),parseInt(e.getAttribute("y2")||0,10));return function(s,l){for(var c=s.firstChild;c;){if(1===c.nodeType){var f=c.getAttribute("offset");f=0<f.indexOf("%")?parseInt(f,10)/100:f?parseFloat(f):0;var h=c.getAttribute("stop-color")||"#000000";l.addColorStop(f,h)}c=c.nextSibling}}(e,i),i},radialgradient:function(e){}};function go(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),un(t.__inheritedStyle,e.__inheritedStyle))}function by(e){for(var t=sr(e).split(Xc),n=[],r=0;r<t.length;r+=2){var o=parseFloat(t[r]),i=parseFloat(t[r+1]);n.push([o,i])}return n}var js={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function Oa(e,t,n,r){var o=t.__inheritedStyle||{},i="text"===t.type;if(1===e.nodeType&&(function(p,y){var b=p.getAttribute("transform");if(b){b=b.replace(/,/g," ");var S=null,M=[];b.replace(_p,function(R,F,G){M.push(F,G)});for(var k=M.length-1;0<k;k-=2){var O=M[k],P=M[k-1];switch(S=S||ui(),P){case"translate":O=sr(O).split(Xc),Vl(S,S,[parseFloat(O[0]),parseFloat(O[1]||0)]);break;case"scale":O=sr(O).split(Xc),lc(S,S,[parseFloat(O[0]),parseFloat(O[1]||O[0])]);break;case"rotate":O=sr(O).split(Xc),Ar(S,S,parseFloat(O[0]));break;case"skew":O=sr(O).split(Xc),console.warn("Skew transform is not supported yet");break;case"matrix":O=sr(O).split(Xc),S[0]=parseFloat(O[0]),S[1]=parseFloat(O[1]),S[2]=parseFloat(O[2]),S[3]=parseFloat(O[3]),S[4]=parseFloat(O[4]),S[5]=parseFloat(O[5])}}y.setLocalTransform(S)}}(e,t),Fn(o,function(p){var y=p.getAttribute("style"),b={};if(!y)return b;var S,M={};for(xm.lastIndex=0;null!=(S=xm.exec(y));)M[S[1]]=S[2];for(var k in js)js.hasOwnProperty(k)&&null!=M[k]&&(b[js[k]]=M[k]);return b}(e)),!r))for(var s in js)if(js.hasOwnProperty(s)){var l=e.getAttribute(s);null!=l&&(o[js[s]]=l)}var c=i?"textFill":"fill",f=i?"textStroke":"stroke";t.style=t.style||new _i;var h=t.style;null!=o.fill&&h.set(c,lu(o.fill,n)),null!=o.stroke&&h.set(f,lu(o.stroke,n)),me(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(p){null!=o[p]&&h.set("lineWidth"===p&&i?"textStrokeWidth":p,parseFloat(o[p]))}),o.textBaseline&&"auto"!==o.textBaseline||(o.textBaseline="alphabetic"),"alphabetic"===o.textBaseline&&(o.textBaseline="bottom"),"start"===o.textAlign&&(o.textAlign="left"),"end"===o.textAlign&&(o.textAlign="right"),me(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(p){null!=o[p]&&h.set(p,o[p])}),o.lineDash&&(t.style.lineDash=sr(o.lineDash).split(Xc)),h[f]&&"none"!==h[f]&&(t[f]=!0),t.__inheritedStyle=o}var xp=/url\(\s*#(.*?)\)/;function lu(e,t){var n=t&&e&&e.match(xp);return n?t[sr(n[1])]:e}var _p=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,xm=/([^\s:;]+)\s*:\s*([^:;]+)/g;function _m(e,t,n){var i=Math.min(t/e.width,n/e.height);return{scale:[i,i],position:[-(e.x+e.width/2)*i+t/2,-(e.y+e.height/2)*i+n/2]}}var Mh=ut(),Th_retrieveMap=function(e){return Mh.get(e)},sf={geoJSON:function(e){var t=e.source;e.geoJSON=tr(t)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t},svg:function(e){e.svgXML=yy(e.source)}},xy=_s,Za=me,Xv=Mt,Yv=xt,Zv=Go.parseClassType,Gf={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},Sc="__flagInMainProcess",_="__optionUpdated",D=/^[a-zA-Z0-9_]+$/;function B(e,t){return function(n,r,o){!t&&this._disposed||(n=n&&n.toLowerCase(),Nt.prototype[e].call(this,n,r,o))}}function W(){Nt.call(this)}function K(e,t,n){n=n||{},"string"==typeof t&&(t=Vr[t]),this._dom=e;var r=this._zr=Yh(e,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=kd(Nn(r.flush,r),17),(t=Gn(t))&&fm(t,!0),this._theme=t,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new ku;var s,l,o=this._api=(l=(s=this)._coordSysMgr,Fn(new hp(s),{getCoordinateSystems:Nn(l.getCoordinateSystems,l),getComponentByElement:function(c){for(;c;){var f=c.__ecComponentInfo;if(null!=f)return s._model.getComponent(f.mainType,f.index);c=c.parent}}}));function i(s,l){return s.__prio-l.__prio}Ul(fr,i),Ul(Yt,i),this._scheduler=new bm(this,o,Yt,fr),Nt.call(this,this._ecEventProcessor=new Gt),this._messageCenter=new W,this._initEvents(),this.resize=Nn(this.resize,this),this._pendingActions=[],r.animation.on("frame",this._onframe,this),function(s,l){s.on("rendered",function(){l.trigger("rendered"),!s.animation.isFinished()||l[_]||l._scheduler.unfinished||l._pendingActions.length||l.trigger("finished")})}(r,this),ds(this)}W.prototype.on=B("on",!0),W.prototype.off=B("off",!0),W.prototype.one=B("one",!0),_e(W,Nt);var J=K.prototype;function se(e,t,n){if(!this._disposed){var r,o=this._model,i=this._coordSysMgr.getCoordinateSystems();t=Xa(o,t);for(var s=0;s<i.length;s++){var l=i[s];if(l[e]&&null!=(r=l[e](o,t,n)))return r}}}J._onframe=function(){if(!this._disposed){var e=this._scheduler;if(this[_]){var t=this[_].silent;this[Sc]=!0,we(this),fe.update.call(this),this[Sc]=!1,this[_]=!1,Re.call(this,t),tt.call(this,t)}else if(e.unfinished){var n=1,r=this._model;e.unfinished=!1;do{var i=+new Date;e.performSeriesTasks(r),e.performDataProcessorTasks(r),Le(this,r),e.performVisualTasks(r),Ue(this,this._model,0,"remain"),n-=+new Date-i}while(0<n&&e.unfinished);e.unfinished||this._zr.flush()}}},J.getDom=function(){return this._dom},J.getZr=function(){return this._zr},J.setOption=function(e,t,n){if(!this._disposed){var r;if(Yv(t)&&(n=t.lazyUpdate,r=t.silent,t=t.notMerge),this[Sc]=!0,!this._model||t){var o=new ly(this._api),i=this._theme,s=this._model=new gg;s.scheduler=this._scheduler,s.init(null,null,i,o)}this._model.setOption(e,qn),n?(this[_]={silent:r},this[Sc]=!1):(we(this),fe.update.call(this),this._zr.flush(),this[_]=!1,this[Sc]=!1,Re.call(this,r),tt.call(this,r))}},J.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},J.getModel=function(){return this._model},J.getOption=function(){return this._model&&this._model.getOption()},J.getWidth=function(){return this._zr.getWidth()},J.getHeight=function(){return this._zr.getHeight()},J.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},J.getRenderedCanvas=function(e){if(Cr.canvasSupported)return(e=e||{}).pixelRatio=e.pixelRatio||1,e.backgroundColor=e.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(e)},J.getSvgDataURL=function(){if(Cr.svgSupported){var e=this._zr;return me(e.storage.getDisplayList(),function(t){t.stopAnimation(!0)}),e.painter.toDataURL()}},J.getDataURL=function(e){if(!this._disposed){var t=(e=e||{}).excludeComponents,n=this._model,r=[],o=this;Za(t,function(s){n.eachComponent({mainType:s},function(l){var c=o._componentsMap[l.__viewId];c.group.ignore||(r.push(c),c.group.ignore=!0)})});var i="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return Za(r,function(s){s.group.ignore=!1}),i}},J.getConnectedDataURL=function(e){if(!this._disposed&&Cr.canvasSupported){var t="svg"===e.type,n=this.group,r=Math.min,o=Math.max;if(to[n]){var i=1/0,s=1/0,l=-1/0,c=-1/0,f=[],h=e&&e.pixelRatio||1;me(Br,function(k,O){if(k.group===n){var P=t?k.getZr().painter.getSvgDom().innerHTML:k.getRenderedCanvas(Gn(e)),R=k.getDom().getBoundingClientRect();i=r(R.left,i),s=r(R.top,s),l=o(R.right,l),c=o(R.bottom,c),f.push({dom:P,left:R.left,top:R.top})}});var p=(l*=h)-(i*=h),y=(c*=h)-(s*=h),b=Qn(),S=Yh(b,{renderer:t?"svg":"canvas"});if(S.resize({width:p,height:y}),t){var M="";return Za(f,function(k){M+='<g transform="translate('+(k.left-i)+","+(k.top-s)+')">'+k.dom+"</g>"}),S.painter.getSvgRoot().innerHTML=M,e.connectedBackgroundColor&&S.painter.setBackgroundColor(e.connectedBackgroundColor),S.refreshImmediately(),S.painter.toDataURL()}return e.connectedBackgroundColor&&S.add(new ei({shape:{x:0,y:0,width:p,height:y},style:{fill:e.connectedBackgroundColor}})),Za(f,function(k){var O=new De({style:{x:k.left*h-i,y:k.top*h-s,image:k.dom}});S.add(O)}),S.refreshImmediately(),b.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}},J.convertToPixel=ar(se,"convertToPixel"),J.convertFromPixel=ar(se,"convertFromPixel"),J.containPixel=function(e,t){var n;if(!this._disposed)return me(e=Xa(this._model,e),function(r,o){0<=o.indexOf("Models")&&me(r,function(i){var s=i.coordinateSystem;if(s&&s.containPoint)n|=!!s.containPoint(t);else if("seriesModels"===o){var l=this._chartsMap[i.__viewId];l&&l.containPoint&&(n|=l.containPoint(t,i))}},this)},this),!!n},J.getVisual=function(e,t){var n=(e=Xa(this._model,e,{defaultMainType:"series"})).seriesModel.getData(),r=e.hasOwnProperty("dataIndexInside")?e.dataIndexInside:e.hasOwnProperty("dataIndex")?n.indexOfRawIndex(e.dataIndex):null;return null!=r?n.getItemVisual(r,t):n.getVisual(t)},J.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},J.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]};var fe={prepareAndUpdate:function(e){we(this),fe.update.call(this,e)},update:function(e){var t=this._model,n=this._api,r=this._zr,o=this._coordSysMgr,i=this._scheduler;if(t){i.restoreData(t,e),i.performSeriesTasks(t),o.create(t,n),i.performDataProcessorTasks(t,e),Le(this,t),o.update(t,n),at(t),i.performVisualTasks(t,e),vt(this,t,n,e);var s=t.get("backgroundColor")||"transparent";if(Cr.canvasSupported)r.setBackgroundColor(s);else{var l=Ru(s);s=nl(l,"rgb"),0===l[3]&&(s="transparent")}st(t,n)}},updateTransform:function(e){var t=this._model,n=this,r=this._api;if(t){var o=[];t.eachComponent(function(s,l){var c=n.getViewOfComponentModel(l);if(c&&c.__alive)if(c.updateTransform){var f=c.updateTransform(l,t,r,e);f&&f.update&&o.push(c)}else o.push(c)});var i=ut();t.eachSeries(function(s){var l=n._chartsMap[s.__viewId];if(l.updateTransform){var c=l.updateTransform(s,t,r,e);c&&c.update&&i.set(s.uid,1)}else i.set(s.uid,1)}),at(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0,dirtyMap:i}),Ue(n,t,0,e,i),st(t,this._api)}},updateView:function(e){var t=this._model;t&&(Ju.markUpdateMethod(e,"updateView"),at(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0}),vt(this,this._model,this._api,e),st(t,this._api))},updateVisual:function(e){fe.update.call(this,e)},updateLayout:function(e){fe.update.call(this,e)}};function we(e){var t=e._model,n=e._scheduler;n.restorePipelines(t),n.prepareStageTasks(),He(e,"component",t,n),He(e,"chart",t,n),n.plan()}function ke(e,t,n,r,o){var i=e._model;if(r){var s={};s[r+"Id"]=n[r+"Id"],s[r+"Index"]=n[r+"Index"],s[r+"Name"]=n[r+"Name"];var l={mainType:r,query:s};o&&(l.subType=o);var c=n.excludeSeriesId;null!=c&&(c=ut(Js(c))),i&&i.eachComponent(l,function(h){c&&null!=c.get(h.id)||f(e["series"===r?"_chartsMap":"_componentsMap"][h.__viewId])},e)}else Za(e._componentsViews.concat(e._chartsViews),f);function f(h){h&&h.__alive&&h[t]&&h[t](h.__model,i,e._api,n)}}function Le(e,t){var n=e._chartsMap,r=e._scheduler;t.eachSeries(function(o){r.updateStreamModes(o,n[o.__viewId])})}function Fe(e,t){var n=e.type,r=e.escapeConnect,o=yt[n],i=o.actionInfo,s=(i.update||"update").split(":"),l=s.pop();s=null!=s[0]&&Zv(s[0]),this[Sc]=!0;var c=[e],f=!1;e.batch&&(f=!0,c=Kt(e.batch,function(b){return(b=un(Fn({},b),e)).batch=null,b}));var h,p=[],y="highlight"===n||"downplay"===n;Za(c,function(b){(h=(h=o.action(b,this._model,this._api))||Fn({},b)).type=i.event||h.type,p.push(h),y?ke(this,l,b,"series"):s&&ke(this,l,b,s.main,s.sub)},this),"none"===l||y||s||(this[_]?(we(this),fe.update.call(this,e),this[_]=!1):fe[l].call(this,e)),h=f?{type:i.event||n,escapeConnect:r,batch:p}:p[0],this[Sc]=!1,t||this._messageCenter.trigger(h.type,h)}function Re(e){for(var t=this._pendingActions;t.length;){var n=t.shift();Fe.call(this,n,e)}}function tt(e){e||this.trigger("updated")}function He(e,t,n,r){for(var o="component"===t,i=o?e._componentsViews:e._chartsViews,s=o?e._componentsMap:e._chartsMap,l=e._zr,c=e._api,f=0;f<i.length;f++)i[f].__alive=!1;function h(y){var b="_ec_"+y.id+"_"+y.type,S=s[b];if(!S){var M=Zv(y.type);(S=new(o?Kr.getClass(M.main,M.sub):Ju.getClass(M.sub))).init(n,c),s[b]=S,i.push(S),l.add(S.group)}y.__viewId=S.__id=b,S.__alive=!0,S.__model=y,S.group.__ecComponentInfo={mainType:y.mainType,index:y.componentIndex},o||r.prepareView(S,y,n,c)}for(o?n.eachComponent(function(y,b){"series"!==y&&h(b)}):n.eachSeries(h),f=0;f<i.length;){var p=i[f];p.__alive?f++:(o||p.renderTask.dispose(),l.remove(p.group),p.dispose(n,c),i.splice(f,1),delete s[p.__id],p.__id=p.group.__ecComponentInfo=null)}}function at(e){e.clearColorPalette(),e.eachSeries(function(t){t.clearColorPalette()})}function vt(e,t,n,r){(function(o,i,s,l,c){Za(o._componentsViews,function(f){var h=f.__model;f.render(h,i,s,l),Ke(h,f)})})(e,t,n,r),Za(e._chartsViews,function(o){o.__alive=!1}),Ue(e,t,0,r),Za(e._chartsViews,function(o){o.__alive||o.remove(t,n)})}function Ue(e,t,n,r,o){var i,l,c,h,s=e._scheduler;t.eachSeries(function(l){var c=e._chartsMap[l.__viewId];c.__alive=!0;var p,y,f=c.renderTask;s.updatePayload(f,r),o&&o.get(l.uid)&&f.dirty(),i|=f.perform(s.getPerformArgs(f)),c.group.silent=!!l.get("silent"),Ke(l,c),p=c,y=l.get("blendMode")||null,p.group.traverse(function(b){b.isGroup||b.style.blend!==y&&b.setStyle("blend",y),b.eachPendingDisplayable&&b.eachPendingDisplayable(function(S){S.setStyle("blend",y)})})}),s.unfinished|=i,c=t,h=0,(l=e)._zr.storage.traverse(function(p){h++}),h>c.get("hoverLayerThreshold")&&!Cr.node&&c.eachSeries(function(p){if(!p.preventUsingHoverLayer){var y=l._chartsMap[p.__viewId];y.__alive&&y.group.traverse(function(b){b.useHoverLayer=!0})}}),function(e,t){var y,n=t.getModel("aria");if(n.get("show"))if(n.get("description"))e.setAttribute("aria-label",n.get("description"));else{var r=0;t.eachSeries(function(y,b){++r},this);var o,i=n.get("data.maxCount")||10,s=n.get("series.maxCount")||10,l=Math.min(r,s);if(!(r<1)){var c=((y=t.getModel("title").option)&&y.length&&(y=y[0]),y&&y.text);o=c?h(p("general.withTitle"),{title:c}):p("general.withoutTitle");var f=[];o+=h(p(1<r?"series.multiple.prefix":"series.single.prefix"),{seriesCount:r}),t.eachSeries(function(y,b){if(b<l){var S,M=y.get("name"),k="series."+(1<r?"multiple":"single")+".";S=h(S=p(M?k+"withName":k+"withoutName"),{seriesId:y.seriesIndex,seriesName:y.get("name"),seriesType:(X=y.subType,qc.series.typeNames[X]||"\u81ea\u5b9a\u4e49\u56fe")});var O=y.getData();(window.data=O).count()>i?S+=h(p("data.partialData"),{displayCnt:i}):S+=p("data.allData");for(var P=[],R=0;R<O.count();R++)if(R<i){var F=O.getName(R),G=nf(O,R);P.push(h(p(F?"data.withName":"data.withoutName"),{name:F,value:G}))}S+=P.join(p("data.separator.middle"))+p("data.separator.end"),f.push(S)}var X}),o+=f.join(p("series.multiple.separator.middle"))+p("series.multiple.separator.end"),e.setAttribute("aria-label",o)}}function h(y,b){if("string"!=typeof y)return y;var S=y;return me(b,function(M,k){S=S.replace(new RegExp("\\{\\s*"+k+"\\s*\\}","g"),M)}),S}function p(y){var b=n.get(y);if(null!=b)return b;for(var S=y.split("."),M=qc.aria,k=0;k<S.length;++k)M=M[S[k]];return M}}(e._zr.dom,t)}function st(e,t){Za(Fr,function(n){n(e,t)})}J.resize=function(e){if(!this._disposed){this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),t){var n=t.resetOption("media"),r=e&&e.silent;this[Sc]=!0,n&&we(this),fe.update.call(this),this[Sc]=!1,Re.call(this,r),tt.call(this,r)}}},J.showLoading=function(e,t){if(!this._disposed&&(Yv(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),io[e])){var n=io[e](this._api,t),r=this._zr;this._loadingFX=n,r.add(n)}},J.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},J.makeActionFromEvent=function(e){var t=Fn({},e);return t.type=Bn[e.type],t},J.dispatchAction=function(e,t){this._disposed||(Yv(t)||(t={silent:!!t}),yt[e.type]&&this._model&&(this[Sc]?this._pendingActions.push(e):(Fe.call(this,e,t.silent),t.flush?this._zr.flush(!0):!1!==t.flush&&Cr.browser.weChat&&this._throttledZrFlush(),Re.call(this,t.silent),tt.call(this,t.silent))))},J.appendData=function(e){if(!this._disposed){var t=e.seriesIndex;this.getModel().getSeriesByIndex(t).appendData(e),this._scheduler.unfinished=!0}},J.on=B("on",!1),J.off=B("off",!1),J.one=B("one",!1);var Wt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function Ke(e,t){var n=e.get("z"),r=e.get("zlevel");t.group.traverse(function(o){"group"!==o.type&&(null!=n&&(o.z=n),null!=r&&(o.zlevel=r))})}function Gt(){}J._initEvents=function(){Za(Wt,function(e){function t(n){var r,o=this.getModel(),i=n.target;if("globalout"===e)r={};else if(i&&null!=i.dataIndex){var s=i.dataModel||o.getSeriesByIndex(i.seriesIndex);r=s&&s.getDataParams(i.dataIndex,i.dataType,i)||{}}else i&&i.eventData&&(r=Fn({},i.eventData));if(r){var l=r.componentType,c=r.componentIndex;"markLine"!==l&&"markPoint"!==l&&"markArea"!==l||(l="series",c=r.seriesIndex);var f=l&&null!=c&&o.getComponent(l,c),h=f&&this["series"===f.mainType?"_chartsMap":"_componentsMap"][f.__viewId];r.event=n,r.type=e,this._ecEventProcessor.eventInfo={targetEl:i,packedEvent:r,model:f,view:h},this.trigger(e,r)}}t.zrEventfulCallAtLast=!0,this._zr.on(e,t,this)},this),Za(Bn,function(e,t){this._messageCenter.on(t,function(n){this.trigger(t,n)},this)},this)},J.isDisposed=function(){return this._disposed},J.clear=function(){this._disposed||this.setOption({series:[]},!0)},J.dispose=function(){if(!this._disposed){this._disposed=!0,cv(this.getDom(),Xr,"");var e=this._api,t=this._model;Za(this._componentsViews,function(n){n.dispose(t,e)}),Za(this._chartsViews,function(n){n.dispose(t,e)}),this._zr.dispose(),delete Br[this.id]}},_e(K,Nt),Gt.prototype={constructor:Gt,normalizeQuery:function(e){var t={},n={},r={};if(tr(e)){var o=Zv(e);t.mainType=o.main||null,t.subType=o.sub||null}else{var i=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};me(e,function(l,c){for(var f=!1,h=0;h<i.length;h++){var p=i[h],y=c.lastIndexOf(p);if(0<y&&y===c.length-p.length){var b=c.slice(0,y);"data"!==b&&(t.mainType=b,t[p.toLowerCase()]=l,f=!0)}}s.hasOwnProperty(c)&&(n[c]=l,f=!0),f||(r[c]=l)})}return{cptQuery:t,dataQuery:n,otherQuery:r}},filter:function(e,t,n){var r=this.eventInfo;if(!r)return!0;var o=r.targetEl,i=r.packedEvent,s=r.model,l=r.view;if(!s||!l)return!0;var c=t.cptQuery,f=t.dataQuery;return h(c,s,"mainType")&&h(c,s,"subType")&&h(c,s,"index","componentIndex")&&h(c,s,"name")&&h(c,s,"id")&&h(f,i,"name")&&h(f,i,"dataIndex")&&h(f,i,"dataType")&&(!l.filterForExposedEvent||l.filterForExposedEvent(e,t.otherQuery,o,i));function h(p,y,b,S){return null==p[b]||y[S||b]===p[b]}},afterTrigger:function(){this.eventInfo=null}};var yt={},Bn={},Yt=[],qn=[],Fr=[],fr=[],Vr={},io={},Br={},to={},zn=new Date-0,Ri=new Date-0,Xr="_echarts_instance_";function Ci(e){to[e]=!1}var So=Ci;function Do(e){return Br[function(t,n){return t.getAttribute?t.getAttribute(n):t[n]}(e,Xr)]}function na(e,t){Vr[e]=t}function ra(e){qn.push(e)}function fa(e,t){bg(Yt,e,t,1e3)}function jr(e,t,n){"function"==typeof t&&(n=t,t="");var r=Yv(e)?e.type:[e,e={event:t}][0];e.event=(e.event||r).toLowerCase(),t=e.event,xy(D.test(r)&&D.test(t)),yt[r]||(yt[r]={action:n,actionInfo:e}),Bn[t]=r}function Yc(e,t){ku.register(e,t)}function oa(e,t){bg(fr,e,t,1e3,"layout")}function Ti(e,t){bg(fr,e,t,3e3,"visual")}function bg(e,t,n,r,o){(Xv(t)||Yv(t))&&(n=t,t=r);var i=bm.wrapStageHandler(n,o);return i.__prio=t,i.__raw=n,e.push(i),i}function uf(e,t){io[e]=t}function Au(e){return Go.extend(e)}function xs(e){return Kr.extend(e)}function Dh(e){return ba.extend(e)}function Is(e){return Ju.extend(e)}function lf(e){return e}function jf(e,t,n,r,o){this._old=e,this._new=t,this._oldKeyGetter=n||lf,this._newKeyGetter=r||lf,this.context=o}function $_(e,t,n,r,o){for(var i=0;i<e.length;i++){var s="_ec_"+o[r](e[i],i),l=t[s];null==l?(n.push(s),t[s]=i):(l.length||(t[s]=l=[l]),l.push(i))}}Ti(2e3,Z_),ra(fm),fa(900,function(e){var t=ut();e.eachSeries(function(n){var r=n.get("stack");if(r){var o=t.get(r)||t.set(r,[]),i=n.getData(),s={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:n};if(!s.stackedDimension||!s.isStackedByIndex&&!s.stackedByDimension)return;o.length&&i.setCalculationInfo("stackedOnSeries",o[o.length-1].seriesModel),o.push(s)}}),t.each(Sh)}),uf("default",function(e,t){un(t=t||{},{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new pn,r=new ei({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});n.add(r);var o=t.fontSize+" sans-serif",i=new ei({style:{fill:"none",text:t.text,font:o,textPosition:"right",textDistance:10,textFill:t.textColor},zlevel:t.zlevel,z:10001});if(n.add(i),t.showSpinner){var s=new Zg({shape:{startAngle:-ym/2,endAngle:-ym/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001});s.animateShape(!0).when(1e3,{endAngle:3*ym/2}).start("circularInOut"),s.animateShape(!0).when(1e3,{startAngle:3*ym/2}).delay(300).start("circularInOut"),n.add(s)}return n.resize=function(){var l=qa(t.text,o),c=t.showSpinner?t.spinnerRadius:0,f=(e.getWidth()-2*c-(t.showSpinner&&l?10:0)-l)/2-(t.showSpinner?0:l/2),h=e.getHeight()/2;t.showSpinner&&s.setShape({cx:f,cy:h}),i.setShape({x:f-c,y:h-c,width:2*c,height:2*c}),r.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},n.resize(),n}),jr({type:"highlight",event:"highlight",update:"highlight"},Pt),jr({type:"downplay",event:"downplay",update:"downplay"},Pt),na("light",m1),na("dark",Wb),jf.prototype={constructor:jf,add:function(e){return this._add=e,this},update:function(e){return this._update=e,this},remove:function(e){return this._remove=e,this},execute:function(){var e=this._old,t=this._new,n={},r=[],o=[];for($_(e,{},r,"_oldKeyGetter",this),$_(t,n,o,"_newKeyGetter",this),i=0;i<e.length;i++)null!=(l=n[s=r[i]])?((f=l.length)?(1===f&&(n[s]=null),l=l.shift()):n[s]=null,this._update&&this._update(l,i)):this._remove&&this._remove(i);for(var i=0;i<o.length;i++){var s=o[i];if(n.hasOwnProperty(s)){var l;if(null==(l=n[s]))continue;if(l.length)for(var c=0,f=l.length;c<f;c++)this._add&&this._add(l[c]);else this._add&&this._add(l)}}}};var qS=ut(["tooltip","label","itemName","itemId","seriesName"]);function K_(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function J_(e){return"category"===e?"ordinal":"time"===e?"time":"float"}function Gb(e){null!=e&&Fn(this,e),this.otherDims={}}var Bo=xt,wm="undefined",p1={float:typeof Float64Array==wm?Array:Float64Array,int:typeof Int32Array==wm?Array:Int32Array,ordinal:Array,number:Array,time:Array},Q_=typeof Uint32Array==wm?Array:Uint32Array,Uk=typeof Int32Array==wm?Array:Int32Array,ew=typeof Uint16Array==wm?Array:Uint16Array;function jb(e){return 65535<e._rawCount?Q_:ew}var xg=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],XS=["_extent","_approximateExtent","_rawExtent"];function tw(e,t){me(xg.concat(t.__wrappedMethods||[]),function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e.__wrappedMethods=t.__wrappedMethods,me(XS,function(n){e[n]=Gn(t[n])}),e._calculationInfo=Fn(t._calculationInfo)}var ml=function(e,t){e=e||["x","y"];for(var n={},r=[],o={},i=0;i<e.length;i++){var s=e[i];tr(s)?s=new Gb({name:s}):s instanceof Gb||(s=new Gb(s));var l=s.name;s.type=s.type||"float",s.coordDim||(s.coordDim=l,s.coordDimIndex=0),s.otherDims=s.otherDims||{},r.push(l),(n[l]=s).index=i,s.createInvertedIndices&&(o[l]=[])}this.dimensions=r,this._dimensionInfos=n,this.hostModel=t,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(c){var f={},h=f.encode={},p=ut(),y=[],b=[],S=f.userOutput={dimensionNames:c.dimensions.slice(),encode:{}};me(c.dimensions,function(R){var Y,F=c.getDimensionInfo(R),G=F.coordDim;if(G){var X=F.coordDimIndex;K_(h,G)[X]=R,F.isExtraCoord||(p.set(G,1),!("ordinal"===(Y=F.type)||"time"===Y)&&(y[0]=R),K_(S.encode,G)[X]=F.index),F.defaultTooltip&&b.push(R)}qS.each(function(Y,Q){var ne=K_(h,Q),le=F.otherDims[Q];null!=le&&!1!==le&&(ne[le]=F.name)})});var M=[],k={};p.each(function(R,F){var G=h[F];k[F]=G[0],M=M.concat(G)}),f.dataDimsOnCoord=M,f.encodeFirstDimNotExtra=k;var O=h.label;O&&O.length&&(y=O.slice());var P=h.tooltip;return P&&P.length?b=P.slice():b.length||(b=y.slice()),h.defaultedLabel=y,h.defaultedTooltip=b,f}(this),this._invertedIndicesMap=o,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},no=ml.prototype;function $v(e,t,n,r,o){var i=p1[t.type],s=r-1,l=t.name,c=e[l][s];if(c&&c.length<n){for(var f=new i(Math.min(o-s*n,n)),h=0;h<c.length;h++)f[h]=c[h];e[l][s]=f}for(var p=r*n;p<o;p+=n)e[l].push(new i(Math.min(o-p,n)))}function nw(e){var t=e._invertedIndicesMap;me(t,function(n,r){var o=e._dimensionInfos[r].ordinalMeta;if(o){n=t[r]=new Uk(o.categories.length);for(var i=0;i<n.length;i++)n[i]=-1;for(i=0;i<e._count;i++)n[e.get(r,i)]=i}})}function rw(e,t,n){var r;if(null!=t){var o=e._chunkSize,i=Math.floor(n/o),l=e.dimensions[t],c=e._storage[l][i];if(c){r=c[n%o];var f=e._dimensionInfos[l].ordinalMeta;f&&f.categories.length&&(r=f.categories[r])}}return r}function wp(e){return e}function _y(e){return e<this._count&&0<=e?this._indices[e]:-1}function v1(e,t){var n=e._idList[t];return null==n&&(n=rw(e,e._idDimIdx,t)),null==n&&(n="e\0\0"+t),n}function Kv(e){return rn(e)||(e=[e]),e}function ow(e,t){var n=e.dimensions,r=new ml(Kt(n,e.getDimensionInfo,e),e.hostModel);tw(r,e);for(var o=r._storage={},i=e._storage,s=0;s<n.length;s++){var l=n[s];i[l]&&(0<=dn(t,l)?(o[l]=YS(i[l]),r._rawExtent[l]=[1/0,-1/0],r._extent[l]=null):o[l]=i[l])}return r}function YS(e){for(var t,n,r=new Array(e.length),o=0;o<e.length;o++)r[o]=(n=void 0,(n=(t=e[o]).constructor)===Array?t.slice():new n(t));return r}function qk(e){e.seriesIndex=this.seriesIndex,e.dataIndex=this.dataIndex,e.dataType=this.dataType}function Xk(e,t,n){hl.isInstance(t)||(t=hl.seriesDataToSource(t)),n=n||{},e=(e||[]).slice();for(var r=(n.dimsDef||[]).slice(),o=ut(),i=ut(),s=[],l=function(X,Y,Q,ne){var le=Math.max(X.dimensionsDetectCount||1,Y.length,Q.length,ne||0);return me(Y,function(ce){var ye=ce.dimsDef;ye&&(le=Math.max(le,ye.length))}),le}(t,e,r,n.dimCount),c=0;c<l;c++){var f=r[c]=Fn({},xt(r[c])?r[c]:{name:r[c]}),h=f.name,p=s[c]=new Gb;null!=h&&null==o.get(h)&&(p.name=p.displayName=h,o.set(h,c)),null!=f.type&&(p.type=f.type),null!=f.displayName&&(p.displayName=f.displayName)}var y=n.encodeDef;!y&&n.encodeDefaulter&&(y=n.encodeDefaulter(t,l)),(y=ut(y)).each(function(X,Y){if(1===(X=Js(X).slice()).length&&!tr(X[0])&&X[0]<0)y.set(Y,!1);else{var Q=y.set(Y,[]);me(X,function(ne,le){tr(ne)&&(ne=o.get(ne)),null!=ne&&ne<l&&(Q[le]=ne,S(s[ne],Y,le))})}});var b=0;function S(X,Y,Q){null!=qS.get(Y)?X.otherDims[Y]=Q:(X.coordDim=Y,X.coordDimIndex=Q,i.set(Y,!0))}me(e,function(X,Y){var Q,ne,le;if(tr(X))Q=X,X={};else{Q=X.name;var ce=X.ordinalMeta;X.ordinalMeta=null,(X=Gn(X)).ordinalMeta=ce,ne=X.dimsDef,le=X.otherDims,X.name=X.coordDim=X.coordDimIndex=X.dimsDef=X.otherDims=null}if(!1!==(ye=y.get(Q))){var ye;if(!(ye=Js(ye)).length)for(var xe=0;xe<(ne&&ne.length||1);xe++){for(;b<s.length&&null!=s[b].coordDim;)b++;b<s.length&&ye.push(b++)}me(ye,function(Te,Ee){var Ve=s[Te];if(S(un(Ve,X),Q,Ee),null==Ve.name&&ne){var Be=ne[Ee];xt(Be)||(Be={name:Be}),Ve.name=Ve.displayName=Be.name,Ve.defaultTooltip=Be.defaultTooltip}le&&un(Ve.otherDims,le)})}});var M=n.generateCoord,k=n.generateCoordCount,O=null!=k;k=M?k||1:0;for(var P,F=M||"value",G=0;G<l;G++)null==(p=s[G]=s[G]||new Gb).coordDim&&(p.coordDim=ZS(F,i,O),p.coordDimIndex=0,(!M||k<=0)&&(p.isExtraCoord=!0),k--),null==p.name&&(p.name=ZS(p.coordDim,o)),null==p.type&&(1===lm((P=t).data,P.sourceFormat,P.seriesLayoutBy,P.dimensionsDefine,P.startIndex,G)||p.isExtraCoord&&(null!=p.otherDims.itemName||null!=p.otherDims.seriesName))&&(p.type="ordinal");return s}function ZS(e,t,n){if(n||null!=t.get(e)){for(var r=0;null!=t.get(e+r);)r++;e+=r}return t.set(e,!0),e}no.type="list",no.hasItemOption=!0,no.getDimension=function(e){return"number"!=typeof e&&(isNaN(e)||this._dimensionInfos.hasOwnProperty(e))||(e=this.dimensions[e]),e},no.getDimensionInfo=function(e){return this._dimensionInfos[this.getDimension(e)]},no.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},no.mapDimension=function(e,t){var n=this._dimensionsSummary;if(null==t)return n.encodeFirstDimNotExtra[e];var r=n.encode[e];return!0===t?(r||[]).slice():r&&r[t]},no.initData=function(e,t,n){(hl.isInstance(e)||Dn(e))&&(e=new hm(e,this.dimensions.length)),this._rawData=e,this._storage={},this._indices=null,this._nameList=t||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=Vf[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=Vf.arrayRows,this._rawExtent={},this._initDataFromProvider(0,e.count()),e.pure&&(this.hasItemOption=!1)},no.getProvider=function(){return this._rawData},no.appendData=function(e){var t=this._rawData,n=this.count();t.appendData(e);var r=t.count();t.persistent||(r+=n),this._initDataFromProvider(n,r)},no.appendValues=function(e,t){for(var n=this._chunkSize,r=this._storage,o=this.dimensions,i=o.length,s=this._rawExtent,l=this.count(),c=l+Math.max(e.length,t?t.length:0),f=this._chunkCount,h=0;h<i;h++)s[O=o[h]]||(s[O]=[1/0,-1/0]),r[O]||(r[O]=[]),$v(r,this._dimensionInfos[O],n,f,c),this._chunkCount=r[O].length;for(var p=new Array(i),y=l;y<c;y++){for(var b=y-l,S=Math.floor(y/n),M=y%n,k=0;k<i;k++){var O=o[k],P=this._dimValueGetterArrayRows(e[b]||p,O,b,k);r[O][S][M]=P;var R=s[O];P<R[0]&&(R[0]=P),P>R[1]&&(R[1]=P)}t&&(this._nameList[y]=t[b])}this._rawCount=this._count=c,this._extent={},nw(this)},no._initDataFromProvider=function(e,t){if(!(t<=e)){for(var n,r=this._chunkSize,o=this._rawData,i=this._storage,s=this.dimensions,l=s.length,c=this._dimensionInfos,f=this._nameList,h=this._idList,p=this._rawExtent,y=this._nameRepeatCount={},b=this._chunkCount,S=0;S<l;S++){p[G=s[S]]||(p[G]=[1/0,-1/0]);var M=c[G];0===M.otherDims.itemName&&(n=this._nameDimIdx=S),0===M.otherDims.itemId&&(this._idDimIdx=S),i[G]||(i[G]=[]),$v(i,M,r,b,t),this._chunkCount=i[G].length}for(var k=new Array(l),O=e;O<t;O++){k=o.getItem(O,k);for(var P=Math.floor(O/r),R=O%r,F=0;F<l;F++){var G,X=i[G=s[F]][P],Y=this._dimValueGetter(k,G,O,F);X[R]=Y;var Q=p[G];Y<Q[0]&&(Q[0]=Y),Y>Q[1]&&(Q[1]=Y)}if(!o.pure){var ne=f[O];if(k&&null==ne)if(null!=k.name)f[O]=ne=k.name;else if(null!=n){var le=s[n],ce=i[le][P];if(ce){ne=ce[R];var ye=c[le].ordinalMeta;ye&&ye.categories.length&&(ne=ye.categories[ne])}}var xe=null==k?null:k.id;null==xe&&null!=ne&&(y[ne]=y[ne]||0,0<y[xe=ne]&&(xe+="__ec__"+y[ne]),y[ne]++),null!=xe&&(h[O]=xe)}}!o.persistent&&o.clean&&o.clean(),this._rawCount=this._count=t,this._extent={},nw(this)}},no.count=function(){return this._count},no.getIndices=function(){var e=this._indices;if(e){var t=e.constructor,n=this._count;if(t===Array){o=new t(n);for(var r=0;r<n;r++)o[r]=e[r]}else o=new t(e.buffer,0,n)}else{var o=new(t=jb(this))(this.count());for(r=0;r<o.length;r++)o[r]=r}return o},no.get=function(e,t){if(!(0<=t&&t<this._count))return NaN;var n=this._storage;if(!n[e])return NaN;t=this.getRawIndex(t);var r=Math.floor(t/this._chunkSize);return n[e][r][t%this._chunkSize]},no.getByRawIndex=function(e,t){if(!(0<=t&&t<this._rawCount))return NaN;var n=this._storage[e];return n?n[Math.floor(t/this._chunkSize)][t%this._chunkSize]:NaN},no._getFast=function(e,t){var n=Math.floor(t/this._chunkSize);return this._storage[e][n][t%this._chunkSize]},no.getValues=function(e,t){var n=[];rn(e)||(t=e,e=this.dimensions);for(var r=0,o=e.length;r<o;r++)n.push(this.get(e[r],t));return n},no.hasValue=function(e){for(var t=this._dimensionsSummary.dataDimsOnCoord,n=0,r=t.length;n<r;n++)if(isNaN(this.get(t[n],e)))return!1;return!0},no.getDataExtent=function(e){e=this.getDimension(e);var n=[1/0,-1/0];if(!this._storage[e])return n;var r,o=this.count();if(!this._indices)return this._rawExtent[e].slice();if(r=this._extent[e])return r.slice();for(var i=(r=n)[0],s=r[1],l=0;l<o;l++){var c=this._getFast(e,this.getRawIndex(l));c<i&&(i=c),s<c&&(s=c)}return this._extent[e]=[i,s]},no.getApproximateExtent=function(e){return e=this.getDimension(e),this._approximateExtent[e]||this.getDataExtent(e)},no.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},no.getCalculationInfo=function(e){return this._calculationInfo[e]},no.setCalculationInfo=function(e,t){Bo(e)?Fn(this._calculationInfo,e):this._calculationInfo[e]=t},no.getSum=function(e){var t=0;if(this._storage[e])for(var n=0,r=this.count();n<r;n++){var o=this.get(e,n);isNaN(o)||(t+=o)}return t},no.getMedian=function(e){var t=[];this.each(e,function(o,i){isNaN(o)||t.push(o)});var n=[].concat(t).sort(function(o,i){return o-i}),r=this.count();return 0===r?0:r%2==1?n[(r-1)/2]:(n[r/2]+n[r/2-1])/2},no.rawIndexOf=function(e,t){var n=(e&&this._invertedIndicesMap[e])[t];return null==n||isNaN(n)?-1:n},no.indexOfName=function(e){for(var t=0,n=this.count();t<n;t++)if(this.getName(t)===e)return t;return-1},no.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,n=t[e];if(null!=n&&n<this._count&&n===e)return e;for(var r=0,o=this._count-1;r<=o;){var i=(r+o)/2|0;if(t[i]<e)r=1+i;else{if(!(t[i]>e))return i;o=i-1}}return-1},no.indicesOfNearest=function(e,t,n){var r=[];if(!this._storage[e])return r;null==n&&(n=1/0);for(var o=1/0,i=-1,s=0,l=0,c=this.count();l<c;l++){var f=t-this.get(e,l),h=Math.abs(f);h<=n&&((h<o||h===o&&0<=f&&i<0)&&(o=h,i=f,s=0),f===i&&(r[s++]=l))}return r.length=s,r},no.getRawIndex=wp,no.getRawDataItem=function(e){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(e));for(var t=[],n=0;n<this.dimensions.length;n++)t.push(this.get(this.dimensions[n],e));return t},no.getName=function(e){var t=this.getRawIndex(e);return this._nameList[t]||rw(this,this._nameDimIdx,t)||""},no.getId=function(e){return v1(this,this.getRawIndex(e))},no.each=function(e,t,n,r){if(this._count){"function"==typeof e&&(r=n,n=t,t=e,e=[]),n=n||r||this;for(var o=(e=Kt(Kv(e),this.getDimension,this)).length,i=0;i<this.count();i++)switch(o){case 0:t.call(n,i);break;case 1:t.call(n,this.get(e[0],i),i);break;case 2:t.call(n,this.get(e[0],i),this.get(e[1],i),i);break;default:for(var s=0,l=[];s<o;s++)l[s]=this.get(e[s],i);l[s]=i,t.apply(n,l)}}},no.filterSelf=function(e,t,n,r){if(this._count){"function"==typeof e&&(r=n,n=t,t=e,e=[]),n=n||r||this,e=Kt(Kv(e),this.getDimension,this);for(var o=this.count(),i=new(jb(this))(o),s=[],l=e.length,c=0,f=e[0],h=0;h<o;h++){var p,y=this.getRawIndex(h);if(0===l)p=t.call(n,h);else if(1===l){var b=this._getFast(f,y);p=t.call(n,b,h)}else{for(var S=0;S<l;S++)s[S]=this._getFast(f,y);s[S]=h,p=t.apply(n,s)}p&&(i[c++]=y)}return c<o&&(this._indices=i),this._count=c,this._extent={},this.getRawIndex=this._indices?_y:wp,this}},no.selectRange=function(e){if(this._count){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);var r=t.length;if(r){var o=this.count(),i=new(jb(this))(o),s=0,l=t[0],c=e[l][0],f=e[l][1],h=!1;if(!this._indices){var p=0;if(1===r){for(var y=this._storage[t[0]],b=0;b<this._chunkCount;b++)for(var S=y[b],M=Math.min(this._count-b*this._chunkSize,this._chunkSize),k=0;k<M;k++)(c<=(G=S[k])&&G<=f||isNaN(G))&&(i[s++]=p),p++;h=!0}else if(2===r){y=this._storage[l];var O=this._storage[t[1]],P=e[t[1]][0],R=e[t[1]][1];for(b=0;b<this._chunkCount;b++){S=y[b];var F=O[b];for(M=Math.min(this._count-b*this._chunkSize,this._chunkSize),k=0;k<M;k++){var G=S[k],X=F[k];(c<=G&&G<=f||isNaN(G))&&(P<=X&&X<=R||isNaN(X))&&(i[s++]=p),p++}}h=!0}}if(!h)if(1===r)for(k=0;k<o;k++){var Y=this.getRawIndex(k);(c<=(G=this._getFast(l,Y))&&G<=f||isNaN(G))&&(i[s++]=Y)}else for(k=0;k<o;k++){var Q=!0;for(Y=this.getRawIndex(k),b=0;b<r;b++){var ne=t[b];((G=this._getFast(n,Y))<e[ne][0]||G>e[ne][1])&&(Q=!1)}Q&&(i[s++]=this.getRawIndex(k))}return s<o&&(this._indices=i),this._count=s,this._extent={},this.getRawIndex=this._indices?_y:wp,this}}},no.mapArray=function(e,t,n,r){"function"==typeof e&&(r=n,n=t,t=e,e=[]);var o=[];return this.each(e,function(){o.push(t&&t.apply(this,arguments))},n=n||r||this),o},no.map=function(e,t,n,r){n=n||r||this;var o=ow(this,e=Kt(Kv(e),this.getDimension,this));o._indices=this._indices,o.getRawIndex=o._indices?_y:wp;for(var i=o._storage,s=[],l=this._chunkSize,c=e.length,f=this.count(),h=[],p=o._rawExtent,y=0;y<f;y++){for(var b=0;b<c;b++)h[b]=this.get(e[b],y);h[c]=y;var S=t&&t.apply(n,h);if(null!=S){"object"!=typeof S&&(s[0]=S,S=s);for(var M=this.getRawIndex(y),k=Math.floor(M/l),O=M%l,P=0;P<S.length;P++){var R=e[P],F=S[P],G=p[R],X=i[R];X&&(X[k][O]=F),F<G[0]&&(G[0]=F),F>G[1]&&(G[1]=F)}}}return o},no.downSample=function(e,t,n,r){for(var o=ow(this,[e]),i=o._storage,s=[],l=Math.floor(1/t),c=i[e],f=this.count(),h=this._chunkSize,p=o._rawExtent[e],y=new(jb(this))(f),b=0,S=0;S<f;S+=l){f-S<l&&(s.length=l=f-S);for(var M=0;M<l;M++){var k=this.getRawIndex(S+M),O=Math.floor(k/h);s[M]=c[O][k%h]}var R=n(s),F=this.getRawIndex(Math.min(S+r(s,R)||0,f-1)),G=F%h;(c[Math.floor(F/h)][G]=R)<p[0]&&(p[0]=R),R>p[1]&&(p[1]=R),y[b++]=F}return o._count=b,o._indices=y,o.getRawIndex=_y,o},no.getItemModel=function(e){var t=this.hostModel;return new $o(this.getRawDataItem(e),t,t&&t.ecModel)},no.diff=function(e){var t=this;return new jf(e?e.getIndices():[],this.getIndices(),function(n){return v1(e,n)},function(n){return v1(t,n)})},no.getVisual=function(e){var t=this._visual;return t&&t[e]},no.setVisual=function(e,t){if(Bo(e))for(var n in e)e.hasOwnProperty(n)&&this.setVisual(n,e[n]);else this._visual=this._visual||{},this._visual[e]=t},no.setLayout=function(e,t){if(Bo(e))for(var n in e)e.hasOwnProperty(n)&&this.setLayout(n,e[n]);else this._layout[e]=t},no.getLayout=function(e){return this._layout[e]},no.getItemLayout=function(e){return this._itemLayouts[e]},no.setItemLayout=function(e,t,n){this._itemLayouts[e]=n?Fn(this._itemLayouts[e]||{},t):t},no.clearItemLayouts=function(){this._itemLayouts.length=0},no.getItemVisual=function(e,t,n){var r=this._itemVisuals[e],o=r&&r[t];return null!=o||n?o:this.getVisual(t)},no.setItemVisual=function(e,t,n){var r=this._itemVisuals[e]||{},o=this.hasItemVisual;if(this._itemVisuals[e]=r,Bo(t))for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i],o[i]=!0);else r[t]=n,o[t]=!0},no.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}},no.setItemGraphicEl=function(e,t){var n=this.hostModel;t&&(t.dataIndex=e,t.dataType=this.dataType,t.seriesIndex=n&&n.seriesIndex,"group"===t.type&&t.traverse(qk,t)),this._graphicEls[e]=t},no.getItemGraphicEl=function(e){return this._graphicEls[e]},no.eachItemGraphicEl=function(e,t){me(this._graphicEls,function(n,r){n&&e&&e.call(t,n,r)})},no.cloneShallow=function(e){if(!e){var t=Kt(this.dimensions,this.getDimensionInfo,this);e=new ml(t,this.hostModel)}return e._storage=this._storage,tw(e,this),e._indices=this._indices?new(0,this._indices.constructor)(this._indices):null,e.getRawIndex=e._indices?_y:wp,e},no.wrapMethod=function(e,t){var n=this[e];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var r=n.apply(this,arguments);return t.apply(this,[r].concat(gi(arguments)))})},no.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],no.CHANGABLE_METHODS=["filterSelf","selectRange"];var Jv=function(e,t){return Xk((t=t||{}).coordDimensions||[],e,{dimsDef:t.dimensionsDefine||e.dimensionsDefine,encodeDef:t.encodeDefine||e.encodeDefine,dimCount:t.dimensionsCount,encodeDefaulter:t.encodeDefaulter,generateCoord:t.generateCoord,generateCoordCount:t.generateCoordCount})};function Yk(e){this.coordSysName=e,this.coordSysDims=[],this.axisMap=ut(),this.categoryAxisMap=ut(),this.firstCategoryDimIndex=null}var Zk={cartesian2d:function(e,t,n,r){var o=e.getReferringComponents("xAxis")[0],i=e.getReferringComponents("yAxis")[0];t.coordSysDims=["x","y"],n.set("x",o),n.set("y",i),wy(o)&&(r.set("x",o),t.firstCategoryDimIndex=0),wy(i)&&(r.set("y",i),t.firstCategoryDimIndex=1)},singleAxis:function(e,t,n,r){var o=e.getReferringComponents("singleAxis")[0];t.coordSysDims=["single"],n.set("single",o),wy(o)&&(r.set("single",o),t.firstCategoryDimIndex=0)},polar:function(e,t,n,r){var o=e.getReferringComponents("polar")[0],i=o.findAxisModel("radiusAxis"),s=o.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],n.set("radius",i),n.set("angle",s),wy(i)&&(r.set("radius",i),t.firstCategoryDimIndex=0),wy(s)&&(r.set("angle",s),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,t,n,r){t.coordSysDims=["lng","lat"]},parallel:function(e,t,n,r){var o=e.ecModel,i=o.getComponent("parallel",e.get("parallelIndex")),s=t.coordSysDims=i.dimensions.slice();me(i.parallelAxisIndex,function(l,c){var f=o.getComponent("parallelAxis",l),h=s[c];n.set(h,f),wy(f)&&null==t.firstCategoryDimIndex&&(r.set(h,f),t.firstCategoryDimIndex=c)})}};function wy(e){return"category"===e.get("type")}function $S(e,t,n){var r,o,i,s,l=(n=n||{}).byIndex,c=n.stackedCoordDimension,f=!(!e||!e.get("stack"));if(me(t,function(b,S){tr(b)&&(t[S]=b={name:b}),f&&!b.isExtraCoord&&(l||r||!b.ordinalMeta||(r=b),o||"ordinal"===b.type||"time"===b.type||c&&c!==b.coordDim||(o=b))}),!o||l||r||(l=!0),o){i="__\0ecstackresult",s="__\0ecstackedover",r&&(r.createInvertedIndices=!0);var h=o.coordDim,p=o.type,y=0;me(t,function(b){b.coordDim===h&&y++}),t.push({name:i,coordDim:h,coordDimIndex:y,type:p,isExtraCoord:!0,isCalculationCoord:!0}),y++,t.push({name:s,coordDim:s,coordDimIndex:y,type:p,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:o&&o.name,stackedByDimension:r&&r.name,isStackedByIndex:l,stackedOverDimension:s,stackResultDimension:i}}function Sm(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function qb(e,t){return Sm(e,t)?e.getCalculationInfo("stackResultDimension"):t}function Sp(e,t,n){n=n||{},hl.isInstance(e)||(e=hl.seriesDataToSource(e));var r,o=t.get("coordinateSystem"),i=ku.get(o),s=function(b){var S=b.get("coordinateSystem"),M=new Yk(S),k=Zk[S];if(k)return k(b,M,M.axisMap,M.categoryAxisMap),M}(t);s&&(r=Kt(s.coordSysDims,function(b){var S={name:b},M=s.axisMap.get(b);if(M){var k=M.get("type");S.type=J_(k)}return S})),r=r||i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"];var l,c,f=Jv(e,{coordDimensions:r,generateCoord:n.generateCoord,encodeDefaulter:n.useEncodeDefaulter?ar(as,r,t):null});s&&me(f,function(b,S){var k=s.categoryAxisMap.get(b.coordDim);k&&(null==l&&(l=S),b.ordinalMeta=k.getOrdinalMeta()),null!=b.otherDims.itemName&&(c=!0)}),c||null==l||(f[l].otherDims.itemName=0);var h=$S(t,f),p=new ml(f,t);p.setCalculationInfo(h);var y=null!=l&&function(b){if(b.sourceFormat===cg){var S=function(M){for(var k=0;k<M.length&&null==M[k];)k++;return M[k]}(b.data||[]);return null!=S&&!rn(oh(S))}}(e)?function(b,S,M,k){return k===l?M:this.defaultDimValueGetter(b,S,M,k)}:null;return p.hasItemOption=!1,p.initData(e,null,y),p}function Us(e){this._setting=e||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function Sy(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication}Us.prototype.parse=function(e){return e},Us.prototype.getSetting=function(e){return this._setting[e]},Us.prototype.contain=function(e){var t=this._extent;return e>=t[0]&&e<=t[1]},Us.prototype.normalize=function(e){var t=this._extent;return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])},Us.prototype.scale=function(e){var t=this._extent;return e*(t[1]-t[0])+t[0]},Us.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},Us.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},Us.prototype.getExtent=function(){return this._extent.slice()},Us.prototype.setExtent=function(e,t){var n=this._extent;isNaN(e)||(n[0]=e),isNaN(t)||(n[1]=t)},Us.prototype.isBlank=function(){return this._isBlank},Us.prototype.setBlank=function(e){this._isBlank=e},Us.prototype.getLabel=null,ah(Us),Da(Us,{registerWhenExtend:!0}),Sy.createByAxisModel=function(e){var t=e.option,n=t.data,r=n&&Kt(n,KS);return new Sy({categories:r,needCollect:!r,deduplication:!1!==t.dedplication})};var $k=Sy.prototype;function Kk(e){return e._map||(e._map=ut(e.categories))}function KS(e){return xt(e)&&null!=e.value?e.value:e+""}$k.getOrdinal=function(e){return Kk(this).get(e)},$k.parseAndCollect=function(e){var t,n=this._needCollect;if("string"!=typeof e&&!n)return e;if(n&&!this._deduplication)return this.categories[t=this.categories.length]=e,t;var r=Kk(this);return null==(t=r.get(e))&&(n?(this.categories[t=this.categories.length]=e,r.set(e,t)):t=NaN),t};var iw=Us.prototype,JS=Us.extend({type:"ordinal",init:function(e,t){e&&!rn(e)||(e=new Sy({categories:e})),this._ordinalMeta=e,this._extent=t||[0,e.categories.length-1]},parse:function(e){return"string"==typeof e?this._ordinalMeta.getOrdinal(e):Math.round(e)},contain:function(e){return e=this.parse(e),iw.contain.call(this,e)&&null!=this._ordinalMeta.categories[e]},normalize:function(e){return iw.normalize.call(this,this.parse(e))},scale:function(e){return Math.round(iw.scale.call(this,e))},getTicks:function(){for(var e=[],t=this._extent,n=t[0];n<=t[1];)e.push(n),n++;return e},getLabel:function(e){if(!this.isBlank())return this._ordinalMeta.categories[e]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:Pt,niceExtent:Pt});JS.create=function(){return new JS};var Jk=is;function aw(e){return Pf(e)+2}function sw(e,t,n){e[t]=Math.max(Math.min(e[t],n[1]),n[0])}function Qk(e,t){isFinite(e[0])||(e[0]=t[0]),isFinite(e[1])||(e[1]=t[1]),sw(e,0,t),sw(e,1,t),e[0]>e[1]&&(e[0]=e[1])}var Cy=is,Ah=Us.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(e,t){var n=this._extent;isNaN(e)||(n[0]=parseFloat(e)),isNaN(t)||(n[1]=parseFloat(t))},unionExtent:function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),Ah.prototype.setExtent.call(this,t[0],t[1])},getInterval:function(){return this._interval},setInterval:function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=aw(e)},getTicks:function(e){var t=this._interval,n=this._extent,r=this._niceExtent,o=this._intervalPrecision,i=[];if(!t)return i;n[0]<r[0]&&i.push(e?Cy(r[0]-t,o):n[0]);for(var s=r[0];s<=r[1]&&(i.push(s),(s=Cy(s+t,o))!==i[i.length-1]);)if(1e4<i.length)return[];var l=i.length?i[i.length-1]:r[1];return n[1]>l&&i.push(e?Cy(l+t,o):n[1]),i},getMinorTicks:function(e){for(var t=this.getTicks(!0),n=[],r=this.getExtent(),o=1;o<t.length;o++){for(var s=t[o-1],l=0,c=[],f=(t[o]-s)/e;l<e-1;){var h=is(s+(l+1)*f);h>r[0]&&h<r[1]&&c.push(h),l++}n.push(c)}return n},getLabel:function(e,t){if(null==e)return"";var n=t&&t.precision;return null==n?n=Pf(e)||0:"auto"===n&&(n=this._intervalPrecision),ec(e=Cy(e,n,!0))},niceTicks:function(e,t,n){e=e||5;var r=this._extent,o=r[1]-r[0];if(isFinite(o)){o<0&&(o=-o,r.reverse());var i=function(s,l,c,f){var h={},y=h.interval=rm((s[1]-s[0])/l,!0);null!=c&&y<c&&(y=h.interval=c),null!=f&&f<y&&(y=h.interval=f);var b=h.intervalPrecision=aw(y);return Qk(h.niceTickExtent=[Jk(Math.ceil(s[0]/y)*y,b),Jk(Math.floor(s[1]/y)*y,b)],s),h}(r,e,t,n);this._intervalPrecision=i.intervalPrecision,this._interval=i.interval,this._niceExtent=i.niceTickExtent}},niceExtent:function(e){var t=this._extent;if(t[0]===t[1])if(0!==t[0]){var n=t[0];e.fixMax||(t[1]+=n/2),t[0]-=n/2}else t[1]=1;isFinite(t[1]-t[0])||(t[0]=0,t[1]=1),this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var o=this._interval;e.fixMin||(t[0]=Cy(Math.floor(t[0]/o)*o)),e.fixMax||(t[1]=Cy(Math.ceil(t[1]/o)*o))}});Ah.create=function(){return new Ah};var uw="__ec_stack_",y1="undefined"!=typeof Float32Array?Float32Array:Array;function pr(e){return e.get("stack")||uw+e.seriesIndex}function ky(e){return e.dim+e.index}function Ur(e,t){var n=[];return t.eachSeriesByType(e,function(r){Oo(r)&&!dw(r)&&n.push(r)}),n}function lw(e){var t=function(r){var o={};me(r,function(p){var y=p.coordinateSystem.getBaseAxis();if("time"===y.type||"value"===y.type)for(var b=p.getData(),S=y.dim+"_"+y.index,M=b.mapDimension(y.dim),k=0,O=b.count();k<O;++k){var P=b.get(M,k);o[S]?o[S].push(P):o[S]=[P]}});var i=[];for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];if(l){l.sort(function(p,y){return p-y});for(var c=null,f=1;f<l.length;++f){var h=l[f]-l[f-1];0<h&&(c=null===c?h:Math.min(c,h))}i[s]=c}}return i}(e),n=[];return me(e,function(r){var o,i=r.coordinateSystem.getBaseAxis(),s=i.getExtent();if("category"===i.type)o=i.getBandWidth();else if("value"===i.type||"time"===i.type){var c=t[i.dim+"_"+i.index],f=Math.abs(s[1]-s[0]),h=i.scale.getExtent(),p=Math.abs(h[1]-h[0]);o=c?f/p*c:f}else{var y=r.getData();o=Math.abs(s[1]-s[0])/y.count()}var b=Pn(r.get("barWidth"),o),S=Pn(r.get("barMaxWidth"),o),M=Pn(r.get("barMinWidth")||1,o),k=r.get("barGap"),O=r.get("barCategoryGap");n.push({bandWidth:o,barWidth:b,barMaxWidth:S,barMinWidth:M,barGap:k,barCategoryGap:O,axisKey:ky(i),stackId:pr(r)})}),QS(n)}function QS(e){var t={};me(e,function(r,o){var i=r.axisKey,s=r.bandWidth,l=t[i]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},c=l.stacks;t[i]=l;var f=r.stackId;c[f]||l.autoWidthCount++,c[f]=c[f]||{width:0,maxWidth:0};var h=r.barWidth;h&&!c[f].width&&(c[f].width=h,h=Math.min(l.remainedWidth,h),l.remainedWidth-=h);var p=r.barMaxWidth;p&&(c[f].maxWidth=p);var y=r.barMinWidth;y&&(c[f].minWidth=y);var b=r.barGap;null!=b&&(l.gap=b);var S=r.barCategoryGap;null!=S&&(l.categoryGap=S)});var n={};return me(t,function(r,o){n[o]={};var i=r.stacks,s=r.bandWidth,l=Pn(r.categoryGap,s),c=Pn(r.gap,1),f=r.remainedWidth,h=r.autoWidthCount,p=(f-l)/(h+(h-1)*c);p=Math.max(p,0),me(i,function(M){var k=M.maxWidth,O=M.minWidth;if(M.width)P=M.width,k&&(P=Math.min(P,k)),O&&(P=Math.max(P,O)),M.width=P,f-=P+c*P,h--;else{var P=p;k&&k<P&&(P=Math.min(k,f)),O&&P<O&&(P=O),P!==p&&(M.width=P,f-=P+c*P,h--)}}),p=(f-l)/(h+(h-1)*c),p=Math.max(p,0);var y,b=0;me(i,function(M,k){M.width||(M.width=p),b+=(y=M).width*(1+c)}),y&&(b-=y.width*c);var S=-b/2;me(i,function(M,k){n[o][k]=n[o][k]||{bandWidth:s,offset:S,width:M.width},S+=M.width*(1+c)})}),n}function zr(e,t,n){if(e&&t){var r=e[ky(t)];return null!=r&&null!=n&&(r=r[pr(n)]),r}}function cw(e,t){var n=Ur(e,t),r=lw(n),o={};me(n,function(i){var s=i.getData(),l=i.coordinateSystem,c=l.getBaseAxis(),f=pr(i),h=r[ky(c)][f],p=h.offset,y=h.width,b=l.getOtherAxis(c),S=i.get("barMinHeight")||0;o[f]=o[f]||[],s.setLayout({bandWidth:h.bandWidth,offset:p,size:y});for(var M=s.mapDimension(b.dim),k=s.mapDimension(c.dim),O=Sm(s,M),P=b.isHorizontal(),R=tC(0,b),F=0,G=s.count();F<G;F++){var X,Y,Q,ne,le,ce=s.get(M,F),ye=s.get(k,F),xe=0<=ce?"p":"n",Te=R;O&&(o[f][ye]||(o[f][ye]={p:R,n:R}),Te=o[f][ye][xe]),P?(X=Te,Y=(le=l.dataToPoint([ce,ye]))[1]+p,Q=le[0]-R,ne=y,Math.abs(Q)<S&&(Q=(Q<0?-1:1)*S),isNaN(Q)||O&&(o[f][ye][xe]+=Q)):(X=(le=l.dataToPoint([ye,ce]))[0]+p,Y=Te,Q=y,ne=le[1]-R,Math.abs(ne)<S&&(ne=(ne<=0?-1:1)*S),isNaN(ne)||O&&(o[f][ye][xe]+=ne)),s.setItemLayout(F,{x:X,y:Y,width:Q,height:ne})}},this)}var eC={seriesType:"bar",plan:wd(),reset:function(e){if(Oo(e)&&dw(e)){var t=e.getData(),n=e.coordinateSystem,r=n.grid.getRect(),o=n.getBaseAxis(),i=n.getOtherAxis(o),s=t.mapDimension(i.dim),l=t.mapDimension(o.dim),c=i.isHorizontal(),f=c?0:1,h=zr(lw([e]),o,e).width;return.5<h||(h=.5),{progress:function(p,y){for(var b,S=p.count,M=new y1(2*S),k=new y1(2*S),O=new y1(S),P=[],R=[],F=0,G=0;null!=(b=p.next());)R[f]=y.get(s,b),R[1-f]=y.get(l,b),P=n.dataToPoint(R,null,P),k[F]=c?r.x+r.width:P[0],M[F++]=P[0],k[F]=c?P[1]:r.y+r.height,M[F++]=P[1],O[G++]=b;y.setLayout({largePoints:M,largeDataIndices:O,largeBackgroundPoints:k,barWidth:h,valueAxisStart:tC(0,i),backgroundStart:c?r.x:r.y,valueAxisHorizontal:c})}}}}};function Oo(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function dw(e){return e.pipelineContext&&e.pipelineContext.large}function tC(e,t){return t.toGlobalCoord(t.dataToCoord("log"===t.type?1:0))}var eM=Ah.prototype,tM=Math.ceil,nC=Math.floor,qs=864e5,My=Ah.extend({type:"time",getLabel:function(e){var t=this._stepLvl,n=new Date(e);return Hc(t[0],n,this.getSetting("useUTC"))},niceExtent:function(e){var t=this._extent;if(t[0]===t[1]&&(t[0]-=qs,t[1]+=qs),t[1]===-1/0&&t[0]===1/0){var n=new Date;t[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),t[0]=t[1]-qs}this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var r=this._interval;e.fixMin||(t[0]=is(nC(t[0]/r)*r)),e.fixMax||(t[1]=is(tM(t[1]/r)*r))},niceTicks:function(e,t,n){var r=this._extent,o=r[1]-r[0],i=o/(e=e||10);null!=t&&i<t&&(i=t),null!=n&&n<i&&(i=n);var s=oC.length,l=function(y,b,S,M){for(;S<M;){var k=S+M>>>1;y[k][1]<b?S=1+k:M=k}return S}(oC,i,0,s),c=oC[Math.min(l,s-1)],f=c[1];"year"===c[0]&&(f*=rm(o/f/e,!0));var h=this.getSetting("useUTC")?0:60*new Date(+r[0]||+r[1]).getTimezoneOffset()*1e3,p=[Math.round(tM((r[0]-h)/f)*f+h),Math.round(nC((r[1]-h)/f)*f+h)];Qk(p,r),this._stepLvl=c,this._interval=f,this._niceExtent=p},parse:function(e){return+Rf(e)}});me(["contain","normalize"],function(e){My.prototype[e]=function(t){return eM[e].call(this,this.parse(t))}});var oC=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",qs],["MM-dd\nyyyy",2*qs],["MM-dd\nyyyy",3*qs],["MM-dd\nyyyy",4*qs],["MM-dd\nyyyy",5*qs],["MM-dd\nyyyy",6*qs],["week",7*qs],["MM-dd\nyyyy",864e6],["week",14*qs],["week",21*qs],["month",31*qs],["week",42*qs],["month",62*qs],["week",70*qs],["quarter",95*qs],["month",31*qs*4],["month",13392e6],["half-year",16416e6],["month",31*qs*8],["month",26784e6],["year",380*qs]];My.create=function(e){return new My({useUTC:e.ecModel.get("useUTC")})};var fw=Us.prototype,Cm=Ah.prototype,Ty=Pf,Cp=is,iC=Math.floor,Qv=Math.ceil,_g=Math.pow,Ih=Math.log,wg=Us.extend({type:"log",base:10,$constructor:function(){Us.apply(this,arguments),this._originalScale=new Ah},getTicks:function(e){var t=this._originalScale,n=this._extent,r=t.getExtent();return Kt(Cm.getTicks.call(this,e),function(o){var i=is(_g(this.base,o));return i=o===n[0]&&t.__fixMin?ha(i,r[0]):i,o===n[1]&&t.__fixMax?ha(i,r[1]):i},this)},getMinorTicks:Cm.getMinorTicks,getLabel:Cm.getLabel,scale:function(e){return e=fw.scale.call(this,e),_g(this.base,e)},setExtent:function(e,t){var n=this.base;e=Ih(e)/Ih(n),t=Ih(t)/Ih(n),Cm.setExtent.call(this,e,t)},getExtent:function(){var e=this.base,t=fw.getExtent.call(this);t[0]=_g(e,t[0]),t[1]=_g(e,t[1]);var n=this._originalScale,r=n.getExtent();return n.__fixMin&&(t[0]=ha(t[0],r[0])),n.__fixMax&&(t[1]=ha(t[1],r[1])),t},unionExtent:function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=Ih(e[0])/Ih(t),e[1]=Ih(e[1])/Ih(t),fw.unionExtent.call(this,e)},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},niceTicks:function(e){e=e||10;var t=this._extent,n=t[1]-t[0];if(!(n==1/0||n<=0)){var r=yh(n);for(e/n*r<=.5&&(r*=10);!isNaN(r)&&Math.abs(r)<1&&0<Math.abs(r);)r*=10;var o=[is(Qv(t[0]/r)*r),is(iC(t[1]/r)*r)];this._interval=r,this._niceExtent=o}},niceExtent:function(e){Cm.niceExtent.call(this,e);var t=this._originalScale;t.__fixMin=e.fixMin,t.__fixMax=e.fixMax}});function ha(e,t){return Cp(e,Ty(t))}function kp(e,t){var n,r,o,i=e.type,s=t.getMin(),l=t.getMax(),c=e.getExtent();"ordinal"===i?n=t.getCategories().length:(rn(r=t.get("boundaryGap"))||(r=[r||0,r||0]),"boolean"==typeof r[0]&&(r=[0,0]),r[0]=Pn(r[0],1),r[1]=Pn(r[1],1),o=c[1]-c[0]||Math.abs(c[0])),"dataMin"===s?s=c[0]:"function"==typeof s&&(s=s({min:c[0],max:c[1]})),"dataMax"===l?l=c[1]:"function"==typeof l&&(l=l({min:c[0],max:c[1]}));var f=null!=s,h=null!=l;null==s&&(s="ordinal"===i?n?0:NaN:c[0]-r[0]*o),null==l&&(l="ordinal"===i?n?n-1:NaN:c[1]+r[1]*o),null!=s&&isFinite(s)||(s=NaN),null!=l&&isFinite(l)||(l=NaN),e.setBlank(hr(s)||hr(l)||"ordinal"===i&&!e.getOrdinalMeta().categories.length),t.getNeedCrossZero()&&(0<s&&0<l&&!f&&(s=0),s<0&&l<0&&!h&&(l=0));var p=t.ecModel;if(p&&"time"===i){var y,b=Ur("bar",p);if(me(b,function(k){y|=k.getBaseAxis()===t.axis}),y){var S=lw(b),M=function(k,O,P,R){var F=P.axis.getExtent(),G=F[1]-F[0],X=zr(R,P.axis);if(void 0===X)return{min:k,max:O};var Y=1/0;me(X,function(ye){Y=Math.min(ye.offset,Y)});var Q=-1/0;me(X,function(ye){Q=Math.max(ye.offset+ye.width,Q)}),Y=Math.abs(Y),Q=Math.abs(Q);var ne=Y+Q,le=O-k,ce=le/(1-(Y+Q)/G)-le;return{min:k-=Y/ne*ce,max:O+=Q/ne*ce}}(s,l,t,S);s=M.min,l=M.max}}return{extent:[s,l],fixMin:f,fixMax:h}}function oc(e,t){var n=kp(e,t),r=n.extent,o=t.get("splitNumber");"log"===e.type&&(e.base=t.get("logBase"));var i=e.type;e.setExtent(r[0],r[1]),e.niceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:"interval"===i||"time"===i?t.get("minInterval"):null,maxInterval:"interval"===i||"time"===i?t.get("maxInterval"):null});var s=t.get("interval");null!=s&&e.setInterval&&e.setInterval(s)}function Sg(e,t){if(t=t||e.get("type"))switch(t){case"category":return new JS(e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),[1/0,-1/0]);case"value":return new Ah;default:return(Us.getClass(t)||Ah).create(e)}}function Cc(e){var t,n=e.getLabelModel().get("formatter"),r="category"===e.type?e.scale.getExtent()[0]:null;return"string"==typeof n?(t=n,n=function(o){return o=e.scale.getLabel(o),t.replace("{value}",null!=o?o:"")}):"function"==typeof n?function(o,i){return null!=r&&(i=o-r),n(pl(e,o),i)}:function(o){return e.scale.getLabel(o)}}function pl(e,t){return"category"===e.type?e.scale.getLabel(t):t}function Td(e){var t=e.get("interval");return null==t?"auto":t}function hw(e){return"category"===e.type&&0===Td(e.getLabelModel())}me(["contain","normalize"],function(e){wg.prototype[e]=function(t){return t=Ih(t)/Ih(this.base),fw[e].call(this,t)}}),wg.create=function(){return new wg};var Cg={getMin:function(e){var t=this.option,n=e||null==t.rangeStart?t.min:t.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!hr(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(e){var t=this.option,n=e||null==t.rangeEnd?t.max:t.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!hr(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var e=this.option;return null==e.rangeStart&&null==e.rangeEnd&&!e.scale},getCoordSysModel:Pt,setRange:function(e,t){this.option.rangeStart=e,this.option.rangeEnd=t},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},aC=Xu({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,r=t.cy,o=t.width/2,i=t.height/2;e.moveTo(n,r-i),e.lineTo(n+o,r+i),e.lineTo(n-o,r+i),e.closePath()}}),b1=Xu({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,r=t.cy,o=t.width/2,i=t.height/2;e.moveTo(n,r-i),e.lineTo(n+o,r),e.lineTo(n,r+i),e.lineTo(n-o,r),e.closePath()}}),x1=Xu({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.x,r=t.y,o=t.width/5*3,i=Math.max(o,t.height),s=o/2,l=s*s/(i-s),c=r-i+s+l,f=Math.asin(l/s),h=Math.cos(f)*s,p=Math.sin(f),y=Math.cos(f),b=.6*s,S=.7*s;e.moveTo(n-h,c+l),e.arc(n,c,s,Math.PI-f,2*Math.PI+f),e.bezierCurveTo(n+h-p*b,c+l+y*b,n,r-S,n,r),e.bezierCurveTo(n,r-S,n-h+p*b,c+l+y*b,n-h,c+l),e.closePath()}}),kg=Xu({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.height,o=t.x,i=t.y,s=t.width/3*2;e.moveTo(o,i),e.lineTo(o+s,i+n),e.lineTo(o,i+n/4*3),e.lineTo(o-s,i+n),e.lineTo(o,i),e.closePath()}}),Xb={line:function(e,t,n,r,o){o.x1=e,o.y1=t+r/2,o.x2=e+n,o.y2=t+r/2},rect:function(e,t,n,r,o){o.x=e,o.y=t,o.width=n,o.height=r},roundRect:function(e,t,n,r,o){o.x=e,o.y=t,o.width=n,o.height=r,o.r=Math.min(n,r)/4},square:function(e,t,n,r,o){var i=Math.min(n,r);o.x=e,o.y=t,o.width=i,o.height=i},circle:function(e,t,n,r,o){o.cx=e+n/2,o.cy=t+r/2,o.r=Math.min(n,r)/2},diamond:function(e,t,n,r,o){o.cx=e+n/2,o.cy=t+r/2,o.width=n,o.height=r},pin:function(e,t,n,r,o){o.x=e+n/2,o.y=t+r/2,o.width=n,o.height=r},arrow:function(e,t,n,r,o){o.x=e+n/2,o.y=t+r/2,o.width=n,o.height=r},triangle:function(e,t,n,r,o){o.cx=e+n/2,o.cy=t+r/2,o.width=n,o.height=r}},_1={};me({line:Yi,rect:ei,roundRect:ei,square:ei,circle:Fs,diamond:b1,pin:x1,arrow:kg,triangle:aC},function(e,t){_1[t]=new e});var w1=Xu({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,n){var r=Na(e,t,n),o=this.shape;return o&&"pin"===o.symbolType&&"inside"===t.textPosition&&(r.y=n.y+.4*n.height),r},buildPath:function(e,t,n){var r=t.symbolType;if("none"!==r){var o=_1[r];o=o||_1[r="rect"],Xb[r](t.x,t.y,t.width,t.height,o.shape),o.buildPath(e,o.shape,n)}}});function gw(e,t){if("image"!==this.type){var n=this.style,r=this.shape;r&&"line"===r.symbolType?n.stroke=e:this.__isEmptyBrush?(n.stroke=e,n.fill=t||"#fff"):(n.fill&&(n.fill=e),n.stroke&&(n.stroke=e)),this.dirty(!1)}}function Zc(e,t,n,r,o,i,s){var l,c=0===e.indexOf("empty");return c&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(l=0===e.indexOf("image://")?gh(e.slice(8),new Vo(t,n,r,o),s?"center":"cover"):0===e.indexOf("path://")?op(e.slice(7),{},new Vo(t,n,r,o),s?"center":"cover"):new w1({shape:{symbolType:e,x:t,y:n,width:r,height:o}})).__isEmptyBrush=c,l.setColor=gw,l.setColor(i),l}var sC=(Object.freeze||Object)({createList:function(e){return Sp(e.getSource(),e)},getLayoutRect:No,dataStack:{isDimensionStacked:Sm,enableDataStack:$S,getStackedDimension:qb},createScale:function(e,t){var n=t;$o.isInstance(t)||_e(n=new $o(t),Cg);var r=Sg(n);return r.setExtent(e[0],e[1]),oc(r,n),r},mixinAxisModelCommonMethods:function(e){_e(e,Cg)},completeDimensions:Xk,createDimensions:Jv,createSymbol:Zc});function mw(e,t){return Math.abs(e-t)<1e-8}function Mp(e,t,n){var r=0,o=e[0];if(!o)return!1;for(var i=1;i<e.length;i++){var s=e[i];r+=Gu(o[0],o[1],s[0],s[1],t,n),o=s}var l=e[0];return mw(o[0],l[0])&&mw(o[1],l[1])||(r+=Gu(o[0],o[1],l[0],l[1],t,n)),0!==r}function Tp(e,t,n){if(this.name=e,this.geometries=t,n)n=[n[0],n[1]];else{var r=this.getBoundingRect();n=[r.x+r.width/2,r.y+r.height/2]}this.center=n}function lC(e,t,n){for(var r=[],o=t[0],i=t[1],s=0;s<e.length;s+=2){var l=e.charCodeAt(s)-64,c=e.charCodeAt(s+1)-64;l=l>>1^-(1&l),c=c>>1^-(1&c),o=l+=o,i=c+=i,r.push([l/n,c/n])}return r}function Dy(e,t){return function(n){if(n.UTF8Encoding){var r=n.UTF8Scale;null==r&&(r=1024);for(var o=n.features,i=0;i<o.length;i++)for(var s=o[i].geometry,l=s.coordinates,c=s.encodeOffsets,f=0;f<l.length;f++){var h=l[f];if("Polygon"===s.type)l[f]=lC(h,c[f],r);else if("MultiPolygon"===s.type)for(var p=0;p<h.length;p++)h[p]=lC(h[p],c[f][p],r)}n.UTF8Encoding=!1}}(e),Kt(_r(e.features,function(n){return n.geometry&&n.properties&&0<n.geometry.coordinates.length}),function(n){var r=n.properties,o=n.geometry,i=o.coordinates,s=[];"Polygon"===o.type&&s.push({type:"polygon",exterior:i[0],interiors:i.slice(1)}),"MultiPolygon"===o.type&&me(i,function(c){c[0]&&s.push({type:"polygon",exterior:c[0],interiors:c.slice(1)})});var l=new Tp(r[t||"name"],s,r.cp);return l.properties=r,l})}Tp.prototype={constructor:Tp,properties:null,getBoundingRect:function(){var e=this._rect;if(e)return e;for(var t=Number.MAX_VALUE,n=[t,t],r=[-t,-t],o=[],i=[],s=this.geometries,l=0;l<s.length;l++)"polygon"===s[l].type&&(ca(s[l].exterior,o,i),hu(n,n,o),ri(r,r,i));return 0===l&&(n[0]=n[1]=r[0]=r[1]=0),this._rect=new Vo(n[0],n[1],r[0]-n[0],r[1]-n[1])},contain:function(e){var t=this.getBoundingRect(),n=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var r=0,o=n.length;r<o;r++)if("polygon"===n[r].type){var s=n[r].interiors;if(Mp(n[r].exterior,e[0],e[1])){for(var l=0;l<(s?s.length:0);l++)if(Mp(s[l]))continue e;return!0}}return!1},transformTo:function(e,t,n,r){var o=this.getBoundingRect(),i=o.width/o.height;n?r=r||n/i:n=i*r;for(var s=new Vo(e,t,n,r),l=o.calculateTransform(s),c=this.geometries,f=0;f<c.length;f++)if("polygon"===c[f].type){for(var h=c[f].exterior,p=c[f].interiors,y=0;y<h.length;y++)wn(h[y],h[y],l);for(var b=0;b<(p?p.length:0);b++)for(y=0;y<p[b].length;y++)wn(p[b][y],p[b][y],l)}(o=this._rect).copy(s),this.center=[o.x+o.width/2,o.y+o.height/2]},cloneShallow:function(e){null==e&&(e=this.name);var t=new Tp(e,this.geometries,this.center);return t._rect=this._rect,t.transformTo=null,t}};var km=La();function Yb(e,t){var n,s,l,r=dC(e,"labels"),o=Td(t);return Ay(r,o)||Iy(r,o,{labels:Mt(o)?C1(e,o):nM(e,n="auto"===o?(s=e,l=km(s).autoInterval,null!=l?l:km(s).autoInterval=s.calculateCategoryInterval()):o),labelCategoryInterval:n})}function dC(e,t){return km(e)[t]||(km(e)[t]=[])}function Ay(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return e[n].value}function Iy(e,t,n){return e.push({key:t,value:n}),n}function nM(e,t,n){var r=Cc(e),o=e.scale,i=o.getExtent(),s=e.getLabelModel(),l=[],c=Math.max((t||0)+1,1),f=i[0],h=o.count();0!==f&&1<c&&2<h/c&&(f=Math.round(Math.ceil(f/c)*c));var p=hw(e),y=s.get("showMinLabel")||p,b=s.get("showMaxLabel")||p;y&&f!==i[0]&&M(i[0]);for(var S=f;S<=i[1];S+=c)M(S);function M(k){l.push(n?k:{formattedLabel:r(k),rawLabel:o.getLabel(k),tickValue:k})}return b&&S-c!==i[1]&&M(i[1]),l}function C1(e,t,n){var r=e.scale,o=Cc(e),i=[];return me(r.getTicks(),function(s){var l=r.getLabel(s);t(s,l)&&i.push(n?s:{formattedLabel:o(s),rawLabel:l,tickValue:s})}),i}var fC=[0,1],cu=function(e,t,n){this.dim=e,this.scale=t,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};function rM(e,t){var n=(e[1]-e[0])/t/2;e[0]+=n,e[1]-=n}cu.prototype={constructor:cu,contain:function(e){var t=this._extent,n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]);return n<=e&&e<=r},containData:function(e){return this.scale.contain(e)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(e){return _v(e||this.scale.getExtent(),this._extent)},setExtent:function(e,t){var n=this._extent;n[0]=e,n[1]=t},dataToCoord:function(e,t){var n=this._extent,r=this.scale;return e=r.normalize(e),this.onBand&&"ordinal"===r.type&&rM(n=n.slice(),r.count()),yi(e,fC,n,t)},coordToData:function(e,t){var n=this._extent,r=this.scale;this.onBand&&"ordinal"===r.type&&rM(n=n.slice(),r.count());var o=yi(e,n,fC,t);return this.scale.scale(o)},pointToData:function(e,t){},getTicksCoords:function(e){var t=(e=e||{}).tickModel||this.getTickModel(),n=Kt(function(e,t){return"category"===e.type?function(n,r){var o,i,s=dC(n,"ticks"),l=Td(r),c=Ay(s,l);if(c)return c;if(r.get("show")&&!n.scale.isBlank()||(o=[]),Mt(l))o=C1(n,l,!0);else if("auto"===l){var f=Yb(n,n.getLabelModel());i=f.labelCategoryInterval,o=Kt(f.labels,function(h){return h.tickValue})}else o=nM(n,i=l,!0);return Iy(s,l,{ticks:o,tickCategoryInterval:i})}(e,t):{ticks:e.scale.getTicks()}}(this,t).ticks,function(r){return{coord:this.dataToCoord(r),tickValue:r}},this);return function(r,o,i,s){var l=o.length;if(r.onBand&&!i&&l){var c,h=r.getExtent();if(1===l)o[0].coord=h[0],c=o[1]={coord:h[0]};else{var y=(o[l-1].coord-o[0].coord)/(o[l-1].tickValue-o[0].tickValue);me(o,function(k){k.coord-=y/2});var b=r.scale.getExtent();o.push(c={coord:o[l-1].coord+y*(1+b[1]-o[l-1].tickValue)})}var S=h[0]>h[1];M(o[0].coord,h[0])&&(s?o[0].coord=h[0]:o.shift()),s&&M(h[0],o[0].coord)&&o.unshift({coord:h[0]}),M(h[1],c.coord)&&(s?c.coord=h[1]:o.pop()),s&&M(c.coord,h[1])&&o.push({coord:h[1]})}function M(k,O){return k=is(k),O=is(O),S?O<k:k<O}}(this,n,t.get("alignWithLabel"),e.clamp),n},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick").get("splitNumber");return 0<e&&e<100||(e=5),Kt(this.scale.getMinorTicks(e),function(t){return Kt(t,function(n){return{coord:this.dataToCoord(n),tickValue:n}},this)},this)},getViewLabels:function(){return function(e){return"category"===e.type?function(t){var n=t.getLabelModel(),r=Yb(t,n);return!n.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}(e):function(t){var n=t.scale.getTicks(),r=Cc(t);return{labels:Kt(n,function(o,i){return{formattedLabel:r(o,i),rawLabel:t.scale.getLabel(o),tickValue:o}})}}(e)}(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var e=this._extent,t=this.scale.getExtent(),n=t[1]-t[0]+(this.onBand?1:0);0===n&&(n=1);var r=Math.abs(e[1]-e[0]);return Math.abs(r)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(e){var Q,ne,t=(ne=(Q=e).getLabelModel(),{axisRotate:Q.getRotate?Q.getRotate():Q.isHorizontal&&!Q.isHorizontal()?90:0,labelRotate:ne.get("rotate")||0,font:ne.getFont()}),n=Cc(e),r=(t.axisRotate-t.labelRotate)/180*Math.PI,o=e.scale,i=o.getExtent(),s=o.count();if(i[1]-i[0]<1)return 0;var l=1;40<s&&(l=Math.max(1,Math.floor(s/40)));for(var c=i[0],f=e.dataToCoord(c+1)-e.dataToCoord(c),h=Math.abs(f*Math.cos(r)),p=Math.abs(f*Math.sin(r)),y=0,b=0;c<=i[1];c+=l){var M,k=Qi(n(c),t.font,"center","top");M=1.3*k.height,y=Math.max(y,1.3*k.width,7),b=Math.max(b,M,7)}var O=y/h,P=b/p;isNaN(O)&&(O=1/0),isNaN(P)&&(P=1/0);var R=Math.max(0,Math.floor(Math.min(O,P))),F=km(e.model),G=e.getExtent(),X=F.lastAutoInterval,Y=F.lastTickCount;return null!=X&&null!=Y&&Math.abs(X-R)<=1&&Math.abs(Y-s)<=1&&R<X&&F.axisExtend0===G[0]&&F.axisExtend1===G[1]?R=X:(F.lastTickCount=s,F.lastAutoInterval=R,F.axisExtend0=G[0],F.axisExtend1=G[1]),R}(this)}};var hC=Dy,vw={};me(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(e){vw[e]=qt[e]});var gC={};function k1(e,t){var n=e.mapDimension("defaultedLabel",!0),r=n.length;if(1===r)return nf(e,t,n[0]);if(r){for(var o=[],i=0;i<n.length;i++){var s=nf(e,t,n[i]);o.push(s)}return o.join(" ")}}function Dp(e,t,n){pn.call(this),this.updateData(e,t,n)}me(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(e){gC[e]=Jd[e]}),ba.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(e,t){return Sp(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var Oh=Dp.prototype,mC=Dp.getSymbolSize=function(e,t){var n=e.getItemVisual(t,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};function M1(e){return[e[0]/2,e[1]/2]}function Zb(e,t){this.parent.drift(e,t)}Oh._createSymbol=function(e,t,n,r,o){this.removeAll();var i=Zc(e,-1,-1,2,2,t.getItemVisual(n,"color"),o);i.attr({z2:100,culling:!0,scale:M1(r)}),i.drift=Zb,this._symbolType=e,this.add(i)},Oh.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(e)},Oh.getSymbolPath=function(){return this.childAt(0)},Oh.getScale=function(){return this.childAt(0).scale},Oh.highlight=function(){this.childAt(0).trigger("emphasis")},Oh.downplay=function(){this.childAt(0).trigger("normal")},Oh.setZ=function(e,t){var n=this.childAt(0);n.zlevel=e,n.z=t},Oh.setDraggable=function(e){var t=this.childAt(0);t.draggable=e,t.cursor=e?"move":t.cursor},Oh.updateData=function(e,t,n){this.silent=!1;var r=e.getItemVisual(t,"symbol")||"circle",o=e.hostModel,i=mC(e,t),s=r!==this._symbolType;if(s){var l=e.getItemVisual(t,"symbolKeepAspect");this._createSymbol(r,e,t,i,l)}else(c=this.childAt(0)).silent=!1,so(c,{scale:M1(i)},o,t);if(this._updateCommon(e,t,i,n),s){var c=this.childAt(0),f=n&&n.fadeIn,h={scale:c.scale.slice()};f&&(h.style={opacity:c.style.opacity}),c.scale=[0,0],f&&(c.style.opacity=0),Zo(c,h,o,t)}this._seriesModel=o};var T1=["itemStyle"],pC=["emphasis","itemStyle"],oM=["label"],$b=["emphasis","label"];function D1(e,t){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===t){var n=this.__symbolOriginalScale,r=n[1]/n[0],o={scale:[Math.max(1.1*n[0],n[0]+3),Math.max(1.1*n[1],n[1]+3*r)]};this.animateTo(o,400,"elasticOut")}else"normal"===t&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function Dd(e){this.group=new pn,this._symbolCtor=e||Dp}Oh._updateCommon=function(e,t,n,r){var o=this.childAt(0),i=e.hostModel,s=e.getItemVisual(t,"color");"image"!==o.type?o.useStyle({strokeNoScale:!0}):o.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var l=r&&r.itemStyle,c=r&&r.hoverItemStyle,f=r&&r.symbolOffset,h=r&&r.labelModel,p=r&&r.hoverLabelModel,y=r&&r.hoverAnimation,b=r&&r.cursorStyle;if(!r||e.hasItemOption){var S=r&&r.itemModel?r.itemModel:e.getItemModel(t);l=S.getModel(T1).getItemStyle(["color"]),c=S.getModel(pC).getItemStyle(),f=S.getShallow("symbolOffset"),h=S.getModel(oM),p=S.getModel($b),y=S.getShallow("hoverAnimation"),b=S.getShallow("cursor")}else c=Fn({},c);var M=o.style,k=e.getItemVisual(t,"symbolRotate");o.attr("rotation",(k||0)*Math.PI/180||0),f&&o.attr("position",[Pn(f[0],n[0]),Pn(f[1],n[1])]),b&&o.attr("cursor",b),o.setColor(s,r&&r.symbolInnerColor),o.setStyle(l);var O=e.getItemVisual(t,"opacity");null!=O&&(M.opacity=O);var P=e.getItemVisual(t,"liftZ"),R=o.__z2Origin;null!=P?null==R&&(o.__z2Origin=o.z2,o.z2+=P):null!=R&&(o.z2=R,o.__z2Origin=null);var F=r&&r.useNameLabel;Cu(M,c,h,p,{labelFetcher:i,labelDataIndex:t,defaultText:function(G,X){return F?e.getName(G):k1(e,G)},isRectText:!0,autoColor:s}),o.__symbolOriginalScale=M1(n),o.hoverStyle=c,o.highDownOnUpdate=y&&i.isAnimationEnabled()?D1:null,ya(o)},Oh.fadeOut=function(e,t){var n=this.childAt(0);this.silent=n.silent=!0,t&&t.keepLabel||(n.style.text=null),so(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,e)},Rn(Dp,pn);var Kb=Dd.prototype;function Oy(e,t,n,r){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(r.isIgnore&&r.isIgnore(n))&&!(r.clipShape&&!r.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(n,"symbol")}function Jb(e){return null==e||xt(e)||(e={isIgnore:e}),e||{}}function A1(e){var t=e.hostModel;return{itemStyle:t.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:t.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label"),cursorStyle:t.get("cursor")}}function I1(e,t,n){var r,M,k,O,o=e.getBaseAxis(),i=e.getOtherAxis(o),s=(M=n,k=0,O=i.scale.getExtent(),"start"===M?k=O[0]:"end"===M?k=O[1]:0<O[0]?k=O[0]:O[1]<0&&(k=O[1]),k),l=o.dim,c=i.dim,f=t.mapDimension(c),h=t.mapDimension(l),p="x"===c||"radius"===c?1:0,y=Kt(e.dimensions,function(S){return t.mapDimension(S)}),b=t.getCalculationInfo("stackResultDimension");return(r|=Sm(t,y[0]))&&(y[0]=b),(r|=Sm(t,y[1]))&&(y[1]=b),{dataDimsForPoint:y,valueStart:s,valueAxisDim:c,baseAxisDim:l,stacked:!!r,valueDim:f,baseDim:h,baseDataOffset:p,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Ey(e,t,n,r){var o=NaN;e.stacked&&(o=n.get(n.getCalculationInfo("stackedOverDimension"),r)),isNaN(o)&&(o=e.valueStart);var i=e.baseDataOffset,s=[];return s[i]=n.get(e.baseDim,r),s[1-i]=o,t.dataToPoint(s)}Kb.updateData=function(e,t){t=Jb(t);var n=this.group,r=e.hostModel,o=this._data,i=this._symbolCtor,s=A1(e);o||n.removeAll(),e.diff(o).add(function(l){var c=e.getItemLayout(l);if(Oy(e,c,l,t)){var f=new i(e,l,s);f.attr("position",c),e.setItemGraphicEl(l,f),n.add(f)}}).update(function(l,c){var f=o.getItemGraphicEl(c),h=e.getItemLayout(l);Oy(e,h,l,t)?(f?(f.updateData(e,l,s),so(f,{position:h},r)):(f=new i(e,l)).attr("position",h),n.add(f),e.setItemGraphicEl(l,f)):n.remove(f)}).remove(function(l){var c=o.getItemGraphicEl(l);c&&c.fadeOut(function(){n.remove(c)})}).execute(),this._data=e},Kb.isPersistent=function(){return!0},Kb.updateLayout=function(){var e=this._data;e&&e.eachItemGraphicEl(function(t,n){var r=e.getItemLayout(n);t.attr("position",r)})},Kb.incrementalPrepareUpdate=function(e){this._seriesScope=A1(e),this._data=null,this.group.removeAll()},Kb.incrementalUpdate=function(e,t,n){function r(l){l.isGroup||(l.incremental=l.useHoverLayer=!0)}n=Jb(n);for(var o=e.start;o<e.end;o++){var i=t.getItemLayout(o);if(Oy(t,i,o,n)){var s=new this._symbolCtor(t,o,this._seriesScope);s.traverse(r),s.attr("position",i),this.group.add(s),t.setItemGraphicEl(o,s)}}},Kb.remove=function(e){var t=this.group,n=this._data;n&&e?n.eachItemGraphicEl(function(r){r.fadeOut(function(){t.remove(r)})}):t.removeAll()};var O1=hu,Qb=ri,E1=si,ex=St,Uf=[],cf=[],Ad=[];function ai(e){return isNaN(e[0])||isNaN(e[1])}function Py(e,t,n,r,o,i,s,l,c,f){return"none"!==f&&f?function(h,p,y,b,S,M,k,O,P,R,F){for(var G=0,X=y,Y=0;Y<b;Y++){var Q=p[X];if(S<=X||X<0)break;if(ai(Q)){if(F){X+=M;continue}break}if(X===y)h[0<M?"moveTo":"lineTo"](Q[0],Q[1]);else if(0<P){var ne=p[G],le="y"===R?1:0,ce=(Q[le]-ne[le])*P;ex(cf,ne),cf[le]=ne[le]+ce,ex(Ad,Q),Ad[le]=Q[le]-ce,h.bezierCurveTo(cf[0],cf[1],Ad[0],Ad[1],Q[0],Q[1])}else h.lineTo(Q[0],Q[1]);G=X,X+=M}return Y}.apply(this,arguments):function(h,p,y,b,S,M,k,O,P,R,F){for(var G=0,X=y,Y=0;Y<b;Y++){var Q=p[X];if(S<=X||X<0)break;if(ai(Q)){if(F){X+=M;continue}break}if(X===y)h[0<M?"moveTo":"lineTo"](Q[0],Q[1]),ex(cf,Q);else if(0<P){var ne=X+M,le=p[ne];if(F)for(;le&&ai(p[ne]);)le=p[ne+=M];var ce=.5,ye=p[G];if(!(le=p[ne])||ai(le))ex(Ad,Q);else{var xe,Te;if(ai(le)&&!F&&(le=Q),mi(Uf,le,ye),"x"===R||"y"===R){var Ee="x"===R?0:1;xe=Math.abs(Q[Ee]-ye[Ee]),Te=Math.abs(Q[Ee]-le[Ee])}else xe=fs(Q,ye),Te=fs(Q,le);E1(Ad,Q,Uf,-P*(1-(ce=Te/(Te+xe))))}O1(cf,cf,O),Qb(cf,cf,k),O1(Ad,Ad,O),Qb(Ad,Ad,k),h.bezierCurveTo(cf[0],cf[1],Ad[0],Ad[1],Q[0],Q[1]),E1(cf,Q,Uf,P*ce)}else h.lineTo(Q[0],Q[1]);G=X,X+=M}return Y}.apply(this,arguments)}function Mm(e,t){var n=[1/0,1/0],r=[-1/0,-1/0];if(t)for(var o=0;o<e.length;o++){var i=e[o];i[0]<n[0]&&(n[0]=i[0]),i[1]<n[1]&&(n[1]=i[1]),i[0]>r[0]&&(r[0]=i[0]),i[1]>r[1]&&(r[1]=i[1])}return{min:t?n:r,max:t?r:n}}var vC=Qr.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:Gr(Qr.prototype.brush),buildPath:function(e,t){var n=t.points,r=0,o=n.length,i=Mm(n,t.smoothConstraint);if(t.connectNulls){for(;0<o&&ai(n[o-1]);o--);for(;r<o&&ai(n[r]);r++);}for(;r<o;)r+=Py(e,n,r,o,o,1,i.min,i.max,t.smooth,t.smoothMonotone,t.connectNulls)+1}}),qf=Qr.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:Gr(Qr.prototype.brush),buildPath:function(e,t){var n=t.points,r=t.stackedOnPoints,o=0,i=n.length,s=t.smoothMonotone,l=Mm(n,t.smoothConstraint),c=Mm(r,t.smoothConstraint);if(t.connectNulls){for(;0<i&&ai(n[i-1]);i--);for(;o<i&&ai(n[o]);o++);}for(;o<i;){var f=Py(e,n,o,i,i,1,l.min,l.max,t.smooth,s,t.connectNulls);Py(e,r,o+f-1,f,i,-1,c.min,c.max,t.stackedOnSmooth,s,t.connectNulls),o+=f+1,e.closePath()}}});function tx(e,t,n){var r=e.getArea(),o=e.getBaseAxis().isHorizontal(),i=r.x,s=r.y,l=r.width,c=r.height,f=n.get("lineStyle.width")||2;i-=f/2,s-=f/2,l+=f,c+=f,i=Math.floor(i),l=Math.round(l);var h=new ei({shape:{x:i,y:s,width:l,height:c}});return t&&(h.shape[o?"width":"height"]=0,Zo(h,{shape:{width:l,height:c}},n)),h}function nx(e,t,n){var r=e.getArea(),o=new oo({shape:{cx:is(e.cx,1),cy:is(e.cy,1),r0:is(r.r0,1),r:is(r.r,1),startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});return t&&(o.shape.endAngle=r.startAngle,Zo(o,{shape:{endAngle:r.endAngle}},n)),o}function e0(e,t,n){return e?"polar"===e.type?nx(e,t,n):"cartesian2d"===e.type?tx(e,t,n):null:null}function iM(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++){var r=e[n],o=t[n];if(r[0]!==o[0]||r[1]!==o[1])return}return!0}}function P1(e,t){var n=[],r=[],o=[],i=[];return ca(e,n,r),ca(t,o,i),Math.max(Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]),Math.abs(r[0]-i[0]),Math.abs(r[1]-i[1]))}function t0(e){return"number"==typeof e?e:e?.5:0}function Mg(e,t,n){for(var r=t.getBaseAxis(),o="x"===r.dim||"radius"===r.dim?0:1,i=[],s=0;s<e.length-1;s++){var l=e[s+1],c=e[s];i.push(c);var f=[];switch(n){case"end":f[o]=l[o],f[1-o]=c[1-o],i.push(f);break;case"middle":var p=[];f[o]=p[o]=(c[o]+l[o])/2,f[1-o]=c[1-o],p[1-o]=l[1-o],i.push(f),i.push(p);break;default:f[o]=c[o],f[1-o]=l[1-o],i.push(f)}}return e[s]&&i.push(e[s]),i}function n0(e,t,n){if("cartesian2d"!==e.type)return nx(e,t,n);var r=e.getBaseAxis().isHorizontal(),o=tx(e,t,n);if(!n.get("clip",!0)){var i=o.shape,s=Math.max(i.width,i.height);r?(i.y-=s,i.height+=2*s):(i.x-=s,i.width+=2*s)}return o}function Ap(e,t,n){return{seriesType:e,performRawSeries:!0,reset:function(r,o,i){var s=r.getData(),l=r.get("symbol"),c=r.get("symbolSize"),f=r.get("symbolKeepAspect"),h=r.get("symbolRotate"),p=Mt(l),y=Mt(c),b=Mt(h),S=p||y||b,M=!p&&l?l:t;if(s.setVisual({legendSymbol:n||M,symbol:M,symbolSize:y?null:c,symbolKeepAspect:f,symbolRotate:h}),!o.isSeriesFiltered(r))return{dataEach:s.hasItemOption||S?function(O,P){if(S){var R=r.getRawValue(P),F=r.getDataParams(P);p&&O.setItemVisual(P,"symbol",l(R,F)),y&&O.setItemVisual(P,"symbolSize",c(R,F)),b&&O.setItemVisual(P,"symbolRotate",h(R,F))}if(O.hasItemOption){var G=O.getItemModel(P),X=G.getShallow("symbol",!0),Y=G.getShallow("symbolSize",!0),Q=G.getShallow("symbolRotate",!0),ne=G.getShallow("symbolKeepAspect",!0);null!=X&&O.setItemVisual(P,"symbol",X),null!=Y&&O.setItemVisual(P,"symbolSize",Y),null!=Q&&O.setItemVisual(P,"symbolRotate",Q),null!=ne&&O.setItemVisual(P,"symbolKeepAspect",ne)}}:null}}}}function Ry(e){return{seriesType:e,plan:wd(),reset:function(t){var n=t.getData(),r=t.coordinateSystem,o=t.pipelineContext.large;if(r){var i=Kt(r.dimensions,function(c){return n.mapDimension(c)}).slice(0,2),s=i.length,l=n.getCalculationInfo("stackResultDimension");return Sm(n,i[0])&&(i[0]=l),Sm(n,i[1])&&(i[1]=l),s&&{progress:function(c,f){for(var p=o&&new Float32Array((c.end-c.start)*s),y=c.start,b=0,S=[],M=[];y<c.end;y++){var k;if(1===s){var O=f.get(i[0],y);k=!isNaN(O)&&r.dataToPoint(O,null,M)}else{O=S[0]=f.get(i[0],y);var P=S[1]=f.get(i[1],y);k=!isNaN(O)&&!isNaN(P)&&r.dataToPoint(S,null,M)}o?(p[b++]=k?k[0]:NaN,p[b++]=k?k[1]:NaN):f.setItemLayout(y,k&&k.slice()||[NaN,NaN])}o&&f.setLayout("symbolPoints",p)}}}}}}function cD(e,t){return Math.round(e.length/2)}Ju.extend({type:"line",init:function(){var e=new pn,t=new Dd;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},render:function(e,t,n){var r=e.coordinateSystem,o=this.group,i=e.getData(),s=e.getModel("lineStyle"),l=e.getModel("areaStyle"),c=i.mapArray(i.getItemLayout),f="polar"===r.type,h=this._coordSys,p=this._symbolDraw,y=this._polyline,b=this._polygon,S=this._lineGroup,M=e.get("animation"),k=!l.isEmpty(),O=l.get("origin"),P=function(ye,xe,Te){if(!Te.valueDim)return[];for(var Ee=[],Ve=0,Be=xe.count();Ve<Be;Ve++)Ee.push(Ey(Te,ye,xe,Ve));return Ee}(r,i,I1(r,i,O)),R=e.get("showSymbol"),F=R&&!f&&function(e,t,n){var r=e.get("showAllSymbol"),o="auto"===r;if(!r||o){var i=n.getAxesByScale("ordinal")[0];if(i&&(!o||!function(c,f){var h=c.getExtent(),p=Math.abs(h[1]-h[0])/c.scale.count();isNaN(p)&&(p=0);for(var y=f.count(),b=Math.max(1,Math.round(y/5)),S=0;S<y;S+=b)if(1.5*Dp.getSymbolSize(f,S)[c.isHorizontal()?1:0]>p)return!1;return!0}(i,t))){var s=t.mapDimension(i.dim),l={};return me(i.getViewLabels(),function(c){l[c.tickValue]=1}),function(c){return!l.hasOwnProperty(t.get(s,c))}}}}(e,i,r),G=this._data;G&&G.eachItemGraphicEl(function(ye,xe){ye.__temp&&(o.remove(ye),G.setItemGraphicEl(xe,null))}),R||p.remove(),o.add(S);var X,Y=!f&&e.get("step");r&&r.getArea&&e.get("clip",!0)&&(null!=(X=r.getArea()).width?(X.x-=.1,X.y-=.1,X.width+=.2,X.height+=.2):X.r0&&(X.r0-=.5,X.r1+=.5)),this._clipShapeForSymbol=X,y&&h.type===r.type&&Y===this._step?(k&&!b?b=this._newPolygon(c,P,r,M):b&&!k&&(S.remove(b),b=this._polygon=null),S.setClipPath(n0(r,!1,e)),R&&p.updateData(i,{isIgnore:F,clipShape:X}),i.eachItemGraphicEl(function(ye){ye.stopAnimation(!0)}),iM(this._stackedOnPoints,P)&&iM(this._points,c)||(M?this._updateAnimation(i,P,r,n,Y,O):(Y&&(c=Mg(c,r,Y),P=Mg(P,r,Y)),y.setShape({points:c}),b&&b.setShape({points:c,stackedOnPoints:P})))):(R&&p.updateData(i,{isIgnore:F,clipShape:X}),Y&&(c=Mg(c,r,Y),P=Mg(P,r,Y)),y=this._newPolyline(c,r,M),k&&(b=this._newPolygon(c,P,r,M)),S.setClipPath(n0(r,!0,e)));var Q=function(ye,xe){var Te=ye.getVisual("visualMeta");if(Te&&Te.length&&ye.count()&&"cartesian2d"===xe.type){for(var Ee,Ve,Be=Te.length-1;0<=Be;Be--){var _t=ye.getDimensionInfo(ye.dimensions[Te[Be].dimension]);if("x"===(Ee=_t&&_t.coordDim)||"y"===Ee){Ve=Te[Be];break}}if(Ve){var wt=xe.getAxis(Ee),Lt=Kt(Ve.stops,function(Ko){return{coord:wt.toGlobalCoord(wt.dataToCoord(Ko.value)),color:Ko.color}}),Ht=Lt.length,Ln=Ve.outerColors.slice();Ht&&Lt[0].coord>Lt[Ht-1].coord&&(Lt.reverse(),Ln.reverse());var Ft=Lt[0].coord-10,Yn=Lt[Ht-1].coord+10,or=Yn-Ft;if(or<.001)return"transparent";me(Lt,function(Ko){Ko.offset=(Ko.coord-Ft)/or}),Lt.push({offset:Ht?Lt[Ht-1].offset:.5,color:Ln[1]||"transparent"}),Lt.unshift({offset:Ht?Lt[0].offset:.5,color:Ln[0]||"transparent"});var Tr=new fh(0,0,0,0,Lt,!0);return Tr[Ee]=Ft,Tr[Ee+"2"]=Yn,Tr}}}(i,r)||i.getVisual("color");y.useStyle(un(s.getLineStyle(),{fill:"none",stroke:Q,lineJoin:"bevel"}));var ne=e.get("smooth");if(ne=t0(e.get("smooth")),y.setShape({smooth:ne,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")}),b){var le=i.getCalculationInfo("stackedOnSeries"),ce=0;b.useStyle(un(l.getAreaStyle(),{fill:Q,opacity:.7,lineJoin:"bevel"})),le&&(ce=t0(le.get("smooth"))),b.setShape({smooth:ne,stackedOnSmooth:ce,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")})}this._data=i,this._coordSys=r,this._stackedOnPoints=P,this._points=c,this._step=Y,this._valueOrigin=O},dispose:function(){},highlight:function(e,t,n,r){var o=e.getData(),i=Ai(o,r);if(!(i instanceof Array)&&null!=i&&0<=i){var s=o.getItemGraphicEl(i);if(!s){var l=o.getItemLayout(i);if(!l||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l[0],l[1]))return;(s=new Dp(o,i)).position=l,s.setZ(e.get("zlevel"),e.get("z")),s.ignore=isNaN(l[0])||isNaN(l[1]),s.__temp=!0,o.setItemGraphicEl(i,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else Ju.prototype.highlight.call(this,e,t,n,r)},downplay:function(e,t,n,r){var o=e.getData(),i=Ai(o,r);if(null!=i&&0<=i){var s=o.getItemGraphicEl(i);s&&(s.__temp?(o.setItemGraphicEl(i,null),this.group.remove(s)):s.downplay())}else Ju.prototype.downplay.call(this,e,t,n,r)},_newPolyline:function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new vC({shape:{points:e},silent:!0,z2:10}),this._lineGroup.add(t),this._polyline=t},_newPolygon:function(e,t){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new qf({shape:{points:e,stackedOnPoints:t},silent:!0}),this._lineGroup.add(n),this._polygon=n},_updateAnimation:function(e,t,n,r,o,i){var s=this._polyline,l=this._polygon,c=e.hostModel,f=function(P,R,F,G,X,Y,Q,ne){for(var le=function(_n,Or){var ni=[];return Or.diff(_n).add(function(xi){ni.push({cmd:"+",idx:xi})}).update(function(xi,ga){ni.push({cmd:"=",idx:ga,idx1:xi})}).remove(function(xi){ni.push({cmd:"-",idx:xi})}).execute(),ni}(P,R),ce=[],ye=[],xe=[],Te=[],Ee=[],Ve=[],Be=[],nt=I1(X,R,Q),bt=I1(Y,P,ne),_t=0;_t<le.length;_t++){var wt=le[_t],Lt=!0;switch(wt.cmd){case"=":var Ht=P.getItemLayout(wt.idx),Ln=R.getItemLayout(wt.idx1);(isNaN(Ht[0])||isNaN(Ht[1]))&&(Ht=Ln.slice()),ce.push(Ht),ye.push(Ln),xe.push(F[wt.idx]),Te.push(G[wt.idx1]),Be.push(R.getRawIndex(wt.idx1));break;case"+":var Ft=wt.idx;ce.push(X.dataToPoint([R.get(nt.dataDimsForPoint[0],Ft),R.get(nt.dataDimsForPoint[1],Ft)])),ye.push(R.getItemLayout(Ft).slice()),xe.push(Ey(nt,X,R,Ft)),Te.push(G[Ft]),Be.push(R.getRawIndex(Ft));break;case"-":var Yn=P.getRawIndex(Ft=wt.idx);Yn!==Ft?(ce.push(P.getItemLayout(Ft)),ye.push(Y.dataToPoint([P.get(bt.dataDimsForPoint[0],Ft),P.get(bt.dataDimsForPoint[1],Ft)])),xe.push(F[Ft]),Te.push(Ey(bt,Y,P,Ft)),Be.push(Yn)):Lt=!1}Lt&&(Ee.push(wt),Ve.push(Ve.length))}Ve.sort(function(_n,Or){return Be[_n]-Be[Or]});var or=[],Tr=[],Ko=[],Lo=[],Nr=[];for(_t=0;_t<Ve.length;_t++)or[_t]=ce[Ft=Ve[_t]],Tr[_t]=ye[Ft],Ko[_t]=xe[Ft],Lo[_t]=Te[Ft],Nr[_t]=Ee[Ft];return{current:or,next:Tr,stackedOnCurrent:Ko,stackedOnNext:Lo,status:Nr}}(this._data,e,this._stackedOnPoints,t,this._coordSys,n,this._valueOrigin,i),h=f.current,p=f.stackedOnCurrent,y=f.next,b=f.stackedOnNext;if(o&&(h=Mg(f.current,n,o),p=Mg(f.stackedOnCurrent,n,o),y=Mg(f.next,n,o),b=Mg(f.stackedOnNext,n,o)),3e3<P1(h,y)||l&&3e3<P1(p,b))return s.setShape({points:y}),void(l&&l.setShape({points:y,stackedOnPoints:b}));s.shape.__points=f.current,s.shape.points=h,so(s,{shape:{points:y}},c),l&&(l.setShape({points:h,stackedOnPoints:p}),so(l,{shape:{points:y,stackedOnPoints:b}},c));for(var S=[],M=f.status,k=0;k<M.length;k++)if("="===M[k].cmd){var O=e.getItemGraphicEl(M[k].idx1);O&&S.push({el:O,ptIdx:k})}s.animators&&s.animators.length&&s.animators[0].during(function(){for(var P=0;P<S.length;P++)S[P].el.attr("position",s.shape.__points[S[P].ptIdx])})},remove:function(e){var t=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(r,o){r.__temp&&(t.remove(r),n.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var aM={average:function(e){for(var t=0,n=0,r=0;r<e.length;r++)isNaN(e[r])||(t+=e[r],n++);return 0===n?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}};function sM(e){return this._axes[e]}function N1(e){this._axes={},this._dimList=[],this.name=e||""}function L1(e){N1.call(this,e)}function Ny(e,t,n,r,o){cu.call(this,e,t,n),this.type=r||"value",this.position=o||"bottom"}N1.prototype={constructor:N1,type:"cartesian",getAxis:function(e){return this._axes[e]},getAxes:function(){return Kt(this._dimList,sM,this)},getAxesByScale:function(e){return e=e.toLowerCase(),_r(this.getAxes(),function(t){return t.scale.type===e})},addAxis:function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},dataToCoord:function(e){return this._dataCoordConvert(e,"dataToCoord")},coordToData:function(e){return this._dataCoordConvert(e,"coordToData")},_dataCoordConvert:function(e,t){for(var n=this._dimList,r=e instanceof Array?[]:{},o=0;o<n.length;o++){var i=n[o];r[i]=this._axes[i][t](e[i])}return r}},L1.prototype={constructor:L1,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(e){var t=this.getAxis("x"),n=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&n.contain(n.toLocalCoord(e[1]))},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},dataToPoint:function(e,t,n){var r=this.getAxis("x"),o=this.getAxis("y");return(n=n||[])[0]=r.toGlobalCoord(r.dataToCoord(e[0])),n[1]=o.toGlobalCoord(o.dataToCoord(e[1])),n},clampData:function(e,t){var n=this.getAxis("x").scale,r=this.getAxis("y").scale,o=n.getExtent(),i=r.getExtent(),s=n.parse(e[0]),l=r.parse(e[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(o[0],o[1]),s),Math.max(o[0],o[1])),t[1]=Math.min(Math.max(Math.min(i[0],i[1]),l),Math.max(i[0],i[1])),t},pointToData:function(e,t){var n=this.getAxis("x"),r=this.getAxis("y");return(t=t||[])[0]=n.coordToData(n.toLocalCoord(e[0])),t[1]=r.coordToData(r.toLocalCoord(e[1])),t},getOtherAxis:function(e){return this.getAxis("x"===e.dim?"y":"x")},getArea:function(){var e=this.getAxis("x").getGlobalExtent(),t=this.getAxis("y").getGlobalExtent(),n=Math.min(e[0],e[1]),r=Math.min(t[0],t[1]);return new Vo(n,r,Math.max(e[0],e[1])-n,Math.max(t[0],t[1])-r)}},Rn(L1,N1),Ny.prototype={constructor:Ny,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},getGlobalExtent:function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},toLocalCoord:null,toGlobalCoord:null},Rn(Ny,cu);var yC={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},df={};function r0(e,t,n,r){me(dD,function(o){t.extend({type:e+"Axis."+o,mergeDefaultAndTheme:function(i,s){var l=this.layoutMode,c=l?cp(i):{};Sn(i,s.getTheme().get(o+"Axis")),Sn(i,this.getDefaultOption()),i.type=n(e,i),l&&Bf(i,c,l)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=Sy.createByAxisModel(this))},getCategories:function(i){var s=this.option;if("category"===s.type)return i?s.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:xr([{},df[o+"Axis"],r],!0)})}),Go.registerSubTypeDefaulter(e+"Axis",ar(n,e))}df.categoryAxis=Sn({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},yC),df.valueAxis=Sn({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},yC),df.timeAxis=un({scale:!0,min:"dataMin",max:"dataMax"},df.valueAxis),df.logAxis=un({scale:!0,logBase:10},df.valueAxis);var dD=["value","category","time","log"],o0=Go.extend({type:"cartesian2dAxis",axis:null,init:function(){o0.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){o0.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){o0.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function rx(e,t){return t.type||(t.data?"category":"value")}Sn(o0.prototype,Cg);var uM={offset:0};function B1(e,t){return e.getCoordSysModel()===t}function ox(e,t,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(e,t,n),this.model=e}r0("x",o0,rx,uM),r0("y",o0,rx,uM),Go.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var Rl=ox.prototype;function yw(e,t,n,r){n.getAxesOnZeroOf=function(){return o?[o]:[]};var o,i=e[t],s=n.model,l=s.get("axisLine.onZero"),c=s.get("axisLine.onZeroAxisIndex");if(l){if(null!=c)i0(i[c])&&(o=i[c]);else for(var f in i)if(i.hasOwnProperty(f)&&i0(i[f])&&!r[h(i[f])]){o=i[f];break}o&&(r[h(o)]=!0)}function h(p){return p.dim+"_"+p.index}}function i0(e){return e&&"category"!==e.type&&"time"!==e.type&&function(t){var n=t.scale.getExtent(),r=n[0],o=n[1];return!(0<r&&0<o||r<0&&o<0)}(e)}Rl.type="grid",Rl.axisPointerEnabled=!0,Rl.getRect=function(){return this._rect},Rl.update=function(e,t){var n=this._axesMap;this._updateScale(e,this.model),me(n.x,function(o){oc(o.scale,o.model)}),me(n.y,function(o){oc(o.scale,o.model)});var r={};me(n.x,function(o){yw(n,"y",o,r)}),me(n.y,function(o){yw(n,"x",o,r)}),this.resize(this.model,t)},Rl.resize=function(e,t,n){var r=No(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});this._rect=r;var o=this._axesList;function i(){me(o,function(s){var h,p,y,b,l=s.isHorizontal(),c=l?[0,r.width]:[0,r.height],f=s.inverse?1:0;s.setExtent(c[f],c[1-f]),p=l?r.x:r.y,y=(h=s).getExtent(),b=y[0]+y[1],h.toGlobalCoord="x"===h.dim?function(S){return S+p}:function(S){return b-S+p},h.toLocalCoord="x"===h.dim?function(S){return S-p}:function(S){return b-S+p}})}i(),!n&&e.get("containLabel")&&(me(o,function(s){if(!s.model.get("axisLabel.inside")){var l=function(h){var y=h.scale;if(h.model.get("axisLabel.show")&&!y.isBlank()){var b,S,M="category"===h.type,k=y.getExtent();S=M?y.count():(b=y.getTicks()).length;var O,P,F,G,X,Y,Q,ne,le=h.getLabelModel(),ce=Cc(h),ye=1;40<S&&(ye=Math.ceil(S/40));for(var xe=0;xe<S;xe+=ye){var Te=ce(b?b[xe]:k[0]+xe),Ve=(P=le.getTextRect(Te),F=(le.get("rotate")||0)*Math.PI/180,Y=(G=P.plain()).height,Q=(X=G.width)*Math.abs(Math.cos(F))+Math.abs(Y*Math.sin(F)),ne=X*Math.abs(Math.sin(F))+Math.abs(Y*Math.cos(F)),new Vo(G.x,G.y,Q,ne));O?O.union(Ve):O=Ve}return O}}(s);if(l){var c=s.isHorizontal()?"height":"width",f=s.model.get("axisLabel.margin");r[c]-=l[c]+f,"top"===s.position?r.y+=l.height+f:"left"===s.position&&(r.x+=l.width+f)}}}),i())},Rl.getAxis=function(e,t){var n=this._axesMap[e];if(null!=n){if(null==t)for(var r in n)if(n.hasOwnProperty(r))return n[r];return n[t]}},Rl.getAxes=function(){return this._axesList.slice()},Rl.getCartesian=function(e,t){if(null!=e&&null!=t)return this._coordsMap["x"+e+"y"+t];xt(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var r=0,o=this._coordsList;r<o.length;r++)if(o[r].getAxis("x").index===e||o[r].getAxis("y").index===t)return o[r]},Rl.getCartesians=function(){return this._coordsList.slice()},Rl.convertToPixel=function(e,t,n){var r=this._findConvertTarget(e,t);return r.cartesian?r.cartesian.dataToPoint(n):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(n)):null},Rl.convertFromPixel=function(e,t,n){var r=this._findConvertTarget(e,t);return r.cartesian?r.cartesian.pointToData(n):r.axis?r.axis.coordToData(r.axis.toLocalCoord(n)):null},Rl._findConvertTarget=function(e,t){var n,r,o=t.seriesModel,i=t.xAxisModel||o&&o.getReferringComponents("xAxis")[0],s=t.yAxisModel||o&&o.getReferringComponents("yAxis")[0],l=t.gridModel;return o?dn(this._coordsList,n=o.coordinateSystem)<0&&(n=null):i&&s?n=this.getCartesian(i.componentIndex,s.componentIndex):i?r=this.getAxis("x",i.componentIndex):s?r=this.getAxis("y",s.componentIndex):l&&l.coordinateSystem===this&&(n=this._coordsList[0]),{cartesian:n,axis:r}},Rl.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},Rl._initCartesian=function(e,t,n){var r={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},i={x:0,y:0};if(t.eachComponent("xAxis",s("x"),this),t.eachComponent("yAxis",s("y"),this),!i.x||!i.y)return this._axesMap={},void(this._axesList=[]);function s(l){return function(c,f){if(B1(c,e)){var h=c.get("position");"x"===l?"top"!==h&&"bottom"!==h&&(h=r.bottom?"top":"bottom"):"left"!==h&&"right"!==h&&(h=r.left?"right":"left"),r[h]=!0;var p=new Ny(l,Sg(c),[0,0],c.get("type"),h);p.onBand="category"===p.type&&c.get("boundaryGap"),p.inverse=c.get("inverse"),(c.axis=p).model=c,p.grid=this,p.index=f,this._axesList.push(p),o[l][f]=p,i[l]++}}}me((this._axesMap=o).x,function(l,c){me(o.y,function(f,h){var p="x"+c+"y"+h,y=new L1(p);y.grid=this,y.model=e,this._coordsMap[p]=y,this._coordsList.push(y),y.addAxis(l),y.addAxis(f)},this)},this)},Rl._updateScale=function(e,t){function n(r,o){me(r.mapDimension(o.dim,!0),function(i){o.scale.unionExtentFromData(r,qb(r,i))})}me(this._axesList,function(r){r.scale.setExtent(1/0,-1/0)}),e.eachSeries(function(r){if(ix(r)){var o=lM(r),i=o[0],s=o[1];if(!B1(i,t)||!B1(s,t))return;var l=this.getCartesian(i.componentIndex,s.componentIndex),c=r.getData(),f=l.getAxis("x"),h=l.getAxis("y");"list"===c.type&&(n(c,f),n(c,h))}},this)},Rl.getTooltipAxes=function(e){var t=[],n=[];return me(this.getCartesians(),function(r){var o=null!=e&&"auto"!==e?r.getAxis(e):r.getBaseAxis(),i=r.getOtherAxis(o);dn(t,o)<0&&t.push(o),dn(n,i)<0&&n.push(i)}),{baseAxes:t,otherAxes:n}};var a0=["xAxis","yAxis"];function lM(e){return Kt(a0,function(t){return e.getReferringComponents(t)[0]})}function ix(e){return"cartesian2d"===e.get("coordinateSystem")}function ic(e,t){this.opt=t,this.axisModel=e,un(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new pn;var n=new pn({position:t.position.slice(),rotation:t.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n}ox.create=function(e,t){var n=[];return e.eachComponent("grid",function(r,o){var i=new ox(r,e,t);i.name="grid_"+o,i.resize(r,t,!0),r.coordinateSystem=i,n.push(i)}),e.eachSeries(function(r){if(ix(r)){var o=lM(r),i=o[0],s=o[1],l=i.getCoordSysModel().coordinateSystem;r.coordinateSystem=l.getCartesian(i.componentIndex,s.componentIndex)}}),n},ox.dimensions=ox.prototype.dimensions=L1.prototype.dimensions,ku.register("cartesian2d",ox);var Xf=Math.PI;ic.prototype={constructor:ic,hasBuilder:function(e){return!!cM[e]},add:function(e){cM[e].call(this)},getGroup:function(){return this.group}};var cM={axisLine:function(){var e=this.opt,t=this.axisModel;if(t.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),r=this._transform,o=[n[0],0],i=[n[1],0];r&&(wn(o,o,r),wn(i,i,r));var s=Fn({lineCap:"round"},t.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new Yi({anid:"line",subPixelOptimize:!0,shape:{x1:o[0],y1:o[1],x2:i[0],y2:i[1]},style:s,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1}));var l=t.get("axisLine.symbol"),c=t.get("axisLine.symbolSize"),f=t.get("axisLine.symbolOffset")||0;if("number"==typeof f&&(f=[f,f]),null!=l){"string"==typeof l&&(l=[l,l]),"string"!=typeof c&&"number"!=typeof c||(c=[c,c]);var h=c[0],p=c[1];me([{rotate:e.rotation+Math.PI/2,offset:f[0],r:0},{rotate:e.rotation-Math.PI/2,offset:f[1],r:Math.sqrt((o[0]-i[0])*(o[0]-i[0])+(o[1]-i[1])*(o[1]-i[1]))}],function(y,b){if("none"!==l[b]&&null!=l[b]){var S=Zc(l[b],-h/2,-p/2,h,p,s.stroke,!0),M=y.r+y.offset,k=[o[0]+M*Math.cos(e.rotation),o[1]-M*Math.sin(e.rotation)];S.attr({rotation:y.rotate,position:k,silent:!0,z2:11}),this.group.add(S)}},this)}}},axisTickLabel:function(){var e=this.axisModel,t=this.opt,n=function(r,o,i){var s=o.axis,l=o.getModel("axisTick");if(l.get("show")&&!s.scale.isBlank()){for(var c=l.getModel("lineStyle"),f=i.tickDirection*l.get("length"),h=_w(s.getTicksCoords(),r._transform,f,un(c.getLineStyle(),{stroke:o.get("axisLine.lineStyle.color")}),"ticks"),p=0;p<h.length;p++)r.group.add(h[p]);return h}}(this,e,t);(function(r,o,i){if(!hw(r.axis)){var s=r.get("axisLabel.showMinLabel"),l=r.get("axisLabel.showMaxLabel"),c=(o=o||[])[0],f=o[1],h=o[o.length-1],p=o[o.length-2],y=(i=i||[])[0],b=i[1],S=i[i.length-1],M=i[i.length-2];!1===s?(ff(c),ff(y)):xw(c,f)&&(s?(ff(f),ff(b)):(ff(c),ff(y))),!1===l?(ff(h),ff(S)):xw(p,h)&&(l?(ff(p),ff(M)):(ff(h),ff(S)))}})(e,function(r,o,i){var s=o.axis;if(pe(i.axisLabelShow,o.get("axisLabel.show"))&&!s.scale.isBlank()){var l=o.getModel("axisLabel"),c=l.get("margin"),f=s.getViewLabels(),h=(pe(i.labelRotate,l.get("rotate"))||0)*Xf/180,p=Eh(i.rotation,h,i.labelDirection),y=o.getCategories&&o.getCategories(!0),b=[],S=bw(o),M=o.get("triggerEvent");return me(f,function(k,O){var P=k.tickValue,R=k.formattedLabel,F=k.rawLabel,G=l;y&&y[P]&&y[P].textStyle&&(G=new $o(y[P].textStyle,l,o.ecModel));var X=G.getTextColor()||o.get("axisLine.lineStyle.color"),Y=[s.dataToCoord(P),i.labelOffset+i.labelDirection*c],Q=new vo({anid:"label_"+P,position:Y,rotation:p.rotation,silent:S,z2:10});Ya(Q.style,G,{text:R,textAlign:G.getShallow("align",!0)||p.textAlign,textVerticalAlign:G.getShallow("verticalAlign",!0)||G.getShallow("baseline",!0)||p.textVerticalAlign,textFill:"function"==typeof X?X("category"===s.type?F:"value"===s.type?P+"":P,O):X}),M&&(Q.eventData=z1(o),Q.eventData.targetType="axisLabel",Q.eventData.value=F),r._dumbGroup.add(Q),Q.updateTransform(),b.push(Q),r.group.add(Q),Q.decomposeTransform()}),b}}(this,e,t),n),function(r,o,i){var s=o.axis,l=o.getModel("minorTick");if(l.get("show")&&!s.scale.isBlank()){var c=s.getMinorTicksCoords();if(c.length)for(var f=l.getModel("lineStyle"),h=i.tickDirection*l.get("length"),p=un(f.getLineStyle(),un(o.getModel("axisTick").getLineStyle(),{stroke:o.get("axisLine.lineStyle.color")})),y=0;y<c.length;y++)for(var b=_w(c[y],r._transform,h,p,"minorticks_"+y),S=0;S<b.length;S++)r.group.add(b[S])}}(this,e,t)},axisName:function(){var Y,ne,ce,ye,xe,Te,e=this.opt,t=this.axisModel,n=pe(e.axisName,t.get("name"));if(n){var r,o,i=t.get("nameLocation"),s=e.nameDirection,l=t.getModel("nameTextStyle"),c=t.get("nameGap")||0,f=this.axisModel.axis.getExtent(),h=f[0]>f[1]?-1:1,p=["start"===i?f[0]-h*c:"end"===i?f[1]+h*c:(f[0]+f[1])/2,ax(i)?e.labelOffset+s*c:0],y=t.get("nameRotate");null!=y&&(y=y*Xf/180),ax(i)?r=Eh(e.rotation,null!=y?y:e.rotation,s):(Y=i,ne=f,ye=ry((y||0)-e.rotation),xe=ne[0]>ne[1],Te="start"===Y&&!xe||"start"!==Y&&xe,r={rotation:ye,textAlign:Qd(ye-Xf/2)?(ce=Te?"bottom":"top","center"):Qd(ye-1.5*Xf)?(ce=Te?"top":"bottom","center"):(ce="middle",ye<1.5*Xf&&Xf/2<ye?Te?"left":"right":Te?"right":"left"),textVerticalAlign:ce},null!=(o=e.axisNameAvailableWidth)&&(o=Math.abs(o/Math.sin(r.rotation)),isFinite(o)||(o=null)));var b=l.getFont(),S=t.get("nameTruncate",!0)||{},M=S.ellipsis,k=pe(e.nameTruncateMaxWidth,S.maxWidth,o),O=null!=M&&null!=k?X_(n,k,b,M,{minChar:2,placeholder:S.placeholder}):n,P=t.get("tooltip",!0),R=t.mainType,F={componentType:R,name:n,$vars:["name"]};F[R+"Index"]=t.componentIndex;var G=new vo({anid:"name",__fullText:n,__truncatedText:O,position:p,rotation:r.rotation,silent:bw(t),z2:1,tooltip:P&&P.show?Fn({content:n,formatter:function(){return n},formatterParams:F},P):null});Ya(G.style,l,{text:O,textFont:b,textFill:l.getTextColor()||t.get("axisLine.lineStyle.color"),textAlign:l.get("align")||r.textAlign,textVerticalAlign:l.get("verticalAlign")||r.textVerticalAlign}),t.get("triggerEvent")&&(G.eventData=z1(t),G.eventData.targetType="axisName",G.eventData.name=n),this._dumbGroup.add(G),G.updateTransform(),this.group.add(G),G.decomposeTransform()}}},z1=ic.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},Eh=ic.innerTextLayout=function(e,t,n){var r,o=ry(t-e);return{rotation:o,textAlign:Qd(o)?(r=0<n?"top":"bottom","center"):Qd(o-Xf)?(r=0<n?"bottom":"top","center"):(r="middle",0<o&&o<Xf?0<n?"right":"left":0<n?"left":"right"),textVerticalAlign:r}},bw=ic.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)};function ff(e){e&&(e.ignore=!0)}function xw(e,t){var n=e&&e.getBoundingRect().clone(),r=t&&t.getBoundingRect().clone();if(n&&r){var o=Zs([]);return Ar(o,o,-e.rotation),n.applyTransform(Eu([],o,e.getLocalTransform())),r.applyTransform(Eu([],o,t.getLocalTransform())),n.intersect(r)}}function ax(e){return"middle"===e||"center"===e}function _w(e,t,n,r,o){for(var i=[],s=[],l=[],c=0;c<e.length;c++){var f=e[c].coord;s[0]=f,l[s[1]=0]=f,l[1]=n,t&&(wn(s,s,t),wn(l,l,t));var h=new Yi({anid:o+"_"+e[c].tickValue,subPixelOptimize:!0,shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:r,z2:2,silent:!0});i.push(h)}return i}var Tm=me,sx=ar;function F1(e,t){return"all"===e||rn(e)&&0<=dn(e,t)||e===t}function us(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Ip(e)]}function By(e){return!!e.get("handle.show")}function Ip(e){return e.type+"||"+e.id}var vl=xs({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(e,t,n,r){this.axisPointerClass&&function(o){var i=us(o);if(i){var s=i.axisPointerModel,l=i.axis.scale,c=s.option,f=s.get("status"),h=s.get("value");null!=h&&(h=l.parse(h));var p=By(s);null==f&&(c.status=p?"show":"hide");var y=l.getExtent().slice();y[0]>y[1]&&y.reverse(),(null==h||h>y[1])&&(h=y[1]),h<y[0]&&(h=y[0]),c.value=h,p&&(c.status=i.axis.scale.isBlank()?"hide":"show")}}(e),vl.superApply(this,"render",arguments),s0(this,e,0,n,0,!0)},updateAxisPointer:function(e,t,n,r,o){s0(this,e,0,n,0,!1)},remove:function(e,t){var n=this._axisPointer;n&&n.remove(t),vl.superApply(this,"remove",arguments)},dispose:function(e,t){zy(this,t),vl.superApply(this,"dispose",arguments)}});function s0(e,t,n,r,o,i){var f,s=vl.getAxisPointerClass(e.axisPointerClass);if(s){var l=(f=us(t))&&f.axisPointerModel;l?(e._axisPointer||(e._axisPointer=new s)).render(t,l,r,i):zy(e,r)}}function zy(e,t,n){var r=e._axisPointer;r&&r.dispose(t,n),e._axisPointer=null}var ww=[];function Sw(e,t,n){n=n||{};var r=e.coordinateSystem,o=t.axis,i={},s=o.getAxesOnZeroOf()[0],l=o.position,c=s?"onZero":l,f=o.dim,h=r.getRect(),p=[h.x,h.x+h.width,h.y,h.y+h.height],y={left:0,right:1,top:0,bottom:1,onZero:2},b=t.get("offset")||0,S="x"===f?[p[2]-b,p[3]+b]:[p[0]-b,p[1]+b];if(s){var M=s.toGlobalCoord(s.dataToCoord(0));S[y.onZero]=Math.max(Math.min(M,S[1]),S[0])}i.position=["y"===f?S[y[c]]:p[0],"x"===f?S[y[c]]:p[3]],i.rotation=Math.PI/2*("x"===f?0:1),i.labelDirection=i.tickDirection=i.nameDirection={top:-1,bottom:1,left:-1,right:1}[l],i.labelOffset=s?S[y[l]]-S[y.onZero]:0,t.get("axisTick.inside")&&(i.tickDirection=-i.tickDirection),pe(n.labelInside,t.get("axisLabel.inside"))&&(i.labelDirection=-i.labelDirection);var k=t.get("axisLabel.rotate");return i.labelRotate="top"===c?-k:k,i.z2=1,i}function V1(e,t,n,r){var o=n.axis;if(!o.scale.isBlank()){var i=n.getModel("splitArea"),s=i.getModel("areaStyle"),l=s.get("color"),c=r.coordinateSystem.getRect(),f=o.getTicksCoords({tickModel:i,clamp:!0});if(f.length){var h=l.length,p=e.__splitAreaColors,y=ut(),b=0;if(p)for(var S=0;S<f.length;S++){var M=p.get(f[S].tickValue);if(null!=M){b=(M+(h-1)*S)%h;break}}var k=o.toGlobalCoord(f[0].coord),O=s.getAreaStyle();for(l=rn(l)?l:[l],S=1;S<f.length;S++){var P,R,F,G,X=o.toGlobalCoord(f[S].coord);k=o.isHorizontal()?(R=c.y,G=c.height,(P=k)+(F=X-P)):(P=c.x,F=c.width,(R=k)+(G=X-R));var Y=f[S-1].tickValue;null!=Y&&y.set(Y,b),t.add(new ei({anid:null!=Y?"area_"+Y:null,shape:{x:P,y:R,width:F,height:G},style:un({fill:l[b]},O),silent:!0})),b=(b+1)%h}e.__splitAreaColors=y}}}function dM(e){e.__splitAreaColors=null}vl.registerAxisPointerClass=function(e,t){ww[e]=t},vl.getAxisPointerClass=function(e){return e&&ww[e]};var fM=["axisLine","axisTickLabel","axisName"],hM=["splitArea","splitLine","minorSplitLine"],Cw=vl.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(e,t,n,r){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new pn,this.group.add(this._axisGroup),e.get("show")){var i=e.getCoordSysModel(),s=Sw(i,e),l=new ic(e,s);me(fM,l.add,l),this._axisGroup.add(l.getGroup()),me(hM,function(c){e.get(c+".show")&&this["_"+c](e,i)},this),Q0(o,this._axisGroup,e),Cw.superCall(this,"render",e,t,n,r)}},remove:function(){dM(this)},_splitLine:function(e,t){var n=e.axis;if(!n.scale.isBlank()){var r=e.getModel("splitLine"),o=r.getModel("lineStyle"),i=o.get("color");i=rn(i)?i:[i];for(var s=t.coordinateSystem.getRect(),l=n.isHorizontal(),c=0,f=n.getTicksCoords({tickModel:r}),h=[],p=[],y=o.getLineStyle(),b=0;b<f.length;b++){var S=n.toGlobalCoord(f[b].coord);l?(h[0]=S,h[1]=s.y,p[0]=S,p[1]=s.y+s.height):(h[0]=s.x,h[1]=S,p[0]=s.x+s.width,p[1]=S);var M=c++%i.length;this._axisGroup.add(new Yi({anid:null!=f[b].tickValue?"line_"+f[b].tickValue:null,subPixelOptimize:!0,shape:{x1:h[0],y1:h[1],x2:p[0],y2:p[1]},style:un({stroke:i[M]},y),silent:!0}))}}},_minorSplitLine:function(e,t){var n=e.axis,r=e.getModel("minorSplitLine").getModel("lineStyle"),o=t.coordinateSystem.getRect(),i=n.isHorizontal(),s=n.getMinorTicksCoords();if(s.length)for(var l=[],c=[],f=r.getLineStyle(),h=0;h<s.length;h++)for(var p=0;p<s[h].length;p++){var y=n.toGlobalCoord(s[h][p].coord);i?(l[0]=y,l[1]=o.y,c[0]=y,c[1]=o.y+o.height):(l[0]=o.x,l[1]=y,c[0]=o.x+o.width,c[1]=y),this._axisGroup.add(new Yi({anid:"minor_line_"+s[h][p].tickValue,subPixelOptimize:!0,shape:{x1:l[0],y1:l[1],x2:c[0],y2:c[1]},style:f,silent:!0}))}},_splitArea:function(e,t){V1(this,this._axisGroup,e,t)}});Cw.extend({type:"xAxis"}),Cw.extend({type:"yAxis"}),xs({type:"grid",render:function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new ei({shape:e.coordinateSystem.getRect(),style:un({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))}}),ra(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})}),Ti(Ap("line","circle","line")),oa(Ry("line")),fa(Gf.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(e,t,n){var r=e.getData(),o=e.get("sampling"),i=e.coordinateSystem;if("cartesian2d"===i.type&&o){var s,l=i.getBaseAxis(),c=i.getOtherAxis(l),f=l.getExtent(),h=Math.abs(f[1]-f[0]),p=Math.round(r.count()/h);1<p&&("string"==typeof o?s=aM[o]:"function"==typeof o&&(s=o),s&&e.setData(r.downSample(r.mapDimension(c.dim),1/p,s,cD)))}}});var Fy=ba.extend({type:"series.__base_bar__",getInitialData:function(e,t){return Sp(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(e){var t=this.coordinateSystem;if(t){var n=t.dataToPoint(t.clampData(e)),r=this.getData(),o=r.getLayout("offset"),i=r.getLayout("size");return n[t.getBaseAxis().isHorizontal()?0:1]+=o+i/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});function ux(e,t,n,r,o,i){Cu(e,t,n.getModel("label"),n.getModel("emphasis.label"),{labelFetcher:o,labelDataIndex:i,defaultText:k1(o.getData(),i),isRectText:!0,autoColor:r}),bC(e),bC(t)}function bC(e,t){"outside"===e.textPosition&&(e.textPosition=t)}Fy.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return e<t&&(e=t),e},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});var gM=Yo([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),mM={getBarItemStyle:function(e){var t=gM(this,e);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(t.lineDash=n)}return t}},xC=Xu({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(e,t){var n=t.cx,r=t.cy,o=Math.max(t.r0||0,0),i=Math.max(t.r,0),s=.5*(i-o),l=o+s,c=t.startAngle,f=t.endAngle,h=t.clockwise,p=Math.cos(c),y=Math.sin(c),b=Math.cos(f),S=Math.sin(f);(h?f-c<2*Math.PI:c-f<2*Math.PI)&&(e.moveTo(p*o+n,y*o+r),e.arc(p*l+n,y*l+r,s,-Math.PI+c,c,!h)),e.arc(n,r,i,c,f,!h),e.moveTo(b*i+n,S*i+r),e.arc(b*l+n,S*l+r,s,f-2*Math.PI,f-Math.PI,!h),0!==o&&(e.arc(n,r,o,f,c,h),e.moveTo(p*o+n,S*o+r)),e.closePath()}}),Id=["itemStyle","barBorderWidth"],ac=[0,0];Fn($o.prototype,mM),Is({type:"bar",render:function(e,t,n){this._updateDrawMode(e);var r=e.get("coordinateSystem");return"cartesian2d"!==r&&"polar"!==r||(this._isLargeDraw?this._renderLarge(e,t,n):this._renderNormal(e,t,n)),this.group},incrementalPrepareRender:function(e,t,n){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,n,r){this._incrementalRenderLarge(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e,t,n){var r,o=this.group,i=e.getData(),s=this._data,l=e.coordinateSystem,c=l.getBaseAxis();"cartesian2d"===l.type?r=c.isHorizontal():"polar"===l.type&&(r="angle"===c.dim);var f=e.isAnimationEnabled()?e:null,h=e.get("clip",!0),p=function(G,X){var Y=G.getArea&&G.getArea();if("cartesian2d"===G.type){var Q=G.getBaseAxis();if("category"!==Q.type||!Q.onBand){var ne=X.getLayout("bandWidth");Q.isHorizontal()?(Y.x-=ne,Y.width+=2*ne):(Y.y-=ne,Y.height+=2*ne)}}return Y}(l,i);function y(G){var Q,X=cx[l.type](i,G),Y=new("polar"===(Q=l).type?oo:ei)({shape:Mw(r,X,Q),silent:!0,z2:0});return Y.useStyle(M.getBarItemStyle()),"cartesian2d"===l.type&&Y.setShape("r",k),O[G]=Y}o.removeClipPath();var b=e.get("roundCap",!0),S=e.get("showBackground",!0),M=e.getModel("backgroundStyle"),k=M.get("barBorderRadius")||0,O=[],P=this._backgroundEls||[];i.diff(s).add(function(G){var X=i.getItemModel(G),Y=cx[l.type](i,G,X);if(S&&y(G),i.hasValue(G)){if(h&&Op[l.type](p,Y))return void o.remove(Q);var Q=W1[l.type](G,Y,r,f,!1,b);i.setItemGraphicEl(G,Q),o.add(Q),U1(Q,i,G,X,Y,e,0,"polar"===l.type)}}).update(function(G,X){var Y=i.getItemModel(G),Q=cx[l.type](i,G,Y);if(S){var ne;0===P.length?ne=y(X):((ne=P[X]).useStyle(M.getBarItemStyle()),"cartesian2d"===l.type&&ne.setShape("r",k),O[G]=ne);var le=cx[l.type](i,G);so(ne,{shape:Mw(r,le,l)},f,G)}var ce=s.getItemGraphicEl(X);if(i.hasValue(G)){if(h&&Op[l.type](p,Q))return void o.remove(ce);ce?so(ce,{shape:Q},f,G):ce=W1[l.type](G,Q,r,f,!0,b),i.setItemGraphicEl(G,ce),o.add(ce),U1(ce,i,G,Y,Q,e,0,"polar"===l.type)}else o.remove(ce)}).remove(function(G){var X=s.getItemGraphicEl(G);"cartesian2d"===l.type?X&&G1(G,f,X):X&&j1(G,f,X)}).execute();var R=this._backgroundGroup||(this._backgroundGroup=new pn);R.removeAll();for(var F=0;F<O.length;++F)R.add(O[F]);o.add(R),this._backgroundEls=O,this._data=i},_renderLarge:function(e,t,n){this._clear(),pM(e,this.group);var r=e.get("clip",!0)?e0(e.coordinateSystem,!1,e):null;r?this.group.setClipPath(r):this.group.removeClipPath()},_incrementalRenderLarge:function(e,t){this._removeBackground(),pM(t,this.group,!0)},dispose:Pt,remove:function(e){this._clear(e)},_clear:function(e){var t=this.group,n=this._data;e&&e.get("animation")&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(r){"sector"===r.type?j1(r.dataIndex,e,r):G1(r.dataIndex,e,r)})):t.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}});var lx=Math.max,H1=Math.min,Op={cartesian2d:function(e,t){var n=t.width<0?-1:1,r=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var o=lx(t.x,e.x),i=H1(t.x+t.width,e.x+e.width),s=lx(t.y,e.y),l=H1(t.y+t.height,e.y+e.height);t.x=o,t.y=s,t.width=i-o,t.height=l-s;var c=t.width<0||t.height<0;return n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),c},polar:function(e,t){var n=t.r0<=t.r?1:-1;if(n<0){var r=t.r;t.r=t.r0,t.r0=r}r=H1(t.r,e.r);var o=lx(t.r0,e.r0),i=(t.r=r)-(t.r0=o)<0;return n<0&&(r=t.r,t.r=t.r0,t.r0=r),i}},W1={cartesian2d:function(e,t,n,r,o){var i=new ei({shape:Fn({},t),z2:1});if(i.name="item",r){var s=n?"height":"width",l={};i.shape[s]=0,l[s]=t[s],Jd[o?"updateProps":"initProps"](i,{shape:l},r,e)}return i},polar:function(e,t,n,r,o,i){var l=new(!n&&i?xC:oo)({shape:un({clockwise:t.startAngle<t.endAngle},t),z2:1});if(l.name="item",r){var c=n?"r":"endAngle",f={};l.shape[c]=n?0:t.startAngle,f[c]=t[c],Jd[o?"updateProps":"initProps"](l,{shape:f},r,e)}return l}};function G1(e,t,n){n.style.text=null,so(n,{shape:{width:0}},t,e,function(){n.parent&&n.parent.remove(n)})}function j1(e,t,n){n.style.text=null,so(n,{shape:{r:n.shape.r0}},t,e,function(){n.parent&&n.parent.remove(n)})}var cx={cartesian2d:function(e,t,n){var c,f,h,p,r=e.getItemLayout(t),o=n?(c=r,f=n.get(Id)||0,h=isNaN(c.width)?Number.MAX_VALUE:Math.abs(c.width),p=isNaN(c.height)?Number.MAX_VALUE:Math.abs(c.height),Math.min(f,h,p)):0,i=0<r.width?1:-1,s=0<r.height?1:-1;return{x:r.x+i*o/2,y:r.y+s*o/2,width:r.width-i*o,height:r.height-s*o}},polar:function(e,t,n){var r=e.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle}}};function u0(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}function U1(e,t,n,r,o,i,s,l){var c=t.getItemVisual(n,"color"),f=t.getItemVisual(n,"opacity"),h=t.getVisual("borderColor"),p=r.getModel("itemStyle"),y=r.getModel("emphasis.itemStyle").getBarItemStyle();l||e.setShape("r",p.get("barBorderRadius")||0),e.useStyle(un({stroke:u0(o)?"none":h,fill:u0(o)?"none":c,opacity:f},p.getBarItemStyle()));var b=r.getShallow("cursor");b&&e.attr("cursor",b),l||ux(e.style,y,r,c,i,n),u0(o)&&(y.fill=y.stroke="none"),ya(e,y)}var _C=Qr.extend({type:"largeBar",shape:{points:[]},buildPath:function(e,t){for(var n=t.points,r=this.__startPoint,o=this.__baseDimIdx,i=0;i<n.length;i+=2)r[o]=n[i+o],e.moveTo(r[0],r[1]),e.lineTo(n[i],n[i+1])}});function pM(e,t,n){var r=e.getData(),o=[],i=r.getLayout("valueAxisHorizontal")?1:0;o[1-i]=r.getLayout("valueAxisStart");var b,S,M,k,O,s=r.getLayout("largeDataIndices"),l=r.getLayout("barWidth"),c=e.getModel("backgroundStyle");if(e.get("showBackground",!0)){var f=r.getLayout("largeBackgroundPoints"),h=[];h[1-i]=r.getLayout("backgroundStart");var p=new _C({shape:{points:f},incremental:!!n,__startPoint:h,__baseDimIdx:i,__largeDataIndices:s,__barWidth:l,silent:!0,z2:0});b=p,M=r,k=(S=c).get("borderColor")||S.get("color"),O=S.getItemStyle(["color","borderColor"]),b.useStyle(O),b.style.fill=null,b.style.stroke=k,b.style.lineWidth=M.getLayout("barWidth"),t.add(p)}var y=new _C({shape:{points:r.getLayout("largePoints")},incremental:!!n,__startPoint:o,__baseDimIdx:i,__largeDataIndices:s,__barWidth:l});t.add(y),function(b,S,M){var k=M.getVisual("borderColor")||M.getVisual("color"),O=S.getModel("itemStyle").getItemStyle(["color","borderColor"]);b.useStyle(O),b.style.fill=null,b.style.stroke=k,b.style.lineWidth=M.getLayout("barWidth")}(y,e,r),y.seriesIndex=e.seriesIndex,e.get("silent")||(y.on("mousedown",kw),y.on("mousemove",kw))}var kw=kd(function(e){var t=function(n,r,o){var i=n.__baseDimIdx,s=1-i,l=n.shape.points,c=n.__largeDataIndices,f=Math.abs(n.__barWidth/2),h=n.__startPoint[s];ac[0]=r,ac[1]=o;for(var p=ac[i],y=ac[1-i],b=p-f,S=p+f,M=0,k=l.length/2;M<k;M++){var O=2*M,P=l[O+i],R=l[O+s];if(b<=P&&P<=S&&(h<=R?h<=y&&y<=R:R<=y&&y<=h))return c[M]}return-1}(this,e.offsetX,e.offsetY);this.dataIndex=0<=t?t:null},30,!1);function Mw(e,t,n){var r,o="polar"===n.type;return r=o?n.getArea():n.grid.getRect(),o?{cx:r.cx,cy:r.cy,r0:e?r.r0:t.r0,r:e?r.r:t.r,startAngle:e?t.startAngle:0,endAngle:e?t.endAngle:2*Math.PI}:{x:e?t.x:r.x,y:e?r.y:t.y,width:e?t.width:r.width,height:e?r.height:t.height}}function l0(e,t,n){t=rn(t)&&{coordDimensions:t}||Fn({},t);var r=e.getSource(),o=Jv(r,t),i=new ml(o,e);return i.initData(r,n),i}oa(Gf.VISUAL.LAYOUT,ar(cw,"bar")),oa(Gf.VISUAL.PROGRESSIVE_LAYOUT,eC),Ti({seriesType:"bar",reset:function(e){e.getData().setVisual("legendSymbol","roundRect")}});var Tw={updateSelectedMap:function(e){this._targetList=rn(e)?e.slice():[],this._selectTargetMap=Pr(e||[],function(t,n){return t.set(n.name,n),t},ut())},select:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(r){r.selected=!1}),n&&(n.selected=!0)},unSelect:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);n&&(n.selected=!1)},toggleSelected:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);if(null!=n)return this[n.selected?"unSelect":"select"](e,t),n.selected},isSelected:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);return n&&n.selected}};function Dm(e,t){this.getAllNames=function(){var n=t();return n.mapArray(n.getName)},this.containName=function(n){return 0<=t().indexOfName(n)},this.indexOfName=function(n){return e().indexOfName(n)},this.getItemVisual=function(n,r){return e().getItemVisual(n,r)}}var dx=Dh({type:"series.pie",init:function(e){dx.superApply(this,"init",arguments),this.legendVisualProvider=new Dm(Nn(this.getData,this),Nn(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(e)},mergeOption:function(e){dx.superCall(this,"mergeOption",e),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(e,t){return l0(this,{coordDimensions:["value"],encodeDefaulter:ar(um,this)})},_createSelectableList:function(){for(var e=this.getRawData(),t=e.mapDimension("value"),n=[],r=0,o=e.count();r<o;r++)n.push({name:e.getName(r),value:e.get(t,r),selected:jc(e,r,"selected")});return n},getDataParams:function(e){var t=this.getData(),n=dx.superCall(this,"getDataParams",e),r=[];return t.each(t.mapDimension("value"),function(o){r.push(o)}),n.percent=l1(r,e,t.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(e){Qs(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});function vM(e,t,n,r){var o=t.getData(),s=o.getName(this.dataIndex),l=t.get("selectedOffset");r.dispatchAction({type:"pieToggleSelect",from:e,name:s,seriesId:t.id}),o.each(function(c){c0(o.getItemGraphicEl(c),o.getItemLayout(c),t.isSelected(o.getName(c)),l,n)})}function c0(e,t,n,r,o){var i=(t.startAngle+t.endAngle)/2,s=n?r:0,l=[Math.cos(i)*s,Math.sin(i)*s];o?e.animate().when(200,{position:l}).start("bounceOut"):e.attr("position",l)}function fx(e,t){pn.call(this);var n=new oo({z2:2}),r=new Bc,o=new vo;this.add(n),this.add(r),this.add(o),this.updateData(e,t,!0)}_e(dx,Tw);var Dw=fx.prototype;function Aw(e,t){me(t,function(n){n.update="updateView",jr(n,function(r,o){var i={};return o.eachComponent({mainType:"series",subType:e,query:r},function(s){s[n.method]&&s[n.method](r.name,r.dataIndex);var l=s.getData();l.each(function(c){var f=l.getName(c);i[f]=s.isSelected(f)||!1})}),{name:r.name,selected:i,seriesId:r.seriesId}})})}function Tg(e){return{getTargetSeries:function(t){var n={},r=ut();return t.eachSeriesByType(e,function(o){o.__paletteScope=n,r.set(o.uid,o)}),r},reset:function(t,n){var r=t.getRawData(),o={},i=t.getData();i.each(function(s){var l=i.getRawIndex(s);o[l]=s}),r.each(function(s){var l,c=o[s],f=null!=c&&i.getItemVisual(c,"color",!0),h=null!=c&&i.getItemVisual(c,"borderColor",!0);if(f&&h||(l=r.getItemModel(s)),!f){var p=l.get("itemStyle.color")||t.getColorFromPalette(r.getName(s)||s+"",t.__paletteScope,r.count());null!=c&&i.setItemVisual(c,"color",p)}if(!h){var y=l.get("itemStyle.borderColor");null!=c&&i.setItemVisual(c,"borderColor",y)}})}}}Dw.updateData=function(e,t,n){var r=this.childAt(0),o=this.childAt(1),i=this.childAt(2),s=e.hostModel,l=e.getItemModel(t),c=e.getItemLayout(t),f=Fn({},c);f.label=null;var h=s.getShallow("animationTypeUpdate");n?(r.setShape(f),"scale"===s.getShallow("animationType")?(r.shape.r=c.r0,Zo(r,{shape:{r:c.r}},s,t)):(r.shape.endAngle=c.startAngle,so(r,{shape:{endAngle:c.endAngle}},s,t))):"expansion"===h?r.setShape(f):so(r,{shape:f},s,t);var p=e.getItemVisual(t,"color");r.useStyle(un({lineJoin:"bevel",fill:p},l.getModel("itemStyle").getItemStyle())),r.hoverStyle=l.getModel("emphasis.itemStyle").getItemStyle();var y=l.getShallow("cursor");y&&r.attr("cursor",y),c0(this,e.getItemLayout(t),s.isSelected(e.getName(t)),s.get("selectedOffset"),s.get("animation")),this._updateLabel(e,t,!n&&"transition"===h),this.highDownOnUpdate=s.get("silent")?null:function(S,M){var k=s.isAnimationEnabled()&&l.get("hoverAnimation");"emphasis"===M?(o.ignore=o.hoverIgnore,i.ignore=i.hoverIgnore,k&&(r.stopAnimation(!0),r.animateTo({shape:{r:c.r+s.get("hoverOffset")}},300,"elasticOut"))):(o.ignore=o.normalIgnore,i.ignore=i.normalIgnore,k&&(r.stopAnimation(!0),r.animateTo({shape:{r:c.r}},300,"elasticOut")))},ya(this)},Dw._updateLabel=function(e,t,n){var r=this.childAt(1),o=this.childAt(2),i=e.hostModel,s=e.getItemModel(t),l=e.getItemLayout(t).label,c=e.getItemVisual(t,"color");if(!l||isNaN(l.x)||isNaN(l.y))o.ignore=o.normalIgnore=o.hoverIgnore=r.ignore=r.normalIgnore=r.hoverIgnore=!0;else{var f={points:l.linePoints||[[l.x,l.y],[l.x,l.y],[l.x,l.y]]},h={x:l.x,y:l.y};n?(so(r,{shape:f},i,t),so(o,{style:h},i,t)):(r.attr({shape:f}),o.attr({style:h})),o.attr({rotation:l.rotation,origin:[l.x,l.y],z2:10});var p=s.getModel("label"),y=s.getModel("emphasis.label"),b=s.getModel("labelLine"),S=s.getModel("emphasis.labelLine");c=e.getItemVisual(t,"color"),Cu(o.style,o.hoverStyle={},p,y,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:l.text,autoColor:c,useInsideStyle:!!l.inside},{textAlign:l.textAlign,textVerticalAlign:l.verticalAlign,opacity:e.getItemVisual(t,"opacity")}),o.ignore=o.normalIgnore=!p.get("show"),o.hoverIgnore=!y.get("show"),r.ignore=r.normalIgnore=!b.get("show"),r.hoverIgnore=!S.get("show"),r.setStyle({stroke:c,opacity:e.getItemVisual(t,"opacity")}),r.setStyle(b.getModel("lineStyle").getLineStyle()),r.hoverStyle=S.getModel("lineStyle").getLineStyle();var M=b.get("smooth");M&&!0===M&&(M=.4),r.setShape({smooth:M})}},Rn(fx,pn),Ju.extend({type:"pie",init:function(){var e=new pn;this._sectorGroup=e},render:function(e,t,n,r){if(!r||r.from!==this.uid){var o=e.getData(),i=this._data,s=this.group,l=t.get("animation"),c=!i,f=e.get("animationType"),h=e.get("animationTypeUpdate"),p=ar(vM,this.uid,e,l,n),y=e.get("selectedMode");if(o.diff(i).add(function(O){var P=new fx(o,O);c&&"scale"!==f&&P.eachChild(function(R){R.stopAnimation(!0)}),y&&P.on("click",p),o.setItemGraphicEl(O,P),s.add(P)}).update(function(O,P){var R=i.getItemGraphicEl(P);c||"transition"===h||R.eachChild(function(F){F.stopAnimation(!0)}),R.updateData(o,O),R.off("click"),y&&R.on("click",p),s.add(R),o.setItemGraphicEl(O,R)}).remove(function(O){var P=i.getItemGraphicEl(O);s.remove(P)}).execute(),l&&0<o.count()&&(c?"scale"!==f:"transition"!==h)){for(var b=o.getItemLayout(0),S=1;isNaN(b.startAngle)&&S<o.count();++S)b=o.getItemLayout(S);var M=Math.max(n.getWidth(),n.getHeight())/2,k=Nn(s.removeClipPath,s);s.setClipPath(this._createClipPath(b.cx,b.cy,M,b.startAngle,b.clockwise,k,e,c))}else s.removeClipPath();this._data=o}},dispose:function(){},_createClipPath:function(e,t,n,r,o,i,s,l){var c=new oo({shape:{cx:e,cy:t,r0:0,r:n,startAngle:r,endAngle:r,clockwise:o}});return(l?Zo:so)(c,{shape:{endAngle:r+(o?1:-1)*Math.PI*2}},s,i),c},containPoint:function(e,t){var n=t.getData().getItemLayout(0);if(n){var r=e[0]-n.cx,o=e[1]-n.cy,i=Math.sqrt(r*r+o*o);return i<=n.r&&i>=n.r0}}});var Ep=Math.PI/180;function Od(e,t,n,r,o,i,s,l,c,f){function h(F,G,X){for(var Y=F;Y<G&&!(e[Y].y+X>c+s);Y++)if(e[Y].y+=X,F<Y&&Y+1<G&&e[Y+1].y>e[Y].y+e[Y].height)return void p(Y,X/2);p(G-1,X/2)}function p(F,G){for(var X=F;0<=X&&!(e[X].y-G<c)&&(e[X].y-=G,!(0<X&&e[X].y>e[X-1].y+e[X-1].height));X--);}function y(F,G,X,Y,Q,ne){for(var le=G?Number.MAX_VALUE:0,ce=0,ye=F.length;ce<ye;ce++)if("none"===F[ce].labelAlignTo){var xe=Math.abs(F[ce].y-Y),Te=F[ce].len,Ee=F[ce].len2,Ve=xe<Q+Te?Math.sqrt((Q+Te+Ee)*(Q+Te+Ee)-xe*xe):Math.abs(F[ce].x-X);G&&le<=Ve&&(Ve=le-10),!G&&Ve<=le&&(Ve=le+10),F[ce].x=X+Ve*ne,le=Ve}}e.sort(function(F,G){return F.y-G.y});for(var b,S=0,M=e.length,k=[],O=[],P=0;P<M;P++)"outer"===e[P].position&&"labelLine"===e[P].labelAlignTo&&(e[P].linePoints[1][0]+=e[P].x-f,e[P].x=f),(b=e[P].y-S)<0&&h(P,M,-b),S=e[P].y+e[P].height;for(s-S<0&&p(M-1,S-s),P=0;P<M;P++)e[P].y>=n?O.push(e[P]):k.push(e[P]);y(k,!1,t,n,r,o),y(O,!0,t,n,r,o)}function wC(e){return"center"===e.position}var q1=2*Math.PI,yM=Math.PI/180;function d0(e){return{seriesType:e,reset:function(t,n){var r=n.findComponents({mainType:"legend"});if(r&&r.length){var o=t.getData();o.filterSelf(function(i){for(var s=o.getName(i),l=0;l<r.length;l++)if(!r[l].isSelected(s))return!1;return!0})}}}}Aw("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),Ti(Tg("pie")),oa(ar(function(e,t,n,r){t.eachSeriesByType(e,function(o){var Ve,i=o.getData(),s=i.mapDimension("value"),l=(Ve=n,No(o.getBoxLayoutParams(),{width:Ve.getWidth(),height:Ve.getHeight()})),c=o.get("center"),f=o.get("radius");rn(f)||(f=[0,f]),rn(c)||(c=[c,c]);var h=Pn(l.width,n.getWidth()),p=Pn(l.height,n.getHeight()),y=Math.min(h,p),b=Pn(c[0],h)+l.x,S=Pn(c[1],p)+l.y,M=Pn(f[0],y/2),k=Pn(f[1],y/2),O=-o.get("startAngle")*yM,P=o.get("minAngle")*yM,R=0;i.each(s,function(Ee){isNaN(Ee)||R++});var F=i.getSum(s),G=Math.PI/(F||R)*2,X=o.get("clockwise"),Y=o.get("roseType"),Q=o.get("stillShowZeroSum"),ne=i.getDataExtent(s);ne[0]=0;var le=q1,ce=0,ye=O,xe=X?1:-1;if(i.each(s,function(Ee,Ve){var Be;if(isNaN(Ee))i.setItemLayout(Ve,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:X,cx:b,cy:S,r0:M,r:Y?NaN:k,viewRect:l});else{(Be="area"!==Y?0===F&&Q?G:Ee*G:q1/R)<P?le-=Be=P:ce+=Ee;var nt=ye+xe*Be;i.setItemLayout(Ve,{angle:Be,startAngle:ye,endAngle:nt,clockwise:X,cx:b,cy:S,r0:M,r:Y?yi(Ee,ne,[M,k]):k,viewRect:l}),ye=nt}}),le<q1&&R)if(le<=.001){var Te=q1/R;i.each(s,function(Ee,Ve){if(!isNaN(Ee)){var Be=i.getItemLayout(Ve);Be.angle=Te,Be.startAngle=O+xe*Ve*Te,Be.endAngle=O+xe*(Ve+1)*Te}})}else G=le/ce,ye=O,i.each(s,function(Ee,Ve){if(!isNaN(Ee)){var Be=i.getItemLayout(Ve),nt=Be.angle===P?P:Ee*G;Be.startAngle=ye,Be.endAngle=ye+xe*nt,ye+=xe*nt}});!function(e,t,n,r,o,i){var s,l,c=e.getData(),f=[],h=!1,p=(e.get("minShowLabelAngle")||0)*Ep;c.each(function(y){var b=c.getItemLayout(y),S=c.getItemModel(y),M=S.getModel("label"),k=M.get("position")||S.get("emphasis.label.position"),O=M.get("distanceToLabelLine"),P=M.get("alignTo"),R=Pn(M.get("margin"),n),F=M.get("bleedMargin"),G=M.getFont(),X=S.getModel("labelLine"),Y=X.get("length");Y=Pn(Y,n);var Q=X.get("length2");if(Q=Pn(Q,n),!(b.angle<p)){var ne,le,ce,ye,xe=(b.startAngle+b.endAngle)/2,Te=Math.cos(xe),Ee=Math.sin(xe);s=b.cx,l=b.cy;var Ve,Be=e.getFormattedLabel(y,"normal")||c.getName(y),nt=Qi(Be,G,ye,"top"),bt="inside"===k||"inner"===k;if("center"===k)ne=b.cx,le=b.cy,ye="center";else{var _t=(bt?(b.r+b.r0)/2*Te:b.r*Te)+s,wt=(bt?(b.r+b.r0)/2*Ee:b.r*Ee)+l;if(ne=_t+3*Te,le=wt+3*Ee,!bt){var Lt=_t+Te*(Y+t-b.r),Ht=wt+Ee*(Y+t-b.r),Ln=Lt+(Te<0?-1:1)*Q;ne="edge"===P?Te<0?o+R:o+n-R:Ln+(Te<0?-O:O),ce=[[_t,wt],[Lt,Ht],[Ln,le=Ht]]}ye=bt?"center":"edge"===P?0<Te?"right":"left":0<Te?"left":"right"}var Ft=M.get("rotate");Ve="number"==typeof Ft?Ft*(Math.PI/180):Ft?Te<0?-xe+Math.PI:-xe:0,h=!!Ve,b.label={x:ne,y:le,position:k,height:nt.height,len:Y,len2:Q,linePoints:ce,textAlign:ye,verticalAlign:"middle",rotation:Ve,inside:bt,labelDistance:O,labelAlignTo:P,labelMargin:R,bleedMargin:F,textRect:nt,text:Be,font:G},bt||f.push(b.label)}}),!h&&e.get("avoidLabelOverlap")&&function(y,b,S,M,k,O,P,R){for(var F=[],G=[],X=Number.MAX_VALUE,Y=-Number.MAX_VALUE,Q=0;Q<y.length;Q++)wC(y[Q])||(y[Q].x<b?(X=Math.min(X,y[Q].x),F.push(y[Q])):(Y=Math.max(Y,y[Q].x),G.push(y[Q])));for(Od(G,b,S,M,1,0,O,0,R,Y),Od(F,b,S,M,-1,0,O,0,R,X),Q=0;Q<y.length;Q++){var ne=y[Q];if(!wC(ne)){var le=ne.linePoints;if(le){var ce,ye="edge"===ne.labelAlignTo,xe=ne.textRect.width;(ce=ye?ne.x<b?le[2][0]-ne.labelDistance-P-ne.labelMargin:P+k-ne.labelMargin-le[2][0]-ne.labelDistance:ne.x<b?ne.x-P-ne.bleedMargin:P+k-ne.x-ne.bleedMargin)<ne.textRect.width&&(ne.text=bo(ne.text,ce,ne.font),"edge"===ne.labelAlignTo&&(xe=qa(ne.text,ne.font)));var Te=le[1][0]-le[2][0];ye?le[2][0]=ne.x<b?P+ne.labelMargin+xe+ne.labelDistance:P+k-ne.labelMargin-xe-ne.labelDistance:(le[2][0]=ne.x<b?ne.x+ne.labelDistance:ne.x-ne.labelDistance,le[1][0]=le[2][0]+Te),le[1][1]=le[2][1]=ne.y}}}}(f,s,l,t,n,r,o,i)}(o,k,l.width,l.height,l.x,l.y)})},"pie")),fa(d0("pie")),ba.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(e,t){return Sp(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});var Hy=Xu({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(e,t){var n=t.points,r=t.size,o=this.symbolProxy,i=o.shape;if(!((e.getContext?e.getContext():e)&&r[0]<4))for(var s=0;s<n.length;){var l=n[s++],c=n[s++];isNaN(l)||isNaN(c)||this.softClipShape&&!this.softClipShape.contain(l,c)||(i.x=l-r[0]/2,i.y=c-r[1]/2,i.width=r[0],i.height=r[1],o.buildPath(e,i,!0))}},afterBrush:function(e){var t=this.shape,n=t.points,r=t.size;if(r[0]<4){this.setTransform(e);for(var o=0;o<n.length;){var i=n[o++],s=n[o++];isNaN(i)||isNaN(s)||this.softClipShape&&!this.softClipShape.contain(i,s)||e.fillRect(i-r[0]/2,s-r[1]/2,r[0],r[1])}this.restoreTransform(e)}},findDataIndex:function(e,t){for(var n=this.shape,r=n.points,o=n.size,i=Math.max(o[0],4),s=Math.max(o[1],4),l=r.length/2-1;0<=l;l--){var c=2*l,f=r[c]-i/2,h=r[1+c]-s/2;if(f<=e&&h<=t&&e<=f+i&&t<=h+s)return l}return-1}});function Iw(){this.group=new pn}var Pp=Iw.prototype;function Ow(e,t,n){cu.call(this,e,t,n),this.type="value",this.angle=0,this.name=""}function Ph(e,t,n){this._model=e,this.dimensions=[],this._indicatorAxes=Kt(e.getIndicatorModels(),function(r,o){var i="indicator_"+o,s=new Ow(i,"log"===r.get("axisType")?new wg:new Ah);return s.name=r.get("name"),(s.model=r).axis=s,this.dimensions.push(i),s},this),this.resize(e,n)}Pp.isPersistent=function(){return!this._incremental},Pp.updateData=function(e,t){this.group.removeAll();var n=new Hy({rectHover:!0,cursor:"default"});n.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(n,e,!1,t),this.group.add(n),this._incremental=null},Pp.updateLayout=function(e){if(!this._incremental){var t=e.getLayout("symbolPoints");this.group.eachChild(function(n){null!=n.startIndex&&(t=new Float32Array(t.buffer,4*n.startIndex*2,2*(n.endIndex-n.startIndex))),n.setShape("points",t)})}},Pp.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),2e6<e.count()?(this._incremental||(this._incremental=new Tl({silent:!0})),this.group.add(this._incremental)):this._incremental=null},Pp.incrementalUpdate=function(e,t,n){var r;this._incremental?(r=new Hy,this._incremental.addDisplayable(r,!0)):((r=new Hy({rectHover:!0,cursor:"default",startIndex:e.start,endIndex:e.end})).incremental=!0,this.group.add(r)),r.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(r,t,!!this._incremental,n)},Pp._setCommon=function(e,t,n,r){var o=t.hostModel;r=r||{};var i=t.getVisual("symbolSize");e.setShape("size",i instanceof Array?i:[i,i]),e.softClipShape=r.clipShape||null,e.symbolProxy=Zc(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var s=e.shape.size[0]<4;e.useStyle(o.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var l=t.getVisual("color");l&&e.setColor(l),n||(e.seriesIndex=o.seriesIndex,e.on("mousemove",function(c){e.dataIndex=null;var f=e.findDataIndex(c.offsetX,c.offsetY);0<=f&&(e.dataIndex=f+(e.startIndex||0))}))},Pp.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Pp._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},Is({type:"scatter",render:function(e,t,n){var r=e.getData();this._updateSymbolDraw(r,e).updateData(r,{clipShape:this._getClipShape(e)}),this._finished=!0},incrementalPrepareRender:function(e,t,n){var r=e.getData();this._updateSymbolDraw(r,e).incrementalPrepareUpdate(r),this._finished=!1},incrementalRender:function(e,t,n){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,n){var r=e.getData();if(this.group.dirty(),!this._finished||1e4<r.count()||!this._symbolDraw.isPersistent())return{update:!0};var o=Ry().reset(e);o.progress&&o.progress({start:0,end:r.count()},r),this._symbolDraw.updateLayout(r)},_getClipShape:function(e){var t=e.coordinateSystem,n=t&&t.getArea&&t.getArea();return e.get("clip",!0)?n:null},_updateSymbolDraw:function(e,t){var n=this._symbolDraw,r=t.pipelineContext.large;return n&&r===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=r?new Iw:new Dd,this._isLargeDraw=r,this.group.removeAll()),this.group.add(n.group),n},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),Ti(Ap("scatter","circle")),oa(Ry("scatter")),Rn(Ow,cu),Ph.prototype.getIndicatorAxes=function(){return this._indicatorAxes},Ph.prototype.dataToPoint=function(e,t){return this.coordToPoint(this._indicatorAxes[t].dataToCoord(e),t)},Ph.prototype.coordToPoint=function(e,t){var n=this._indicatorAxes[t].angle;return[this.cx+e*Math.cos(n),this.cy-e*Math.sin(n)]},Ph.prototype.pointToData=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,r=Math.sqrt(t*t+n*n);t/=r,n/=r;for(var o,i=Math.atan2(-n,t),s=1/0,l=-1,c=0;c<this._indicatorAxes.length;c++){var f=this._indicatorAxes[c],h=Math.abs(i-f.angle);h<s&&(o=f,l=c,s=h)}return[l,+(o&&o.coordToData(r))]},Ph.prototype.resize=function(e,t){var n=e.get("center"),r=t.getWidth(),o=t.getHeight(),i=Math.min(r,o)/2;this.cx=Pn(n[0],r),this.cy=Pn(n[1],o),this.startAngle=e.get("startAngle")*Math.PI/180;var s=e.get("radius");"string"!=typeof s&&"number"!=typeof s||(s=[0,s]),this.r0=Pn(s[0],i),this.r=Pn(s[1],i),me(this._indicatorAxes,function(l,c){l.setExtent(this.r0,this.r);var f=this.startAngle+c*Math.PI*2/this._indicatorAxes.length;f=Math.atan2(Math.sin(f),Math.cos(f)),l.angle=f},this)},Ph.prototype.update=function(e,t){var n=this._indicatorAxes,r=this._model;me(n,function(s){s.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(s,l){if("radar"===s.get("coordinateSystem")&&e.getComponent("radar",s.get("radarIndex"))===r){var c=s.getData();me(n,function(f){f.scale.unionExtentFromData(c,c.mapDimension(f.dim))})}},this);var o=r.get("splitNumber");function i(s){var l=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),c=s/l;return 2===c?c=5:c*=2,c*l}me(n,function(s,l){var c=kp(s.scale,s.model).extent;oc(s.scale,s.model);var f=s.model,h=s.scale,p=f.getMin(),y=f.getMax(),b=h.getInterval();if(null!=p&&null!=y)h.setExtent(+p,+y),h.setInterval((y-p)/o);else if(null!=p)for(;h.setExtent(+p,M=p+b*o),h.setInterval(b),b=i(b),M<c[1]&&isFinite(M)&&isFinite(c[1]););else if(null!=y)for(;h.setExtent(k=y-b*o,+y),h.setInterval(b),b=i(b),k>c[0]&&isFinite(k)&&isFinite(c[0]););else{var S=h.getTicks().length-1;o<S&&(b=i(b));var M,k=is((M=Math.ceil(c[1]/b)*b)-b*o);h.setExtent(k,M),h.setInterval(b)}})},Ph.dimensions=[],Ph.create=function(e,t){var n=[];return e.eachComponent("radar",function(r){var o=new Ph(r,e,t);n.push(o),r.coordinateSystem=o}),e.eachSeriesByType("radar",function(r){"radar"===r.get("coordinateSystem")&&(r.coordinateSystem=n[r.get("radarIndex")||0])}),n},ku.register("radar",Ph);var Wy=df.valueAxis;function hx(e,t){return un({show:t},e)}Au({type:"radar",optionUpdated:function(){var e=this.get("boundaryGap"),t=this.get("splitNumber"),n=this.get("scale"),r=this.get("axisLine"),o=this.get("axisTick"),i=this.get("axisType"),s=this.get("axisLabel"),l=this.get("name"),c=this.get("name.show"),f=this.get("name.formatter"),h=this.get("nameGap"),p=this.get("triggerEvent"),y=Kt(this.get("indicator")||[],function(b){null!=b.max&&0<b.max&&!b.min?b.min=0:null!=b.min&&b.min<0&&!b.max&&(b.max=0);var S=l;if(null!=b.color&&(S=un({color:b.color},l)),b=Sn(Gn(b),{boundaryGap:e,splitNumber:t,scale:n,axisLine:r,axisTick:o,axisType:i,axisLabel:s,name:b.text,nameLocation:"end",nameGap:h,nameTextStyle:S,triggerEvent:p},!1),c||(b.name=""),"string"==typeof f){var M=b.name;b.name=f.replace("{value}",null!=M?M:"")}else"function"==typeof f&&(b.name=f(b.name,b));var k=Fn(new $o(b,null,this.ecModel),Cg);return k.mainType="radar",k.componentIndex=this.componentIndex,k},this);this.getIndicatorModels=function(){return y}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:Sn({lineStyle:{color:"#bbb"}},Wy.axisLine),axisLabel:hx(Wy.axisLabel,!1),axisTick:hx(Wy.axisTick,!1),axisType:"interval",splitLine:hx(Wy.splitLine,!0),splitArea:hx(Wy.splitArea,!0),indicator:[]}});var gx=["axisLine","axisTickLabel","axisName"];xs({type:"radar",render:function(e,t,n){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},_buildAxes:function(e){var t=e.coordinateSystem;me(Kt(t.getIndicatorAxes(),function(n){return new ic(n.model,{position:[t.cx,t.cy],rotation:n.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(n){me(gx,n.add,n),this.group.add(n.getGroup())},this)},_buildSplitLineAndArea:function(e){var t=e.coordinateSystem,n=t.getIndicatorAxes();if(n.length){var r=e.get("shape"),o=e.getModel("splitLine"),i=e.getModel("splitArea"),s=o.getModel("lineStyle"),l=i.getModel("areaStyle"),c=o.get("show"),f=i.get("show"),h=s.get("color"),p=l.get("color");h=rn(h)?h:[h],p=rn(p)?p:[p];var y=[],b=[];if("circle"===r)for(var S=n[0].getTicksCoords(),M=t.cx,k=t.cy,O=0;O<S.length;O++)c&&y[ne(y,h,O)].push(new Fs({shape:{cx:M,cy:k,r:S[O].coord}})),f&&O<S.length-1&&b[ne(b,p,O)].push(new Vs({shape:{cx:M,cy:k,r0:S[O].coord,r:S[O+1].coord}}));else{var P,R=Kt(n,function(le,ce){var ye=le.getTicksCoords();return P=null==P?ye.length-1:Math.min(ye.length-1,P),Kt(ye,function(xe){return t.coordToPoint(xe.coord,ce)})}),F=[];for(O=0;O<=P;O++){for(var G=[],X=0;X<n.length;X++)G.push(R[X][O]);G[0]&&G.push(G[0].slice()),c&&y[ne(y,h,O)].push(new Bc({shape:{points:G}})),f&&F&&b[ne(b,p,O-1)].push(new wo({shape:{points:G.concat(F)}})),F=G.slice().reverse()}}var Y=s.getLineStyle(),Q=l.getAreaStyle();me(b,function(le,ce){this.group.add(Al(le,{style:un({stroke:"none",fill:p[ce%p.length]},Q),silent:!0}))},this),me(y,function(le,ce){this.group.add(Al(le,{style:un({fill:"none",stroke:h[ce%h.length]},Y),silent:!0}))},this)}function ne(le,ce,ye){var xe=ye%ce.length;return le[xe]=le[xe]||[],xe}}});var SC=ba.extend({type:"series.radar",dependencies:["radar"],init:function(e){SC.superApply(this,"init",arguments),this.legendVisualProvider=new Dm(Nn(this.getData,this),Nn(this.getRawData,this))},getInitialData:function(e,t){return l0(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(e,t,n,r){var o=this.getData(),i=this.coordinateSystem.getIndicatorAxes(),s=this.getData().getName(e),l="html"===r?"<br/>":"\n";return Wo(""===s?this.name:s)+l+Kt(i,function(c,f){var h=o.get(o.mapDimension(c.dim),e);return Wo(c.name+" : "+h)}).join(l)},getTooltipPosition:function(e){if(null!=e)for(var t=this.getData(),n=this.coordinateSystem,r=t.getValues(Kt(n.dimensions,function(l){return t.mapDimension(l)}),e,!0),o=0,i=r.length;o<i;o++)if(!isNaN(r[o])){var s=n.getIndicatorAxes();return n.coordToPoint(s[o].dataToCoord(r[o]),o)}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});function CC(e){return!isNaN(e[0])&&!isNaN(e[1])}function mx(e){return[e.cx,e.cy]}Is({type:"radar",render:function(e,t,n){var r=e.coordinateSystem,o=this.group,i=e.getData(),s=this._data;function l(h,p){var O,y=h.getItemVisual(p,"symbol")||"circle",b=h.getItemVisual(p,"color");if("none"!==y){var S=(rn(O=h.getItemVisual(p,"symbolSize"))||(O=[+O,+O]),O),M=Zc(y,-1,-1,2,2,b),k=h.getItemVisual(p,"symbolRotate")||0;return M.attr({style:{strokeNoScale:!0},z2:100,scale:[S[0]/2,S[1]/2],rotation:k*Math.PI/180||0}),M}}function c(h,p,y,b,S,M){y.removeAll();for(var k=0;k<p.length-1;k++){var O=l(b,S);O&&(h[O.__dimIdx=k]?(O.attr("position",h[k]),Jd[M?"initProps":"updateProps"](O,{position:p[k]},e,S)):O.attr("position",p[k]),y.add(O))}}function f(h){return Kt(h,function(p){return[r.cx,r.cy]})}i.diff(s).add(function(h){var p=i.getItemLayout(h);if(p){var y=new wo,b=new Bc,S={shape:{points:p}};y.shape.points=f(p),b.shape.points=f(p),Zo(y,S,e,h),Zo(b,S,e,h);var M=new pn,k=new pn;M.add(b),M.add(y),M.add(k),c(b.shape.points,p,k,i,h,!0),i.setItemGraphicEl(h,M)}}).update(function(h,p){var y=s.getItemGraphicEl(p),b=y.childAt(0),S=y.childAt(1),M=y.childAt(2),k={shape:{points:i.getItemLayout(h)}};k.shape.points&&(c(b.shape.points,k.shape.points,M,i,h,!1),so(b,k,e),so(S,k,e),i.setItemGraphicEl(h,y))}).remove(function(h){o.remove(s.getItemGraphicEl(h))}).execute(),i.eachItemGraphicEl(function(h,p){var y=i.getItemModel(p),b=h.childAt(0),S=h.childAt(1),M=h.childAt(2),k=i.getItemVisual(p,"color");o.add(h),b.useStyle(un(y.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:k})),b.hoverStyle=y.getModel("emphasis.lineStyle").getLineStyle();var O=y.getModel("areaStyle"),P=y.getModel("emphasis.areaStyle"),R=O.isEmpty()&&O.parentModel.isEmpty(),F=P.isEmpty()&&P.parentModel.isEmpty();F=F&&R,S.ignore=R,S.useStyle(un(O.getAreaStyle(),{fill:k,opacity:.7})),S.hoverStyle=P.getAreaStyle();var G=y.getModel("itemStyle").getItemStyle(["color"]),X=y.getModel("emphasis.itemStyle").getItemStyle(),Y=y.getModel("label"),Q=y.getModel("emphasis.label");M.eachChild(function(ne){ne.setStyle(G),ne.hoverStyle=Gn(X);var le=i.get(i.dimensions[ne.__dimIdx],p);null!=le&&!isNaN(le)||(le=""),Cu(ne.style,ne.hoverStyle,Y,Q,{labelFetcher:i.hostModel,labelDataIndex:p,labelDimIndex:ne.__dimIdx,defaultText:le,autoColor:k,isRectText:!0})}),h.highDownOnUpdate=function(ne,le){S.attr("ignore","emphasis"===le?F:R)},ya(h)}),this._data=i},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),Ti(Tg("radar")),Ti(Ap("radar","circle")),oa(function(e){e.eachSeriesByType("radar",function(t){var n=t.getData(),r=[],o=t.coordinateSystem;if(o){var i=o.getIndicatorAxes();me(i,function(s,l){n.each(n.mapDimension(i[l].dim),function(c,f){r[f]=r[f]||[];var h=o.dataToPoint(c,l);r[f][l]=CC(h)?h:mx(o)})}),n.each(function(s){var l=ro(r[s],function(c){return CC(c)})||mx(o);r[s].push(l.slice()),n.setItemLayout(s,r[s])})}})}),fa(d0("radar")),ra(function(e){var t=e.polar;if(t){rn(t)||(t=[t]);var n=[];me(t,function(r,o){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),e.radar=e.radar||[],rn(e.radar)||(e.radar=[e.radar]),e.radar.push(r)):n.push(r)}),e.polar=n}me(e.series,function(r){r&&"radar"===r.type&&r.polarIndex&&(r.radarIndex=r.polarIndex)})});for(var Rh=[126,25],Yf=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],Am=0;Am<Yf.length;Am++)for(var Dg=0;Dg<Yf[Am].length;Dg++)Yf[Am][Dg][0]/=10.5,Yf[Am][Dg][1]/=-14,Yf[Am][Dg][0]+=Rh[0],Yf[Am][Dg][1]+=Rh[1];var Ew={\u5357\u6d77\u8bf8\u5c9b:[32,80],\u5e7f\u4e1c:[0,-10],\u9999\u6e2f:[10,5],\u6fb3\u95e8:[-10,10],\u5929\u6d25:[5,5]},Pw={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},Xs=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],X1=La(),kC={load:function(e,t,n){var r=X1(t).parsed;if(r)return r;var o,l,i=t.specialAreas||{},s=t.geoJSON;try{o=s?Dy(s,n):[]}catch(l){throw new Error("Invalid geoJson format\n"+l.message)}return"china"===(l=e)&&o.push(new Tp("\u5357\u6d77\u8bf8\u5c9b",Kt(Yf,function(f){return{type:"polygon",exterior:f}}),Rh)),me(o,function(l){var p,c=l.name;(function(h,p){if("china"===h){var y=Ew[p.name];if(y){var b=p.center;b[0]+=y[0]/10.5,b[1]+=-y[1]/14}}})(e,l),function(h,p){if("world"===h){var y=Pw[p.name];if(y){var b=p.center;b[0]=y[0],b[1]=y[1]}}}(e,l),p=l,"china"===e&&"\u53f0\u6e7e"===p.name&&p.geometries.push({type:"polygon",exterior:Xs[0]});var f=i[c];f&&l.transformTo(f.left,f.top,f.width,f.height)}),X1(t).parsed={regions:o,boundingRect:function(l){for(var c,f=0;f<l.length;f++){var h=l[f].getBoundingRect();(c=c||h.clone()).union(h)}return c}(o)}}},f0=La();function bM(e,t){var n,r,h,o=e.svgXML;try{_s(null!=(r=(n=o&&(h=o,(new yg).parse(h,{ignoreViewBox:!0,ignoreRootClip:!0}))||{}).root))}catch(h){throw new Error("Invalid svg format\n"+h.message)}var i=n.width,s=n.height,l=n.viewBoxRect;if(t||(t=null==i||null==s?r.getBoundingRect():new Vo(0,0,0,0),null!=i&&(t.width=i),null!=s&&(t.height=s)),l){var c=_m(l,t.width,t.height),f=r;(r=new pn).add(f),f.scale=c.scale,f.position=c.position}return r.setClipPath(new ei({shape:t.plain()})),{root:r,boundingRect:t}}var MC={geoJSON:kC,svg:{load:function(e,t){var n=f0(t).originRoot;if(n)return{root:n,boundingRect:f0(t).boundingRect};var r=bM(t);return f0(t).originRoot=r.root,f0(t).boundingRect=r.boundingRect,r},makeGraphic:function(e,t,n){var r=f0(t),o=r.rootMap||(r.rootMap=ut()),i=o.get(n);if(i)return i;var s=r.originRoot;return i=r.originRootHostKey?bM(t,r.boundingRect).root:(r.originRootHostKey=n,s),o.set(n,i)},removeGraphic:function(e,t,n){var r=f0(t),o=r.rootMap;o&&o.removeKey(n),n===r.originRootHostKey&&(r.originRootHostKey=null)}}},Gy={load:function(e,t,n){var r,o=[],i=ut(),s=ut();return me(px(e),function(l){var c=MC[l.type].load(e,l,n);me(c.regions,function(h){var p=h.name;t&&t.hasOwnProperty(p)&&(h=h.cloneShallow(p=t[p])),o.push(h),i.set(p,h),s.set(p,h.center)});var f=c.boundingRect;f&&(r?r.union(f):r=f.clone())}),{regions:o,regionsMap:i,nameCoordMap:s,boundingRect:r||new Vo(0,0,0,0)}},makeGraphic:Y1("makeGraphic"),removeGraphic:Y1("removeGraphic")};function Y1(e){return function(t,n){var r=px(t),o=[];return me(r,function(i){var s=MC[i.type][e];s&&o.push(s(t,i,n))}),o}}function px(e){return Th_retrieveMap(e)||[]}_e(ba.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(e){for(var t=l0(this,{coordDimensions:["value"],encodeDefaulter:ar(um,this)}),n=t.mapDimension("value"),r=ut(),o=[],i=[],s=0,l=t.count();s<l;s++){var c=t.getName(s);r.set(c,!0),o.push({name:c,value:t.get(n,s),selected:jc(t,s,"selected")})}return me(Gy.load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(f){var h=f.name;r.get(h)||(o.push({name:h}),i.push(h))}),this.updateSelectedMap(o),t.appendValues([],i),t},getHostGeoModel:function(){var e=this.option.geoIndex;return null!=e?this.dependentModels.geo[e]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},getRegionModel:function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},formatTooltip:function(e,t,n,r){for(var o=this.getData(),i=ec(this.getRawValue(e)),s=o.getName(e),l=this.seriesGroup,c=[],f=0;f<l.length;f++){var h=l[f].originalData.indexOfName(s),p=o.mapDimension("value");isNaN(l[f].originalData.get(p,h))||c.push(Wo(l[f].name))}var y="html"===r?"<br/>":"\n";return c.join(", ")+y+Wo(s+" : "+i)},getTooltipPosition:function(e){if(null!=e){var t=this.getData().getName(e),n=this.coordinateSystem,r=n.getRegion(t);return r&&n.dataToPoint(r.center)}},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}}),Tw);var TC="\0_ec_interaction_mutex";function DC(e,t){return!!Rw(e)[t]}function Rw(e){return e[TC]||(e[TC]={})}function Rp(e){this._zr=e,this._opt={};var t=Nn,n=t(xM,this),r=t(AC,this),o=t(Nw,this),i=t(vx,this),s=t(IC,this);Nt.call(this),this.setPointerChecker=function(l){this.pointerChecker=l},this.enable=function(l,c){this.disable(),this._opt=un(Gn(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==l&&(l=!0),!0!==l&&"move"!==l&&"pan"!==l||(e.on("mousedown",n),e.on("mousemove",r),e.on("mouseup",o)),!0!==l&&"scale"!==l&&"zoom"!==l||(e.on("mousewheel",i),e.on("pinch",s))},this.disable=function(){e.off("mousedown",n),e.off("mousemove",r),e.off("mouseup",o),e.off("mousewheel",i),e.off("pinch",s)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function xM(e){if(!(ur(e)||e.target&&e.target.draggable)){var t=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,n)&&(this._x=t,this._y=n,this._dragging=!0)}}function AC(e){if(this._dragging&&Z1("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!DC(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,r=this._x,o=this._y,i=t-r,s=n-o;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&cr(e.event),OC(this,"pan","moveOnMouseMove",e,{dx:i,dy:s,oldX:r,oldY:o,newX:t,newY:n})}}function Nw(e){ur(e)||(this._dragging=!1)}function vx(e){var t=Z1("zoomOnMouseWheel",e,this._opt),n=Z1("moveOnMouseWheel",e,this._opt),r=e.wheelDelta,o=Math.abs(r),i=e.offsetX,s=e.offsetY;if(0!==r&&(t||n)){if(t){var l=3<o?1.4:1<o?1.2:1.1;Lw(this,"zoom","zoomOnMouseWheel",e,{scale:0<r?l:1/l,originX:i,originY:s})}if(n){var c=Math.abs(r);Lw(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(0<r?1:-1)*(3<c?.4:1<c?.15:.05),originX:i,originY:s})}}}function IC(e){DC(this._zr,"globalPan")||Lw(this,"zoom",null,e,{scale:1<e.pinchScale?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY})}function Lw(e,t,n,r,o){e.pointerChecker&&e.pointerChecker(r,o.originX,o.originY)&&(cr(r.event),OC(e,t,n,r,o))}function OC(e,t,n,r,o){o.isAvailableBehavior=Nn(Z1,null,n,r),e.trigger(t,o)}function Z1(e,t,n){var r=n[e];return!e||r&&(!tr(r)||t.event[r+"Key"])}function Bw(e,t,n){var r=e.target,o=r.position;o[0]+=t,o[1]+=n,r.dirty()}function zw(e,t,n,r){var o=e.target,i=e.zoomLimit,s=o.position,l=o.scale,c=e.zoom=e.zoom||1;if(c*=t,i){var f=i.min||0;c=Math.max(Math.min(i.max||1/0,c),f)}var p=c/e.zoom;e.zoom=c,s[0]-=(n-s[0])*(p-1),s[1]-=(r-s[1])*(p-1),l[0]*=p,l[1]*=p,o.dirty()}jr({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),_e(Rp,Nt);var fD={axisPointer:1,tooltip:1,brush:1};function yx(e,t,n){var r=t.getComponentByElement(e.topTarget),o=r&&r.coordinateSystem;return r&&r!==n&&!fD[r.mainType]&&o&&o.model!==n}function Ed(e){var t=e.getItemStyle(),n=e.get("areaColor");return null!=n&&(t.fill=n),t}function Im(e,t){t.eachChild(function(n){me(n.__regions,function(r){n.trigger(e.isSelected(r.name)?"emphasis":"normal")})})}function h0(e,t){var n=new pn;this.uid=ph("ec_map_draw"),this._controller=new Rp(e.getZr()),this._controllerHost={target:t?n:null},this.group=n,this._updateGroup=t,n.add(this._regionsGroup=new pn),n.add(this._backgroundGroup=new pn)}h0.prototype={constructor:h0,draw:function(e,t,n,r,o){var i="geo"===e.mainType,s=e.getData&&e.getData();i&&t.eachComponent({mainType:"series",subType:"map"},function(X){s||X.getHostGeoModel()!==e||(s=X.getData())});var l=e.coordinateSystem;this._updateBackground(l);var c,f=this._regionsGroup,h=this.group,p=l.getTransformInfo(),y=!f.childAt(0)||o;if(y)h.transform=p.roamTransform,h.decomposeTransform(),h.dirty();else{var b=new Qo;b.transform=p.roamTransform,b.decomposeTransform(),c=b.scale,so(h,{scale:b.scale,position:b.position},e)}var M=p.rawScale,k=p.rawPosition;f.removeAll();var X,Y,Q,ne,le,O=["itemStyle"],P=["emphasis","itemStyle"],R=["label"],F=["emphasis","label"],G=ut();me(l.regions,function(X){var Y=G.get(X.name)||G.set(X.name,new pn),Q=new $g({segmentIgnoreThreshold:1,shape:{paths:[]}});Y.add(Q);var ne,le=(Ft=e.getRegionModel(X.name)||e).getModel(O),ce=Ft.getModel(P),ye=Ed(le),xe=Ed(ce),Te=Ft.getModel(R),Ee=Ft.getModel(F);if(s){ne=s.indexOfName(X.name);var Ve=s.getItemVisual(ne,"color",!0);Ve&&(ye.fill=Ve)}function Be(Yn){return[Yn[0]*M[0]+k[0],Yn[1]*M[1]+k[1]]}me(X.geometries,function(Yn){if("polygon"===Yn.type){for(var or=[],Tr=0;Tr<Yn.exterior.length;++Tr)or.push(Be(Yn.exterior[Tr]));for(Q.shape.paths.push(new wo({segmentIgnoreThreshold:1,shape:{points:or}})),Tr=0;Tr<(Yn.interiors?Yn.interiors.length:0);++Tr){for(var Ko=Yn.interiors[Tr],Lo=(or=[],0);Lo<Ko.length;++Lo)or.push(Be(Ko[Lo]));Q.shape.paths.push(new wo({segmentIgnoreThreshold:1,shape:{points:or}}))}}}),Q.setStyle(ye),Q.style.strokeNoScale=!0,Q.culling=!0;var nt=Te.get("show"),bt=Ee.get("show"),_t=s&&isNaN(s.get(s.mapDimension("value"),ne)),wt=s&&s.getItemLayout(ne);if(i||_t&&(nt||bt)||wt&&wt.showLabel){var Lt,Ht=i?X.name:ne;(!s||0<=ne)&&(Lt=e);var Ln=new vo({position:Be(X.center.slice()),scale:[1/h.scale[0],1/h.scale[1]],z2:10,silent:!0});Cu(Ln.style,Ln.hoverStyle={},Te,Ee,{labelFetcher:Lt,labelDataIndex:Ht,defaultText:X.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),!y&&so(Ln,{scale:[1/c[0],1/c[1]]},e),Y.add(Ln)}if(s)s.setItemGraphicEl(ne,Y);else{var Ft=e.getRegionModel(X.name);Q.eventData={componentType:"geo",componentIndex:e.componentIndex,geoIndex:e.componentIndex,name:X.name,region:Ft&&Ft.option||{}}}(Y.__regions||(Y.__regions=[])).push(X),Y.highDownSilentOnTouch=!!e.get("selectedMode"),ya(Y,xe),f.add(Y)}),this._updateController(e,t,n),X=this,Y=e,ne=n,le=r,(Q=f).off("click"),Q.off("mousedown"),Y.get("selectedMode")&&(Q.on("mousedown",function(){X._mouseDownFlag=!0}),Q.on("click",function(ce){if(X._mouseDownFlag){X._mouseDownFlag=!1;for(var ye=ce.target;!ye.__regions;)ye=ye.parent;if(ye){var xe={type:("geo"===Y.mainType?"geo":"map")+"ToggleSelect",batch:Kt(ye.__regions,function(Te){return{name:Te.name,from:le.uid}})};xe[Y.mainType+"Id"]=Y.id,ne.dispatchAction(xe),Im(Y,Q)}}})),Im(e,f)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&Gy.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(e){var t=e.map;this._mapName!==t&&me(Gy.makeGraphic(t,this.uid),function(n){this._backgroundGroup.add(n)},this),this._mapName=t},_updateController:function(e,t,n){var r=e.coordinateSystem,o=this._controller,i=this._controllerHost;i.zoomLimit=e.get("scaleLimit"),i.zoom=r.getZoom(),o.enable(e.get("roam")||!1);var s=e.mainType;function l(){var c={type:"geoRoam",componentType:s};return c[s+"Id"]=e.id,c}o.off("pan").on("pan",function(c){this._mouseDownFlag=!1,Bw(i,c.dx,c.dy),n.dispatchAction(Fn(l(),{dx:c.dx,dy:c.dy}))},this),o.off("zoom").on("zoom",function(c){if(this._mouseDownFlag=!1,zw(i,c.scale,c.originX,c.originY),n.dispatchAction(Fn(l(),{zoom:c.scale,originX:c.originX,originY:c.originY})),this._updateGroup){var f=this.group.scale;this._regionsGroup.traverse(function(h){"text"===h.type&&h.attr("scale",[1/f[0],1/f[1]])})}},this),o.setPointerChecker(function(c,f,h){return r.getViewRectAfterRoam().contain(f,h)&&!yx(c,n,e)})}};var bx="__seriesMapHighDown",_M="__seriesMapCallKey";function xx(e){var t=this[bx];t&&t.recordVersion===this[_M]&&EC(t,e)}function EC(e,t){var n=e.circle,r=e.labelModel,o=e.hoverLabelModel,i=e.emphasisText,s=e.normalText;t?(n.style.extendFrom(Ya({},o,{text:o.get("show")?i:null},{isRectText:!0,useInsideStyle:!1},!0)),n.__mapOriginalZ2=n.z2,n.z2+=1):(Ya(n.style,r,{text:r.get("show")?s:null,textPosition:r.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),n.dirty(!1),null!=n.__mapOriginalZ2&&(n.z2=n.__mapOriginalZ2,n.__mapOriginalZ2=null))}function _x(e,t,n){var r=e.getZoom(),o=e.getCenter(),i=t.zoom,s=e.dataToPoint(o);if(null!=t.dx&&null!=t.dy&&(s[0]-=t.dx,s[1]-=t.dy,o=e.pointToData(s),e.setCenter(o)),null!=i){if(n){var l=n.min||0;i=Math.max(Math.min(r*i,n.max||1/0),l)/r}e.scale[0]*=i,e.scale[1]*=i;var f=e.position,p=(t.originY-f[1])*(i-1);f[0]-=(t.originX-f[0])*(i-1),f[1]-=p,e.updateTransform(),o=e.pointToData(s),e.setCenter(o),e.setZoom(i*r)}return{center:e.getCenter(),zoom:e.getZoom()}}Is({type:"map",render:function(e,t,n,r){if(!r||"mapToggleSelect"!==r.type||r.from!==this.uid){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(r&&"geoRoam"===r.type&&"series"===r.componentType&&r.seriesId===e.id)(i=this._mapDraw)&&o.add(i.group);else if(e.needsDrawMap){var i=this._mapDraw||new h0(n,!0);o.add(i.group),i.draw(e,t,n,this,r),this._mapDraw=i}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(e,t,n){var r=e.originalData,o=this.group;r.each(r.mapDimension("value"),function(i,s){if(!isNaN(i)){var l=r.getItemLayout(s);if(l&&l.point){var c=l.point,f=l.offset,h=new Fs({style:{fill:e.getData().getVisual("color")},shape:{cx:c[0]+9*f,cy:c[1],r:3},silent:!0,z2:8+(f?0:2)});if(!f){var p=e.mainSeries.getData(),y=r.getName(s),b=p.indexOfName(y),S=r.getItemModel(s),M=S.getModel("label"),k=S.getModel("emphasis.label"),O=p.getItemGraphicEl(b),P=Dr(e.getFormattedLabel(b,"normal"),y),R=Dr(e.getFormattedLabel(b,"emphasis"),P),F=O[bx],G=Math.random();if(!F){F=O[bx]={};var X=ar(xx,!0),Y=ar(xx,!1);O.on("mouseover",X).on("mouseout",Y).on("emphasis",X).on("normal",Y)}Fn(F,{recordVersion:O[_M]=G,circle:h,labelModel:M,hoverLabelModel:k,emphasisText:R,normalText:P}),EC(F,!1)}o.add(h)}}})}}),jr({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,t){var n=e.componentType||"series";t.eachComponent({mainType:n,query:e},function(r){var o=r.coordinateSystem;if("geo"===o.type){var i=_x(o,e,r.get("scaleLimit"));r.setCenter&&r.setCenter(i.center),r.setZoom&&r.setZoom(i.zoom),"series"===n&&me(r.seriesGroup,function(s){s.setCenter(i.center),s.setZoom(i.zoom)})}})});var du=wn;function Ag(){Qo.call(this)}function Pd(e){this.name=e,Qo.call(this),this._roamTransformable=new Ag,this._rawTransformable=new Ag}function zo(e,t,n,r){var o=n.seriesModel,i=o?o.coordinateSystem:null;return i===this?i[e](r):null}function Sx(e,t,n,r){Pd.call(this,e),this.map=t;var o=Gy.load(t,n);this._nameCoordMap=o.nameCoordMap,this._regionsMap=o.regionsMap,this._invertLongitute=null==r||r,this.regions=o.regions,this._rect=o.boundingRect}function xa(e,t,n,r){var o=n.geoModel,i=n.seriesModel,s=o?o.coordinateSystem:i?i.coordinateSystem||(i.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return s===this?s[e](r):null}function sc(e,t){var n=e.get("boundingCoords");if(null!=n){var r=n[0],o=n[1];isNaN(r[0])||isNaN(r[1])||isNaN(o[0])||isNaN(o[1])||this.setBoundingRect(r[0],r[1],o[0]-r[0],o[1]-r[1])}var i,s=this.getBoundingRect(),l=e.get("layoutCenter"),c=e.get("layoutSize"),f=t.getWidth(),h=t.getHeight(),p=s.width/s.height*this.aspectScale,y=!1;if(l&&c&&(l=[Pn(l[0],f),Pn(l[1],h)],c=Pn(c,Math.min(f,h)),isNaN(l[0])||isNaN(l[1])||isNaN(c)||(y=!0)),y){var b={};1<p?(b.width=c,b.height=c/p):(b.height=c,b.width=c*p),b.y=l[1]-b.height/2,b.x=l[0]-b.width/2}else(i=e.getBoxLayoutParams()).aspect=p,b=No(i,{width:f,height:h});this.setViewRect(b.x,b.y,b.width,b.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}function wM(e,t){me(t.get("geoCoord"),function(n,r){e.addGeoCoord(r,n)})}_e(Ag,Qo),Pd.prototype={constructor:Pd,type:"view",dimensions:["x","y"],setBoundingRect:function(e,t,n,r){return this._rect=new Vo(e,t,n,r),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(e,t,n,r){this.transformTo(e,t,n,r),this._viewRect=new Vo(e,t,n,r)},transformTo:function(e,t,n,r){var o=this.getBoundingRect(),i=this._rawTransformable;i.transform=o.calculateTransform(new Vo(e,t,n,r)),i.decomposeTransform(),this._updateTransform()},setCenter:function(e){e&&(this._center=e,this._updateCenterAndZoom())},setZoom:function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},getDefaultCenter:function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,n=this.getDefaultCenter(),r=this.getCenter(),o=this.getZoom();r=wn([],r,e),n=wn([],n,e),t.origin=r,t.position=[n[0]-r[0],n[1]-r[1]],t.scale=[o,o],this._updateTransform()},_updateTransform:function(){var t=this._rawTransformable;(t.parent=this._roamTransformable).updateTransform(),t.updateTransform(),Mo(this.transform||(this.transform=[]),t.transform||ui()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],$i(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var e=this._roamTransformable.transform,t=this._rawTransformable;return{roamTransform:e?gi(e):ui(),rawScale:gi(t.scale),rawPosition:gi(t.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},dataToPoint:function(e,t,n){var r=t?this._rawTransform:this.transform;return n=n||[],r?du(n,e,r):St(n,e)},pointToData:function(e){var t=this.invTransform;return t?du([],e,t):[e[0],e[1]]},convertToPixel:ar(zo,"dataToPoint"),convertFromPixel:ar(zo,"pointToData"),containPoint:function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])}},_e(Pd,Qo),Sx.prototype={constructor:Sx,type:"geo",dimensions:["lng","lat"],containCoord:function(e){for(var t=this.regions,n=0;n<t.length;n++)if(t[n].contain(e))return!0;return!1},transformTo:function(e,t,n,r){var o=this.getBoundingRect(),i=this._invertLongitute;o=o.clone(),i&&(o.y=-o.y-o.height);var s=this._rawTransformable;if(s.transform=o.calculateTransform(new Vo(e,t,n,r)),s.decomposeTransform(),i){var l=s.scale;l[1]=-l[1]}s.updateTransform(),this._updateTransform()},getRegion:function(e){return this._regionsMap.get(e)},getRegionByCoord:function(e){for(var t=this.regions,n=0;n<t.length;n++)if(t[n].contain(e))return t[n]},addGeoCoord:function(e,t){this._nameCoordMap.set(e,t)},getGeoCoord:function(e){return this._nameCoordMap.get(e)},getBoundingRect:function(){return this._rect},dataToPoint:function(e,t,n){if("string"==typeof e&&(e=this.getGeoCoord(e)),e)return Pd.prototype.dataToPoint.call(this,e,t,n)},convertToPixel:ar(xa,"dataToPoint"),convertFromPixel:ar(xa,"pointToData")},_e(Sx,Pd);var Fw={dimensions:Sx.prototype.dimensions,create:function(e,t){var n=[];e.eachComponent("geo",function(o,i){var s=o.get("map"),l=o.get("aspectScale"),c=!0,f=Th_retrieveMap(s);f&&f[0]&&"svg"===f[0].type?(null==l&&(l=1),c=!1):null==l&&(l=.75);var h=new Sx(s+i,s,o.get("nameMap"),c);h.aspectScale=l,h.zoomLimit=o.get("scaleLimit"),n.push(h),wM(h,o),(o.coordinateSystem=h).model=o,h.resize=sc,h.resize(o,t)}),e.eachSeries(function(o){if("geo"===o.get("coordinateSystem")){var i=o.get("geoIndex")||0;o.coordinateSystem=n[i]}});var r={};return e.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var i=o.getMapType();r[i]=r[i]||[],r[i].push(o)}}),me(r,function(o,i){var s=new Sx(i,i,xr(Kt(o,function(l){return l.get("nameMap")})));s.zoomLimit=pe.apply(null,Kt(o,function(l){return l.get("scaleLimit")})),n.push(s),s.resize=sc,s.aspectScale=o[0].get("aspectScale"),s.resize(o[0],t),me(o,function(l){wM(l.coordinateSystem=s,l)})}),n},getFilledRegions:function(e,t,n){for(var r=(e||[]).slice(),o=ut(),i=0;i<r.length;i++)o.set(r[i].name,r[i]);return me(Gy.load(t,n).regions,function(s){var l=s.name;o.get(l)||r.push({name:l})}),r}};Yc("geo",Fw),oa(function(e){var t={};e.eachSeriesByType("map",function(n){var r=n.getMapType();if(!n.getHostGeoModel()&&!t[r]){var o={};me(n.seriesGroup,function(s){var l=s.coordinateSystem,c=s.originalData;s.get("showLegendSymbol")&&e.getComponent("legend")&&c.each(c.mapDimension("value"),function(f,h){var p=c.getName(h),y=l.getRegion(p);if(y&&!isNaN(f)){var b=o[p]||0,S=l.dataToPoint(y.center);o[p]=b+1,c.setItemLayout(h,{point:S,offset:b})}})});var i=n.getData();i.each(function(s){var l=i.getName(s),c=i.getItemLayout(s)||{};c.showLabel=!o[l],i.setItemLayout(s,c)}),t[r]=!0}})}),Ti(function(e){e.eachSeriesByType("map",function(t){var n=t.get("color"),r=t.getModel("itemStyle"),o=r.get("areaColor"),i=r.get("color")||n[t.seriesIndex%n.length];t.getData().setVisual({areaColor:o,color:i})})}),fa(Gf.PROCESSOR.STATISTIC,function(e){var t={};e.eachSeriesByType("map",function(n){var r=n.getHostGeoModel(),o=r?"o"+r.id:"i"+n.getMapType();(t[o]=t[o]||[]).push(n)}),me(t,function(n,r){for(var o=function(s,l){var c={};return me(s,function(f){f.each(f.mapDimension("value"),function(h,p){var y="ec-"+f.getName(p);c[y]=c[y]||[],isNaN(h)||c[y].push(h)})}),s[0].map(s[0].mapDimension("value"),function(f,h){for(var y="ec-"+s[0].getName(h),b=0,S=1/0,M=-1/0,k=c[y].length,O=0;O<k;O++)S=Math.min(S,c[y][O]),M=Math.max(M,c[y][O]),b+=c[y][O];return 0===k?NaN:"min"===l?S:"max"===l?M:"average"===l?b/k:b})}(Kt(n,function(s){return s.getData()}),n[0].get("mapValueCalculation")),i=0;i<n.length;i++)n[i].originalData=n[i].getData();for(i=0;i<n.length;i++)(n[i].seriesGroup=n)[i].needsDrawMap=0===i&&!n[i].getHostGeoModel(),n[i].setData(o.cloneShallow()),n[i].mainSeries=n[0]})}),ra(function(e){var t=[];me(e.series,function(n){n&&"map"===n.type&&(t.push(n),n.map=n.map||n.mapType,un(n,n.mapLocation))})}),Aw("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var uc=me,Om="\0__link_datas",Ig="\0__link_mainData";function Og(e){var t=e.mainData,n=e.datas;n||(n={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,PC(t,n,e),uc(n,function(r){uc(t.TRANSFERABLE_METHODS,function(o){r.wrapMethod(o,ar($1,e))})}),t.wrapMethod("cloneShallow",ar(g0,e)),uc(t.CHANGABLE_METHODS,function(r){t.wrapMethod(r,ar(Rd,e))}),_s(n[t.dataType]===t)}function $1(e,t){if(function(r){return r[Ig]===r}(this)){var n=Fn({},this[Om]);PC(n[this.dataType]=t,n,e)}else yl(t,this.dataType,this[Ig],e);return t}function Rd(e,t){return e.struct&&e.struct.update(this),t}function g0(e,t){return uc(t[Om],function(n,r){n!==t&&yl(n.cloneShallow(),r,t,e)}),t}function SM(e){var t=this[Ig];return null==e||null==t?t:t[Om][e]}function PC(e,t,n){e[Om]={},uc(t,function(r,o){yl(r,o,e,n)})}function yl(e,t,n,r){(n[Om][t]=e)[Ig]=n,e.dataType=t,r.struct&&(e[r.structAttr]=r.struct,r.struct[r.datasAttr[t]]=e),e.getLinkedData=SM}function Np(e,t){this.name=e||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=t}function Lp(e){this._nodes=[],this.hostModel=e}function CM(e,t){var n=e.isExpand?e.children:[],r=e.parentNode.children,o=e.hierNode.i?r[e.hierNode.i-1]:null;if(n.length){!function(s){for(var l=s.children,c=l.length,f=0,h=0;0<=--c;){var p=l[c];p.hierNode.prelim+=f,p.hierNode.modifier+=f,f+=p.hierNode.shift+(h+=p.hierNode.change)}}(e);var i=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;o?(e.hierNode.prelim=o.hierNode.prelim+t(e,o),e.hierNode.modifier=e.hierNode.prelim-i):e.hierNode.prelim=i}else o&&(e.hierNode.prelim=o.hierNode.prelim+t(e,o));e.parentNode.hierNode.defaultAncestor=function(s,l,c,f){if(l){for(var h=s,p=s,y=p.parentNode.children[0],b=l,S=h.hierNode.modifier,M=p.hierNode.modifier,k=y.hierNode.modifier,O=b.hierNode.modifier;b=Vw(b),p=Uy(p),b&&p;){h=Vw(h),y=Uy(y),h.hierNode.ancestor=s;var P=b.hierNode.prelim+O-p.hierNode.prelim-M+f(b,p);0<P&&(kc((R=b).hierNode.ancestor.parentNode===s.parentNode?R.hierNode.ancestor:c,s,P),M+=P,S+=P),O+=b.hierNode.modifier,M+=p.hierNode.modifier,S+=h.hierNode.modifier,k+=y.hierNode.modifier}b&&!Vw(h)&&(h.hierNode.thread=b,h.hierNode.modifier+=O-S),p&&!Uy(y)&&(y.hierNode.thread=p,y.hierNode.modifier+=M-k,c=s)}var R;return c}(e,o,e.parentNode.hierNode.defaultAncestor||r[0],t)}function RC(e){e.setLayout({x:e.hierNode.prelim+e.parentNode.hierNode.modifier},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function K1(e){return arguments.length?e:qy}function jy(e,t){var n={};return e-=Math.PI/2,n.x=t*Math.cos(e),n.y=t*Math.sin(e),n}function Vw(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function Uy(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function kc(e,t,n){var r=n/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=r,t.hierNode.shift+=n,t.hierNode.modifier+=n,t.hierNode.prelim+=n,e.hierNode.change+=r}function qy(e,t){return e.parentNode===t.parentNode?1:2}Np.prototype={constructor:Np,isRemoved:function(){return this.dataIndex<0},eachNode:function(e,t,n){"function"==typeof e&&(n=t,t=e,e=null),tr(e=e||{})&&(e={order:e});var r,o=e.order||"preorder",i=this[e.attr||"children"];"preorder"===o&&(r=t.call(n,this));for(var s=0;!r&&s<i.length;s++)i[s].eachNode(e,t,n);"postorder"===o&&t.call(n,this)},updateDepthAndHeight:function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var r=this.children[n];r.updateDepthAndHeight(e+1),r.height>t&&(t=r.height)}this.height=t+1},getNodeById:function(e){if(this.getId()===e)return this;for(var t=0,n=this.children,r=n.length;t<r;t++){var o=n[t].getNodeById(e);if(o)return o}},contains:function(e){if(e===this)return!0;for(var t=0,n=this.children,r=n.length;t<r;t++){var o=n[t].contains(e);if(o)return o}},getAncestors:function(e){for(var t=[],n=e?this:this.parentNode;n;)t.push(n),n=n.parentNode;return t.reverse(),t},getValue:function(e){var t=this.hostTree.data;return t.get(t.getDimension(e||"value"),this.dataIndex)},setLayout:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(e){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(e)},setVisual:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},getVisual:function(e,t){return this.hostTree.data.getItemVisual(this.dataIndex,e,t)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},isDescendantOf:function(e){return e!==this&&e.isAncestorOf(this)}},Lp.prototype={constructor:Lp,type:"tree",eachNode:function(e,t,n){this.root.eachNode(e,t,n)},getNodeByDataIndex:function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},getNodeByName:function(e){return this.root.getNodeByName(e)},update:function(){for(var e=this.data,t=this._nodes,n=0,r=t.length;n<r;n++)t[n].dataIndex=-1;for(n=0,r=e.count();n<r;n++)t[e.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},Lp.createTree=function(e,t,n){var r=new Lp(t),o=[],i=1;(function c(f,h){var p=f.value;i=Math.max(i,rn(p)?p.length:1),o.push(f);var y=new Np(f.name,r);h?function(e,t){e.parentNode!==t&&(t.children.push(e),e.parentNode=t)}(y,h):r.root=y,r._nodes.push(y);var b=f.children;if(b)for(var S=0;S<b.length;S++)c(b[S],y)})(e),r.root.updateDepthAndHeight(0);var s=Jv(o,{coordDimensions:["value"],dimensionsCount:i}),l=new ml(s,t);return l.initData(o),n&&n(l),Og({mainData:l,struct:r,structAttr:"tree"}),r.update(),r},ba.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(e){var t={name:e.name,children:e.data},n=new $o(e.leaves||{},this,this.ecModel),r=Lp.createTree(t,this,function(s){s.wrapMethod("getItemModel",function(l,c){var f=r.getNodeByDataIndex(c);return f.children.length&&f.isExpand||(l.parentModel=n),l})}),o=0;r.eachNode("preorder",function(s){s.depth>o&&(o=s.depth)});var i=e.expandAndCollapse&&0<=e.initialTreeDepth?e.initialTreeDepth:o;return r.root.eachNode("preorder",function(s){var l=s.hostTree.data.getRawDataItem(s.dataIndex);s.isExpand=l&&null!=l.collapsed?!l.collapsed:s.depth<=i}),r.data},getOrient:function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},formatTooltip:function(e){for(var t=this.getData().tree,n=t.root.children[0],r=t.getNodeByDataIndex(e),o=r.getValue(),i=r.name;r&&r!==n;)i=r.parentNode.name+"."+i,r=r.parentNode;return Wo(i+(isNaN(o)||null==o?"":" : "+o))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});var Zf=Xu({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.childPoints,r=n.length,o=t.parentPoint,i=n[0],s=n[r-1];if(1===r)return e.moveTo(o[0],o[1]),void e.lineTo(i[0],i[1]);var l=t.orient,c="TB"===l||"BT"===l?0:1,f=1-c,h=Pn(t.forkPosition,1),p=[];p[c]=o[c],p[f]=o[f]+(s[f]-o[f])*h,e.moveTo(o[0],o[1]),e.lineTo(p[0],p[1]),e.moveTo(i[0],i[1]),p[c]=i[c],e.lineTo(p[0],p[1]),p[c]=s[c],e.lineTo(p[0],p[1]),e.lineTo(s[0],s[1]);for(var y=1;y<r-1;y++){var b=n[y];e.moveTo(b[0],b[1]),p[c]=b[c],e.lineTo(p[0],p[1])}}});function m0(e,t){var n=e.getItemLayout(t);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==e.getItemVisual(t,"symbol")}function kM(e,t,n){return n.itemModel=t,n.itemStyle=t.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=t.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=t.getModel("lineStyle").getLineStyle(),n.labelModel=t.getModel("label"),n.hoverLabelModel=t.getModel("emphasis.label"),n.symbolInnerColor=!1===e.isExpand&&0!==e.children.length?n.itemStyle.fill:"#fff",n}function Xy(e,t,n,r,o,i){var s=!n,l=e.tree.getNodeByDataIndex(t),c=l.getModel(),f=(i=kM(l,c,i),e.tree.root),h=l.parentNode===f?l:l.parentNode||l,p=e.getItemGraphicEl(h.dataIndex),y=h.getLayout(),b=p?{x:p.position[0],y:p.position[1],rawX:p.__radialOldRawX,rawY:p.__radialOldRawY}:y,S=l.getLayout();s?(n=new Dp(e,t,i)).attr("position",[b.x,b.y]):n.updateData(e,t,i),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=S.rawX,n.__radialRawY=S.rawY,r.add(n),e.setItemGraphicEl(t,n),so(n,{position:[S.x,S.y]},o);var M=n.getSymbolPath();if("radial"===i.layout){var k,O,P=f.children[0],R=P.getLayout(),F=P.children.length;if(S.x===R.x&&!0===l.isExpand){var G={};G.x=(P.children[0].getLayout().x+P.children[F-1].getLayout().x)/2,G.y=(P.children[0].getLayout().y+P.children[F-1].getLayout().y)/2,(k=Math.atan2(G.y-R.y,G.x-R.x))<0&&(k=2*Math.PI+k),(O=G.x<R.x)&&(k-=Math.PI)}else(k=Math.atan2(S.y-R.y,S.x-R.x))<0&&(k=2*Math.PI+k),0===l.children.length||0!==l.children.length&&!1===l.isExpand?(O=S.x<R.x)&&(k-=Math.PI):(O=S.x>R.x)||(k-=Math.PI);var X=O?"left":"right",Y=i.labelModel.get("rotate"),Q=Y*(Math.PI/180);M.setStyle({textPosition:i.labelModel.get("position")||X,textRotation:null==Y?-k:Q,textOrigin:"center",verticalAlign:"middle"})}!function(ne,le,ce,ye,xe,Te,Ee,Ve,Be){var nt=Be.edgeShape,bt=ye.__edge;if("curve"===nt)le.parentNode&&le.parentNode!==ce&&so(bt=bt||(ye.__edge=new np({shape:Nh(Be,xe,xe),style:un({opacity:0,strokeNoScale:!0},Be.lineStyle)})),{shape:Nh(Be,Te,Ee),style:un({opacity:1},Be.lineStyle)},ne);else if("polyline"===nt&&"orthogonal"===Be.layout&&le!==ce&&le.children&&0!==le.children.length&&!0===le.isExpand){for(var _t=le.children,wt=[],Lt=0;Lt<_t.length;Lt++){var Ht=_t[Lt].getLayout();wt.push([Ht.x,Ht.y])}so(bt=bt||(ye.__edge=new Zf({shape:{parentPoint:[Ee.x,Ee.y],childPoints:[[Ee.x,Ee.y]],orient:Be.orient,forkPosition:Be.edgeForkPosition},style:un({opacity:0,strokeNoScale:!0},Be.lineStyle)})),{shape:{parentPoint:[Ee.x,Ee.y],childPoints:wt},style:un({opacity:1},Be.lineStyle)},ne)}Ve.add(bt)}(o,l,f,n,b,y,S,r,i)}function Em(e,t,n,r,o,i){for(var s,p,l=e.tree.getNodeByDataIndex(t),c=e.tree.root,f=l.getModel(),h=(i=kM(l,f,i),l.parentNode===c?l:l.parentNode||l);null==(s=h.getLayout());)h=h.parentNode===c?h:h.parentNode||h;so(n,{position:[s.x+1,s.y+1]},o,function(){r.remove(n),e.setItemGraphicEl(t,null)}),n.fadeOut(null,{keepLabel:!0});var y=e.getItemGraphicEl(h.dataIndex).__edge,b=n.__edge||(!1===h.isExpand||1===h.children.length?y:void 0);p=i.edgeShape,b&&("curve"===p?so(b,{shape:Nh(i,s,s),style:{opacity:0}},o,function(){r.remove(b)}):"polyline"===p&&"orthogonal"===i.layout&&so(b,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},o,function(){r.remove(b)}))}function Nh(e,t,n){var r,o,i,s,l,c,f,h,p=e.orient;if("radial"!==e.layout)return l=t.x,f=t.y,c=n.x,h=n.y,"LR"!==p&&"RL"!==p||(r=l+(c-l)*e.curvature,o=f,i=c+(l-c)*e.curvature,s=h),"TB"!==p&&"BT"!==p||(r=l,o=f+(h-f)*e.curvature,i=c,s=h+(f-h)*e.curvature),{x1:l,y1:f,x2:c,y2:h,cpx1:r,cpy1:o,cpx2:i,cpy2:s};c=n.rawX,h=n.rawY;var y=jy(l=t.rawX,f=t.rawY),b=jy(l,f+(h-f)*e.curvature),S=jy(c,h+(f-h)*e.curvature),M=jy(c,h);return{x1:y.x,y1:y.y,x2:M.x,y2:M.y,cpx1:b.x,cpy1:b.y,cpx2:S.x,cpy2:S.y}}function Yy(e,t){for(var n,r=[e];n=r.pop();)if(t(n),n.isExpand){var o=n.children;if(o.length)for(var i=o.length-1;0<=i;i--)r.push(o[i])}}function Zy(e,t,n){if(e&&0<=dn(t,e.type)){var r=n.getData().tree.root,o=e.targetNode;if("string"==typeof o&&(o=r.getNodeById(o)),o&&r.contains(o))return{node:o};var i=e.targetNodeId;if(null!=i&&(o=r.getNodeById(i)))return{node:o}}}function Hw(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function $f(e,t){return 0<=dn(Hw(e),t)}function NC(e,t){for(var n=[];e;){var r=e.dataIndex;n.push({name:e.name,dataIndex:r,value:t.getRawValue(r)}),e=e.parentNode}return n.reverse(),n}function J1(e){this.group=new pn,e.add(this.group)}function MM(e,t,n,r,o,i){var s=[[o?e:e-5,t],[e+n,t],[e+n,t+r],[o?e:e-5,t+r]];return i||s.splice(2,0,[e+n+5,t+r/2]),o||s.push([e,t+r/2]),s}function Eg(e){var t=zp(e);return t.stroke=t.fill=t.lineWidth=null,t}Is({type:"tree",init:function(e,t){this._mainGroup=new pn,this._controller=new Rp(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(e,t,n,r){var o=e.getData(),i=e.layoutInfo,s=this._mainGroup,l=e.get("layout");s.attr("position","radial"===l?[i.x+i.width/2,i.y+i.height/2]:[i.x,i.y]),this._updateViewCoordSys(e,i,l),this._updateController(e,t,n);var c=this._data,f={expandAndCollapse:e.get("expandAndCollapse"),layout:l,edgeShape:e.get("edgeShape"),edgeForkPosition:e.get("edgeForkPosition"),orient:e.getOrient(),curvature:e.get("lineStyle.curveness"),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};o.diff(c).add(function(h){m0(o,h)&&Xy(o,h,null,s,e,f)}).update(function(h,p){var y=c.getItemGraphicEl(p);m0(o,h)?Xy(o,h,y,s,e,f):y&&Em(c,p,y,s,e,f)}).remove(function(h){var p=c.getItemGraphicEl(h);p&&Em(c,h,p,s,e,f)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===f.expandAndCollapse&&o.eachItemGraphicEl(function(h,p){h.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:p})})}),this._data=o},_updateViewCoordSys:function(e){var t=e.getData(),n=[];t.each(function(c){var f=t.getItemLayout(c);!f||isNaN(f.x)||isNaN(f.y)||n.push([+f.x,+f.y])});var r=[],o=[];ca(n,r,o);var i=this._min,s=this._max;o[0]-r[0]==0&&(r[0]=i?i[0]:r[0]-1,o[0]=s?s[0]:o[0]+1),o[1]-r[1]==0&&(r[1]=i?i[1]:r[1]-1,o[1]=s?s[1]:o[1]+1);var l=e.coordinateSystem=new Pd;l.zoomLimit=e.get("scaleLimit"),l.setBoundingRect(r[0],r[1],o[0]-r[0],o[1]-r[1]),l.setCenter(e.get("center")),l.setZoom(e.get("zoom")),this.group.attr({position:l.position,scale:l.scale}),this._viewCoordSys=l,this._min=r,this._max=o},_updateController:function(e,t,n){var r=this._controller,o=this._controllerHost,i=this.group;r.setPointerChecker(function(s,l,c){var f=i.getBoundingRect();return f.applyTransform(i.transform),f.contain(l,c)&&!yx(s,n,e)}),r.enable(e.get("roam")),o.zoomLimit=e.get("scaleLimit"),o.zoom=e.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",function(s){Bw(o,s.dx,s.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:s.dx,dy:s.dy})},this).on("zoom",function(s){zw(o,s.scale,s.originX,s.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:s.scale,originX:s.originX,originY:s.originY}),this._updateNodeAndLinkScale(e)},this)},_updateNodeAndLinkScale:function(e){var t=e.getData(),n=this._getNodeGlobalScale(e),r=[n,n];t.eachItemGraphicEl(function(o,i){o.attr("scale",r)})},_getNodeGlobalScale:function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=this._nodeScaleRatio,r=t.scale,o=r&&r[0]||1;return((t.getZoom()-1)*n+1)/o},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}}),jr({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var r=e.dataIndex,o=n.getData().tree.getNodeByDataIndex(r);o.isExpand=!o.isExpand})}),jr({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var r=_x(n.coordinateSystem,e);n.setCenter&&n.setCenter(r.center),n.setZoom&&n.setZoom(r.zoom)})}),Ti(Ap("tree","circle")),oa(function(e,t){e.eachSeriesByType("tree",function(n){!function(r,o){var Y,i=(Y=o,No(r.getBoxLayoutParams(),{width:Y.getWidth(),height:Y.getHeight()}));r.layoutInfo=i;var s=r.get("layout"),l=0,c=0,f=null;f="radial"===s?(l=2*Math.PI,c=Math.min(i.height,i.width)/2,K1(function(X,Y){return(X.parentNode===Y.parentNode?1:2)/X.depth})):(l=i.width,c=i.height,K1());var h=r.getData().tree.root,p=h.children[0];if(p){(function(X){X.hierNode={defaultAncestor:null,ancestor:X,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var Y,Q,ne=[X];Y=ne.pop();)if(Q=Y.children,Y.isExpand&&Q.length)for(var le=Q.length-1;0<=le;le--){var ce=Q[le];ce.hierNode={defaultAncestor:null,ancestor:ce,prelim:0,modifier:0,change:0,shift:0,i:le,thread:null},ne.push(ce)}})(h),function(X,Y,Q){for(var ne,le=[X],ce=[];ne=le.pop();)if(ce.push(ne),ne.isExpand){var ye=ne.children;if(ye.length)for(var xe=0;xe<ye.length;xe++)le.push(ye[xe])}for(;ne=ce.pop();)Y(ne,Q)}(p,CM,f),h.hierNode.modifier=-p.hierNode.prelim,Yy(p,RC);var y=p,b=p,S=p;Yy(p,function(X){var Y=X.getLayout().x;Y<y.getLayout().x&&(y=X),Y>b.getLayout().x&&(b=X),X.depth>S.depth&&(S=X)});var M=y===b?1:f(y,b)/2,k=M-y.getLayout().x,O=0,P=0,R=0,F=0;if("radial"===s)O=l/(b.getLayout().x+M+k),P=c/(S.depth-1||1),Yy(p,function(X){var Y=jy(R=(X.getLayout().x+k)*O,F=(X.depth-1)*P);X.setLayout({x:Y.x,y:Y.y,rawX:R,rawY:F},!0)});else{var G=r.getOrient();"RL"===G||"LR"===G?(P=c/(b.getLayout().x+M+k),O=l/(S.depth-1||1),Yy(p,function(X){F=(X.getLayout().x+k)*P,X.setLayout({x:R="LR"===G?(X.depth-1)*O:l-(X.depth-1)*O,y:F},!0)})):"TB"!==G&&"BT"!==G||(O=l/(b.getLayout().x+M+k),P=c/(S.depth-1||1),Yy(p,function(X){R=(X.getLayout().x+k)*O,X.setLayout({x:R,y:F="TB"===G?(X.depth-1)*P:c-(X.depth-1)*P},!0)}))}}}(n,t)})}),ba.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(e,t){var n={name:e.name,children:e.data};!function l(c){var f=0;me(c.children,function(p){l(p);var y=p.value;rn(y)&&(y=y[0]),f+=y});var h=c.value;rn(h)&&(h=h[0]),null!=h&&!isNaN(h)||(h=f),h<0&&(h=0),rn(c.value)?c.value[0]=h:c.value=h}(n);var r=e.levels||[],o=new $o({itemStyle:this.designatedVisualItemStyle={}},this,t),i=Kt((r=e.levels=function(l,c){var f,h=c.get("color");if(h)return me(l=l||[],function(p){var y=new $o(p),b=y.get("color");(y.get("itemStyle.color")||b&&"none"!==b)&&(f=!0)}),!f&&((l[0]||(l[0]={})).color=h.slice()),l}(r,t))||[],function(l){return new $o(l,o,t)},this),s=Lp.createTree(n,this,function(l){l.wrapMethod("getItemModel",function(c,f){var h=s.getNodeByDataIndex(f);return c.parentModel=i[h.depth]||o,c})});return s.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(e){var t=this.getData(),n=this.getRawValue(e),r=rn(n)?ec(n[0]):ec(n);return Wo(t.getName(e)+": "+r)},getDataParams:function(e){var t=ba.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=NC(n,this),t},setLayoutInfo:function(e){this.layoutInfo=this.layoutInfo||{},Fn(this.layoutInfo,e)},mapIdToIndex:function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=ut(),this._idIndexMapCount=0);var n=t.get(e);return null==n&&t.set(e,n=this._idIndexMapCount++),n},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}}),J1.prototype={constructor:J1,render:function(e,t,n,r){var o=e.getModel("breadcrumb"),i=this.group;if(i.removeAll(),o.get("show")&&n){var s=o.getModel("itemStyle"),l=s.getModel("textStyle"),c={pos:{left:o.get("left"),right:o.get("right"),top:o.get("top"),bottom:o.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:o.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,c,l),this._renderContent(e,c,s,l,r),lp(i,c.pos,c.box)}},_prepare:function(e,t,n){for(var r=e;r;r=r.parentNode){var o=r.getModel().get("name"),i=n.getTextRect(o),s=Math.max(i.width+16,t.emptyItemWidth);t.totalWidth+=s+8,t.renderList.push({node:r,text:o,width:s})}},_renderContent:function(e,t,n,r,o){for(var i,s,l=0,c=t.emptyItemWidth,f=e.get("breadcrumb.height"),h=(G=void 0,void 0,void 0,Q=void 0,ne=void 0,le=void 0,ce=void 0,Y=(F=t.box).height,Q=Pn((R=t.pos).x,X=F.width),ne=Pn(R.y,Y),le=Pn(R.x2,X),ce=Pn(R.y2,Y),(isNaN(Q)||isNaN(parseFloat(R.x)))&&(Q=0),(isNaN(le)||isNaN(parseFloat(R.x2)))&&(le=X),(isNaN(ne)||isNaN(parseFloat(R.y)))&&(ne=0),(isNaN(ce)||isNaN(parseFloat(R.y2)))&&(ce=Y),G=bh(G||0),{width:Math.max(le-Q-G[1]-G[3],0),height:Math.max(ce-ne-G[0]-G[2],0)}),p=t.totalWidth,y=t.renderList,b=y.length-1;0<=b;b--){var S=y[b],M=S.node,k=S.width,O=S.text;p>h.width&&(p-=k-c,k=c,O=null);var P=new wo({shape:{points:MM(l,0,k,f,b===y.length-1,0===b)},style:un(n.getItemStyle(),{lineJoin:"bevel",text:O,textFill:r.getTextColor(),textFont:r.getFont()}),z:10,onclick:ar(o,M)});this.group.add(P),P.eventData={componentType:"series",componentSubType:"treemap",componentIndex:(i=e).componentIndex,seriesIndex:i.componentIndex,seriesName:i.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:(s=M)&&s.dataIndex,name:s&&s.name},treePathInfo:s&&NC(s,i)},l+=k+8}var R,F,G,X,Y,Q,ne,le,ce},remove:function(){this.group.removeAll()}};var p0=Nn,v0=pn,Ww=ei,Kf=me,Q1=["label"],Gw=["emphasis","label"],Bp=["upperLabel"],jw=["emphasis","upperLabel"],zp=Yo([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);function $y(e,t,n,r,o,i,s,l,c,f){if(s){var h=s.getLayout(),p=e.getData();if(p.setItemGraphicEl(s.dataIndex,null),h&&h.isInView){var y=h.width,b=h.height,S=h.borderWidth,M=h.invisible,k=s.getRawIndex(),O=l&&l.getRawIndex(),P=s.viewChildren,R=h.upperHeight,F=P&&P.length,G=s.getModel("itemStyle"),X=s.getModel("emphasis.itemStyle"),Y=Te("nodeGroup",v0);if(Y){if(c.add(Y),Y.attr("position",[h.x||0,h.y||0]),Y.__tmNodeWidth=y,Y.__tmNodeHeight=b,h.isAboveViewRoot)return Y;var Q=s.getModel(),ne=Te("background",Ww,f,1);if(ne&&function(Ee,Ve,Be){if(Ve.dataIndex=s.dataIndex,Ve.seriesIndex=e.seriesIndex,Ve.setShape({x:0,y:0,width:y,height:b}),M)ce(Ve);else{Ve.invisible=!1;var nt=s.getVisual("borderColor",!0),bt=X.get("borderColor"),_t=Eg(G);_t.fill=nt;var wt=zp(X);if(wt.fill=bt,Be){var Lt=y-2*S;ye(_t,wt,nt,Lt,R,{x:S,y:0,width:Lt,height:R})}else _t.text=wt.text=null;Ve.setStyle(_t),os(Ve,wt)}Ee.add(Ve)}(Y,ne,F&&h.upperLabelHeight),F)Fc(Y)&&rg(Y,!1),ne&&(rg(ne,!0),p.setItemGraphicEl(s.dataIndex,ne));else{var le=Te("content",Ww,f,2);le&&function(Ee,Ve){Ve.dataIndex=s.dataIndex,Ve.seriesIndex=e.seriesIndex;var Be=Math.max(y-2*S,0),nt=Math.max(b-2*S,0);if(Ve.culling=!0,Ve.setShape({x:S,y:S,width:Be,height:nt}),M)ce(Ve);else{Ve.invisible=!1;var bt=s.getVisual("color",!0),_t=Eg(G);_t.fill=bt;var wt=zp(X);ye(_t,wt,bt,Be,nt),Ve.setStyle(_t),os(Ve,wt)}Ee.add(Ve)}(Y,le),ne&&Fc(ne)&&rg(ne,!1),rg(Y,!0),p.setItemGraphicEl(s.dataIndex,Y)}return Y}}}function ce(Ee){Ee.invisible||i.push(Ee)}function ye(Ee,Ve,Be,nt,bt,_t){var wt=Q.get("name"),Lt=Q.getModel(_t?Bp:Q1),Ht=Q.getModel(_t?jw:Gw),Ln=Lt.getShallow("show");Cu(Ee,Ve,Lt,Ht,{defaultText:Ln?wt:null,autoColor:Be,isRectText:!0,labelFetcher:e,labelDataIndex:s.dataIndex,labelProp:_t?"upperLabel":"label"}),xe(Ee,_t,h),xe(Ve,_t,h),_t&&(Ee.textRect=Gn(_t)),Ee.truncate=Ln&&Lt.get("ellipsis")?{outerWidth:nt,outerHeight:bt,minChar:2}:null}function xe(Ee,Ve,Be){var nt=Ee.text;if(!Ve&&Be.isLeafRoot&&null!=nt){var bt=e.get("drillDownIcon",!0);Ee.text=bt?bt+" "+nt:nt}}function Te(Ee,Ve,Be,nt){var Lt,Ht,bt=null!=O&&n[Ee][O],_t=o[Ee];return bt?(n[Ee][O]=null,Lt=bt,Ht=Ee,(_t[k]={}).old="nodeGroup"===Ht?Lt.position.slice():Fn({},Lt.shape)):M||((bt=new Ve({z:function(wt,Lt){var Ht=10*wt+Lt;return(Ht-1)/Ht}(Be,nt)})).__tmDepth=Be,function(wt,Lt,Ht){var Ln=wt[k]={},Ft=s.parentNode;if(Ft&&(!r||"drillDown"===r.direction)){var Yn=0,or=0,Tr=o.background[Ft.getRawIndex()];!r&&Tr&&Tr.old&&(Yn=Tr.old.width,or=Tr.old.height),Ln.old="nodeGroup"===Ht?[0,or]:{x:Yn,y:or,width:0,height:0}}Ln.fadein="nodeGroup"!==Ht}(_t,0,bt.__tmStorageName=Ee)),t[Ee][k]=bt}}Is({type:"treemap",init:function(e,t){this._storage={nodeGroup:[],background:[],content:[]},this._state="ready"},render:function(e,t,n,r){if(!(dn(t.findComponents({mainType:"series",subType:"treemap",query:r}),e)<0)){this.seriesModel=e,this.api=n,this.ecModel=t;var o=Zy(r,["treemapZoomToNode","treemapRootToNode"],e),i=r&&r.type,s=e.layoutInfo,l=!this._oldTree,c=this._storage,f="treemapRootToNode"===i&&o&&c?{rootNodeGroup:c.nodeGroup[o.node.getRawIndex()],direction:r.direction}:null,h=this._giveContainerGroup(s),p=this._doRender(h,e,f);l||i&&"treemapZoomToNode"!==i&&"treemapRootToNode"!==i?p.renderFinally():this._doAnimation(h,p,e,f),this._resetController(n),this._renderBreadcrumb(e,n,o)}},_giveContainerGroup:function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new v0,this._initEvents(t),this.group.add(t)),t.attr("position",[e.x,e.y]),t},_doRender:function(e,t,n){var r=t.getData().tree,o=this._oldTree,i={nodeGroup:[],background:[],content:[]},s={nodeGroup:[],background:[],content:[]},l=this._storage,c=[],f=ar($y,t,s,l,n,i,c);!function b(S,M,k,O,P){function R(G){return G.getId()}function F(G,X){var Y=null!=G?S[G]:null,Q=null!=X?M[X]:null,ne=f(Y,Q,k,P);ne&&b(Y&&Y.viewChildren||[],Q&&Q.viewChildren||[],ne,O,P+1)}O?Kf(M=S,function(G,X){G.isRemoved()||F(X,X)}):new jf(M,S,R,R).add(F).update(F).remove(ar(F,null)).execute()}(r.root?[r.root]:[],o&&o.root?[o.root]:[],e,r===o||!o,0);var h,p,y=(p={nodeGroup:[],background:[],content:[]},(h=l)&&Kf(h,function(b,S){var M=p[S];Kf(b,function(k){k&&(M.push(k),k.__tmWillDelete=1)})}),p);return this._oldTree=r,this._storage=s,{lastsForAnimation:i,willDeleteEls:y,renderFinally:function(){Kf(y,function(b){Kf(b,function(S){S.parent&&S.parent.remove(S)})}),Kf(c,function(b){b.invisible=!0,b.dirty()})}}},_doAnimation:function(e,t,n,r){if(n.get("animation")){var o=n.get("animationDurationUpdate"),i=n.get("animationEasing"),s=(c=[],f={},{add:function(h,p,y,b,S){return tr(b)&&(S=b,b=0),!f[h.id]&&(f[h.id]=1,c.push({el:h,target:p,time:y,delay:b,easing:S}),!0)},done:function(h){return l=h,this},start:function(){for(var h=c.length,p=0,y=c.length;p<y;p++){var b=c[p];b.el.animateTo(b.target,b.time,b.delay,b.easing,S)}return this;function S(){--h||(c.length=0,f={},l&&l())}}});Kf(t.willDeleteEls,function(l,c){Kf(l,function(f,h){if(!f.invisible){var p,y=f.parent;if(r&&"drillDown"===r.direction)p=y===r.rootNodeGroup?{shape:{x:0,y:0,width:y.__tmNodeWidth,height:y.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var b=0,S=0;y.__tmWillDelete||(b=y.__tmNodeWidth/2,S=y.__tmNodeHeight/2),p="nodeGroup"===c?{position:[b,S],style:{opacity:0}}:{shape:{x:b,y:S,width:0,height:0},style:{opacity:0}}}p&&s.add(f,p,o,i)}})}),Kf(this._storage,function(l,c){Kf(l,function(f,h){var p=t.lastsForAnimation[c][h],y={};p&&("nodeGroup"===c?p.old&&(y.position=f.position.slice(),f.attr("position",p.old)):(p.old&&(y.shape=Fn({},f.shape),f.setShape(p.old)),p.fadein?(f.setStyle("opacity",0),y.style={opacity:1}):1!==f.style.opacity&&(y.style={opacity:1})),s.add(f,y,o,i))})},this),this._state="animating",s.done(p0(function(){this._state="ready",t.renderFinally()},this)).start()}var l,c,f},_resetController:function(e){var t=this._controller;t||((t=this._controller=new Rp(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",p0(this._onPan,this)),t.on("zoom",p0(this._onZoom,this)));var n=new Vo(0,0,e.getWidth(),e.getHeight());t.setPointerChecker(function(r,o,i){return n.contain(o,i)})},_clearController:function(){var e=this._controller;e&&(e.dispose(),e=null)},_onPan:function(e){if("animating"!==this._state&&(3<Math.abs(e.dx)||3<Math.abs(e.dy))){var t=this.seriesModel.getData().tree.root;if(!t)return;var n=t.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},_onZoom:function(e){var t=e.originX,n=e.originY;if("animating"!==this._state){var r=this.seriesModel.getData().tree.root;if(!r)return;var o=r.getLayout();if(!o)return;var i=new Vo(o.x,o.y,o.width,o.height),s=this.seriesModel.layoutInfo;t-=s.x,n-=s.y;var l=ui();Vl(l,l,[-t,-n]),lc(l,l,[e.scale,e.scale]),Vl(l,l,[t,n]),i.applyTransform(l),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x,y:i.y,width:i.width,height:i.height}})}},_initEvents:function(e){e.on("click",function(t){if("ready"===this._state){var n=this.seriesModel.get("nodeClick",!0);if(n){var r=this.findTarget(t.offsetX,t.offsetY);if(r){var o=r.node;if(o.getLayout().isLeafRoot)this._rootToNode(r);else if("zoomToNode"===n)this._zoomToNode(r);else if("link"===n){var i=o.hostTree.data.getItemModel(o.dataIndex),s=i.get("link",!0),l=i.get("target",!0)||"blank";s&&su(s,l)}}}}},this)},_renderBreadcrumb:function(e,t,n){n=n||(n=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||{node:e.getData().tree.root},(this._breadcrumb||(this._breadcrumb=new J1(this.group))).render(e,t,n.node,p0(function(r){"animating"!==this._state&&($f(e.getViewRoot(),r)?this._rootToNode({node:r}):this._zoomToNode({node:r}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},_rootToNode:function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},findTarget:function(e,t){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(r){var o=this._storage.background[r.getRawIndex()];if(o){var i=o.transformCoordToLocal(e,t),s=o.shape;if(!(s.x<=i[0]&&i[0]<=s.x+s.width&&s.y<=i[1]&&i[1]<=s.y+s.height))return!1;n={node:r,offsetX:i[0],offsetY:i[1]}}},this),n}});for(var e_=function(){},Fp=["treemapZoomToNode","treemapRender","treemapMove"],Lh=0;Lh<Fp.length;Lh++)jr({type:Fp[Lh],update:"updateView"},e_);jr({type:"treemapRootToNode",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},function(n,r){var o=Zy(e,["treemapZoomToNode","treemapRootToNode"],n);if(o){var i=n.getViewRoot();i&&(e.direction=$f(i,o.node)?"rollUp":"drillDown"),n.resetViewRoot(o.node)}})});var b0=me,t_=xt,Ni=function(e){var t=e.mappingMethod,n=e.type,r=this.option=Gn(e);this.type=n,this.mappingMethod=t,this._normalizeData=TM[t];var o=Pm[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._doMap=o._doMap[t],"piecewise"===t?(kx(r),function(i){var s=i.pieceList;i.hasSpecialVisual=!1,me(s,function(l,c){l.originIndex=c,null!=l.visual&&(i.hasSpecialVisual=!0)})}(r)):"category"===t?r.categories?function(i){var s=i.categories,l=i.visual,c=i.categoryMap={};if(b0(s,function(p,y){c[p]=y}),!rn(l)){var f=[];xt(l)?b0(l,function(p,y){var b=c[y];f[null!=b?b:-1]=p}):f[-1]=l,l=r_(i,f)}for(var h=s.length-1;0<=h;h--)null==l[h]&&(delete c[s[h]],s.pop())}(r):kx(r,!0):(_s("linear"!==t||r.dataExtent),kx(r))};Ni.prototype={constructor:Ni,mapValueToVisual:function(e){var t=this._normalizeData(e);return this._doMap(t,e)},getNormalizer:function(){return Nn(this._normalizeData,this)}};var Pm=Ni.visualHandlers={color:{applyVisual:Tx("color"),getColorMapper:function(){var e=this.option;return Nn("category"===e.mappingMethod?function(t,n){return n||(t=this._normalizeData(t)),Dx.call(this,t)}:function(t,n,r){var o=!!r;return n||(t=this._normalizeData(t)),r=gs(t,e.parsedVisual,r),o?r:nl(r,"rgba")},this)},_doMap:{linear:function(e){return nl(gs(e,this.option.parsedVisual),"rgba")},category:Dx,piecewise:function(e,t){var n=n_.call(this,t);return null==n&&(n=nl(gs(e,this.option.parsedVisual),"rgba")),n},fixed:Vp}},colorHue:Mx(function(e,t){return Gl(e,t)}),colorSaturation:Mx(function(e,t){return Gl(e,null,t)}),colorLightness:Mx(function(e,t){return Gl(e,null,null,t)}),colorAlpha:Mx(function(e,t){return Vd(e,t)}),opacity:{applyVisual:Tx("opacity"),_doMap:Ky([0,1])},liftZ:{applyVisual:Tx("liftZ"),_doMap:{linear:Vp,category:Vp,piecewise:Vp,fixed:Vp}},symbol:{applyVisual:function(e,t,n){var r=this.mapValueToVisual(e);if(tr(r))n("symbol",r);else if(t_(r))for(var o in r)r.hasOwnProperty(o)&&n(o,r[o])},_doMap:{linear:_0,category:Dx,piecewise:function(e,t){var n=n_.call(this,t);return null==n&&(n=_0.call(this,e)),n},fixed:Vp}},symbolSize:{applyVisual:Tx("symbolSize"),_doMap:Ky([0,1])}};function kx(e,t){var n=e.visual,r=[];xt(n)?b0(n,function(o){r.push(o)}):null!=n&&r.push(n),t||1!==r.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(r[1]=r[0]),r_(e,r)}function Mx(e){return{applyVisual:function(t,n,r){t=this.mapValueToVisual(t),r("color",e(n("color"),t))},_doMap:Ky([0,1])}}function _0(e){var t=this.option.visual;return t[Math.round(yi(e,[0,1],[0,t.length-1],!0))]||{}}function Tx(e){return function(t,n,r){r(e,this.mapValueToVisual(t))}}function Dx(e){var t=this.option.visual;return t[this.option.loop&&-1!==e?e%t.length:e]}function Vp(){return this.option.visual[0]}function Ky(e){return{linear:function(t){return yi(t,e,this.option.visual,!0)},category:Dx,piecewise:function(t,n){var r=n_.call(this,n);return null==r&&(r=yi(t,e,this.option.visual,!0)),r},fixed:Vp}}function n_(e){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var r=n[Ni.findPieceIndex(e,n)];if(r&&r.visual)return r.visual[this.type]}}function r_(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=Kt(t,function(n){return Ru(n)})),t}var TM={linear:function(e){return yi(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,n=Ni.findPieceIndex(e,t,!0);if(null!=n)return yi(n,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return null==t?-1:t},fixed:Pt};function Ax(e,t,n){return e?t<=n:t<n}Ni.listVisualTypes=function(){var e=[];return me(Pm,function(t,n){e.push(n)}),e},Ni.addVisualHandler=function(e,t){Pm[e]=t},Ni.isValidType=function(e){return Pm.hasOwnProperty(e)},Ni.eachVisual=function(e,t,n){xt(e)?me(e,t,n):t.call(n,e)},Ni.mapVisual=function(e,t,n){var r,o=rn(e)?[]:xt(e)?{}:(r=!0,null);return Ni.eachVisual(e,function(i,s){var l=t.call(n,i,s);r?o=l:o[s]=l}),o},Ni.retrieveVisuals=function(e){var t,n={};return e&&b0(Pm,function(r,o){e.hasOwnProperty(o)&&(n[o]=e[o],t=!0)}),t?n:null},Ni.prepareVisualTypes=function(e){if(t_(e)){var t=[];b0(e,function(n,r){t.push(r)}),e=t}else{if(!rn(e))return[];e=e.slice()}return e.sort(function(n,r){return"color"===r&&"color"!==n&&0===n.indexOf("color")?1:-1}),e},Ni.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},Ni.findPieceIndex=function(e,t,n){for(var r,o=1/0,i=0,s=t.length;i<s;i++){var l=t[i].value;if(null!=l){if(l===e||"string"==typeof l&&l===e+"")return i;n&&p(l,i)}}for(i=0,s=t.length;i<s;i++){var c=t[i],f=c.interval,h=c.close;if(f){if(f[0]===-1/0){if(Ax(h[1],e,f[1]))return i}else if(f[1]===1/0){if(Ax(h[0],f[0],e))return i}else if(Ax(h[0],f[0],e)&&Ax(h[1],e,f[1]))return i;n&&p(f[0],i),n&&p(f[1],i)}}if(n)return e===1/0?t.length-1:e===-1/0?0:r;function p(y,b){var S=Math.abs(y-e);S<o&&(o=S,r=b)}};var Hp=rn,Jf={seriesType:"treemap",reset:function(e,t,n,r){var o=e.getData().tree.root;o.isRemoved()||function i(s,l,c,f){var h=s.getModel(),p=s.getLayout();if(p&&!p.invisible&&p.isInView){var k,P,y=s.getModel("itemStyle"),b=function(e,t,n){var r=Fn({},t),o=n.designatedVisualItemStyle;return me(["color","colorAlpha","colorSaturation"],function(i){o[i]=t[i];var s=e.get(i);(o[i]=null)!=s&&(r[i]=s)}),r}(y,l,f),S=y.get("borderColor"),M=y.get("borderColorSaturation");null!=M&&(S=null!=(P=k=o_(b))?Gl(P,null,null,M):null),s.setVisual("borderColor",S);var R=s.viewChildren;if(R&&R.length){var F=function(e,t,n,r,o,i){if(i&&i.length){var s=i_(t,"color")||null!=o.color&&"none"!==o.color&&(i_(t,"colorAlpha")||i_(t,"colorSaturation"));if(s){var l=t.get("visualMin"),c=t.get("visualMax"),f=n.dataExtent.slice();null!=l&&l<f[0]&&(f[0]=l),null!=c&&c>f[1]&&(f[1]=c);var h=t.get("colorMappingBy"),p={type:s.name,dataExtent:f,visual:s.range};"color"!==p.type||"index"!==h&&"id"!==h?p.mappingMethod="linear":(p.mappingMethod="category",p.loop=!0);var y=new Ni(p);return y.__drColorMappingBy=h,y}}}(0,h,p,0,b,R);me(R,function(G,X){if(G.depth>=c.length||G===c[G.depth]){var Y=function(e,t,n,r,o,i){var s=Fn({},t);if(o){var l=o.type,c="color"===l&&o.__drColorMappingBy,f="index"===c?r:"id"===c?i.mapIdToIndex(n.getId()):n.getValue(e.get("visualDimension"));s[l]=o.mapValueToVisual(f)}return s}(h,b,G,X,F,f);i(G,Y,c,f)}})}else k=o_(b),s.setVisual("color",k)}}(o,{},e.getViewRoot().getAncestors(),e)}};function o_(e){var t=qw(e,"color");if(t){var n=qw(e,"colorAlpha"),r=qw(e,"colorSaturation");return r&&(t=Gl(t,null,null,r)),n&&(t=Vd(t,n)),t}}function qw(e,t){var n=e[t];if(null!=n&&"none"!==n)return n}function i_(e,t){var n=e.get(t);return Hp(n)&&n.length?{name:t,range:n}:null}var Gp=Math.max,yo=Math.min,Nm=pe,a_=me,Xw=["itemStyle","borderWidth"],BC=["itemStyle","gapWidth"],zC=["upperLabel","show"],FC=["upperLabel","height"],Yw={seriesType:"treemap",reset:function(e,t,n,r){var o=n.getWidth(),i=n.getHeight(),s=e.option,l=No(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),c=s.size||[],f=Pn(Nm(l.width,c[0]),o),h=Pn(Nm(l.height,c[1]),i),p=r&&r.type,y=Zy(r,["treemapZoomToNode","treemapRootToNode"],e),b="treemapRender"===p||"treemapMove"===p?r.rootRect:null,S=e.getViewRoot(),M=Hw(S);if("treemapMove"!==p){var k="treemapZoomToNode"===p?function(G,X,Y,Q,ne){var le,ce=(X||{}).node,ye=[Q,ne];if(!ce||ce===Y)return ye;for(var xe=Q*ne,Te=xe*G.option.zoomToNodeRatio;le=ce.parentNode;){for(var Ee=0,Ve=le.children,Be=0,nt=Ve.length;Be<nt;Be++)Ee+=Ve[Be].getValue();var bt=ce.getValue();if(0===bt)return ye;Te*=Ee/bt;var _t=le.getModel(),wt=_t.get(Xw);Te+=4*wt*wt+(3*wt+Math.max(wt,Ix(_t)))*Math.pow(Te,.5),wv<Te&&(Te=wv),ce=le}Te<xe&&(Te=xe);var Ht=Math.pow(Te/xe,.5);return[Q*Ht,ne*Ht]}(e,y,S,f,h):b?[b.width,b.height]:[f,h],O=s.sort;O&&"asc"!==O&&"desc"!==O&&(O="desc");var P={squareRatio:s.squareRatio,sort:O,leafDepth:s.leafDepth};S.hostTree.clearLayouts();var R={x:0,y:0,width:k[0],height:k[1],area:k[0]*k[1]};S.setLayout(R),function G(X,Y,Q,ne){var le,ce;if(!X.isRemoved()){var ye=X.getLayout();le=ye.width,ce=ye.height;var Te=(xe=X.getModel()).get(Xw),Ee=xe.get(BC)/2,Ve=Ix(xe),Be=Math.max(Te,Ve),nt=Te-Ee,bt=Be-Ee,xe=X.getModel();X.setLayout({borderWidth:Te,upperHeight:Be,upperLabelHeight:Ve},!0);var _t=(le=Gp(le-2*nt,0))*(ce=Gp(ce-nt-bt,0)),wt=function(e,t,n,r,o,i){var s=e.children||[],l=r.sort;"asc"!==l&&"desc"!==l&&(l=null);var c=null!=r.leafDepth&&r.leafDepth<=i;if(o&&!c)return e.viewChildren=[];!function(b,S){S&&b.sort(function(M,k){var O="asc"===S?M.getValue()-k.getValue():k.getValue()-M.getValue();return 0==O?"asc"===S?M.dataIndex-k.dataIndex:k.dataIndex-M.dataIndex:O})}(s=_r(s,function(b){return!b.isRemoved()}),l);var f=function(b,S,M){for(var k=0,O=0,P=S.length;O<P;O++)k+=S[O].getValue();var R=b.get("visualDimension");if(S&&S.length)if("value"===R&&M)F=[S[S.length-1].getValue(),S[0].getValue()],"asc"===M&&F.reverse();else{var F=[1/0,-1/0];a_(S,function(G){var X=G.getValue(R);X<F[0]&&(F[0]=X),X>F[1]&&(F[1]=X)})}else F=[NaN,NaN];return{sum:k,dataExtent:F}}(t,s,l);if(0===f.sum)return e.viewChildren=[];if(f.sum=function(b,S,M,k,O){if(!k)return M;for(var P=b.get("visibleMin"),R=O.length,F=R,G=R-1;0<=G;G--){var X=O["asc"===k?R-G-1:G].getValue();X/M*S<P&&(F=G,M-=X)}return O.splice("asc"===k?0:F,R-F),M}(t,n,f.sum,l,s),0===f.sum)return e.viewChildren=[];for(var h=0,p=s.length;h<p;h++){var y=s[h].getValue()/f.sum*n;s[h].setLayout({area:y})}return c&&(s.length&&e.setLayout({isLeafRoot:!0},!0),s.length=0),e.viewChildren=s,e.setLayout({dataExtent:f.dataExtent},!0),s}(X,xe,_t,Y,Q,ne);if(wt.length){var Lt={x:nt,y:bt,width:le,height:ce},Ht=yo(le,ce),Ln=1/0,Ft=[];Ft.area=0;for(var Yn=0,or=wt.length;Yn<or;){var Tr=wt[Yn];Ft.push(Tr),Ft.area+=Tr.getLayout().area;var Ko=DM(Ft,Ht,Y.squareRatio);Ln=Ko<=Ln?(Yn++,Ko):(Ft.area-=Ft.pop().getLayout().area,s_(Ft,Ht,Lt,Ee,!1),Ht=yo(Lt.width,Lt.height),Ft.length=Ft.area=0,1/0)}if(Ft.length&&s_(Ft,Ht,Lt,Ee,!0),!Q){var Lo=xe.get("childrenVisibleMin");null!=Lo&&_t<Lo&&(Q=!0)}for(Yn=0,or=wt.length;Yn<or;Yn++)G(wt[Yn],Y,Q,ne+1)}}}(S,P,!1,0),R=S.getLayout(),a_(M,function(G,X){var Y=(M[X+1]||S).getValue();G.setLayout(Fn({dataExtent:[Y,Y],borderWidth:0,upperHeight:0},R))})}var F=e.getData().tree.root;F.setLayout(function(G,X,Y){if(X)return{x:X.x,y:X.y};var Q={x:0,y:0};if(!Y)return Q;var ne=Y.node,le=ne.getLayout();if(!le)return Q;for(var ce=[le.width/2,le.height/2],ye=ne;ye;){var xe=ye.getLayout();ce[0]+=xe.x,ce[1]+=xe.y,ye=ye.parentNode}return{x:G.width/2-ce[0],y:G.height/2-ce[1]}}(l,b,y),!0),e.setLayoutInfo(l),function G(X,Y,Q,ne,le){var ce=X.getLayout(),ye=Q[le],xe=ye&&ye===X;if(!(ye&&!xe||le===Q.length&&X!==ne)){X.setLayout({isInView:!0,invisible:!xe&&!Y.intersect(ce),isAboveViewRoot:xe},!0);var Te=new Vo(Y.x-ce.x,Y.y-ce.y,Y.width,Y.height);a_(X.viewChildren||[],function(Ee){G(Ee,Te,Q,ne,le+1)})}}(F,new Vo(-l.x,-l.y,o,i),M,S,0)}};function DM(e,t,n){for(var r,o=0,i=1/0,s=0,l=e.length;s<l;s++)(r=e[s].getLayout().area)&&(r<i&&(i=r),o<r&&(o=r));var c=e.area*e.area,f=t*t*n;return c?Gp(f*o/c,c/(f*i)):1/0}function s_(e,t,n,r,o){var i=t===n.width?0:1,s=1-i,l=["x","y"],c=["width","height"],f=n[l[i]],h=t?e.area/t:0;(o||h>n[c[s]])&&(h=n[c[s]]);for(var p=0,y=e.length;p<y;p++){var b=e[p],S={},M=h?b.getLayout().area/h:0,k=S[c[s]]=Gp(h-2*r,0),O=n[l[i]]+n[c[i]]-f,P=p===y-1||O<M?O:M,R=S[c[i]]=Gp(P-2*r,0);S[l[s]]=n[l[s]]+yo(r,k/2),S[l[i]]=f+yo(r,R/2),f+=P,b.setLayout(S,!0)}n[l[s]]+=h,n[c[s]]-=h}function Ix(e){return e.get(zC)?e.get(FC):0}function jp(e){return"_EC_"+e}function Lm(e){this._directed=e||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}}Ti(Jf),oa(Yw);var Mc=Lm.prototype;function Nd(e,t){this.id=null==e?"":e,this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=null==t?-1:t}function Up(e,t,n){this.node1=e,this.node2=t,this.dataIndex=null==n?-1:n}function w0(e,t){return{getValue:function(n){var r=this[e][t];return r.get(r.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,r){0<=this.dataIndex&&this[e][t].setItemVisual(this.dataIndex,n,r)},getVisual:function(n,r){return this[e][t].getItemVisual(this.dataIndex,n,r)},setLayout:function(n,r){0<=this.dataIndex&&this[e][t].setItemLayout(this.dataIndex,n,r)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}function Ox(e,t,n,r,o){for(var i=new Lm(r),s=0;s<e.length;s++)i.addNode(pe(e[s].id,e[s].name,s),s);var l=[],c=[],f=0;for(s=0;s<t.length;s++){var h=t[s],p=h.source,y=h.target;i.addEdge(p,y,f)&&(c.push(h),l.push(pe(h.id,p+" > "+y)),f++)}var b,S=n.get("coordinateSystem");if("cartesian2d"===S||"polar"===S)b=Sp(e,n);else{var M=ku.get(S),k=M&&"view"!==M.type&&M.dimensions||[];dn(k,"value")<0&&k.concat(["value"]);var O=Jv(e,{coordDimensions:k});(b=new ml(O,n)).initData(e)}var P=new ml(["value"],n);return P.initData(c,l),o&&o(b,P),Og({mainData:b,struct:i,structAttr:"graph",datas:{node:b,edge:P},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}Mc.type="graph",Mc.isDirected=function(){return this._directed},Mc.addNode=function(e,t){var n=this._nodesMap;if(!n[jp(e=null==e?""+t:""+e)]){var r=new Nd(e,t);return(r.hostGraph=this).nodes.push(r),n[jp(e)]=r}},Mc.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},Mc.getNodeById=function(e){return this._nodesMap[jp(e)]},Mc.addEdge=function(e,t,n){var r=this._nodesMap,o=this._edgesMap;if("number"==typeof e&&(e=this.nodes[e]),"number"==typeof t&&(t=this.nodes[t]),Nd.isInstance(e)||(e=r[jp(e)]),Nd.isInstance(t)||(t=r[jp(t)]),e&&t){var i=e.id+"-"+t.id,s=new Up(e,t,n);return(s.hostGraph=this)._directed&&(e.outEdges.push(s),t.inEdges.push(s)),e.edges.push(s),e!==t&&t.edges.push(s),this.edges.push(s),o[i]=s}},Mc.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},Mc.getEdge=function(e,t){Nd.isInstance(e)&&(e=e.id),Nd.isInstance(t)&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},Mc.eachNode=function(e,t){for(var n=this.nodes,r=n.length,o=0;o<r;o++)0<=n[o].dataIndex&&e.call(t,n[o],o)},Mc.eachEdge=function(e,t){for(var n=this.edges,r=n.length,o=0;o<r;o++)0<=n[o].dataIndex&&0<=n[o].node1.dataIndex&&0<=n[o].node2.dataIndex&&e.call(t,n[o],o)},Mc.breadthFirstTraverse=function(e,t,n,r){if(Nd.isInstance(t)||(t=this._nodesMap[jp(t)]),t){for(var o="out"===n?"outEdges":"in"===n?"inEdges":"edges",i=0;i<this.nodes.length;i++)this.nodes[i].__visited=!1;if(!e.call(r,t,null))for(var s=[t];s.length;){var l=s.shift(),c=l[o];for(i=0;i<c.length;i++){var f=c[i],h=f.node1===l?f.node2:f.node1;if(!h.__visited){if(e.call(r,h,l))return;s.push(h),h.__visited=!0}}}}},Mc.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,r=this.edges,o=0,i=n.length;o<i;o++)n[o].dataIndex=-1;for(o=0,i=e.count();o<i;o++)n[e.getRawIndex(o)].dataIndex=o;for(t.filterSelf(function(s){var l=r[t.getRawIndex(s)];return 0<=l.node1.dataIndex&&0<=l.node2.dataIndex}),o=0,i=r.length;o<i;o++)r[o].dataIndex=-1;for(o=0,i=t.count();o<i;o++)r[t.getRawIndex(o)].dataIndex=o},Mc.clone=function(){for(var e=new Lm(this._directed),t=this.nodes,n=this.edges,r=0;r<t.length;r++)e.addNode(t[r].id,t[r].dataIndex);for(r=0;r<n.length;r++){var o=n[r];e.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return e},Nd.prototype={constructor:Nd,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)}},Up.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},_e(Nd,w0("hostGraph","data")),_e(Up,w0("hostGraph","edgeData")),Lm.Node=Nd,Lm.Edge=Up,Kh(Nd),Kh(Up);var Ex=function(e){return e.get("autoCurveness")||null},VC=function(e,t){var n=Ex(e),r=20,o=[];if("number"==typeof n)r=n;else if(rn(n))return void(e.__curvenessList=n);r<t&&(r=t);var i=r%2?r+2:r+3;o=[];for(var s=0;s<i;s++)o.push((s%2?s+1:s)/10*(s%2?-1:1));e.__curvenessList=o},S0=function(e,t,n){var r=[e.id,e.dataIndex].join("."),o=[t.id,t.dataIndex].join(".");return[n.uid,r,o].join("--\x3e")},HC=function(e){var t=e.split("--\x3e");return[t[0],t[2],t[1]].join("--\x3e")},l_=function(e,t){var n=t.__edgeMap;return n[e]?n[e].length:0};function WC(e,t,n,r){var o=Ex(t),i=rn(o);if(!o)return null;var s=function(e,t){var n=S0(e.node1,e.node2,t);return t.__edgeMap[n]}(e,t);if(!s)return null;for(var l=-1,c=0;c<s.length;c++)if(s[c]===n){l=c;break}var f=function(e,t){return l_(S0(e.node1,e.node2,t),t)+l_(S0(e.node2,e.node1,t),t)}(e,t);VC(t,f),e.lineStyle=e.lineStyle||{};var h=S0(e.node1,e.node2,t),p=t.__curvenessList,y=i||f%2?0:1;if(s.isForward)return p[y+l];var b=HC(h),S=l_(b,t),M=p[l+S+y];return r?i?o&&0===o[0]?(S+y)%2?M:-M:((S%2?0:1)+y)%2?M:-M:(S+y)%2?M:-M:p[l+S+y]}var qp=Dh({type:"series.graph",init:function(e){qp.superApply(this,"init",arguments);var t=this;function n(){return t._categoriesData}this.legendVisualProvider=new Dm(n,n),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeOption:function(e){qp.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(e){qp.superApply(this,"mergeDefaultAndTheme",arguments),Qs(e,["edgeLabel"],["show"])},getInitialData:function(e,t){var s,n=e.edges||e.links||[],r=e.data||e.nodes||[],o=this;if(r&&n){Ex(s=this)&&(s.__curvenessList=[],s.__edgeMap={},VC(s));var i=Ox(r,n,this,!0,function(s,l){s.wrapMethod("getItemModel",function(b){var S=o._categoriesModels[b.getShallow("category")];return S&&(S.parentModel=b.parentModel,b.parentModel=S),b});var c=o.getModel("edgeLabel"),f=new $o({label:c.option},c.parentModel,t),h=o.getModel("emphasis.edgeLabel"),p=new $o({emphasis:{label:h.option}},h.parentModel,t);function y(b){return(b=this.parsePath(b))&&"label"===b[0]?f:b&&"emphasis"===b[0]&&"label"===b[1]?p:this.parentModel}l.wrapMethod("getItemModel",function(b){return b.customizeGetParent(y),b})});return me(i.edges,function(s){!function(l,c,f,h){if(Ex(f)){var p=S0(l,c,f),y=f.__edgeMap,b=y[HC(p)];y[p]&&!b?y[p].isForward=!0:b&&y[p]&&(b.isForward=!0,y[p].isForward=!1),y[p]=y[p]||[],y[p].push(h)}}(s.node1,s.node2,this,s.dataIndex)},this),i.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,t,n){if("edge"!==n)return qp.superApply(this,"formatTooltip",arguments);var r=this.getData(),o=this.getDataParams(e,n),i=r.graph.getEdgeByIndex(e),s=r.getName(i.node1.dataIndex),l=r.getName(i.node2.dataIndex),c=[];return null!=s&&c.push(s),null!=l&&c.push(l),c=Wo(c.join(" > ")),o.value&&(c+=" : "+Wo(o.value)),c},_updateCategoriesData:function(){var e=Kt(this.option.categories||[],function(n){return null!=n.value?n:Fn({value:0},n)}),t=new ml(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray(function(n){return t.getItemModel(n,!0)})},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},isAnimationEnabled:function(){return qp.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),C0=Yi.prototype,GC=np.prototype;function c_(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var $w=Xu({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(e,t){this[c_(t)?"_buildPathLine":"_buildPathCurve"](e,t)},_buildPathLine:C0.buildPath,_buildPathCurve:GC.buildPath,pointAt:function(e){return this[c_(this.shape)?"_pointAtLine":"_pointAtCurve"](e)},_pointAtLine:C0.pointAt,_pointAtCurve:GC.pointAt,tangentAt:function(e){var t=this.shape,n=c_(t)?[t.x2-t.x1,t.y2-t.y1]:this._tangentAtCurve(e);return Ja(n,n)},_tangentAtCurve:GC.tangentAt}),d_=["fromSymbol","toSymbol"];function jC(e){return"_"+e+"Type"}function Bm(e,t,n){var r=t.getItemVisual(n,e);if(r&&"none"!==r){var o=t.getItemVisual(n,"color"),i=t.getItemVisual(n,e+"Size"),s=t.getItemVisual(n,e+"Rotate");rn(i)||(i=[i,i]);var l=Zc(r,-i[0]/2,-i[1]/2,i[0],i[1],o);return l.__specifiedRotation=null==s||isNaN(s)?void 0:+s*Math.PI/180||0,l.name=e,l}}function Kw(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}function zm(e,t,n){pn.call(this),this._createLine(e,t,n)}var Bh=zm.prototype;function Xp(e){this._ctor=e||zm,this.group=new pn}Bh.beforeUpdate=function(){var e=this.childOfName("fromSymbol"),t=this.childOfName("toSymbol"),n=this.childOfName("label");if(e||t||!n.ignore){for(var r=1,o=this.parent;o;)o.scale&&(r/=o.scale[0]),o=o.parent;var i=this.childOfName("line");if(this.__dirty||i.__dirty){var p,s=i.shape.percent,l=i.pointAt(0),c=i.pointAt(s),f=mi([],c,l);if(Ja(f,f),e){if(e.attr("position",l),null==(p=e.__specifiedRotation)){var h=i.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(h[1],h[0]))}else e.attr("rotation",p);e.attr("scale",[r*s,r*s])}if(t&&(t.attr("position",c),null==(p=t.__specifiedRotation)?(h=i.tangentAt(1),t.attr("rotation",-Math.PI/2-Math.atan2(h[1],h[0]))):t.attr("rotation",p),t.attr("scale",[r*s,r*s])),!n.ignore){var y,b,S,M;n.attr("position",c);var k=n.__labelDistance,O=k[0]*r,P=k[1]*r,R=s/2,F=[(h=i.tangentAt(R))[1],-h[0]],G=i.pointAt(R);0<F[1]&&(F[0]=-F[0],F[1]=-F[1]);var X,Y=h[0]<0?-1:1;if("start"!==n.__position&&"end"!==n.__position){var Q=-Math.atan2(h[1],h[0]);c[0]<l[0]&&(Q=Math.PI+Q),n.attr("rotation",Q)}switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":X=-P,S="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":X=P,S="top";break;default:X=0,S="middle"}switch(n.__position){case"end":y=[f[0]*O+c[0],f[1]*P+c[1]],b=.8<f[0]?"left":f[0]<-.8?"right":"center",S=.8<f[1]?"top":f[1]<-.8?"bottom":"middle";break;case"start":y=[-f[0]*O+l[0],-f[1]*P+l[1]],b=.8<f[0]?"right":f[0]<-.8?"left":"center",S=.8<f[1]?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":y=[O*Y+l[0],l[1]+X],b=h[0]<0?"right":"left",M=[-O*Y,-X];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":y=[G[0],G[1]+X],b="center",M=[0,-X];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":y=[-O*Y+c[0],c[1]+X],b=0<=h[0]?"right":"left",M=[O*Y,-X]}n.attr({style:{textVerticalAlign:n.__verticalAlign||S,textAlign:n.__textAlign||b},position:y,scale:[r,r],origin:M})}}}},Bh._createLine=function(e,t,n){var s,l,r=e.hostModel,o=(s=e.getItemLayout(t),Kw((l=new $w({name:"line",subPixelOptimize:!0})).shape,s),l);o.shape.percent=0,Zo(o,{shape:{percent:1}},r,t),this.add(o);var i=new vo({name:"label",lineLabelOriginalOpacity:1});this.add(i),me(d_,function(s){var l=Bm(s,e,t);this.add(l),this[jC(s)]=e.getItemVisual(t,s)},this),this._updateCommonStl(e,t,n)},Bh.updateData=function(e,t,n){var r=e.hostModel,o=this.childOfName("line"),i=e.getItemLayout(t),s={shape:{}};Kw(s.shape,i),so(o,s,r,t),me(d_,function(l){var c=e.getItemVisual(t,l),f=jC(l);if(this[f]!==c){this.remove(this.childOfName(l));var h=Bm(l,e,t);this.add(h)}this[f]=c},this),this._updateCommonStl(e,t,n)},Bh._updateCommonStl=function(e,t,n){var r=e.hostModel,o=this.childOfName("line"),i=n&&n.lineStyle,s=n&&n.hoverLineStyle,l=n&&n.labelModel,c=n&&n.hoverLabelModel;if(!n||e.hasItemOption){var f=e.getItemModel(t);i=f.getModel("lineStyle").getLineStyle(),s=f.getModel("emphasis.lineStyle").getLineStyle(),l=f.getModel("label"),c=f.getModel("emphasis.label")}var h=e.getItemVisual(t,"color"),p=je(e.getItemVisual(t,"opacity"),i.opacity,1);o.useStyle(un({strokeNoScale:!0,fill:"none",stroke:h,opacity:p},i)),o.hoverStyle=s,me(d_,function(X){var Y=this.childOfName(X);Y&&(Y.setColor(h),Y.setStyle({opacity:p}))},this);var y,b,S=l.getShallow("show"),M=c.getShallow("show"),k=this.childOfName("label");if((S||M)&&(y=h||"#000",null==(b=r.getFormattedLabel(t,"normal",e.dataType)))){var O=r.getRawValue(t);b=null==O?e.getName(t):isFinite(O)?is(O):O}var P=S?b:null,R=M?Dr(r.getFormattedLabel(t,"emphasis",e.dataType),b):null,F=k.style;if(null!=P||null!=R){Ya(k.style,l,{text:P},{autoColor:y}),k.__textAlign=F.textAlign,k.__verticalAlign=F.textVerticalAlign,k.__position=l.get("position")||"middle";var G=l.get("distance");rn(G)||(G=[G,G]),k.__labelDistance=G}k.hoverStyle=null!=R?{text:R,textFill:c.getTextColor(!0),fontStyle:c.getShallow("fontStyle"),fontWeight:c.getShallow("fontWeight"),fontSize:c.getShallow("fontSize"),fontFamily:c.getShallow("fontFamily")}:{text:null},k.ignore=!S&&!M,ya(this)},Bh.highlight=function(){this.trigger("emphasis")},Bh.downplay=function(){this.trigger("normal")},Bh.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},Bh.setLinePoints=function(e){var t=this.childOfName("line");Kw(t.shape,e),t.dirty()},Rn(zm,pn);var Yp=Xp.prototype;function Jy(e){var t=e.hostModel;return{lineStyle:t.getModel("lineStyle").getLineStyle(),hoverLineStyle:t.getModel("emphasis.lineStyle").getLineStyle(),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label")}}function Jw(e){return isNaN(e[0])||isNaN(e[1])}function Ld(e){return!Jw(e[0])&&!Jw(e[1])}function Rx(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=e.option.nodeScaleRatio,r=t.scale,o=r&&r[0]||1;return((t.getZoom()-1)*n+1)/o}function Nx(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}Yp.isPersistent=function(){return!0},Yp.updateData=function(e){var t=this,n=t.group,r=t._lineData;t._lineData=e,r||n.removeAll();var o=Jy(e);e.diff(r).add(function(i){!function(s,l,c,f){if(Ld(l.getItemLayout(c))){var h=new s._ctor(l,c,f);l.setItemGraphicEl(c,h),s.group.add(h)}}(t,e,i,o)}).update(function(i,s){!function(l,c,f,h,p,y){var b=c.getItemGraphicEl(h);if(!Ld(f.getItemLayout(p)))return l.group.remove(b);b?b.updateData(f,p,y):b=new l._ctor(f,p,y),f.setItemGraphicEl(p,b),l.group.add(b)}(t,r,e,s,i,o)}).remove(function(i){n.remove(r.getItemGraphicEl(i))}).execute()},Yp.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,n){t.updateLayout(e,n)},this)},Yp.incrementalPrepareUpdate=function(e){this._seriesScope=Jy(e),this._lineData=null,this.group.removeAll()},Yp.incrementalUpdate=function(e,t){function n(i){var s;i.isGroup||(s=i).animators&&0<s.animators.length||(i.incremental=i.useHoverLayer=!0)}for(var r=e.start;r<e.end;r++)if(Ld(t.getItemLayout(r))){var o=new this._ctor(t,r,this._seriesScope);o.traverse(n),this.group.add(o),t.setItemGraphicEl(r,o)}},Yp.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Yp._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var Qw=[],eS=[],f_=[],Qy=Hu,tS=Pa,h_=Math.abs;function UC(e,t,n){for(var r,o=e[0],i=e[1],s=e[2],l=1/0,c=n*n,f=.1,h=.1;h<=.9;h+=.1)Qw[0]=Qy(o[0],i[0],s[0],h),Qw[1]=Qy(o[1],i[1],s[1],h),(b=h_(tS(Qw,t)-c))<l&&(l=b,r=h);for(var p=0;p<32;p++){var y=r+f;eS[0]=Qy(o[0],i[0],s[0],r),eS[1]=Qy(o[1],i[1],s[1],r),f_[0]=Qy(o[0],i[0],s[0],y),f_[1]=Qy(o[1],i[1],s[1],y);var b=tS(eS,t)-c;if(h_(b)<.01)break;var S=tS(f_,t)-c;f/=2,b<0?0<=S?r+=f:r-=f:0<=S?r-=f:r+=f}return r}function g_(e,t){var n=[],r=Wu,o=[[],[],[]],i=[[],[]],s=[];t/=2,e.eachEdge(function(l,c){var f=l.getLayout(),h=l.getVisual("fromSymbol"),p=l.getVisual("toSymbol");f.__original||(f.__original=[Lr(f[0]),Lr(f[1])],f[2]&&f.__original.push(Lr(f[2])));var y=f.__original;if(null!=f[2]){if(St(o[0],y[0]),St(o[1],y[2]),St(o[2],y[1]),h&&"none"!==h){var b=Nx(l.node1),S=UC(o,y[0],b*t);r(o[0][0],o[1][0],o[2][0],S,n),o[0][0]=n[3],o[1][0]=n[4],r(o[0][1],o[1][1],o[2][1],S,n),o[0][1]=n[3],o[1][1]=n[4]}p&&"none"!==p&&(b=Nx(l.node2),S=UC(o,y[1],b*t),r(o[0][0],o[1][0],o[2][0],S,n),o[1][0]=n[1],o[2][0]=n[2],r(o[0][1],o[1][1],o[2][1],S,n),o[1][1]=n[1],o[2][1]=n[2]),St(f[0],o[0]),St(f[1],o[2]),St(f[2],o[1])}else St(i[0],y[0]),St(i[1],y[1]),mi(s,i[1],i[0]),Ja(s,s),h&&"none"!==h&&(b=Nx(l.node1),si(i[0],i[0],s,b*t)),p&&"none"!==p&&(b=Nx(l.node2),si(i[1],i[1],s,-b*t)),St(f[0],i[0]),St(f[1],i[1])})}var k0="__focusNodeAdjacency",Zp="__unfocusNodeAdjacency",hf=["itemStyle","opacity"],nS=["lineStyle","opacity"];function rS(e,t){var n=e.getVisual("opacity");return null!=n?n:e.getModel().get(t)}function Lx(e,t,n){var r=e.getGraphicEl(),o=rS(e,t);null!=n&&(null==o&&(o=1),o*=n),r.downplay&&r.downplay(),r.traverse(function(i){if(!i.isGroup){var s=i.lineLabelOriginalOpacity;null!=s&&null==n||(s=o),i.setStyle("opacity",s)}})}function $p(e,t){var n=rS(e,t),r=e.getGraphicEl();r.traverse(function(o){o.isGroup||o.setStyle("opacity",n)}),r.highlight&&r.highlight()}function m_(e){return e instanceof Array||(e=[e,e]),e}function qC(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var n=e.getGraph();n.eachNode(function(r){var o=r.getModel();r.setLayout([+o.get("x"),+o.get("y")])}),oS(n,e)}}function oS(e,t){e.eachEdge(function(n,r){var o=je(n.getModel().get("lineStyle.curveness"),-WC(n,t,r,!0),0),i=Lr(n.node1.getLayout()),s=Lr(n.node2.getLayout()),l=[i,s];+o&&l.push([(i[0]+s[0])/2-(i[1]-s[1])*o,(i[1]+s[1])/2-(s[0]-i[0])*o]),n.setLayout(l)})}Is({type:"graph",init:function(e,t){var n=new Dd,r=new Xp,o=this.group;this._controller=new Rp(t.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(r.group),this._symbolDraw=n,this._lineDraw=r,this._firstRender=!0},render:function(e,t,n){var r=this,o=e.coordinateSystem;this._model=e;var i=this._symbolDraw,s=this._lineDraw,l=this.group;if("view"===o.type){var c={position:o.position,scale:o.scale};this._firstRender?l.attr(c):so(l,c,e)}g_(e.getGraph(),Rx(e));var f=e.getData();i.updateData(f);var h=e.getEdgeData();s.updateData(h),this._updateNodeAndLinkScale(),this._updateController(e,t,n),clearTimeout(this._layoutTimeout);var p=e.forceLayout,y=e.get("force.layoutAnimation");p&&this._startForceLayoutIteration(p,y),f.eachItemGraphicEl(function(k,O){var P=f.getItemModel(O);k.off("drag").off("dragend");var R=P.get("draggable");R&&k.on("drag",function(){p&&(p.warmUp(),this._layouting||this._startForceLayoutIteration(p,y),p.setFixed(O),f.setItemLayout(O,k.position))},this).on("dragend",function(){p&&p.setUnfixed(O)},this),k.setDraggable(R&&p),k[k0]&&k.off("mouseover",k[k0]),k[Zp]&&k.off("mouseout",k[Zp]),P.get("focusNodeAdjacency")&&(k.on("mouseover",k[k0]=function(){r._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:k.dataIndex})}),k.on("mouseout",k[Zp]=function(){r._dispatchUnfocus(n)}))},this),f.graph.eachEdge(function(k){var O=k.getGraphicEl();O[k0]&&O.off("mouseover",O[k0]),O[Zp]&&O.off("mouseout",O[Zp]),k.getModel().get("focusNodeAdjacency")&&(O.on("mouseover",O[k0]=function(){r._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:k.dataIndex})}),O.on("mouseout",O[Zp]=function(){r._dispatchUnfocus(n)}))});var b="circular"===e.get("layout")&&e.get("circular.rotateLabel"),S=f.getLayout("cx"),M=f.getLayout("cy");f.eachItemGraphicEl(function(k,O){var P=f.getItemModel(O).get("label.rotate")||0,R=k.getSymbolPath();if(b){var F=f.getItemLayout(O),G=Math.atan2(F[1]-M,F[0]-S);G<0&&(G=2*Math.PI+G);var X=F[0]<S;X&&(G-=Math.PI);var Y=X?"left":"right";vv(R,{textRotation:-G,textPosition:Y,textOrigin:"center"},{textPosition:Y})}else vv(R,{textRotation:P*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(e,t){var n=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){n._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,n,r){var o=e.getData().graph,s=r.edgeDataIndex,l=o.getNodeByIndex(r.dataIndex),c=o.getEdgeByIndex(s);(l||c)&&(o.eachNode(function(f){Lx(f,hf,.1)}),o.eachEdge(function(f){Lx(f,nS,.1)}),l&&($p(l,hf),me(l.edges,function(f){f.dataIndex<0||($p(f,nS),$p(f.node1,hf),$p(f.node2,hf))})),c&&($p(c,nS),$p(c.node1,hf),$p(c.node2,hf)))},unfocusNodeAdjacency:function(e,t,n,r){var o=e.getData().graph;o.eachNode(function(i){Lx(i,hf)}),o.eachEdge(function(i){Lx(i,nS)})},_startForceLayoutIteration:function(e,t){var n=this;!function r(){e.step(function(o){n.updateLayout(n._model),(n._layouting=!o)&&(t?n._layoutTimeout=setTimeout(r,16):r())})}()},_updateController:function(e,t,n){var r=this._controller,o=this._controllerHost,i=this.group;r.setPointerChecker(function(s,l,c){var f=i.getBoundingRect();return f.applyTransform(i.transform),f.contain(l,c)&&!yx(s,n,e)}),"view"===e.coordinateSystem.type?(r.enable(e.get("roam")),o.zoomLimit=e.get("scaleLimit"),o.zoom=e.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",function(s){Bw(o,s.dx,s.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:s.dx,dy:s.dy})}).on("zoom",function(s){zw(o,s.scale,s.originX,s.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:s.scale,originX:s.originX,originY:s.originY}),this._updateNodeAndLinkScale(),g_(e.getGraph(),Rx(e)),this._lineDraw.updateLayout()},this)):r.disable()},_updateNodeAndLinkScale:function(){var e=this._model,t=e.getData(),n=Rx(e),r=[n,n];t.eachItemGraphicEl(function(o,i){o.attr("scale",r)})},updateLayout:function(e){g_(e.getGraph(),Rx(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),jr({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),jr({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){}),jr({type:"graphRoam",event:"graphRoam",update:"none"},function(e,t){t.eachComponent({mainType:"series",query:e},function(n){var r=_x(n.coordinateSystem,e);n.setCenter&&n.setCenter(r.center),n.setZoom&&n.setZoom(r.zoom)})});var XC=Math.PI,Bx=[];function $c(e,t){var n=e.coordinateSystem;if(!n||"view"===n.type){var r=n.getBoundingRect(),o=e.getData(),i=o.graph,s=r.width/2+r.x,l=r.height/2+r.y,c=Math.min(r.width,r.height)/2,f=o.count();o.setLayout({cx:s,cy:l}),f&&(YC[t](e,n,i,o,c,s,l,f),i.eachEdge(function(h,p){var y,b=je(h.getModel().get("lineStyle.curveness"),WC(h,e,p),0),S=Lr(h.node1.getLayout()),M=Lr(h.node2.getLayout());+b&&(y=[s*(b*=3)+(S[0]+M[0])/2*(1-b),l*b+(S[1]+M[1])/2*(1-b)]),h.setLayout([S,M,y])}))}}var YC={value:function(e,t,n,r,o,i,s,l){var c=0,f=r.getSum("value"),h=2*Math.PI/(f||l);n.eachNode(function(p){var y=p.getValue("value"),b=h*(f?y:1)/2;c+=b,p.setLayout([o*Math.cos(c)+i,o*Math.sin(c)+s]),c+=b})},symbolSize:function(e,t,n,r,o,i,s,l){var c=0;Bx.length=l;var f=Rx(e);n.eachNode(function(y){var b=Nx(y);isNaN(b)&&(b=2),b<0&&(b=0),b*=f;var S=Math.asin(b/2/o);isNaN(S)&&(S=XC/2),Bx[y.dataIndex]=S,c+=2*S});var h=(2*XC-c)/l/2,p=0;n.eachNode(function(y){var b=h+Bx[y.dataIndex];p+=b,y.setLayout([o*Math.cos(p)+i,o*Math.sin(p)+s]),p+=b})}},eb=si;fa(function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",function(n){var r=n.getCategoriesData(),o=n.getGraph().data,i=r.mapArray(r.getName);o.filterSelf(function(s){var l=o.getItemModel(s).getShallow("category");if(null!=l){"number"==typeof l&&(l=i[l]);for(var c=0;c<t.length;c++)if(!t[c].isSelected(l))return!1}return!0})},this)}),Ti(Ap("graph","circle",null)),Ti(function(e){var t={};e.eachSeriesByType("graph",function(n){var r=n.getCategoriesData(),o=n.getData(),i={};r.each(function(s){var l=r.getName(s);i["ec-"+l]=s;var c=r.getItemModel(s),f=c.get("itemStyle.color")||n.getColorFromPalette(l,t);r.setItemVisual(s,"color",f);for(var h=["opacity","symbol","symbolSize","symbolKeepAspect"],p=0;p<h.length;p++){var y=c.getShallow(h[p],!0);null!=y&&r.setItemVisual(s,h[p],y)}}),r.count()&&o.each(function(s){var l=o.getItemModel(s).getShallow("category");if(null!=l){"string"==typeof l&&(l=i["ec-"+l]);for(var c=["color","opacity","symbol","symbolSize","symbolKeepAspect"],f=0;f<c.length;f++)null==o.getItemVisual(s,c[f],!0)&&o.setItemVisual(s,c[f],r.getItemVisual(l,c[f]))}})})}),Ti(function(e){e.eachSeriesByType("graph",function(t){var n=t.getGraph(),r=t.getEdgeData(),o=m_(t.get("edgeSymbol")),i=m_(t.get("edgeSymbolSize")),s="lineStyle.color".split("."),l="lineStyle.opacity".split(".");r.setVisual("fromSymbol",o&&o[0]),r.setVisual("toSymbol",o&&o[1]),r.setVisual("fromSymbolSize",i&&i[0]),r.setVisual("toSymbolSize",i&&i[1]),r.setVisual("color",t.get(s)),r.setVisual("opacity",t.get(l)),r.each(function(c){var f=r.getItemModel(c),h=n.getEdgeByIndex(c),p=m_(f.getShallow("symbol",!0)),y=m_(f.getShallow("symbolSize",!0)),b=f.get(s),S=f.get(l);switch(b){case"source":b=h.node1.getVisual("color");break;case"target":b=h.node2.getVisual("color")}p[0]&&h.setVisual("fromSymbol",p[0]),p[1]&&h.setVisual("toSymbol",p[1]),y[0]&&h.setVisual("fromSymbolSize",y[0]),y[1]&&h.setVisual("toSymbolSize",y[1]),h.setVisual("color",b),h.setVisual("opacity",S)})})}),oa(function(e,t){e.eachSeriesByType("graph",function(n){var r=n.get("layout"),o=n.coordinateSystem;if(o&&"view"!==o.type){var i=n.getData(),s=[];me(o.dimensions,function(y){s=s.concat(i.mapDimension(y,!0))});for(var l=0;l<i.count();l++){for(var c=[],f=!1,h=0;h<s.length;h++){var p=i.get(s[h],l);isNaN(p)||(f=!0),c.push(p)}i.setItemLayout(l,f?o.dataToPoint(c):[NaN,NaN])}oS(i.graph,n)}else r&&"none"!==r||qC(n)})}),oa(Gf.VISUAL.POST_CHART_LAYOUT,function(e){e.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&$c(t,"symbolSize")})}),oa(function(e){e.eachSeriesByType("graph",function(t){if(!(y=t.coordinateSystem)||"view"===y.type)if("force"===t.get("layout")){var n=t.preservedPoints||{},r=t.getGraph(),o=r.data,i=r.edgeData,s=t.getModel("force"),l=s.get("initLayout");t.preservedPoints?o.each(function(P){var R=o.getId(P);o.setItemLayout(P,n[R]||[NaN,NaN])}):l&&"none"!==l?"circular"===l&&$c(t,"value"):qC(t);var c=o.getDataExtent("value"),f=i.getDataExtent("value"),h=s.get("repulsion"),p=s.get("edgeLength");rn(h)||(h=[h,h]),rn(p)||(p=[p,p]),p=[p[1],p[0]];var y,b=o.mapArray("value",function(P,R){var F=o.getItemLayout(R),G=yi(P,c,h);return isNaN(G)&&(G=(h[0]+h[1])/2),{w:G,rep:G,fixed:o.getItemModel(R).get("fixed"),p:!F||isNaN(F[0])||isNaN(F[1])?null:F}}),S=i.mapArray("value",function(P,R){var F=r.getEdgeByIndex(R),G=yi(P,f,p);isNaN(G)&&(G=(p[0]+p[1])/2);var X=F.getModel(),Y=je(X.get("lineStyle.curveness"),-WC(F,t,R,!0),0);return{n1:b[F.node1.dataIndex],n2:b[F.node2.dataIndex],d:G,curveness:Y,ignoreForceLayout:X.get("ignoreForceLayout")}}),M=(y=t.coordinateSystem).getBoundingRect(),k=function(P,R,F){for(var G=F.rect,X=G.width,Y=G.height,Q=[G.x+X/2,G.y+Y/2],ne=null==F.gravity?.1:F.gravity,le=0;le<P.length;le++){var ce=P[le];ce.p||(ce.p=hn(X*(Math.random()-.5)+Q[0],Y*(Math.random()-.5)+Q[1])),ce.pp=Lr(ce.p),ce.edges=null}var ye=null==F.friction?.6:F.friction,xe=ye;return{warmUp:function(){xe=.8*ye},setFixed:function(Te){P[Te].fixed=!0},setUnfixed:function(Te){P[Te].fixed=!1},step:function(Te){for(var Ee=[],Ve=P.length,Be=0;Be<R.length;Be++){var nt=R[Be];if(!nt.ignoreForceLayout){var bt=nt.n1;mi(Ee,(Ht=nt.n2).p,bt.p);var _t=lo(Ee)-nt.d,wt=Ht.w/(bt.w+Ht.w);isNaN(wt)&&(wt=0),Ja(Ee,Ee),bt.fixed||eb(bt.p,bt.p,Ee,wt*_t*xe),Ht.fixed||eb(Ht.p,Ht.p,Ee,-(1-wt)*_t*xe)}}for(Be=0;Be<Ve;Be++)(Yn=P[Be]).fixed||(mi(Ee,Q,Yn.p),eb(Yn.p,Yn.p,Ee,ne*xe));for(Be=0;Be<Ve;Be++){bt=P[Be];for(var Lt=Be+1;Lt<Ve;Lt++){var Ht;mi(Ee,(Ht=P[Lt]).p,bt.p),0===(_t=lo(Ee))&&(Vn(Ee,Math.random()-.5,Math.random()-.5),_t=1);var Ln=(bt.rep+Ht.rep)/_t/_t;bt.fixed||eb(bt.pp,bt.pp,Ee,Ln),Ht.fixed||eb(Ht.pp,Ht.pp,Ee,-Ln)}}var Ft=[];for(Be=0;Be<Ve;Be++){var Yn;(Yn=P[Be]).fixed||(mi(Ft,Yn.p,Yn.pp),eb(Yn.p,Yn.p,Ft,xe),St(Yn.pp,Yn.p))}xe*=.992,Te&&Te(P,R,xe<.01)}}}(b,S,{rect:M,gravity:s.get("gravity"),friction:s.get("friction")}),O=k.step;k.step=function(P){for(var R=0,F=b.length;R<F;R++)b[R].fixed&&St(b[R].p,r.getNodeByIndex(R).getLayout());O(function(G,X,Y){for(var Q=0,ne=G.length;Q<ne;Q++)G[Q].fixed||r.getNodeByIndex(Q).setLayout(G[Q].p),n[o.getId(Q)]=G[Q].p;for(Q=0,ne=X.length;Q<ne;Q++){var le=X[Q],ce=r.getEdgeByIndex(Q),ye=le.n1.p,xe=le.n2.p,Te=ce.getLayout();(Te=Te?Te.slice():[])[0]=Te[0]||[],Te[1]=Te[1]||[],St(Te[0],ye),St(Te[1],xe),+le.curveness&&(Te[2]=[(ye[0]+xe[0])/2-(ye[1]-xe[1])*le.curveness,(ye[1]+xe[1])/2-(xe[0]-ye[0])*le.curveness]),ce.setLayout(Te)}P&&P(Y)})},t.forceLayout=k,t.preservedPoints=n,k.step()}else t.forceLayout=null})}),Yc("graphView",{create:function(e,t){var n=[];return e.eachSeriesByType("graph",function(r){var k,O,P,o=r.get("coordinateSystem");if(!o||"view"===o){var i=r.getData(),s=[],l=[];ca(i.mapArray(function(M){var k=i.getItemModel(M);return[+k.get("x"),+k.get("y")]}),s,l),l[0]-s[0]==0&&(l[0]+=1,s[0]-=1),l[1]-s[1]==0&&(l[1]+=1,s[1]-=1);var c=(l[0]-s[0])/(l[1]-s[1]),f=(k=t,O=c,(P=r.getBoxLayoutParams()).aspect=O,No(P,{width:k.getWidth(),height:k.getHeight()}));isNaN(c)&&(s=[f.x,f.y],l=[f.x+f.width,f.y+f.height]);var h=l[0]-s[0],p=l[1]-s[1],y=f.width,b=f.height,S=r.coordinateSystem=new Pd;S.zoomLimit=r.get("scaleLimit"),S.setBoundingRect(s[0],s[1],h,p),S.setViewRect(f.x,f.y,y,b),S.setCenter(r.get("center")),S.setZoom(r.get("zoom")),n.push(S)}}),n}}),ba.extend({type:"series.gauge",getInitialData:function(e,t){return l0(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var ZC=Qr.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(e,t){var n=Math.cos,r=Math.sin,o=t.r,i=t.width,s=t.angle,l=t.x-n(s)*i*(o/3<=i?1:2),c=t.y-r(s)*i*(o/3<=i?1:2);s=t.angle-Math.PI/2,e.moveTo(l,c),e.lineTo(t.x+n(s)*i,t.y+r(s)*i),e.lineTo(t.x+n(t.angle)*o,t.y+r(t.angle)*o),e.lineTo(t.x-n(s)*i,t.y-r(s)*i),e.lineTo(l,c)}});function $C(e,t){return t&&("string"==typeof t?e=t.replace("{value}",null!=e?e:""):"function"==typeof t&&(e=t(e))),e}var hD=2*Math.PI,zx=(Ju.extend({type:"gauge",render:function(e,t,n){this.group.removeAll();var r=e.get("axisLine.lineStyle.color"),o=function(i,s){var l=i.get("center"),c=s.getWidth(),f=s.getHeight(),h=Math.min(c,f);return{cx:Pn(l[0],s.getWidth()),cy:Pn(l[1],s.getHeight()),r:Pn(i.get("radius"),h/2)}}(e,n);this._renderMain(e,t,n,r,o)},dispose:function(){},_renderMain:function(e,t,n,r,o){for(var i=this.group,s=e.getModel("axisLine"),l=s.getModel("lineStyle"),c=e.get("clockwise"),f=-e.get("startAngle")/180*Math.PI,h=((M=-e.get("endAngle")/180*Math.PI)-f)%hD,p=f,y=l.get("width"),b=s.get("show"),S=0;b&&S<r.length;S++){var M,k=Math.min(Math.max(r[S][0],0),1),O=new oo({shape:{startAngle:p,endAngle:M=f+h*k,cx:o.cx,cy:o.cy,clockwise:c,r0:o.r-y,r:o.r},silent:!0});O.setStyle({fill:r[S][1]}),O.setStyle(l.getLineStyle(["color","borderWidth","borderColor"])),i.add(O),p=M}function P(F){if(F<=0)return r[0][1];for(var G=0;G<r.length;G++)if(r[G][0]>=F&&(0===G?0:r[G-1][0])<F)return r[G][1];return r[G-1][1]}if(!c){var R=f;f=M,M=R}this._renderTicks(e,t,n,P,o,f,M,c),this._renderPointer(e,t,n,P,o,f,M,c),this._renderTitle(e,t,n,P,o),this._renderDetail(e,t,n,P,o)},_renderTicks:function(e,t,n,r,o,i,s,l){for(var c=this.group,f=o.cx,h=o.cy,p=o.r,y=+e.get("min"),b=+e.get("max"),S=e.getModel("splitLine"),M=e.getModel("axisTick"),k=e.getModel("axisLabel"),O=e.get("splitNumber"),P=M.get("splitNumber"),R=Pn(S.get("length"),p),F=Pn(M.get("length"),p),G=i,X=(s-i)/O,Y=X/P,Q=S.getModel("lineStyle").getLineStyle(),ne=M.getModel("lineStyle").getLineStyle(),le=0;le<=O;le++){var ce=Math.cos(G),ye=Math.sin(G);if(S.get("show")){var xe=new Yi({shape:{x1:ce*p+f,y1:ye*p+h,x2:ce*(p-R)+f,y2:ye*(p-R)+h},style:Q,silent:!0});"auto"===Q.stroke&&xe.setStyle({stroke:r(le/O)}),c.add(xe)}if(k.get("show")){var Te=$C(is(le/O*(b-y)+y),k.get("formatter")),Ee=k.get("distance"),Ve=r(le/O);c.add(new vo({style:Ya({},k,{text:Te,x:ce*(p-R-Ee)+f,y:ye*(p-R-Ee)+h,textVerticalAlign:ye<-.4?"top":.4<ye?"bottom":"middle",textAlign:ce<-.4?"left":.4<ce?"right":"center"},{autoColor:Ve}),silent:!0}))}if(M.get("show")&&le!==O){for(var Be=0;Be<=P;Be++){ce=Math.cos(G),ye=Math.sin(G);var nt=new Yi({shape:{x1:ce*p+f,y1:ye*p+h,x2:ce*(p-F)+f,y2:ye*(p-F)+h},silent:!0,style:ne});"auto"===ne.stroke&&nt.setStyle({stroke:r((le+Be/P)/O)}),c.add(nt),G+=Y}G-=Y}else G+=X}},_renderPointer:function(e,t,n,r,o,i,s,l){var c=this.group,f=this._data;if(e.get("pointer.show")){var h=[+e.get("min"),+e.get("max")],p=[i,s],y=e.getData(),b=y.mapDimension("value");y.diff(f).add(function(S){var M=new ZC({shape:{angle:i}});Zo(M,{shape:{angle:yi(y.get(b,S),h,p,!0)}},e),c.add(M),y.setItemGraphicEl(S,M)}).update(function(S,M){var k=f.getItemGraphicEl(M);so(k,{shape:{angle:yi(y.get(b,S),h,p,!0)}},e),c.add(k),y.setItemGraphicEl(S,k)}).remove(function(S){var M=f.getItemGraphicEl(S);c.remove(M)}).execute(),y.eachItemGraphicEl(function(S,M){var k=y.getItemModel(M),O=k.getModel("pointer");S.setShape({x:o.cx,y:o.cy,width:Pn(O.get("width"),o.r),r:Pn(O.get("length"),o.r)}),S.useStyle(k.getModel("itemStyle").getItemStyle()),"auto"===S.style.fill&&S.setStyle("fill",r(yi(y.get(b,M),h,[0,1],!0))),ya(S,k.getModel("emphasis.itemStyle").getItemStyle())}),this._data=y}else f&&f.eachItemGraphicEl(function(S){c.remove(S)})},_renderTitle:function(e,t,n,r,o){var i=e.getData(),s=i.mapDimension("value"),l=e.getModel("title");if(l.get("show")){var c=l.get("offsetCenter"),f=o.cx+Pn(c[0],o.r),h=o.cy+Pn(c[1],o.r),p=+e.get("min"),y=+e.get("max"),b=r(yi(e.getData().get(s,0),[p,y],[0,1],!0));this.group.add(new vo({silent:!0,style:Ya({},l,{x:f,y:h,text:i.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:b,forceRich:!0})}))}},_renderDetail:function(e,t,n,r,o){var i=e.getModel("detail"),s=+e.get("min"),l=+e.get("max");if(i.get("show")){var c=i.get("offsetCenter"),f=o.cx+Pn(c[0],o.r),h=o.cy+Pn(c[1],o.r),p=Pn(i.get("width"),o.r),y=Pn(i.get("height"),o.r),b=e.getData(),S=b.get(b.mapDimension("value"),0),M=r(yi(S,[s,l],[0,1],!0));this.group.add(new vo({silent:!0,style:Ya({},i,{x:f,y:h,text:$C(S,i.get("formatter")),textWidth:isNaN(p)?null:p,textHeight:isNaN(y)?null:y,textAlign:"center",textVerticalAlign:"middle"},{autoColor:M,forceRich:!0})}))}}}),Dh({type:"series.funnel",init:function(e){zx.superApply(this,"init",arguments),this.legendVisualProvider=new Dm(Nn(this.getData,this),Nn(this.getRawData,this)),this._defaultLabelLine(e)},getInitialData:function(e,t){return l0(this,{coordDimensions:["value"],encodeDefaulter:ar(um,this)})},_defaultLabelLine:function(e){Qs(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},getDataParams:function(e){var t=this.getData(),n=zx.superCall(this,"getDataParams",e),r=t.mapDimension("value"),o=t.getSum(r);return n.percent=o?+(t.get(r,e)/o*100).toFixed(2):0,n.$vars.push("percent"),n},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}));function iS(e,t){pn.call(this);var n=new wo,r=new Bc,o=new vo;this.add(n),this.add(r),this.add(o),this.highDownOnUpdate=function(i,s){"emphasis"===s?(r.ignore=r.hoverIgnore,o.ignore=o.hoverIgnore):(r.ignore=r.normalIgnore,o.ignore=o.normalIgnore)},this.updateData(e,t,!0)}var Kp=iS.prototype,IM=["itemStyle","opacity"];function p_(e,t,n,r,o){cu.call(this,e,t,n),this.type=r||"value",this.axisIndex=o}function M0(e,t,n,r,o,i){e=e||0;var s=n[1]-n[0];if(null!=o&&(o=Fm(o,[0,s])),null!=i&&(i=Math.max(i,null!=o?o:0)),"all"===r){var l=Math.abs(t[1]-t[0]);o=i=Fm(l=Fm(l,[0,s]),[o,i]),r=0}t[0]=Fm(t[0],n),t[1]=Fm(t[1],n);var c=aS(t,r);t[r]+=e;var f=o||0,h=n.slice();c.sign<0?h[0]+=f:h[1]-=f,t[r]=Fm(t[r],h);var p=aS(t,r);return null!=o&&(p.sign!==c.sign||p.span<o)&&(t[1-r]=t[r]+c.sign*o),p=aS(t,r),null!=i&&p.span>i&&(t[1-r]=t[r]+p.sign*i),t}function aS(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:0<n?-1:n<0?1:t?-1:1}}function Fm(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}Kp.updateData=function(e,t,n){var r=this.childAt(0),o=e.hostModel,i=e.getItemModel(t),s=e.getItemLayout(t),l=e.getItemModel(t).get(IM);l=null==l?1:l,r.useStyle({}),n?(r.setShape({points:s.points}),r.setStyle({opacity:0}),Zo(r,{style:{opacity:l}},o,t)):so(r,{style:{opacity:l},shape:{points:s.points}},o,t);var c=i.getModel("itemStyle"),f=e.getItemVisual(t,"color");r.setStyle(un({lineJoin:"round",fill:f},c.getItemStyle(["opacity"]))),r.hoverStyle=c.getModel("emphasis").getItemStyle(),this._updateLabel(e,t),ya(this)},Kp._updateLabel=function(e,t){var n=this.childAt(1),r=this.childAt(2),o=e.hostModel,i=e.getItemModel(t),s=e.getItemLayout(t).label,l=e.getItemVisual(t,"color");so(n,{shape:{points:s.linePoints||s.linePoints}},o,t),so(r,{style:{x:s.x,y:s.y}},o,t),r.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var c=i.getModel("label"),f=i.getModel("emphasis.label"),h=i.getModel("labelLine"),p=i.getModel("emphasis.labelLine");l=e.getItemVisual(t,"color"),Cu(r.style,r.hoverStyle={},c,f,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:l,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign}),r.ignore=r.normalIgnore=!c.get("show"),r.hoverIgnore=!f.get("show"),n.ignore=n.normalIgnore=!h.get("show"),n.hoverIgnore=!p.get("show"),n.setStyle({stroke:l}),n.setStyle(h.getModel("lineStyle").getLineStyle()),n.hoverStyle=p.getModel("lineStyle").getLineStyle()},Rn(iS,pn),Ju.extend({type:"funnel",render:function(e,t,n){var r=e.getData(),o=this._data,i=this.group;r.diff(o).add(function(s){var l=new iS(r,s);r.setItemGraphicEl(s,l),i.add(l)}).update(function(s,l){var c=o.getItemGraphicEl(l);c.updateData(r,s),i.add(c),r.setItemGraphicEl(s,c)}).remove(function(s){var l=o.getItemGraphicEl(s);i.remove(l)}).execute(),this._data=r},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),Ti(Tg("funnel")),oa(function(e,t,n){e.eachSeriesByType("funnel",function(r){var Ee,o=r.getData(),i=o.mapDimension("value"),s=r.get("sort"),l=(Ee=t,No(r.getBoxLayoutParams(),{width:Ee.getWidth(),height:Ee.getHeight()})),c=function(Te,Ee){for(var Ve=Te.mapDimension("value"),Be=Te.mapArray(Ve,function(Lt){return Lt}),nt=[],bt="ascending"===Ee,_t=0,wt=Te.count();_t<wt;_t++)nt[_t]=_t;return"function"==typeof Ee?nt.sort(Ee):"none"!==Ee&&nt.sort(function(Lt,Ht){return bt?Be[Lt]-Be[Ht]:Be[Ht]-Be[Lt]}),nt}(o,s),f=r.get("orient"),h=l.width,p=l.height,y=l.x,b=l.y,S="horizontal"===f?[Pn(r.get("minSize"),p),Pn(r.get("maxSize"),p)]:[Pn(r.get("minSize"),h),Pn(r.get("maxSize"),h)],M=o.getDataExtent(i),k=r.get("min"),O=r.get("max");function P(Te,Ee){if("horizontal"===f){var Ve,Be=yi(o.get(i,Te)||0,[k,O],S,!0);switch(R){case"top":Ve=b;break;case"center":Ve=b+(p-Be)/2;break;case"bottom":Ve=b+(p-Be)}return[[Ee,Ve],[Ee,Ve+Be]]}var nt,bt=yi(o.get(i,Te)||0,[k,O],S,!0);switch(R){case"left":nt=y;break;case"center":nt=y+(h-bt)/2;break;case"right":nt=y+h-bt}return[[nt,Ee],[nt+bt,Ee]]}null==k&&(k=Math.min(M[0],0)),null==O&&(O=M[1]);var Te,R=r.get("funnelAlign"),F=r.get("gap"),G=(("horizontal"===f?h:p)-F*(o.count()-1))/o.count();"ascending"===s&&(G=-G,F=-F,"horizontal"===f?y+=h:b+=p,c=c.reverse());for(var X=0;X<c.length;X++){var Y=c[X],Q=c[X+1],ne=o.getItemModel(Y);if("horizontal"===f){var le=ne.get("itemStyle.width");null==le?le=G:(le=Pn(le,h),"ascending"===s&&(le=-le));var ce=P(Y,y),ye=P(Q,y+le);y+=le+F,o.setItemLayout(Y,{points:ce.concat(ye.slice().reverse())})}else{var xe=ne.get("itemStyle.height");null==xe?xe=G:(xe=Pn(xe,p),"ascending"===s&&(xe=-xe)),ce=P(Y,"horizontal"===f?y:b),ye=P(Q,"horizontal"===f?y+le:b+xe),b+=xe+F,o.setItemLayout(Y,{points:ce.concat(ye.slice().reverse())})}}(Te=o).each(function(Ee){var Ve,Be,nt,bt,_t=Te.getItemModel(Ee),wt=_t.getModel("label").get("position"),Lt=_t.get("orient"),Ht=_t.getModel("labelLine"),Ln=Te.getItemLayout(Ee),Ft=Ln.points,Yn="inner"===wt||"inside"===wt||"center"===wt||"insideLeft"===wt||"insideRight"===wt;if(Yn)Ve="insideLeft"===wt?(Be=(Ft[0][0]+Ft[3][0])/2+5,nt=(Ft[0][1]+Ft[3][1])/2,"left"):"insideRight"===wt?(Be=(Ft[1][0]+Ft[2][0])/2-5,nt=(Ft[1][1]+Ft[2][1])/2,"right"):(Be=(Ft[0][0]+Ft[1][0]+Ft[2][0]+Ft[3][0])/4,nt=(Ft[0][1]+Ft[1][1]+Ft[2][1]+Ft[3][1])/4,"center"),bt=[[Be,nt],[Be,nt]];else{var or,Tr,Ko,Lo,Nr=Ht.get("length");Ve="left"===wt?(Tr=(Ft[3][1]+Ft[0][1])/2,Be=(Ko=(or=(Ft[3][0]+Ft[0][0])/2)-Nr)-5,"right"):"right"===wt?(Tr=(Ft[1][1]+Ft[2][1])/2,Be=(Ko=(or=(Ft[1][0]+Ft[2][0])/2)+Nr)+5,"left"):"top"===wt?(or=(Ft[3][0]+Ft[0][0])/2,nt=(Lo=(Tr=(Ft[3][1]+Ft[0][1])/2)-Nr)-5,"center"):"bottom"===wt?(or=(Ft[1][0]+Ft[2][0])/2,nt=(Lo=(Tr=(Ft[1][1]+Ft[2][1])/2)+Nr)+5,"center"):"rightTop"===wt?(or="horizontal"===Lt?Ft[3][0]:Ft[1][0],Tr="horizontal"===Lt?Ft[3][1]:Ft[1][1],"horizontal"===Lt?(nt=(Lo=Tr-Nr)-5,"center"):(Be=(Ko=or+Nr)+5,"top")):"rightBottom"===wt?(or=Ft[2][0],Tr=Ft[2][1],"horizontal"===Lt?(nt=(Lo=Tr+Nr)+5,"center"):(Be=(Ko=or+Nr)+5,"bottom")):"leftTop"===wt?(or=Ft[0][0],Tr="horizontal"===Lt?Ft[0][1]:Ft[1][1],"horizontal"===Lt?(nt=(Lo=Tr-Nr)-5,"center"):(Be=(Ko=or-Nr)-5,"right")):"leftBottom"===wt?(or="horizontal"===Lt?Ft[1][0]:Ft[3][0],Tr="horizontal"===Lt?Ft[1][1]:Ft[2][1],"horizontal"===Lt?(nt=(Lo=Tr+Nr)+5,"center"):(Be=(Ko=or-Nr)-5,"right")):(or=(Ft[1][0]+Ft[2][0])/2,Tr=(Ft[1][1]+Ft[2][1])/2,"horizontal"===Lt?(nt=(Lo=Tr+Nr)+5,"center"):(Be=(Ko=or+Nr)+5,"left")),"horizontal"===Lt?Be=Ko=or:nt=Lo=Tr,bt=[[or,Tr],[Ko,Lo]]}Ln.label={linePoints:bt,x:Be,y:nt,verticalAlign:"middle",textAlign:Ve,inside:Yn}})})}),fa(d0("funnel")),p_.prototype={constructor:p_,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},Rn(p_,cu);var sS=me,OM=Math.min,KC=Math.max,gf=Math.floor,v_=Math.ceil,uS=is,JC=Math.PI;function Fx(e,t,n){this._axesMap=ut(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,n)}function Vx(e,t){return OM(KC(e,t[0]),t[1])}Fx.prototype={type:"parallel",constructor:Fx,_init:function(e,t,n){var o=e.parallelAxisIndex;sS(e.dimensions,function(i,s){var l=o[s],c=t.getComponent("parallelAxis",l),f=this._axesMap.set(i,new p_(i,Sg(c),[0,0],c.get("type"),l));f.onBand="category"===f.type&&c.get("boundaryGap"),f.inverse=c.get("inverse"),(c.axis=f).model=c,f.coordinateSystem=c.coordinateSystem=this},this)},update:function(e,t){this._updateAxesFromSeries(this._model,e)},containPoint:function(e){var t=this._makeLayoutInfo(),n=t.axisBase,r=t.layoutBase,o=t.pixelDimIndex,i=e[1-o],s=e[o];return n<=i&&i<=n+t.axisLength&&r<=s&&s<=r+t.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(e,t){t.eachSeries(function(n){if(e.contains(n,t)){var r=n.getData();sS(this.dimensions,function(o){var i=this._axesMap.get(o);i.scale.unionExtentFromData(r,r.mapDimension(o)),oc(i.scale,i.model)},this)}},this)},resize:function(e,t){this._rect=No(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var e,t=this._model,n=this._rect,r=["x","y"],o=["width","height"],i=t.get("layout"),s="horizontal"===i?0:1,l=n[o[s]],c=[0,l],f=this.dimensions.length,h=Vx(t.get("axisExpandWidth"),c),p=Vx(t.get("axisExpandCount")||0,[0,f]),y=t.get("axisExpandable")&&3<f&&p<f&&1<p&&0<h&&0<l,b=t.get("axisExpandWindow");b?(e=Vx(b[1]-b[0],c),b[1]=b[0]+e):(e=Vx(h*(p-1),c),(b=[h*(t.get("axisExpandCenter")||gf(f/2))-e/2])[1]=b[0]+e);var S=(l-e)/(f-p);S<3&&(S=0);var M=[gf(uS(b[0]/h,1))+1,v_(uS(b[1]/h,1))-1];return{layout:i,pixelDimIndex:s,layoutBase:n[r[s]],layoutLength:l,axisBase:n[r[1-s]],axisLength:n[o[1-s]],axisExpandable:y,axisExpandWidth:h,axisCollapseWidth:S,axisExpandWindow:b,axisCount:f,winInnerIndices:M,axisExpandWindow0Pos:S/h*b[0]}},_layoutAxes:function(){var e=this._rect,t=this._axesMap,n=this.dimensions,r=this._makeLayoutInfo(),o=r.layout;t.each(function(i){var s=[0,r.axisLength],l=i.inverse?1:0;i.setExtent(s[l],s[1-l])}),sS(n,function(i,s){var l=(r.axisExpandable?function(b,S){var M,k,P=S.axisExpandWidth,F=S.axisCollapseWidth,G=S.winInnerIndices,X=F,Y=!1;return b<G[0]?(M=b*F,k=F):b<=G[1]?(M=S.axisExpandWindow0Pos+b*P-S.axisExpandWindow[0],X=P,Y=!0):(M=S.layoutLength-(S.axisCount-1-b)*F,k=F),{position:M,axisNameAvailableWidth:X,axisLabelShow:Y,nameTruncateMaxWidth:k}}:function(b,S){var M=S.layoutLength/(S.axisCount-1);return{position:M*b,axisNameAvailableWidth:M,axisLabelShow:!0}})(s,r),c={horizontal:{x:l.position,y:r.axisLength},vertical:{x:0,y:l.position}},h=[c[o].x+e.x,c[o].y+e.y],p={horizontal:JC/2,vertical:0}[o],y=ui();Ar(y,y,p),Vl(y,y,h),this._axesLayout[i]={position:h,rotation:p,transform:y,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(e){return this._axesMap.get(e)},dataToPoint:function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},eachActiveState:function(e,t,n,r){null==n&&(n=0),null==r&&(r=e.count());var o=this._axesMap,i=this.dimensions,s=[],l=[];me(i,function(S){s.push(e.mapDimension(S)),l.push(o.get(S).model)});for(var c=this.hasAxisBrushed(),f=n;f<r;f++){var h;if(c){h="active";for(var p=e.getValues(s,f),y=0,b=i.length;y<b;y++)if("inactive"===l[y].getActiveState(p[y])){h="inactive";break}}else h="normal";t(h,f)}},hasAxisBrushed:function(){for(var e=this.dimensions,t=this._axesMap,n=!1,r=0,o=e.length;r<o;r++)"normal"!==t.get(e[r]).model.getActiveState()&&(n=!0);return n},axisCoordToPoint:function(e,t){return Ql([e,0],this._axesLayout[t].transform)},getAxisLayout:function(e){return Gn(this._axesLayout[e])},getSlidedAxisExpandWindow:function(e){var t=this._makeLayoutInfo(),n=t.pixelDimIndex,r=t.axisExpandWindow.slice(),o=r[1]-r[0],i=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:r};var s,l=e[n]-t.layoutBase-t.axisExpandWindow0Pos,c="slide",f=t.axisCollapseWidth,h=this._model.get("axisExpandSlideTriggerArea"),p=null!=h[0];return f?(p&&f&&l<o*h[0]?(c="jump",s=l-o*h[2]):p&&f&&l>o*(1-h[0])?(c="jump",s=l-o*(1-h[2])):0<=(s=l-o*h[1])&&(s=l-o*(1-h[1]))<=0&&(s=0),(s*=t.axisExpandWidth/f)?M0(s,r,i,"all"):c="none"):((r=[KC(0,i[1]*l/(o=r[1]-r[0])-o/2)])[1]=OM(i[1],r[0]+o),r[0]=r[1]-o),{axisExpandWindow:r,behavior:c}}},ku.register("parallel",{create:function(e,t){var n=[];return e.eachComponent("parallel",function(r,o){var i=new Fx(r,e,t);i.name="parallel_"+o,i.resize(r,t),(r.coordinateSystem=i).model=r,n.push(i)}),e.eachSeries(function(r){if("parallel"===r.get("coordinateSystem")){var o=e.queryComponents({mainType:"parallel",index:r.get("parallelIndex"),id:r.get("parallelId")})[0];r.coordinateSystem=o.coordinateSystem}}),n}});var EM=Go.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return Yo([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(e){var t=this.activeIntervals=Gn(e);if(t)for(var n=t.length-1;0<=n;n--)sg(t[n])},getActiveState:function(e){var t=this.activeIntervals;if(!t.length)return"normal";if(null==e||isNaN(e))return"inactive";if(1===t.length){var n=t[0];if(n[0]<=e&&e<=n[1])return"active"}else for(var r=0,o=t.length;r<o;r++)if(t[r][0]<=e&&e<=t[r][1])return"active";return"inactive"}});Sn(EM.prototype,Cg),r0("parallel",EM,function(e,t){return t.type||(t.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),Go.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){Go.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(e){e&&Sn(this.option,e,!0),this._initDimensions()},contains:function(e,t){var n=e.get("parallelIndex");return null!=n&&t.getComponent("parallel",n)===this},setAxisExpand:function(e){me(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(t){e.hasOwnProperty(t)&&(this.option[t]=e[t])},this)},_initDimensions:function(){var e=this.dimensions=[],t=this.parallelAxisIndex=[];me(_r(this.dependentModels.parallelAxis,function(n){return(n.get("parallelIndex")||0)===this.componentIndex},this),function(n){e.push("dim"+n.get("dim")),t.push(n.componentIndex)})}}),jr({type:"axisAreaSelect",event:"axisAreaSelected"},function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(n){n.axis.model.setActiveIntervals(e.intervals)})}),jr("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(n){n.setAxisExpand(e)})});var Jp=ar,Pg=me,gD=Kt,Hx=Math.min,tb=Math.max,PM=Math.pow,RM={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},cS={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},NM={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},LM=0;function nb(e){Nt.call(this),this._zr=e,this.group=new pn,this._track=[],this._covers=[],this._uid="brushController_"+LM++,this._handlers={},Pg(mS,function(t,n){this._handlers[n]=Nn(t,this)},this)}function T0(e,t){var n=Qu[t.brushType].createCover(e,t);return n.__brushOption=t,ek(n,t),e.group.add(n),n}function dS(e,t){var n=Qp(t);return n.endCreating&&(n.endCreating(e,t),ek(t,t.__brushOption)),t}function Gx(e,t){var n=t.__brushOption;Qp(t).updateCoverShape(e,t,n.range,n)}function ek(e,t){var n=t.z;null==n&&(n=1e4),e.traverse(function(r){r.z=n,r.z2=n})}function fS(e,t){Qp(t).updateCommon(e,t),Gx(e,t)}function Qp(e){return Qu[e.__brushOption.brushType]}function tk(e,t,n){var r,o=e._panels;if(!o)return!0;var i=e._transform;return Pg(o,function(s){s.isTargetByCursor(t,n,i)&&(r=s)}),r}function BM(e,t){var n=e._panels;if(!n)return!0;var r=t.__brushOption.panelId;return null==r||n[r]}function nk(e){var t=e._covers,n=t.length;return Pg(t,function(r){e.group.remove(r)},e),t.length=0,!!n}function Vm(e,t){var n=gD(e._covers,function(r){var o=r.__brushOption,i=Gn(o.range);return{brushType:o.brushType,panelId:o.panelId,range:i}});e.trigger("brush",n,{isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function zM(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function FM(e,t,n,r){var o=new pn;return o.add(new ei({name:"main",style:jx(n),silent:!0,draggable:!0,cursor:"move",drift:Jp(e,t,o,"nswe"),ondragend:Jp(Vm,t,{isEnd:!0})})),Pg(r,function(i){o.add(new ei({name:i,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Jp(e,t,o,i),ondragend:Jp(Vm,t,{isEnd:!0})}))}),o}function rk(e,t,n,r){var o=r.brushStyle.lineWidth||0,i=tb(o,6),s=n[0][0],l=n[1][0],c=s-o/2,f=l-o/2,h=n[0][1],p=n[1][1],y=h-i+o/2,b=p-i+o/2,S=h-s,M=p-l,k=S+o,O=M+o;Rg(e,t,"main",s,l,S,M),r.transformable&&(Rg(e,t,"w",c,f,i,O),Rg(e,t,"e",y,f,i,O),Rg(e,t,"n",c,f,k,i),Rg(e,t,"s",c,b,k,i),Rg(e,t,"nw",c,f,i,i),Rg(e,t,"ne",y,f,i,i),Rg(e,t,"sw",c,b,i,i),Rg(e,t,"se",y,b,i,i))}function Fa(e,t){var n=t.__brushOption,r=n.transformable,o=t.childAt(0);o.useStyle(jx(n)),o.attr({silent:!r,cursor:r?"move":"default"}),Pg(["w","e","n","s","se","sw","ne","nw"],function(i){var s=t.childOfName(i),l=function c(f,h){return 1<h.length?("e"!==(b=[c(f,(h=h.split(""))[0]),c(f,h[1])])[0]&&"w"!==b[0]||b.reverse(),b.join("")):{left:"w",right:"e",top:"n",bottom:"s"}[b=Tb({w:"left",e:"right",n:"top",s:"bottom"}[h],Ws(f.group))];var b}(e,i);s&&s.attr({silent:!r,invisible:!r,cursor:r?cS[l]+"-resize":null})})}function Rg(e,t,n,r,o,i,s){var c,f,h,l=t.childOfName(n);l&&l.setShape((c=Hm(e,t,[[r,o],[r+i,o+s]]),{x:f=Hx(c[0][0],c[1][0]),y:h=Hx(c[0][1],c[1][1]),width:tb(c[0][0],c[1][0])-f,height:tb(c[0][1],c[1][1])-h}))}function jx(e){return un({strokeNoScale:!0},e.brushStyle)}function Ux(e,t,n,r){var o=[Hx(e,n),Hx(t,r)],i=[tb(e,n),tb(t,r)];return[[o[0],i[0]],[o[1],i[1]]]}function VM(e,t,n,r,o,i,s,l){var c=r.__brushOption,f=e(c.range),h=hS(n,i,s);Pg(o.split(""),function(p){var y=RM[p];f[y[0]][y[1]]+=h[y[0]]}),c.range=t(Ux(f[0][0],f[1][0],f[0][1],f[1][1])),fS(n,r),Vm(n,{isEnd:!1})}function zh(e,t,n,r,o){var i=t.__brushOption.range,s=hS(e,n,r);Pg(i,function(l){l[0]+=s[0],l[1]+=s[1]}),fS(e,t),Vm(e,{isEnd:!1})}function hS(e,t,n){var r=e.group,o=r.transformCoordToLocal(t,n),i=r.transformCoordToLocal(0,0);return[o[0]-i[0],o[1]-i[1]]}function Hm(e,t,n){var r=BM(e,t);return r&&!0!==r?r.clipPath(n,e._transform):Gn(n)}function gS(e){var t=e.event;t.preventDefault&&t.preventDefault()}function rb(e,t,n){return e.childOfName("main").contain(t,n)}function D0(e,t,n,r){var o,i=e._creatingCover,s=e._creatingPanel,l=e._brushOption;if(e._track.push(n.slice()),function(h){var p=h._track;if(!p.length)return!1;var y=p[p.length-1],b=p[0],S=y[0]-b[0],M=y[1]-b[1];return 6<PM(S*S+M*M,.5)}(e)||i){if(s&&!i){"single"===l.brushMode&&nk(e);var c=Gn(l);c.brushType=A0(c.brushType,s),c.panelId=!0===s?null:s.panelId,i=e._creatingCover=T0(e,c),e._covers.push(i)}if(i){var f=Qu[A0(e._brushType,s)];i.__brushOption.range=f.getCreatingRange(Hm(e,i,e._track)),r&&(dS(e,i),f.updateCommon(e,i)),Gx(e,i),o={isEnd:r}}}else r&&"single"===l.brushMode&&l.removeOnClick&&tk(e,t,n)&&nk(e)&&(o={isEnd:r,removeOnClick:!0});return o}function A0(e,t){return"auto"===e?t.defaultBrushType:e}nb.prototype={constructor:nb,enableBrush:function(e){return this._brushType&&function(t){var n=t._zr;(function(r,o,i){var s=Rw(r);s[o]===i&&(s[o]=null)})(n,"globalPan",t._uid),function(r,o){Pg(o,function(i,s){r.off(s,i)})}(n,t._handlers),t._brushType=t._brushOption=null}(this),e.brushType&&function(t,n){var r=t._zr;t._enableGlobalPan||function(o,i,s){Rw(o).globalPan=s}(r,0,t._uid),function(o,i){Pg(i,function(s,l){o.on(l,s)})}(r,t._handlers),t._brushType=n.brushType,t._brushOption=Sn(Gn(NM),n,!0)}(this,e),this},setPanels:function(e){if(e&&e.length){var t=this._panels={};me(e,function(n){t[n.panelId]=Gn(n)})}else this._panels=null;return this},mount:function(e){this._enableGlobalPan=(e=e||{}).enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({position:e.position||[0,0],rotation:e.rotation||0,scale:e.scale||[1,1]}),this._transform=t.getLocalTransform(),this},eachCover:function(e,t){Pg(this._covers,e,t)},updateCovers:function(e){e=Kt(e,function(c){return Sn(Gn(NM),c,!0)});var n=this._covers,r=this._covers=[],o=this,i=this._creatingCover;return new jf(n,e,function(c,f){return s(c.__brushOption,f)},s).add(l).update(l).remove(function(c){n[c]!==i&&o.group.remove(n[c])}).execute(),this;function s(c,f){return(null!=c.id?c.id:"\0-brush-index-"+f)+"-"+c.brushType}function l(c,f){var h=e[c];if(null!=f&&n[f]===i)r[c]=n[f];else{var p=r[c]=null!=f?(n[f].__brushOption=h,n[f]):dS(o,T0(o,h));fS(o,p)}}},unmount:function(){return this.enableBrush(!1),nk(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},_e(nb,Nt);var mS={mousedown:function(e){if(this._dragging)ok(this,e);else if(!e.target||!e.target.draggable){gS(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=tk(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var r=this.group.transformCoordToLocal(e.offsetX,e.offsetY);if(function(i,s,l){if(i._brushType&&(k=i._zr,!((S=s)<0||S>k.getWidth()||undefined>k.getHeight()))){var c=i._zr,f=i._covers,h=tk(i,s,l);if(!i._dragging)for(var p=0;p<f.length;p++){var y=f[p].__brushOption;if(h&&(!0===h||y.panelId===h.panelId)&&Qu[y.brushType].contain(f[p],l[0],l[1]))return}h&&c.setCursorStyle("crosshair")}var S,k}(this,e,r),this._dragging){gS(e);var o=D0(this,e,r,!1);o&&Vm(this,o)}},mouseup:function(e){ok(this,e)}};function ok(e,t){if(e._dragging){gS(t);var o=e.group.transformCoordToLocal(t.offsetX,t.offsetY),i=D0(e,t,o,!0);e._dragging=!1,e._track=[],e._creatingCover=null,i&&Vm(e,i)}}var Qu={lineX:ik(0),lineY:ik(1),rect:{createCover:function(e,t){return FM(Jp(VM,function(n){return n},function(n){return n}),e,t,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(e){var t=zM(e);return Ux(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,r){rk(e,t,n,r)},updateCommon:Fa,contain:rb},polygon:{createCover:function(e,t){var n=new pn;return n.add(new Bc({name:"main",style:jx(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new wo({name:"main",draggable:!0,drift:Jp(zh,e,t),ondragend:Jp(Vm,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,r){t.childAt(0).setShape({points:Hm(e,t,n)})},updateCommon:Fa,contain:rb}};function ik(e){return{createCover:function(t,n){return FM(Jp(VM,function(r){var o=[r,[0,100]];return e&&o.reverse(),o},function(r){return r[e]}),t,n,[["w","e"],["n","s"]][e])},getCreatingRange:function(t){var n=zM(t);return[Hx(n[0][e],n[1][e]),tb(n[0][e],n[1][e])]},updateCoverShape:function(t,n,r,o){var i,s=BM(t,n);if(!0!==s&&s.getLinearBrushOtherExtent)i=s.getLinearBrushOtherExtent(e,t._transform);else{var l=t._zr;i=[0,[l.getWidth(),l.getHeight()][1-e]]}var c=[r,i];e&&c.reverse(),rk(t,n,c,o)},updateCommon:Fa,contain:rb}}function HM(e){return e=E0(e),function(t,n){return s1(t,e)}}function I0(e,t){return e=E0(e),function(n){var r=null!=t?t:n,i=r?e.x:e.y;return[i,i+((r?e.width:e.height)||0)]}}function O0(e,t,n){return e=E0(e),function(r,o,i){return e.contain(o[0],o[1])&&!yx(r,t,n)}}function E0(e){return Vo.create(e)}var pS=["axisLine","axisTickLabel","axisName"],pD=xs({type:"parallelAxis",init:function(e,t){pD.superApply(this,"init",arguments),(this._brushController=new nb(t.getZr())).on("brush",Nn(this._onBrush,this))},render:function(e,t,n,r){if(b=e,!(M=r)||"axisAreaSelect"!==M.type||t.findComponents({mainType:"parallelAxis",query:M})[0]!==b){this.axisModel=e,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new pn,this.group.add(this._axisGroup),e.get("show")){var i=function(b,S){return S.getComponent("parallel",b.get("parallelIndex"))}(e,t),s=i.coordinateSystem,l=e.getAreaSelectStyle(),c=l.width,h=Fn({strokeContainThreshold:c},s.getAxisLayout(e.axis.dim)),p=new ic(e,h);me(pS,p.add,p),this._axisGroup.add(p.getGroup()),this._refreshBrushController(h,l,e,i,c,n),Q0(o,this._axisGroup,r&&!1===r.animation?null:e)}}var b,M},_refreshBrushController:function(e,t,n,r,o,i){var h,p,s=n.axis.getExtent(),l=s[1]-s[0],c=Math.min(30,.1*Math.abs(l)),f=Vo.create({x:s[0],y:-o/2,width:l,height:o});f.x-=c,f.width+=2*c,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,position:e.position}).setPanels([{panelId:"pl",clipPath:HM(f),isTargetByCursor:O0(f,i,r),getLinearBrushOtherExtent:I0(f,0)}]).enableBrush({brushType:"lineX",brushStyle:t,removeOnClick:!0}).updateCovers((p=(h=n).axis,Kt(h.activeIntervals,function(y){return{brushType:"lineX",panelId:"pl",range:[p.dataToCoord(y[0],!0),p.dataToCoord(y[1],!0)]}})))},_onBrush:function(e,t){var n=this.axisModel,r=n.axis,o=Kt(e,function(i){return[r.coordToData(i.range[0],!0),r.coordToData(i.range[1],!0)]});!n.option.realtime!==t.isEnd&&!t.removeOnClick||this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},dispose:function(){this._brushController.dispose()}});xs({type:"parallel",render:function(e,t,n){this._model=e,this._api=n,this._handlers||(this._handlers={},me(Ng,function(r,o){n.getZr().on(o,this._handlers[o]=Nn(r,this))},this)),Wf(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},dispose:function(e,t){me(this._handlers,function(n,r){t.getZr().off(r,n)}),this._handlers=null},_throttledDispatchExpand:function(e){this._dispatchExpand(e)},_dispatchExpand:function(e){e&&this._api.dispatchAction(Fn({type:"parallelAxisExpand"},e))}});var Ng={mousedown:function(e){y_(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(y_(this,"click")&&t){var n=[e.offsetX,e.offsetY];if(5<Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))return;var r=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);"none"!==r.behavior&&this._dispatchExpand({axisExpandWindow:r.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!this._mouseDownPoint&&y_(this,"mousemove")){var t=this._model,n=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),r=n.behavior;"jump"===r&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===r?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===r&&null})}}};function y_(e,t){var n=e._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===t}function WM(e,t,n,r){for(var o,i=[],s=0;s<n.length;s++){var l=n[s],c=e.get(e.mapDimension(l),t);o=c,("category"===r.getAxis(l).type?null==o:null==o||isNaN(o))||i.push(r.dataToPoint(c,l))}return i}function b_(e,t,n,r,o){var i=WM(e,n,r,o),s=new Bc({shape:{points:i},silent:!0,z2:10});return t.add(s),e.setItemGraphicEl(n,s),s}function ak(e){var t=e.get("smooth",!0);return!0===t&&(t=.3),{lineStyle:e.getModel("lineStyle").getLineStyle(),smooth:null!=t?t:.3}}function Lg(e,t,n,r){var o=r.lineStyle;t.hasItemOption&&(o=t.getItemModel(n).getModel("lineStyle").getLineStyle()),e.useStyle(o);var i=e.style;i.fill=null,i.stroke=t.getItemVisual(n,"color"),i.opacity=t.getItemVisual(n,"opacity"),r.smooth&&(e.shape.smooth=r.smooth)}ra(function(e){(function(t){if(!t.parallel){var n=!1;me(t.series,function(r){r&&"parallel"===r.type&&(n=!0)}),n&&(t.parallel=[{}])}})(e),function(t){me(Js(t.parallelAxis),function(n){if(xt(n)){var r=n.parallelIndex||0,o=Js(t.parallel)[r];o&&o.parallelAxisDefault&&Sn(n,o.parallelAxisDefault,!1)}})}(e)}),ba.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(e,t){var n=this.getSource();return function(r,o){if(!r.encodeDefine){var i=o.ecModel.getComponent("parallel",o.get("parallelIndex"));if(i){var s=r.encodeDefine=ut();me(i.dimensions,function(l){var c=+l.replace("dim","");s.set(l,c)})}}}(n,this),Sp(n,this)},getRawIndicesByActiveState:function(e){var t=this.coordinateSystem,n=this.getData(),r=[];return t.eachActiveState(n,function(o,i){e===o&&r.push(n.getRawIndex(i))}),r},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}}),Ju.extend({type:"parallel",init:function(){this._dataGroup=new pn,this.group.add(this._dataGroup)},render:function(e,t,n,r){var p,y,S,M,k,O,o=this._dataGroup,i=e.getData(),s=this._data,l=e.coordinateSystem,c=l.dimensions,f=ak(e);if(i.diff(s).add(function(p){Lg(b_(i,o,p,c,l),i,p,f)}).update(function(p,y){var b=s.getItemGraphicEl(y),S=WM(i,p,c,l);i.setItemGraphicEl(p,b),so(b,{shape:{points:S}},r&&!1===r.animation?null:e,p),Lg(b,i,p,f)}).remove(function(p){var y=s.getItemGraphicEl(p);o.remove(y)}).execute(),!this._initialized){this._initialized=!0;var h=(y=e,S=(p=l).model,M=p.getRect(),k=new ei({shape:{x:M.x,y:M.y,width:M.width,height:M.height}}),O="horizontal"===S.get("layout")?"width":"height",k.setShape(O,0),Zo(k,{shape:{width:M.width,height:M.height}},y,function(){setTimeout(function(){o.removeClipPath()})}),k);o.setClipPath(h)}this._data=i},incrementalPrepareRender:function(e,t,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(e,t,n){for(var r=t.getData(),o=t.coordinateSystem,i=o.dimensions,s=ak(t),l=e.start;l<e.end;l++){var c=b_(r,this._dataGroup,l,i,o);c.incremental=!0,Lg(c,r,l,s)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});var ob=["lineStyle","normal","opacity"];Ti({seriesType:"parallel",reset:function(e,t,n){var r=e.getModel("itemStyle"),o=e.getModel("lineStyle"),i=t.get("color"),s=o.get("color")||r.get("color")||i[e.seriesIndex%i.length],l=e.get("inactiveOpacity"),c=e.get("activeOpacity"),f=e.getModel("lineStyle").getLineStyle(),h=e.coordinateSystem,p=e.getData(),y={normal:f.opacity,active:c,inactive:l};return p.setVisual("color",s),{progress:function(b,S){h.eachActiveState(S,function(M,k){var O=y[M];if("normal"===M&&S.hasItemOption){var P=S.getItemModel(k).get(ob,!0);null!=P&&(O=P)}S.setItemVisual(k,"opacity",O)},b.start,b.end)}}}});var sk=ba.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(e,t){for(var n=e.edges||e.links,r=e.data||e.nodes,o=e.levels,i=this.levelModels={},s=0;s<o.length;s++)null!=o[s].depth&&0<=o[s].depth&&(i[o[s].depth]=new $o(o[s],this,t));if(r&&n)return Ox(r,n,this,!0,function(l,c){l.wrapMethod("getItemModel",function(f,h){return f.customizeGetParent(function(p){var y=this.parentModel,b=y.getData().getItemLayout(h).depth;return y.levelModels[b]||this.parentModel}),f}),c.wrapMethod("getItemModel",function(f,h){return f.customizeGetParent(function(p){var y=this.parentModel,b=y.getGraph().getEdgeByIndex(h).node1.getLayout().depth;return y.levelModels[b]||this.parentModel}),f})}).data},setNodePosition:function(e,t){var n=this.option.data[e];n.localX=t[0],n.localY=t[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(e,t,n){if("edge"===n){var r=this.getDataParams(e,n),o=r.data,i=o.source+" -- "+o.target;return r.value&&(i+=" : "+r.value),Wo(i)}if("node"!==n)return sk.superCall(this,"formatTooltip",e,t);var s=this.getGraph().getNodeByIndex(e).getLayout().value,l=this.getDataParams(e,n).data.name;return s&&(i=l+" : "+s),Wo(i)},optionUpdated:function(){var e=this.option;!0===e.focusNodeAdjacency&&(e.focusNodeAdjacency="allEdges")},getDataParams:function(e,t){var n=sk.superCall(this,"getDataParams",e,t);if(null==n.value&&"node"===t){var r=this.getGraph().getNodeByIndex(e).getLayout().value;n.value=r}return n},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}}),GM=["itemStyle","opacity"],P0=["emphasis","itemStyle","opacity"],uk=["lineStyle","opacity"],ib=["emphasis","lineStyle","opacity"];function jo(e,t){return e.getVisual("opacity")||e.getModel().get(t)}function x_(e,t,n){var r=e.getGraphicEl(),o=jo(e,t);null!=n&&(null==o&&(o=1),o*=n),r.downplay&&r.downplay(),r.traverse(function(i){"group"!==i.type&&i.setStyle("opacity",o)})}function Fh(e,t){var n=jo(e,t),r=e.getGraphicEl();r.traverse(function(o){"group"!==o.type&&o.setStyle("opacity",n)}),r.highlight&&r.highlight()}var lk=Xu({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(e,t){var n=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+n,t.y2),e.bezierCurveTo(t.cpx2+n,t.cpy2,t.cpx1+n,t.cpy1,t.x1+n,t.y1)):(e.lineTo(t.x2,t.y2+n),e.bezierCurveTo(t.cpx2,t.cpy2+n,t.cpx1,t.cpy1+n,t.x1,t.y1+n)),e.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}});function qx(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&0<=t.depth}function Nl(e,t,n,r,o){var i="vertical"===o?"x":"y";me(e,function(s){var l,c,f;s.sort(function(S,M){return S.getLayout()[i]-M.getLayout()[i]});for(var h=0,p=s.length,y="vertical"===o?"dx":"dy",b=0;b<p;b++)0<(f=h-(c=s[b]).getLayout()[i])&&(l=c.getLayout()[i]+f,c.setLayout("vertical"===o?{x:l}:{y:l},!0)),h=c.getLayout()[i]+c.getLayout()[y]+t;if(0<(f=h-t-("vertical"===o?r:n)))for(l=c.getLayout()[i]-f,c.setLayout("vertical"===o?{x:l}:{y:l},!0),h=l,b=p-2;0<=b;--b)0<(f=(c=s[b]).getLayout()[i]+c.getLayout()[y]+t-h)&&(l=c.getLayout()[i]-f,c.setLayout("vertical"===o?{x:l}:{y:l},!0)),h=c.getLayout()[i]})}function jM(e,t,n){me(e.slice().reverse(),function(r){me(r,function(o){if(o.outEdges.length){var i=R0(o.outEdges,Wm,n)/R0(o.outEdges,Li,n);if(isNaN(i)){var s=o.outEdges.length;i=s?R0(o.outEdges,UM,n)/s:0}if("vertical"===n){var l=o.getLayout().x+(i-$a(o,n))*t;o.setLayout({x:l},!0)}else{var c=o.getLayout().y+(i-$a(o,n))*t;o.setLayout({y:c},!0)}}})})}function Wm(e,t){return $a(e.node2,t)*e.getValue()}function UM(e,t){return $a(e.node2,t)}function vD(e,t){return $a(e.node1,t)*e.getValue()}function qM(e,t){return $a(e.node1,t)}function $a(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function Li(e){return e.getValue()}function R0(e,t,n){for(var r=0,o=e.length,i=-1;++i<o;){var s=+t.call(e,e[i],n);isNaN(s)||(r+=s)}return r}function N0(e,t,n){me(e,function(r){me(r,function(o){if(o.inEdges.length){var i=R0(o.inEdges,vD,n)/R0(o.inEdges,Li,n);if(isNaN(i)){var s=o.inEdges.length;i=s?R0(o.inEdges,qM,n)/s:0}if("vertical"===n){var l=o.getLayout().x+(i-$a(o,n))*t;o.setLayout({x:l},!0)}else{var c=o.getLayout().y+(i-$a(o,n))*t;o.setLayout({y:c},!0)}}})})}Is({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(e,t,n){var y,b,M,r=this,o=e.getGraph(),i=this.group,s=e.layoutInfo,l=s.width,c=s.height,f=e.getData(),h=e.getData("edge"),p=e.get("orient");this._model=e,i.removeAll(),i.attr("position",[s.x,s.y]),o.eachEdge(function(y){var b=new lk;b.dataIndex=y.dataIndex,b.seriesIndex=e.seriesIndex,b.dataType="edge";var S,M,k,O,P,R,F,G,X=y.getModel("lineStyle"),Y=X.get("curveness"),Q=y.node1.getLayout(),ne=y.node1.getModel(),le=ne.get("localX"),ce=ne.get("localY"),ye=y.node2.getLayout(),xe=y.node2.getModel(),Te=xe.get("localX"),Ee=xe.get("localY"),Ve=y.getLayout();switch(b.shape.extent=Math.max(1,Ve.dy),G="vertical"===(b.shape.orient=p)?(P=S=(null!=le?le*l:Q.x)+Ve.sy,R=(M=(null!=ce?ce*c:Q.y)+Q.dy)*(1-Y)+(O=null!=Ee?Ee*c:ye.y)*Y,F=k=(null!=Te?Te*l:ye.x)+Ve.ty,M*Y+O*(1-Y)):(P=(S=(null!=le?le*l:Q.x)+Q.dx)*(1-Y)+(k=null!=Te?Te*l:ye.x)*Y,R=M=(null!=ce?ce*c:Q.y)+Ve.sy,F=S*Y+k*(1-Y),O=(null!=Ee?Ee*c:ye.y)+Ve.ty),b.setShape({x1:S,y1:M,x2:k,y2:O,cpx1:P,cpy1:R,cpx2:F,cpy2:G}),b.setStyle(X.getItemStyle()),b.style.fill){case"source":b.style.fill=y.node1.getVisual("color");break;case"target":b.style.fill=y.node2.getVisual("color")}ya(b,y.getModel("emphasis.lineStyle").getItemStyle()),i.add(b),h.setItemGraphicEl(y.dataIndex,b)}),o.eachNode(function(y){var b=y.getLayout(),S=y.getModel(),M=S.get("localX"),k=S.get("localY"),O=S.getModel("label"),P=S.getModel("emphasis.label"),R=new ei({shape:{x:null!=M?M*l:b.x,y:null!=k?k*c:b.y,width:b.dx,height:b.dy},style:S.getModel("itemStyle").getItemStyle()}),F=y.getModel("emphasis.itemStyle").getItemStyle();Cu(R.style,F,O,P,{labelFetcher:e,labelDataIndex:y.dataIndex,defaultText:y.id,isRectText:!0}),R.setStyle("fill",y.getVisual("color")),ya(R,F),i.add(R),f.setItemGraphicEl(y.dataIndex,R),R.dataType="node"}),f.eachItemGraphicEl(function(y,b){var S=f.getItemModel(b);S.get("draggable")&&(y.drift=function(M,k){r._focusAdjacencyDisabled=!0,this.shape.x+=M,this.shape.y+=k,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:f.getRawIndex(b),localX:this.shape.x/l,localY:this.shape.y/c})},y.ondragend=function(){r._focusAdjacencyDisabled=!1},y.draggable=!0,y.cursor="move"),y.highlight=function(){this.trigger("emphasis")},y.downplay=function(){this.trigger("normal")},y.focusNodeAdjHandler&&y.off("mouseover",y.focusNodeAdjHandler),y.unfocusNodeAdjHandler&&y.off("mouseout",y.unfocusNodeAdjHandler),S.get("focusNodeAdjacency")&&(y.on("mouseover",y.focusNodeAdjHandler=function(){r._focusAdjacencyDisabled||(r._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:y.dataIndex}))}),y.on("mouseout",y.unfocusNodeAdjHandler=function(){r._focusAdjacencyDisabled||r._dispatchUnfocus(n)}))}),h.eachItemGraphicEl(function(y,b){var S=h.getItemModel(b);y.focusNodeAdjHandler&&y.off("mouseover",y.focusNodeAdjHandler),y.unfocusNodeAdjHandler&&y.off("mouseout",y.unfocusNodeAdjHandler),S.get("focusNodeAdjacency")&&(y.on("mouseover",y.focusNodeAdjHandler=function(){r._focusAdjacencyDisabled||(r._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:y.dataIndex}))}),y.on("mouseout",y.unfocusNodeAdjHandler=function(){r._focusAdjacencyDisabled||r._dispatchUnfocus(n)}))}),!this._data&&e.get("animation")&&i.setClipPath((y=i.getBoundingRect(),b=e,Zo(M=new ei({shape:{x:y.x-10,y:y.y-10,width:0,height:y.height+20}}),{shape:{width:y.width+20}},b,function(){i.removeClipPath()}),M)),this._data=e.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(e){var t=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){t._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,n,r){var o=e.getData(),i=o.graph,s=r.dataIndex,l=o.getItemModel(s),c=r.edgeDataIndex;if(null!=s||null!=c){var f=i.getNodeByIndex(s),h=i.getEdgeByIndex(c);if(i.eachNode(function(y){x_(y,GM,.1)}),i.eachEdge(function(y){x_(y,uk,.1)}),f){Fh(f,P0);var p=l.get("focusNodeAdjacency");"outEdges"===p?me(f.outEdges,function(y){y.dataIndex<0||(Fh(y,ib),Fh(y.node2,P0))}):"inEdges"===p?me(f.inEdges,function(y){y.dataIndex<0||(Fh(y,ib),Fh(y.node1,P0))}):"allEdges"===p&&me(f.edges,function(y){y.dataIndex<0||(Fh(y,ib),y.node1!==f&&Fh(y.node1,P0),y.node2!==f&&Fh(y.node2,P0))})}h&&(Fh(h,ib),Fh(h.node1,P0),Fh(h.node2,P0))}},unfocusNodeAdjacency:function(e,t,n,r){var o=e.getGraph();o.eachNode(function(i){x_(i,GM)}),o.eachEdge(function(i){x_(i,uk)})}}),jr({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(n){n.setNodePosition(e.dataIndex,[e.localX,e.localY])})}),oa(function(e,t,n){e.eachSeriesByType("sankey",function(r){var b,o=r.get("nodeWidth"),i=r.get("nodeGap"),s=(b=t,No(r.getBoxLayoutParams(),{width:b.getWidth(),height:b.getHeight()})),l=(r.layoutInfo=s).width,c=s.height,f=r.getGraph(),h=f.nodes,p=f.edges;me(h,function(b){var S=R0(b.outEdges,Li),M=R0(b.inEdges,Li),k=b.getValue()||0,O=Math.max(S,M,k);b.setLayout({value:O},!0)}),function(y,b,S,M,k,O,P,R,F){var G,Y;(function(G,X,Y,Q,ne,le,ce){for(var ye=[],xe=[],Te=[],Ee=[],Ve=0,Be=0;Be<X.length;Be++)ye[Be]=1;for(Be=0;Be<G.length;Be++)xe[Be]=G[Be].inEdges.length,0===xe[Be]&&Te.push(G[Be]);for(var nt=-1;Te.length;){for(var bt=0;bt<Te.length;bt++){var _t=Te[bt],wt=_t.hostGraph.data.getRawDataItem(_t.dataIndex),Lt=null!=wt.depth&&0<=wt.depth;Lt&&wt.depth>nt&&(nt=wt.depth),_t.setLayout({depth:Lt?wt.depth:Ve},!0),_t.setLayout("vertical"===le?{dy:Y}:{dx:Y},!0);for(var Ht=0;Ht<_t.outEdges.length;Ht++){var Ln=_t.outEdges[Ht];ye[X.indexOf(Ln)]=0;var Yn=Ln.node2;0==--xe[G.indexOf(Yn)]&&Ee.indexOf(Yn)<0&&Ee.push(Yn)}}++Ve,Te=Ee,Ee=[]}for(Be=0;Be<ye.length;Be++)if(1===ye[Be])throw new Error("Sankey is a DAG, the original data has cycle!");var Lo,Nr,Tr=Ve-1<nt?nt:Ve-1;ce&&"left"!==ce&&function(Ko,Lo,Nr,_n){if("right"===Lo){for(var Or=[],ni=Ko,xi=0;ni.length;){for(var ga=0;ga<ni.length;ga++){var Jc=ni[ga];Jc.setLayout({skNodeHeight:xi},!0);for(var zl=0;zl<Jc.inEdges.length;zl++){var Qc=Jc.inEdges[zl];Or.indexOf(Qc.node1)<0&&Or.push(Qc.node1)}}ni=Or,Or=[],++xi}me(Ko,function(Fl){qx(Fl)||Fl.setLayout({depth:Math.max(0,_n-Fl.getLayout().skNodeHeight)},!0)})}else"justify"===Lo&&(Ic=_n,me(Ko,function(Oc){qx(Oc)||Oc.outEdges.length||Oc.setLayout({depth:Ic},!0)}));var Ic}(G,ce,0,Tr),Lo="vertical"===le?(ne-Y)/Tr:(Q-Y)/Tr,Nr=le,me(G,function(_n){var Or=_n.getLayout().depth*Lo;_n.setLayout("vertical"===Nr?{y:Or}:{x:Or},!0)})})(y,b,S,k,O,R,F),function(G,X,Y,Q,ne,le,ce){var Ve,Be,nt,ye=(Ve=[],Be="vertical"===ce?"y":"x",(nt=Ta(G,function(bt){return bt.getLayout()[Be]})).keys.sort(function(bt,_t){return bt-_t}),me(nt.keys,function(bt){Ve.push(nt.buckets.get(bt))}),Ve);(function(Te,Ee,Ve,Be,nt,bt){var _t=1/0;me(Te,function(wt){var Lt=wt.length,Ht=0;me(wt,function(Ft){Ht+=Ft.getLayout().value});var Ln="vertical"===bt?(Be-(Lt-1)*nt)/Ht:(Ve-(Lt-1)*nt)/Ht;Ln<_t&&(_t=Ln)}),me(Te,function(wt){me(wt,function(Lt,Ht){var Ln=Lt.getLayout().value*_t;"vertical"===bt?(Lt.setLayout({x:Ht},!0),Lt.setLayout({dx:Ln},!0)):(Lt.setLayout({y:Ht},!0),Lt.setLayout({dy:Ln},!0))})}),me(Ee,function(wt){var Lt=+wt.getValue()*_t;wt.setLayout({dy:Lt},!0)})})(ye,X,Y,Q,ne,ce),Nl(ye,ne,Y,Q,ce);for(var xe=1;0<le;le--)jM(ye,xe*=.99,ce),Nl(ye,ne,Y,Q,ce),N0(ye,xe,ce),Nl(ye,ne,Y,Q,ce)}(y,b,O,k,M,P,R),Y="vertical"===R?"x":"y",me(G=y,function(Q){Q.outEdges.sort(function(ne,le){return ne.node2.getLayout()[Y]-le.node2.getLayout()[Y]}),Q.inEdges.sort(function(ne,le){return ne.node1.getLayout()[Y]-le.node1.getLayout()[Y]})}),me(G,function(Q){var ne=0,le=0;me(Q.outEdges,function(ce){ce.setLayout({sy:ne},!0),ne+=ce.getLayout().dy}),me(Q.inEdges,function(ce){ce.setLayout({ty:le},!0),le+=ce.getLayout().dy})})}(h,p,o,i,l,c,0!==_r(h,function(y){return 0===y.getLayout().value}).length?0:r.get("layoutIterations"),r.get("orient"),r.get("nodeAlign"))})}),Ti(function(e,t){e.eachSeriesByType("sankey",function(n){var r=n.getGraph().nodes;if(r.length){var o=1/0,i=-1/0;me(r,function(s){var l=s.getLayout().value;l<o&&(o=l),i<l&&(i=l)}),me(r,function(s){var l=new Ni({type:"color",mappingMethod:"linear",dataExtent:[o,i],visual:n.get("color")}).mapValueToVisual(s.getLayout().value),c=s.getModel().get("itemStyle.color");s.setVisual("color",null!=c?c:l)})}})});var ck={_baseAxisDim:null,getInitialData:function(e,t){var n,r,o=t.getComponent("xAxis",this.get("xAxisIndex")),i=t.getComponent("yAxis",this.get("yAxisIndex")),s=o.get("type"),l=i.get("type");"category"===s?(e.layout="horizontal",n=o.getOrdinalMeta(),r=!0):"category"===l?(e.layout="vertical",n=i.getOrdinalMeta(),r=!0):e.layout=e.layout||"horizontal";var c=["x","y"],f="horizontal"===e.layout?0:1,h=this._baseAxisDim=c[f],p=c[1-f],y=[o,i],b=y[f].get("type"),S=y[1-f].get("type"),M=e.data;if(M&&r){var k=[];me(M,function(R,F){var G;R.value&&rn(R.value)?(G=R.value.slice(),R.value.unshift(F)):rn(R)?(G=R.slice(),R.unshift(F)):G=R,k.push(G)}),e.data=k}var O=this.defaultValueDimensions,P=[{name:h,type:J_(b),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:p,type:J_(S),dimsDef:O.slice()}];return l0(this,{coordDimensions:P,dimensionsCount:O.length+1,encodeDefaulter:ar(as,P,this)})},getBaseAxis:function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis}};_e(ba.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),ck,!0);var Tc=["itemStyle"],ab=["emphasis","itemStyle"],Ll=(Ju.extend({type:"boxplot",render:function(e,t,n){var r=e.getData(),o=this.group,i=this._data;this._data||o.removeAll();var s="horizontal"===e.get("layout")?1:0;r.diff(i).add(function(l){if(r.hasValue(l)){var c=Xx(r.getItemLayout(l),r,l,s,!0);r.setItemGraphicEl(l,c),o.add(c)}}).update(function(l,c){var f=i.getItemGraphicEl(c);if(r.hasValue(l)){var h=r.getItemLayout(l);f?L0(h,f,r,l):f=Xx(h,r,l,s),o.add(f),r.setItemGraphicEl(l,f)}else o.remove(f)}).remove(function(l){var c=i.getItemGraphicEl(l);c&&o.remove(c)}).execute(),this._data=r},remove:function(e){var t=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(r){r&&t.remove(r)})},dispose:Pt}),Qr.extend({type:"boxplotBoxPath",shape:{},buildPath:function(e,t){var n=t.points,r=0;for(e.moveTo(n[r][0],n[r][1]),r++;r<4;r++)e.lineTo(n[r][0],n[r][1]);for(e.closePath();r<n.length;r++)e.moveTo(n[r][0],n[r][1]),r++,e.lineTo(n[r][0],n[r][1])}}));function Xx(e,t,n,r,o){var l,c,f,i=e.ends,s=new Ll({shape:{points:o?(l=i,c=r,f=e,Kt(l,function(h){return(h=h.slice())[c]=f.initBaseline,h})):i}});return L0(e,s,t,n,o),s}function L0(e,t,n,r,o){(0,Jd[o?"initProps":"updateProps"])(t,{shape:{points:e.ends}},n.hostModel,r);var s=n.getItemModel(r),l=s.getModel(Tc),c=n.getItemVisual(r,"color"),f=l.getItemStyle(["borderColor"]);f.stroke=c,f.strokeNoScale=!0,t.useStyle(f),t.z2=100,ya(t,s.getModel(ab).getItemStyle())}var vS=["itemStyle","borderColor"],ev=me;Ti(function(e,t){var n=e.get("color");e.eachRawSeriesByType("boxplot",function(r){var o=n[r.seriesIndex%n.length],i=r.getData();i.setVisual({legendSymbol:"roundRect",color:r.get(vS)||o}),e.isSeriesFiltered(r)||i.each(function(s){var l=i.getItemModel(s);i.setItemVisual(s,{color:l.get(vS,!0)})})})}),oa(function(e){var t=function(n){var r=[],o=[];return n.eachSeriesByType("boxplot",function(i){var s=i.getBaseAxis(),l=dn(o,s);l<0&&(o[l=o.length]=s,r[l]={axis:s,seriesModels:[]}),r[l].seriesModels.push(i)}),r}(e);ev(t,function(n){var r=n.seriesModels;r.length&&(function(o){var i,s,l=o.axis,c=o.seriesModels,f=c.length,h=o.boxWidthList=[],p=o.boxOffsetList=[],y=[];if("category"===l.type)s=l.getBandWidth();else{var b=0;ev(c,function(P){b=Math.max(b,P.getData().count())}),i=l.getExtent(),Math.abs(i[1]-i[0])}ev(c,function(P){var R=P.get("boxWidth");rn(R)||(R=[R,R]),y.push([Pn(R[0],s)||0,Pn(R[1],s)||0])});var S=.8*s-2,M=S/f*.3,k=(S-M*(f-1))/f,O=k/2-S/2;ev(c,function(P,R){p.push(O),O+=M+k,h.push(Math.min(Math.max(k,y[R][0]),y[R][1]))})}(n),ev(r,function(o,i){!function(s,l,c){var f=s.coordinateSystem,h=s.getData(),p=c/2,y="horizontal"===s.get("layout")?0:1,b=1-y,S=["x","y"],M=h.mapDimension(S[y]),k=h.mapDimension(S[b],!0);if(!(null==M||k.length<5))for(var O=0;O<h.count();O++){var P=h.get(M,O),R=ne(P,k[2],O),F=ne(P,k[0],O),G=ne(P,k[1],O),X=ne(P,k[3],O),Y=ne(P,k[4],O),Q=[];le(Q,G,0),le(Q,X,1),Q.push(F,G,Y,X),ce(Q,F),ce(Q,Y),ce(Q,R),h.setItemLayout(O,{initBaseline:R[b],ends:Q})}function ne(ye,xe,Te){var Ee,Ve=h.get(xe,Te),Be=[];return Be[y]=ye,Be[b]=Ve,isNaN(ye)||isNaN(Ve)?Ee=[NaN,NaN]:(Ee=f.dataToPoint(Be))[y]+=l,Ee}function le(ye,xe,Te){var Ee=xe.slice(),Ve=xe.slice();Ee[y]+=p,Ve[y]-=p,Te?ye.push(Ee,Ve):ye.push(Ve,Ee)}function ce(ye,xe){var Te=xe.slice(),Ee=xe.slice();Te[y]-=p,Ee[y]+=p,ye.push(Te,Ee)}}(o,n.boxOffsetList[i],n.boxWidthList[i])}))})}),_e(ba.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(e,t,n){var r=t.getItemLayout(e);return r&&n.rect(r.brushRect)}}),ck,!0);var B0=["itemStyle"],yS=["emphasis","itemStyle"],XM=["color","color0","borderColor","borderColor0"],yD=(Ju.extend({type:"candlestick",render:function(e,t,n){this.group.removeClipPath(),this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},incrementalPrepareRender:function(e,t,n){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,n,r){this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e){var t=e.getData(),n=this._data,r=this.group,o=t.getLayout("isSimpleBox"),i=e.get("clip",!0),s=e.coordinateSystem,l=s.getArea&&s.getArea();this._data||r.removeAll(),t.diff(n).add(function(c){if(t.hasValue(c)){var f,h=t.getItemLayout(c);if(i&&bS(l,h))return;Zo(f=Yx(h,0,!0),{shape:{points:h.ends}},e,c),sb(f,t,c,o),r.add(f),t.setItemGraphicEl(c,f)}}).update(function(c,f){var h=n.getItemGraphicEl(f);if(t.hasValue(c)){var p=t.getItemLayout(c);i&&bS(l,p)?r.remove(h):(h?so(h,{shape:{points:p.ends}},e,c):h=Yx(p),sb(h,t,c,o),r.add(h),t.setItemGraphicEl(c,h))}else r.remove(h)}).remove(function(c){var f=n.getItemGraphicEl(c);f&&r.remove(f)}).execute(),this._data=t},_renderLarge:function(e){this._clear(),__(e,this.group);var t=e.get("clip",!0)?e0(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},_incrementalRenderNormal:function(e,t){for(var n,r=t.getData(),o=r.getLayout("isSimpleBox");null!=(n=e.next());){var i;sb(i=Yx(r.getItemLayout(n)),r,n,o),i.incremental=!0,this.group.add(i)}},_incrementalRenderLarge:function(e,t){__(t,this.group,!0)},remove:function(e){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:Pt}),Qr.extend({type:"normalCandlestickBox",shape:{},buildPath:function(e,t){var n=t.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))}}));function Yx(e,t,n){var r=e.ends;return new yD({shape:{points:n?function(o,i){return Kt(o,function(s){return(s=s.slice())[1]=i.initBaseline,s})}(r,e):r},z2:100})}function bS(e,t){for(var n=!0,r=0;r<t.ends.length;r++)if(e.contain(t.ends[r][0],t.ends[r][1])){n=!1;break}return n}function sb(e,t,n,r){var o=t.getItemModel(n),i=o.getModel(B0),s=t.getItemVisual(n,"color"),l=t.getItemVisual(n,"borderColor")||s,c=i.getItemStyle(XM);e.useStyle(c),e.style.strokeNoScale=!0,e.style.fill=s,e.style.stroke=l,e.__simpleBox=r,ya(e,o.getModel(yS).getItemStyle())}var tv=Qr.extend({type:"largeCandlestickBox",shape:{},buildPath:function(e,t){for(var n=t.points,r=0;r<n.length;)if(this.__sign===n[r++]){var o=n[r++];e.moveTo(o,n[r++]),e.lineTo(o,n[r++])}else r+=3}});function __(e,t,n){var r=e.getData(),o=r.getLayout("largePoints"),i=new tv({shape:{points:o},__sign:1});t.add(i);var s=new tv({shape:{points:o},__sign:-1});t.add(s),z0(1,i,e,r),z0(-1,s,e,r),n&&(i.incremental=!0,s.incremental=!0)}function z0(e,t,n,r){var o=0<e?"P":"N",i=r.getVisual("borderColor"+o)||r.getVisual("color"+o),s=n.getModel(B0).getItemStyle(XM);t.useStyle(s),t.style.fill=null,t.style.stroke=i}var w_=["itemStyle","borderColor"],ub=["itemStyle","borderColor0"],S_=["itemStyle","color"],YM=["itemStyle","color0"],Zx={seriesType:"candlestick",plan:wd(),performRawSeries:!0,reset:function(e,t){if(e.getData().setVisual({legendSymbol:"roundRect",colorP:n(1,e),colorN:n(-1,e),borderColorP:r(1,e),borderColorN:r(-1,e)}),!t.isSeriesFiltered(e))return!e.pipelineContext.large&&{progress:function(o,i){for(var s;null!=(s=o.next());){var l=i.getItemModel(s),c=i.getItemLayout(s).sign;i.setItemVisual(s,{color:n(c,l),borderColor:r(c,l)})}}};function n(o,i){return i.get(0<o?S_:YM)}function r(o,i){return i.get(0<o?w_:ub)}}},ZM="undefined"!=typeof Float32Array?Float32Array:Array,Iu={seriesType:"candlestick",plan:wd(),reset:function(e){var p,y,b,S,M,k,O,P,t=e.coordinateSystem,n=e.getData(),r=(y=n,M="category"===(S=(p=e).getBaseAxis()).type?S.getBandWidth():(b=S.getExtent(),Math.abs(b[1]-b[0])/y.count()),k=Pn(Dr(p.get("barMaxWidth"),M),M),O=Pn(Dr(p.get("barMinWidth"),1),M),null!=(P=p.get("barWidth"))?Pn(P,M):Math.max(Math.min(M/2,k),O)),o=["x","y"],i=n.mapDimension(o[0]),s=n.mapDimension(o[1],!0),l=s[0],c=s[1],f=s[2],h=s[3];if(n.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),!(null==i||s.length<4))return{progress:e.pipelineContext.large?function(p,y){for(var b,S,M=new ZM(4*p.count),k=0,O=[],P=[];null!=(S=p.next());){var R=y.get(i,S),F=y.get(l,S),G=y.get(c,S),X=y.get(f,S),Y=y.get(h,S);isNaN(R)||isNaN(X)||isNaN(Y)?(M[k++]=NaN,k+=3):(M[k++]=$x(y,S,F,G,c),O[0]=R,O[1]=X,b=t.dataToPoint(O,null,P),M[k++]=b?b[0]:NaN,M[k++]=b?b[1]:NaN,O[1]=Y,b=t.dataToPoint(O,null,P),M[k++]=b?b[1]:NaN)}y.setLayout("largePoints",M)}:function(p,y){for(var b;null!=(b=p.next());){var S=y.get(i,b),M=y.get(l,b),k=y.get(c,b),O=y.get(f,b),P=y.get(h,b),R=Math.min(M,k),F=Math.max(M,k),G=le(R,S),X=le(F,S),Y=le(O,S),Q=le(P,S),ne=[];ce(ne,X,0),ce(ne,G,1),ne.push(xe(Q),xe(X),xe(Y),xe(G)),y.setItemLayout(b,{sign:$x(y,b,M,k,c),initBaseline:k<M?X[1]:G[1],ends:ne,brushRect:(Te=O,Ee=P,Ve=S,Be=void 0,nt=void 0,Be=le(Te,Ve),nt=le(Ee,Ve),Be[0]-=r/2,nt[0]-=r/2,{x:Be[0],y:Be[1],width:r,height:nt[1]-Be[1]})})}var Te,Ee,Ve,Be,nt;function le(Te,Ee){var Ve=[];return Ve[0]=Ee,Ve[1]=Te,isNaN(Ee)||isNaN(Te)?[NaN,NaN]:t.dataToPoint(Ve)}function ce(Te,Ee,Ve){var Be=Ee.slice(),nt=Ee.slice();Be[0]=Kg(Be[0]+r/2,1,!1),nt[0]=Kg(nt[0]-r/2,1,!0),Ve?Te.push(Be,nt):Te.push(nt,Be)}function xe(Te){return Te[0]=Kg(Te[0],1),Te}}}}};function $x(e,t,n,r,o){return r<n?-1:n<r?1:0<t?e.get(o,t-1)<=r?1:-1:1}function C_(e,t){var n=t.rippleEffectColor||t.color;e.eachChild(function(r){r.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?n:null,fill:"fill"===t.brushType?n:null}})})}function Kx(e,t){pn.call(this);var n=new Dp(e,t),r=new pn;this.add(n),this.add(r),r.beforeUpdate=function(){this.attr(n.getScale())},this.updateData(e,t)}ra(function(e){e&&rn(e.series)&&me(e.series,function(t){xt(t)&&"k"===t.type&&(t.type="candlestick")})}),Ti(Zx),oa(Iu),ba.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(e,t){return Sp(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var F0=Kx.prototype;F0.stopEffectAnimation=function(){this.childAt(1).removeAll()},F0.startEffectAnimation=function(e){for(var t=e.symbolType,n=e.color,r=this.childAt(1),o=0;o<3;o++){var i=Zc(t,-1,-1,2,2,n);i.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var s=-o/3*e.period+e.effectOffset;i.animate("",!0).when(e.period,{scale:[e.rippleScale/2,e.rippleScale/2]}).delay(s).start(),i.animateStyle(!0).when(e.period,{opacity:0}).delay(s).start(),r.add(i)}C_(r,e)},F0.updateEffectAnimation=function(e){for(var t=this._effectCfg,n=this.childAt(1),r=["symbolType","period","rippleScale"],o=0;o<r.length;o++){var i=r[o];if(t[i]!==e[i])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}C_(n,e)},F0.highlight=function(){this.trigger("emphasis")},F0.downplay=function(){this.trigger("normal")},F0.updateData=function(e,t){var n=e.hostModel;this.childAt(0).updateData(e,t);var M,r=this.childAt(1),o=e.getItemModel(t),i=e.getItemVisual(t,"symbol"),s=(rn(M=e.getItemVisual(t,"symbolSize"))||(M=[+M,+M]),M),l=e.getItemVisual(t,"color");r.attr("scale",s),r.traverse(function(M){M.attr({fill:l})});var c=o.getShallow("symbolOffset");if(c){var f=r.position;f[0]=Pn(c[0],s[0]),f[1]=Pn(c[1],s[1])}var h=e.getItemVisual(t,"symbolRotate");r.rotation=(h||0)*Math.PI/180||0;var p={};if(p.showEffectOn=n.get("showEffectOn"),p.rippleScale=o.get("rippleEffect.scale"),p.brushType=o.get("rippleEffect.brushType"),p.period=1e3*o.get("rippleEffect.period"),p.effectOffset=t/e.count(),p.z=o.getShallow("z")||0,p.zlevel=o.getShallow("zlevel")||0,p.symbolType=i,p.color=l,p.rippleEffectColor=o.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===p.showEffectOn)this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p;else{this._effectCfg=null,this.stopEffectAnimation();var y=this.childAt(0),b=function(){y.highlight(),"render"!==p.showEffectOn&&this.startEffectAnimation(p)},S=function(){y.downplay(),"render"!==p.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",b,this).on("mouseout",S,this).on("emphasis",b,this).on("normal",S,this)}this._effectCfg=p},F0.fadeOut=function(e){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),e&&e()},Rn(Kx,pn),Is({type:"effectScatter",init:function(){this._symbolDraw=new Dd(Kx)},render:function(e,t,n){var r=e.getData(),o=this._symbolDraw;o.updateData(r),this.group.add(o.group)},updateTransform:function(e,t,n){var r=e.getData();this.group.dirty();var o=Ry().reset(e);o.progress&&o.progress({start:0,end:r.count()},r),this._symbolDraw.updateLayout(r)},_updateGroupTransform:function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=Wa(t.getRoamTransform()),this.group.decomposeTransform())},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(t)},dispose:function(){}}),Ti(Ap("effectScatter","circle")),oa(Ry("effectScatter"));var dk="undefined"==typeof Uint32Array?Array:Uint32Array,fk="undefined"==typeof Float64Array?Array:Float64Array;function a(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=Kt(t,function(n){var r={coords:[n[0].coord,n[1].coord]};return n[0].name&&(r.fromName=n[0].name),n[1].name&&(r.toName=n[1].name),xr([r,n[0],n[1]])}))}var d=ba.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(e){e.data=e.data||[],a(e);var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count)),d.superApply(this,"init",arguments)},mergeOption:function(e){if(a(e),e.data){var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count))}d.superApply(this,"mergeOption",arguments)},appendData:function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=dt(this._flatCoords,t.flatCoords),this._flatCoordsOffset=dt(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var t=this.getData().getItemModel(e);return t.option instanceof Array?t.option:t.getShallow("coords")},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,t){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*e],r=this._flatCoordsOffset[2*e+1],o=0;o<r;o++)t[o]=t[o]||[],t[o][0]=this._flatCoords[n+2*o],t[o][1]=this._flatCoords[n+2*o+1];return r}var i=this._getCoordsFromItemModel(e);for(o=0;o<i.length;o++)t[o]=t[o]||[],t[o][0]=i[o][0],t[o][1]=i[o][1];return i.length},_processFlatCoordsArray:function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),"number"!=typeof e[0])return{flatCoordsOffset:null,flatCoords:null,count:e.length};for(var n=e.length,r=new dk(n),o=new fk(n),i=0,s=0,l=0,c=0;c<n;){l++;var f=e[c++];r[s++]=i+t,r[s++]=f;for(var h=0;h<f;h++){var p=e[c++],y=e[c++];o[i++]=p,o[i++]=y}}return{flatCoordsOffset:new Uint32Array(r.buffer,0,s),flatCoords:o,count:l}},getInitialData:function(e,t){var n=new ml(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(r,o,i,s){if(r instanceof Array)return NaN;n.hasItemOption=!0;var l=r.value;return null!=l?l instanceof Array?l[s]:l:void 0}),n},formatTooltip:function(e){var t=this.getData().getItemModel(e),n=t.get("name");if(n)return n;var r=t.get("fromName"),o=t.get("toName"),i=[];return null!=r&&i.push(r),null!=o&&i.push(o),Wo(i.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});function g(e,t,n){pn.call(this),this.add(this.createLine(e,t,n)),this._updateEffectSymbol(e,t)}var v=g.prototype;function x(e,t,n){pn.call(this),this._createPolyline(e,t,n)}v.createLine=function(e,t,n){return new zm(e,t,n)},v._updateEffectSymbol=function(e,t){var n=e.getItemModel(t).getModel("effect"),r=n.get("symbolSize"),o=n.get("symbol");rn(r)||(r=[r,r]);var i=n.get("color")||e.getItemVisual(t,"color"),s=this.childAt(1);this._symbolType!==o&&(this.remove(s),(s=Zc(o,-.5,-.5,1,1,i)).z2=100,s.culling=!0,this.add(s)),s&&(s.setStyle("shadowColor",i),s.setStyle(n.getItemStyle(["color"])),s.attr("scale",r),s.setColor(i),s.attr("scale",r),this._symbolType=o,this._symbolScale=r,this._updateEffectAnimation(e,n,t))},v._updateEffectAnimation=function(e,t,n){var r=this.childAt(1);if(r){var o=this,i=e.getItemLayout(n),s=1e3*t.get("period"),l=t.get("loop"),c=t.get("constantSpeed"),f=pe(t.get("delay"),function(b){return b/e.count()*s/3}),h="function"==typeof f;if(r.ignore=!0,this.updateAnimationPoints(r,i),0<c&&(s=this.getLineLength(r)/c*1e3),s!==this._period||l!==this._loop){r.stopAnimation();var p=f;h&&(p=f(n)),0<r.__t&&(p=-s*r.__t),r.__t=0;var y=r.animate("",l).when(s,{__t:1}).delay(p).during(function(){o.updateSymbolPosition(r)});l||y.done(function(){o.remove(r)}),y.start()}this._period=s,this._loop=l}},v.getLineLength=function(e){return fs(e.__p1,e.__cp1)+fs(e.__cp1,e.__p2)},v.updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},v.updateData=function(e,t,n){this.childAt(0).updateData(e,t,n),this._updateEffectSymbol(e,t)},v.updateSymbolPosition=function(e){var t=e.__p1,n=e.__p2,r=e.__cp1,o=e.__t,i=e.position,s=[i[0],i[1]],l=Hu,c=wf;i[0]=l(t[0],r[0],n[0],o),i[1]=l(t[1],r[1],n[1],o);var f=c(t[0],r[0],n[0],o),h=c(t[1],r[1],n[1],o);if(e.rotation=-Math.atan2(h,f)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==e.__lastT&&e.__lastT<e.__t){var p=1.05*fs(s,i);e.attr("scale",[e.scale[0],p]),1===o&&(i[0]=s[0]+(i[0]-s[0])/2,i[1]=s[1]+(i[1]-s[1])/2)}else 1===e.__lastT?(p=2*fs(t,i),e.attr("scale",[e.scale[0],p])):e.attr("scale",this._symbolScale);e.__lastT=e.__t,e.ignore=!1},v.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var n=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,n,t)},Rn(g,pn);var C=x.prototype;function A(e,t,n){g.call(this,e,t,n),this._lastFrame=0,this._lastFramePercent=0}C._createPolyline=function(e,t,n){var r=e.getItemLayout(t),o=new Bc({shape:{points:r}});this.add(o),this._updateCommonStl(e,t,n)},C.updateData=function(e,t,n){var r=e.hostModel;so(this.childAt(0),{shape:{points:e.getItemLayout(t)}},r,t),this._updateCommonStl(e,t,n)},C._updateCommonStl=function(e,t,n){var r=this.childAt(0),o=e.getItemModel(t),i=e.getItemVisual(t,"color"),s=n&&n.lineStyle,l=n&&n.hoverLineStyle;n&&!e.hasItemOption||(s=o.getModel("lineStyle").getLineStyle(),l=o.getModel("emphasis.lineStyle").getLineStyle()),r.useStyle(un({strokeNoScale:!0,fill:"none",stroke:i},s)),r.hoverStyle=l,ya(this)},C.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},Rn(x,pn);var E=A.prototype;E.createLine=function(e,t,n){return new x(e,t,n)},E.updateAnimationPoints=function(e,t){this._points=t;for(var n=[0],r=0,o=1;o<t.length;o++)r+=fs(t[o-1],t[o]),n.push(r);if(0!==r){for(o=0;o<n.length;o++)n[o]/=r;this._offsets=n,this._length=r}},E.getLineLength=function(e){return this._length},E.updateSymbolPosition=function(e){var t=e.__t,n=this._points,r=this._offsets,o=n.length;if(r){var i=this._lastFrame;if(t<this._lastFramePercent){for(s=Math.min(i+1,o-1);0<=s&&!(r[s]<=t);s--);s=Math.min(s,o-2)}else{for(var s=i;s<o&&!(r[s]>t);s++);s=Math.min(s-1,o-2)}fi(e.position,n[s],n[s+1],(t-r[s])/(r[s+1]-r[s])),e.rotation=-Math.atan2(n[s+1][1]-n[s][1],n[s+1][0]-n[s][0])-Math.PI/2,this._lastFrame=s,this._lastFramePercent=t,e.ignore=!1}},Rn(A,g);var z=Xu({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(e,t){var n=t.segs,r=t.curveness;if(t.polyline)for(var o=0;o<n.length;){var i=n[o++];if(0<i){e.moveTo(n[o++],n[o++]);for(var s=1;s<i;s++)e.lineTo(n[o++],n[o++])}}else for(o=0;o<n.length;){var l=n[o++],c=n[o++],f=n[o++],h=n[o++];e.moveTo(l,c),0<r?e.quadraticCurveTo((l+f)/2-(c-h)*r,(c+h)/2-(f-l)*r,f,h):e.lineTo(f,h)}},findDataIndex:function(e,t){var n=this.shape,r=n.segs,o=n.curveness;if(n.polyline)for(var i=0,s=0;s<r.length;){var l=r[s++];if(0<l)for(var c=r[s++],f=r[s++],h=1;h<l;h++)if(Zd(c,f,p=r[s++],y=r[s++]))return i;i++}else for(i=0,s=0;s<r.length;){c=r[s++],f=r[s++];var p=r[s++],y=r[s++];if(0<o){if(_b(c,f,(c+p)/2-(f-y)*o,(f+y)/2-(p-c)*o,p,y))return i}else if(Zd(c,f,p,y))return i;i++}return-1}});function L(){this.group=new pn}var U=L.prototype;U.isPersistent=function(){return!this._incremental},U.updateData=function(e){this.group.removeAll();var t=new z({rectHover:!0,cursor:"default"});t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e),this.group.add(t),this._incremental=null},U.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),5e5<e.count()?(this._incremental||(this._incremental=new Tl({silent:!0})),this.group.add(this._incremental)):this._incremental=null},U.incrementalUpdate=function(e,t){var n=new z;n.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(n,t,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=e.start,this.group.add(n))},U.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},U._setCommon=function(e,t,n){var r=t.hostModel;e.setShape({polyline:r.get("polyline"),curveness:r.get("lineStyle.curveness")}),e.useStyle(r.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var o=t.getVisual("color");o&&e.setStyle("stroke",o),e.setStyle("fill"),n||(e.seriesIndex=r.seriesIndex,e.on("mousemove",function(i){e.dataIndex=null;var s=e.findDataIndex(i.offsetX,i.offsetY);0<s&&(e.dataIndex=s+e.__startIndex)}))},U._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var V={seriesType:"lines",plan:wd(),reset:function(e){var t=e.coordinateSystem,n=e.get("polyline"),r=e.pipelineContext.large;return{progress:function(o,i){var s=[];if(r){var l,c=o.end-o.start;if(n){for(var f=0,h=o.start;h<o.end;h++)f+=e.getLineCoordsCount(h);l=new Float32Array(c+2*f)}else l=new Float32Array(4*c);var p=0,y=[];for(h=o.start;h<o.end;h++){var b=e.getLineCoords(h,s);n&&(l[p++]=b);for(var S=0;S<b;S++)y=t.dataToPoint(s[S],!1,y),l[p++]=y[0],l[p++]=y[1]}i.setLayout("linesPoints",l)}else for(h=o.start;h<o.end;h++){var M=i.getItemModel(h),k=(b=e.getLineCoords(h,s),[]);if(n)for(var O=0;O<b;O++)k.push(t.dataToPoint(s[O]));else{k[0]=t.dataToPoint(s[0]),k[1]=t.dataToPoint(s[1]);var P=M.get("lineStyle.curveness");+P&&(k[2]=[(k[0][0]+k[1][0])/2-(k[0][1]-k[1][1])*P,(k[0][1]+k[1][1])/2-(k[1][0]-k[0][0])*P])}i.setItemLayout(h,k)}}}}};function Z(e){return e instanceof Array||(e=[e,e]),e}Is({type:"lines",init:function(){},render:function(e,t,n){var r=e.getData(),o=this._updateLineDraw(r,e),i=e.get("zlevel"),s=e.get("effect.trailLength"),l=n.getZr(),c="svg"===l.painter.getType();c||l.painter.getLayer(i).clear(!0),null==this._lastZlevel||c||l.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&s&&(c||l.configLayer(i,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(s/10+.9,1),0)})),o.updateData(r);var f=e.get("clip",!0)&&e0(e.coordinateSystem,!1,e);f?this.group.setClipPath(f):this.group.removeClipPath(),this._lastZlevel=i,this._finished=!0},incrementalPrepareRender:function(e,t,n){var r=e.getData();this._updateLineDraw(r,e).incrementalPrepareUpdate(r),this._clearLayer(n),this._finished=!1},incrementalRender:function(e,t,n){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,n){var r=e.getData(),o=e.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var i=V.reset(e);i.progress&&i.progress({start:0,end:r.count()},r),this._lineDraw.updateLayout(),this._clearLayer(n)},_updateLineDraw:function(e,t){var n=this._lineDraw,r=this._showEffect(t),o=!!t.get("polyline"),i=t.pipelineContext.large;return n&&r===this._hasEffet&&o===this._isPolyline&&i===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=i?new L:new Xp(o?r?A:x:r?g:zm),this._hasEffet=r,this._isPolyline=o,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},_showEffect:function(e){return!!e.get("effect.show")},_clearLayer:function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},dispose:function(){}});var ee="lineStyle.opacity".split("."),oe={seriesType:"lines",reset:function(e,t,n){var r=Z(e.get("symbol")),o=Z(e.get("symbolSize")),i=e.getData();return i.setVisual("fromSymbol",r&&r[0]),i.setVisual("toSymbol",r&&r[1]),i.setVisual("fromSymbolSize",o&&o[0]),i.setVisual("toSymbolSize",o&&o[1]),i.setVisual("opacity",e.get(ee)),{dataEach:i.hasItemOption?function(s,l){var c=s.getItemModel(l),f=Z(c.getShallow("symbol",!0)),h=Z(c.getShallow("symbolSize",!0)),p=c.get(ee);f[0]&&s.setItemVisual(l,"fromSymbol",f[0]),f[1]&&s.setItemVisual(l,"toSymbol",f[1]),h[0]&&s.setItemVisual(l,"fromSymbolSize",h[0]),h[1]&&s.setItemVisual(l,"toSymbolSize",h[1]),s.setItemVisual(l,"opacity",p)}:null}}};function re(){var e=Qn();this.canvas=e,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}oa(V),Ti(oe),ba.extend({type:"series.heatmap",getInitialData:function(e,t){return Sp(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var e=ku.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}}),re.prototype={update:function(e,t,n,r,o,i){var s=this._getBrush(),l=this._getGradient(e,o,"inRange"),c=this._getGradient(e,o,"outOfRange"),f=this.pointSize+this.blurSize,h=this.canvas,p=h.getContext("2d"),y=e.length;h.width=t,h.height=n;for(var b=0;b<y;++b){var S=e[b],M=S[0],k=S[1],O=r(S[2]);p.globalAlpha=O,p.drawImage(s,M-f,k-f)}if(!h.width||!h.height)return h;for(var P=p.getImageData(0,0,h.width,h.height),R=P.data,F=0,G=R.length,X=this.minOpacity,Y=this.maxOpacity-X;F<G;){O=R[F+3]/256;var Q=4*Math.floor(255*O);if(0<O){var ne=i(O)?l:c;0<O&&(O=O*Y+X),R[F++]=ne[Q],R[F++]=ne[1+Q],R[F++]=ne[2+Q],R[F++]=ne[3+Q]*O*256}else F+=4}return p.putImageData(P,0,0),h},_getBrush:function(){var e=this._brushCanvas||(this._brushCanvas=Qn()),t=this.pointSize+this.blurSize,n=2*t;e.width=n,e.height=n;var r=e.getContext("2d");return r.clearRect(0,0,n,n),r.shadowOffsetX=n,r.shadowBlur=this.blurSize,r.shadowColor="#000",r.beginPath(),r.arc(-t,t,this.pointSize,0,2*Math.PI,!0),r.closePath(),r.fill(),e},_getGradient:function(e,t,n){for(var r=this._gradientPixels,o=r[n]||(r[n]=new Uint8ClampedArray(1024)),i=[0,0,0,0],s=0,l=0;l<256;l++)t[n](l/255,!0,i),o[s++]=i[0],o[s++]=i[1],o[s++]=i[2],o[s++]=i[3];return o}},Is({type:"heatmap",render:function(e,t,n){var r;t.eachComponent("visualMap",function(i){i.eachTargetSeries(function(s){s===e&&(r=i)})}),this.group.removeAll(),this._incrementalDisplayable=null;var o=e.coordinateSystem;"cartesian2d"===o.type||"calendar"===o.type?this._renderOnCartesianAndCalendar(e,n,0,e.getData().count()):function(i){var s=i.dimensions;return"lng"===s[0]&&"lat"===s[1]}(o)&&this._renderOnGeo(o,e,r,n)},incrementalPrepareRender:function(e,t,n){this.group.removeAll()},incrementalRender:function(e,t,n,r){t.coordinateSystem&&this._renderOnCartesianAndCalendar(t,r,e.start,e.end,!0)},_renderOnCartesianAndCalendar:function(e,t,n,r,o){var i,s,l=e.coordinateSystem;if("cartesian2d"===l.type){var c=l.getAxis("x"),f=l.getAxis("y");i=c.getBandWidth(),s=f.getBandWidth()}for(var h=this.group,p=e.getData(),y="emphasis.itemStyle",b="emphasis.label",S=e.getModel("itemStyle").getItemStyle(["color"]),M=e.getModel(y).getItemStyle(),k=e.getModel("label"),O=e.getModel(b),P=l.type,R="cartesian2d"===P?[p.mapDimension("x"),p.mapDimension("y"),p.mapDimension("value")]:[p.mapDimension("time"),p.mapDimension("value")],F=n;F<r;F++){var G;if("cartesian2d"===P){if(isNaN(p.get(R[2],F)))continue;var X=l.dataToPoint([p.get(R[0],F),p.get(R[1],F)]);G=new ei({shape:{x:Math.floor(Math.round(X[0])-i/2),y:Math.floor(Math.round(X[1])-s/2),width:Math.ceil(i),height:Math.ceil(s)},style:{fill:p.getItemVisual(F,"color"),opacity:p.getItemVisual(F,"opacity")}})}else{if(isNaN(p.get(R[1],F)))continue;G=new ei({z2:1,shape:l.dataToRect([p.get(R[0],F)]).contentShape,style:{fill:p.getItemVisual(F,"color"),opacity:p.getItemVisual(F,"opacity")}})}var Y=p.getItemModel(F);p.hasItemOption&&(S=Y.getModel("itemStyle").getItemStyle(["color"]),M=Y.getModel(y).getItemStyle(),k=Y.getModel("label"),O=Y.getModel(b));var Q=e.getRawValue(F),ne="-";Q&&null!=Q[2]&&(ne=Q[2]),Cu(S,M,k,O,{labelFetcher:e,labelDataIndex:F,defaultText:ne,isRectText:!0}),G.setStyle(S),ya(G,p.hasItemOption?M:Fn({},M)),(G.incremental=o)&&(G.useHoverLayer=!0),h.add(G),p.setItemGraphicEl(F,G)}},_renderOnGeo:function(e,t,n,r){var o=n.targetVisuals.inRange,i=n.targetVisuals.outOfRange,s=t.getData(),l=this._hmLayer||this._hmLayer||new re;l.blurSize=t.get("blurSize"),l.pointSize=t.get("pointSize"),l.minOpacity=t.get("minOpacity"),l.maxOpacity=t.get("maxOpacity");var c=e.getViewRect().clone(),f=e.getRoamTransform();c.applyTransform(f);var G,X,Y,h=Math.max(c.x,0),p=Math.max(c.y,0),y=Math.min(c.width+c.x,r.getWidth()),b=Math.min(c.height+c.y,r.getHeight()),S=y-h,M=b-p,k=[s.mapDimension("lng"),s.mapDimension("lat"),s.mapDimension("value")],O=s.mapArray(k,function(G,X,Y){var Q=e.dataToPoint([G,X]);return Q[0]-=h,Q[1]-=p,Q.push(Y),Q}),P=n.getExtent(),R="visualMap.continuous"===n.type?(X=[((X=n.option.range)[0]-(G=P)[0])/(Y=G[1]-G[0]),(X[1]-G[0])/Y],function(Q){return Q>=X[0]&&Q<=X[1]}):function(G,X,Y){var Q=G[1]-G[0],ne=(X=Kt(X,function(ce){return{interval:[(ce.interval[0]-G[0])/Q,(ce.interval[1]-G[0])/Q]}})).length,le=0;return function(ce){for(var ye=le;ye<ne;ye++)if((xe=X[ye].interval)[0]<=ce&&ce<=xe[1]){le=ye;break}if(ye===ne)for(ye=le-1;0<=ye;ye--){var xe;if((xe=X[ye].interval)[0]<=ce&&ce<=xe[1]){le=ye;break}}return 0<=ye&&ye<ne&&Y[ye]}}(P,n.getPieceList(),n.option.selected);l.update(O,S,M,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:i.color.getColorMapper()},R);var F=new De({style:{width:S,height:M,x:h,y:p,image:l.canvas},silent:!0});this.group.add(F)},dispose:function(){}});var ie=Fy.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(e){return e.stack=null,ie.superApply(this,"getInitialData",arguments)}}),ue=["itemStyle","borderWidth"],de=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],he=new Fs;function Ie(e,t,n,r){var S,M,O,R,F,G,X,Y,Q,ne,le,ce,o=e.getItemLayout(t),i=n.get("symbolRepeat"),s=n.get("symbolClip"),l=n.get("symbolPosition")||"start",c=(n.get("symbolRotate")||0)*Math.PI/180||0,f=n.get("symbolPatternSize")||2,h=n.isAnimationEnabled(),p={dataIndex:t,layout:o,itemModel:n,symbolType:e.getItemVisual(t,"symbol")||"circle",color:e.getItemVisual(t,"color"),symbolClip:s,symbolRepeat:i,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:f,rotation:c,animationModel:h?n:null,hoverAnimation:h&&n.get("hoverAnimation"),z2:n.getShallow("z",!0)||0};(function(S,M,k,O,P){var R,F=O.valueDim,G=S.get("symbolBoundingData"),X=O.coordSys.getOtherAxis(O.coordSys.getBaseAxis()),Y=X.toGlobalCoord(X.dataToCoord(0)),Q=1-+(k[F.wh]<=0);if(rn(G)){var ne=[We(X,G[0])-Y,We(X,G[1])-Y];ne[1]<ne[0]&&ne.reverse(),R=ne[Q]}else R=null!=G?We(X,G)-Y:M?O.coordSysExtent[F.index][Q]-Y:k[F.wh];P.boundingLength=R,M&&(P.repeatCutLength=k[F.wh]),P.pxSign=0<R?1:R<0?-1:0})(n,i,o,r,p),S=e,M=t,O=i,R=p.boundingLength,F=p.pxSign,G=f,Y=p,Q=(X=r).valueDim,ne=X.categoryDim,le=Math.abs(o[ne.wh]),(ce=rn(ce=S.getItemVisual(M,"symbolSize"))?ce.slice():(null==ce&&(ce="100%"),[ce,ce]))[ne.index]=Pn(ce[ne.index],le),ce[Q.index]=Pn(ce[Q.index],O?le:Math.abs(R)),Y.symbolSize=ce,(Y.symbolScale=[ce[0]/G,ce[1]/G])[Q.index]*=(X.isHorizontal?-1:1)*F,function(S,M,k,O,P){var R=S.get(ue)||0;R&&(he.attr({scale:M.slice(),rotation:k}),he.updateTransform(),R/=he.getLineScale(),R*=M[O.valueDim.index]),P.valueLineWidth=R}(n,p.symbolScale,c,r,p);var y=p.symbolSize,b=n.get("symbolOffset");return rn(b)&&(b=[Pn(b[0],y[0]),Pn(b[1],y[1])]),function(S,M,k,O,P,R,F,G,X,Y,Q,ne){var le=Q.categoryDim,ce=Q.valueDim,ye=ne.pxSign,xe=Math.max(M[ce.index]+G,0),Te=xe;if(O){var Ee=Math.abs(X),Ve=pe(S.get("symbolMargin"),"15%")+"",Be=!1;Ve.lastIndexOf("!")===Ve.length-1&&(Be=!0,Ve=Ve.slice(0,Ve.length-1)),Ve=Pn(Ve,M[ce.index]);var nt=Math.max(xe+2*Ve,0),bt=Be?0:2*Ve,_t=im(O),wt=_t?O:xn((Ee+bt)/nt);nt=xe+2*(Ve=(Ee-wt*xe)/2/(Be?wt:wt-1)),bt=Be?0:2*Ve,_t||"fixed"===O||(wt=Y?xn((Math.abs(Y)+bt)/nt):0),Te=wt*nt-bt,ne.repeatTimes=wt,ne.symbolMargin=Ve}var Lt=ye*(Te/2),Ht=ne.pathPosition=[];Ht[le.index]=k[le.wh]/2,Ht[ce.index]="start"===F?Lt:"end"===F?X-Lt:X/2,R&&(Ht[0]+=R[0],Ht[1]+=R[1]);var Ln=ne.bundlePosition=[];Ln[le.index]=k[le.xy],Ln[ce.index]=k[ce.xy];var Ft=ne.barRectShape=Fn({},k);Ft[ce.wh]=ye*Math.max(Math.abs(k[ce.wh]),Math.abs(Ht[ce.index]+Lt)),Ft[le.wh]=k[le.wh];var Yn=ne.clipShape={};Yn[le.xy]=-k[le.xy],Yn[le.wh]=Q.ecSize[le.wh],Yn[ce.xy]=0,Yn[ce.wh]=k[ce.wh]}(n,y,o,i,0,b,l,p.valueLineWidth,p.boundingLength,p.repeatCutLength,r,p),p}function We(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function ve(e){var t=e.symbolPatternSize,n=Zc(e.symbolType,-t/2,-t/2,t,t,e.color);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function Se(e,t,n,r){var o=e.__pictorialBundle,l=n.pathPosition,c=t.valueDim,f=n.repeatTimes||0,h=0,p=n.symbolSize[t.valueDim.index]+n.valueLineWidth+2*n.symbolMargin;for(sn(e,function(O){O.__pictorialAnimationIndex=h,O.__pictorialRepeatTimes=f,h<f?Tt(O,null,S(h),n,r):Tt(O,null,{scale:[0,0]},n,r,function(){o.remove(O)}),Ye(O,n),h++});h<f;h++){var y=ve(n);y.__pictorialAnimationIndex=h,y.__pictorialRepeatTimes=f,o.add(y);var b=S(h);Tt(y,{position:b.position,scale:[0,0]},{scale:b.scale,rotation:b.rotation},n,r),y.on("mouseover",M).on("mouseout",k),Ye(y,n)}function S(O){var P=l.slice(),R=n.pxSign,F=O;return("start"===n.symbolRepeatDirection?0<R:R<0)&&(F=f-1-O),P[c.index]=p*(F-f/2+.5)+l[c.index],{position:P,scale:n.symbolScale.slice(),rotation:n.rotation}}function M(){sn(e,function(O){O.trigger("emphasis")})}function k(){sn(e,function(O){O.trigger("normal")})}}function Oe(e,t,n,r){var o=e.__pictorialBundle,i=e.__pictorialMainPath;i?Tt(i,null,{position:n.pathPosition.slice(),scale:n.symbolScale.slice(),rotation:n.rotation},n,r):(i=e.__pictorialMainPath=ve(n),o.add(i),Tt(i,{position:n.pathPosition.slice(),scale:[0,0],rotation:n.rotation},{scale:n.symbolScale.slice()},n,r),i.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),Ye(i,n)}function Je(e,t,n){var r=Fn({},t.barRectShape),o=e.__pictorialBarRect;o?Tt(o,null,{shape:r},t,n):(o=e.__pictorialBarRect=new ei({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),e.add(o))}function ct(e,t,n,r){if(n.symbolClip){var o=e.__pictorialClipPath,i=Fn({},n.clipShape),s=t.valueDim,l=n.animationModel,c=n.dataIndex;if(o)so(o,{shape:i},l,c);else{i[s.wh]=0,o=new ei({shape:i}),e.__pictorialBundle.setClipPath(o),e.__pictorialClipPath=o;var f={};f[s.wh]=n.clipShape[s.wh],Jd[r?"updateProps":"initProps"](o,{shape:f},l,c)}}}function gt(e,t){var n=e.getItemModel(t);return n.getAnimationDelayParams=Ge,n.isAnimationEnabled=Qe,n}function Ge(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function Qe(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Ye(e,t){e.off("emphasis").off("normal");var n=t.symbolScale.slice();t.hoverAnimation&&e.on("emphasis",function(){this.animateTo({scale:[1.1*n[0],1.1*n[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:n.slice()},400,"elasticOut")})}function et(e,t,n,r){var o=new pn,i=new pn;return o.add(i),(o.__pictorialBundle=i).attr("position",n.bundlePosition.slice()),n.symbolRepeat?Se(o,t,n):Oe(o,0,n),Je(o,n,r),ct(o,t,n,r),o.__pictorialShapeStr=en(e,n),o.__pictorialSymbolMeta=n,o}function Ct(e,t,n,r){var o=r.__pictorialBarRect;o&&(o.style.text=null);var i=[];sn(r,function(s){i.push(s)}),r.__pictorialMainPath&&i.push(r.__pictorialMainPath),r.__pictorialClipPath&&(n=null),me(i,function(s){so(s,{scale:[0,0]},n,t,function(){r.parent&&r.parent.remove(r)})}),e.setItemGraphicEl(t,null)}function en(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function sn(e,t,n){me(e.__pictorialBundle.children(),function(r){r!==e.__pictorialBarRect&&t.call(n,r)})}function Tt(e,t,n,r,o,i){t&&e.attr(t),r.symbolClip&&!o?n&&e.attr(n):n&&Jd[o?"updateProps":"initProps"](e,n,r.animationModel,r.dataIndex,i)}function Dt(e,t,n){var r=n.color,o=n.dataIndex,i=n.itemModel,s=i.getModel("itemStyle").getItemStyle(["color"]),l=i.getModel("emphasis.itemStyle").getItemStyle(),c=i.getShallow("cursor");sn(e,function(p){p.setColor(r),p.setStyle(un({fill:r,opacity:n.opacity},s)),ya(p,l),c&&(p.cursor=c),p.z2=n.z2});var f={},h=e.__pictorialBarRect;ux(h.style,f,i,r,t.seriesModel,o),ya(h,f)}function xn(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}function bn(e,t,n,r,o){cu.call(this,e,t,n),this.type=r||"value",this.position=o||"bottom",this.orient=null}function Jt(e,t,n){this.dimension="single",this.dimensions=["single"],this._axis=null,this._init(e,t,n),this.model=e}function Xn(e,t){t=t||{};var r=e.axis,o={},i=r.position,s=r.orient,l=e.coordinateSystem.getRect(),c=[l.x,l.x+l.width,l.y,l.y+l.height],f={horizontal:{top:c[2],bottom:c[3]},vertical:{left:c[0],right:c[1]}};o.position=["vertical"===s?f.vertical[i]:c[0],"horizontal"===s?f.horizontal[i]:c[3]],o.rotation=Math.PI/2*{horizontal:0,vertical:1}[s],o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,right:1,left:-1}[i],e.get("axisTick.inside")&&(o.tickDirection=-o.tickDirection),pe(t.labelInside,e.get("axisLabel.inside"))&&(o.labelDirection=-o.labelDirection);var h=t.rotate;return null==h&&(h=e.get("axisLabel.rotate")),o.labelRotation="top"===i?-h:h,o.z2=1,o}Is({type:"pictorialBar",render:function(e,t,n){var r=this.group,o=e.getData(),i=this._data,s=e.coordinateSystem,l=!!s.getBaseAxis().isHorizontal(),c=s.grid.getRect(),f={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:s,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:l,valueDim:de[+l],categoryDim:de[1-l]};return o.diff(i).add(function(h){if(o.hasValue(h)){var p=gt(o,h),y=Ie(o,h,p,f),b=et(o,f,y);o.setItemGraphicEl(h,b),r.add(b),Dt(b,f,y)}}).update(function(h,p){var k,O,P,R,F,y=i.getItemGraphicEl(p);if(o.hasValue(h)){var b=gt(o,h),S=Ie(o,h,b,f),M=en(o,S);y&&M!==y.__pictorialShapeStr&&(r.remove(y),o.setItemGraphicEl(h,null),y=null),y?(O=f,R=(P=S).animationModel,F=P.dataIndex,so((k=y).__pictorialBundle,{position:P.bundlePosition.slice()},R,F),P.symbolRepeat?Se(k,O,P,!0):Oe(k,0,P,!0),Je(k,P,!0),ct(k,O,P,!0)):y=et(o,f,S,!0),o.setItemGraphicEl(h,y),y.__pictorialSymbolMeta=S,r.add(y),Dt(y,f,S)}else r.remove(y)}).remove(function(h){var p=i.getItemGraphicEl(h);p&&Ct(i,h,p.__pictorialSymbolMeta.animationModel,p)}).execute(),this._data=o,this.group},dispose:Pt,remove:function(e,t){var n=this.group,r=this._data;e.get("animation")?r&&r.eachItemGraphicEl(function(o){Ct(r,o.dataIndex,e,o)}):n.removeAll()}}),oa(ar(cw,"pictorialBar")),Ti(Ap("pictorialBar","roundRect")),bn.prototype={constructor:bn,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},pointToData:function(e,t){return this.coordinateSystem.pointToData(e,t)[0]},toGlobalCoord:null,toLocalCoord:null},Rn(bn,cu),ku.register("single",{create:function(e,t){var n=[];return e.eachComponent("singleAxis",function(r,o){var i=new Jt(r,e,t);i.name="single_"+o,i.resize(r,t),r.coordinateSystem=i,n.push(i)}),e.eachSeries(function(r){if("singleAxis"===r.get("coordinateSystem")){var o=e.queryComponents({mainType:"singleAxis",index:r.get("singleAxisIndex"),id:r.get("singleAxisId")})[0];r.coordinateSystem=o&&o.coordinateSystem}}),n},dimensions:(Jt.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:Jt,_init:function(e,t,n){var o=new bn(this.dimension,Sg(e),[0,0],e.get("type"),e.get("position"));o.onBand="category"===o.type&&e.get("boundaryGap"),o.inverse=e.get("inverse"),o.orient=e.get("orient"),(e.axis=o).model=e,(o.coordinateSystem=this)._axis=o},update:function(e,t){e.eachSeries(function(n){if(n.coordinateSystem===this){var r=n.getData();me(r.mapDimension(this.dimension,!0),function(o){this._axis.scale.unionExtentFromData(r,o)},this),oc(this._axis.scale,this._axis.model)}},this)},resize:function(e,t){this._rect=No({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var e=this._rect,t=this._axis,n=t.isHorizontal(),r=n?[0,e.width]:[0,e.height],o=t.reverse?1:0;t.setExtent(r[o],r[1-o]),this._updateAxisTransform(t,n?e.x:e.y)},_updateAxisTransform:function(e,t){var n=e.getExtent(),r=n[0]+n[1],o=e.isHorizontal();e.toGlobalCoord=o?function(i){return i+t}:function(i){return r-i+t},e.toLocalCoord=o?function(i){return i-t}:function(i){return r-i+t}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(e){var t=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:n.contain(n.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},pointToData:function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e["horizontal"===t.orient?0:1]))]},dataToPoint:function(e){var t=this.getAxis(),n=this.getRect(),r=[],o="horizontal"===t.orient?0:1;return e instanceof Array&&(e=e[0]),r[o]=t.toGlobalCoord(t.dataToCoord(+e)),r[1-o]=0==o?n.y+n.height/2:n.x+n.width/2,r}}).dimensions});var Bt=["axisLine","axisTickLabel","axisName"],Tn=["splitArea","splitLine"],tn=vl.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(e,t,n,r){var o=this.group;o.removeAll();var i=this._axisGroup;this._axisGroup=new pn;var s=Xn(e),l=new ic(e,s);me(Bt,l.add,l),o.add(this._axisGroup),o.add(l.getGroup()),me(Tn,function(c){e.get(c+".show")&&this["_"+c](e)},this),Q0(i,this._axisGroup,e),tn.superCall(this,"render",e,t,n,r)},remove:function(){dM(this)},_splitLine:function(e){var t=e.axis;if(!t.scale.isBlank()){var n=e.getModel("splitLine"),r=n.getModel("lineStyle"),o=r.get("width"),i=r.get("color");i=i instanceof Array?i:[i];for(var s=e.coordinateSystem.getRect(),l=t.isHorizontal(),c=[],f=0,h=t.getTicksCoords({tickModel:n}),p=[],y=[],b=0;b<h.length;++b){var S=t.toGlobalCoord(h[b].coord);l?(p[0]=S,p[1]=s.y,y[0]=S,y[1]=s.y+s.height):(p[0]=s.x,p[1]=S,y[0]=s.x+s.width,y[1]=S);var M=f++%i.length;c[M]=c[M]||[],c[M].push(new Yi({subPixelOptimize:!0,shape:{x1:p[0],y1:p[1],x2:y[0],y2:y[1]},style:{lineWidth:o},silent:!0}))}for(b=0;b<c.length;++b)this.group.add(Al(c[b],{style:{stroke:i[b%i.length],lineDash:r.getLineDash(o),lineWidth:o},silent:!0}))}},_splitArea:function(e){V1(this,this._axisGroup,e,e)}}),An=Go.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});function Hn(e,t){var n,r=[],o=e.seriesIndex;if(null==o||!(n=t.getSeriesByIndex(o)))return{point:[]};var i=n.getData(),s=Ai(i,e);if(null==s||s<0||rn(s))return{point:[]};var l=i.getItemGraphicEl(s),c=n.coordinateSystem;if(n.getTooltipPosition)r=n.getTooltipPosition(s)||[];else if(c&&c.dataToPoint)r=c.dataToPoint(i.getValues(Kt(c.dimensions,function(h){return i.mapDimension(h)}),s,!0))||[];else if(l){var f=l.getBoundingRect().clone();f.applyTransform(l.transform),r=[f.x+f.width/2,f.y+f.height/2]}return{point:r,el:l}}Sn(An.prototype,Cg),r0("single",An,function(e,t){return t.type||(t.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var mo=me,Ae=ar,Ze=La();function It(e,t,n,r,o){var f,h,p,y,b,S,M,k,i=e.axis;if(!i.scale.isBlank()&&i.containData(t))if(e.involveSeries){var s=(y=(p=(h=e).axis).dim,b=f=t,S=[],M=Number.MAX_VALUE,k=-1,mo(h.seriesModels,function(O,P){var R,F,G=O.getData().mapDimension(y,!0);if(O.getAxisTooltipData){var X=O.getAxisTooltipData(G,f,p);F=X.dataIndices,R=X.nestestValue}else{if(!(F=O.getData().indicesOfNearest(G[0],f,"category"===p.type?.5:null)).length)return;R=O.getData().get(G[0],F[0])}if(null!=R&&isFinite(R)){var Y=f-R,Q=Math.abs(Y);Q<=M&&((Q<M||0<=Y&&k<0)&&(M=Q,k=Y,b=R,S.length=0),mo(F,function(ne){S.push({seriesIndex:O.seriesIndex,dataIndexInside:ne,dataIndex:O.getData().getRawIndex(ne)})}))}}),{payloadBatch:S,snapToValue:b}),l=s.payloadBatch,c=s.snapToValue;l[0]&&null==o.seriesIndex&&Fn(o,l[0]),!r&&e.snap&&i.containData(c)&&null!=c&&(t=c),n.showPointer(e,t,l,o),n.showTooltip(e,s,c)}else n.showPointer(e,t)}function zt(e,t,n,r){e[t.key]={value:n,payloadBatch:r}}function Vt(e,t,n,r){var o=n.payloadBatch,i=t.axis,s=i.model,l=t.axisPointerModel;if(t.triggerTooltip&&o.length){var c=t.coordSys.model,f=Ip(c),h=e.map[f];h||(h=e.map[f]={coordSysId:c.id,coordSysIndex:c.componentIndex,coordSysType:c.type,coordSysMainType:c.mainType,dataByAxis:[]},e.list.push(h)),h.dataByAxis.push({axisDim:i.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:r,valueLabelOpt:{precision:l.get("label.precision"),formatter:l.get("label.formatter")},seriesDataIndices:o.slice()})}}function fn(e){var t=e.axis.model,n={},r=n.axisDim=e.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=t.componentIndex,n.axisName=n[r+"AxisName"]=t.name,n.axisId=n[r+"AxisId"]=t.id,n}function nr(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}Au({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var Ir=La(),bi=me;function di(e,t,n){if(!Cr.node){var r=t.getZr();Ir(r).records||(Ir(r).records={}),function(o,i){function s(l,c){o.on(l,function(f){var p,y,b,h=(p=i,{dispatchAction:b=function(S){var M=y[S.type];M?M.push(S):(S.dispatchAction=b,p.dispatchAction(S))},pendings:y={showTip:[],hideTip:[]}});bi(Ir(o).records,function(p){p&&c(p,f,h.dispatchAction)}),function(p,y){var b,S=p.showTip.length,M=p.hideTip.length;S?b=p.showTip[S-1]:M&&(b=p.hideTip[M-1]),b&&(b.dispatchAction=null,y.dispatchAction(b))}(h.pendings,i)})}Ir(o).initialized||(Ir(o).initialized=!0,s("click",ar(ti,"click")),s("mousemove",ar(ti,"mousemove")),s("globalout",ir))}(r,t),(Ir(r).records[e]||(Ir(r).records[e]={})).handler=n}}function ir(e,t,n){e.handler("leave",null,n)}function ti(e,t,n,r){t.handler(e,n,r)}function Ii(e,t){if(!Cr.node){var n=t.getZr();(Ir(n).records||{})[e]&&(Ir(n).records[e]=null)}}var fu=xs({type:"axisPointer",render:function(e,t,n){var r=t.getComponent("tooltip"),o=e.get("triggerOn")||r&&r.get("triggerOn")||"mousemove|click";di("axisPointer",n,function(i,s,l){"none"!==o&&("leave"===i||0<=o.indexOf(i))&&l({type:"updateAxisPointer",currTrigger:i,x:s&&s.offsetX,y:s&&s.offsetY})})},remove:function(e,t){Ii(t.getZr(),"axisPointer"),fu.superApply(this._model,"remove",arguments)},dispose:function(e,t){Ii("axisPointer",t),fu.superApply(this._model,"dispose",arguments)}}),wa=La(),mf=Gn,ls=Nn;function el(){}function Vh(e,t,n,r){!function o(i,s){if(xt(i)&&xt(s)){var l=!0;return me(s,function(c,f){l=l&&o(i[f],c)}),!!l}return i===s}(wa(n).lastProp,r)&&(wa(n).lastProp=r,t?so(n,r,e):(n.stopAnimation(),n.attr(r)))}function lb(e,t){e[t.get("label.show")?"show":"hide"]()}function Qf(e){return{position:e.position.slice(),rotation:e.rotation||0}}function Hh(e,t,n){var r=t.get("z"),o=t.get("zlevel");e&&e.traverse(function(i){"group"!==i.type&&(null!=r&&(i.z=r),null!=o&&(i.zlevel=o),i.silent=n)})}function eh(e){var t,n=e.get("type"),r=e.getModel(n+"Style");return"line"===n?(t=r.getLineStyle()).fill=null:"shadow"===n&&((t=r.getAreaStyle()).stroke=null),t}function xS(e,t,n,r,o){var i=_S(n.get("value"),t.axis,t.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),s=n.getModel("label"),l=bh(s.get("padding")||0),c=s.getFont(),f=Qi(i,c),h=o.position,p=f.width+l[1]+l[3],y=f.height+l[0]+l[2],b=o.align;"right"===b&&(h[0]-=p),"center"===b&&(h[0]-=p/2);var k,O,P,R,F,G,S=o.verticalAlign;"bottom"===S&&(h[1]-=y),"middle"===S&&(h[1]-=y/2),k=h,O=p,P=y,F=(R=r).getWidth(),G=R.getHeight(),k[0]=Math.min(k[0]+O,F)-O,k[1]=Math.min(k[1]+P,G)-P,k[0]=Math.max(k[0],0),k[1]=Math.max(k[1],0);var M=s.get("backgroundColor");M&&"auto"!==M||(M=t.get("axisLine.lineStyle.color")),e.label={shape:{x:0,y:0,width:p,height:y,r:s.get("borderRadius")},position:h.slice(),style:{text:i,textFont:c,textFill:s.getTextColor(),textPosition:"inside",textPadding:l,fill:M,stroke:s.get("borderColor")||"transparent",lineWidth:s.get("borderWidth")||0,shadowBlur:s.get("shadowBlur"),shadowColor:s.get("shadowColor"),shadowOffsetX:s.get("shadowOffsetX"),shadowOffsetY:s.get("shadowOffsetY")},z2:10}}function _S(e,t,n,r,o){e=t.scale.parse(e);var i=t.scale.getLabel(e,{precision:o.precision}),s=o.formatter;if(s){var l={value:pl(t,e),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};me(r,function(c){var f=n.getSeriesByIndex(c.seriesIndex),p=f&&f.getDataParams(c.dataIndexInside);p&&l.seriesData.push(p)}),tr(s)?i=s.replace("{value}",i):Mt(s)&&(i=s(l))}return i}function k_(e,t,n){var r=ui();return Ar(r,r,n.rotation),Vl(r,r,n.position),Ql([e.dataToCoord(t),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function wS(e,t,n,r,o,i){var s=ic.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=o.get("label.margin"),xS(t,r,o,i,{position:k_(r.axis,e,n),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function SS(e,t,n){return{x1:e[n=n||0],y1:e[1-n],x2:t[n],y2:t[1-n]}}function hk(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}function gk(e,t,n,r,o,i){return{cx:e,cy:t,r0:n,r,startAngle:o,endAngle:i,clockwise:!0}}ah((el.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(e,t,n,r){var o=t.get("value"),i=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=n,r||this._lastValue!==o||this._lastStatus!==i){this._lastValue=o,this._lastStatus=i;var s=this._group,l=this._handle;if(!i||"hide"===i)return s&&s.hide(),void(l&&l.hide());s&&s.show(),l&&l.show();var c={};this.makeElOption(c,o,e,t,n);var f=c.graphicKey;f!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=f;var h=this._moveAnimation=this.determineAnimation(e,t);if(s){var p=ar(Vh,t,h);this.updatePointerEl(s,c,p,t),this.updateLabelEl(s,c,p,t)}else s=this._group=new pn,this.createPointerEl(s,c,e,t),this.createLabelEl(s,c,e,t),n.getZr().add(s);Hh(s,t,!0),this._renderHandle(o)}},remove:function(e){this.clear(e)},dispose:function(e){this.clear(e)},determineAnimation:function(e,t){var n=t.get("animation"),r=e.axis,o="category"===r.type,i=t.get("snap");if(!i&&!o)return!1;if("auto"!==n&&null!=n)return!0===n;var s=this.animationThreshold;if(o&&r.getBandWidth()>s)return!0;if(i){var l=us(e).seriesDataCount,c=r.getExtent();return Math.abs(c[0]-c[1])/l>s}return!1},makeElOption:function(e,t,n,r,o){},createPointerEl:function(e,t,n,r){var o=t.pointer;if(o){var i=wa(e).pointerEl=new Jd[o.type](mf(t.pointer));e.add(i)}},createLabelEl:function(e,t,n,r){if(t.label){var o=wa(e).labelEl=new ei(mf(t.label));e.add(o),lb(o,r)}},updatePointerEl:function(e,t,n){var r=wa(e).pointerEl;r&&t.pointer&&(r.setStyle(t.pointer.style),n(r,{shape:t.pointer.shape}))},updateLabelEl:function(e,t,n,r){var o=wa(e).labelEl;o&&(o.setStyle(t.label.style),n(o,{shape:t.label.shape,position:t.label.position}),lb(o,r))},_renderHandle:function(e){if(!this._dragging&&this.updateHandleTransform){var t,n=this._axisPointerModel,r=this._api.getZr(),o=this._handle,i=n.getModel("handle"),s=n.get("status");if(!i.get("show")||!s||"hide"===s)return o&&r.remove(o),void(this._handle=null);this._handle||(t=!0,o=this._handle=ig(i.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(c){cr(c.event)},onmousedown:ls(this._onHandleDragMove,this,0,0),drift:ls(this._onHandleDragMove,this),ondragend:ls(this._onHandleDragEnd,this)}),r.add(o)),Hh(o,n,!1),o.setStyle(i.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=i.get("size");rn(l)||(l=[l,l]),o.attr("scale",[l[0]/2,l[1]/2]),Wf(this,"_doDispatchAxisPointer",i.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},_moveHandleToValue:function(e,t){Vh(this._axisPointerModel,!t&&this._moveAnimation,this._handle,Qf(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(e,t){var n=this._handle;if(n){this._dragging=!0;var r=this.updateHandleTransform(Qf(n),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=r,n.stopAnimation(),n.attr(Qf(r)),wa(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var e=this._payloadInfo,t=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]})}},_onHandleDragEnd:function(e){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),n=this._group,r=this._handle;t&&n&&(this._lastGraphicKey=null,n&&t.remove(n),r&&t.remove(r),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}}).constructor=el);var $M=el.extend({makeElOption:function(e,t,n,r,o){var i=n.axis,s=i.grid,l=r.get("type"),c=bD(s,i).getOtherAxis(i).getGlobalExtent(),f=i.toGlobalCoord(i.dataToCoord(t,!0));if(l&&"none"!==l){var h=eh(r),p=Bg[l](i,f,c);p.style=h,e.graphicKey=p.type,e.pointer=p}wS(t,e,Sw(s.model,n),n,r,o)},getHandleTransform:function(e,t,n){var r=Sw(t.axis.grid.model,t,{labelInside:!1});return r.labelMargin=n.get("handle.margin"),{position:k_(t.axis,e,r),rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,n,r){var o=n.axis,i=o.grid,s=o.getGlobalExtent(!0),l=bD(i,o).getOtherAxis(o).getGlobalExtent(),c="x"===o.dim?0:1,f=e.position;f[c]+=t[c],f[c]=Math.min(s[1],f[c]),f[c]=Math.max(s[0],f[c]);var h=(l[1]+l[0])/2,p=[h,h];return p[c]=f[c],{position:f,rotation:e.rotation,cursorPoint:p,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][c]}}});function bD(e,t){var n={};return n[t.dim+"AxisIndex"]=t.index,e.getCartesian(n)}var Bg={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:SS([t,n[0]],[t,n[1]],M_(e))}},shadow:function(e,t,n){var r=Math.max(1,e.getBandWidth());return{type:"Rect",shape:hk([t-r/2,n[0]],[r,n[1]-n[0]],M_(e))}}};function M_(e){return"x"===e.dim?0:1}vl.registerAxisPointerClass("CartesianAxisPointer",$M),ra(function(e){if(e){e.axisPointer&&0!==e.axisPointer.length||(e.axisPointer={});var t=e.axisPointer.link;t&&!rn(t)&&(e.axisPointer.link=[t])}}),fa(Gf.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=function(e,t){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(r,o,i){var s=o.getComponent("tooltip"),l=o.getComponent("axisPointer"),c=l.get("link",!0)||[],f=[];Tm(i.getCoordinateSystems(),function(h){if(h.axisPointerEnabled){var p=Ip(h.model),y=r.coordSysAxesInfo[p]={},b=(r.coordSysMap[p]=h).model.getModel("tooltip",s);if(Tm(h.getAxes(),sx(O,!1,null)),h.getTooltipAxes&&s&&b.get("show")){var S="axis"===b.get("trigger"),M="cross"===b.get("axisPointer.type"),k=h.getTooltipAxes(b.get("axisPointer.axis"));(S||M)&&Tm(k.baseAxes,sx(O,!M||"cross",S)),M&&Tm(k.otherAxes,sx(O,"cross",!1))}}function O(P,R,F){var G=F.model.getModel("axisPointer",l),X=G.get("show");if(X&&("auto"!==X||P||By(G))){null==R&&(R=G.get("triggerTooltip"));var Y=(G=P?function(xe,Te,Ee,Ve,Be,nt){var bt=Te.getModel("axisPointer"),_t={};Tm(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(Ln){_t[Ln]=Gn(bt.get(Ln))}),_t.snap="category"!==xe.type&&!!nt,"cross"===bt.get("type")&&(_t.type="line");var wt=_t.label||(_t.label={});if(null==wt.show&&(wt.show=!1),"cross"===Be){var Lt=bt.get("label.show");if(wt.show=null==Lt||Lt,!nt){var Ht=_t.lineStyle=bt.get("crossStyle");Ht&&un(wt,Ht.textStyle)}}return xe.model.getModel("axisPointer",new $o(_t,Ee,Ve))}(F,b,l,o,P,R):G).get("snap"),Q=Ip(F.model),ne=R||Y||"category"===F.type,le=r.axesInfo[Q]={key:Q,axis:F,coordSys:h,axisPointerModel:G,triggerTooltip:R,involveSeries:ne,snap:Y,useHandle:By(G),seriesModels:[]};y[Q]=le,r.seriesInvolved|=ne;var ce=function(xe,Te){for(var Ee=Te.model,Ve=Te.dim,Be=0;Be<xe.length;Be++){var nt=xe[Be]||{};if(F1(nt[Ve+"AxisId"],Ee.id)||F1(nt[Ve+"AxisIndex"],Ee.componentIndex)||F1(nt[Ve+"AxisName"],Ee.name))return Be}}(c,F);if(null!=ce){var ye=f[ce]||(f[ce]={axesInfo:{}});ye.axesInfo[Q]=le,ye.mapper=c[ce].mapper,le.linkGroup=ye}}}})}(n,e,t),n.seriesInvolved&&function(r,o){o.eachSeries(function(i){var s=i.coordinateSystem,l=i.get("tooltip.trigger",!0),c=i.get("tooltip.show",!0);s&&"none"!==l&&!1!==l&&"item"!==l&&!1!==c&&!1!==i.get("axisPointer.show",!0)&&Tm(r.coordSysAxesInfo[Ip(s.model)],function(f){var h=f.axis;s.getAxis(h.dim)===h&&(f.seriesModels.push(i),null==f.seriesDataCount&&(f.seriesDataCount=0),f.seriesDataCount+=i.getData().count())})},this)}(n,e),n}(e,t)}),jr({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},function(e,t,n){var O,P,F,r=e.currTrigger,o=[e.x,e.y],i=e,s=e.dispatchAction||Nn(n.dispatchAction,n),l=t.getComponent("axisPointer").coordSysAxesInfo;if(l){nr(o)&&(o=Hn({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},t).point);var c=nr(o),f=i.axesInfo,h=l.axesInfo,p="leave"===r||nr(o),y={},b={},S={list:[],map:{}},M={showPointer:Ae(zt,b),showTooltip:Ae(Vt,S)};mo(l.coordSysMap,function(O,P){var R=c||O.containPoint(o);mo(l.coordSysAxesInfo[P],function(F,G){var X=F.axis,Y=function(ne,le){for(var ce=0;ce<(ne||[]).length;ce++){var ye=ne[ce];if(le.axis.dim===ye.axisDim&&le.axis.model.componentIndex===ye.axisIndex)return ye}}(f,F);if(!p&&R&&(!f||Y)){var Q=Y&&Y.value;null!=Q||c||(Q=X.pointToData(o)),null!=Q&&It(F,Q,M,!1,y)}})});var k={};return mo(h,function(O,P){var R=O.linkGroup;R&&!b[P]&&mo(R.axesInfo,function(F,G){var X=b[G];if(F!==O&&X){var Y=X.value;R.mapper&&(Y=O.axis.scale.parse(R.mapper(Y,fn(F),fn(O)))),k[O.key]=Y}})}),mo(k,function(O,P){It(h[P],O,M,!0,y)}),O=b,P=h,F=y.axesInfo=[],mo(P,function(G,X){var Y=G.axisPointerModel.option,Q=O[X];Q?(G.useHandle||(Y.status="show"),Y.value=Q.value,Y.seriesDataIndices=(Q.payloadBatch||[]).slice()):G.useHandle||(Y.status="hide"),"show"===Y.status&&F.push({axisDim:G.axis.dim,axisIndex:G.axis.model.componentIndex,value:Y.value})}),function(O,P,R,F){if(nr(P)||!O.list.length)return F({type:"hideTip"});var G=((O.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};F({type:"showTip",escapeConnect:!0,x:P[0],y:P[1],tooltipOption:R.tooltipOption,position:R.position,dataIndexInside:G.dataIndexInside,dataIndex:G.dataIndex,seriesIndex:G.seriesIndex,dataByCoordSys:O.list})}(S,o,e,s),function(O,P,R){var F=R.getZr(),G="axisPointerLastHighlights",X=Ze(F)[G]||{},Y=Ze(F)[G]={};mo(O,function(le,ce){var ye=le.axisPointerModel.option;"show"===ye.status&&mo(ye.seriesDataIndices,function(xe){Y[xe.seriesIndex+" | "+xe.dataIndex]=xe})});var Q=[],ne=[];me(X,function(le,ce){Y[ce]||ne.push(le)}),me(Y,function(le,ce){X[ce]||Q.push(le)}),ne.length&&R.dispatchAction({type:"downplay",escapeConnect:!0,batch:ne}),Q.length&&R.dispatchAction({type:"highlight",escapeConnect:!0,batch:Q})}(h,0,n),y}});var CS=["x","y"],W2=["width","height"],_I=el.extend({makeElOption:function(e,t,n,r,o){var i=n.axis,s=i.coordinateSystem,l=Jx(s,1-mk(i)),c=s.dataToPoint(t)[0],f=r.get("type");if(f&&"none"!==f){var h=eh(r),p=xD[f](i,c,l);p.style=h,e.graphicKey=p.type,e.pointer=p}wS(t,e,Xn(n),n,r,o)},getHandleTransform:function(e,t,n){var r=Xn(t,{labelInside:!1});return r.labelMargin=n.get("handle.margin"),{position:k_(t.axis,e,r),rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,n,r){var o=n.axis,i=o.coordinateSystem,s=mk(o),l=Jx(i,s),c=e.position;c[s]+=t[s],c[s]=Math.min(l[1],c[s]),c[s]=Math.max(l[0],c[s]);var f=Jx(i,1-s),h=(f[1]+f[0])/2,p=[h,h];return p[s]=c[s],{position:c,rotation:e.rotation,cursorPoint:p,tooltipOption:{verticalAlign:"middle"}}}}),xD={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:SS([t,n[0]],[t,n[1]],mk(e))}},shadow:function(e,t,n){var r=e.getBandWidth();return{type:"Rect",shape:hk([t-r/2,n[0]],[r,n[1]-n[0]],mk(e))}}};function mk(e){return e.isHorizontal()?0:1}function Jx(e,t){var n=e.getRect();return[n[CS[t]],n[CS[t]]+n[W2[t]]]}vl.registerAxisPointerClass("SingleAxisPointer",_I),xs({type:"single"});var KM=ba.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(e){KM.superApply(this,"init",arguments),this.legendVisualProvider=new Dm(Nn(this.getData,this),Nn(this.getRawData,this))},fixData:function(e){var t=e.length,n={},r=Ta(e,function(h){return n.hasOwnProperty(h[0])||(n[h[0]]=-1),h[2]}),o=[];r.buckets.each(function(h,p){o.push({name:p,dataList:h})});for(var i=o.length,s=0;s<i;++s){for(var l=o[s].name,c=0;c<o[s].dataList.length;++c)n[f=o[s].dataList[c][0]]=s;for(var f in n)n.hasOwnProperty(f)&&n[f]!==s&&(n[f]=s,e[t]=[],e[t][0]=f,e[t][1]=0,e[t][2]=l,t++)}return e},getInitialData:function(e,t){for(var n=t.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),r=_r(e.data,function(p){return void 0!==p[2]}),o=this.fixData(r||[]),i=[],s=this.nameMap=ut(),l=0,c=0;c<o.length;++c)i.push(o[c][2]),s.get(o[c][2])||(s.set(o[c][2],l),l++);var f=Jv(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:J_(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),h=new ml(f,this);return h.initData(o),h},getLayerSeries:function(){for(var e=this.getData(),t=e.count(),n=[],r=0;r<t;++r)n[r]=r;var o=e.mapDimension("single"),i=Ta(n,function(l){return e.get("name",l)}),s=[];return i.buckets.each(function(l,c){l.sort(function(f,h){return e.get(o,f)-e.get(o,h)}),s.push({name:c,indices:l})}),s},getAxisTooltipData:function(e,t,n){rn(e)||(e=e?[e]:[]);for(var r,o=this.getData(),i=this.getLayerSeries(),s=[],l=i.length,c=0;c<l;++c){for(var f=Number.MAX_VALUE,h=-1,p=i[c].indices.length,y=0;y<p;++y){var b=o.get(e[0],i[c].indices[y]),S=Math.abs(b-t);S<=f&&(r=b,f=S,h=i[c].indices[y])}s.push(h)}return{dataIndices:s,nestestValue:r}},formatTooltip:function(e){var t=this.getData(),n=t.getName(e),r=t.get(t.mapDimension("value"),e);return!isNaN(r)&&null!=r||(r="-"),Wo(n+" : "+r)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});function _D(e,t,n){if(e.count())for(var r,o=t.coordinateSystem,i=t.getLayerSeries(),s=e.mapDimension("single"),l=e.mapDimension("value"),c=Kt(i,function(k){return Kt(k.indices,function(O){var P=o.dataToPoint(e.get(s,O));return P[1]=e.get(l,O),P})}),f=function(k){for(var O=k.length,P=k[0].length,R=[],F=[],G=0,X={},Y=0;Y<P;++Y){for(var Q=0,ne=0;Q<O;++Q)ne+=k[Q][Y][1];G<ne&&(G=ne),R.push(ne)}for(var le=0;le<P;++le)F[le]=(G-R[le])/2;for(var ce=G=0;ce<P;++ce){var ye=R[ce]+F[ce];G<ye&&(G=ye)}return X.y0=F,X.max=G,X}(c),h=f.y0,p=n/f.max,y=i.length,b=i[0].indices.length,S=0;S<b;++S){e.setItemLayout(i[0].indices[S],{layerIndex:0,x:c[0][S][0],y0:r=h[S]*p,y:c[0][S][1]*p});for(var M=1;M<y;++M)e.setItemLayout(i[M].indices[S],{layerIndex:M,x:c[M][S][0],y0:r+=c[M-1][S][1]*p,y:c[M][S][1]*p})}}function pk(e,t,n){pn.call(this);var r=new oo({z2:2});r.seriesIndex=t.seriesIndex;var o=new vo({z2:4,silent:e.getModel("label").get("silent")});function i(){o.ignore=o.hoverIgnore}function s(){o.ignore=o.normalIgnore}this.add(r),this.add(o),this.updateData(!0,e,"normal",t,n),this.on("emphasis",i).on("normal",s).on("mouseover",i).on("mouseout",s)}Is({type:"themeRiver",init:function(){this._layers=[]},render:function(e,t,n){var r=e.getData(),o=this.group,i=e.getLayerSeries(),s=r.getLayout("layoutInfo");function f(b){return b.name}o.attr("position",[0,s.rect.y+s.boundaryGap[0]]);var h=new jf(this._layersSeries||[],i,f,f),p={};function y(b,S,M){var bt,_t,Lt,k=this._layers;if("remove"!==b){for(var O,P,R,F=[],G=[],X=i[S].indices,Y=0;Y<X.length;Y++){var Q=r.getItemLayout(X[Y]),ne=Q.x,le=Q.y0,ce=Q.y;F.push([ne,le]),G.push([ne,le+ce]),O=r.getItemVisual(X[Y],"color")}var ye=r.getItemLayout(X[0]),xe=r.getItemModel(X[Y-1]),Te=xe.getModel("label"),Ee=Te.get("margin");if("add"===b){var Ve=p[S]=new pn;P=new qf({shape:{points:F,stackedOnPoints:G,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),R=new vo({style:{x:ye.x-Ee,y:ye.y0+ye.y/2}}),Ve.add(P),Ve.add(R),o.add(Ve),P.setClipPath((bt=P.getBoundingRect(),_t=e,Zo(Lt=new ei({shape:{x:bt.x-10,y:bt.y-10,width:0,height:bt.height+20}}),{shape:{width:bt.width+20,height:bt.height+20}},_t,function(){P.removeClipPath()}),Lt))}else P=(Ve=k[M]).childAt(0),R=Ve.childAt(1),o.add(Ve),p[S]=Ve,so(P,{shape:{points:F,stackedOnPoints:G}},e),so(R,{style:{x:ye.x-Ee,y:ye.y0+ye.y/2}},e);var Be=xe.getModel("emphasis.itemStyle"),nt=xe.getModel("itemStyle");Ya(R.style,Te,{text:Te.get("show")?e.getFormattedLabel(X[Y-1],"normal")||r.getName(X[Y-1]):null,textVerticalAlign:"middle"}),P.setStyle(Fn({fill:O},nt.getItemStyle(["color"]))),ya(P,Be.getItemStyle())}else o.remove(k[S])}h.add(Nn(y,this,"add")).update(Nn(y,this,"update")).remove(Nn(y,this,"remove")).execute(),this._layersSeries=i,this._layers=p},dispose:function(){}}),oa(function(e,t){e.eachSeriesByType("themeRiver",function(n){var r=n.getData(),o=n.coordinateSystem,i={},s=o.getRect();i.rect=s;var l=n.get("boundaryGap"),c=o.getAxis();i.boundaryGap=l,"horizontal"===c.orient?(l[0]=Pn(l[0],s.height),l[1]=Pn(l[1],s.height),_D(r,n,s.height-l[0]-l[1])):(l[0]=Pn(l[0],s.width),l[1]=Pn(l[1],s.width),_D(r,n,s.width-l[0]-l[1])),r.setLayout("layoutInfo",i)})}),Ti(function(e){e.eachSeriesByType("themeRiver",function(t){var n=t.getData(),r=t.getRawData(),o=t.get("color"),i=ut();n.each(function(s){i.set(n.getRawIndex(s),s)}),r.each(function(s){var l=r.getName(s),c=o[(t.nameMap.get(l)-1)%o.length];r.setItemVisual(s,"color",c);var f=i.get(s);null!=f&&n.setItemVisual(f,"color",c)})})}),fa(d0("themeRiver")),ba.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(e,t){var n={name:e.name,children:e.data};!function i(s){var l=0;me(s.children,function(f){i(f);var h=f.value;rn(h)&&(h=h[0]),l+=h});var c=s.value;rn(c)&&(c=c[0]),null!=c&&!isNaN(c)||(c=l),c<0&&(c=0),rn(s.value)?s.value[0]=c:s.value=c}(n);var r=Kt(e.levels||[],function(i){return new $o(i,this,t)},this),o=Lp.createTree(n,this,function(i){i.wrapMethod("getItemModel",function(s,l){var c=o.getNodeByDataIndex(l),f=r[c.depth];return f&&(s.parentModel=f),s})});return o.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(e){var t=ba.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=NC(n,this),t},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});var Qx=pk.prototype;Qx.updateData=function(e,t,n,r,o){(this.node=t).piece=this,r=r||this._seriesModel,o=o||this._ecModel;var i=this.childAt(0);i.dataIndex=t.dataIndex;var s=t.getModel(),l=t.getLayout(),c=Fn({},l);c.label=null;var S,k,f=function(S,M,k){var O=S.getVisual("color"),P=S.getVisual("visualMeta");P&&0!==P.length||(O=null);var R=S.getModel("itemStyle").get("color");if(R)return R;if(O)return O;if(0===S.depth)return k.option.color[0];var F=k.option.color.length;return k.option.color[function(G){for(var X=G;1<X.depth;)X=X.parentNode;return dn(G.getAncestors()[0].children,X)}(S)%F]}(t,0,o);S=t,k=f,r.getData().setItemVisual(S.dataIndex,"color",k);var h,p=s.getModel("itemStyle").getItemStyle();h=un({lineJoin:"bevel",fill:(h="normal"===n?p:Sn(s.getModel(n+".itemStyle").getItemStyle(),p)).fill||f},h),e?(i.setShape(c),i.shape.r=l.r0,so(i,{shape:{r:l.r}},r,t.dataIndex),i.useStyle(h)):"object"==typeof h.fill&&h.fill.type||"object"==typeof i.style.fill&&i.style.fill.type?(so(i,{shape:c},r),i.useStyle(h)):so(i,{shape:c,style:h},r),this._updateLabel(r,f,n);var y=s.getShallow("cursor");if(y&&i.attr("cursor",y),e){var b=r.getShallow("highlightPolicy");this._initEvents(i,t,r,b)}this._seriesModel=r||this._seriesModel,this._ecModel=o||this._ecModel,ya(this)},Qx.onEmphasis=function(e){var t=this;this.node.hostTree.root.eachNode(function(n){n.piece&&(t.node===n?n.piece.updateData(!1,n,"emphasis"):function(r,o,i){return"none"!==i&&("self"===i?r===o:"ancestor"===i?r===o||r.isAncestorOf(o):r===o||r.isDescendantOf(o))}(n,t.node,e)?n.piece.childAt(0).trigger("highlight"):"none"!==e&&n.piece.childAt(0).trigger("downplay"))})},Qx.onNormal=function(){this.node.hostTree.root.eachNode(function(e){e.piece&&e.piece.updateData(!1,e,"normal")})},Qx.onHighlight=function(){this.updateData(!1,this.node,"highlight")},Qx.onDownplay=function(){this.updateData(!1,this.node,"downplay")},Qx._updateLabel=function(e,t,n){var r=this.node.getModel(),o=r.getModel("label"),i="normal"===n||"emphasis"===n?o:r.getModel(n+".label"),s=r.getModel("emphasis.label"),l=i.get("formatter")?n:"normal",c=pe(e.getFormattedLabel(this.node.dataIndex,l,null,null,"label"),this.node.name);!1===Q("show")&&(c="");var f=this.node.getLayout(),h=i.get("minAngle");null==h&&(h=o.get("minAngle")),null!=(h=h/180*Math.PI)&&Math.abs(f.endAngle-f.startAngle)<h&&(c="");var y=this.childAt(1);Cu(y.style,y.hoverStyle||{},o,s,{defaultText:i.getShallow("show")?c:null,autoColor:t,useInsideStyle:!0});var b,S=(f.startAngle+f.endAngle)/2,M=Math.cos(S),k=Math.sin(S),O=Q("position"),P=Q("distance")||0,R=Q("align");"outside"===O?(b=f.r+P,R=S>Math.PI/2?"right":"left"):R&&"center"!==R?"left"===R?(b=f.r0+P,S>Math.PI/2&&(R="right")):"right"===R&&(b=f.r-P,S>Math.PI/2&&(R="left")):(b=(f.r+f.r0)/2,R="center"),y.attr("style",{text:c,textAlign:R,textVerticalAlign:Q("verticalAlign")||"middle",opacity:Q("opacity")}),y.attr("position",[b*M+f.cx,b*k+f.cy]);var X=Q("rotate"),Y=0;function Q(ne){var le=i.get(ne);return null==le?o.get(ne):le}"radial"===X?(Y=-S)<-Math.PI/2&&(Y+=Math.PI):"tangential"===X?(Y=Math.PI/2-S)>Math.PI/2?Y-=Math.PI:Y<-Math.PI/2&&(Y+=Math.PI):"number"==typeof X&&(Y=X*Math.PI/180),y.attr("rotation",Y)},Qx._initEvents=function(e,t,n,r){function o(){s.onEmphasis(r)}function i(){s.onNormal()}e.off("mouseover").off("mouseout").off("emphasis").off("normal");var s=this;n.isAnimationEnabled()&&e.on("mouseover",o).on("mouseout",i).on("emphasis",o).on("normal",i).on("downplay",function(){s.onDownplay()}).on("highlight",function(){s.onHighlight()})},Rn(pk,pn),Ju.extend({type:"sunburst",init:function(){},render:function(e,t,n,r){var o=this;this.seriesModel=e,this.api=n,this.ecModel=t;var i=e.getData(),s=i.tree.root,l=e.getViewRoot(),c=this.group,f=e.get("renderLabelForZeroData"),h=[];if(l.eachNode(function(S){h.push(S)}),function(S,M){function k(P){return P.getId()}function O(P,R){!function(F,G){if(f||!F||F.getValue()||(F=null),F!==s&&G!==s)if(G&&G.piece)F?(G.piece.updateData(!1,F,"normal",e,t),i.setItemGraphicEl(F.dataIndex,G.piece)):!(Y=G)||Y.piece&&(c.remove(Y.piece),Y.piece=null);else if(F){var X=new pk(F,e,t);c.add(X),i.setItemGraphicEl(F.dataIndex,X)}var Y}(null==P?null:S[P],null==R?null:M[R])}0===S.length&&0===M.length||new jf(M,S,k,k).add(O).update(O).remove(ar(O,null)).execute()}(h,this._oldChildren||[]),function(S,M){if(0<M.depth){o.virtualPiece?o.virtualPiece.updateData(!1,S,"normal",e,t):(o.virtualPiece=new pk(S,e,t),c.add(o.virtualPiece)),M.piece._onclickEvent&&M.piece.off("click",M.piece._onclickEvent);var k=function(O){o._rootToNode(M.parentNode)};M.piece._onclickEvent=k,o.virtualPiece.on("click",k)}else o.virtualPiece&&(c.remove(o.virtualPiece),o.virtualPiece=null)}(s,l),r&&r.highlight&&r.highlight.piece){var y=e.getShallow("highlightPolicy");r.highlight.piece.onEmphasis(y)}else if(r&&r.unhighlight){var b=this.virtualPiece;!b&&s.children.length&&(b=s.children[0].piece),b&&b.onNormal()}this._initEvents(),this._oldChildren=h},dispose:function(){},_initEvents:function(){function e(n){var r=!1;t.seriesModel.getViewRoot().eachNode(function(o){if(!r&&o.piece&&o.piece.childAt(0)===n.target){var i=o.getModel().get("nodeClick");if("rootToNode"===i)t._rootToNode(o);else if("link"===i){var s=o.getModel(),l=s.get("link");l&&su(l,s.get("target",!0)||"_blank")}r=!0}})}var t=this;this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",e),this.group._onclickEvent=e},_rootToNode:function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},containPoint:function(e,t){var n=t.getData().getItemLayout(0);if(n){var r=e[0]-n.cx,o=e[1]-n.cy,i=Math.sqrt(r*r+o*o);return i<=n.r&&i>=n.r0}}});var JM="sunburstRootToNode";jr({type:JM,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(n,r){var o=Zy(e,[JM],n);if(o){var i=n.getViewRoot();i&&(e.direction=$f(i,o.node)?"rollUp":"drillDown"),n.resetViewRoot(o.node)}})});var j2="sunburstHighlight";jr({type:j2,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(n,r){var o=Zy(e,[j2],n);o&&(e.highlight=o.node)})}),jr({type:"sunburstUnhighlight",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(n,r){e.unhighlight=!0})});var U2=Math.PI/180;function T_(e,t){return t=t||[0,0],Kt(["x","y"],function(n,r){var o=this.getAxis(n),i=t[r],s=e[r]/2;return"category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(i-s)-o.dataToCoord(i+s))},this)}function MI(e,t){return t=t||[0,0],Kt([0,1],function(n){var r=t[n],o=e[n]/2,i=[],s=[];return i[n]=r-o,s[n]=r+o,i[1-n]=s[1-n]=t[1-n],Math.abs(this.dataToPoint(i)[n]-this.dataToPoint(s)[n])},this)}function TI(e,t){var n=this.getAxis(),r=t instanceof Array?t[0]:t,o=(e instanceof Array?e[0]:e)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(r-o)-n.dataToCoord(r+o))}function q2(e,t){return Kt(["Radius","Angle"],function(n,r){var o=this["get"+n+"Axis"](),i=t[r],s=e[r]/2,l="dataTo"+n,c="category"===o.type?o.getBandWidth():Math.abs(o[l](i-s)-o[l](i+s));return"Angle"===n&&(c=c*Math.PI/180),c},this)}Ti(ar(Tg,"sunburst")),oa(ar(function(e,t,n,r){t.eachSeriesByType(e,function(o){var i=o.get("center"),s=o.get("radius");rn(s)||(s=[0,s]),rn(i)||(i=[i,i]);var l=n.getWidth(),c=n.getHeight(),f=Math.min(l,c),h=Pn(i[0],l),p=Pn(i[1],c),y=Pn(s[0],f/2),b=Pn(s[1],f/2),S=-o.get("startAngle")*U2,M=o.get("minAngle")*U2,k=o.getData().tree.root,O=o.getViewRoot(),P=O.depth,R=o.get("sort");null!=R&&function Be(nt,bt){var _t=nt.children||[];nt.children=function(e,t){if("function"==typeof t)return e.sort(t);var n="asc"===t;return e.sort(function(r,o){var i=(r.getValue()-o.getValue())*(n?1:-1);return 0==i?(r.dataIndex-o.dataIndex)*(n?-1:1):i})}(_t,bt),_t.length&&me(nt.children,function(wt){Be(wt,bt)})}(O,R);var F=0;me(O.children,function(Be){isNaN(Be.getValue())||F++});var G=O.getValue(),X=Math.PI/(G||F)*2,Y=0<O.depth,ne=(b-y)/(O.height-(Y?-1:1)||1),le=o.get("clockwise"),ce=o.get("stillShowZeroSum"),ye=le?1:-1,xe=function(Be,nt){if(Be){var bt=nt;if(Be!==k){var _t=Be.getValue(),wt=0===G&&ce?X:_t*X;wt<M&&(wt=M),bt=nt+ye*wt;var Lt=Be.depth-P-(Y?-1:1),Ht=y+ne*Lt,Ln=y+ne*(1+Lt),Ft=Be.getModel();null!=Ft.get("r0")&&(Ht=Pn(Ft.get("r0"),f/2)),null!=Ft.get("r")&&(Ln=Pn(Ft.get("r"),f/2)),Be.setLayout({angle:wt,startAngle:nt,endAngle:bt,clockwise:le,cx:h,cy:p,r0:Ht,r:Ln})}if(Be.children&&Be.children.length){var Yn=0;me(Be.children,function(or){Yn+=xe(or,nt+Yn)})}return bt-nt}};if(Y){var Ve=2*Math.PI;k.setLayout({angle:Ve,startAngle:S,endAngle:S+Ve,clockwise:le,cx:h,cy:p,r0:y,r:y+ne})}xe(O,S)})},"sunburst")),fa(ar(d0,"sunburst"));var X2=rp,DI=["itemStyle"],SD=["emphasis","itemStyle"],Y2=["label"],Z2=["emphasis","label"],AI={cartesian2d:function(e){var t=e.grid.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return e.dataToPoint(n)},size:Nn(T_,e)}}},geo:function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(n){return e.dataToPoint(n)},size:Nn(MI,e)}}},singleAxis:function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return e.dataToPoint(n)},size:Nn(TI,e)}}},polar:function(e){var t=e.getRadiusAxis(),n=e.getAngleAxis(),r=t.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:r[1],r0:r[0]},api:{coord:Nn(function(o){var i=t.dataToRadius(o[0]),s=n.dataToAngle(o[1]),l=e.coordToPoint([i,s]);return l.push(i,s*Math.PI/180),l}),size:Nn(q2,e)}}},calendar:function(e){var t=e.getRect(),n=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(r,o){return e.dataToPoint(r,o)}}}}};function K2(e,t,n,r,o){null==n[e]||o||(t[e]=n[e],n[e]=r[e])}function J2(e,t,n,r){var o=e.get("renderItem"),i=e.coordinateSystem,s={};i&&(s=i.prepareCustoms?i.prepareCustoms():AI[i.type](i));var l,c,f,h,p,k,O,y=un({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:function(k,O){return null==O&&(O=l),t.get(t.getDimension(k||0),O)},style:function(k,O){null==O&&(O=l),M(O);var P=c.getModel(DI).getItemStyle();null!=p&&(P.fill=p);var R=t.getItemVisual(O,"opacity");null!=R&&(P.opacity=R);var F=k?Q2(k,f):f;return Ya(P,F,null,{autoColor:p,isRectText:!0}),P.text=F.getShallow("show")?Dr(e.getFormattedLabel(O,"normal"),k1(t,O)):null,k&&eA(P,k),P},styleEmphasis:function(k,O){null==O&&(O=l),M(O);var P=c.getModel(SD).getItemStyle(),R=k?Q2(k,h):h;return Ya(P,R,null,{isRectText:!0},!0),P.text=R.getShallow("show")?je(e.getFormattedLabel(O,"emphasis"),e.getFormattedLabel(O,"normal"),k1(t,O)):null,k&&eA(P,k),P},visual:function(k,O){return null==O&&(O=l),t.getItemVisual(O,k)},barLayout:function(k){if(i.getBaseAxis)return function(O){var P=[],R=O.axis;if("category"===R.type){for(var F=R.getBandWidth(),G=0;G<O.count;G++)P.push(un({bandWidth:F,axisKey:"axis0",stackId:uw+G},O));var X=QS(P),Y=[];for(G=0;G<O.count;G++){var Q=X.axis0[uw+G];Q.offsetCenter=Q.offset+Q.width/2,Y.push(Q)}return Y}}(un({axis:i.getBaseAxis()},k))},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(k){return J0(k,n)}},s.api||{}),b={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:s.coordSys,dataInsideLength:t.count(),encode:(k=e.getData(),O={},me(k.dimensions,function(P,R){var F=k.getDimensionInfo(P);if(!F.isExtraCoord){var G=F.coordDim;(O[G]=O[G]||[])[F.coordDimIndex]=R}}),O)},S=!0;return function(k,O){return l=k,S=!0,o&&o(un({dataIndexInside:k,dataIndex:t.getRawIndex(k),actionType:O?O.type:null},b),y)};function M(k){null==k&&(k=l),S&&(c=t.getItemModel(k),f=c.getModel(Y2),h=c.getModel(Z2),p=t.getItemVisual(k,"color"),S=!1)}}function CD(e,t,n,r,o,i){return(e=kS(e,t,n,r,o,i,!0))&&i.setItemGraphicEl(t,e),e}function kS(e,t,n,r,o,i,s){var y,l=!n,c=(n=n||{}).type,f=n.shape,h=n.style;if(e&&(l||null!=c&&c!==e.__customGraphicType||"path"===c&&(y=f)&&(y.hasOwnProperty("pathData")||y.hasOwnProperty("d"))&&D_(f)!==e.__customPathData||"image"===c&&nA(h,"image")&&h.image!==e.__customImagePath||"text"===c&&nA(f,"text")&&h.text!==e.__customText)&&(o.remove(e),e=null),!l){var p=!e;return function(y,b,S,M,k,O,P){var R={},F=S.style||{};if(S.shape&&(R.shape=Gn(S.shape)),S.position&&(R.position=S.position.slice()),S.scale&&(R.scale=S.scale.slice()),S.origin&&(R.origin=S.origin.slice()),S.rotation&&(R.rotation=S.rotation),"image"===y.type&&S.style){var G=R.style={};me(["x","y","width","height"],function(Q){K2(Q,G,F,y.style,O)})}if("text"===y.type&&S.style&&(G=R.style={},me(["x","y"],function(Q){K2(Q,G,F,y.style,O)}),!F.hasOwnProperty("textFill")&&F.fill&&(F.textFill=F.fill),!F.hasOwnProperty("textStroke")&&F.stroke&&(F.textStroke=F.stroke)),"group"!==y.type&&(y.useStyle(F),O)){y.style.opacity=0;var X=F.opacity;null==X&&(X=1),Zo(y,{style:{opacity:X}},M,b)}O?y.attr(R):so(y,R,M,b),S.hasOwnProperty("z2")&&y.attr("z2",S.z2||0),S.hasOwnProperty("silent")&&y.attr("silent",S.silent),S.hasOwnProperty("invisible")&&y.attr("invisible",S.invisible),S.hasOwnProperty("ignore")&&y.attr("ignore",S.ignore),S.hasOwnProperty("info")&&y.attr("info",S.info);var Y=S.styleEmphasis;os(y,Y),P&&rg(y,!1!==Y)}(e=e||function(y){var b,S=y.type;if("path"===S){var M=y.shape,k=null!=M.width&&null!=M.height?{x:M.x||0,y:M.y||0,width:M.width,height:M.height}:null,O=D_(M);(b=op(O,null,k,M.layout||"center")).__customPathData=O}else if("image"===S)(b=new De({})).__customImagePath=y.style.image;else if("text"===S)(b=new vo({})).__customText=y.style.text;else if("group"===S)b=new pn;else{if("compoundPath"===S)throw new Error('"compoundPath" is not supported yet.');b=new(pv(S))}return b.__customGraphicType=S,b.name=y.name,b}(n),t,n,r,0,p,s),"group"===c&&function(y,b,S,M,k){var Y,O=S.children,P=O?O.length:0,R=S.$mergeChildren,F="byName"===R||S.diffChildrenByName,G=!1===R;if(P||F||G){if(F)return void new jf((Y={oldChildren:y.children()||[],newChildren:O||[],dataIndex:b,animatableModel:M,group:y,data:k}).oldChildren,Y.newChildren,Bd,Bd,Y).add(e1).update(e1).remove(tA).execute();G&&y.removeAll();for(var X=0;X<P;X++)O[X]&&kS(y.childAt(X),b,O[X],M,y,k)}}(e,t,n,r,i),o.add(e),e}}function Bd(e,t){var n=e&&e.name;return null!=n?n:"e\0\0"+t}function e1(e,t){var n=this.context;kS(null!=t?n.oldChildren[t]:null,n.dataIndex,null!=e?n.newChildren[e]:null,n.animatableModel,n.group,n.data)}function Q2(e,t){var n=new $o({},t);return me(X2,function(r,o){e.hasOwnProperty(r)&&(n.option[o]=e[r])}),n}function eA(e,t){for(var n in t)!t.hasOwnProperty(n)&&X2.hasOwnProperty(n)||(e[n]=t[n])}function tA(e){var t=this.context,n=t.oldChildren[e];n&&t.group.remove(n)}function D_(e){return e&&(e.pathData||e.d)}function nA(e,t){return e&&e.hasOwnProperty(t)}function Gm(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function kD(e,t){return t.dim+e.model.componentIndex}function QM(e,t){cu.call(this,"radius",e,t),this.type="category"}ba.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(e,t){return Sp(this.getSource(),this)},getDataParams:function(e,t,n){var r=ba.prototype.getDataParams.apply(this,arguments);return n&&(r.info=n.info),r}}),Ju.extend({type:"custom",_data:null,render:function(e,t,n,r){var o=this._data,i=e.getData(),s=this.group,l=J2(e,i,t,n);i.diff(o).add(function(f){CD(null,f,l(f,r),e,s,i)}).update(function(f,h){CD(o.getItemGraphicEl(h),f,l(f,r),e,s,i)}).remove(function(f){var h=o.getItemGraphicEl(f);h&&s.remove(h)}).execute();var c=e.get("clip",!0)?e0(e.coordinateSystem,!1,e):null;c?s.setClipPath(c):s.removeClipPath(),this._data=i},incrementalPrepareRender:function(e,t,n){this.group.removeAll(),this._data=null},incrementalRender:function(e,t,n,r,o){var i=t.getData(),s=J2(t,i,n,r);function l(f){f.isGroup||(f.incremental=!0,f.useHoverLayer=!0)}for(var c=e.start;c<e.end;c++)CD(null,c,s(c,o),t,this.group,i).traverse(l)},dispose:Pt,filterForExposedEvent:function(e,t,n,r){var o=t.element;if(null==o||n.name===o)return!0;for(;(n=n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1}}),QM.prototype={constructor:QM,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToRadius:cu.prototype.dataToCoord,radiusToData:cu.prototype.coordToData},Rn(QM,cu);var MD=La();function MS(e,t){cu.call(this,"angle",e,t=t||[0,360]),this.type="category"}function eT(e){this.name=e||"",this.cx=0,this.cy=0,this._radiusAxis=new QM,this._angleAxis=new MS,this._radiusAxis.polar=this._angleAxis.polar=this}MS.prototype={constructor:MS,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToAngle:cu.prototype.dataToCoord,angleToData:cu.prototype.coordToData,calculateCategoryInterval:function(){var e=this.getLabelModel(),t=this.scale,n=t.getExtent(),r=t.count();if(n[1]-n[0]<1)return 0;var o=n[0],i=this.dataToCoord(o+1)-this.dataToCoord(o),s=Math.abs(i),l=Qi(o,e.getFont(),"center","top"),c=Math.max(l.height,7)/s;isNaN(c)&&(c=1/0);var f=Math.max(0,Math.floor(c)),h=MD(this.model),p=h.lastAutoInterval,y=h.lastTickCount;return null!=p&&null!=y&&Math.abs(p-f)<=1&&Math.abs(y-r)<=1&&f<p?f=p:(h.lastTickCount=r,h.lastAutoInterval=f),f}},Rn(MS,cu),eT.prototype={type:"polar",axisPointerEnabled:!0,constructor:eT,dimensions:["radius","angle"],model:null,containPoint:function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},containData:function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},getAxis:function(e){return this["_"+e+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(e){var t=[],n=this._angleAxis,r=this._radiusAxis;return n.scale.type===e&&t.push(n),r.scale.type===e&&t.push(r),t},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(e){var t=null!=e&&"auto"!==e?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},dataToPoint:function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},pointToData:function(e,t){var n=this.pointToCoord(e);return[this._radiusAxis.radiusToData(n[0],t),this._angleAxis.angleToData(n[1],t)]},pointToCoord:function(e){var t=e[0]-this.cx,n=e[1]-this.cy,r=this.getAngleAxis(),o=r.getExtent(),i=Math.min(o[0],o[1]),s=Math.max(o[0],o[1]);r.inverse?i=s-360:s=i+360;var l=Math.sqrt(t*t+n*n);t/=l,n/=l;for(var c=Math.atan2(-n,t)/Math.PI*180,f=c<i?1:-1;c<i||s<c;)c+=360*f;return[l,c]},coordToPoint:function(e){var t=e[0],n=e[1]/180*Math.PI;return[Math.cos(n)*t+this.cx,-Math.sin(n)*t+this.cy]},getArea:function(){var e=this.getAngleAxis(),t=this.getRadiusAxis().getExtent().slice();t[0]>t[1]&&t.reverse();var n=e.getExtent(),r=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:t[0],r:t[1],startAngle:-n[0]*r,endAngle:-n[1]*r,clockwise:e.inverse,contain:function(o,i){var s=o-this.cx,l=i-this.cy,c=s*s+l*l,f=this.r,h=this.r0;return c<=f*f&&h*h<=c}}}};var TD=Go.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});function tT(e,t){return t.type||(t.data?"category":"value")}function V0(e,t){var n=this,r=n.getAngleAxis(),o=n.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),e.eachSeries(function(l){if(l.coordinateSystem===n){var c=l.getData();me(c.mapDimension("radius",!0),function(f){o.scale.unionExtentFromData(c,qb(c,f))}),me(c.mapDimension("angle",!0),function(f){r.scale.unionExtentFromData(c,qb(c,f))})}}),oc(r.scale,r.model),oc(o.scale,o.model),"category"===r.type&&!r.onBand){var i=r.getExtent(),s=360/r.scale.count();r.inverse?i[1]+=s:i[1]-=s,r.setExtent(i[0],i[1])}}function DD(e,t){if(e.type=t.get("type"),e.scale=Sg(t),e.onBand=t.get("boundaryGap")&&"category"===e.type,e.inverse=t.get("inverse"),"angleAxis"===t.mainType){e.inverse^=t.get("clockwise");var n=t.get("startAngle");e.setExtent(n,n+(e.inverse?-360:360))}(t.axis=e).model=t}Sn(TD.prototype,Cg),r0("angle",TD,tT,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),r0("radius",TD,tT,{splitNumber:5}),Au({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(e){var t;return this.ecModel.eachComponent(e,function(n){n.getCoordSysModel()===this&&(t=n)},this),t},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}}),ku.register("polar",{dimensions:eT.prototype.dimensions,create:function(e,t){var n=[];return e.eachComponent("polar",function(r,o){var i=new eT(o);i.update=V0;var s=i.getRadiusAxis(),l=i.getAngleAxis(),c=r.findAxisModel("radiusAxis"),f=r.findAxisModel("angleAxis");DD(s,c),DD(l,f),function(h,p,y){var b=p.get("center"),S=y.getWidth(),M=y.getHeight();h.cx=Pn(b[0],S),h.cy=Pn(b[1],M);var k=h.getRadiusAxis(),O=Math.min(S,M)/2,P=p.get("radius");null==P?P=[0,"100%"]:rn(P)||(P=[0,P]),P=[Pn(P[0],O),Pn(P[1],O)],k.inverse?k.setExtent(P[1],P[0]):k.setExtent(P[0],P[1])}(i,r,t),n.push(i),(r.coordinateSystem=i).model=r}),e.eachSeries(function(r){if("polar"===r.get("coordinateSystem")){var o=e.queryComponents({mainType:"polar",index:r.get("polarIndex"),id:r.get("polarId")})[0];r.coordinateSystem=o.coordinateSystem}}),n}});var rA=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function nT(e,t,n){t[1]>t[0]&&(t=t.slice().reverse());var r=e.coordToPoint([t[0],n]),o=e.coordToPoint([t[1],n]);return{x1:r[0],y1:r[1],x2:o[0],y2:o[1]}}function rT(e){return e.getRadiusAxis().inverse?0:1}function oA(e){var t=e[0],n=e[e.length-1];t&&n&&Math.abs(Math.abs(t.coord-n.coord)-360)<1e-4&&e.pop()}vl.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,r=n.polar,o=r.getRadiusAxis().getExtent(),i=n.getTicksCoords(),s=n.getMinorTicksCoords(),l=Kt(n.getViewLabels(),function(c){return(c=Gn(c)).coord=n.dataToCoord(c.tickValue),c});oA(l),oA(i),me(rA,function(c){!e.get(c+".show")||n.scale.isBlank()&&"axisLine"!==c||this["_"+c](e,r,i,s,o,l)},this)}},_axisLine:function(e,t,n,r,o){var i,s=e.getModel("axisLine.lineStyle"),l=rT(t),c=l?0:1;(i=0===o[c]?new Fs({shape:{cx:t.cx,cy:t.cy,r:o[l]},style:s.getLineStyle(),z2:1,silent:!0}):new Vs({shape:{cx:t.cx,cy:t.cy,r:o[l],r0:o[c]},style:s.getLineStyle(),z2:1,silent:!0})).style.fill=null,this.group.add(i)},_axisTick:function(e,t,n,r,o){var i=e.getModel("axisTick"),s=(i.get("inside")?-1:1)*i.get("length"),l=o[rT(t)],c=Kt(n,function(f){return new Yi({shape:nT(t,[l,l+s],f.coord)})});this.group.add(Al(c,{style:un(i.getModel("lineStyle").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})}))},_minorTick:function(e,t,n,r,o){if(r.length){for(var i=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(i.get("inside")?-1:1)*s.get("length"),c=o[rT(t)],f=[],h=0;h<r.length;h++)for(var p=0;p<r[h].length;p++)f.push(new Yi({shape:nT(t,[c,c+l],r[h][p].coord)}));this.group.add(Al(f,{style:un(s.getModel("lineStyle").getLineStyle(),un(i.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(e,t,n,r,o,i){var s=e.getCategories(!0),l=e.getModel("axisLabel"),c=l.get("margin"),f=e.get("triggerEvent");me(i,function(h,p){var y=l,b=h.tickValue,S=o[rT(t)],M=t.coordToPoint([S+c,h.coord]),k=t.cx,O=t.cy,P=Math.abs(M[0]-k)/S<.3?"center":M[0]>k?"left":"right",R=Math.abs(M[1]-O)/S<.3?"middle":M[1]>O?"top":"bottom";s&&s[b]&&s[b].textStyle&&(y=new $o(s[b].textStyle,l,l.ecModel));var F=new vo({silent:ic.isLabelSilent(e)});this.group.add(F),Ya(F.style,y,{x:M[0],y:M[1],textFill:y.getTextColor()||e.get("axisLine.lineStyle.color"),text:h.formattedLabel,textAlign:P,textVerticalAlign:R}),f&&(F.eventData=ic.makeAxisEventDataBase(e),F.eventData.targetType="axisLabel",F.eventData.value=h.rawLabel)},this)},_splitLine:function(e,t,n,r,o){var i=e.getModel("splitLine").getModel("lineStyle"),s=i.get("color"),l=0;s=s instanceof Array?s:[s];for(var c=[],f=0;f<n.length;f++){var h=l++%s.length;c[h]=c[h]||[],c[h].push(new Yi({shape:nT(t,o,n[f].coord)}))}for(f=0;f<c.length;f++)this.group.add(Al(c[f],{style:un({stroke:s[f%s.length]},i.getLineStyle()),silent:!0,z:e.get("z")}))},_minorSplitLine:function(e,t,n,r,o){if(r.length){for(var i=e.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<r.length;l++)for(var c=0;c<r[l].length;c++)s.push(new Yi({shape:nT(t,o,r[l][c].coord)}));this.group.add(Al(s,{style:i.getLineStyle(),silent:!0,z:e.get("z")}))}},_splitArea:function(e,t,n,r,o){if(n.length){var i=e.getModel("splitArea").getModel("areaStyle"),s=i.get("color"),l=0;s=s instanceof Array?s:[s];for(var c=[],f=Math.PI/180,h=-n[0].coord*f,p=Math.min(o[0],o[1]),y=Math.max(o[0],o[1]),b=e.get("clockwise"),S=1;S<n.length;S++){var M=l++%s.length;c[M]=c[M]||[],c[M].push(new oo({shape:{cx:t.cx,cy:t.cy,r0:p,r:y,startAngle:h,endAngle:-n[S].coord*f,clockwise:b},silent:!0})),h=-n[S].coord*f}for(S=0;S<c.length;S++)this.group.add(Al(c[S],{style:un({fill:s[S%s.length]},i.getAreaStyle()),silent:!0}))}}});var II=["axisLine","axisTickLabel","axisName"],OI=["splitLine","splitArea","minorSplitLine"];vl.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,r=n.polar,o=r.getAngleAxis(),i=n.getTicksCoords(),s=n.getMinorTicksCoords(),l=o.getExtent()[0],c=n.getExtent(),f={position:[(p=r).cx,p.cy],rotation:l/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1},h=new ic(e,f);me(II,h.add,h),this.group.add(h.getGroup()),me(OI,function(p){e.get(p+".show")&&!n.scale.isBlank()&&this["_"+p](e,r,l,c,i,s)},this)}var p},_splitLine:function(e,t,n,r,o){var i=e.getModel("splitLine").getModel("lineStyle"),s=i.get("color"),l=0;s=s instanceof Array?s:[s];for(var c=[],f=0;f<o.length;f++){var h=l++%s.length;c[h]=c[h]||[],c[h].push(new Fs({shape:{cx:t.cx,cy:t.cy,r:o[f].coord}}))}for(f=0;f<c.length;f++)this.group.add(Al(c[f],{style:un({stroke:s[f%s.length],fill:null},i.getLineStyle()),silent:!0}))},_minorSplitLine:function(e,t,n,r,o,i){if(i.length){for(var s=e.getModel("minorSplitLine").getModel("lineStyle"),l=[],c=0;c<i.length;c++)for(var f=0;f<i[c].length;f++)l.push(new Fs({shape:{cx:t.cx,cy:t.cy,r:i[c][f].coord}}));this.group.add(Al(l,{style:un({fill:null},s.getLineStyle()),silent:!0}))}},_splitArea:function(e,t,n,r,o){if(o.length){var i=e.getModel("splitArea").getModel("areaStyle"),s=i.get("color"),l=0;s=s instanceof Array?s:[s];for(var c=[],f=o[0].coord,h=1;h<o.length;h++){var p=l++%s.length;c[p]=c[p]||[],c[p].push(new oo({shape:{cx:t.cx,cy:t.cy,r0:f,r:o[h].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),f=o[h].coord}for(h=0;h<c.length;h++)this.group.add(Al(c[h],{style:un({fill:s[h%s.length]},i.getAreaStyle()),silent:!0}))}}});var AD=el.extend({makeElOption:function(e,t,n,r,o){var i=n.axis;"angle"===i.dim&&(this.animationThreshold=Math.PI/18);var s,l=i.polar,c=l.getOtherAxis(i).getExtent();s=i["dataTo"+up(i.dim)](t);var f=r.get("type");if(f&&"none"!==f){var h=eh(r),p=EI[f](i,l,s,c,h);p.style=h,e.graphicKey=p.type,e.pointer=p}var y=r.get("label.margin");xS(e,n,r,o,function(b,S,M,k,O){var P=S.axis,R=P.dataToCoord(b),F=k.getAngleAxis().getExtent()[0];F=F/180*Math.PI;var G,X,Y,Q=k.getRadiusAxis().getExtent();if("radius"===P.dim){var ne=ui();Ar(ne,ne,F),Vl(ne,ne,[k.cx,k.cy]),G=Ql([R,-O],ne);var le=S.getModel("axisLabel").get("rotate")||0,ce=ic.innerTextLayout(F,le*Math.PI/180,-1);X=ce.textAlign,Y=ce.textVerticalAlign}else{var ye=Q[1];G=k.coordToPoint([ye+O,R]);var xe=k.cx,Te=k.cy;X=Math.abs(G[0]-xe)/ye<.3?"center":G[0]>xe?"left":"right",Y=Math.abs(G[1]-Te)/ye<.3?"middle":G[1]>Te?"top":"bottom"}return{position:G,align:X,verticalAlign:Y}}(t,n,0,l,y))}}),EI={line:function(e,t,n,r,o){return"angle"===e.dim?{type:"Line",shape:SS(t.coordToPoint([r[0],n]),t.coordToPoint([r[1],n]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:n}}},shadow:function(e,t,n,r,o){var i=Math.max(1,e.getBandWidth()),s=Math.PI/180;return"angle"===e.dim?{type:"Sector",shape:gk(t.cx,t.cy,r[0],r[1],(-n-i/2)*s,(i/2-n)*s)}:{type:"Sector",shape:gk(t.cx,t.cy,n-i/2,n+i/2,0,2*Math.PI)}}};function ID(e,t){t.update="updateView",jr(t,function(n,r){var o={};return r.eachComponent({mainType:"geo",query:n},function(i){i[e](n.name),me(i.coordinateSystem.regions,function(s){o[s.name]=i.isSelected(s.name)||!1})}),{selected:o,name:n.name}})}function Dc(e,t,n){this._model=e}function OD(e,t,n,r){var o=n.calendarModel,i=n.seriesModel,s=o?o.coordinateSystem:i?i.coordinateSystem:null;return s===this?s[e](r):null}vl.registerAxisPointerClass("PolarAxisPointer",AD),oa(ar(function(e,t,n){var r={},o=function(i){var s={};me(i,function(c,f){var h=c.getData(),p=c.coordinateSystem,y=p.getBaseAxis(),b=kD(p,y),S=y.getExtent(),M="category"===y.type?y.getBandWidth():Math.abs(S[1]-S[0])/h.count(),k=s[b]||{bandWidth:M,remainedWidth:M,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},O=k.stacks;s[b]=k;var P=Gm(c);O[P]||k.autoWidthCount++,O[P]=O[P]||{width:0,maxWidth:0};var R=Pn(c.get("barWidth"),M),F=Pn(c.get("barMaxWidth"),M),G=c.get("barGap"),X=c.get("barCategoryGap");R&&!O[P].width&&(R=Math.min(k.remainedWidth,R),O[P].width=R,k.remainedWidth-=R),F&&(O[P].maxWidth=F),null!=G&&(k.gap=G),null!=X&&(k.categoryGap=X)});var l={};return me(s,function(c,f){l[f]={};var h=c.stacks,y=Pn(c.categoryGap,c.bandWidth),b=Pn(c.gap,1),S=c.remainedWidth,M=c.autoWidthCount,k=(S-y)/(M+(M-1)*b);k=Math.max(k,0),me(h,function(F,G){var X=F.maxWidth;X&&X<k&&(X=Math.min(X,S),F.width&&(X=Math.min(X,F.width)),S-=X,F.width=X,M--)}),k=(S-y)/(M+(M-1)*b),k=Math.max(k,0);var O,P=0;me(h,function(F,G){F.width||(F.width=k),P+=(O=F).width*(1+b)}),O&&(P-=O.width*b);var R=-P/2;me(h,function(F,G){l[f][G]=l[f][G]||{offset:R,width:F.width},R+=F.width*(1+b)})}),l}(_r(t.getSeriesByType(e),function(i){return!t.isSeriesFiltered(i)&&i.coordinateSystem&&"polar"===i.coordinateSystem.type}));t.eachSeriesByType(e,function(i){if("polar"===i.coordinateSystem.type){var s=i.getData(),l=i.coordinateSystem,c=l.getBaseAxis(),f=kD(l,c),h=Gm(i),p=o[f][h],y=p.offset,b=p.width,S=l.getOtherAxis(c),M=i.coordinateSystem.cx,k=i.coordinateSystem.cy,O=i.get("barMinHeight")||0,P=i.get("barMinAngle")||0;r[h]=r[h]||[];for(var R=s.mapDimension(S.dim),F=s.mapDimension(c.dim),G=Sm(s,R),X="radius"!==c.dim||!i.get("roundCap",!0),Y="radius"===S.dim?S.dataToRadius(0):S.dataToAngle(0),Q=0,ne=s.count();Q<ne;Q++){var le,ce,ye,xe,Te=s.get(R,Q),Ee=s.get(F,Q),Ve=0<=Te?"p":"n",Be=Y;if(G&&(r[h][Ee]||(r[h][Ee]={p:Y,n:Y}),Be=r[h][Ee][Ve]),"radius"===S.dim){var nt=S.dataToRadius(Te)-Y,bt=c.dataToAngle(Ee);Math.abs(nt)<O&&(nt=(nt<0?-1:1)*O),ce=(le=Be)+nt,xe=(ye=bt-y)-b,G&&(r[h][Ee][Ve]=ce)}else{var _t=S.dataToAngle(Te,X)-Y,wt=c.dataToRadius(Ee);Math.abs(_t)<P&&(_t=(_t<0?-1:1)*P),ce=(le=wt+y)+b,xe=(ye=Be)+_t,G&&(r[h][Ee][Ve]=xe)}s.setItemLayout(Q,{cx:M,cy:k,r0:le,r:ce,startAngle:-ye*Math.PI/180,endAngle:-xe*Math.PI/180})}}},this)},"bar")),xs({type:"polar"}),_e(Go.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(e){Go.prototype.init.apply(this,arguments),Qs(e,"label",["show"])},optionUpdated:function(){var e=this.option,t=this;e.regions=Fw.getFilledRegions(e.regions,e.map,e.nameMap),this._optionModelMap=Pr(e.regions||[],function(n,r){return r.name&&n.set(r.name,new $o(r,t)),n},ut()),this.updateSelectedMap(e.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(e){return this._optionModelMap.get(e)||new $o(null,this,this.ecModel)},getFormattedLabel:function(e,t){t=t||"normal";var n=this.getRegionModel(e).get(("normal"===t?"":t+".")+"label.formatter"),r={name:e};return"function"==typeof n?(r.status=t,n(r)):"string"==typeof n?n.replace("{a}",null!=e?e:""):void 0},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e}}),Tw),xs({type:"geo",init:function(e,t){var n=new h0(t,!0);this._mapDraw=n,this.group.add(n.group)},render:function(e,t,n,r){if(!r||"geoToggleSelect"!==r.type||r.from!==this.uid){var o=this._mapDraw;e.get("show")?o.draw(e,t,n,this,r):this._mapDraw.group.removeAll(),this.group.silent=e.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),ID("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),ID("select",{type:"geoSelect",event:"geoselected"}),ID("unSelect",{type:"geoUnSelect",event:"geounselected"}),Dc.prototype={constructor:Dc,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(e){var t=(e=Rf(e)).getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var r=e.getDate();r=r<10?"0"+r:r;var o=e.getDay();return{y:t,m:n,d:r,day:o=Math.abs((o+7-this.getFirstDayOfWeek())%7),time:e.getTime(),formatedDate:t+"-"+n+"-"+r,date:e}},getNextNDay:function(e,t){return 0===(t=t||0)||(e=new Date(this.getDateInfo(e).time)).setDate(e.getDate()+t),this.getDateInfo(e)},update:function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,r=["width","height"],o=this._model.get("cellSize").slice(),i=this._model.getBoxLayoutParams(),s="horizontal"===this._orient?[n,7]:[7,n];me([0,1],function(h){f(o,h)&&(i[r[h]]=o[h]*s[h])});var l={width:t.getWidth(),height:t.getHeight()},c=this._rect=No(i,l);function f(h,p){return null!=h[p]&&"auto"!==h[p]}me([0,1],function(h){f(o,h)||(o[h]=c[r[h]]/s[h])}),this._sw=o[0],this._sh=o[1]},dataToPoint:function(e,t){rn(e)&&(e=e[0]),null==t&&(t=!0);var n=this.getDateInfo(e),r=this._rangeInfo;if(t&&!(n.time>=r.start.time&&n.time<r.end.time+864e5))return[NaN,NaN];var i=n.day,s=this._getRangeInfo([r.start.time,n.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+i*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+i*this._sh+this._sh/2]},pointToData:function(e){var t=this.pointToDate(e);return t&&t.time},dataToRect:function(e,t){var n=this.dataToPoint(e,t);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},pointToDate:function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,r=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,t-1,r):this._getDateByWeeksAndDay(t,n-1,r)},convertToPixel:ar(OD,"dataToPoint"),convertFromPixel:ar(OD,"pointToData"),_initRangeOption:function(){var e=this._model.get("range"),t=e;if(rn(t)&&1===t.length&&(t=t[0]),/^\d{4}$/.test(t)&&(e=[t+"-01-01",t+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(t)){var n=this.getDateInfo(t),r=n.date;r.setMonth(r.getMonth()+1);var o=this.getNextNDay(r,-1);e=[n.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(t)&&(e=[t,t]);var i=this._getRangeInfo(e);return i.start.time>i.end.time&&e.reverse(),e},_getRangeInfo:function(e){var t;(e=[this.getDateInfo(e[0]),this.getDateInfo(e[1])])[0].time>e[1].time&&(t=!0,e.reverse());var n=Math.floor(e[1].time/864e5)-Math.floor(e[0].time/864e5)+1,r=new Date(e[0].time),o=r.getDate(),i=e[1].date.getDate();r.setDate(o+n-1);var s=r.getDate();if(s!==i)for(var l=0<r.getTime()-e[1].time?1:-1;(s=r.getDate())!==i&&0<(r.getTime()-e[1].time)*l;)n-=l,r.setDate(s-l);var c=Math.floor((n+e[0].day+6)/7),f=t?1-c:c-1;return t&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:n,weeks:c,nthWeek:f,fweek:e[0].day,lweek:e[1].day}},_getDateByWeeksAndDay:function(e,t,n){var r=this._getRangeInfo(n);if(e>r.weeks||0===e&&t<r.fweek||e===r.weeks&&t>r.lweek)return!1;var o=7*(e-1)-r.fweek+t,i=new Date(r.start.time);return i.setDate(r.start.d+o),this.getDateInfo(i)}},Dc.dimensions=Dc.prototype.dimensions,Dc.getDimensionsInfo=Dc.prototype.getDimensionsInfo,Dc.create=function(e,t){var n=[];return e.eachComponent("calendar",function(r){var o=new Dc(r,e,t);n.push(o),r.coordinateSystem=o}),e.eachSeries(function(r){"calendar"===r.get("coordinateSystem")&&(r.coordinateSystem=n[r.get("calendarIndex")||0])}),n},ku.register("calendar",Dc);var iA=Go.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(e,t,n,r){var o=cp(e);iA.superApply(this,"init",arguments),aA(e,o)},mergeOption:function(e,t){iA.superApply(this,"mergeOption",arguments),aA(this.option,e)}});function aA(e,t){var n=e.cellSize;rn(n)?1===n.length&&(n[1]=n[0]):n=e.cellSize=[n,n];var r=Kt([0,1],function(o){return function(i,s){return null!=i[Nf[s][0]]||null!=i[Nf[s][1]]&&null!=i[Nf[s][2]]}(t,o)&&(n[o]="auto"),null!=n[o]&&"auto"!==n[o]});Bf(e,t,{type:"box",ignoreSize:r})}var H0={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]},PI={EN:["S","M","T","W","T","F","S"],CN:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]};xs({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(e,t,n){var r=this.group;r.removeAll();var o=e.coordinateSystem,i=o.getRangeInfo(),s=o.getOrient();this._renderDayRect(e,i,r),this._renderLines(e,i,s,r),this._renderYearText(e,i,s,r),this._renderMonthText(e,s,r),this._renderWeekText(e,i,s,r)},_renderDayRect:function(e,t,n){for(var r=e.coordinateSystem,o=e.getModel("itemStyle").getItemStyle(),i=r.getCellWidth(),s=r.getCellHeight(),l=t.start.time;l<=t.end.time;l=r.getNextNDay(l,1).time){var c=r.dataToRect([l],!1).tl,f=new ei({shape:{x:c[0],y:c[1],width:i,height:s},cursor:"default",style:o});n.add(f)}},_renderLines:function(e,t,n,r){var o=this,i=e.coordinateSystem,s=e.getModel("splitLine.lineStyle").getLineStyle(),l=e.get("splitLine.show"),c=s.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var f=t.start,h=0;f.time<=t.end.time;h++){y(f.formatedDate),0===h&&(f=i.getDateInfo(t.start.y+"-"+t.start.m));var p=f.date;p.setMonth(p.getMonth()+1),f=i.getDateInfo(p)}function y(b){o._firstDayOfMonth.push(i.getDateInfo(b)),o._firstDayPoints.push(i.dataToRect([b],!1).tl);var S=o._getLinePointsOfOneWeek(e,b,n);o._tlpoints.push(S[0]),o._blpoints.push(S[S.length-1]),l&&o._drawSplitline(S,s,r)}y(i.getNextNDay(t.end.time,1).formatedDate),l&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,c,n),s,r),l&&this._drawSplitline(o._getEdgesPoints(o._blpoints,c,n),s,r)},_getEdgesPoints:function(e,t,n){var r=[e[0].slice(),e[e.length-1].slice()],o="horizontal"===n?0:1;return r[0][o]=r[0][o]-t/2,r[1][o]=r[1][o]+t/2,r},_drawSplitline:function(e,t,n){var r=new Bc({z2:20,shape:{points:e},style:t});n.add(r)},_getLinePointsOfOneWeek:function(e,t,n){var r=e.coordinateSystem;t=r.getDateInfo(t);for(var o=[],i=0;i<7;i++){var s=r.getNextNDay(t.time,i),l=r.dataToRect([s.time],!1);o[2*s.day]=l.tl,o[2*s.day+1]=l["horizontal"===n?"bl":"tr"]}return o},_formatterLabel:function(e,t){return"string"==typeof e&&e?c1(e,t):"function"==typeof e?e(t):t.nameMap},_yearTextPositionControl:function(e,t,n,r,o){t=t.slice();var i=["center","bottom"];"bottom"===r?(t[1]+=o,i=["center","top"]):"left"===r?t[0]-=o:"right"===r?(t[0]+=o,i=["center","top"]):t[1]-=o;var s=0;return"left"!==r&&"right"!==r||(s=Math.PI/2),{rotation:s,position:t,style:{textAlign:i[0],textVerticalAlign:i[1]}}},_renderYearText:function(e,t,n,r){var o=e.getModel("yearLabel");if(o.get("show")){var i=o.get("margin"),s=o.get("position");s=s||("horizontal"!==n?"top":"left");var l=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(l[0][0]+l[1][0])/2,f=(l[0][1]+l[1][1])/2,h="horizontal"===n?0:1,p={top:[c,l[h][1]],bottom:[c,l[1-h][1]],left:[l[1-h][0],f],right:[l[h][0],f]},y=t.start.y;+t.end.y>+t.start.y&&(y=y+"-"+t.end.y);var b=o.get("formatter"),M=this._formatterLabel(b,{start:t.start.y,end:t.end.y,nameMap:y}),k=new vo({z2:30});Ya(k.style,o,{text:M}),k.attr(this._yearTextPositionControl(k,p[s],n,s,i)),r.add(k)}},_monthTextPositionControl:function(e,t,n,r,o){var i="left",s="top",l=e[0],c=e[1];return"horizontal"===n?(c+=o,t&&(i="center"),"start"===r&&(s="bottom")):(l+=o,t&&(s="middle"),"start"===r&&(i="right")),{x:l,y:c,textAlign:i,textVerticalAlign:s}},_renderMonthText:function(e,t,n){var r=e.getModel("monthLabel");if(r.get("show")){var o=r.get("nameMap"),i=r.get("margin"),s=r.get("position"),l=r.get("align"),c=[this._tlpoints,this._blpoints];tr(o)&&(o=H0[o.toUpperCase()]||[]);var f="start"===s?0:1,h="horizontal"===t?0:1;i="start"===s?-i:i;for(var p="center"===l,y=0;y<c[f].length-1;y++){var b=c[f][y].slice(),S=this._firstDayOfMonth[y];p&&(b[h]=(this._firstDayPoints[y][h]+c[0][y+1][h])/2);var k=r.get("formatter"),O=o[+S.m-1],P={yyyy:S.y,yy:(S.y+"").slice(2),MM:S.m,M:+S.m,nameMap:O},R=this._formatterLabel(k,P),F=new vo({z2:30});Fn(Ya(F.style,r,{text:R}),this._monthTextPositionControl(b,p,t,s,i)),n.add(F)}}},_weekTextPositionControl:function(e,t,n,r,o){var i="center",s="middle",l=e[0],c=e[1],f="start"===n;return"horizontal"===t?(l=l+r+(f?1:-1)*o[0]/2,i=f?"right":"left"):(c=c+r+(f?1:-1)*o[1]/2,s=f?"bottom":"top"),{x:l,y:c,textAlign:i,textVerticalAlign:s}},_renderWeekText:function(e,t,n,r){var o=e.getModel("dayLabel");if(o.get("show")){var i=e.coordinateSystem,s=o.get("position"),l=o.get("nameMap"),c=o.get("margin"),f=i.getFirstDayOfWeek();tr(l)&&(l=PI[l.toUpperCase()]||[]);var h=i.getNextNDay(t.end.time,7-t.lweek).time,p=[i.getCellWidth(),i.getCellHeight()];c=Pn(c,p["horizontal"===n?0:1]),"start"===s&&(h=i.getNextNDay(t.start.time,-(7+t.fweek)).time,c=-c);for(var y=0;y<7;y++){var b,S=i.getNextNDay(h,y),M=i.dataToRect([S.time],!1).center;b=Math.abs((y+f)%7);var k=new vo({z2:30});Fn(Ya(k.style,o,{text:l[b]}),this._weekTextPositionControl(M,n,s,c,p)),r.add(k)}}}});var oT={path:null,compoundPath:null,group:pn,image:De,text:vo};ra(function(e){var t=e.graphic;rn(t)?e.graphic=t[0]&&t[0].elements?[e.graphic[0]]:[{elements:t}]:t&&!t.elements&&(e.graphic=[{elements:[t]}])});var ED=Au({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(e){var t=this.option.elements;this.option.elements=null,ED.superApply(this,"mergeOption",arguments),this.option.elements=t},optionUpdated:function(e,t){var n=this.option,r=(t?n:e).elements,o=n.elements=t?[]:n.elements,i=[];this._flatten(r,i);var s=Ym(o,i);X0(s);var l=this._elOptionsToUpdate=[];me(s,function(f,h){var y,b,S,M,k,O,p=f.option;p&&(l.push(p),function(y,b){var S=y.exist;if(b.id=y.keyInfo.id,!b.type&&S&&(b.type=S.type),null==b.parentId){var M=b.parentOption;M?b.parentId=M.id:S&&(b.parentId=S.parentId)}b.parentOption=null}(f,p),y=o,b=h,M=Fn({},S=p),k=y[b],"merge"===(O=S.$action||"merge")?k?(Sn(k,M,!0),Bf(k,M,{ignoreSize:!0}),Ib(S,k)):y[b]=M:"replace"===O?y[b]=M:"remove"===O&&k&&(y[b]=null),function(y,b){!y||(y.hv=b.hv=[PD(b,["left","right"]),PD(b,["top","bottom"])],"group"===y.type&&(null==y.width&&(y.width=b.width=0),null==y.height&&(y.height=b.height=0)))}(o[h],p))},this);for(var c=o.length-1;0<=c;c--)null==o[c]?o.splice(c,1):delete o[c].$action},_flatten:function(e,t,n){me(e,function(r){if(r){n&&(r.parentOption=n),t.push(r);var o=r.children;"group"===r.type&&o&&this._flatten(o,t,r),delete r.children}},this)},useElOptionsToUpdate:function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e}});function sA(e,t,n,r){var o=n.type,i=new(oT.hasOwnProperty(o)?oT[o]:pv(o))(n);t.add(i),r.set(e,i),i.__ecGraphicId=e}function jm(e,t){var n=e&&e.parent;n&&("group"===e.type&&e.traverse(function(r){jm(r,t)}),t.removeKey(e.__ecGraphicId),n.remove(e))}function PD(e,t){var n;return me(t,function(r){null!=e[r]&&"auto"!==e[r]&&(n=!0)}),n}xs({type:"graphic",init:function(e,t){this._elMap=ut()},render:function(e,t,n){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,n)},_updateElements:function(e){var t=e.useElOptionsToUpdate();if(t){var n=this._elMap,r=this.group;me(t,function(o){var i=o.$action,s=o.id,l=n.get(s),c=o.parentId,f=null!=c?n.get(c):r,h=o.style;"text"===o.type&&h&&(o.hv&&o.hv[1]&&(h.textVerticalAlign=h.textBaseline=null),!h.hasOwnProperty("textFill")&&h.fill&&(h.textFill=h.fill),!h.hasOwnProperty("textStroke")&&h.stroke&&(h.textStroke=h.stroke));var b,p=(b=Fn({},b=o),me(["id","parentId","$action","hv","bounding"].concat(Mv),function(S){delete b[S]}),b);i&&"merge"!==i?"replace"===i?(jm(l,n),sA(s,f,p,n)):"remove"===i&&jm(l,n):l?l.attr(p):sA(s,f,p,n);var y=n.get(s);y&&(y.__ecGraphicWidthOption=o.width,y.__ecGraphicHeightOption=o.height,function(b,S){var M=b.eventData;b.silent||b.ignore||M||(M=b.eventData={componentType:"graphic",componentIndex:S.componentIndex,name:b.name}),M&&(M.info=b.info)}(y,e))})}},_relocate:function(e,t){for(var n=e.option.elements,r=this.group,o=this._elMap,i=t.getWidth(),s=t.getHeight(),l=0;l<n.length;l++){var c=n[l];if((h=o.get(c.id))&&h.isGroup){var f=(p=h.parent)===r;h.__ecGraphicWidth=Pn(h.__ecGraphicWidthOption,f?i:p.__ecGraphicWidth)||0,h.__ecGraphicHeight=Pn(h.__ecGraphicHeightOption,f?s:p.__ecGraphicHeight)||0}}for(l=n.length-1;0<=l;l--){var h,p;(h=o.get((c=n[l]).id))&&lp(h,c,(p=h.parent)===r?{width:i,height:s}:{width:p.__ecGraphicWidth,height:p.__ecGraphicHeight},null,{hv:c.hv,boundingMode:c.bounding})}},_clear:function(){var e=this._elMap;e.each(function(t){jm(t,e)}),this._elMap=ut()},dispose:function(){this._clear()}});var uA={};function TS(e,t){uA[e]=t}function iT(e){return uA[e]}var RI=Au({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){RI.superApply(this,"optionUpdated",arguments),me(this.option.feature,function(e,t){var n=iT(t);n&&Sn(e,n.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}});function lA(e,t){var n=bh(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),new ei({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1})}xs({type:"toolbox",render:function(e,t,n,r){var h,p,y,b,S,M,k,o=this.group;if(o.removeAll(),e.get("show")){var i=+e.get("itemSize"),s=e.get("feature")||{},l=this._features||(this._features={}),c=[];me(s,function(h,p){c.push(p)}),new jf(this._featureNames||[],c).add(f).update(f).remove(ar(f,null)).execute(),this._featureNames=c,h=o,y=n,b=(p=e).getBoxLayoutParams(),S=p.get("padding"),k=No(b,M={width:y.getWidth(),height:y.getHeight()},S),Lf(p.get("orient"),h,p.get("itemGap"),k.width,k.height),lp(h,b,M,S),o.add(lA(o.getBoundingRect(),e)),o.eachChild(function(h){var p=h.__title,y=h.hoverStyle;if(y&&p){var b=Qi(p,Di(y)),S=h.position[0]+o.position[0],M=!1;h.position[1]+o.position[1]+i+b.height>n.getHeight()&&(y.textPosition="top",M=!0);var k=M?-5-b.height:i+8;S+b.width/2>n.getWidth()?(y.textPosition=["100%",k],y.textAlign="right"):S-b.width/2<0&&(y.textPosition=[0,k],y.textAlign="left")}})}function f(h,p){var y,b=c[h],S=c[p],M=s[b],k=new $o(M,e,e.ecModel);if(r&&null!=r.newTitle&&r.featureName===b&&(M.title=r.newTitle),b&&!S){if(0===b.indexOf("my"))y={model:k,onclick:k.option.onclick,featureName:b};else{var O=iT(b);if(!O)return;y=new O(k,t,n)}l[b]=y}else{if(!(y=l[S]))return;y.model=k,y.ecModel=t,y.api=n}b||!S?k.get("show")&&!y.unusable?(function(P,R,F){var G=P.getModel("iconStyle"),X=P.getModel("emphasis.iconStyle"),Y=R.getIcons?R.getIcons():P.get("icon"),Q=P.get("title")||{};if("string"==typeof Y){var ne=Y,le=Q;Q={},(Y={})[F]=ne,Q[F]=le}var ce=P.iconPaths={};me(Y,function(ye,xe){var Te=ig(ye,{},{x:-i/2,y:-i/2,width:i,height:i});Te.setStyle(G.getItemStyle()),Te.hoverStyle=X.getItemStyle(),Te.setStyle({text:Q[xe],textAlign:X.get("textAlign"),textBorderRadius:X.get("textBorderRadius"),textPadding:X.get("textPadding"),textFill:null});var Ee=e.getModel("tooltip");Ee&&Ee.get("show")&&Te.attr("tooltip",Fn({content:Q[xe],formatter:Ee.get("formatter",!0)||function(){return Q[xe]},formatterParams:{componentType:"toolbox",name:xe,title:Q[xe],$vars:["name","title"]},position:Ee.get("position",!0)||"bottom"},Ee.option)),ya(Te),e.get("showTitle")&&(Te.__title=Q[xe],Te.on("mouseover",function(){var Ve=X.getItemStyle(),Be="vertical"===e.get("orient")?null==e.get("right")?"right":"left":null==e.get("bottom")?"bottom":"top";Te.setStyle({textFill:X.get("textFill")||Ve.fill||Ve.stroke||"#000",textBackgroundColor:X.get("textBackgroundColor"),textPosition:X.get("textPosition")||Be})}).on("mouseout",function(){Te.setStyle({textFill:null,textBackgroundColor:null})})),Te.trigger(P.get("iconStatus."+xe)||"normal"),o.add(Te),Te.on("click",Nn(R.onclick,R,t,n,xe)),ce[xe]=Te})}(k,y,b),k.setIconStatus=function(P,R){var F=this.option,G=this.iconPaths;F.iconStatus=F.iconStatus||{},F.iconStatus[P]=R,G[P]&&G[P].trigger(R)},y.render&&y.render(k,t,n,r)):y.remove&&y.remove(t,n):y.dispose&&y.dispose(t,n)}},updateView:function(e,t,n,r){me(this._features,function(o){o.updateView&&o.updateView(o.model,t,n,r)})},remove:function(e,t){me(this._features,function(n){n.remove&&n.remove(e,t)}),this.group.removeAll()},dispose:function(e,t){me(this._features,function(n){n.dispose&&n.dispose(e,t)})}});var t1=qc.toolbox.saveAsImage;function aT(e){this.model=e}aT.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t1.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:t1.lang.slice()},aT.prototype.unusable=!Cr.canvasSupported,aT.prototype.onclick=function(e,t){var n=this.model,r=n.get("name")||e.get("title.0.text")||"echarts",o="svg"===t.getZr().painter.getType()?"svg":n.get("type",!0)||"png",i=t.getConnectedDataURL({type:o,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!=typeof MouseEvent||Cr.browser.ie||Cr.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var s=atob(i.split(",")[1]),l=s.length,c=new Uint8Array(l);l--;)c[l]=s.charCodeAt(l);var f=new Blob([c]);window.navigator.msSaveOrOpenBlob(f,r+"."+o)}else{var h=n.get("lang"),p='<body style="margin:0;"><img src="'+i+'" style="max-width:100%;" title="'+(h&&h[0]||"")+'" /></body>';window.open().document.write(p)}else{var y=document.createElement("a");y.download=r+"."+o,y.target="_blank",y.href=i;var b=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});y.dispatchEvent(b)}},TS("saveAsImage",aT);var sT=qc.toolbox.magicType,DS="__ec_magicType_stack__";function uT(e){this.model=e}uT.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:Gn(sT.title),option:{},seriesIndex:{}};var cA=uT.prototype;cA.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return me(e.get("type"),function(r){t[r]&&(n[r]=t[r])}),n};var dA={line:function(e,t,n,r){if("bar"===e)return Sn({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get("option.line")||{},!0)},bar:function(e,t,n,r){if("line"===e)return Sn({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get("option.bar")||{},!0)},stack:function(e,t,n,r){var o=n.get("stack")===DS;if("line"===e||"bar"===e)return r.setIconStatus("stack",o?"normal":"emphasis"),Sn({id:t,stack:o?"":DS},r.get("option.stack")||{},!0)}},RD=[["line","bar"],["stack"]];cA.onclick=function(e,t,n){var r=this.model,o=r.get("seriesIndex."+n);if(dA[n]){var i,s={series:[]};me(RD,function(l){0<=dn(l,n)&&me(l,function(c){r.setIconStatus(c,"normal")})}),r.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==o?null:{seriesIndex:o}},function(l){var h=dA[n](l.subType,l.id,l,r);h&&(un(h,l.option),s.series.push(h));var p=l.coordinateSystem;if(p&&"cartesian2d"===p.type&&("line"===n||"bar"===n)){var y=p.getAxesByScale("ordinal")[0];if(y){var b=y.dim+"Axis",S=e.queryComponents({mainType:b,index:l.get(name+"Index"),id:l.get(name+"Id")})[0].componentIndex;s[b]=s[b]||[];for(var M=0;M<=S;M++)s[b][S]=s[b][S]||{};s[b][S].boundaryGap="bar"===n}}}),"stack"===n&&(i=s.series&&s.series[0]&&s.series[0].stack===DS?Sn({stack:sT.title.tiled},sT.title):Gn(sT.title)),t.dispatchAction({type:"changeMagicType",currentType:n,newOption:s,newTitle:i,featureName:"magicType"})}},jr({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)}),TS("magicType",uT);var fA=qc.toolbox.dataView,lT=new Array(60).join("-");function cT(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var ND=new RegExp("[\t]+","g");function Ea(e){this._dom=null,this.model=e}Ea.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:Gn(fA.title),lang:Gn(fA.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},Ea.prototype.onclick=function(e,t){var n=t.getDom(),r=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",o.style.backgroundColor=r.get("backgroundColor")||"#fff";var i=document.createElement("h4"),s=r.get("lang")||[];i.innerHTML=s[0]||r.get("title"),i.style.cssText="margin: 10px 20px;",i.style.color=r.get("textColor");var l=document.createElement("div"),c=document.createElement("textarea");l.style.cssText="display:block;width:100%;overflow:auto;";var f=r.get("optionToContent"),h=r.get("contentToOption"),p=function(e){var t=function(n){var r={},o=[],i=[];return n.eachRawSeries(function(s){var l=s.coordinateSystem;if(!l||"cartesian2d"!==l.type&&"polar"!==l.type)o.push(s);else{var c=l.getBaseAxis();if("category"===c.type){var f=c.dim+"_"+c.index;r[f]||(r[f]={categoryAxis:c,valueAxis:l.getOtherAxis(c),series:[]},i.push({axisDim:c.dim,axisIndex:c.index})),r[f].series.push(s)}else o.push(s)}}),{seriesGroupByCategoryAxis:r,other:o,meta:i}}(e);return{value:_r([function(n){var r=[];return me(n,function(o,i){var s=o.categoryAxis,l=o.valueAxis.dim,c=[" "].concat(Kt(o.series,function(S){return S.name})),f=[s.model.getCategories()];me(o.series,function(S){var M=S.getRawData();f.push(S.getRawData().mapArray(M.mapDimension(l),function(k){return k}))});for(var h=[c.join("\t")],p=0;p<f[0].length;p++){for(var y=[],b=0;b<f.length;b++)y.push(f[b][p]);h.push(y.join("\t"))}r.push(h.join("\n"))}),r.join("\n\n"+lT+"\n\n")}(t.seriesGroupByCategoryAxis),function(n){return Kt(n,function(r){var o=r.getRawData(),i=[r.name],s=[];return o.each(o.dimensions,function(){for(var l=arguments.length,f=o.getName(arguments[l-1]),h=0;h<l-1;h++)s[h]=arguments[h];i.push((f?f+"\t":"")+s.join("\t"))}),i.join("\n")}).join("\n\n"+lT+"\n\n")}(t.other)],function(n){return n.replace(/[\n\t\s]/g,"")}).join("\n\n"+lT+"\n\n"),meta:t.meta}}(e);if("function"==typeof f){var y=f(t.getOption());"string"==typeof y?l.innerHTML=y:Ao(y)&&l.appendChild(y)}else l.appendChild(c),c.readOnly=r.get("readOnly"),c.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",c.style.color=r.get("textColor"),c.style.borderColor=r.get("textareaBorderColor"),c.style.backgroundColor=r.get("textareaColor"),c.value=p.value;var b=p.meta,S=document.createElement("div");S.style.cssText="position:absolute;bottom:0;left:0;right:0;";var M="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",k=document.createElement("div"),O=document.createElement("div");M+=";background-color:"+r.get("buttonColor"),M+=";color:"+r.get("buttonTextColor");var P=this;function R(){n.removeChild(o),P._dom=null}yr(k,"click",R),yr(O,"click",function(){var F;try{F="function"==typeof h?h(l,t.getOption()):function(e,t){var n=e.split(new RegExp("\n*"+lT+"\n*","g")),r={series:[]};return me(n,function(o,i){if(function(f){if(0<=f.slice(0,f.indexOf("\n")).indexOf("\t"))return!0}(o)){var s=function(f){for(var h=f.split(/\n+/g),p=[],y=Kt(cT(h.shift()).split(ND),function(k){return{name:k,data:[]}}),b=0;b<h.length;b++){var S=cT(h[b]).split(ND);p.push(S.shift());for(var M=0;M<S.length;M++)y[M]&&(y[M].data[b]=S[M])}return{series:y,categories:p}}(o),l=t[i],c=l.axisDim+"Axis";l&&(r[c]=r[c]||[],r[c][l.axisIndex]={data:s.categories},r.series=r.series.concat(s.series))}else s=function(f){for(var h=f.split(/\n+/g),p=cT(h.shift()),y=[],b=0;b<h.length;b++){var S=cT(h[b]);if(S){var M,k=S.split(ND),O="",P=!1;M=isNaN(k[0])?(P=!0,O=k[0],k=k.slice(1),y[b]={name:O,value:[]},y[b].value):y[b]=[];for(var R=0;R<k.length;R++)M.push(+k[R]);1===M.length&&(P?y[b].value=M[0]:y[b]=M[0])}}return{name:p,data:y}}(o),r.series.push(s)}),r}(c.value,b)}catch(G){throw R(),new Error("Data view format error "+G)}F&&t.dispatchAction({type:"changeDataView",newOption:F}),R()}),k.innerHTML=s[1],O.innerHTML=s[2],O.style.cssText=M,k.style.cssText=M,r.get("readOnly")||S.appendChild(O),S.appendChild(k),o.appendChild(i),o.appendChild(l),o.appendChild(S),l.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},Ea.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},Ea.prototype.dispose=function(e,t){this.remove(e,t)},TS("dataView",Ea),jr({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var n=[];me(e.newOption.series,function(r){var s,l,o=t.getSeriesByName(r.name)[0];if(o){var i=o.get("data");n.push({name:r.name,data:(s=r.data,l=i,Kt(s,function(c,f){var h=l&&l[f];if(!xt(h)||rn(h))return c;xt(c)&&!rn(c)||(c={value:c});var p=null!=h.name&&null==c.name;return c=un(c,h),p&&delete c.name,c}))})}else n.push(Fn({type:"scatter"},r))}),t.mergeOption(un({series:n},e.newOption))});var cb=me,dT=dn,fT=ar,vk=["dataToPoint","pointToData"],hA=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function yk(e,t,n){var r=this._targetInfoList=[],o={},i=LD(t,e);cb(gA,function(s,l){n&&n.include&&!(0<=dT(n.include,l))||s(i,r,o)})}var A_=yk.prototype;function hT(e){return e[0]>e[1]&&e.reverse(),e}function LD(e,t){return Xa(e,t,{includeMainTypes:hA})}A_.setOutputRanges=function(e,t){this.matchOutputRanges(e,t,function(n,r,o){if((n.coordRanges||(n.coordRanges=[])).push(r),!n.coordRange){n.coordRange=r;var i=zD[n.brushType](0,o,r);n.__rangeOffset={offset:gT[n.brushType](i.values,n.range,[1,1]),xyMinMax:i.xyMinMax}}})},A_.matchOutputRanges=function(e,t,n){cb(e,function(r){var o=this.findTargetInfo(r,t);o&&!0!==o&&me(o.coordSyses,function(i){var s=zD[r.brushType](1,i,r.range);n(r,s.values,i,t)})},this)},A_.setInputRanges=function(e,t){cb(e,function(n){var l,c,f,h,r=this.findTargetInfo(n,t);if(n.range=n.range||[],r&&!0!==r){n.panelId=r.panelId;var o=zD[n.brushType](0,r.coordSys,n.coordRange),i=n.__rangeOffset;n.range=i?gT[n.brushType](o.values,i.offset,(l=i.xyMinMax,c=IS(o.xyMinMax),f=IS(l),h=[c[0]/f[0],c[1]/f[1]],isNaN(h[0])&&(h[0]=1),isNaN(h[1])&&(h[1]=1),h)):o.values}},this)},A_.makePanelOpts=function(e,t){return Kt(this._targetInfoList,function(n){var r=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t&&t(n),clipPath:HM(r),isTargetByCursor:O0(r,e,n.coordSysModel),getLinearBrushOtherExtent:I0(r)}})},A_.controlSeries=function(e,t,n){var r=this.findTargetInfo(e,n);return!0===r||r&&0<=dT(r.coordSyses,t.coordinateSystem)},A_.findTargetInfo=function(e,t){for(var n=this._targetInfoList,r=LD(t,e),o=0;o<n.length;o++){var i=n[o],s=e.panelId;if(s){if(i.panelId===s)return i}else for(o=0;o<BD.length;o++)if(BD[o](r,i))return i}return!0};var gA={grid:function(e,t){var n=e.xAxisModels,r=e.yAxisModels,o=e.gridModels,i=ut(),s={},l={};(n||r||o)&&(cb(n,function(c){var f=c.axis.grid.model;i.set(f.id,f),s[f.id]=!0}),cb(r,function(c){var f=c.axis.grid.model;i.set(f.id,f),l[f.id]=!0}),cb(o,function(c){i.set(c.id,c),s[c.id]=!0,l[c.id]=!0}),i.each(function(c){var h=[];cb(c.coordinateSystem.getCartesians(),function(p,y){(0<=dT(n,p.getAxis("x").model)||0<=dT(r,p.getAxis("y").model))&&h.push(p)}),t.push({panelId:"grid--"+c.id,gridModel:c,coordSysModel:c,coordSys:h[0],coordSyses:h,getPanelRect:mA.grid,xAxisDeclared:s[c.id],yAxisDeclared:l[c.id]})}))},geo:function(e,t){cb(e.geoModels,function(n){var r=n.coordinateSystem;t.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:r,coordSyses:[r],getPanelRect:mA.geo})})}},BD=[function(e,t){var n=e.xAxisModel,r=e.yAxisModel,o=e.gridModel;return!o&&n&&(o=n.axis.grid.model),!o&&r&&(o=r.axis.grid.model),o&&o===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],mA={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(Ws(e)),t}},zD={lineX:fT(FD,0),lineY:fT(FD,1),rect:function(e,t,n){var r=t[vk[e]]([n[0][0],n[1][0]]),o=t[vk[e]]([n[0][1],n[1][1]]),i=[hT([r[0],o[0]]),hT([r[1],o[1]])];return{values:i,xyMinMax:i}},polygon:function(e,t,n){var r=[[1/0,-1/0],[1/0,-1/0]];return{values:Kt(n,function(o){var i=t[vk[e]](o);return r[0][0]=Math.min(r[0][0],i[0]),r[1][0]=Math.min(r[1][0],i[1]),r[0][1]=Math.max(r[0][1],i[0]),r[1][1]=Math.max(r[1][1],i[1]),i}),xyMinMax:r}}};function FD(e,t,n,r){var o=n.getAxis(["x","y"][e]),i=hT(Kt([0,1],function(l){return t?o.coordToData(o.toLocalCoord(r[l])):o.toGlobalCoord(o.dataToCoord(r[l]))})),s=[];return s[e]=i,s[1-e]=[NaN,NaN],{values:i,xyMinMax:s}}var gT={lineX:fT(VD,0),lineY:fT(VD,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return Kt(e,function(r,o){return[r[0]-n[0]*t[o][0],r[1]-n[1]*t[o][1]]})}};function VD(e,t,n,r){return[t[0]-r[e]*n[0],t[1]-r[e]*n[1]]}function IS(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var HD=me,bk="\0_ec_hist_store";function xk(e){return e[bk]||(e[bk]=[{}])}Go.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var pT,_k,WD,GD,mT=["cartesian2d","polar","singleAxis"],jD=(_k=["axisIndex","axis","index","id"],WD=Kt(pT=(pT=["x","y","z","radius","angle","single"]).slice(),up),GD=Kt(_k=(_k||[]).slice(),up),function(e,t){me(pT,function(n,r){for(var o={name:n,capital:WD[r]},i=0;i<_k.length;i++)o[_k[i]]=n+GD[i];e.call(t,o)})});function vT(e,t,n,r){this._dimName=e,this._axisIndex=t,this.ecModel=r,this._dataZoomModel=n}var n1=me,pA=sg;function yT(e,t){var n=e.getAxisModel(),r=e._percentWindow,o=e._valueWindow;if(r){var i=_v(o,[0,500]);i=Math.min(i,20);var s=t||0===r[0]&&100===r[1];n.setRange(s?null:+o[0].toFixed(i),s?null:+o[1].toFixed(i))}}vT.prototype={constructor:vT,hostedBy:function(e){return this._dataZoomModel===e},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var e=[],t=this.ecModel;return t.eachSeries(function(n){if(function(i){return 0<=dn(mT,i)}(n.get("coordinateSystem"))){var r=this._dimName,o=t.queryComponents({mainType:r+"Axis",index:n.get(r+"AxisIndex"),id:n.get(r+"AxisId")})[0];this._axisIndex===(o&&o.componentIndex)&&e.push(n)}},this),e},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var e,t,n,r=this._dimName,o=this.ecModel,i=this.getAxisModel();return e="x"===r||"y"===r?(t="gridIndex","x"===r?"y":"x"):(t="polarIndex","angle"===r?"radius":"angle"),o.eachComponent(e+"Axis",function(s){(s.get(t)||0)===(i.get(t)||0)&&(n=s)}),n},getMinMaxSpan:function(){return Gn(this._minMaxSpan)},calculateDataWindow:function(e){var t,n=this._dataExtent,r=this.getAxisModel().axis.scale,o=this._dataZoomModel.getRangePropMode(),i=[0,100],s=[],l=[];n1(["start","end"],function(h,p){var y=e[h],b=e[h+"Value"];"percent"===o[p]?(null==y&&(y=i[p]),b=r.parse(yi(y,i,n))):(t=!0,y=yi(b=null==b?n[p]:r.parse(b),n,i)),l[p]=b,s[p]=y}),pA(l),pA(s);var c=this._minMaxSpan;function f(h,p,y,b,S){var M=S?"Span":"ValueSpan";M0(0,h,y,"all",c["min"+M],c["max"+M]);for(var k=0;k<2;k++)p[k]=yi(h[k],y,b,!0),S&&(p[k]=r.parse(p[k]))}return t?f(l,s,n,i,!1):f(s,l,i,n,!0),{valueWindow:l,percentWindow:s}},reset:function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(r,o,i){var s=[1/0,-1/0];return n1(i,function(l){var c=l.getData();c&&n1(c.mapDimension(o,!0),function(f){var h=c.getApproximateExtent(f);h[0]<s[0]&&(s[0]=h[0]),h[1]>s[1]&&(s[1]=h[1])})}),s[1]<s[0]&&(s=[NaN,NaN]),function(l,c){var f=l.getAxisModel(),h=f.getMin(!0),p="category"===f.get("type"),y=p&&f.getCategories().length;null!=h&&"dataMin"!==h&&"function"!=typeof h?c[0]=h:p&&(c[0]=0<y?0:NaN);var b=f.getMax(!0);null!=b&&"dataMax"!==b&&"function"!=typeof b?c[1]=b:p&&(c[1]=0<y?y-1:NaN),f.get("scale",!0)||(0<c[0]&&(c[0]=0),c[1]<0&&(c[1]=0))}(r,s),s}(this,this._dimName,t),function(r){var o=r._minMaxSpan={},i=r._dataZoomModel,s=r._dataExtent;n1(["min","max"],function(l){var c=i.get(l+"Span"),f=i.get(l+"ValueSpan");null!=f&&(f=r.getAxisModel().axis.scale.parse(f)),null!=f?c=yi(s[0]+f,s,[0,100],!0):null!=c&&(f=yi(c,[0,100],s,!0)-s[0]),o[l+"Span"]=c,o[l+"ValueSpan"]=f})}(this);var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,yT(this)}},restore:function(e){e===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,yT(this,!0))},filterData:function(e,t){if(e===this._dataZoomModel){var n=this._dimName,r=this.getTargetSeriesModels(),o=e.get("filterMode"),i=this._valueWindow;"none"!==o&&n1(r,function(s){var l=s.getData(),c=l.mapDimension(n,!0);c.length&&("weakFilter"===o?l.filterSelf(function(f){for(var h,p,y,b=0;b<c.length;b++){var S=l.get(c[b],f),M=!isNaN(S),k=S<i[0],O=S>i[1];if(M&&!k&&!O)return!0;M&&(y=!0),k&&(h=!0),O&&(p=!0)}return y&&h&&p}):n1(c,function(f){if("empty"===o)s.setData(l=l.map(f,function(p){return(y=p)>=i[0]&&y<=i[1]?p:NaN;var y}));else{var h={};h[f]=i,l.selectRange(h)}}),n1(c,function(f){l.setApproximateExtent(i,f)}))})}}};var I_=me,O_=jD,qD=Au({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(e,t,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var r=wk(e);this.settledOption=r,this.mergeDefaultAndTheme(e,n),this.doInit(r)},mergeOption:function(e){var t=wk(e);Sn(this.option,e,!0),Sn(this.settledOption,t,!0),this.doInit(t)},doInit:function(e){var t=this.option;Cr.canvasSupported||(t.realtime=!1),this._setDefaultThrottle(e),bT(this,e);var n=this.settledOption;I_([["start","startValue"],["end","endValue"]],function(r,o){"value"===this._rangePropMode[o]&&(t[r[0]]=n[r[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var e=this._axisProxies;this.eachTargetAxis(function(t,n,r,o){var i=this.dependentModels[t.axis][n],s=i.__dzAxisProxy||(i.__dzAxisProxy=new vT(t.name,n,this,o));e[t.name+"_"+n]=s},this)},_resetTarget:function(){var e=this.option,t=this._judgeAutoMode();O_(function(n){var r=n.axisIndex;e[r]=Js(e[r])},this),"axisIndex"===t?this._autoSetAxisIndex():"orient"===t&&this._autoSetOrient()},_judgeAutoMode:function(){var e=this.option,t=!1;O_(function(r){null!=e[r.axisIndex]&&(t=!0)},this);var n=e.orient;return null==n&&t?"orient":t?void 0:(null==n&&(e.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var e=!0,t=this.get("orient",!0),n=this.option,r=this.dependentModels;if(e){var o="vertical"===t?"y":"x";r[o+"Axis"].length?(n[o+"AxisIndex"]=[0],e=!1):I_(r.singleAxis,function(i){e&&i.get("orient",!0)===t&&(n.singleAxisIndex=[i.componentIndex],e=!1)})}e&&O_(function(i){if(e){var s=[],l=this.dependentModels[i.axis];if(l.length&&!s.length)for(var c=0,f=l.length;c<f;c++)"category"===l[c].get("type")&&s.push(c);(n[i.axisIndex]=s).length&&(e=!1)}},this),e&&this.ecModel.eachSeries(function(i){this._isSeriesHasAllAxesTypeOf(i,"value")&&O_(function(s){var l=n[s.axisIndex],c=i.get(s.axisIndex),f=i.get(s.axisId);dn(l,c=i.ecModel.queryComponents({mainType:s.axis,index:c,id:f})[0].componentIndex)<0&&l.push(c)})},this)},_autoSetOrient:function(){var e;this.eachTargetAxis(function(t){e=e||t.name},this),this.option.orient="y"===e?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(e,t){var n=!0;return O_(function(r){var o=e.get(r.axisIndex),i=this.dependentModels[r.axis][o];i&&i.get("type")===t||(n=!1)},this),n},_setDefaultThrottle:function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&0<t.animationDurationUpdate?100:20}},getFirstTargetAxisModel:function(){var e;return O_(function(t){if(null==e){var n=this.get(t.axisIndex);n.length&&(e=this.dependentModels[t.axis][n[0]])}},this),e},eachTargetAxis:function(e,t){var n=this.ecModel;O_(function(r){I_(this.get(r.axisIndex),function(o){e.call(t,r,o,this,n)},this)},this)},getAxisProxy:function(e,t){return this._axisProxies[e+"_"+t]},getAxisModel:function(e,t){var n=this.getAxisProxy(e,t);return n&&n.getAxisModel()},setRawRange:function(e){var t=this.option,n=this.settledOption;I_([["start","startValue"],["end","endValue"]],function(r){null==e[r[0]]&&null==e[r[1]]||(t[r[0]]=n[r[0]]=e[r[0]],t[r[1]]=n[r[1]]=e[r[1]])},this),bT(this,e)},setCalculatedRange:function(e){var t=this.option;I_(["start","startValue","end","endValue"],function(n){t[n]=e[n]})},getPercentRange:function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},getValueRange:function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(e){if(e)return e.__dzAxisProxy;var t=this._axisProxies;for(var n in t)if(t.hasOwnProperty(n)&&t[n].hostedBy(this))return t[n];for(var n in t)if(t.hasOwnProperty(n)&&!t[n].hostedBy(this))return t[n]},getRangePropMode:function(){return this._rangePropMode.slice()}});function wk(e){var t={};return I_(["start","end","startValue","endValue","throttle"],function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}function bT(e,t){var n=e._rangePropMode,r=e.get("rangeMode");I_([["start","startValue"],["end","endValue"]],function(o,i){var s=null!=t[o[0]],l=null!=t[o[1]];s&&!l?n[i]="percent":!s&&l?n[i]="value":r?n[i]=r[i]:s&&(n[i]="percent")})}var xT=Kr.extend({type:"dataZoom",render:function(e,t,n,r){this.dataZoomModel=e,this.ecModel=t,this.api=n},getTargetCoordInfo:function(){var t=this.ecModel,n={};return this.dataZoomModel.eachTargetAxis(function(r,o){var i=t.getComponent(r.axis,o);if(i){var s=i.getCoordSysModel();s&&function(l,c,f,h){for(var p,y=0;y<f.length;y++)if(f[y].model===l){p=f[y];break}p||f.push(p={model:l,axisModels:[],coordIndex:h}),p.axisModels.push(c)}(s,i,n[s.mainType]||(n[s.mainType]=[]),s.componentIndex)}},this),n}});qD.extend({type:"dataZoom.select"}),xT.extend({type:"dataZoom.select"}),fa({getTargetSeries:function(e){var t=ut();return e.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(r,o,i){me(i.getAxisProxy(r.name,o).getTargetSeriesModels(),function(s){t.set(s.uid,s)})})}),t},modifyOutputEnd:!0,overallReset:function(e,t){e.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(r,o,i){i.getAxisProxy(r.name,o).reset(i,t)}),n.eachTargetAxis(function(r,o,i){i.getAxisProxy(r.name,o).filterData(i,t)})}),e.eachComponent("dataZoom",function(n){var r=n.findRepresentativeAxisProxy(),o=r.getDataPercentWindow(),i=r.getDataValueWindow();n.setCalculatedRange({start:o[0],end:o[1],startValue:i[0],endValue:i[1]})})}}),jr("dataZoom",function(e,t){var n=function(e,t,n){return function(o){var i,s={nodes:[],records:{}};if(t(function(c){s.records[c.name]={}}),!o)return s;for(r(o,s);i=!1,e(l),i;);function l(c){var f,h,p;!(0<=dn(s.nodes,c))&&(f=c,h=s,p=!1,t(function(y){me(n(f,y)||[],function(b){h.records[y.name][b]&&(p=!0)})}),p)&&(r(c,s),i=!0)}return s};function r(o,i){i.nodes.push(o),t(function(s){me(n(o,s)||[],function(l){i.records[s.name][l]=!0})})}}(Nn(t.eachComponent,t,"dataZoom"),jD,function(o,i){return o.get(i.axisIndex)}),r=[];t.eachComponent({mainType:"dataZoom",query:e},function(o,i){r.push.apply(r,n(o).nodes)}),me(r,function(o,i){o.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})});var vA=me;function YD(e,t,n){(this._brushController=new nb(n.getZr())).on("brush",Nn(this._onBrush,this)).mount()}YD.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:Gn(qc.toolbox.dataZoom.title),brushStyle:{borderWidth:0,color:"rgba(0,0,0,0.2)"}};var OS=YD.prototype;OS.render=function(e,t,n,r){this.model=e,this.ecModel=t,this.api=n,function(o,i,s,l,c){var f=s._isZoomActive;l&&"takeGlobalCursor"===l.type&&(f="dataZoomSelect"===l.key&&l.dataZoomSelectActive),s._isZoomActive=f,o.setIconStatus("zoom",f?"emphasis":"normal");var h=new yk(yA(o.option),i,{include:["grid"]});s._brushController.setPanels(h.makePanelOpts(c,function(p){return p.xAxisDeclared&&!p.yAxisDeclared?"lineX":!p.xAxisDeclared&&p.yAxisDeclared?"lineY":"rect"})).enableBrush(!!f&&{brushType:"auto",brushStyle:o.getModel("brushStyle").getItemStyle()})}(e,t,this,r,n),function(o,i){o.setIconStatus("back",1<xk(i).length?"emphasis":"normal")}(e,t)},OS.onclick=function(e,t,n){BI[n].call(this)},OS.remove=function(e,t){this._brushController.unmount()},OS.dispose=function(e,t){this._brushController.dispose()};var BI={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function(e){var t=xk(e),n=t[t.length-1];1<t.length&&t.pop();var r={};return HD(n,function(o,i){for(var s=t.length-1;0<=s;s--)if(o=t[s][i]){r[i]=o;break}}),r}(this.ecModel))}};function yA(e){var t={};return me(["xAxisIndex","yAxisIndex"],function(n){t[n]=e[n],null==t[n]&&(t[n]="all"),!1!==t[n]&&"none"!==t[n]||(t[n]=[])}),t}function ZD(e){this.model=e}OS._onBrush=function(e,t){if(t.isEnd&&e.length){var n={},r=this.ecModel;this._brushController.updateCovers([]),new yk(yA(this.model.option),r,{include:["grid"]}).matchOutputRanges(e,r,function(i,s,l){if("cartesian2d"===l.type){var c=i.brushType;"rect"===c?(o("x",l,s[0]),o("y",l,s[1])):o({lineX:"x",lineY:"y"}[c],l,s)}}),function(i,s){var l=xk(i);HD(s,function(c,f){for(var h=l.length-1;0<=h&&!l[h][f];h--);if(h<0){var p=i.queryComponents({mainType:"dataZoom",subType:"select",id:f})[0];if(p){var y=p.getPercentRange();l[0][f]={dataZoomId:f,start:y[0],end:y[1]}}}}),l.push(s)}(r,n),this._dispatchZoomAction(n)}function o(i,s,l){var y,b,M,c=s.getAxis(i),f=c.model,h=(y=i,b=f,r.eachComponent({mainType:"dataZoom",subType:"select"},function(k){k.getAxisModel(y,b.componentIndex)&&(M=k)}),M),p=h.findRepresentativeAxisProxy(f).getMinMaxSpan();null==p.minValueSpan&&null==p.maxValueSpan||(l=M0(0,l.slice(),c.scale.getExtent(),0,p.minValueSpan,p.maxValueSpan)),h&&(n[h.id]={dataZoomId:h.id,startValue:l[0],endValue:l[1]})}},OS._dispatchZoomAction=function(e){var t=[];vA(e,function(n,r){t.push(Gn(n))}),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},TS("dataZoom",YD),ra(function(e){if(e){var t=e.dataZoom||(e.dataZoom=[]);rn(t)||(e.dataZoom=t=[t]);var n=e.toolbox;if(n&&(rn(n)&&(n=n[0]),n&&n.feature)){var r=n.feature.dataZoom;o("xAxis",r),o("yAxis",r)}}function o(i,s){if(s){var l=i+"Index",c=s[l];null==c||"all"===c||rn(c)||(c=!1===c||"none"===c?[]:[c]),rn(p=e[i])||(p=p?[p]:[]),vA(p,function(f,h){if(null==c||"all"===c||-1!==dn(c,h)){var p={type:"select",$fromToolbox:!0,filterMode:s.filterMode||"filter",id:"\0_ec_\0toolbox-dataZoom_"+i+h};p[l]=h,t.push(p)}})}var p}}),ZD.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:qc.toolbox.restore.title},ZD.prototype.onclick=function(e,t,n){(function(r){r[bk]=null})(e),t.dispatchAction({type:"restore",from:this.uid})},TS("restore",ZD),jr({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")}),Au({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var bA=me,_T=ug,xA=["","-webkit-","-moz-","-o-"];function $D(e,t,n,r,o){var c,h,i=t&&t.painter;if(n){var s=i&&i.getViewportRoot();s&&(c=e,h=document.body,mn(pt,s,r,o,!0)&&mn(c,h,pt[0],pt[1]))}else{e[0]=r,e[1]=o;var l=i&&i.getViewportRootOffset();l&&(e[0]+=l.offsetLeft,e[1]+=l.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function KD(e,t,n){if(Cr.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var o=this._zr=t.getZr(),i=this._appendToBody=n&&n.appendToBody;this._styleCoord=[0,0,0,0],$D(this._styleCoord,o,i,t.getWidth()/2,t.getHeight()/2),i?document.body.appendChild(r):e.appendChild(r),this._container=e,this._show=!1;var s=this;r.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!s._enterable){var c=o.handler;vr(o.painter.getViewportRoot(),l,!0),c.dispatch("mousemove",l)}},r.onmouseleave=function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1}}function E_(e,t,n,r){e[0]=n,e[1]=r,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function wT(e){var t=this._zr=e.getZr();this._styleCoord=[0,0,0,0],E_(this._styleCoord,t,e.getWidth()/2,e.getHeight()/2),this._show=!1}KD.prototype={constructor:KD,_enterable:!0,update:function(e){var t=this._container,n=t.currentStyle||document.defaultView.getComputedStyle(t),r=t.style;"absolute"!==r.position&&"absolute"!==n.position&&(r.position="relative"),e.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[3],n=this._styleCoord[2]*this._zr.getWidth(),r=t*this._zr.getHeight();this.moveTo(n,r)},show:function(e){clearTimeout(this._hideTimeout);var t=this.el,n=this._styleCoord;t.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+function(e){var s,c,t=[],n=e.get("transitionDuration"),r=e.get("backgroundColor"),o=e.getModel("textStyle"),i=e.get("padding");return n&&t.push((c="left "+(s=n)+"s "+"cubic-bezier(0.23, 1, 0.32, 1)"+",top "+s+"s cubic-bezier(0.23, 1, 0.32, 1)",Kt(xA,function(f){return f+"transition:"+c}).join(";"))),r&&(Cr.canvasSupported?t.push("background-Color:"+r):(t.push("background-Color:#"+Ui(r)),t.push("filter:alpha(opacity=70)"))),bA(["width","color","radius"],function(s){var l="border-"+s,c=_T(l),f=e.get(c);null!=f&&t.push(l+":"+f+("color"===s?"":"px"))}),t.push(function(s){var l=[],c=s.get("fontSize"),f=s.getTextColor();f&&l.push("color:"+f),l.push("font:"+s.getFont());var h=s.get("lineHeight");null==h&&(h=Math.round(3*c/2)),c&&l.push("line-height:"+h+"px");var p=s.get("textShadowColor"),y=s.get("textShadowBlur")||0,b=s.get("textShadowOffsetX")||0,S=s.get("textShadowOffsetY")||0;return y&&l.push("text-shadow:"+b+"px "+S+"px "+y+"px "+p),bA(["decoration","align"],function(M){var k=s.get(M);k&&l.push("text-"+M+":"+k)}),l.join(";")}(o)),null!=i&&t.push("padding:"+bh(i).join("px ")+"px"),t.join(";")+";"}(e)+";left:"+n[0]+"px;top:"+n[1]+"px;"+(e.get("extraCssText")||""),t.style.display=t.innerHTML?"block":"none",t.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(e){this.el.innerHTML=null==e?"":e},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el;return[e.clientWidth,e.clientHeight]},moveTo:function(e,t){var n=this._styleCoord;$D(n,this._zr,this._appendToBody,e,t);var r=this.el.style;r.left=n[0]+"px",r.top=n[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Nn(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var e=this.el.clientWidth,t=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(this.el);n&&(e+=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),t+=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:e,height:t}}},wT.prototype={constructor:wT,_enterable:!0,update:function(e){e.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[3],n=this._styleCoord[2]*this._zr.getWidth(),r=t*this._zr.getHeight();this.moveTo(n,r)},show:function(e){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(e,t,n){this.el&&this._zr.remove(this.el);for(var r={},o=e,i="{marker",s=o.indexOf(i);0<=s;){var l=o.indexOf("|}"),c=o.substr(s+i.length,l-s-i.length);r["marker"+c]=-1<c.indexOf("sub")?{textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:t[c],textOffset:[3,0]}:{textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:t[c]},s=(o=o.substr(l+1)).indexOf("{marker")}var f=n.getModel("textStyle"),h=f.get("fontSize"),p=n.get("textLineHeight");null==p&&(p=Math.round(3*h/2)),this.el=new vo({style:Ya({},f,{rich:r,text:e,textBackgroundColor:n.get("backgroundColor"),textBorderRadius:n.get("borderRadius"),textFill:n.get("textStyle.color"),textPadding:n.get("padding"),textLineHeight:p}),z:n.get("z")}),this._zr.add(this.el);var y=this;this.el.on("mouseover",function(){y._enterable&&(clearTimeout(y._hideTimeout),y._show=!0),y._inContent=!0}),this.el.on("mouseout",function(){y._enterable&&y._show&&y.hideLater(y._hideDelay),y._inContent=!1})},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el.getBoundingRect();return[e.width,e.height]},moveTo:function(e,t){if(this.el){var n=this._styleCoord;E_(n,this._zr,e,t),this.el.attr("position",[n[0],n[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Nn(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var e=this.getSize();return{width:e[0],height:e[1]}}};var Sk=Nn,ES=me,wA=Pn,zI=new ei({shape:{x:-1,y:-1,width:2,height:2}});function JD(e){for(var t=e.pop();e.length;){var n=e.pop();n&&($o.isInstance(n)&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),t=new $o(n,t,t.ecModel))}return t}function QD(e,t){return e.dispatchAction||Nn(t.dispatchAction,t)}function SA(e){return"center"===e||"middle"===e}xs({type:"tooltip",init:function(e,t){if(!Cr.node){var n,r=e.getComponent("tooltip"),o=r.get("renderMode");this._renderMode=pc(o),"html"===this._renderMode?(n=new KD(t.getDom(),t,{appendToBody:r.get("appendToBody",!0)}),this._newLine="<br/>"):(n=new wT(t),this._newLine="\n"),this._tooltipContent=n}},render:function(e,t,n){if(!Cr.node){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=e.get("alwaysShowContent");var r=this._tooltipContent;r.update(e),r.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var e=this._tooltipModel.get("triggerOn");di("itemTooltip",this._api,Sk(function(t,n,r){"none"!==e&&(0<=e.indexOf(t)?this._tryShow(n,r):"leave"===t&&this._hide(r))},this))},_keepShow:function(){var e=this._tooltipModel,t=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==e.get("triggerOn")){var r=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){n.isDisposed()||r.manuallyShowTip(e,t,n,{x:r._lastX,y:r._lastY})})}},manuallyShowTip:function(e,t,n,r){if(r.from!==this.uid&&!Cr.node){var o=QD(r,n);this._ticket="";var i=r.dataByCoordSys;if(r.tooltip&&null!=r.x&&null!=r.y){var s=zI;s.position=[r.x,r.y],s.update(),s.tooltip=r.tooltip,this._tryShow({offsetX:r.x,offsetY:r.y,target:s},o)}else if(i)this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,dataByCoordSys:r.dataByCoordSys,tooltipOption:r.tooltipOption},o);else if(null!=r.seriesIndex){if(this._manuallyAxisShowTip(e,t,n,r))return;var l=Hn(r,t),c=l.point[0],f=l.point[1];null!=c&&null!=f&&this._tryShow({offsetX:c,offsetY:f,position:r.position,target:l.el},o)}else null!=r.x&&null!=r.y&&(n.dispatchAction({type:"updateAxisPointer",x:r.x,y:r.y}),this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,target:n.getZr().findHover(r.x,r.y).target},o))}},manuallyHideTip:function(e,t,n,r){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,r.from!==this.uid&&this._hide(QD(r,n))},_manuallyAxisShowTip:function(e,t,n,r){var o=r.seriesIndex,i=r.dataIndex,s=t.getComponent("axisPointer").coordSysAxesInfo;if(null!=o&&null!=i&&null!=s){var l=t.getSeriesByIndex(o);if(l&&"axis"===(e=JD([l.getData().getItemModel(i),l,(l.coordinateSystem||{}).model,e])).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:i,position:r.position}),!0}},_tryShow:function(e,t){var n=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var r=e.dataByCoordSys;r&&r.length?this._showAxisTooltip(r,e):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(e,n,t)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(e,n,t)):(this._lastDataByCoordSys=null,this._hide(t))}},_showOrMove:function(e,t){var n=e.get("showDelay");t=Nn(t,this),clearTimeout(this._showTimout),0<n?this._showTimout=setTimeout(t,n):t()},_showAxisTooltip:function(e,t){var n=this._ecModel,o=[t.offsetX,t.offsetY],i=[],s=[],l=JD([t.tooltipOption,this._tooltipModel]),c=this._renderMode,f=this._newLine,h={};ES(e,function(y){ES(y.dataByAxis,function(b){var S=n.getComponent(b.axisDim+"Axis",b.axisIndex),M=b.value,k=[];if(S&&null!=M){var O=_S(M,S.axis,n,b.seriesDataIndices,b.valueLabelOpt);me(b.seriesDataIndices,function(R){var F=n.getSeriesByIndex(R.seriesIndex),G=R.dataIndexInside,X=F&&F.getDataParams(G);if(X.axisDim=b.axisDim,X.axisIndex=b.axisIndex,X.axisType=b.axisType,X.axisId=b.axisId,X.axisValue=pl(S.axis,M),X.axisValueLabel=O,X){s.push(X);var Y,Q=F.formatTooltip(G,!0,null,c);xt(Q)?(Y=Q.html,Sn(h,Q.markers)):Y=Q,k.push(Y)}});var P=O;i.push("html"!==c?k.join(f):(P?Wo(P)+f:"")+k.join(f))}})},this),i.reverse(),i=i.join(this._newLine+this._newLine);var p=t.position;this._showOrMove(l,function(){this._updateContentNotChangedOnAxis(e)?this._updatePosition(l,p,o[0],o[1],this._tooltipContent,s):this._showTooltipContent(l,i,s,Math.random(),o[0],o[1],p,void 0,h)})},_showSeriesItemTooltip:function(e,t,n){var o=t.seriesIndex,i=this._ecModel.getSeriesByIndex(o),s=t.dataModel||i,l=t.dataIndex,c=t.dataType,f=s.getData(c),h=JD([f.getItemModel(l),s,i&&(i.coordinateSystem||{}).model,this._tooltipModel]),p=h.get("trigger");if(null==p||"item"===p){var y,b,S=s.getDataParams(l,c),M=s.formatTooltip(l,!1,c,this._renderMode);b=xt(M)?(y=M.html,M.markers):(y=M,null);var k="item_"+s.name+"_"+l;this._showOrMove(h,function(){this._showTooltipContent(h,y,S,k,e.offsetX,e.offsetY,e.position,e.target,b)}),n({type:"showTip",dataIndexInside:l,dataIndex:f.getRawIndex(l),seriesIndex:o,from:this.uid})}},_showComponentItemTooltip:function(e,t,n){var r=t.tooltip;"string"==typeof r&&(r={content:r,formatter:r});var o=new $o(r,this._tooltipModel,this._ecModel),i=o.get("content"),s=Math.random();this._showOrMove(o,function(){this._showTooltipContent(o,i,o.get("formatterParams")||{},s,e.offsetX,e.offsetY,e.position,t)}),n({type:"showTip",from:this.uid})},_showTooltipContent:function(e,t,n,r,o,i,s,l,c){if(this._ticket="",e.get("showContent")&&e.get("show")){var f=this._tooltipContent,h=e.get("formatter");s=s||e.get("position");var p=t;if(h&&"string"==typeof h)p=Cv(h,n,!0);else if("function"==typeof h){var y=Sk(function(b,S){b===this._ticket&&(f.setContent(S,c,e),this._updatePosition(e,s,o,i,f,n,l))},this);this._ticket=r,p=h(n,r,y)}f.setContent(p,c,e),f.show(e),this._updatePosition(e,s,o,i,f,n,l)}},_updatePosition:function(e,t,n,r,o,i,s){var l=this._api.getWidth(),c=this._api.getHeight();t=t||e.get("position");var M,k,O,P,R,F,G,X,Y,Q,f=o.getSize(),h=e.get("align"),p=e.get("verticalAlign"),y=s&&s.getBoundingRect().clone();if(s&&y.applyTransform(s.transform),"function"==typeof t&&(t=t([n,r],i,o.el,y,{viewSize:[l,c],contentSize:f.slice()})),rn(t))n=wA(t[0],l),r=wA(t[1],c);else if(xt(t)){t.width=f[0],t.height=f[1];var b=No(t,{width:l,height:c});n=b.x,r=b.y,p=h=null}else if("string"==typeof t&&s)n=(S=function(M,k,O){var P=O[0],R=O[1],F=0,G=0,X=k.width,Y=k.height;switch(M){case"inside":F=k.x+X/2-P/2,G=k.y+Y/2-R/2;break;case"top":F=k.x+X/2-P/2,G=k.y-R-5;break;case"bottom":F=k.x+X/2-P/2,G=k.y+Y+5;break;case"left":F=k.x-P-5,G=k.y+Y/2-R/2;break;case"right":F=k.x+X+5,G=k.y+Y/2-R/2}return[F,G]}(t,y,f))[0],r=S[1];else{var S;n=(M=n,k=r,O=o,P=l,R=c,F=h?null:20,G=p?null:20,X=O.getOuterSize(),Y=X.width,Q=X.height,null!=F&&(P<M+Y+F?M-=Y+F:M+=F),null!=G&&(R<k+Q+G?k-=Q+G:k+=G),S=[M,k])[0],r=S[1]}h&&(n-=SA(h)?f[0]/2:"right"===h?f[0]:0),p&&(r-=SA(p)?f[1]/2:"bottom"===p?f[1]:0),e.get("confine")&&(n=(S=function(M,k,O,P,R){var F=O.getOuterSize(),G=F.width,X=F.height;return M=Math.min(M+G,P)-G,k=Math.min(k+X,R)-X,[M=Math.max(M,0),k=Math.max(k,0)]}(n,r,o,l,c))[0],r=S[1]),o.moveTo(n,r)},_updateContentNotChangedOnAxis:function(e){var t=this._lastDataByCoordSys,n=!!t&&t.length===e.length;return n&&ES(t,function(r,o){var i=r.dataByAxis||{},s=(e[o]||{}).dataByAxis||[];(n&=i.length===s.length)&&ES(i,function(l,c){var f=s[c]||{},h=l.seriesDataIndices||[],p=f.seriesDataIndices||[];(n&=l.value===f.value&&l.axisType===f.axisType&&l.axisId===f.axisId&&h.length===p.length)&&ES(h,function(y,b){var S=p[b];n&=y.seriesIndex===S.seriesIndex&&y.dataIndex===S.dataIndex})})}),this._lastDataByCoordSys=e,!!n},_hide:function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},dispose:function(e,t){Cr.node||(this._tooltipContent.dispose(),Ii("itemTooltip",t))}}),jr({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),jr({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});var CA=["rect","polygon","keep","clear"],e2=me;function t2(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function ST(e,t,n){var r={};return e2(t,function(o){var i=r[o]=function(){function s(){}return s.prototype.__hidden=s.prototype,new s}();e2(e[o],function(s,l){if(Ni.isValidType(l)){var c={type:l,visual:s};n&&n(c,o),i[l]=new Ni(c),"opacity"===l&&((c=Gn(c)).type="colorAlpha",i.__hidden.__alphaForOpacity=new Ni(c))}})}),r}function CT(e,t,n){var r;me(n,function(o){t.hasOwnProperty(o)&&t2(t[o])&&(r=!0)}),r&&me(n,function(o){t.hasOwnProperty(o)&&t2(t[o])?e[o]=Gn(t[o]):delete e[o]})}var Ck={lineX:kT(0),lineY:kT(1),rect:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])},rect:function(e,t,n){return e&&n.boundingRect.intersect(e)}},polygon:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])&&Mp(n.range,e[0],e[1])},rect:function(e,t,n){var r=n.range;if(!e||r.length<=1)return!1;var o=e.x,i=e.y,s=e.width,l=e.height,c=r[0];return!!(Mp(r,o,i)||Mp(r,o+s,i)||Mp(r,o,i+l)||Mp(r,o+s,i+l)||Vo.create(e).contain(c[0],c[1])||ag(o,i,o+s,i,r)||ag(o,i,o,i+l,r)||ag(o+s,i,o+s,i+l,r)||ag(o,i+l,o+s,i+l,r))||void 0}}};function kT(e){var t=["x","y"],n=["width","height"];return{point:function(r,o,i){if(r)return kk(r[e],i.range)},rect:function(r,o,i){if(r){var s=i.range,l=[r[t[e]],r[t[e]]+r[n[e]]];return l[1]<l[0]&&l.reverse(),kk(l[0],s)||kk(l[1],s)||kk(s[0],l)||kk(s[1],l)}}}}function kk(e,t){return t[0]<=e&&e<=t[1]}var kA=["inBrush","outOfBrush"],PS="__ecBrushSelect",MT="__ecInBrushSelectEvent",TT=Gf.VISUAL.BRUSH;function MA(e){e.eachComponent({mainType:"brush"},function(t){(t.brushTargetManager=new yk(t.option,e)).setInputRanges(t.areas,e)})}function DT(e,t){if(!e.isDisposed()){var n=e.getZr();n[MT]=!0,e.dispatchAction({type:"brushSelect",batch:t}),n[MT]=!1}}function TA(e,t,n,r){for(var o=0,i=t.length;o<i;o++){var s=t[o];if(e[s.brushType](r,n,s.selectors,s))return!0}}function DA(e){var t=e.brushSelector;if(tr(t)){var n=[];return me(Ck,function(o,i){n[i]=function(s,l,c,f){var h=l.getItemLayout(s);return o[t](h,c,f)}}),n}if(Mt(t)){var r={};return me(Ck,function(o,i){r[i]=t}),r}return t}oa(TT,function(e,t,n){e.eachComponent({mainType:"brush"},function(r){n&&"takeGlobalCursor"===n.type&&r.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})}),MA(e)}),Ti(TT,function(e,t,n){var r,o,i=[];e.eachComponent({mainType:"brush"},function(s,l){var c={brushId:s.id,brushIndex:l,brushName:s.name,areas:Gn(s.areas),selected:[]};i.push(c);var f=s.option,h=f.brushLink,p=[],y=[],b=[],S=0;l||(r=f.throttleType,o=f.throttleDelay);var M=Kt(s.areas,function(R){return F=un({boundingRect:Mk[R.brushType](R)},R),G=F.selectors={},me(Ck[F.brushType],function(X,Y){G[Y]=function(Q){return X(Q,G,F)}}),F;var F,G}),k=ST(s.option,kA,function(R){R.mappingMethod="fixed"});function O(R){return"all"===h||p[R]}function P(R){return!!R.length}rn(h)&&me(h,function(R){p[R]=1}),e.eachSeries(function(R,F){var X,Y,Q,G=b[F]=[];"parallel"===R.subType?(Y=F,S|=(Q=(X=R).coordinateSystem).hasAxisBrushed(),O(Y)&&Q.eachActiveState(X.getData(),function(ne,le){"active"===ne&&(y[le]=1)})):function(X,Y,Q){var ye,xe,ne=DA(X);if(ne&&(ye=Y,null==(xe=s.option.seriesIndex)||"all"===xe||!(rn(xe)?dn(xe,ye)<0:ye!==xe))&&(me(M,function(ce){ne[ce.brushType]&&s.brushTargetManager.controlSeries(ce,X,e)&&Q.push(ce),S|=P(Q)}),O(Y)&&P(Q))){var le=X.getData();le.each(function(ce){TA(ne,Q,le,ce)&&(y[ce]=1)})}}(R,F,G)}),e.eachSeries(function(R,F){var G={seriesId:R.id,seriesIndex:F,seriesName:R.name,dataIndex:[]};c.selected.push(G);var X=DA(R),Y=b[F],Q=R.getData(),ne=O(F)?function(le){return y[le]?(G.dataIndex.push(Q.getRawIndex(le)),"inBrush"):"outOfBrush"}:function(le){return TA(X,Y,Q,le)?(G.dataIndex.push(Q.getRawIndex(le)),"inBrush"):"outOfBrush"};(O(F)?S:P(Y))&&function(le,ce,ye,xe,Te,Ee){var Ve,Be={};function nt(wt){return ye.getItemVisual(Ve,wt)}function bt(wt,Lt){ye.setItemVisual(Ve,wt,Lt)}me(le,function(wt){var Lt=Ni.prepareVisualTypes(ce[wt]);Be[wt]=Lt}),ye.each(function(wt,Lt){var Ht=ye.getRawDataItem(Ve=wt);if(!Ht||!1!==Ht.visualMap)for(var Ln=xe.call(void 0,wt),Ft=ce[Ln],Yn=Be[Ln],or=0,Tr=Yn.length;or<Tr;or++){var Ko=Yn[or];Ft[Ko]&&Ft[Ko].applyVisual(wt,nt,bt)}})}(kA,k,Q,ne)})}),function(s,l,c,f,h){if(h){var p=s.getZr();p[MT]||(p[PS]||(p[PS]=DT),Wf(p,PS,c,l)(s,f))}}(t,r,o,i,n)});var Mk={lineX:Pt,lineY:Pt,rect:function(e){return n2(e.range)},polygon:function(e){for(var t,n=e.range,r=0,o=n.length;r<o;r++){var i=n[r];i[0]<(t=t||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(t[0][0]=i[0]),i[0]>t[0][1]&&(t[0][1]=i[0]),i[1]<t[1][0]&&(t[1][0]=i[1]),i[1]>t[1][1]&&(t[1][1]=i[1])}return t&&n2(t)}};function n2(e){return new Vo(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var FI=["#ddd"];function r2(e,t){return Sn({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new $o(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}function o2(e,t,n,r){r&&r.$from===e.id||this._brushController.setPanels(e.brushTargetManager.makePanelOpts(n)).enableBrush(e.brushOption).updateCovers(e.areas.slice())}function AT(e,t,n){this.model=e,this.ecModel=t,this.api=n}Au({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(e,t){var n=this.option;t||CT(n,e,["inBrush","outOfBrush"]);var r=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:FI},r.hasOwnProperty("liftZ")||(r.liftZ=5)},setAreas:function(e){e&&(this.areas=Kt(e,function(t){return r2(this.option,t)},this))},setBrushOption:function(e){this.brushOption=r2(this.option,e),this.brushType=this.brushOption.brushType}}),xs({type:"brush",init:function(e,t){this.ecModel=e,this.api=t,(this._brushController=new nb(t.getZr())).on("brush",Nn(this._onBrush,this)).mount()},render:function(e){return this.model=e,o2.apply(this,arguments)},updateTransform:function(e,t){return MA(t),o2.apply(this,arguments)},updateView:o2,dispose:function(){this._brushController.dispose()},_onBrush:function(e,t){var n=this.model.id;this.model.brushTargetManager.setOutputRanges(e,this.ecModel),t.isEnd&&!t.removeOnClick||this.api.dispatchAction({type:"brush",brushId:n,areas:Gn(e),$from:n}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:Gn(e),$from:n})}}),jr({type:"brush",event:"brush"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(n){n.setAreas(e.areas)})}),jr({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),jr({type:"brushEnd",event:"brushEnd",update:"none"},function(){}),AT.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:Gn(qc.toolbox.brush.title)};var Tk=AT.prototype;function i2(e){var t=e.itemStyle||(e.itemStyle={}),n=t.emphasis||(t.emphasis={}),r=e.label||e.label||{},o=r.normal||(r.normal={}),i={normal:1,emphasis:1};me(r,function(s,l){i[l]||r1(o,l)||(o[l]=s)}),n.label&&!r1(r,"emphasis")&&(r.emphasis=n.label,delete n.label)}function r1(e,t){return e.hasOwnProperty(t)}Tk.render=Tk.updateView=function(e,t,n){var r,o,i;t.eachComponent({mainType:"brush"},function(s){r=s.brushType,o=s.brushOption.brushMode||"single",i|=s.areas.length}),this._brushType=r,this._brushMode=o,me(e.get("type",!0),function(s){e.setIconStatus(s,("keep"===s?"multiple"===o:"clear"===s?i:s===r)?"emphasis":"normal")})},Tk.getIcons=function(){var e=this.model,t=e.get("icon",!0),n={};return me(e.get("type",!0),function(r){t[r]&&(n[r]=t[r])}),n},Tk.onclick=function(e,t,n){var r=this._brushType,o=this._brushMode;"clear"===n?(t.dispatchAction({type:"axisAreaSelect",intervals:[]}),t.dispatchAction({type:"brush",command:"clear",areas:[]})):t.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?r:r!==n&&n,brushMode:"keep"===n?"multiple"===o?"single":"multiple":o}})},TS("brush",AT),ra(function(e,t){var c,f,n=e&&e.brush;if(rn(n)||(n=n?[n]:[]),n.length){var r=[];me(n,function(c){var f=c.hasOwnProperty("toolbox")?c.toolbox:[];f instanceof Array&&(r=r.concat(f))});var o=e&&e.toolbox;rn(o)&&(o=o[0]),o||(e.toolbox=[o={feature:{}}]);var i=o.feature||(o.feature={}),s=i.brush||(i.brush={}),l=s.type||(s.type=[]);l.push.apply(l,r),f={},me(c=l,function(h){f[h]=1}),c.length=0,me(f,function(h,p){c.push(p)}),t&&!l.length&&l.push.apply(l,CA)}}),Au({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),xs({type:"title",render:function(e,t,n){if(this.group.removeAll(),e.get("show")){var r=this.group,o=e.getModel("textStyle"),i=e.getModel("subtextStyle"),s=e.get("textAlign"),l=Dr(e.get("textBaseline"),e.get("textVerticalAlign")),c=new vo({style:Ya({},o,{text:e.get("text"),textFill:o.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=e.get("subtext"),p=new vo({style:Ya({},i,{text:h,textFill:i.getTextColor(),y:f.height+e.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),y=e.get("link"),b=e.get("sublink"),S=e.get("triggerEvent",!0);c.silent=!y&&!S,p.silent=!b&&!S,y&&c.on("click",function(){su(y,"_"+e.get("target"))}),b&&p.on("click",function(){su(b,"_"+e.get("subtarget"))}),c.eventData=p.eventData=S?{componentType:"title",componentIndex:e.componentIndex}:null,r.add(c),h&&r.add(p);var M=r.getBoundingRect(),k=e.getBoxLayoutParams();k.width=M.width,k.height=M.height;var O=No(k,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));s||("middle"===(s=e.get("left")||e.get("right"))&&(s="center"),"right"===s?O.x+=O.width:"center"===s&&(O.x+=O.width/2)),l||("center"===(l=e.get("top")||e.get("bottom"))&&(l="middle"),"bottom"===l?O.y+=O.height:"middle"===l&&(O.y+=O.height/2),l=l||"top"),r.attr("position",[O.x,O.y]);var P={textAlign:s,textVerticalAlign:l};c.setStyle(P),p.setStyle(P),M=r.getBoundingRect();var R=O.margin,F=e.getItemStyle(["color","opacity"]);F.fill=e.get("backgroundColor");var G=new ei({shape:{x:M.x-R[3],y:M.y-R[0],width:M.width+R[1]+R[3],height:M.height+R[0]+R[2],r:e.get("borderRadius")},style:F,subPixelOptimize:!0,silent:!0});r.add(G)}}}),Go.registerSubTypeDefaulter("timeline",function(){return"slider"}),jr({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t){var n=t.getComponent("timeline");return n&&null!=e.currentIndex&&(n.setCurrentIndex(e.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),t.resetOption("timeline"),un({currentIndex:n.option.currentIndex},e)}),jr({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var n=t.getComponent("timeline");n&&null!=e.playState&&n.setPlayState(e.playState)});var a2=Go.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(e,t,n){this.mergeDefaultAndTheme(e,n),this._initData()},mergeOption:function(e){a2.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(e){null==e&&(e=this.option.currentIndex);var t=this._data.count();this.option.loop?e=(e%t+t)%t:(t<=e&&(e=t-1),e<0&&(e=0)),this.option.currentIndex=e},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(e){this.option.autoPlay=!!e},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var e=this.option,t=e.data||[],n=e.axisType,r=this._names=[];if("category"===n){var o=[];me(t,function(s,l){var c,f=oh(s);xt(s)?(c=Gn(s)).value=l:c=l,o.push(c),tr(f)||null!=f&&!isNaN(f)||(f=""),r.push(f+"")}),t=o}(this._data=new ml([{name:"value",type:{category:"ordinal",time:"time"}[n]||"number"}],this)).initData(t,r)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});function IT(e,t,n,r){cu.call(this,e,t,n),this.type=r||"value",this.model=null}_e(a2.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),mm);var OT=Kr.extend({type:"timeline"});IT.prototype={constructor:IT,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},Rn(IT,cu);var nv=Nn,rv=me,RS=Math.PI;function P_(e,t,n,r,o,i){var s=t.get("color");o?(o.setColor(s),n.add(o),i&&i.onUpdate(o)):((o=Zc(e.get("symbol"),-1,-1,2,2,s)).setStyle("strokeNoScale",!0),n.add(o),i&&i.onCreate(o));var l=t.getItemStyle(["color","symbol","symbolSize"]);o.setStyle(l),r=Sn({rectHover:!0,z2:100},r,!0);var c=e.get("symbolSize");(c=c instanceof Array?c.slice():[+c,+c])[0]/=2,c[1]/=2,r.scale=c;var f=e.get("symbolOffset");if(f){var h=r.position=r.position||[0,0];h[0]+=Pn(f[0],c[0]),h[1]+=Pn(f[1],c[1])}var p=e.get("symbolRotate");return r.rotation=(p||0)*Math.PI/180||0,o.attr(r),o.updateTransform(),o}function s2(e,t,n,r,o){if(!e.dragging){var i=r.getModel("checkpointStyle"),s=n.dataToCoord(r.getData().get(["value"],t));o||!i.get("animation",!0)?e.attr({position:[s,0]}):(e.stopAnimation(!0),e.animateTo({position:[s,0]},i.get("animationDuration",!0),i.get("animationEasing",!0)))}}OT.extend({type:"timeline.slider",init:function(e,t){this.api=t},render:function(e,t,n,r){if(this.model=e,this.api=n,this.ecModel=t,this.group.removeAll(),e.get("show",!0)){var o=this._layout(e,n),i=this._createGroup("mainGroup"),s=this._createGroup("labelGroup"),l=this._axis=this._createAxis(o,e);e.formatTooltip=function(c){return Wo(l.scale.getLabel(c))},rv(["AxisLine","AxisTick","Control","CurrentPointer"],function(c){this["_render"+c](o,i,l,e)},this),this._renderAxisLabel(o,s,l,e),this._position(o,e)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(e,t){var ne,le,n=e.get("label.position"),r=e.get("orient"),o=(le=t,No((ne=e).getBoxLayoutParams(),{width:le.getWidth(),height:le.getHeight()},ne.get("padding")));null==n||"auto"===n?n="horizontal"===r?o.y+o.height/2<t.getHeight()/2?"-":"+":o.x+o.width/2<t.getWidth()/2?"+":"-":isNaN(n)&&(n={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[r][n]);var i,s,l,c,f={horizontal:"center",vertical:0<=n||"+"===n?"left":"right"},h={horizontal:0<=n||"+"===n?"top":"bottom",vertical:"middle"},p={horizontal:0,vertical:RS/2},y="vertical"===r?o.height:o.width,b=e.getModel("controlStyle"),S=b.get("show",!0),M=S?b.get("itemSize"):0,k=S?b.get("itemGap"):0,O=M+k,P=e.get("label.rotate")||0;P=P*RS/180;var R=b.get("position",!0),F=S&&b.get("showPlayBtn",!0),G=S&&b.get("showPrevBtn",!0),Y=0,Q=y;return"left"===R||"bottom"===R?(F&&(i=[0,0],Y+=O),G&&(s=[Y,0],Y+=O)):(F&&(i=[Q-M,0],Q-=O),G&&(s=[0,0],Y+=O)),S&&b.get("showNextBtn",!0)&&(l=[Q-M,0],Q-=O),c=[Y,Q],e.get("inverse")&&c.reverse(),{viewRect:o,mainLength:y,orient:r,rotation:p[r],labelRotation:P,labelPosOpt:n,labelAlign:e.get("label.align")||f[r],labelBaseline:e.get("label.verticalAlign")||e.get("label.baseline")||h[r],playPosition:i,prevBtnPosition:s,nextBtnPosition:l,axisExtent:c,controlSize:M,controlGap:k}},_position:function(e,t){var n=this._mainGroup,r=this._labelGroup,o=e.viewRect;if("vertical"===e.orient){var i=ui(),s=o.x,l=o.y+o.height;Vl(i,i,[-s,-l]),Ar(i,i,-RS/2),Vl(i,i,[s,l]),(o=o.clone()).applyTransform(i)}var c=k(o),f=k(n.getBoundingRect()),h=k(r.getBoundingRect()),p=n.position,y=r.position;y[0]=p[0]=c[0][0];var b,S=e.labelPosOpt;function M(P){var R=P.position;P.origin=[c[0][0]-R[0],c[1][0]-R[1]]}function k(P){return[[P.x,P.x+P.width],[P.y,P.y+P.height]]}function O(P,R,F,G,X){P[G]+=F[G][X]-R[G][X]}isNaN(S)?(O(p,f,c,1,b="+"===S?0:1),O(y,h,c,1,1-b)):(O(p,f,c,1,b=0<=S?0:1),y[1]=p[1]+S),n.attr("position",p),r.attr("position",y),n.rotation=r.rotation=e.rotation,M(n),M(r)},_createAxis:function(e,t){var n=t.getData(),r=t.get("axisType"),o=Sg(t,r);o.getTicks=function(){return n.mapArray(["value"],function(l){return l})};var i=n.getDataExtent("value");o.setExtent(i[0],i[1]),o.niceTicks();var s=new IT("value",o,e.axisExtent,r);return s.model=t,s},_createGroup:function(e){var t=this["_"+e]=new pn;return this.group.add(t),t},_renderAxisLine:function(e,t,n,r){var o=n.getExtent();r.get("lineStyle.show")&&t.add(new Yi({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:Fn({lineCap:"round"},r.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(e,t,n,r){var o=r.getData(),i=n.scale.getTicks();rv(i,function(s){var l=n.dataToCoord(s),c=o.getItemModel(s),f=c.getModel("itemStyle"),h=c.getModel("emphasis.itemStyle"),p={position:[l,0],onclick:nv(this._changeTimeline,this,s)},y=P_(c,f,t,p);ya(y,h.getItemStyle()),c.get("tooltip")?(y.dataIndex=s,y.dataModel=r):y.dataIndex=y.dataModel=null},this)},_renderAxisLabel:function(e,t,n,r){if(n.getLabelModel().get("show")){var o=r.getData(),i=n.getViewLabels();rv(i,function(s){var l=s.tickValue,c=o.getItemModel(l),f=c.getModel("label"),h=c.getModel("emphasis.label"),p=n.dataToCoord(s.tickValue),y=new vo({position:[p,0],rotation:e.labelRotation-e.rotation,onclick:nv(this._changeTimeline,this,l),silent:!1});Ya(y.style,f,{text:s.formattedLabel,textAlign:e.labelAlign,textVerticalAlign:e.labelBaseline}),t.add(y),ya(y,Ya({},h))},this)}},_renderControl:function(e,t,n,r){var o=e.controlSize,i=e.rotation,s=r.getModel("controlStyle").getItemStyle(),l=r.getModel("emphasis.controlStyle").getItemStyle(),c=[0,-o/2,o,o],f=r.getPlayState(),h=r.get("inverse",!0);function p(y,b,S,M){if(y){var k=(R=c,G=(F={position:y,origin:[o/2,0],rotation:M?-i:0,rectHover:!0,style:s,onclick:S}).style,X=ig(r.get(b),F||{},new Vo(R[0],R[1],R[2],R[3])),G&&X.setStyle(G),X);t.add(k),ya(k,l)}var R,F,G,X}p(e.nextBtnPosition,"controlStyle.nextIcon",nv(this._changeTimeline,this,h?"-":"+")),p(e.prevBtnPosition,"controlStyle.prevIcon",nv(this._changeTimeline,this,h?"+":"-")),p(e.playPosition,"controlStyle."+(f?"stopIcon":"playIcon"),nv(this._handlePlayClick,this,!f),!0)},_renderCurrentPointer:function(e,t,n,r){var o=r.getData(),i=r.getCurrentIndex(),s=o.getItemModel(i).getModel("checkpointStyle"),l=this;this._currentPointer=P_(s,s,this._mainGroup,{},this._currentPointer,{onCreate:function(f){f.draggable=!0,f.drift=nv(l._handlePointerDrag,l),f.ondragend=nv(l._handlePointerDragend,l),s2(f,i,n,r,!0)},onUpdate:function(f){s2(f,i,n,r)}})},_handlePlayClick:function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},_handlePointerDrag:function(e,t,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},_handlePointerDragend:function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},_pointerChangeTimeline:function(e,t){var n=this._toAxisCoord(e)[0],r=sg(this._axis.getExtent().slice());n>r[1]&&(n=r[1]),n<r[0]&&(n=r[0]),this._currentPointer.position[0]=n,this._currentPointer.dirty();var o=this._findNearestTick(n),i=this.model;(t||o!==i.getCurrentIndex()&&i.get("realtime"))&&this._changeTimeline(o)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(nv(function(){var e=this.model;this._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(e){return Ql(e,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(e){var t,n=this.model.getData(),r=1/0,o=this._axis;return n.each(["value"],function(i,s){var l=o.dataToCoord(i),c=Math.abs(l-e);c<r&&(r=c,t=s)}),t},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(e){var t=this.model.getCurrentIndex();"+"===e?e=t+1:"-"===e&&(e=t-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})}}),ra(function(e){var t=e&&e.timeline;rn(t)||(t=t?[t]:[]),me(t,function(n){n&&function(r){var o=r.type,i={number:"value",time:"time"};if(i[o]&&(r.axisType=i[o],delete r.type),i2(r),r1(r,"controlPosition")){var s=r.controlStyle||(r.controlStyle={});r1(s,"position")||(s.position=r.controlPosition),"none"!==s.position||r1(s,"show")||(s.show=!1,delete s.position),delete r.controlPosition}me(r.data||[],function(l){xt(l)&&!rn(l)&&(!r1(l,"value")&&r1(l,"name")&&(l.value=l.name),i2(l))})}(n)})});var u2=ec,Dk=Wo;function Ak(e){Qs(e,"label",["show"])}var ET=Au({type:"marker",dependencies:["series","grid","polar","geo"],init:function(e,t,n){this.mergeDefaultAndTheme(e,n),this._mergeOption(e,n,!1,!0)},isAnimationEnabled:function(){if(Cr.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},mergeOption:function(e,t){this._mergeOption(e,t,!1,!1)},_mergeOption:function(e,t,n,r){var o=this.constructor,i=this.mainType+"Model";n||t.eachSeries(function(s){var l=s.get(this.mainType,!0),c=s[i];l&&l.data?(c?c._mergeOption(l,t,!0):(r&&Ak(l),me(l.data,function(f){f instanceof Array?(Ak(f[0]),Ak(f[1])):Ak(f)}),Fn(c=new o(l,this,t),{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),c.__hostSeries=s),s[i]=c):s[i]=null},this)},formatTooltip:function(e,t,n,r){var o=this.getData(),i=this.getRawValue(e),s=rn(i)?Kt(i,u2).join(", "):u2(i),l=o.getName(e),c=Dk(this.name);return null==i&&!l||(c+="html"===r?"<br/>":"\n"),l&&(c+=Dk(l),null!=i&&(c+=" : ")),null!=i&&(c+=Dk(s)),c},getData:function(){return this._data},setData:function(e){this._data=e}});_e(ET,mm),ET.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var l2=dn;function PT(e,t,n,r,o,i){var s=[],l=Sm(t,r)?t.getCalculationInfo("stackResultDimension"):r,c=BT(t,l,e),f=t.indicesOfNearest(l,c)[0];s[o]=t.get(n,f),s[i]=t.get(l,f);var h=t.get(r,f),p=u1(t.get(r,f));return 0<=(p=Math.min(p,20))&&(s[i]=+s[i].toFixed(p)),[s,h]}var c2=ar,RT={min:c2(PT,"min"),max:c2(PT,"max"),average:c2(PT,"average")};function NS(e,t){var p,n=e.getData(),r=e.coordinateSystem;if(t&&(p=t,isNaN(parseFloat(p.x))||isNaN(parseFloat(p.y)))&&!rn(t.coord)&&r){var o=r.dimensions,i=NT(t,n,r,e);if((t=Gn(t)).type&&RT[t.type]&&i.baseAxis&&i.valueAxis){var s=l2(o,i.baseAxis.dim),l=l2(o,i.valueAxis.dim),c=RT[t.type](n,i.baseDataDim,i.valueDataDim,s,l);t.coord=c[0],t.value=c[1]}else{for(var f=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis],h=0;h<2;h++)RT[f[h]]&&(f[h]=BT(n,n.mapDimension(o[h]),f[h]));t.coord=f}}return t}function NT(e,t,n,r){var o={};return null!=e.valueIndex||null!=e.valueDim?(o.valueDataDim=null!=e.valueIndex?t.getDimension(e.valueIndex):e.valueDim,o.valueAxis=n.getAxis(function(i,s){var l=i.getData(),c=l.dimensions;s=l.getDimension(s);for(var f=0;f<c.length;f++){var h=l.getDimensionInfo(c[f]);if(h.name===s)return h.coordDim}}(r,o.valueDataDim)),o.baseAxis=n.getOtherAxis(o.valueAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim)):(o.baseAxis=r.getBaseAxis(),o.valueAxis=n.getOtherAxis(o.baseAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim),o.valueDataDim=t.mapDimension(o.valueAxis.dim)),o}function LS(e,t){return!(e&&e.containData&&t.coord&&!function(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}(t))||e.containData(t.coord)}function LT(e,t,n,r){return r<2?e.coord&&e.coord[r]:e.value}function BT(e,t,n){if("average"!==n)return"median"===n?e.getMedian(t):e.getDataExtent(t,!0)["max"===n?1:0];var r=0,o=0;return e.each(t,function(i,s){isNaN(i)||(r+=i,o++)}),r/o}var zT=xs({type:"marker",init:function(){this.markerGroupMap=ut()},render:function(e,t,n){var r=this.markerGroupMap;r.each(function(i){i.__keep=!1});var o=this.type+"Model";t.eachSeries(function(i){var s=i[o];s&&this.renderSeries(i,s,t,n)},this),r.each(function(i){i.__keep||this.group.remove(i.group)},this)},renderSeries:function(){}});function d2(e,t,n){var r=t.coordinateSystem;e.each(function(o){var i,s=e.getItemModel(o),l=Pn(s.get("x"),n.getWidth()),c=Pn(s.get("y"),n.getHeight());if(isNaN(l)||isNaN(c)){if(t.getMarkerPosition)i=t.getMarkerPosition(e.getValues(e.dimensions,o));else if(r){var f=e.get(r.dimensions[0],o),h=e.get(r.dimensions[1],o);i=r.dataToPoint([f,h])}}else i=[l,c];isNaN(l)||(i[0]=l),isNaN(c)||(i[1]=c),e.setItemLayout(o,i)})}function IA(e,t,n,r){var o=e.getData(),i=r.type;if(!rn(r)&&("min"===i||"max"===i||"average"===i||"median"===i||null!=r.xAxis||null!=r.yAxis)){var s,l;if(null!=r.yAxis||null!=r.xAxis)s=t.getAxis(null!=r.yAxis?"y":"x"),l=pe(r.yAxis,r.xAxis);else{var c=NT(r,o,t,e);s=c.valueAxis,l=BT(o,qb(o,c.valueDataDim),i)}var f="x"===s.dim?0:1,h=1-f,p=Gn(r),y={};p.type=null,p.coord=[],y.coord=[],p.coord[h]=-1/0,y.coord[h]=1/0;var b=n.get("precision");0<=b&&"number"==typeof l&&(l=+l.toFixed(Math.min(b,20))),p.coord[f]=y.coord[f]=l,r=[p,y,{type:i,valueIndex:r.valueIndex,value:l}]}return(r=[NS(e,r[0]),NS(e,r[1]),Fn({},r[2])])[2].type=r[2].type||"",Sn(r[2],r[0]),Sn(r[2],r[1]),r}function Ik(e){return!isNaN(e)&&!isFinite(e)}function OA(e,t,n,r){var o=1-e,i=r.dimensions[e];return Ik(t[o])&&Ik(n[o])&&t[e]===n[e]&&r.getAxis(i).containData(t[e])}function R_(e,t){if("cartesian2d"===e.type){var n=t[0].coord,r=t[1].coord;if(n&&r&&(OA(1,n,r,e)||OA(0,n,r,e)))return!0}return LS(e,t[0])&&LS(e,t[1])}function o1(e,t,n,r,o){var i,s=r.coordinateSystem,l=e.getItemModel(t),c=Pn(l.get("x"),o.getWidth()),f=Pn(l.get("y"),o.getHeight());if(isNaN(c)||isNaN(f)){if(r.getMarkerPosition)i=r.getMarkerPosition(e.getValues(e.dimensions,t));else{var h=s.dimensions,p=e.get(h[0],t),y=e.get(h[1],t);i=s.dataToPoint([p,y])}if("cartesian2d"===s.type){var b=s.getAxis("x"),S=s.getAxis("y");Ik(e.get((h=s.dimensions)[0],t))?i[0]=b.toGlobalCoord(b.getExtent()[n?0:1]):Ik(e.get(h[1],t))&&(i[1]=S.toGlobalCoord(S.getExtent()[n?0:1]))}isNaN(c)||(i[0]=c),isNaN(f)||(i[1]=f)}else i=[c,f];e.setItemLayout(t,i)}function VI(e,t,n,r){var o=NS(e,r[0]),i=NS(e,r[1]),s=pe,l=o.coord,c=i.coord;l[0]=s(l[0],-1/0),l[1]=s(l[1],-1/0),c[0]=s(c[0],1/0),c[1]=s(c[1],1/0);var f=xr([{},o,i]);return f.coord=[o.coord,i.coord],f.x0=o.x,f.y0=o.y,f.x1=i.x,f.y1=i.y,f}function N_(e){return!isNaN(e)&&!isFinite(e)}function EA(e,t,n){var r=1-e;return N_(t[r])&&N_(n[r])}function HI(e,t){var n=t.coord[0],r=t.coord[1];return!("cartesian2d"!==e.type||!n||!r||!EA(1,n,r)&&!EA(0,n,r))||LS(e,{coord:n,x:t.x0,y:t.y0})||LS(e,{coord:r,x:t.x1,y:t.y1})}function FT(e,t,n,r,o){var i,s=r.coordinateSystem,l=e.getItemModel(t),c=Pn(l.get(n[0]),o.getWidth()),f=Pn(l.get(n[1]),o.getHeight());if(isNaN(c)||isNaN(f)){if(r.getMarkerPosition)i=r.getMarkerPosition(e.getValues(n,t));else{var h=[b=e.get(n[0],t),S=e.get(n[1],t)];s.clampData&&s.clampData(h,h),i=s.dataToPoint(h,!0)}if("cartesian2d"===s.type){var p=s.getAxis("x"),y=s.getAxis("y"),b=e.get(n[0],t),S=e.get(n[1],t);N_(b)?i[0]=p.toGlobalCoord(p.getExtent()["x0"===n[0]?0:1]):N_(S)&&(i[1]=y.toGlobalCoord(y.getExtent()["y0"===n[1]?0:1]))}isNaN(c)||(i[0]=c),isNaN(f)||(i[1]=f)}else i=[c,f];return i}zT.extend({type:"markPoint",updateTransform:function(e,t,n){t.eachSeries(function(r){var o=r.markPointModel;o&&(d2(o.getData(),r,n),this.markerGroupMap.get(r.id).updateLayout(o))},this)},renderSeries:function(e,t,n,r){var o=e.coordinateSystem,i=e.id,s=e.getData(),l=this.markerGroupMap,c=l.get(i)||l.set(i,new Dd),f=function(h,p,y){var b;b=h?Kt(h&&h.dimensions,function(k){return un({name:k},p.getData().getDimensionInfo(p.getData().mapDimension(k))||{})}):[{name:"value",type:"float"}];var S=new ml(b,y),M=Kt(y.get("data"),ar(NS,p));return h&&(M=_r(M,ar(LS,h))),S.initData(M,null,h?LT:function(k){return k.value}),S}(o,e,t);t.setData(f),d2(t.getData(),e,r),f.each(function(h){var p=f.getItemModel(h),y=p.getShallow("symbol"),b=p.getShallow("symbolSize"),S=p.getShallow("symbolRotate"),M=Mt(y),k=Mt(b),O=Mt(S);if(M||k||O){var P=t.getRawValue(h),R=t.getDataParams(h);M&&(y=y(P,R)),k&&(b=b(P,R)),O&&(S=S(P,R))}f.setItemVisual(h,{symbol:y,symbolSize:b,symbolRotate:S,color:p.get("itemStyle.color")||s.getVisual("color")})}),c.updateData(f),this.group.add(c.group),f.eachItemGraphicEl(function(h){h.traverse(function(p){p.dataModel=t})}),c.__keep=!0,c.group.silent=t.get("silent")||e.get("silent")}}),ra(function(e){e.markPoint=e.markPoint||{}}),ET.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}}),zT.extend({type:"markLine",updateTransform:function(e,t,n){t.eachSeries(function(r){var o=r.markLineModel;if(o){var i=o.getData(),s=o.__from,l=o.__to;s.each(function(c){o1(s,c,!0,r,n),o1(l,c,!1,r,n)}),i.each(function(c){i.setItemLayout(c,[s.getItemLayout(c),l.getItemLayout(c)])}),this.markerGroupMap.get(r.id).updateLayout()}},this)},renderSeries:function(e,t,n,r){var o=e.coordinateSystem,i=e.id,s=e.getData(),l=this.markerGroupMap,c=l.get(i)||l.set(i,new Xp);this.group.add(c.group);var f=function(k,O,P){var R;R=k?Kt(k&&k.dimensions,function(ne){return un({name:ne},O.getData().getDimensionInfo(O.getData().mapDimension(ne))||{})}):[{name:"value",type:"float"}];var F=new ml(R,P),G=new ml(R,P),X=new ml([],P),Y=Kt(P.get("data"),ar(IA,O,k,P));k&&(Y=_r(Y,ar(R_,k)));var Q=k?LT:function(ne){return ne.value};return F.initData(Kt(Y,function(ne){return ne[0]}),null,Q),G.initData(Kt(Y,function(ne){return ne[1]}),null,Q),X.initData(Kt(Y,function(ne){return ne[2]})),X.hasItemOption=!0,{from:F,to:G,line:X}}(o,e,t),h=f.from,p=f.to,y=f.line;t.__from=h,t.__to=p,t.setData(y);var b=t.get("symbol"),S=t.get("symbolSize");function M(k,O,P){var R=k.getItemModel(O);o1(k,O,P,e,r),k.setItemVisual(O,{symbolRotate:R.get("symbolRotate"),symbolSize:R.get("symbolSize")||S[P?0:1],symbol:R.get("symbol",!0)||b[P?0:1],color:R.get("itemStyle.color")||s.getVisual("color")})}rn(b)||(b=[b,b]),"number"==typeof S&&(S=[S,S]),f.from.each(function(k){M(h,k,!0),M(p,k,!1)}),y.each(function(k){var O=y.getItemModel(k).get("lineStyle.color");y.setItemVisual(k,{color:O||h.getItemVisual(k,"color")}),y.setItemLayout(k,[h.getItemLayout(k),p.getItemLayout(k)]),y.setItemVisual(k,{fromSymbolRotate:h.getItemVisual(k,"symbolRotate"),fromSymbolSize:h.getItemVisual(k,"symbolSize"),fromSymbol:h.getItemVisual(k,"symbol"),toSymbolRotate:p.getItemVisual(k,"symbolRotate"),toSymbolSize:p.getItemVisual(k,"symbolSize"),toSymbol:p.getItemVisual(k,"symbol")})}),c.updateData(y),f.line.eachItemGraphicEl(function(k,O){k.traverse(function(P){P.dataModel=t})}),c.__keep=!0,c.group.silent=t.get("silent")||e.get("silent")}}),ra(function(e){e.markLine=e.markLine||{}}),ET.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var VT=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];zT.extend({type:"markArea",updateTransform:function(e,t,n){t.eachSeries(function(r){var o=r.markAreaModel;if(o){var i=o.getData();i.each(function(s){var l=Kt(VT,function(c){return FT(i,s,c,r,n)});i.setItemLayout(s,l),i.getItemGraphicEl(s).setShape("points",l)})}},this)},renderSeries:function(e,t,n,r){var o=e.coordinateSystem,i=e.id,s=e.getData(),l=this.markerGroupMap,c=l.get(i)||l.set(i,{group:new pn});this.group.add(c.group),c.__keep=!0;var f=function(h,p,y){var b,S;S=h?(b=Kt(h&&h.dimensions,function(O){var P=p.getData();return un({name:O},P.getDimensionInfo(P.mapDimension(O))||{})}),new ml(Kt(["x0","y0","x1","y1"],function(O,P){return{name:O,type:b[P%2].type}}),y)):new ml(b=[{name:"value",type:"float"}],y);var M=Kt(y.get("data"),ar(VI,p,h,y));return h&&(M=_r(M,ar(HI,h))),S.initData(M,null,h?function(O,P,R,F){return O.coord[Math.floor(F/2)][F%2]}:function(O){return O.value}),S.hasItemOption=!0,S}(o,e,t);t.setData(f),f.each(function(h){var p=Kt(VT,function(b){return FT(f,h,b,e,r)}),y=!0;me(VT,function(b){if(y){var S=f.get(b[0],h),M=f.get(b[1],h);(N_(S)||o.getAxis("x").containData(S))&&(N_(M)||o.getAxis("y").containData(M))&&(y=!1)}}),f.setItemLayout(h,{points:p,allClipped:y}),f.setItemVisual(h,{color:s.getVisual("color")})}),f.diff(c.__data).add(function(h){var p=f.getItemLayout(h);if(!p.allClipped){var y=new wo({shape:{points:p.points}});f.setItemGraphicEl(h,y),c.group.add(y)}}).update(function(h,p){var y=c.__data.getItemGraphicEl(p),b=f.getItemLayout(h);b.allClipped?y&&c.group.remove(y):(y?so(y,{shape:{points:b.points}},t,h):y=new wo({shape:{points:b.points}}),f.setItemGraphicEl(h,y),c.group.add(y))}).remove(function(h){var p=c.__data.getItemGraphicEl(h);c.group.remove(p)}).execute(),f.eachItemGraphicEl(function(h,p){var y=f.getItemModel(p),b=y.getModel("label"),S=y.getModel("emphasis.label"),M=f.getItemVisual(p,"color");h.useStyle(un(y.getModel("itemStyle").getItemStyle(),{fill:Vd(M,.4),stroke:M})),h.hoverStyle=y.getModel("emphasis.itemStyle").getItemStyle(),Cu(h.style,h.hoverStyle,b,S,{labelFetcher:t,labelDataIndex:p,defaultText:f.getName(p)||"",isRectText:!0,autoColor:M}),ya(h,{}),h.dataModel=t}),c.__data=f,c.group.silent=t.get("silent")||e.get("silent")}}),ra(function(e){e.markArea=e.markArea||{}});var HT=qc.legend.selector,WT={all:{type:"all",title:Gn(HT.all)},inverse:{type:"inverse",title:Gn(HT.inverse)}},db=Au({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},mergeOption:function(e){db.superCall(this,"mergeOption",e),this._updateSelector(e)},_updateSelector:function(e){var t=e.selector;!0===t&&(t=e.selector=["all","inverse"]),rn(t)&&me(t,function(n,r){tr(n)&&(n={type:n}),t[r]=Sn(n,WT[n.type])})},optionUpdated:function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var r=e[n].get("name");if(this.isSelected(r)){this.select(r),t=!0;break}}t||this.select(e[0].get("name"))}},_updateData:function(e){var t=[],n=[];e.eachRawSeries(function(o){var i;if(n.push(o.name),o.legendVisualProvider){var l=o.legendVisualProvider.getAllNames();e.isSeriesFiltered(o)||(n=n.concat(l)),l.length?t=t.concat(l):i=!0}else i=!0;i&&lv(o)&&t.push(o.name)}),this._availableNames=n;var r=Kt(this.get("data")||t,function(o){return"string"!=typeof o&&"number"!=typeof o||(o={name:o}),new $o(o,this,this.ecModel)},this);this._data=r},getData:function(){return this._data},select:function(e){var t=this.option.selected;"single"===this.get("selectedMode")&&me(this._data,function(n){t[n.get("name")]=!1}),t[e]=!0},unSelect:function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},toggleSelected:function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},allSelect:function(){var t=this.option.selected;me(this._data,function(n){t[n.get("name",!0)]=!0})},inverseSelect:function(){var t=this.option.selected;me(this._data,function(n){var r=n.get("name",!0);t.hasOwnProperty(r)||(t[r]=!0),t[r]=!t[r]})},isSelected:function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&0<=dn(this._availableNames,e)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}});function ov(e,t,n){var r,o={},i="toggleSelected"===e;return n.eachComponent("legend",function(s){i&&null!=r?s[r?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?s[e]():(s[e](t.name),r=s.isSelected(t.name)),me(s.getData(),function(l){var c=l.get("name");if("\n"!==c&&""!==c){var f=s.isSelected(c);o[c]=o.hasOwnProperty(c)?o[c]&&f:f}})}),"allSelect"===e||"inverseSelect"===e?{selected:o}:{name:t.name,selected:o}}jr("legendToggleSelect","legendselectchanged",ar(ov,"toggleSelected")),jr("legendAllSelect","legendselectall",ar(ov,"allSelect")),jr("legendInverseSelect","legendinverseselect",ar(ov,"inverseSelect")),jr("legendSelect","legendselected",ar(ov,"select")),jr("legendUnSelect","legendunselected",ar(ov,"unSelect"));var BS=ar,PA=me,GT=pn,f2=xs({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new GT),this.group.add(this._selectorGroup=new GT),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(e,t,n){var r=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var o=e.get("align"),i=e.get("orient");o&&"auto"!==o||(o="right"===e.get("left")&&"vertical"===i?"right":"left");var s=e.get("selector",!0),l=e.get("selectorPosition",!0);!s||l&&"auto"!==l||(l="horizontal"===i?"end":"start"),this.renderInner(o,e,t,n,s,i,l);var c=e.getBoxLayoutParams(),f={width:n.getWidth(),height:n.getHeight()},h=e.get("padding"),p=No(c,f,h),y=this.layoutInner(e,o,p,r,s,l),b=No(un({width:y.width,height:y.height},c),f,h);this.group.attr("position",[b.x-y.x,b.y-y.y]),this.group.add(this._backgroundEl=lA(y,e))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(e,t,n,r,o,i,s){var l=this.getContentGroup(),c=ut(),f=t.get("selectedMode"),h=[];n.eachRawSeries(function(p){p.get("legendHoverLink")||h.push(p.id)}),PA(t.getData(),function(p,y){var b=p.get("name");if(this.newlineDisabled||""!==b&&"\n"!==b){var S=n.getSeriesByName(b)[0];if(!c.get(b))if(S){var M=S.getData(),k=M.getVisual("color"),O=M.getVisual("borderColor");"function"==typeof k&&(k=k(S.getDataParams(0))),"function"==typeof O&&(O=O(S.getDataParams(0)));var P=M.getVisual("legendSymbol")||"roundRect",R=M.getVisual("symbol");this._createItem(b,y,p,t,P,R,e,k,O,f).on("click",BS(jT,b,null,r,h)).on("mouseover",BS(h2,S.name,null,r,h)).on("mouseout",BS(g2,S.name,null,r,h)),c.set(b,!0)}else n.eachRawSeries(function(F){if(!c.get(b)&&F.legendVisualProvider){var G=F.legendVisualProvider;if(!G.containName(b))return;var X=G.indexOfName(b),Y=G.getItemVisual(X,"color"),Q=G.getItemVisual(X,"borderColor");this._createItem(b,y,p,t,"roundRect",null,e,Y,Q,f).on("click",BS(jT,null,b,r,h)).on("mouseover",BS(h2,null,b,r,h)).on("mouseout",BS(g2,null,b,r,h)),c.set(b,!0)}},this)}else l.add(new GT({newline:!0}))},this),o&&this._createSelector(o,t,r,i,s)},_createSelector:function(e,t,n,r,o){var i=this.getSelectorGroup();PA(e,function(s){!function(l){var c=l.type,f=new vo({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===c?"legendAllSelect":"legendInverseSelect"})}});i.add(f);var h=t.getModel("selectorLabel"),p=t.getModel("emphasis.selectorLabel");Cu(f.style,f.hoverStyle={},h,p,{defaultText:l.title,isRectText:!1}),ya(f)}(s)})},_createItem:function(e,t,n,r,o,i,s,l,c,f){var h=r.get("itemWidth"),p=r.get("itemHeight"),y=r.get("inactiveColor"),b=r.get("inactiveBorderColor"),S=r.get("symbolKeepAspect"),M=r.getModel("itemStyle"),k=r.isSelected(e),O=new GT,P=n.getModel("textStyle"),R=n.get("icon"),F=n.getModel("tooltip"),G=F.parentModel,X=Zc(o=R||o,0,0,h,p,k?l:y,null==S||S);if(O.add(RA(X,o,M,c,b,k)),!R&&i&&(i!==o||"none"===i)){var Y=.8*p;"none"===i&&(i="circle");var Q=Zc(i,(h-Y)/2,(p-Y)/2,Y,Y,k?l:y,null==S||S);O.add(RA(Q,i,M,c,b,k))}var ne="left"===s?h+5:-5,le=s,ce=r.get("formatter"),ye=e;"string"==typeof ce&&ce?ye=ce.replace("{name}",null!=e?e:""):"function"==typeof ce&&(ye=ce(e)),O.add(new vo({style:Ya({},P,{text:ye,x:ne,y:p/2,textFill:k?P.getTextColor():y,textAlign:le,textVerticalAlign:"middle"})}));var xe=new ei({shape:O.getBoundingRect(),invisible:!0,tooltip:F.get("show")?Fn({content:e,formatter:G.get("formatter",!0)||function(){return e},formatterParams:{componentType:"legend",legendIndex:r.componentIndex,name:e,$vars:["name"]}},F.option):null});return O.add(xe),O.eachChild(function(Te){Te.silent=!0}),xe.silent=!f,this.getContentGroup().add(O),ya(O),O.__legendDataIndex=t,O},layoutInner:function(e,t,n,r,o,i){var s=this.getContentGroup(),l=this.getSelectorGroup();Lf(e.get("orient"),s,e.get("itemGap"),n.width,n.height);var c=s.getBoundingRect(),f=[-c.x,-c.y];if(o){Lf("horizontal",l,e.get("selectorItemGap",!0));var h=l.getBoundingRect(),p=[-h.x,-h.y],y=e.get("selectorButtonGap",!0),b=e.getOrient().index,S=0===b?"width":"height",M=0===b?"height":"width",k=0===b?"y":"x";"end"===i?p[b]+=c[S]+y:f[b]+=h[S]+y,p[1-b]+=c[M]/2-h[M]/2,l.attr("position",p),s.attr("position",f);var O={x:0,y:0};return O[S]=c[S]+y+h[S],O[M]=Math.max(c[M],h[M]),O[k]=Math.min(0,h[k]+p[1-b]),O}return s.attr("position",f),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function RA(e,t,n,r,o,i){var s;return"line"!==t&&t.indexOf("empty")<0?(s=n.getItemStyle(),e.style.stroke=r,i||(s.stroke=o)):s=n.getItemStyle(["borderWidth","borderColor"]),e.setStyle(s)}function jT(e,t,n,r){g2(e,t,n,r),n.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),h2(e,t,n,r)}function h2(e,t,n,r){var o=n.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:r})}function g2(e,t,n,r){var o=n.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:r})}fa(Gf.PROCESSOR.SERIES_FILTER,function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(n){for(var r=0;r<t.length;r++)if(!t[r].isSelected(n.name))return!1;return!0})}),Go.registerSubTypeDefaulter("legend",function(){return"plain"});var m2=db.extend({type:"legend.scroll",setScrollDataIndex:function(e){this.option.scrollDataIndex=e},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(e,t,n,r){var o=cp(e);m2.superCall(this,"init",e,t,n,r),NA(this,e,o)},mergeOption:function(e,t){m2.superCall(this,"mergeOption",e,t),NA(this,this.option,e)}});function NA(e,t,n){var r=[1,1];r[e.getOrient().index]=0,Bf(t,n,{type:"box",ignoreSize:r})}var LA=pn,fb=["width","height"],UT=["x","y"],zS=f2.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){zS.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new LA),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new LA)},resetInner:function(){zS.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(e,t,n,r,o,i,s){var l=this;zS.superCall(this,"renderInner",e,t,n,r,o,i,s);var c=this._controllerGroup,f=t.get("pageIconSize",!0);rn(f)||(f=[f,f]),p("pagePrev",0);var h=t.getModel("pageTextStyle");function p(y,b){var S=y+"DataIndex",M=ig(t.get("pageIcons",!0)[t.getOrient().name][b],{onclick:Nn(l._pageGo,l,S,t,r)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});M.name=y,c.add(M)}c.add(new vo({name:"pageText",style:{textFill:h.getTextColor(),font:h.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),p("pageNext",1)},layoutInner:function(e,t,n,r,o,i){var s=this.getSelectorGroup(),l=e.getOrient().index,c=fb[l],f=UT[l],h=fb[1-l],p=UT[1-l];o&&Lf("horizontal",s,e.get("selectorItemGap",!0));var y=e.get("selectorButtonGap",!0),b=s.getBoundingRect(),S=[-b.x,-b.y],M=Gn(n);o&&(M[c]=n[c]-b[c]-y);var k=this._layoutContentAndController(e,r,M,l,c,h,p);if(o){if("end"===i)S[l]+=k[c]+y;else{var O=b[c]+y;S[l]-=O,k[f]-=O}k[c]+=b[c]+y,S[1-l]+=k[p]+k[h]/2-b[h]/2,k[h]=Math.max(k[h],b[h]),k[p]=Math.min(k[p],b[p]+S[1-l]),s.attr("position",S)}return k},_layoutContentAndController:function(e,t,n,r,o,i,s){var l=this.getContentGroup(),c=this._containerGroup,f=this._controllerGroup;Lf(e.get("orient"),l,e.get("itemGap"),r?n.width:null,r?null:n.height),Lf("horizontal",f,e.get("pageButtonItemGap",!0));var h=l.getBoundingRect(),p=f.getBoundingRect(),y=this._showController=h[o]>n[o],b=[-h.x,-h.y];t||(b[r]=l.position[r]);var S=[0,0],M=[-p.x,-p.y],k=Dr(e.get("pageButtonGap",!0),e.get("itemGap",!0));y&&("end"===e.get("pageButtonPosition",!0)?M[r]+=n[o]-p[o]:S[r]+=p[o]+k),M[1-r]+=h[i]/2-p[i]/2,l.attr("position",b),c.attr("position",S),f.attr("position",M);var O={x:0,y:0};if(O[o]=y?n[o]:h[o],O[i]=Math.max(h[i],p[i]),O[s]=Math.min(0,p[s]+M[1-r]),c.__rectSize=n[o],y){var P={x:0,y:0};P[o]=Math.max(n[o]-p[o]-k,0),P[i]=O[i],c.setClipPath(new ei({shape:P})),c.__rectSize=P[o]}else f.eachChild(function(F){F.attr({invisible:!0,silent:!0})});var R=this._getPageInfo(e);return null!=R.pageIndex&&so(l,{position:R.contentPosition},y&&e),this._updatePageInfoView(e,R),O},_pageGo:function(e,t,n){var r=this._getPageInfo(t)[e];null!=r&&n.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:t.id})},_updatePageInfoView:function(e,t){var n=this._controllerGroup;me(["pagePrev","pageNext"],function(c){var f=null!=t[c+"DataIndex"],h=n.childOfName(c);h&&(h.setStyle("fill",e.get(f?"pageIconColor":"pageIconInactiveColor",!0)),h.cursor=f?"pointer":"default")});var r=n.childOfName("pageText"),o=e.get("pageFormatter"),i=t.pageIndex,s=null!=i?i+1:0,l=t.pageCount;r&&o&&r.setStyle("text",tr(o)?o.replace("{current}",s).replace("{total}",l):o({current:s,total:l}))},_getPageInfo:function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),r=this._containerGroup.__rectSize,o=e.getOrient().index,i=fb[o],s=UT[o],l=this._findTargetItemIndex(t),c=n.children(),f=c[l],h=c.length,p=h?1:0,y={contentPosition:n.position.slice(),pageCount:p,pageIndex:p-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return y;var b=P(f);y.contentPosition[o]=-b.s;for(var S=l+1,M=b,k=b,O=null;S<=h;++S)(!(O=P(c[S]))&&k.e>M.s+r||O&&!R(O,M.s))&&(M=k.i>M.i?k:O)&&(null==y.pageNextDataIndex&&(y.pageNextDataIndex=M.i),++y.pageCount),k=O;for(S=l-1,M=b,k=b,O=null;-1<=S;--S)(O=P(c[S]))&&R(k,O.s)||!(M.i<k.i)||(k=M,null==y.pagePrevDataIndex&&(y.pagePrevDataIndex=M.i),++y.pageCount,++y.pageIndex),M=O;return y;function P(F){if(F){var G=F.getBoundingRect(),X=G[s]+F.position[o];return{s:X,e:X+G[i],i:F.__legendDataIndex}}}function R(F,G){return F.e>=G&&F.s<=G+r}},_findTargetItemIndex:function(e){return this._showController?(this.getContentGroup().eachChild(function(r,o){var i=r.__legendDataIndex;null==n&&null!=i&&(n=o),i===e&&(t=o)}),null!=t?t:n):0;var t,n}});jr("legendScroll","legendscroll",function(e,t){var n=e.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(r){r.setScrollDataIndex(n)})}),qD.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});var qT=ei,L_=yi,Ok=sg,hb=Nn,XT=me,FS="horizontal",p2="vertical",YT=["line","bar","candlestick","scatter"],Ek=xT.extend({type:"dataZoom.slider",init:function(e,t){this._displayables={},this.api=t},render:function(e,t,n,r){Ek.superApply(this,"render",arguments),Wf(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=e.get("orient"),!1!==this.dataZoomModel.get("show")?(r&&"dataZoom"===r.type&&r.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){Ek.superApply(this,"remove",arguments),mr(this,"_dispatchZoomAction")},dispose:function(){Ek.superApply(this,"dispose",arguments),mr(this,"_dispatchZoomAction")},_buildView:function(){var e=this.group;e.removeAll(),this._resetLocation(),this._resetInterval();var t=this._displayables.barGroup=new pn;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},_resetLocation:function(){var e=this.dataZoomModel,t=this.api,n=this._findCoordRect(),r={width:t.getWidth(),height:t.getHeight()},o=this._orient===FS?{right:r.width-n.x-n.width,top:r.height-30-7,width:n.width,height:30}:{right:7,top:n.y,width:30,height:n.height},i=cp(e.option);me(["right","top","width","height"],function(l){"ph"===i[l]&&(i[l]=o[l])});var s=No(i,r,e.padding);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===p2&&this._size.reverse()},_positionGroup:function(){var e=this.group,t=this._location,n=this._orient,r=this.dataZoomModel.getFirstTargetAxisModel(),o=r&&r.get("inverse"),i=this._displayables.barGroup,s=(this._dataShadowInfo||{}).otherAxisInverse;i.attr(n!==FS||o?n===FS&&o?{scale:s?[-1,1]:[-1,-1]}:n!==p2||o?{scale:s?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:s?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:s?[1,1]:[1,-1]});var l=e.getBoundingRect([i]);e.attr("position",[t.x-l.x,t.y-l.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this._size,n=this._displayables.barGroup;n.add(new qT({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:this.dataZoomModel.get("backgroundColor")},z2:-40})),n.add(new qT({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:Nn(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(e){var t=this._size,n=e.series,r=n.getRawData(),o=n.getShadowDim?n.getShadowDim():e.otherDim;if(null!=o){var i=r.getDataExtent(o),s=.3*(i[1]-i[0]);i=[i[0]-s,i[1]+s];var l,c=[0,t[1]],h=[[t[0],0],[0,0]],p=[],y=t[0]/(r.count()-1),b=0,S=Math.round(r.count()/t[0]);r.each([o],function(k,O){if(0<S&&O%S)b+=y;else{var P=null==k||isNaN(k)||""===k,R=P?0:L_(k,i,c,!0);P&&!l&&O?(h.push([h[h.length-1][0],0]),p.push([p[p.length-1][0],0])):!P&&l&&(h.push([b,0]),p.push([b,0])),h.push([b,R]),p.push([b,R]),b+=y,l=P}});var M=this.dataZoomModel;this._displayables.barGroup.add(new wo({shape:{points:h},style:un({fill:M.get("dataBackgroundColor")},M.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new Bc({shape:{points:p},style:M.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var n,r=this.ecModel;return e.eachTargetAxis(function(o,i){me(e.getAxisProxy(o.name,i).getTargetSeriesModels(),function(s){if(!(n||!0!==t&&dn(YT,s.get("type"))<0)){var l,c=r.getComponent(o.axis,i).axis,f={x:"y",y:"x",radius:"angle",angle:"radius"}[o.name],h=s.coordinateSystem;null!=f&&h.getOtherAxis&&(l=h.getOtherAxis(c).inverse),f=s.getData().mapDimension(f),n={thisAxis:c,series:s,thisDim:o.name,otherDim:f,otherAxisInverse:l}}},this)},this),n}},_renderHandle:function(){var e=this._displayables,t=e.handles=[],n=e.handleLabels=[],r=this._displayables.barGroup,o=this._size,i=this.dataZoomModel;r.add(e.filler=new qT({draggable:!0,cursor:BA(this._orient),drift:hb(this._onDragMove,this,"all"),ondragstart:hb(this._showDataInfo,this,!0),ondragend:hb(this._onDragEnd,this),onmouseover:hb(this._showDataInfo,this,!0),onmouseout:hb(this._showDataInfo,this,!1),style:{fill:i.get("fillerColor"),textPosition:"inside"}})),r.add(new qT({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{stroke:i.get("dataBackgroundColor")||i.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),XT([0,1],function(s){var l=ig(i.get("handleIcon"),{cursor:BA(this._orient),draggable:!0,drift:hb(this._onDragMove,this,s),ondragend:hb(this._onDragEnd,this),onmouseover:hb(this._showDataInfo,this,!0),onmouseout:hb(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),c=l.getBoundingRect();this._handleHeight=Pn(i.get("handleSize"),this._size[1]),this._handleWidth=c.width/c.height*this._handleHeight,l.setStyle(i.getModel("handleStyle").getItemStyle());var f=i.get("handleColor");null!=f&&(l.style.fill=f),r.add(t[s]=l);var h=i.textStyleModel;this.group.add(n[s]=new vo({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:h.getTextColor(),textFont:h.getFont()},z2:10}))},this)},_resetInterval:function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[L_(e[0],[0,100],t,!0),L_(e[1],[0,100],t,!0)]},_updateInterval:function(e,t){var n=this.dataZoomModel,r=this._handleEnds,o=this._getViewExtent(),i=n.findRepresentativeAxisProxy().getMinMaxSpan(),s=[0,100];M0(t,r,o,n.get("zoomLock")?"all":e,null!=i.minSpan?L_(i.minSpan,s,o,!0):null,null!=i.maxSpan?L_(i.maxSpan,s,o,!0):null);var l=this._range,c=this._range=Ok([L_(r[0],o,s,!0),L_(r[1],o,s,!0)]);return!l||l[0]!==c[0]||l[1]!==c[1]},_updateView:function(e){var t=this._displayables,n=this._handleEnds,r=Ok(n.slice()),o=this._size;XT([0,1],function(i){var l=this._handleHeight;t.handles[i].attr({scale:[l/2,l/2],position:[n[i],o[1]/2-l/2]})},this),t.filler.setShape({x:r[0],y:0,width:r[1]-r[0],height:o[1]}),this._updateDataInfo(e)},_updateDataInfo:function(e){var t=this.dataZoomModel,n=this._displayables,r=n.handleLabels,o=this._orient,i=["",""];if(t.get("showDetail")){var s=t.findRepresentativeAxisProxy();if(s){var l=s.getAxisModel().axis,c=this._range,f=e?s.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:s.getDataValueWindow();i=[this._formatLabel(f[0],l),this._formatLabel(f[1],l)]}}var h=Ok(this._handleEnds.slice());function p(y){var b=Ws(n.handles[y].parent,this.group),S=Tb(0===y?"right":"left",b),M=this._handleWidth/2+5,k=Ql([h[y]+(0===y?-M:M),this._size[1]/2],b);r[y].setStyle({x:k[0],y:k[1],textVerticalAlign:o===FS?"middle":S,textAlign:o===FS?S:"center",text:i[y]})}p.call(this,0),p.call(this,1)},_formatLabel:function(e,t){var n=this.dataZoomModel,r=n.get("labelFormatter"),o=n.get("labelPrecision");null!=o&&"auto"!==o||(o=t.getPixelPrecision());var i=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel(Math.round(e)):e.toFixed(Math.min(o,20));return Mt(r)?r(e,i):tr(r)?r.replace("{value}",i):i},_showDataInfo:function(e){var t=this._displayables.handleLabels;t[0].attr("invisible",!(e=this._dragging||e)),t[1].attr("invisible",!e)},_onDragMove:function(e,t,n,r){this._dragging=!0,cr(r.event);var o=Ql([t,n],this._displayables.barGroup.getLocalTransform(),!0),i=this._updateInterval(e,o[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),i&&s&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction()},_onClickPanelClick:function(e){var t=this._size,n=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>t[0]||n[1]<0||n[1]>t[1])){var r=this._handleEnds,i=this._updateInterval("all",n[0]-(r[0]+r[1])/2);this._updateView(),i&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:e[0],end:e[1]})},_findCoordRect:function(){var e;if(XT(this.getTargetCoordInfo(),function(r){if(!e&&r.length){var o=r[0].model.coordinateSystem;e=o.getRect&&o.getRect()}}),!e){var t=this.api.getWidth(),n=this.api.getHeight();e={x:.2*t,y:.2*n,width:.6*t,height:.6*n}}return e}});function BA(e){return"vertical"===e?"ns-resize":"ew-resize"}qD.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});var v2="\0_ec_dataZoom_roams";function zA(e,t){var n=b2(e),r=t.dataZoomId,o=t.coordId;me(n,function(l,c){var f=l.dataZoomInfos;f[r]&&dn(t.allCoordIds,o)<0&&(delete f[r],l.count--)}),x2(n);var c,f,i=n[o];i||((i=n[o]={coordId:o,dataZoomInfos:{},count:0}).controller=(c=i,f=new Rp(e.getZr()),me(["pan","zoom","scrollMove"],function(h){f.on(h,function(p){var y=[];me(c.dataZoomInfos,function(b){if(p.isAvailableBehavior(b.dataZoomModel.option)){var S=(b.getRange||{})[h],M=S&&S(c.controller,p);!b.dataZoomModel.get("disabled",!0)&&M&&y.push({dataZoomId:b.dataZoomId,start:M[0],end:M[1]})}}),y.length&&c.dispatchAction(y)})}),f),i.dispatchAction=ar(FA,e)),i.dataZoomInfos[r]||i.count++,i.dataZoomInfos[r]=t;var s=function(l){var c,f={type_true:2,type_move:1,type_false:0,type_undefined:-1},h=!0;return me(l,function(p){var y=p.dataZoomModel,b=!y.get("disabled",!0)&&(!y.get("zoomLock",!0)||"move");f["type_"+c]<f["type_"+b]&&(c=b),h&=y.get("preventDefaultMouseMove",!0)}),{controlType:c,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!h}}}(i.dataZoomInfos);i.controller.enable(s.controlType,s.opt),i.controller.setPointerChecker(t.containsPoint),Wf(i,"dispatchAction",t.dataZoomModel.get("throttle",!0),"fixRate")}function y2(e){return e.type+"\0_"+e.id}function b2(e){var t=e.getZr();return t[v2]||(t[v2]={})}function x2(e){me(e,function(t,n){t.count||(t.controller.dispose(),delete e[n])})}function FA(e,t){e.dispatchAction({type:"dataZoom",batch:t})}var VA=Nn,ZT=xT.extend({type:"dataZoom.inside",init:function(e,t){},render:function(e,t,n,r){ZT.superApply(this,"render",arguments),this._range=e.getPercentRange(),me(this.getTargetCoordInfo(),function(o,i){var s=Kt(o,function(l){return y2(l.model)});me(o,function(l){var c=l.model,f={};me(["pan","zoom","scrollMove"],function(h){f[h]=VA(HA[h],this,l,i)},this),zA(n,{coordId:y2(c),allCoordIds:s,containsPoint:function(h,p,y){return c.coordinateSystem.containPoint([p,y])},dataZoomId:e.id,dataZoomModel:e,getRange:f})},this)},this)},dispose:function(){(function(e,t){var n=b2(e);me(n,function(r){r.controller.dispose();var o=r.dataZoomInfos;o[t]&&(delete o[t],r.count--)}),x2(n)})(this.api,this.dataZoomModel.id),ZT.superApply(this,"dispose",arguments),this._range=null}}),HA={zoom:function(e,t,n,r){var o=this._range,i=o.slice(),s=e.axisModels[0];if(s){var l=$T[t](null,[r.originX,r.originY],s,n,e),c=(0<l.signal?l.pixelStart+l.pixelLength-l.pixel:l.pixel-l.pixelStart)/l.pixelLength*(i[1]-i[0])+i[0],f=Math.max(1/r.scale,0);i[0]=(i[0]-c)*f+c,i[1]=(i[1]-c)*f+c;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return M0(0,i,[0,100],0,h.minSpan,h.maxSpan),this._range=i,o[0]!==i[0]||o[1]!==i[1]?i:void 0}},pan:_2(function(e,t,n,r,o,i){var s=$T[r]([i.oldX,i.oldY],[i.newX,i.newY],t,o,n);return s.signal*(e[1]-e[0])*s.pixel/s.pixelLength}),scrollMove:_2(function(e,t,n,r,o,i){return $T[r]([0,0],[i.scrollDelta,i.scrollDelta],t,o,n).signal*(e[1]-e[0])*i.scrollDelta})};function _2(e){return function(t,n,r,o){var i=this._range,s=i.slice(),l=t.axisModels[0];if(l)return M0(e(s,l,t,n,r,o),s,[0,100],"all"),this._range=s,i[0]!==s[0]||i[1]!==s[1]?s:void 0}}function w2(e){var t=e&&e.visualMap;rn(t)||(t=t?[t]:[]),S2(t,function(n){if(n){B_(n,"splitList")&&!B_(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var r=n.pieces;r&&rn(r)&&S2(r,function(o){xt(o)&&(B_(o,"start")&&!B_(o,"min")&&(o.min=o.start),B_(o,"end")&&!B_(o,"max")&&(o.max=o.end))})}})}var $T={grid:function(e,t,n,r,o){var i=n.axis,s={},l=o.model.coordinateSystem.getRect();return e=e||[0,0],"x"===i.dim?(s.pixel=t[0]-e[0],s.pixelLength=l.width,s.pixelStart=l.x,s.signal=i.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=l.height,s.pixelStart=l.y,s.signal=i.inverse?-1:1),s},polar:function(e,t,n,r,o){var i=n.axis,s={},l=o.model.coordinateSystem,c=l.getRadiusAxis().getExtent(),f=l.getAngleAxis().getExtent();return e=e?l.pointToCoord(e):[0,0],t=l.pointToCoord(t),"radiusAxis"===n.mainType?(s.pixel=t[0]-e[0],s.pixelLength=c[1]-c[0],s.pixelStart=c[0],s.signal=i.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=f[1]-f[0],s.pixelStart=f[0],s.signal=i.inverse?-1:1),s},singleAxis:function(e,t,n,r,o){var i=n.axis,s=o.model.coordinateSystem.getRect(),l={};return e=e||[0,0],"horizontal"===i.orient?(l.pixel=t[0]-e[0],l.pixelLength=s.width,l.pixelStart=s.x,l.signal=i.inverse?1:-1):(l.pixel=t[1]-e[1],l.pixelLength=s.height,l.pixelStart=s.y,l.signal=i.inverse?-1:1),l}},S2=me;function B_(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}Go.registerSubTypeDefaulter("visualMap",function(e){return e.categories||(e.pieces?0<e.pieces.length:0<e.splitNumber)&&!e.calculable?"piecewise":"continuous"});var C2=Gf.VISUAL.COMPONENT;function WA(e,t,n,r){for(var o=t.targetVisuals[r],i=Ni.prepareVisualTypes(o),s={color:e.getData().getVisual("color")},l=0,c=i.length;l<c;l++){var f=i[l],h=o["opacity"===f?"__alphaForOpacity":f];h&&h.applyVisual(n,p,y)}return s.color;function p(b){return s[b]}function y(b,S){s[b]=S}}Ti(C2,{createOnAllSeries:!0,reset:function(e,t){var n=[];return t.eachComponent("visualMap",function(r){var o=e.pipelineContext;!r.isTargetSeries(e)||o&&o.large||n.push(function(i,s,l,c){var f={};return me(i,function(h){var p=Ni.prepareVisualTypes(s[h]);f[h]=p}),{progress:function(h,p){function y(Y){return p.getItemVisual(S,Y)}function b(Y,Q){p.setItemVisual(S,Y,Q)}var S;for(null!=c&&(c=p.getDimension(c));null!=(S=h.next());){var M=p.getRawDataItem(S);if(!M||!1!==M.visualMap)for(var k=null!=c?p.get(c,S,!0):S,O=l(k),P=s[O],R=f[O],F=0,G=R.length;F<G;F++){var X=R[F];P[X]&&P[X].applyVisual(k,y,b)}}}}}(r.stateList,r.targetVisuals,Nn(r.getValueState,r),r.getDataDimension(e.getData())))}),n}}),Ti(C2,{createOnAllSeries:!0,reset:function(e,t){var n=e.getData(),r=[];t.eachComponent("visualMap",function(o){if(o.isTargetSeries(e)){var i=o.getVisualMeta(Nn(WA,null,e,o))||{stops:[],outerColors:[]},s=o.getDataDimension(n),l=n.getDimensionInfo(s);null!=l&&(i.dimension=l.index,r.push(i))}}),e.getData().setVisual("visualMeta",r)}});var KT=function(e,t,n){var r=Gn((GA[e]||{})[t]);return n&&rn(r)?r[r.length-1]:r},GA={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},jA=Ni.mapVisual,UA=Ni.eachVisual,qA=rn,Pk=me,XA=sg,YA=yi,JT=Au({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(e,t,n){this.targetVisuals={},this.controllerVisuals={},this.mergeDefaultAndTheme(e,n)},optionUpdated:function(e,t){var n=this.option;Cr.canvasSupported||(n.realtime=!1),t||CT(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(e){var t=this.stateList;e=Nn(e,this),this.controllerVisuals=ST(this.option.controller,t,e),this.targetVisuals=ST(this.option.target,t,e)},getTargetSeriesIndices:function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries(function(n,r){t.push(r)}):t=Js(e),t},eachTargetSeries:function(e,t){me(this.getTargetSeriesIndices(),function(n){e.call(t,this.ecModel.getSeriesByIndex(n))},this)},isTargetSeries:function(e){var t=!1;return this.eachTargetSeries(function(n){n===e&&(t=!0)}),t},formatValueText:function(e,t,n){var r,o,i=this.option,s=i.precision,l=this.dataBound,c=i.formatter;return n=n||["<",">"],rn(e)&&(e=e.slice(),r=!0),o=t?e:r?[f(e[0]),f(e[1])]:f(e),tr(c)?c.replace("{value}",r?o[0]:o).replace("{value2}",r?o[1]:o):Mt(c)?r?c(e[0],e[1]):c(e):r?e[0]===l[0]?n[0]+" "+o[1]:e[1]===l[1]?n[1]+" "+o[0]:o[0]+" - "+o[1]:o;function f(h){return h===l[0]?"min":h===l[1]?"max":(+h).toFixed(Math.min(s,20))}},resetExtent:function(){var e=this.option,t=XA([e.min,e.max]);this._dataExtent=t},getDataDimension:function(e){var t=this.option.dimension;if(null!=t||e.dimensions.length){if(null!=t)return e.getDimension(t);for(var r=e.dimensions,o=r.length-1;0<=o;o--){var i=r[o];if(!e.getDimensionInfo(i).isCalculationCoord)return i}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var e=this.ecModel,t=this.option,n={inRange:t.inRange,outOfRange:t.outOfRange},r=t.target||(t.target={}),o=t.controller||(t.controller={});Sn(r,n),Sn(o,n);var i=this.isCategory();function s(l){qA(t.color)&&!l.inRange&&(l.inRange={color:t.color.slice().reverse()}),l.inRange=l.inRange||{color:e.get("gradientColor")},Pk(this.stateList,function(c){var f=l[c];if(tr(f)){var h=KT(f,"active",i);h?(l[c]={},l[c][f]=h):delete l[c]}},this)}s.call(this,r),s.call(this,o),function(l,c,f){var h=l[c],p=l[f];h&&!p&&(p=l[f]={},Pk(h,function(y,b){if(Ni.isValidType(b)){var S=KT(b,"inactive",i);null!=S&&(p[b]=S,"color"!==b||p.hasOwnProperty("opacity")||p.hasOwnProperty("colorAlpha")||(p.opacity=[0,0]))}}))}.call(this,r,"inRange","outOfRange"),function(l){var c=(l.inRange||{}).symbol||(l.outOfRange||{}).symbol,f=(l.inRange||{}).symbolSize||(l.outOfRange||{}).symbolSize,h=this.get("inactiveColor");Pk(this.stateList,function(p){var y=this.itemSize,b=l[p];null==(b=b||(l[p]={color:i?h:[h]})).symbol&&(b.symbol=c&&Gn(c)||(i?"roundRect":["roundRect"])),null==b.symbolSize&&(b.symbolSize=f&&Gn(f)||(i?y[0]:[y[0],y[0]])),b.symbol=jA(b.symbol,function(k){return"none"===k||"square"===k?"roundRect":k});var S=b.symbolSize;if(null!=S){var M=-1/0;UA(S,function(k){M<k&&(M=k)}),b.symbolSize=jA(S,function(k){return YA(k,[0,M],[0,y[0]],!0)})}},this)}.call(this,o)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:Pt,getValueState:Pt,getVisualMeta:Pt}),ZA=[20,140],QT=JT.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(e,t){QT.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){QT.superApply(this,"resetItemSize",arguments);var e=this.itemSize;"horizontal"===this._orient&&e.reverse(),null!=e[0]&&!isNaN(e[0])||(e[0]=ZA[0]),null!=e[1]&&!isNaN(e[1])||(e[1]=ZA[1])},_resetRange:function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):rn(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},completeVisualOption:function(){JT.prototype.completeVisualOption.apply(this,arguments),me(this.stateList,function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=0)},this)},setSelected:function(e){this.option.range=e.slice(),this._resetRange()},getSelected:function(){var e=this.getExtent(),t=sg((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},getValueState:function(e){var t=this.option.range,n=this.getExtent();return(t[0]<=n[0]||t[0]<=e)&&(t[1]>=n[1]||e<=t[1])?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries(function(n){var r=[],o=n.getData();o.each(this.getDataDimension(o),function(i,s){e[0]<=i&&i<=e[1]&&r.push(s)},this),t.push({seriesId:n.id,dataIndex:r})},this),t},getVisualMeta:function(e){var t=$A(0,0,this.getExtent()),n=$A(0,0,this.option.range.slice()),r=[];function o(p,y){r.push({value:p,color:e(p,y)})}for(var i=0,s=0,l=n.length,c=t.length;s<c&&(!n.length||t[s]<=n[0]);s++)t[s]<n[i]&&o(t[s],"outOfRange");for(var f=1;i<l;i++,f=0)f&&r.length&&o(n[i],"outOfRange"),o(n[i],"inRange");for(f=1;s<c;s++)(!n.length||n[n.length-1]<t[s])&&(f&&(r.length&&o(r[r.length-1].value,"outOfRange"),f=0),o(t[s],"outOfRange"));var h=r.length;return{stops:r,outerColors:[h?r[0].color:"transparent",h?r[h-1].color:"transparent"]}}});function $A(e,t,n){if(n[0]===n[1])return n.slice();for(var r=(n[1]-n[0])/200,o=n[0],i=[],s=0;s<=200&&o<n[1];s++)i.push(o),o+=r;return i.push(n[1]),i}var eD=xs({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(e,t){this.ecModel=e,this.api=t},render:function(e,t,n,r){!1!==(this.visualMapModel=e).get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(e){var t=this.visualMapModel,n=bh(t.get("padding")||0),r=e.getBoundingRect();e.add(new ei({z2:-1,silent:!0,shape:{x:r.x-n[3],y:r.y-n[0],width:r.width+n[3]+n[1],height:r.height+n[0]+n[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},getControllerVisual:function(e,t,n){var r=(n=n||{}).forceState,o=this.visualMapModel,i={};if("symbol"===t&&(i.symbol=o.get("itemSymbol")),"color"===t){var s=o.get("contentColor");i.color=s}function l(h){return i[h]}function c(h,p){i[h]=p}var f=o.controllerVisuals[r||o.getValueState(e)];return me(Ni.prepareVisualTypes(f),function(h){var p=f[h];n.convertOpacityToAlpha&&"opacity"===h&&(h="colorAlpha",p=f.__alphaForOpacity),Ni.dependsOn(h,t)&&p&&p.applyVisual(e,l,c)}),i[t]},positionGroup:function(e){var n=this.api;lp(e,this.visualMapModel.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},doRender:Pt});function KA(e,t,n){var r=e.option,o=r.align;if(null!=o&&"auto"!==o)return o;for(var i={width:t.getWidth(),height:t.getHeight()},s="horizontal"===r.orient?1:0,l=[["left","right","width"],["top","bottom","height"]],c=l[s],f=[0,null,10],h={},p=0;p<3;p++)h[l[1-s][p]]=f[p],h[c[p]]=2===p?n[0]:r[c[p]];var y=[["x","width",3],["y","height",0]][s],b=No(h,i,r.padding);return c[(b.margin[y[2]]||0)+b[y[0]]+.5*b[y[1]]<.5*i[y[1]]?0:1]}function Os(e,t){return me(e||[],function(n){null!=n.dataIndex&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var gb=yi,WI=me,Rk=Math.min,VS=Math.max,k2=eD.extend({type:"visualMap.continuous",init:function(){k2.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._hoverLinkDataIndices=[]},doRender:function(e,t,n,r){r&&"selectDataRange"===r.type&&r.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var n=e.get("text");this._renderEndsText(t,n,0),this._renderEndsText(t,n,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},_renderEndsText:function(e,t,n){if(t){var r=t[1-n];r=null!=r?r+"":"";var o=this.visualMapModel,i=o.get("textGap"),s=o.itemSize,l=this._shapes.barGroup,c=this._applyTransform([s[0]/2,0===n?-i:s[1]+i],l),f=this._applyTransform(0===n?"bottom":"top",l),h=this._orient,p=this.visualMapModel.textStyleModel;this.group.add(new vo({style:{x:c[0],y:c[1],textVerticalAlign:"horizontal"===h?"middle":f,textAlign:"horizontal"===h?f:"center",text:r,textFont:p.getFont(),textFill:p.getTextColor()}}))}},_renderBar:function(e){var t=this.visualMapModel,n=this._shapes,r=t.itemSize,o=this._orient,i=this._useHandle,s=KA(t,this.api,r),l=n.barGroup=this._createBarGroup(s);l.add(n.outOfRange=tD()),l.add(n.inRange=tD(null,i?QA(this._orient):null,Nn(this._dragHandle,this,"all",!1),Nn(this._dragHandle,this,"all",!0)));var c=t.textStyleModel.getTextRect("\u56fd"),f=VS(c.width,c.height);i&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(l,0,r,f,o,s),this._createHandle(l,1,r,f,o,s)),this._createIndicator(l,r,f,o),e.add(l)},_createHandle:function(e,t,n,r,o){var b,i=Nn(this._dragHandle,this,t,!1),s=Nn(this._dragHandle,this,t,!0),l=tD((b=r,0===t?[[0,0],[b,0],[b,-b]]:[[0,0],[b,0],[b,b]]),QA(this._orient),i,s);l.position[0]=n[0],e.add(l);var c=this.visualMapModel.textStyleModel,f=new vo({draggable:!0,drift:i,onmousemove:function(y){cr(y.event)},ondragend:s,style:{x:0,y:0,text:"",textFont:c.getFont(),textFill:c.getTextColor()}});this.group.add(f);var h=["horizontal"===o?r/2:1.5*r,"horizontal"===o?0===t?-1.5*r:1.5*r:0===t?-r/2:r/2],p=this._shapes;p.handleThumbs[t]=l,p.handleLabelPoints[t]=h,p.handleLabels[t]=f},_createIndicator:function(e,t,n,r){var o=tD([[0,0]],"move");o.position[0]=t[0],o.attr({invisible:!0,silent:!0}),e.add(o);var i=this.visualMapModel.textStyleModel,s=new vo({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:i.getFont(),textFill:i.getTextColor()}});this.group.add(s);var l=["horizontal"===r?n/2:9,0],c=this._shapes;c.indicator=o,c.indicatorLabel=s,c.indicatorLabelPoint=l},_dragHandle:function(e,t,n,r){if(this._useHandle){if(this._dragging=!t,!t){var o=this._applyTransform([n,r],this._shapes.barGroup,!0);this._updateInterval(e,o[1]),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?this._hovering||this._clearHoverLinkToSeries():JA(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},_resetInterval:function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),n=e.getExtent(),r=[0,e.itemSize[1]];this._handleEnds=[gb(t[0],n,r,!0),gb(t[1],n,r,!0)]},_updateInterval:function(e,t){var n=this.visualMapModel,r=this._handleEnds,o=[0,n.itemSize[1]];M0(t=t||0,r,o,e,0);var i=n.getExtent();this._dataInterval=[gb(r[0],o,i,!0),gb(r[1],o,i,!0)]},_updateView:function(e){var t=this.visualMapModel,n=t.getExtent(),r=this._shapes,o=[0,t.itemSize[1]],i=e?o:this._handleEnds,s=this._createBarVisual(this._dataInterval,n,i,"inRange"),l=this._createBarVisual(n,n,o,"outOfRange");r.inRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),r.outOfRange.setStyle({fill:l.barColor,opacity:l.opacity}).setShape("points",l.barPoints),this._updateHandle(i,s)},_createBarVisual:function(e,t,n,r){var o={forceState:r,convertOpacityToAlpha:!0},i=this._makeColorGradient(e,o),s=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],l=this._createBarPoints(n,s);return{barColor:new fh(0,0,0,1,i),barPoints:l,handlesColor:[i[0].color,i[i.length-1].color]}},_makeColorGradient:function(e,t){var n=[],r=(e[1]-e[0])/100;n.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var o=1;o<100;o++){var i=e[0]+r*o;if(i>e[1])break;n.push({color:this.getControllerVisual(i,"color",t),offset:o/100})}return n.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),n},_createBarPoints:function(e,t){var n=this.visualMapModel.itemSize;return[[n[0]-t[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-t[1],e[1]]]},_createBarGroup:function(e){var t=this._orient,n=this.visualMapModel.get("inverse");return new pn("horizontal"!==t||n?"horizontal"===t&&n?{scale:"bottom"===e?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==t||n?{scale:"left"===e?[1,1]:[-1,1]}:{scale:"left"===e?[1,-1]:[-1,-1]}:{scale:"bottom"===e?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(e,t){if(this._useHandle){var n=this._shapes,r=this.visualMapModel,o=n.handleThumbs,i=n.handleLabels;WI([0,1],function(s){var l=o[s];l.setStyle("fill",t.handlesColor[s]),l.position[1]=e[s];var c=Ql(n.handleLabelPoints[s],Ws(l,this.group));i[s].setStyle({x:c[0],y:c[1],text:r.formatValueText(this._dataInterval[s]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===s?"bottom":"top":"left",n.barGroup)})},this)}},_showIndicator:function(e,t,n,r){var O,P,R,o=this.visualMapModel,i=o.getExtent(),s=o.itemSize,c=gb(e,i,[0,s[1]],!0),f=this._shapes,h=f.indicator;if(h){h.position[1]=c,h.attr("invisible",!1),h.setShape("points",(O=r,P=c,R=s[1],n?[[0,-Rk(O,VS(P,0))],[6,0],[0,Rk(O,VS(R-P,0))]]:[[0,0],[5,-5],[5,5]]));var p=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0});h.setStyle("fill",p);var y=Ql(f.indicatorLabelPoint,Ws(h,this.group)),b=f.indicatorLabel;b.attr("invisible",!1);var S=this._applyTransform("left",f.barGroup),M=this._orient;b.setStyle({text:(n||"")+o.formatValueText(t),textVerticalAlign:"horizontal"===M?S:"middle",textAlign:"horizontal"===M?"center":S,x:y[0],y:y[1]})}},_enableHoverLinkToSeries:function(){var e=this;this._shapes.barGroup.on("mousemove",function(t){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,r=e._applyTransform([t.offsetX,t.offsetY],e._shapes.barGroup,!0,!0);r[1]=Rk(VS(0,r[1]),n[1]),e._doHoverLinkToSeries(r[1],0<=r[0]&&r[0]<=n[0])}}).on("mouseout",function(){e._hovering=!1,e._dragging||e._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(e,t){var S,M,k,O,n=this.visualMapModel;if(n.option.hoverLink){var o=[0,n.itemSize[1]],i=n.getExtent();e=Rk(VS(o[0],e),o[1]);var s=(S=i,M=o,k=6,(O=n.get("hoverLinkDataSize"))&&(k=gb(O,S,M,!0)/2),k),l=[e-s,e+s],c=gb(e,o,i,!0),f=[gb(l[0],o,i,!0),gb(l[1],o,i,!0)];l[0]<o[0]&&(f[0]=-1/0),o[1]<l[1]&&(f[1]=1/0),t&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",s):f[1]===1/0?this._showIndicator(c,f[0],"> ",s):this._showIndicator(c,c,"\u2248 ",s));var h=this._hoverLinkDataIndices,p=[];(t||JA(n))&&(p=this._hoverLinkDataIndices=n.findTargetDataIndices(f));var y=function(b,S){var M={},k={};return O(b||[],M),O(S||[],k,M),[P(M),P(k)];function O(R,F,G){for(var X=0,Y=R.length;X<Y;X++)for(var Q=R[X].seriesId,ne=Js(R[X].dataIndex),le=G&&G[Q],ce=0,ye=ne.length;ce<ye;ce++){var xe=ne[ce];le&&le[xe]?le[xe]=null:(F[Q]||(F[Q]={}))[xe]=1}}function P(R,F){var G=[];for(var X in R)if(R.hasOwnProperty(X)&&null!=R[X])if(F)G.push(+X);else{var Y=P(R[X],!0);Y.length&&G.push({seriesId:X,dataIndex:Y})}return G}}(h,p);this._dispatchHighDown("downplay",Os(y[0],n)),this._dispatchHighDown("highlight",Os(y[1],n))}},_hoverLinkFromSeriesMouseOver:function(e){var t=e.target,n=this.visualMapModel;if(t&&null!=t.dataIndex){var r=this.ecModel.getSeriesByIndex(t.seriesIndex);if(n.isTargetSeries(r)){var o=r.getData(t.dataType),i=o.get(n.getDataDimension(o),t.dataIndex,!0);isNaN(i)||this._showIndicator(i,i)}}},_hideIndicator:function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Os(e,this.visualMapModel)),e.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},_applyTransform:function(e,t,n,r){var o=Ws(t,r?null:this.group);return Jd[rn(e)?"applyTransform":"transformDirection"](e,o,n)},_dispatchHighDown:function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function tD(e,t,n,r){return new wo({shape:{points:e},draggable:!!n,cursor:t,drift:n,onmousemove:function(o){cr(o.event)},ondragend:r})}function JA(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function QA(e){return"vertical"===e?"ns-resize":"ew-resize"}jr({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(n){n.setSelected(e.selected)})}),ra(w2);var GI=JT.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(e,t){GI.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();jI[this._mode].call(this),this._resetSelected(e,t);var r=this.option.categories;this.resetVisual(function(o,i){"categories"===n?(o.mappingMethod="category",o.categories=Gn(r)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=Kt(this._pieceList,function(s){return s=Gn(s),"inRange"!==i&&(s.visual=null),s}))})},completeVisualOption:function(){var e=this.option,t={},n=Ni.listVisualTypes(),r=this.isCategory();function o(i,s,l){return i&&i[s]&&(xt(i[s])?i[s].hasOwnProperty(l):i[s]===l)}me(e.pieces,function(i){me(n,function(s){i.hasOwnProperty(s)&&(t[s]=1)})}),me(t,function(i,s){var l=0;me(this.stateList,function(c){l|=o(e,c,s)||o(e.target,c,s)},this),l||me(this.stateList,function(c){(e[c]||(e[c]={}))[s]=KT(s,"inRange"===c?"active":"inactive",r)})},this),JT.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(e,t){var n=this.option,r=this._pieceList,o=(t?n:e).selected||{};if(n.selected=o,me(r,function(s,l){var c=this.getSelectedMapKey(s);o.hasOwnProperty(c)||(o[c]=!0)},this),"single"===n.selectedMode){var i=!1;me(r,function(s,l){var c=this.getSelectedMapKey(s);o[c]&&(i?o[c]=!1:i=!0)},this)}},getSelectedMapKey:function(e){return"categories"===this._mode?e.value+"":e.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var e=this.option;return e.pieces&&0<e.pieces.length?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(e){this.option.selected=Gn(e)},getValueState:function(e){var t=Ni.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries(function(n){var r=[],o=n.getData();o.each(this.getDataDimension(o),function(i,s){Ni.findPieceIndex(i,this._pieceList)===e&&r.push(s)},this),t.push({seriesId:n.id,dataIndex:r})},this),t},getRepresentValue:function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var n=e.interval||[];t=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return t},getVisualMeta:function(e){if(!this.isCategory()){var t=[],n=[],r=this,o=this._pieceList.slice();if(o.length){var i=o[0].interval[0];i!==-1/0&&o.unshift({interval:[-1/0,i]}),(i=o[o.length-1].interval[1])!==1/0&&o.push({interval:[i,1/0]})}else o.push({interval:[-1/0,1/0]});var s=-1/0;return me(o,function(c){var f=c.interval;f&&(f[0]>s&&l([s,f[0]],"outOfRange"),l(f.slice()),s=f[1])},this),{stops:t,outerColors:n}}function l(c,f){var h=r.getRepresentValue({interval:c});f=f||r.getValueState(h);var p=e(h,f);c[0]===-1/0?n[0]=p:c[1]===1/0?n[1]=p:t.push({value:c[0],color:p},{value:c[1],color:p})}}}),jI={splitNumber:function(){var e=this.option,t=this._pieceList,n=Math.min(e.precision,20),r=this.getExtent(),o=e.splitNumber;o=Math.max(parseInt(o,10),1),e.splitNumber=o;for(var i=(r[1]-r[0])/o;+i.toFixed(n)!==i&&n<5;)n++;e.precision=n,i=+i.toFixed(n),e.minOpen&&t.push({interval:[-1/0,r[0]],close:[0,0]});for(var s=0,l=r[0];s<o;l+=i,s++)t.push({interval:[l,s===o-1?r[1]:l+i],close:[1,1]});e.maxOpen&&t.push({interval:[r[1],1/0],close:[0,0]}),om(t),me(t,function(f,h){f.index=h,f.text=this.formatValueText(f.interval)},this)},categories:function(){var e=this.option;me(e.categories,function(t){this._pieceList.push({text:this.formatValueText(t,!0),value:t})},this),eI(e,this._pieceList)},pieces:function(){var e=this.option,t=this._pieceList;me(e.pieces,function(n,r){xt(n)||(n={value:n});var o={text:"",index:r};if(null!=n.label&&(o.text=n.label),n.hasOwnProperty("value")){var i=o.value=n.value;o.interval=[i,i],o.close=[1,1]}else{for(var s=o.interval=[],l=o.close=[0,0],c=[1,0,1],f=[-1/0,1/0],h=[],p=0;p<2;p++){for(var y=[["gte","gt","min"],["lte","lt","max"]][p],b=0;b<3&&null==s[p];b++)s[p]=n[y[b]],l[p]=c[b],h[p]=2===b;null==s[p]&&(s[p]=f[p])}h[0]&&s[1]===1/0&&(l[0]=0),h[1]&&s[0]===-1/0&&(l[1]=0),s[0]===s[1]&&l[0]&&l[1]&&(o.value=s[0])}o.visual=Ni.retrieveVisuals(n),t.push(o)},this),eI(e,t),om(t),me(t,function(n){var r=n.close;n.text=n.text||this.formatValueText(null!=n.value?n.value:n.interval,!1,[["<","\u2264"][r[1]],[">","\u2265"][r[0]]])},this)}};function eI(e,t){var n=e.inverse;("vertical"===e.orient?!n:n)&&t.reverse()}eD.extend({type:"visualMap.piecewise",doRender:function(){var e=this.group;e.removeAll();var t=this.visualMapModel,n=t.get("textGap"),r=t.textStyleModel,o=r.getFont(),i=r.getTextColor(),s=this._getItemAlign(),l=t.itemSize,c=this._getViewData(),f=c.endsText,h=pe(t.get("showLabel",!0),!f);f&&this._renderEndsText(e,f[0],l,h,s),me(c.viewPieceList,function(p){var y=p.piece,b=new pn;b.onclick=Nn(this._onItemClick,this,y),this._enableHoverLink(b,p.indexInModelPieceList);var S=t.getRepresentValue(y);if(this._createItemSymbol(b,S,[0,0,l[0],l[1]]),h){var M=this.visualMapModel.getValueState(S);b.add(new vo({style:{x:"right"===s?-n:l[0]+n,y:l[1]/2,text:y.text,textVerticalAlign:"middle",textAlign:s,textFont:o,textFill:i,opacity:"outOfRange"===M?.5:1}}))}e.add(b)},this),f&&this._renderEndsText(e,f[1],l,h,s),Lf(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},_enableHoverLink:function(e,t){function n(r){var o=this.visualMapModel;o.option.hoverLink&&this.api.dispatchAction({type:r,batch:Os(o.findTargetDataIndices(t),o)})}e.on("mouseover",Nn(n,this,"highlight")).on("mouseout",Nn(n,this,"downplay"))},_getItemAlign:function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return KA(e,this.api,e.itemSize);var n=t.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(e,t,n,r,o){if(t){var i=new pn,s=this.visualMapModel.textStyleModel;i.add(new vo({style:{x:r?"right"===o?n[0]:0:n[0]/2,y:n[1]/2,textVerticalAlign:"middle",textAlign:r?o:"center",text:t,textFont:s.getFont(),textFill:s.getTextColor()}})),e.add(i)}},_getViewData:function(){var e=this.visualMapModel,t=Kt(e.getPieceList(),function(i,s){return{piece:i,indexInModelPieceList:s}}),n=e.get("text"),r=e.get("orient"),o=e.get("inverse");return("horizontal"===r?o:!o)?t.reverse():n=n&&n.slice().reverse(),{viewPieceList:t,endsText:n}},_createItemSymbol:function(e,t,n){e.add(Zc(this.getControllerVisual(t,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(t,"color")))},_onItemClick:function(e){var t=this.visualMapModel,n=t.option,r=Gn(n.selected),o=t.getSelectedMapKey(e);"single"===n.selectedMode?(r[o]=!0,me(r,function(i,s){r[s]=s===o})):r[o]=!r[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:r})}}),ra(w2);var M2,tI="urn:schemas-microsoft-com:vml",nD="undefined"==typeof window?null:window,zg=!1,Fg=nD&&nD.document;function T2(e){return M2(e)}if(Fg&&!Cr.canvasSupported)try{Fg.namespaces.zrvml||Fg.namespaces.add("zrvml",tI),M2=function(e){return Fg.createElement("<zrvml:"+e+' class="zrvml">')}}catch(e){M2=function(t){return Fg.createElement("<"+t+' xmlns="'+tI+'" class="zrvml">')}}var nI,z_=_o.CMD,Sa=Math.round,Nk=Math.sqrt,UI=Math.abs,rI=Math.cos,oI=Math.sin,D2=Math.max;if(!Cr.canvasSupported){var Bl=",",A2="progid:DXImageTransform.Microsoft",Ac=21600,Wh=Ac/2,I2=function(e){e.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",e.coordsize=Ac+","+Ac,e.coordorigin="0,0"},iI=function(e,t,n){return"rgb("+[e,t,n].join(",")+")"},W0=function(e,t){t&&e&&t.parentNode!==e&&e.appendChild(t)},Lk=function(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)},O2=function(e,t,n){return 1e5*(parseFloat(e)||0)+1e3*(parseFloat(t)||0)+n},aI=$,sI=function(e,t,n){var r=Ru(t);n=+n,isNaN(n)&&(n=1),r&&(e.color=iI(r[0],r[1],r[2]),e.opacity=n*r[3])},rD=function(e,t,n,r){var s,l,o="fill"===t,i=e.getElementsByTagName(t)[0];null!=n[t]&&"none"!==n[t]&&(o||!o&&n.lineWidth)?(e[o?"filled":"stroked"]="true",n[t]instanceof bd&&Lk(e,i),i=i||T2(t),o?function(s,l,c){var h,p=l.fill;if(null!=p)if(p instanceof bd){var y,b=0,S=[0,0],M=0,k=1,O=c.getBoundingRect(),P=O.width,R=O.height;if("linear"===p.type){y="gradient";var F=c.transform,G=[p.x*P,p.y*R],X=[p.x2*P,p.y2*R];F&&(wn(G,G,F),wn(X,X,F)),(b=180*Math.atan2(X[0]-G[0],X[1]-G[1])/Math.PI)<0&&(b+=360),b<1e-6&&(b=0)}else{y="gradientradial";var ne=c.scale,le=P,ce=R;S=[((G=[p.x*P,p.y*R])[0]-O.x)/le,(G[1]-O.y)/ce],(F=c.transform)&&wn(G,G,F);var ye=D2(le/=ne[0]*Ac,ce/=ne[1]*Ac);k=2*p.r/ye-(M=0/ye)}var xe=p.colorStops.slice();xe.sort(function(Ln,Ft){return Ln.offset-Ft.offset});for(var Te=xe.length,Ee=[],Ve=[],Be=0;Be<Te;Be++){var nt=xe[Be],bt=(h=Ru(nt.color),[iI(h[0],h[1],h[2]),h[3]]);Ve.push(nt.offset*k+M+" "+bt[0]),0!==Be&&Be!==Te-1||Ee.push(bt)}if(2<=Te){var _t=Ee[0][0],wt=Ee[1][0],Lt=Ee[0][1]*l.opacity,Ht=Ee[1][1]*l.opacity;s.type=y,s.method="none",s.focus="100%",s.angle=b,s.color=_t,s.color2=wt,s.colors=Ve.join(","),s.opacity=Ht,s.opacity2=Lt}"radial"===y&&(s.focusposition=S.join(","))}else sI(s,p,l.opacity)}(i,n,r):(s=i,(l=n).lineDash&&(s.dashstyle=l.lineDash.join(" ")),null==l.stroke||l.stroke instanceof bd||sI(s,l.stroke,l.opacity)),W0(e,i)):(e[o?"filled":"stroked"]="false",Lk(e,i))},Vg=[[],[],[]];Qr.prototype.brushVML=function(e){var t=this.style,n=this._vmlEl;n||(n=T2("shape"),I2(n),this._vmlEl=n),rD(n,"fill",t,this),rD(n,"stroke",t,this);var r=this.transform,o=null!=r,i=n.getElementsByTagName("stroke")[0];if(i){var s=t.lineWidth;o&&!t.strokeNoScale&&(s*=Nk(UI(r[0]*r[3]-r[1]*r[2]))),i.weight=s+"px"}var c=this.path||(this.path=new _o);this.__dirtyPath&&(c.beginPath(),c.subPixelOptimize=!1,this.buildPath(c,this.shape),c.toStatic(),this.__dirtyPath=!1),n.path=function(f,h){var p,y,b,S,M,k,O=z_.M,P=z_.C,R=z_.L,F=z_.A,G=z_.Q,X=[],Y=f.data,Q=f.len();for(S=0;S<Q;){switch(y="",p=0,b=Y[S++]){case O:y=" m ",p=1,M=Y[S++],k=Y[S++],Vg[0][0]=M,Vg[0][1]=k;break;case R:y=" l ",p=1,M=Y[S++],k=Y[S++],Vg[0][0]=M,Vg[0][1]=k;break;case G:case P:y=" c ",p=3;var ne,le,ce=Y[S++],ye=Y[S++],xe=Y[S++],Te=Y[S++];b===G?(xe=((ne=xe)+2*ce)/3,Te=((le=Te)+2*ye)/3,ce=(M+2*ce)/3,ye=(k+2*ye)/3):(ne=Y[S++],le=Y[S++]),Vg[0][0]=ce,Vg[0][1]=ye,Vg[1][0]=xe,Vg[1][1]=Te,M=Vg[2][0]=ne,k=Vg[2][1]=le;break;case F:var Ee=0,Ve=0,Be=1,nt=1,bt=0;h&&(Ee=h[4],Ve=h[5],Be=Nk(h[0]*h[0]+h[1]*h[1]),nt=Nk(h[2]*h[2]+h[3]*h[3]),bt=Math.atan2(-h[1]/nt,h[0]/Be));var _t=Y[S++],wt=Y[S++],Lt=Y[S++],Ht=Y[S++],Ln=Y[S++]+bt,Ft=Y[S++]+Ln+bt;S++;var Yn=Y[S++],or=_t+rI(Ln)*Lt,Tr=wt+oI(Ln)*Ht,Ko=(ce=_t+rI(Ft)*Lt,ye=wt+oI(Ft)*Ht,Yn?" wa ":" at ");Math.abs(or-ce)<1e-4&&(.01<Math.abs(Ft-Ln)?Yn&&(or+=.0125):Math.abs(Tr-wt)<1e-4?Yn&&or<_t||!Yn&&_t<or?ye-=.0125:ye+=.0125:Yn&&Tr<wt||!Yn&&wt<Tr?ce+=.0125:ce-=.0125),X.push(Ko,Sa(((_t-Lt)*Be+Ee)*Ac-Wh),Bl,Sa(((wt-Ht)*nt+Ve)*Ac-Wh),Bl,Sa(((_t+Lt)*Be+Ee)*Ac-Wh),Bl,Sa(((wt+Ht)*nt+Ve)*Ac-Wh),Bl,Sa((or*Be+Ee)*Ac-Wh),Bl,Sa((Tr*nt+Ve)*Ac-Wh),Bl,Sa((ce*Be+Ee)*Ac-Wh),Bl,Sa((ye*nt+Ve)*Ac-Wh)),M=ce,k=ye;break;case z_.R:var Lo=Vg[0],Nr=Vg[1];Lo[0]=Y[S++],Lo[1]=Y[S++],Nr[0]=Lo[0]+Y[S++],Nr[1]=Lo[1]+Y[S++],h&&(wn(Lo,Lo,h),wn(Nr,Nr,h)),Lo[0]=Sa(Lo[0]*Ac-Wh),Nr[0]=Sa(Nr[0]*Ac-Wh),Lo[1]=Sa(Lo[1]*Ac-Wh),Nr[1]=Sa(Nr[1]*Ac-Wh),X.push(" m ",Lo[0],Bl,Lo[1]," l ",Nr[0],Bl,Lo[1]," l ",Nr[0],Bl,Nr[1]," l ",Lo[0],Bl,Nr[1]);break;case z_.Z:X.push(" x ")}if(0<p){X.push(y);for(var _n=0;_n<p;_n++){var Or=Vg[_n];h&&wn(Or,Or,h),X.push(Sa(Or[0]*Ac-Wh),Bl,Sa(Or[1]*Ac-Wh),_n<p-1?Bl:"")}}}return X.join("")}(c,this.transform),n.style.zIndex=O2(this.zlevel,this.z,this.z2),W0(e,n),null!=t.text?this.drawRectText(e,this.getBoundingRect()):this.removeRectText(e)},Qr.prototype.onRemove=function(e){Lk(e,this._vmlEl),this.removeRectText(e)},Qr.prototype.onAdd=function(e){W0(e,this._vmlEl),this.appendRectText(e)},De.prototype.brushVML=function(e){var t,n,Ht,r=this.style,o=r.image;if("object"==typeof(Ht=o)&&Ht.tagName&&"IMG"===Ht.tagName.toUpperCase()){var i=o.src;if(i===this._imageSrc)t=this._imageWidth,n=this._imageHeight;else{var s=o.runtimeStyle,l=s.width,c=s.height;s.width="auto",s.height="auto",t=o.width,n=o.height,s.width=l,s.height=c,this._imageSrc=i,this._imageWidth=t,this._imageHeight=n}o=i}else o===this._imageSrc&&(t=this._imageWidth,n=this._imageHeight);if(o){var f=r.x||0,h=r.y||0,p=r.width,y=r.height,b=r.sWidth,S=r.sHeight,M=r.sx||0,k=r.sy||0,O=b&&S,P=this._vmlEl;P||(P=Fg.createElement("div"),I2(P),this._vmlEl=P);var R,F=P.style,G=!1,X=1,Y=1;if(this.transform&&(X=Nk((R=this.transform)[0]*R[0]+R[1]*R[1]),Y=Nk(R[2]*R[2]+R[3]*R[3]),G=R[1]||R[2]),G){var Q=[f,h],ne=[f+p,h],le=[f,h+y],ce=[f+p,h+y];wn(Q,Q,R),wn(ne,ne,R),wn(le,le,R),wn(ce,ce,R);var ye=D2(Q[0],ne[0],le[0],ce[0]),xe=D2(Q[1],ne[1],le[1],ce[1]),Te=[];Te.push("M11=",R[0]/X,Bl,"M12=",R[2]/Y,Bl,"M21=",R[1]/X,Bl,"M22=",R[3]/Y,Bl,"Dx=",Sa(f*X+R[4]),Bl,"Dy=",Sa(h*Y+R[5])),F.padding="0 "+Sa(ye)+"px "+Sa(xe)+"px 0",F.filter=A2+".Matrix("+Te.join("")+", SizingMethod=clip)"}else R&&(f=f*X+R[4],h=h*Y+R[5]),F.filter="",F.left=Sa(f)+"px",F.top=Sa(h)+"px";var Ee=this._imageEl,Ve=this._cropEl;Ee||(Ee=Fg.createElement("div"),this._imageEl=Ee);var Be=Ee.style;if(O){if(t&&n)Be.width=Sa(X*t*p/b)+"px",Be.height=Sa(Y*n*y/S)+"px";else{var nt=new Image,bt=this;nt.onload=function(){nt.onload=null,n=nt.height,Be.width=Sa(X*(t=nt.width)*p/b)+"px",Be.height=Sa(Y*n*y/S)+"px",bt._imageWidth=t,bt._imageHeight=n,bt._imageSrc=o},nt.src=o}Ve||((Ve=Fg.createElement("div")).style.overflow="hidden",this._cropEl=Ve);var _t=Ve.style;_t.width=Sa((p+M*p/b)*X),_t.height=Sa((y+k*y/S)*Y),_t.filter=A2+".Matrix(Dx="+-M*p/b*X+",Dy="+-k*y/S*Y+")",Ve.parentNode||P.appendChild(Ve),Ee.parentNode!==Ve&&Ve.appendChild(Ee)}else Be.width=Sa(X*p)+"px",Be.height=Sa(Y*y)+"px",P.appendChild(Ee),Ve&&Ve.parentNode&&(P.removeChild(Ve),this._cropEl=null);var wt="",Lt=r.opacity;Lt<1&&(wt+=".Alpha(opacity="+Sa(100*Lt)+") "),Be.filter=wt+=A2+".AlphaImageLoader(src="+o+", SizingMethod=scale)",P.style.zIndex=O2(this.zlevel,this.z,this.z2),W0(e,P),null!=r.text&&this.drawRectText(e,this.getBoundingRect())}},De.prototype.onRemove=function(e){Lk(e,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(e)},De.prototype.onAdd=function(e){W0(e,this._vmlEl),this.appendRectText(e)};var F_,E2="normal",oD={},P2=0,qI=document.createElement("div");nI=function(e,t){var n=Fg;F_||((F_=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",Fg.body.appendChild(F_));try{F_.style.font=t}catch(r){}return F_.innerHTML="",F_.appendChild(n.createTextNode(e)),{width:F_.offsetWidth}},kr.measureText=nI;for(var R2=new Vo,XI=function(e,t,n,r){var o=this.style;this.__dirty&&$n(o);var i=o.text;if(null!=i&&(i+=""),i){if(o.rich){var s=ka(i,o);i=[];for(var l=0;l<s.lines.length;l++){for(var c=s.lines[l].tokens,f=[],h=0;h<c.length;h++)f.push(c[h].text);i.push(f.join(""))}i=i.join("\n")}var p,y,b=o.textAlign,S=o.textVerticalAlign,M=function(ce){var ye=oD[ce];if(!ye){100<P2&&(P2=0,oD={});var xe,Te=qI.style;try{Te.font=ce,xe=Te.fontFamily.split(",")[0]}catch(Ee){}ye={style:Te.fontStyle||E2,variant:Te.fontVariant||E2,weight:Te.fontWeight||E2,size:0|parseFloat(Te.fontSize||12),family:xe||"Microsoft YaHei"},oD[ce]=ye,P2++}return ye}(o.font),k=M.style+" "+M.variant+" "+M.weight+" "+M.size+'px "'+M.family+'"';n=n||Qi(i,k,b,S,o.textPadding,o.textLineHeight);var O=this.transform;if(O&&!r&&(R2.copy(t),R2.applyTransform(O),t=R2),r)p=t.x,y=t.y;else{var P=o.textPosition;if(P instanceof Array)p=t.x+aI(P[0],t.width),y=t.y+aI(P[1],t.height),b=b||"left";else{var R=this.calculateTextPosition?this.calculateTextPosition({},o,t):Na({},o,t);p=R.x,y=R.y,b=b||R.textAlign,S=S||R.textVerticalAlign}}p=il(p,n.width,b),y=sd(y,n.height,S),y+=n.height/2;var F,G,X,Y=T2,Q=this._textVmlEl;Q?G=(F=(X=Q.firstChild).nextSibling).nextSibling:(Q=Y("line"),F=Y("path"),G=Y("textpath"),X=Y("skew"),G.style["v-text-align"]="left",I2(Q),F.textpathok=!0,G.on=!0,Q.from="0 0",Q.to="1000 0.05",W0(Q,X),W0(Q,F),W0(Q,G),this._textVmlEl=Q);var ne=[p,y],le=Q.style;O&&r?(wn(ne,ne,O),X.on=!0,X.matrix=O[0].toFixed(3)+Bl+O[2].toFixed(3)+Bl+O[1].toFixed(3)+Bl+O[3].toFixed(3)+",0,0",X.offset=(Sa(ne[0])||0)+","+(Sa(ne[1])||0),X.origin="0 0",le.left="0px",le.top="0px"):(X.on=!1,le.left=Sa(p)+"px",le.top=Sa(y)+"px"),G.string=String(i).replace(/&/g,"&amp;").replace(/"/g,"&quot;");try{G.style.font=k}catch(ce){}rD(Q,"fill",{fill:o.textFill,opacity:o.opacity},this),rD(Q,"stroke",{stroke:o.textStroke,opacity:o.opacity,lineDash:o.lineDash||null},this),Q.style.zIndex=O2(this.zlevel,this.z,this.z2),W0(e,Q)}},YI=function(e){Lk(e,this._textVmlEl),this._textVmlEl=null},ZI=function(e){W0(e,this._textVmlEl)},uI=[ge,Ce,De,Qr,vo],N2=0;N2<uI.length;N2++){var iD=uI[N2].prototype;iD.drawRectText=XI,iD.removeRectText=YI,iD.appendRectText=ZI}vo.prototype.brushVML=function(e){var t=this.style;null!=t.text?this.drawRectText(e,{x:t.x||0,y:t.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(e)},vo.prototype.onRemove=function(e){this.removeRectText(e)},vo.prototype.onAdd=function(e){this.appendRectText(e)}}function HS(e){return parseInt(e,10)}function aD(e,t){(function(){if(!zg&&Fg){zg=!0;var s=Fg.styleSheets;s.length<31?Fg.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):s[0].addRule(".zrvml","behavior:url(#default#VML)")}})(),this.root=e,this.storage=t;var n=document.createElement("div"),r=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",r.style.cssText="position:absolute;left:0;top:0;",e.appendChild(n),this._vmlRoot=r,this._vmlViewport=n,this.resize();var o=t.delFromStorage,i=t.addToStorage;t.delFromStorage=function(s){o.call(t,s),s&&s.onRemove&&s.onRemove(r)},t.addToStorage=function(s){s.onAdd&&s.onAdd(r),i.call(t,s)},this._firstPaint=!0}function G0(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}aD.prototype={constructor:aD,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0,!0);this._paintList(e)},_paintList:function(e){for(var t=this._vmlRoot,n=0;n<e.length;n++){var r=e[n];r.invisible||r.ignore?(r.__alreadyNotVisible||r.onRemove(t),r.__alreadyNotVisible=!0):(r.__alreadyNotVisible&&r.onAdd(t),r.__alreadyNotVisible=!1,r.__dirty&&(r.beforeBrush&&r.beforeBrush(),(r.brushVML||r.brush).call(r,t),r.afterBrush&&r.afterBrush())),r.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(t),this._firstPaint=!1)},resize:function(e,t){if(e=null==e?this._getWidth():e,t=null==t?this._getHeight():t,this._width!==e||this._height!==t){this._width=e,this._height=t;var n=this._vmlViewport.style;n.width=e+"px",n.height=t+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var e=this.root,t=e.currentStyle;return(e.clientWidth||HS(t.width))-HS(t.paddingLeft)-HS(t.paddingRight)|0},_getHeight:function(){var e=this.root,t=e.currentStyle;return(e.clientHeight||HS(t.height))-HS(t.paddingTop)-HS(t.paddingBottom)|0}},me(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(e){aD.prototype[e]=function(){}}),Ud("vml",aD);var V_=_o.CMD,$I=Array.prototype.join,WS="none",L2=Math.round,lI=Math.sin,sD=Math.cos,cI=Math.PI,mb=2*Math.PI,KI=180/cI;function iv(e){return L2(1e4*e)/1e4}function fI(e){return e<1e-4&&-1e-4<e}function B2(e,t){t&&Ou(e,"transform","matrix("+$I.call(t,",")+")")}function Ou(e,t,n){n&&("linear"===n.type||"radial"===n.type)||e.setAttribute(t,n)}function hI(e,t,n,r){if(s=t,null!=(c=n?s.textFill:s.fill)&&c!==WS){var o=n?t.textFill:t.fill;Ou(e,"fill",o="transparent"===o?WS:o),Ou(e,"fill-opacity",null!=t.fillOpacity?t.fillOpacity*t.opacity:t.opacity)}else Ou(e,"fill",WS);var s,c;if(function(s,l){var c=l?s.textStroke:s.stroke;return null!=c&&c!==WS}(t,n)){var i=n?t.textStroke:t.stroke;Ou(e,"stroke",i="transparent"===i?WS:i),Ou(e,"stroke-width",(n?t.textStrokeWidth:t.lineWidth)/(!n&&t.strokeNoScale?r.getLineScale():1)),Ou(e,"paint-order",n?"stroke":"fill"),Ou(e,"stroke-opacity",null!=t.strokeOpacity?t.strokeOpacity:t.opacity),t.lineDash?(Ou(e,"stroke-dasharray",t.lineDash.join(",")),Ou(e,"stroke-dashoffset",L2(t.lineDashOffset||0))):Ou(e,"stroke-dasharray",""),t.lineCap&&Ou(e,"stroke-linecap",t.lineCap),t.lineJoin&&Ou(e,"stroke-linejoin",t.lineJoin),t.miterLimit&&Ou(e,"stroke-miterlimit",t.miterLimit)}else Ou(e,"stroke",WS)}var Bk={brush:function(e){var t=e.style,n=e.__svgEl;n||(n=G0("path"),e.__svgEl=n),e.path||e.createPathProxy();var r=e.path;if(e.__dirtyPath){r.beginPath(),r.subPixelOptimize=!1,e.buildPath(r,e.shape),e.__dirtyPath=!1;var o=function(i){for(var s=[],l=i.data,c=i.len(),f=0;f<c;){var h="",p=0;switch(l[f++]){case V_.M:h="M",p=2;break;case V_.L:h="L",p=2;break;case V_.Q:h="Q",p=4;break;case V_.C:h="C",p=6;break;case V_.A:var y=l[f++],b=l[f++],S=l[f++],M=l[f++],k=l[f++],O=l[f++],P=l[f++],R=l[f++],F=Math.abs(O),G=fI(F-mb)||(R?mb<=O:mb<=-O),X=0<O?O%mb:O%mb+mb,Y=!1;Y=!!G||!fI(F)&&cI<=X==!!R;var Q=iv(y+S*sD(k)),ne=iv(b+M*lI(k));G&&(O=R?mb-1e-4:1e-4-mb,Y=!0,9===f&&s.push("M",Q,ne));var le=iv(y+S*sD(k+O)),ce=iv(b+M*lI(k+O));s.push("A",iv(S),iv(M),L2(P*KI),+Y,+R,le,ce);break;case V_.Z:h="Z";break;case V_.R:le=iv(l[f++]),ce=iv(l[f++]);var ye=iv(l[f++]),xe=iv(l[f++]);s.push("M",le,ce,"L",le+ye,ce,"L",le+ye,ce+xe,"L",le,ce+xe,"L",le,ce)}h&&s.push(h);for(var Te=0;Te<p;Te++)s.push(iv(l[f++]))}return s.join(" ")}(r);o.indexOf("NaN")<0&&Ou(n,"d",o)}hI(n,t,!1,e),B2(n,e.transform),null!=t.text?Fk(e,e.getBoundingRect()):z2(e)}},uD={brush:function(e){var t=e.style,n=t.image;if(n instanceof HTMLImageElement&&(n=n.src),n){var r=t.x||0,o=t.y||0,i=t.width,s=t.height,l=e.__svgEl;l||(l=G0("image"),e.__svgEl=l),n!==e.__imageSrc&&(l.setAttributeNS("http://www.w3.org/1999/xlink","href",n),e.__imageSrc=n),Ou(l,"width",i),Ou(l,"height",s),Ou(l,"x",r),Ou(l,"y",o),B2(l,e.transform),null!=t.text?Fk(e,e.getBoundingRect()):z2(e)}}},lD={},H_=new Vo,zk={},pb=[],JI={left:"start",right:"end",center:"middle",middle:"middle"},Fk=function(e,t){var n=e.style,r=e.transform,o=e instanceof vo||n.transformText;e.__dirty&&$n(n);var xe,Te,Ee,i=n.text;if(null!=i&&(i+=""),ae(i,n)){null==i&&(i=""),!o&&r&&(H_.copy(t),H_.applyTransform(r),t=H_);var s=e.__textSvgEl;s||(s=G0("text"),e.__textSvgEl=s);var l=s.style,c=n.font||Ns,f=s.__computedFont;c!==s.__styleFont&&(l.font=s.__styleFont=c,f=s.__computedFont=l.font);var h=n.textPadding,y=e.__textCotentBlock;y&&!e.__dirtyText||(y=e.__textCotentBlock=Uh(i,f,h,n.textLineHeight,n.truncate));var b=y.outerHeight,S=y.lineHeight;I(zk,e,n,t);var M=zk.baseX,k=zk.baseY,O=zk.textAlign||"left",P=zk.textVerticalAlign;!function(xe,Te,Ee,Ve,Be,nt,bt){Zs(pb),Te&&Ee&&Mo(pb,Ee);var _t=Ve.textRotation;if(Be&&_t){var wt=Ve.textOrigin;"center"===wt?(nt=Be.width/2+Be.x,bt=Be.height/2+Be.y):wt&&(nt=wt[0]+Be.x,bt=wt[1]+Be.y),pb[4]-=nt,pb[5]-=bt,Ar(pb,pb,_t),pb[4]+=nt,pb[5]+=bt}B2(xe,pb)}(s,o,r,n,t,M,k);var R=M,F=sd(k,b,P);h&&(xe=M,Ee=h,R="right"===(Te=O)?xe-Ee[1]:"center"===Te?xe+Ee[3]/2-Ee[1]/2:xe+Ee[3],F+=h[0]),F+=S/2,hI(s,n,!0,e);var G=y.canCacheByTextString,X=e.__tspanList||(e.__tspanList=[]),Y=X.length;if(G&&e.__canCacheByTextString&&e.__text===i){if(e.__dirtyText&&Y)for(var Q=0;Q<Y;++Q)gI(X[Q],O,R,F+Q*S)}else{e.__text=i,e.__canCacheByTextString=G;var ne=y.lines,le=ne.length;for(Q=0;Q<le;Q++){var ce=X[Q],ye=ne[Q];ce?ce.__zrText!==ye&&(ce.innerHTML="",ce.appendChild(document.createTextNode(ye))):(ce=X[Q]=G0("tspan"),s.appendChild(ce),ce.appendChild(document.createTextNode(ye))),gI(ce,O,R,F+Q*S)}if(le<Y){for(;Q<Y;Q++)s.removeChild(X[Q]);X.length=le}}}};function gI(e,t,n,r){Ou(e,"dominant-baseline","middle"),Ou(e,"text-anchor",JI[t]),Ou(e,"x",n),Ou(e,"y",r)}function z2(e){e&&e.__textSvgEl&&(e.__textSvgEl.parentNode&&e.__textSvgEl.parentNode.removeChild(e.__textSvgEl),e.__textSvgEl=null,e.__tspanList=[],e.__text=null)}function mI(){}function GS(e,t){for(var n=0,r=t.length,o=0,i=0;n<r;n++){var s=t[n];if(s.removed){for(l=[],c=i;c<i+s.count;c++)l.push(c);s.indices=l,i+=s.count}else{for(var l=[],c=o;c<o+s.count;c++)l.push(c);s.indices=l,o+=s.count,s.added||(i+=s.count)}}return t}lD.drawRectText=Fk,lD.brush=function(e){null!=e.style.text?Fk(e,!1):z2(e)},mI.prototype={diff:function(e,t,n){this.equals=n=n||function(S,M){return S===M};var r=this;e=e.slice();var o=(t=t.slice()).length,i=e.length,s=1,l=o+i,c=[{newPos:-1,components:[]}],f=this.extractCommon(c[0],t,e,0);if(c[0].newPos+1>=o&&i<=f+1){for(var h=[],p=0;p<t.length;p++)h.push(p);return[{indices:h,count:t.length}]}function y(){for(var S=-1*s;S<=s;S+=2){var M,k=c[S-1],O=c[S+1],P=(O?O.newPos:0)-S;k&&(c[S-1]=void 0);var R=k&&k.newPos+1<o,F=O&&0<=P&&P<i;if(R||F){if(!R||F&&k.newPos<O.newPos?(M={newPos:(G=O).newPos,components:G.components.slice(0)},r.pushComponent(M.components,void 0,!0)):((M=k).newPos++,r.pushComponent(M.components,!0,void 0)),P=r.extractCommon(M,t,e,S),M.newPos+1>=o&&i<=P+1)return GS(0,M.components);c[S]=M}else c[S]=void 0}var G;s++}for(;s<=l;){var b=y();if(b)return b}},pushComponent:function(e,t,n){var r=e[e.length-1];r&&r.added===t&&r.removed===n?e[e.length-1]={count:r.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,r){for(var o=t.length,i=n.length,s=e.newPos,l=s-r,c=0;s+1<o&&l+1<i&&this.equals(t[s+1],n[l+1]);)s++,l++,c++;return c&&e.components.push({count:c}),e.newPos=s,l},tokenize:function(e){return e.slice()},join:function(e){return e.slice()}};var pI=new mI;function Ys(e,t,n,r,o){this._zrId=e,this._svgRoot=t,this._tagNames="string"==typeof n?[n]:n,this._markLabel=r,this._domName=o||"_dom",this.nextId=0}function vb(e,t){Ys.call(this,e,t,["linearGradient","radialGradient"],"__gradient_in_use__")}function jS(e,t){Ys.call(this,e,t,"clipPath","__clippath_in_use__")}function yb(e,t){Ys.call(this,e,t,["filter"],"__filter_in_use__","_shadowDom")}function F2(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY||e.textShadowBlur||e.textShadowOffsetX||e.textShadowOffsetY)}function Vk(e){return parseInt(e,10)}function vI(e,t){return t&&e&&t.parentNode!==e}function Hk(e,t,n){if(vI(e,t)&&n){var r=n.nextSibling;r?e.insertBefore(t,r):e.appendChild(t)}}function V2(e,t){if(vI(e,t)){var n=e.firstChild;n?e.insertBefore(t,n):e.appendChild(t)}}function yI(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)}function W_(e){return e.__textSvgEl}function Wk(e){return e.__svgEl}function u(e,t,n,r){this.root=e,this.storage=t,this._opts=n=Fn({},n||{});var o=G0("svg");o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("version","1.1"),o.setAttribute("baseProfile","full"),o.style.cssText="user-select:none;position:absolute;left:0;top:0;";var i=G0("g");o.appendChild(i);var s=G0("g");o.appendChild(s),this.gradientManager=new vb(r,s),this.clipPathManager=new jS(r,s),this.shadowManager=new yb(r,s);var l=document.createElement("div");l.style.cssText="overflow:hidden;position:relative",this._svgDom=o,this._svgRoot=s,this._backgroundRoot=i,this._viewport=l,e.appendChild(l),l.appendChild(o),this.resize(n.width,n.height),this._visibleList=[]}Ys.prototype.createElement=G0,Ys.prototype.getDefs=function(e){var t=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?e?((n=t.insertBefore(this.createElement("defs"),t.firstChild)).contains||(n.contains=function(r){var o=n.children;if(!o)return!1;for(var i=o.length-1;0<=i;--i)if(o[i]===r)return!0;return!1}),n):null:n[0]},Ys.prototype.update=function(e,t){if(e){var n=this.getDefs(!1);if(e[this._domName]&&n.contains(e[this._domName]))"function"==typeof t&&t(e);else{var r=this.add(e);r&&(e[this._domName]=r)}}},Ys.prototype.addDom=function(e){this.getDefs(!0).appendChild(e)},Ys.prototype.removeDom=function(e){var t=this.getDefs(!1);t&&e[this._domName]&&(t.removeChild(e[this._domName]),e[this._domName]=null)},Ys.prototype.getDoms=function(){var e=this.getDefs(!1);if(!e)return[];var t=[];return me(this._tagNames,function(n){var r=e.getElementsByTagName(n);t=t.concat([].slice.call(r))}),t},Ys.prototype.markAllUnused=function(){var e=this.getDoms(),t=this;me(e,function(n){n[t._markLabel]="0"})},Ys.prototype.markUsed=function(e){e&&(e[this._markLabel]="1")},Ys.prototype.removeUnused=function(){var e=this.getDefs(!1);if(e){var t=this.getDoms(),n=this;me(t,function(r){"1"!==r[n._markLabel]&&e.removeChild(r)})}},Ys.prototype.getSvgProxy=function(e){return e instanceof Qr?Bk:e instanceof De?uD:e instanceof vo?lD:Bk},Ys.prototype.getTextSvgElement=function(e){return e.__textSvgEl},Ys.prototype.getSvgElement=function(e){return e.__svgEl},Rn(vb,Ys),vb.prototype.addWithoutUpdate=function(e,t){if(t&&t.style){var n=this;me(["fill","stroke"],function(r){if(t.style[r]&&("linear"===t.style[r].type||"radial"===t.style[r].type)){var o,i=t.style[r],s=n.getDefs(!0);i._dom?(o=i._dom,s.contains(i._dom)||n.addDom(o)):o=n.add(i),n.markUsed(t);var l=o.getAttribute("id");e.setAttribute(r,"url(#"+l+")")}})}},vb.prototype.add=function(e){var t;if("linear"===e.type)t=this.createElement("linearGradient");else{if("radial"!==e.type)return null;t=this.createElement("radialGradient")}return e.id=e.id||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-gradient-"+e.id),this.updateDom(e,t),this.addDom(t),t},vb.prototype.update=function(e){var t=this;Ys.prototype.update.call(this,e,function(){var n=e.type,r=e._dom.tagName;"linear"===n&&"linearGradient"===r||"radial"===n&&"radialGradient"===r?t.updateDom(e,e._dom):(t.removeDom(e),t.add(e))})},vb.prototype.updateDom=function(e,t){if("linear"===e.type)t.setAttribute("x1",e.x),t.setAttribute("y1",e.y),t.setAttribute("x2",e.x2),t.setAttribute("y2",e.y2);else{if("radial"!==e.type)return;t.setAttribute("cx",e.x),t.setAttribute("cy",e.y),t.setAttribute("r",e.r)}t.setAttribute("gradientUnits",e.global?"userSpaceOnUse":"objectBoundingBox"),t.innerHTML="";for(var n=e.colorStops,r=0,o=n.length;r<o;++r){var i=this.createElement("stop");i.setAttribute("offset",100*n[r].offset+"%");var s=n[r].color;if(-1<s.indexOf("rgba")){var l=Ru(s)[3],c=Ui(s);i.setAttribute("stop-color","#"+c),i.setAttribute("stop-opacity",l)}else i.setAttribute("stop-color",n[r].color);t.appendChild(i)}e._dom=t},vb.prototype.markUsed=function(e){if(e.style){var t=e.style.fill;t&&t._dom&&Ys.prototype.markUsed.call(this,t._dom),(t=e.style.stroke)&&t._dom&&Ys.prototype.markUsed.call(this,t._dom)}},Rn(jS,Ys),jS.prototype.update=function(e){var t=this.getSvgElement(e);t&&this.updateDom(t,e.__clipPaths,!1);var n=this.getTextSvgElement(e);n&&this.updateDom(n,e.__clipPaths,!0),this.markUsed(e)},jS.prototype.updateDom=function(e,t,n){if(t&&0<t.length){var r,o,i=this.getDefs(!0),s=t[0],l=n?"_textDom":"_dom";s[l]?(o=s[l].getAttribute("id"),i.contains(r=s[l])||i.appendChild(r)):(o="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(r=this.createElement("clipPath")).setAttribute("id",o),i.appendChild(r),s[l]=r);var c=this.getSvgProxy(s);if(s.transform&&s.parent.invTransform&&!n){var f=Array.prototype.slice.call(s.transform);Eu(s.transform,s.parent.invTransform,s.transform),c.brush(s),s.transform=f}else c.brush(s);var h=this.getSvgElement(s);r.innerHTML="",r.appendChild(h.cloneNode()),e.setAttribute("clip-path","url(#"+o+")"),1<t.length&&this.updateDom(r,t.slice(1),n)}else e&&e.setAttribute("clip-path","none")},jS.prototype.markUsed=function(e){var t=this;e.__clipPaths&&me(e.__clipPaths,function(n){n._dom&&Ys.prototype.markUsed.call(t,n._dom),n._textDom&&Ys.prototype.markUsed.call(t,n._textDom)})},Rn(yb,Ys),yb.prototype.addWithoutUpdate=function(e,t){if(t&&F2(t.style)){var n;t._shadowDom?(n=t._shadowDom,this.getDefs(!0).contains(t._shadowDom)||this.addDom(n)):n=this.add(t),this.markUsed(t);var r=n.getAttribute("id");e.style.filter="url(#"+r+")"}},yb.prototype.add=function(e){var t=this.createElement("filter");return e._shadowDomId=e._shadowDomId||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-shadow-"+e._shadowDomId),this.updateDom(e,t),this.addDom(t),t},yb.prototype.update=function(e,t){if(F2(t.style)){var n=this;Ys.prototype.update.call(this,t,function(){n.updateDom(t,t._shadowDom)})}else this.remove(e,t)},yb.prototype.remove=function(e,t){null!=t._shadowDomId&&(this.removeDom(e),e.style.filter="")},yb.prototype.updateDom=function(e,t){var n=t.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var r,o,i,s,l=e.style,c=e.scale&&e.scale[0]||1,f=e.scale&&e.scale[1]||1;if(l.shadowBlur||l.shadowOffsetX||l.shadowOffsetY)r=l.shadowOffsetX||0,o=l.shadowOffsetY||0,i=l.shadowBlur,s=l.shadowColor;else{if(!l.textShadowBlur)return void this.removeDom(t,l);r=l.textShadowOffsetX||0,o=l.textShadowOffsetY||0,i=l.textShadowBlur,s=l.textShadowColor}n.setAttribute("dx",r/c),n.setAttribute("dy",o/f),n.setAttribute("flood-color",s),n.setAttribute("stdDeviation",i/2/c+" "+i/2/f),t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width",Math.ceil(i/2*200)+"%"),t.setAttribute("height",Math.ceil(i/2*200)+"%"),t.appendChild(n),e._shadowDom=t},yb.prototype.markUsed=function(e){e._shadowDom&&Ys.prototype.markUsed.call(this,e._shadowDom)},u.prototype={constructor:u,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0);this._paintList(e)},setBackgroundColor:function(e){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var t=G0("rect");t.setAttribute("width",this.getWidth()),t.setAttribute("height",this.getHeight()),t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("id",0),t.style.fill=e,this._backgroundRoot.appendChild(t),this._backgroundNode=t},_paintList:function(e){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var t,n,r=this._svgRoot,o=this._visibleList,i=e.length,s=[];for(t=0;t<i;t++){var l=e[t],c=(n=l)instanceof Qr?Bk:n instanceof De?uD:n instanceof vo?lD:Bk,f=Wk(l)||W_(l);l.invisible||(l.__dirty&&(c&&c.brush(l),this.clipPathManager.update(l),l.style&&(this.gradientManager.update(l.style.fill),this.gradientManager.update(l.style.stroke),this.shadowManager.update(f,l)),l.__dirty=!1),s.push(l))}var h,p=pI.diff(o,s,void 0);for(t=0;t<p.length;t++)if((S=p[t]).removed)for(var y=0;y<S.count;y++){f=Wk(l=o[S.indices[y]]);var b=W_(l);yI(r,f),yI(r,b)}for(t=0;t<p.length;t++){var S;if((S=p[t]).added)for(y=0;y<S.count;y++)f=Wk(l=s[S.indices[y]]),b=W_(l),h?Hk(r,f,h):V2(r,f),f?Hk(r,b,f):h?Hk(r,b,h):V2(r,b),Hk(r,b,f),h=b||f||h,this.gradientManager.addWithoutUpdate(f||b,l),this.shadowManager.addWithoutUpdate(f||b,l),this.clipPathManager.markUsed(l);else if(!S.removed)for(y=0;y<S.count;y++)f=Wk(l=s[S.indices[y]]),b=W_(l),f=Wk(l),b=W_(l),this.gradientManager.markUsed(l),this.gradientManager.addWithoutUpdate(f||b,l),this.shadowManager.markUsed(l),this.shadowManager.addWithoutUpdate(f||b,l),this.clipPathManager.markUsed(l),b&&Hk(r,b,f),h=f||b||h}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=s},_getDefs:function(e){var t,n=this._svgDom;return 0!==(t=n.getElementsByTagName("defs")).length?t[0]:e?((t=n.insertBefore(G0("defs"),n.firstChild)).contains||(t.contains=function(r){var o=t.children;if(!o)return!1;for(var i=o.length-1;0<=i;--i)if(o[i]===r)return!0;return!1}),t):null},resize:function(e,t){var n=this._viewport;n.style.display="none";var r=this._opts;if(null!=e&&(r.width=e),null!=t&&(r.height=t),e=this._getSize(0),t=this._getSize(1),n.style.display="",this._width!==e||this._height!==t){this._width=e,this._height=t;var o=n.style;o.width=e+"px",o.height=t+"px";var i=this._svgDom;i.setAttribute("width",e),i.setAttribute("height",t)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",e),this._backgroundNode.setAttribute("height",t))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,n=["width","height"][e],r=["clientWidth","clientHeight"][e],o=["paddingLeft","paddingTop"][e],i=["paddingRight","paddingBottom"][e];if(null!=t[n]&&"auto"!==t[n])return parseFloat(t[n]);var s=this.root,l=document.defaultView.getComputedStyle(s);return(s[r]||Vk(l[n])||Vk(s.style[n]))-(Vk(l[o])||0)-(Vk(l[i])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(this._svgDom.outerHTML.replace(/></g,">\n\r<"))}},me(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],function(e){u.prototype[e]=function(){}}),Ud("svg",u),Un.version="4.9.0",Un.dependencies={zrender:"4.3.2"},Un.PRIORITY=Gf,Un.init=function(e,t,n){var r=Do(e);if(r)return r;var o=new K(e,t,n);return o.id="ec_"+zn++,Br[o.id]=o,cv(e,Xr,o.id),function(i){var s="__connectUpdateStatus";function l(c,f){for(var h=0;h<c.length;h++)c[h][s]=f}Za(Bn,function(c,f){i._messageCenter.on(f,function(h){if(to[i.group]&&0!==i[s]){if(h&&h.escapeConnect)return;var p=i.makeActionFromEvent(h),y=[];Za(Br,function(b){b!==i&&b.group===i.group&&y.push(b)}),l(y,0),Za(y,function(b){1!==b[s]&&b.dispatchAction(p)}),l(y,2)}})})}(o),o},Un.connect=function(e){if(rn(e)){var t=e;e=null,Za(t,function(n){null!=n.group&&(e=n.group)}),e=e||"g_"+Ri++,Za(t,function(n){n.group=e})}return to[e]=!0,e},Un.disConnect=Ci,Un.disconnect=So,Un.dispose=function(e){"string"==typeof e?e=Br[e]:e instanceof K||(e=Do(e)),e instanceof K&&!e.isDisposed()&&e.dispose()},Un.getInstanceByDom=Do,Un.getInstanceById=function(e){return Br[e]},Un.registerTheme=na,Un.registerPreprocessor=ra,Un.registerProcessor=fa,Un.registerPostUpdate=function(e){Fr.push(e)},Un.registerAction=jr,Un.registerCoordinateSystem=Yc,Un.getCoordinateSystemDimensions=function(e){var t=ku.get(e);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()},Un.registerLayout=oa,Un.registerVisual=Ti,Un.registerLoading=uf,Un.extendComponentModel=Au,Un.extendComponentView=xs,Un.extendSeriesModel=Dh,Un.extendChartView=Is,Un.setCanvasCreator=function(e){Bi("createCanvas",e)},Un.registerMap=function(e,t,n){!function(e,t,n){var r;me(r=rn(t)?t:t.svg?[{type:"svg",source:t.svg,specialAreas:t.specialAreas}]:(t.geoJson&&!t.features&&(n=t.specialAreas,t=t.geoJson),[{type:"geoJSON",source:t,specialAreas:n}]),function(o){var i=o.type;"geoJson"===i&&(i=o.type="geoJSON"),(0,sf[i])(o)}),Mh.set(e,r)}(e,t,n)},Un.getMap=function(e){var t=Th_retrieveMap(e);return t&&t[0]&&{geoJson:t[0].geoJSON,specialAreas:t[0].specialAreas}},Un.dataTool={},Un.zrender=av,Un.number=Db,Un.format=kv,Un.throttle=kd,Un.helper=sC,Un.matrix=Gi,Un.vector=ao,Un.color=Gh,Un.parseGeoJSON=Dy,Un.parseGeoJson=hC,Un.util=vw,Un.graphic=gC,Un.List=ml,Un.Model=$o,Un.Axis=cu,Un.env=Cr}),function(Un,Co){"object"==typeof exports&&"undefined"!=typeof module?Co(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],Co):Co(Un.bmap={},Un.echarts)}(this,function(Un,Co){"use strict";function Yr(En,ze){this._bmap=En,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=ze,this._projection=new BMap.MercatorProjection}function Cr(En,ze){return ze=ze||[0,0],Co.util.map([0,1],function(Ut){var Jn=ze[Ut],lr=En[Ut]/2,Zt=[],Eo=[];return Zt[Ut]=Jn-lr,Eo[Ut]=Jn+lr,Zt[1-Ut]=Eo[1-Ut]=ze[1-Ut],Math.abs(this.dataToPoint(Zt)[Ut]-this.dataToPoint(Eo)[Ut])},this)}var Zn;function ht(En){for(var ze in En)if(En.hasOwnProperty(ze))return!1;return!0}Yr.prototype.dimensions=["lng","lat"],Yr.prototype.setZoom=function(En){this._zoom=En},Yr.prototype.setCenter=function(En){this._center=this._projection.lngLatToPoint(new BMap.Point(En[0],En[1]))},Yr.prototype.setMapOffset=function(En){this._mapOffset=En},Yr.prototype.getBMap=function(){return this._bmap},Yr.prototype.dataToPoint=function(En){var ze=new BMap.Point(En[0],En[1]),Ut=this._bmap.pointToOverlayPixel(ze),Jn=this._mapOffset;return[Ut.x-Jn[0],Ut.y-Jn[1]]},Yr.prototype.pointToData=function(En){var ze=this._mapOffset;return[(En=this._bmap.overlayPixelToPoint({x:En[0]+ze[0],y:En[1]+ze[1]})).lng,En.lat]},Yr.prototype.getViewRect=function(){var En=this._api;return new Co.graphic.BoundingRect(0,0,En.getWidth(),En.getHeight())},Yr.prototype.getRoamTransform=function(){return Co.matrix.create()},Yr.prototype.prepareCustoms=function(En){var ze=this.getViewRect();return{coordSys:{type:"bmap",x:ze.x,y:ze.y,width:ze.width,height:ze.height},api:{coord:Co.util.bind(this.dataToPoint,this),size:Co.util.bind(Cr,this)}}},Yr.dimensions=Yr.prototype.dimensions,Yr.create=function(En,ze){var Ut,Jn=ze.getDom();En.eachComponent("bmap",function(lr){var Zt=ze.getZr().painter,Eo=Zt.getViewportRoot();if("undefined"==typeof BMap)throw new Error("BMap api is not loaded");if(Zn=Zn||function(){function Er(dn){this._root=dn}return(Er.prototype=new BMap.Overlay).initialize=function(dn){return dn.getPanes().labelPane.appendChild(this._root),this._root},Er.prototype.draw=function(){},Er}(),Ut)throw new Error("Only one bmap component can exist");if(!lr.__bmap){var cs=Jn.querySelector(".ec-extension-bmap");cs&&(Eo.style.left="0px",Eo.style.top="0px",Jn.removeChild(cs)),(cs=document.createElement("div")).style.cssText="width:100%;height:100%",cs.classList.add("ec-extension-bmap"),Jn.appendChild(cs);var Bi=lr.get("mapOptions")||{};delete Bi.mapType;var Gn=lr.__bmap=new BMap.Map(cs,Bi),Sn=new Zn(Eo);Gn.addOverlay(Sn),Zt.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}Gn=lr.__bmap;var xr=lr.get("center"),Fn=lr.get("zoom");if(xr&&Fn){var un=Gn.getCenter(),Qn=Gn.getZoom();if(lr.centerOrZoomChanged([un.lng,un.lat],Qn)){var Zi=new BMap.Point(xr[0],xr[1]);Gn.centerAndZoom(Zi,Fn)}}(Ut=new Yr(Gn,ze)).setMapOffset(lr.__mapOffset||[0,0]),Ut.setZoom(Fn),Ut.setCenter(xr),lr.coordinateSystem=Ut}),En.eachSeries(function(lr){"bmap"===lr.get("coordinateSystem")&&(lr.coordinateSystem=Ut)})},Co.extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(En,ze){this.option.center=En,this.option.zoom=ze},centerOrZoomChanged:function(En,ze){var Jn,lr,Ut=this.option;return lr=Ut.center,!((Jn=En)&&lr&&Jn[0]===lr[0]&&Jn[1]===lr[1]&&ze===Ut.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},mapOptions:{},roam:!1}}),Co.extendComponentView({type:"bmap",render:function(En,ze,Ut){function Jn(Er,dn){if(!lr){var Rn=Eo.parentNode.parentNode.parentNode,_e=[-parseInt(Rn.style.left,10)||0,-parseInt(Rn.style.top,10)||0];Eo.style.left=_e[0]+"px",Eo.style.top=_e[1]+"px",cs.setMapOffset(_e),En.__mapOffset=_e,Ut.dispatchAction({type:"bmapRoam"})}}var lr=!0,Zt=En.getBMap(),Eo=Ut.getZr().painter.getViewportRoot(),cs=En.coordinateSystem;function Bi(){lr||Ut.dispatchAction({type:"bmapRoam"})}Zt.removeEventListener("moving",this._oldMoveHandler),Zt.removeEventListener("moveend",this._oldMoveHandler),Zt.removeEventListener("zoomend",this._oldZoomEndHandler),Zt.addEventListener("moving",Jn),Zt.addEventListener("moveend",Jn),Zt.addEventListener("zoomend",Bi),this._oldMoveHandler=Jn,this._oldZoomEndHandler=Bi;var Gn=En.get("roam");Gn&&"scale"!==Gn?Zt.enableDragging():Zt.disableDragging(),Gn&&"move"!==Gn?(Zt.enableScrollWheelZoom(),Zt.enableDoubleClickZoom(),Zt.enablePinchToZoom()):(Zt.disableScrollWheelZoom(),Zt.disableDoubleClickZoom(),Zt.disablePinchToZoom());var Sn=En.__mapStyle,xr=En.get("mapStyle")||{},Fn=JSON.stringify(xr);JSON.stringify(Sn)!==Fn&&(ht(Qn)||Zt.setMapStyle(Co.util.clone(xr)),En.__mapStyle=JSON.parse(Fn));var un=En.__mapStyle2,Qn=En.get("mapStyleV2")||{},Zi=JSON.stringify(Qn);JSON.stringify(un)!==Zi&&(ht(Qn)||Zt.setMapStyleV2(Co.util.clone(Qn)),En.__mapStyle2=JSON.parse(Zi)),lr=!1}}),Co.registerCoordinateSystem("bmap",Yr),Co.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(En,ze){ze.eachComponent("bmap",function(Ut){var Jn=Ut.getBMap(),lr=Jn.getCenter();Ut.setCenterAndZoom([lr.lng,lr.lat],Jn.getZoom())})}),Un.version="1.0.0"}),function(Un,Co){"object"==typeof exports&&"undefined"!=typeof module?module.exports=Co(function(){try{return require("moment")}catch(Yr){}}()):"function"==typeof define&&define.amd?define(["require"],function(Yr){return Co(function(){try{return Yr("moment")}catch(Cr){}}())}):(Un=Un||self).Chart=Co(Un.moment)}(this,function(Un){"use strict";Un=Un&&Un.hasOwnProperty("default")?Un.default:Un;var w,Co={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Yr=(function(m){var w={};for(var T in Co)Co.hasOwnProperty(T)&&(w[Co[T]]=T);var I=m.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var N in I)if(I.hasOwnProperty(N)){if(!("channels"in I[N]))throw new Error("missing channels property: "+N);if(!("labels"in I[N]))throw new Error("missing channel labels property: "+N);if(I[N].labels.length!==I[N].channels)throw new Error("channel and label counts mismatch: "+N);var j=I[N].channels,q=I[N].labels;delete I[N].channels,delete I[N].labels,Object.defineProperty(I[N],"channels",{value:j}),Object.defineProperty(I[N],"labels",{value:q})}I.rgb.hsl=function($){var te,ae,ge=$[0]/255,be=$[1]/255,Ce=$[2]/255,De=Math.min(ge,be,Ce),Ne=Math.max(ge,be,Ce),Xe=Ne-De;return Ne===De?te=0:ge===Ne?te=(be-Ce)/Xe:be===Ne?te=2+(Ce-ge)/Xe:Ce===Ne&&(te=4+(ge-be)/Xe),(te=Math.min(60*te,360))<0&&(te+=360),ae=(De+Ne)/2,[te,100*(Ne===De?0:ae<=.5?Xe/(Ne+De):Xe/(2-Ne-De)),100*ae]},I.rgb.hsv=function($){var te,ae,ge,be,Ce,De=$[0]/255,Ne=$[1]/255,Xe=$[2]/255,ft=Math.max(De,Ne,Xe),an=ft-Math.min(De,Ne,Xe),jt=function(Xt){return(ft-Xt)/6/an+.5};return 0===an?be=Ce=0:(Ce=an/ft,te=jt(De),ae=jt(Ne),ge=jt(Xe),De===ft?be=ge-ae:Ne===ft?be=1/3+te-ge:Xe===ft&&(be=2/3+ae-te),be<0?be+=1:be>1&&(be-=1)),[360*be,100*Ce,100*ft]},I.rgb.hwb=function($){var te=$[0],ae=$[1],ge=$[2];return[I.rgb.hsl($)[0],1/255*Math.min(te,Math.min(ae,ge))*100,100*(ge=1-1/255*Math.max(te,Math.max(ae,ge)))]},I.rgb.cmyk=function($){var te,ae=$[0]/255,ge=$[1]/255,be=$[2]/255;return[100*((1-ae-(te=Math.min(1-ae,1-ge,1-be)))/(1-te)||0),100*((1-ge-te)/(1-te)||0),100*((1-be-te)/(1-te)||0),100*te]},I.rgb.keyword=function($){var te=w[$];if(te)return te;var ae,ge,be,Ce=1/0;for(var De in Co)if(Co.hasOwnProperty(De)){var Xe=(ge=$,be=Co[De],Math.pow(ge[0]-be[0],2)+Math.pow(ge[1]-be[1],2)+Math.pow(ge[2]-be[2],2));Xe<Ce&&(Ce=Xe,ae=De)}return ae},I.keyword.rgb=function($){return Co[$]},I.rgb.xyz=function($){var te=$[0]/255,ae=$[1]/255,ge=$[2]/255;return[100*(.4124*(te=te>.04045?Math.pow((te+.055)/1.055,2.4):te/12.92)+.3576*(ae=ae>.04045?Math.pow((ae+.055)/1.055,2.4):ae/12.92)+.1805*(ge=ge>.04045?Math.pow((ge+.055)/1.055,2.4):ge/12.92)),100*(.2126*te+.7152*ae+.0722*ge),100*(.0193*te+.1192*ae+.9505*ge)]},I.rgb.lab=function($){var te=I.rgb.xyz($),ae=te[0],ge=te[1],be=te[2];return ge/=100,be/=108.883,ae=(ae/=95.047)>.008856?Math.pow(ae,1/3):7.787*ae+16/116,[116*(ge=ge>.008856?Math.pow(ge,1/3):7.787*ge+16/116)-16,500*(ae-ge),200*(ge-(be=be>.008856?Math.pow(be,1/3):7.787*be+16/116))]},I.hsl.rgb=function($){var te,ae,ge,be,Ce,De=$[0]/360,Ne=$[1]/100,Xe=$[2]/100;if(0===Ne)return[Ce=255*Xe,Ce,Ce];te=2*Xe-(ae=Xe<.5?Xe*(1+Ne):Xe+Ne-Xe*Ne),be=[0,0,0];for(var ft=0;ft<3;ft++)(ge=De+1/3*-(ft-1))<0&&ge++,ge>1&&ge--,be[ft]=255*(Ce=6*ge<1?te+6*(ae-te)*ge:2*ge<1?ae:3*ge<2?te+(ae-te)*(2/3-ge)*6:te);return be},I.hsl.hsv=function($){var te=$[0],ae=$[1]/100,ge=$[2]/100,be=ae,Ce=Math.max(ge,.01);return ae*=(ge*=2)<=1?ge:2-ge,be*=Ce<=1?Ce:2-Ce,[te,100*(0===ge?2*be/(Ce+be):2*ae/(ge+ae)),(ge+ae)/2*100]},I.hsv.rgb=function($){var te=$[0]/60,ae=$[1]/100,ge=$[2]/100,be=Math.floor(te)%6,Ce=te-Math.floor(te),De=255*ge*(1-ae),Ne=255*ge*(1-ae*Ce),Xe=255*ge*(1-ae*(1-Ce));switch(ge*=255,be){case 0:return[ge,Xe,De];case 1:return[Ne,ge,De];case 2:return[De,ge,Xe];case 3:return[De,Ne,ge];case 4:return[Xe,De,ge];case 5:return[ge,De,Ne]}},I.hsv.hsl=function($){var te,ae,ge,be=$[0],Ce=$[1]/100,De=$[2]/100,Ne=Math.max(De,.01);return ge=(2-Ce)*De,ae=Ce*Ne,[be,100*(ae=(ae/=(te=(2-Ce)*Ne)<=1?te:2-te)||0),100*(ge/=2)]},I.hwb.rgb=function($){var te,ae,ge,be,Ce,De,Ne,Xe=$[0]/360,ft=$[1]/100,an=$[2]/100,jt=ft+an;switch(jt>1&&(ft/=jt,an/=jt),ge=6*Xe-(te=Math.floor(6*Xe)),0!=(1&te)&&(ge=1-ge),be=ft+ge*((ae=1-an)-ft),te){default:Ce=ae,De=be,Ne=ft;break;case 1:Ce=be,De=ae,Ne=ft;break;case 2:Ce=ft,De=ae,Ne=be;break;case 3:Ce=ft,De=be,Ne=ae;break;case 4:Ce=be,De=ft,Ne=ae;break;case 5:Ce=ae,De=ft,Ne=be}return[255*Ce,255*De,255*Ne]},I.cmyk.rgb=function($){var ae=$[1]/100,ge=$[2]/100,be=$[3]/100;return[255*(1-Math.min(1,$[0]/100*(1-be)+be)),255*(1-Math.min(1,ae*(1-be)+be)),255*(1-Math.min(1,ge*(1-be)+be))]},I.xyz.rgb=function($){var te,ae,ge,be=$[0]/100,Ce=$[1]/100,De=$[2]/100;return ae=-.9689*be+1.8758*Ce+.0415*De,ge=.0557*be+-.204*Ce+1.057*De,te=(te=3.2406*be+-1.5372*Ce+-.4986*De)>.0031308?1.055*Math.pow(te,1/2.4)-.055:12.92*te,ae=ae>.0031308?1.055*Math.pow(ae,1/2.4)-.055:12.92*ae,ge=ge>.0031308?1.055*Math.pow(ge,1/2.4)-.055:12.92*ge,[255*(te=Math.min(Math.max(0,te),1)),255*(ae=Math.min(Math.max(0,ae),1)),255*(ge=Math.min(Math.max(0,ge),1))]},I.xyz.lab=function($){var te=$[0],ae=$[1],ge=$[2];return ae/=100,ge/=108.883,te=(te/=95.047)>.008856?Math.pow(te,1/3):7.787*te+16/116,[116*(ae=ae>.008856?Math.pow(ae,1/3):7.787*ae+16/116)-16,500*(te-ae),200*(ae-(ge=ge>.008856?Math.pow(ge,1/3):7.787*ge+16/116))]},I.lab.xyz=function($){var te,ae,ge;te=$[1]/500+(ae=($[0]+16)/116),ge=ae-$[2]/200;var Ce=Math.pow(ae,3),De=Math.pow(te,3),Ne=Math.pow(ge,3);return ae=Ce>.008856?Ce:(ae-16/116)/7.787,te=De>.008856?De:(te-16/116)/7.787,ge=Ne>.008856?Ne:(ge-16/116)/7.787,[te*=95.047,ae*=100,ge*=108.883]},I.lab.lch=function($){var te,ae=$[0],ge=$[1],be=$[2];return(te=360*Math.atan2(be,ge)/2/Math.PI)<0&&(te+=360),[ae,Math.sqrt(ge*ge+be*be),te]},I.lch.lab=function($){var te,ge=$[1];return te=$[2]/360*2*Math.PI,[$[0],ge*Math.cos(te),ge*Math.sin(te)]},I.rgb.ansi16=function($){var te=$[0],ae=$[1],ge=$[2],be=1 in arguments?arguments[1]:I.rgb.hsv($)[2];if(0===(be=Math.round(be/50)))return 30;var Ce=30+(Math.round(ge/255)<<2|Math.round(ae/255)<<1|Math.round(te/255));return 2===be&&(Ce+=60),Ce},I.hsv.ansi16=function($){return I.rgb.ansi16(I.hsv.rgb($),$[2])},I.rgb.ansi256=function($){var te=$[0],ae=$[1],ge=$[2];return te===ae&&ae===ge?te<8?16:te>248?231:Math.round((te-8)/247*24)+232:16+36*Math.round(te/255*5)+6*Math.round(ae/255*5)+Math.round(ge/255*5)},I.ansi16.rgb=function($){var te=$%10;if(0===te||7===te)return $>50&&(te+=3.5),[te=te/10.5*255,te,te];var ae=.5*(1+~~($>50));return[(1&te)*ae*255,(te>>1&1)*ae*255,(te>>2&1)*ae*255]},I.ansi256.rgb=function($){if($>=232){var te=10*($-232)+8;return[te,te,te]}var ae;return $-=16,[Math.floor($/36)/5*255,Math.floor((ae=$%36)/6)/5*255,ae%6/5*255]},I.rgb.hex=function($){var te=(((255&Math.round($[0]))<<16)+((255&Math.round($[1]))<<8)+(255&Math.round($[2]))).toString(16).toUpperCase();return"000000".substring(te.length)+te},I.hex.rgb=function($){var te=$.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!te)return[0,0,0];var ae=te[0];3===te[0].length&&(ae=ae.split("").map(function(be){return be+be}).join(""));var ge=parseInt(ae,16);return[ge>>16&255,ge>>8&255,255&ge]},I.rgb.hcg=function($){var te,ae=$[0]/255,ge=$[1]/255,be=$[2]/255,Ce=Math.max(Math.max(ae,ge),be),De=Math.min(Math.min(ae,ge),be),Ne=Ce-De;return te=Ne<=0?0:Ce===ae?(ge-be)/Ne%6:Ce===ge?2+(be-ae)/Ne:4+(ae-ge)/Ne+4,te/=6,[360*(te%=1),100*Ne,100*(Ne<1?De/(1-Ne):0)]},I.hsl.hcg=function($){var ge,te=$[1]/100,ae=$[2]/100,be=0;return(ge=ae<.5?2*te*ae:2*te*(1-ae))<1&&(be=(ae-.5*ge)/(1-ge)),[$[0],100*ge,100*be]},I.hsv.hcg=function($){var ae=$[2]/100,ge=$[1]/100*ae,be=0;return ge<1&&(be=(ae-ge)/(1-ge)),[$[0],100*ge,100*be]},I.hcg.rgb=function($){var ae=$[1]/100,ge=$[2]/100;if(0===ae)return[255*ge,255*ge,255*ge];var be,Ce=[0,0,0],De=$[0]/360%1*6,Ne=De%1,Xe=1-Ne;switch(Math.floor(De)){case 0:Ce[0]=1,Ce[1]=Ne,Ce[2]=0;break;case 1:Ce[0]=Xe,Ce[1]=1,Ce[2]=0;break;case 2:Ce[0]=0,Ce[1]=1,Ce[2]=Ne;break;case 3:Ce[0]=0,Ce[1]=Xe,Ce[2]=1;break;case 4:Ce[0]=Ne,Ce[1]=0,Ce[2]=1;break;default:Ce[0]=1,Ce[1]=0,Ce[2]=Xe}return[255*(ae*Ce[0]+(be=(1-ae)*ge)),255*(ae*Ce[1]+be),255*(ae*Ce[2]+be)]},I.hcg.hsv=function($){var te=$[1]/100,ae=te+$[2]/100*(1-te),ge=0;return ae>0&&(ge=te/ae),[$[0],100*ge,100*ae]},I.hcg.hsl=function($){var te=$[1]/100,ae=$[2]/100*(1-te)+.5*te,ge=0;return ae>0&&ae<.5?ge=te/(2*ae):ae>=.5&&ae<1&&(ge=te/(2*(1-ae))),[$[0],100*ge,100*ae]},I.hcg.hwb=function($){var te=$[1]/100,ae=te+$[2]/100*(1-te);return[$[0],100*(ae-te),100*(1-ae)]},I.hwb.hcg=function($){var ae=1-$[2]/100,ge=ae-$[1]/100,be=0;return ge<1&&(be=(ae-ge)/(1-ge)),[$[0],100*ge,100*be]},I.apple.rgb=function($){return[$[0]/65535*255,$[1]/65535*255,$[2]/65535*255]},I.rgb.apple=function($){return[$[0]/255*65535,$[1]/255*65535,$[2]/255*65535]},I.gray.rgb=function($){return[$[0]/100*255,$[0]/100*255,$[0]/100*255]},I.gray.hsl=I.gray.hsv=function($){return[0,0,$[0]]},I.gray.hwb=function($){return[0,100,$[0]]},I.gray.cmyk=function($){return[0,0,0,$[0]]},I.gray.lab=function($){return[$[0],0,0]},I.gray.hex=function($){var te=255&Math.round($[0]/100*255),ae=((te<<16)+(te<<8)+te).toString(16).toUpperCase();return"000000".substring(ae.length)+ae},I.rgb.gray=function($){return[($[0]+$[1]+$[2])/3/255*100]}}(w={exports:{}}),w.exports);function Zn(m,w){return function(T){return w(m(T))}}function ht(m,w){for(var T=[w[m].parent,m],I=Yr[w[m].parent][m],N=w[m].parent;w[N].parent;)T.unshift(w[N].parent),I=Zn(Yr[w[N].parent][N],I),N=w[N].parent;return I.conversion=T,I}var En={};Object.keys(Yr).forEach(function(m){En[m]={},Object.defineProperty(En[m],"channels",{value:Yr[m].channels}),Object.defineProperty(En[m],"labels",{value:Yr[m].labels});var w=function(T){for(var I=function(m){var w=function(){for(var ae={},ge=Object.keys(Yr),be=ge.length,Ce=0;Ce<be;Ce++)ae[ge[Ce]]={distance:-1,parent:null};return ae}(),T=[m];for(w[m].distance=0;T.length;)for(var I=T.pop(),N=Object.keys(Yr[I]),j=N.length,q=0;q<j;q++){var $=N[q],te=w[$];-1===te.distance&&(te.distance=w[I].distance+1,te.parent=I,T.unshift($))}return w}(T),N={},j=Object.keys(I),q=j.length,$=0;$<q;$++){var te=j[$];null!==I[te].parent&&(N[te]=ht(te,I))}return N}(m);Object.keys(w).forEach(function(T){var N,j,I=w[T];En[m][T]=(j=function(q){if(null==q)return q;arguments.length>1&&(q=Array.prototype.slice.call(arguments));var $=N(q);if("object"==typeof $)for(var te=$.length,ae=0;ae<te;ae++)$[ae]=Math.round($[ae]);return $},"conversion"in(N=I)&&(j.conversion=N.conversion),j),En[m][T].raw=function(N){var j=function(q){return null==q?q:(arguments.length>1&&(q=Array.prototype.slice.call(arguments)),N(q))};return"conversion"in N&&(j.conversion=N.conversion),j}(I)})});var ze=En,Ut={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Jn={getRgba:lr,getHsla:Zt,getRgb:function(m){var w=lr(m);return w&&w.slice(0,3)},getHsl:function(m){var w=Zt(m);return w&&w.slice(0,3)},getHwb:Eo,getAlpha:function(m){var w=lr(m);if(w||(w=Zt(m))||(w=Eo(m)))return w[3]},hexString:function(m,w){return w=void 0!==w&&3===m.length?w:m[3],"#"+xr(m[0])+xr(m[1])+xr(m[2])+(w>=0&&w<1?xr(Math.round(255*w)):"")},rgbString:function(m,w){return w<1||m[3]&&m[3]<1?cs(m,w):"rgb("+m[0]+", "+m[1]+", "+m[2]+")"},rgbaString:cs,percentString:function(m,w){return w<1||m[3]&&m[3]<1?Bi(m,w):"rgb("+Math.round(m[0]/255*100)+"%, "+Math.round(m[1]/255*100)+"%, "+Math.round(m[2]/255*100)+"%)"},percentaString:Bi,hslString:function(m,w){return w<1||m[3]&&m[3]<1?Gn(m,w):"hsl("+m[0]+", "+m[1]+"%, "+m[2]+"%)"},hslaString:Gn,hwbString:function(m,w){return void 0===w&&(w=void 0!==m[3]?m[3]:1),"hwb("+m[0]+", "+m[1]+"%, "+m[2]+"%"+(void 0!==w&&1!==w?", "+w:"")+")"},keyword:function(m){return Fn[m.slice(0,3)]}};function lr(m){if(m){var w=[0,0,0],T=1,I=m.match(/^#([a-fA-F0-9]{3,4})$/i),N="";if(I){N=(I=I[1])[3];for(var j=0;j<w.length;j++)w[j]=parseInt(I[j]+I[j],16);N&&(T=Math.round(parseInt(N+N,16)/255*100)/100)}else if(I=m.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(N=I[2],I=I[1],j=0;j<w.length;j++)w[j]=parseInt(I.slice(2*j,2*j+2),16);N&&(T=Math.round(parseInt(N,16)/255*100)/100)}else if(I=m.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(j=0;j<w.length;j++)w[j]=parseInt(I[j+1]);T=parseFloat(I[4])}else if(I=m.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(j=0;j<w.length;j++)w[j]=Math.round(2.55*parseFloat(I[j+1]));T=parseFloat(I[4])}else if(I=m.match(/(\w+)/)){if("transparent"==I[1])return[0,0,0,0];if(!(w=Ut[I[1]]))return}for(j=0;j<w.length;j++)w[j]=Sn(w[j],0,255);return T=T||0==T?Sn(T,0,1):1,w[3]=T,w}}function Zt(m){if(m){var w=m.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(w){var T=parseFloat(w[4]);return[Sn(parseInt(w[1]),0,360),Sn(parseFloat(w[2]),0,100),Sn(parseFloat(w[3]),0,100),Sn(isNaN(T)?1:T,0,1)]}}}function Eo(m){if(m){var w=m.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(w){var T=parseFloat(w[4]);return[Sn(parseInt(w[1]),0,360),Sn(parseFloat(w[2]),0,100),Sn(parseFloat(w[3]),0,100),Sn(isNaN(T)?1:T,0,1)]}}}function cs(m,w){return void 0===w&&(w=void 0!==m[3]?m[3]:1),"rgba("+m[0]+", "+m[1]+", "+m[2]+", "+w+")"}function Bi(m,w){return"rgba("+Math.round(m[0]/255*100)+"%, "+Math.round(m[1]/255*100)+"%, "+Math.round(m[2]/255*100)+"%, "+(w||m[3]||1)+")"}function Gn(m,w){return void 0===w&&(w=void 0!==m[3]?m[3]:1),"hsla("+m[0]+", "+m[1]+"%, "+m[2]+"%, "+w+")"}function Sn(m,w,T){return Math.min(Math.max(w,m),T)}function xr(m){var w=m.toString(16).toUpperCase();return w.length<2?"0"+w:w}var Fn={};for(var un in Ut)Fn[Ut[un]]=un;var Qn=function(m){return m instanceof Qn?m:this instanceof Qn?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof m?(w=Jn.getRgba(m))?this.setValues("rgb",w):(w=Jn.getHsla(m))?this.setValues("hsl",w):(w=Jn.getHwb(m))&&this.setValues("hwb",w):"object"==typeof m&&(void 0!==(w=m).r||void 0!==w.red?this.setValues("rgb",w):void 0!==w.l||void 0!==w.lightness?this.setValues("hsl",w):void 0!==w.v||void 0!==w.value?this.setValues("hsv",w):void 0!==w.w||void 0!==w.whiteness?this.setValues("hwb",w):void 0===w.c&&void 0===w.cyan||this.setValues("cmyk",w)))):new Qn(m);var w};Qn.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var m=this.values;return 1!==m.alpha?m.hwb.concat([m.alpha]):m.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var m=this.values;return m.rgb.concat([m.alpha])},hslaArray:function(){var m=this.values;return m.hsl.concat([m.alpha])},alpha:function(m){return void 0===m?this.values.alpha:(this.setValues("alpha",m),this)},red:function(m){return this.setChannel("rgb",0,m)},green:function(m){return this.setChannel("rgb",1,m)},blue:function(m){return this.setChannel("rgb",2,m)},hue:function(m){return m&&(m=(m%=360)<0?360+m:m),this.setChannel("hsl",0,m)},saturation:function(m){return this.setChannel("hsl",1,m)},lightness:function(m){return this.setChannel("hsl",2,m)},saturationv:function(m){return this.setChannel("hsv",1,m)},whiteness:function(m){return this.setChannel("hwb",1,m)},blackness:function(m){return this.setChannel("hwb",2,m)},value:function(m){return this.setChannel("hsv",2,m)},cyan:function(m){return this.setChannel("cmyk",0,m)},magenta:function(m){return this.setChannel("cmyk",1,m)},yellow:function(m){return this.setChannel("cmyk",2,m)},black:function(m){return this.setChannel("cmyk",3,m)},hexString:function(){return Jn.hexString(this.values.rgb)},rgbString:function(){return Jn.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return Jn.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return Jn.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return Jn.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return Jn.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return Jn.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return Jn.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var m=this.values.rgb;return m[0]<<16|m[1]<<8|m[2]},luminosity:function(){for(var m=this.values.rgb,w=[],T=0;T<m.length;T++){var I=m[T]/255;w[T]=I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4)}return.2126*w[0]+.7152*w[1]+.0722*w[2]},contrast:function(m){var w=this.luminosity(),T=m.luminosity();return w>T?(w+.05)/(T+.05):(T+.05)/(w+.05)},level:function(m){var w=this.contrast(m);return w>=7.1?"AAA":w>=4.5?"AA":""},dark:function(){var m=this.values.rgb;return(299*m[0]+587*m[1]+114*m[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var m=[],w=0;w<3;w++)m[w]=255-this.values.rgb[w];return this.setValues("rgb",m),this},lighten:function(m){var w=this.values.hsl;return w[2]+=w[2]*m,this.setValues("hsl",w),this},darken:function(m){var w=this.values.hsl;return w[2]-=w[2]*m,this.setValues("hsl",w),this},saturate:function(m){var w=this.values.hsl;return w[1]+=w[1]*m,this.setValues("hsl",w),this},desaturate:function(m){var w=this.values.hsl;return w[1]-=w[1]*m,this.setValues("hsl",w),this},whiten:function(m){var w=this.values.hwb;return w[1]+=w[1]*m,this.setValues("hwb",w),this},blacken:function(m){var w=this.values.hwb;return w[2]+=w[2]*m,this.setValues("hwb",w),this},greyscale:function(){var m=this.values.rgb,w=.3*m[0]+.59*m[1]+.11*m[2];return this.setValues("rgb",[w,w,w]),this},clearer:function(m){var w=this.values.alpha;return this.setValues("alpha",w-w*m),this},opaquer:function(m){var w=this.values.alpha;return this.setValues("alpha",w+w*m),this},rotate:function(m){var w=this.values.hsl,T=(w[0]+m)%360;return w[0]=T<0?360+T:T,this.setValues("hsl",w),this},mix:function(m,w){var T=m,I=void 0===w?.5:w,N=2*I-1,j=this.alpha()-T.alpha(),q=((N*j==-1?N:(N+j)/(1+N*j))+1)/2,$=1-q;return this.rgb(q*this.red()+$*T.red(),q*this.green()+$*T.green(),q*this.blue()+$*T.blue()).alpha(this.alpha()*I+T.alpha()*(1-I))},toJSON:function(){return this.rgb()},clone:function(){var m,w,T=new Qn,I=this.values,N=T.values;for(var j in I)I.hasOwnProperty(j)&&("[object Array]"===(w={}.toString.call(m=I[j]))?N[j]=m.slice(0):"[object Number]"===w?N[j]=m:console.error("unexpected color value:",m));return T}},Qn.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Qn.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Qn.prototype.getValues=function(m){for(var w=this.values,T={},I=0;I<m.length;I++)T[m.charAt(I)]=w[m][I];return 1!==w.alpha&&(T.a=w.alpha),T},Qn.prototype.setValues=function(m,w){var T,I,N=this.values,j=this.spaces,q=this.maxes,$=1;if(this.valid=!0,"alpha"===m)$=w;else if(w.length)N[m]=w.slice(0,m.length),$=w[m.length];else if(void 0!==w[m.charAt(0)]){for(T=0;T<m.length;T++)N[m][T]=w[m.charAt(T)];$=w.a}else if(void 0!==w[j[m][0]]){var te=j[m];for(T=0;T<m.length;T++)N[m][T]=w[te[T]];$=w.alpha}if(N.alpha=Math.max(0,Math.min(1,void 0===$?N.alpha:$)),"alpha"===m)return!1;for(T=0;T<m.length;T++)I=Math.max(0,Math.min(q[m][T],N[m][T])),N[m][T]=Math.round(I);for(var ae in j)ae!==m&&(N[ae]=ze[m][ae](N[m]));return!0},Qn.prototype.setSpace=function(m,w){var T=w[0];return void 0===T?this.getValues(m):("number"==typeof T&&(T=Array.prototype.slice.call(w)),this.setValues(m,T),this)},Qn.prototype.setChannel=function(m,w,T){var I=this.values[m];return void 0===T?I[w]:(T===I[w]||(I[w]=T,this.setValues(m,I)),this)},"undefined"!=typeof window&&(window.Color=Qn);var Zi=Qn;function Er(m){return-1===["__proto__","prototype","constructor"].indexOf(m)}var dn,Rn={noop:function(){},uid:(dn=0,function(){return dn++}),isNullOrUndef:function(m){return null==m},isArray:function(m){if(Array.isArray&&Array.isArray(m))return!0;var w=Object.prototype.toString.call(m);return"[object"===w.substr(0,7)&&"Array]"===w.substr(-6)},isObject:function(m){return null!==m&&"[object Object]"===Object.prototype.toString.call(m)},isFinite:function(m){return("number"==typeof m||m instanceof Number)&&isFinite(m)},valueOrDefault:function(m,w){return void 0===m?w:m},valueAtIndexOrDefault:function(m,w,T){return Rn.valueOrDefault(Rn.isArray(m)?m[w]:m,T)},callback:function(m,w,T){if(m&&"function"==typeof m.call)return m.apply(T,w)},each:function(m,w,T,I){var N,j,q;if(Rn.isArray(m))if(j=m.length,I)for(N=j-1;N>=0;N--)w.call(T,m[N],N);else for(N=0;N<j;N++)w.call(T,m[N],N);else if(Rn.isObject(m))for(j=(q=Object.keys(m)).length,N=0;N<j;N++)w.call(T,m[q[N]],q[N])},arrayEquals:function(m,w){var T,I,N,j;if(!m||!w||m.length!==w.length)return!1;for(T=0,I=m.length;T<I;++T)if(j=w[T],(N=m[T])instanceof Array&&j instanceof Array){if(!Rn.arrayEquals(N,j))return!1}else if(N!==j)return!1;return!0},clone:function(m){if(Rn.isArray(m))return m.map(Rn.clone);if(Rn.isObject(m)){for(var w=Object.create(m),T=Object.keys(m),I=T.length,N=0;N<I;++N)w[T[N]]=Rn.clone(m[T[N]]);return w}return m},_merger:function(m,w,T,I){if(Er(m)){var N=w[m],j=T[m];Rn.isObject(N)&&Rn.isObject(j)?Rn.merge(N,j,I):w[m]=Rn.clone(j)}},_mergerIf:function(m,w,T){if(Er(m)){var I=w[m],N=T[m];Rn.isObject(I)&&Rn.isObject(N)?Rn.mergeIf(I,N):w.hasOwnProperty(m)||(w[m]=Rn.clone(N))}},merge:function(m,w,T){var I,N,j,q,$,te=Rn.isArray(w)?w:[w],ae=te.length;if(!Rn.isObject(m))return m;for(I=(T=T||{}).merger||Rn._merger,N=0;N<ae;++N)if(Rn.isObject(w=te[N]))for($=0,q=(j=Object.keys(w)).length;$<q;++$)I(j[$],m,w,T);return m},mergeIf:function(m,w){return Rn.merge(m,w,{merger:Rn._mergerIf})},extend:Object.assign||function(m){return Rn.merge(m,[].slice.call(arguments,1),{merger:function(w,T,I){T[w]=I[w]}})},inherits:function(m){var w=this,T=m&&m.hasOwnProperty("constructor")?m.constructor:function(){return w.apply(this,arguments)},I=function(){this.constructor=T};return I.prototype=w.prototype,T.prototype=new I,T.extend=Rn.inherits,m&&Rn.extend(T.prototype,m),T.__super__=w.prototype,T},_deprecated:function(m,w,T,I){void 0!==w&&console.warn(m+': "'+T+'" is deprecated. Please use "'+I+'" instead')}},_e=Rn;Rn.callCallback=Rn.callback,Rn.indexOf=function(m,w,T){return Array.prototype.indexOf.call(m,w,T)},Rn.getValueOrDefault=Rn.valueOrDefault,Rn.getValueAtIndexOrDefault=Rn.valueAtIndexOrDefault;var Dn={linear:function(m){return m},easeInQuad:function(m){return m*m},easeOutQuad:function(m){return-m*(m-2)},easeInOutQuad:function(m){return(m/=.5)<1?.5*m*m:-.5*(--m*(m-2)-1)},easeInCubic:function(m){return m*m*m},easeOutCubic:function(m){return(m-=1)*m*m+1},easeInOutCubic:function(m){return(m/=.5)<1?.5*m*m*m:.5*((m-=2)*m*m+2)},easeInQuart:function(m){return m*m*m*m},easeOutQuart:function(m){return-((m-=1)*m*m*m-1)},easeInOutQuart:function(m){return(m/=.5)<1?.5*m*m*m*m:-.5*((m-=2)*m*m*m-2)},easeInQuint:function(m){return m*m*m*m*m},easeOutQuint:function(m){return(m-=1)*m*m*m*m+1},easeInOutQuint:function(m){return(m/=.5)<1?.5*m*m*m*m*m:.5*((m-=2)*m*m*m*m+2)},easeInSine:function(m){return 1-Math.cos(m*(Math.PI/2))},easeOutSine:function(m){return Math.sin(m*(Math.PI/2))},easeInOutSine:function(m){return-.5*(Math.cos(Math.PI*m)-1)},easeInExpo:function(m){return 0===m?0:Math.pow(2,10*(m-1))},easeOutExpo:function(m){return 1===m?1:1-Math.pow(2,-10*m)},easeInOutExpo:function(m){return 0===m?0:1===m?1:(m/=.5)<1?.5*Math.pow(2,10*(m-1)):.5*(2-Math.pow(2,-10*--m))},easeInCirc:function(m){return m>=1?m:-(Math.sqrt(1-m*m)-1)},easeOutCirc:function(m){return Math.sqrt(1-(m-=1)*m)},easeInOutCirc:function(m){return(m/=.5)<1?-.5*(Math.sqrt(1-m*m)-1):.5*(Math.sqrt(1-(m-=2)*m)+1)},easeInElastic:function(m){var w=1.70158,T=0,I=1;return 0===m?0:1===m?1:(T||(T=.3),I<1?(I=1,w=T/4):w=T/(2*Math.PI)*Math.asin(1/I),-I*Math.pow(2,10*(m-=1))*Math.sin((m-w)*(2*Math.PI)/T))},easeOutElastic:function(m){var w=1.70158,T=0,I=1;return 0===m?0:1===m?1:(T||(T=.3),I<1?(I=1,w=T/4):w=T/(2*Math.PI)*Math.asin(1/I),I*Math.pow(2,-10*m)*Math.sin((m-w)*(2*Math.PI)/T)+1)},easeInOutElastic:function(m){var w=1.70158,T=0,I=1;return 0===m?0:2==(m/=.5)?1:(T||(T=.45),I<1?(I=1,w=T/4):w=T/(2*Math.PI)*Math.asin(1/I),m<1?I*Math.pow(2,10*(m-=1))*Math.sin((m-w)*(2*Math.PI)/T)*-.5:I*Math.pow(2,-10*(m-=1))*Math.sin((m-w)*(2*Math.PI)/T)*.5+1)},easeInBack:function(m){var w=1.70158;return m*m*((w+1)*m-w)},easeOutBack:function(m){var w=1.70158;return(m-=1)*m*((w+1)*m+w)+1},easeInOutBack:function(m){var w=1.70158;return(m/=.5)<1?m*m*((1+(w*=1.525))*m-w)*.5:.5*((m-=2)*m*((1+(w*=1.525))*m+w)+2)},easeInBounce:function(m){return 1-Dn.easeOutBounce(1-m)},easeOutBounce:function(m){return m<1/2.75?7.5625*m*m:m<2/2.75?7.5625*(m-=1.5/2.75)*m+.75:m<2.5/2.75?7.5625*(m-=2.25/2.75)*m+.9375:7.5625*(m-=2.625/2.75)*m+.984375},easeInOutBounce:function(m){return m<.5?.5*Dn.easeInBounce(2*m):.5*Dn.easeOutBounce(2*m-1)+.5}},me={effects:Dn};_e.easingEffects=Dn;var Kt=Math.PI,Pr=Kt/180,_r=2*Kt,ro=Kt/2,Nn=Kt/4,ar=2*Kt/3,rn={clear:function(m){m.ctx.clearRect(0,0,m.width,m.height)},roundedRect:function(m,w,T,I,N,j){if(j){var q=Math.min(j,N/2,I/2),$=w+q,te=T+q,ae=w+I-q,ge=T+N-q;m.moveTo(w,te),$<ae&&te<ge?(m.arc($,te,q,-Kt,-ro),m.arc(ae,te,q,-ro,0),m.arc(ae,ge,q,0,ro),m.arc($,ge,q,ro,Kt)):$<ae?(m.moveTo($,T),m.arc(ae,te,q,-ro,ro),m.arc($,te,q,ro,Kt+ro)):te<ge?(m.arc($,te,q,-Kt,0),m.arc($,ge,q,0,Kt)):m.arc($,te,q,-Kt,Kt),m.closePath(),m.moveTo(w,T)}else m.rect(w,T,I,N)},drawPoint:function(m,w,T,I,N,j){var q,$,te,ae,ge,be=(j||0)*Pr;if(w&&"object"==typeof w&&("[object HTMLImageElement]"===(q=w.toString())||"[object HTMLCanvasElement]"===q))return m.save(),m.translate(I,N),m.rotate(be),m.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),void m.restore();if(!(isNaN(T)||T<=0)){switch(m.beginPath(),w){default:m.arc(I,N,T,0,_r),m.closePath();break;case"triangle":m.moveTo(I+Math.sin(be)*T,N-Math.cos(be)*T),be+=ar,m.lineTo(I+Math.sin(be)*T,N-Math.cos(be)*T),be+=ar,m.lineTo(I+Math.sin(be)*T,N-Math.cos(be)*T),m.closePath();break;case"rectRounded":ae=T-(ge=.516*T),$=Math.cos(be+Nn)*ae,te=Math.sin(be+Nn)*ae,m.arc(I-$,N-te,ge,be-Kt,be-ro),m.arc(I+te,N-$,ge,be-ro,be),m.arc(I+$,N+te,ge,be,be+ro),m.arc(I-te,N+$,ge,be+ro,be+Kt),m.closePath();break;case"rect":if(!j){ae=Math.SQRT1_2*T,m.rect(I-ae,N-ae,2*ae,2*ae);break}be+=Nn;case"rectRot":$=Math.cos(be)*T,te=Math.sin(be)*T,m.moveTo(I-$,N-te),m.lineTo(I+te,N-$),m.lineTo(I+$,N+te),m.lineTo(I-te,N+$),m.closePath();break;case"crossRot":be+=Nn;case"cross":$=Math.cos(be)*T,te=Math.sin(be)*T,m.moveTo(I-$,N-te),m.lineTo(I+$,N+te),m.moveTo(I+te,N-$),m.lineTo(I-te,N+$);break;case"star":$=Math.cos(be)*T,te=Math.sin(be)*T,m.moveTo(I-$,N-te),m.lineTo(I+$,N+te),m.moveTo(I+te,N-$),m.lineTo(I-te,N+$),be+=Nn,$=Math.cos(be)*T,te=Math.sin(be)*T,m.moveTo(I-$,N-te),m.lineTo(I+$,N+te),m.moveTo(I+te,N-$),m.lineTo(I-te,N+$);break;case"line":$=Math.cos(be)*T,te=Math.sin(be)*T,m.moveTo(I-$,N-te),m.lineTo(I+$,N+te);break;case"dash":m.moveTo(I,N),m.lineTo(I+Math.cos(be)*T,N+Math.sin(be)*T)}m.fill(),m.stroke()}},_isPointInArea:function(m,w){return m.x>w.left-1e-6&&m.x<w.right+1e-6&&m.y>w.top-1e-6&&m.y<w.bottom+1e-6},clipArea:function(m,w){m.save(),m.beginPath(),m.rect(w.left,w.top,w.right-w.left,w.bottom-w.top),m.clip()},unclipArea:function(m){m.restore()},lineTo:function(m,w,T,I){var N=T.steppedLine;if(N){if("middle"===N){var j=(w.x+T.x)/2;m.lineTo(j,I?T.y:w.y),m.lineTo(j,I?w.y:T.y)}else"after"===N&&!I||"after"!==N&&I?m.lineTo(w.x,T.y):m.lineTo(T.x,w.y);m.lineTo(T.x,T.y)}else T.tension?m.bezierCurveTo(I?w.controlPointPreviousX:w.controlPointNextX,I?w.controlPointPreviousY:w.controlPointNextY,I?T.controlPointNextX:T.controlPointPreviousX,I?T.controlPointNextY:T.controlPointPreviousY,T.x,T.y):m.lineTo(T.x,T.y)}},Mt=rn;_e.clear=rn.clear,_e.drawRoundedRectangle=function(m){m.beginPath(),rn.roundedRect.apply(rn,arguments)};var tr={_set:function(m,w){return _e.merge(this[m]||(this[m]={}),w)}};tr._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var xt=tr,on=_e.valueOrDefault,Jo={toLineHeight:function(m,w){var T=(""+m).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!T||"normal"===T[1])return 1.2*w;switch(m=+T[2],T[3]){case"px":return m;case"%":m/=100}return w*m},toPadding:function(m){var w,T,I,N;return _e.isObject(m)?(w=+m.top||0,T=+m.right||0,I=+m.bottom||0,N=+m.left||0):w=T=I=N=+m||0,{top:w,right:T,bottom:I,left:N,height:w+I,width:N+T}},_parseFont:function(m){var N,w=xt.global,T=on(m.fontSize,w.defaultFontSize),I={family:on(m.fontFamily,w.defaultFontFamily),lineHeight:_e.options.toLineHeight(on(m.lineHeight,w.defaultLineHeight),T),size:T,style:on(m.fontStyle,w.defaultFontStyle),weight:null,string:""};return I.string=!(N=I)||_e.isNullOrUndef(N.size)||_e.isNullOrUndef(N.family)?null:(N.style?N.style+" ":"")+(N.weight?N.weight+" ":"")+N.size+"px "+N.family,I},resolve:function(m,w,T,I){var N,j,q,$=!0;for(N=0,j=m.length;N<j;++N)if(void 0!==(q=m[N])&&(void 0!==w&&"function"==typeof q&&(q=q(w),$=!1),void 0!==T&&_e.isArray(q)&&(q=q[T],$=!1),void 0!==q))return I&&!$&&(I.cacheable=!1),q}},Ao={_factorize:function(m){var w,T=[],I=Math.sqrt(m);for(w=1;w<I;w++)m%w==0&&(T.push(w),T.push(m/w));return I===(0|I)&&T.push(I),T.sort(function(N,j){return N-j}).pop(),T},log10:Math.log10||function(m){var w=Math.log(m)*Math.LOG10E,T=Math.round(w);return m===Math.pow(10,T)?T:w}},hr=Ao;_e.log10=Ao.log10;var pe=_e,je=Mt,gi=Jo,Es=hr;pe.easing=me,pe.canvas=je,pe.options=gi,pe.math=Es,pe.rtl={getRtlAdapter:function(m,w,T){return m?(I=w,N=T,{x:function(j){return I+I+N-j},setWidth:function(j){N=j},textAlign:function(j){return"center"===j?j:"right"===j?"left":"right"},xPlus:function(j,q){return j-q},leftForLtr:function(j,q){return j-q}}):{x:function(I){return I},setWidth:function(I){},textAlign:function(I){return I},xPlus:function(I,N){return I+N},leftForLtr:function(I,N){return I}};var I,N},overrideTextDirection:function(m,w){var T,I;"ltr"!==w&&"rtl"!==w||(I=[(T=m.canvas.style).getPropertyValue("direction"),T.getPropertyPriority("direction")],T.setProperty("direction",w,"important"),m.prevTextDirection=I)},restoreTextDirection:function(m){var w=m.prevTextDirection;void 0!==w&&(delete m.prevTextDirection,m.canvas.style.setProperty("direction",w[0],w[1]))}};var sr=function(m){pe.extend(this,m),this.initialize.apply(this,arguments)};pe.extend(sr.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var m=this;return m._view||(m._view=pe.extend({},m._model)),m._start={},m},transition:function(m){var w=this,T=w._model,I=w._start,N=w._view;return T&&1!==m?(N||(N=w._view={}),I||(I=w._start={}),function(j,q,$,te){var ae,ge,be,Ce,De,Ne,Xe,ft,an,jt=Object.keys($);for(ae=0,ge=jt.length;ae<ge;++ae)if(Ne=$[be=jt[ae]],q.hasOwnProperty(be)||(q[be]=Ne),(Ce=q[be])!==Ne&&"_"!==be[0]){if(j.hasOwnProperty(be)||(j[be]=Ce),(Xe=typeof Ne)==typeof(De=j[be]))if("string"===Xe){if((ft=Zi(De)).valid&&(an=Zi(Ne)).valid){q[be]=an.mix(ft,te).rgbString();continue}}else if(pe.isFinite(De)&&pe.isFinite(Ne)){q[be]=De+(Ne-De)*te;continue}q[be]=Ne}}(I,N,T,m),w):(w._view=pe.extend({},T),w._start=null,w)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return pe.isNumber(this._model.x)&&pe.isNumber(this._model.y)}}),sr.extend=pe.inherits;var zi=sr,ds=zi.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),ia=ds;Object.defineProperty(ds.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(ds.prototype,"chartInstance",{get:function(){return this.chart},set:function(m){this.chart=m}}),xt._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:pe.noop,onComplete:pe.noop}});var Ps={animations:[],request:null,addAnimation:function(m,w,T,I){var N,j,q=this.animations;for(w.chart=m,w.startTime=Date.now(),w.duration=T,I||(m.animating=!0),N=0,j=q.length;N<j;++N)if(q[N].chart===m)return void(q[N]=w);q.push(w),1===q.length&&this.requestAnimationFrame()},cancelAnimation:function(m){var w=pe.findIndex(this.animations,function(T){return T.chart===m});-1!==w&&(this.animations.splice(w,1),m.animating=!1)},requestAnimationFrame:function(){var m=this;null===m.request&&(m.request=pe.requestAnimFrame.call(window,function(){m.request=null,m.startDigest()}))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var m,w,T,I,N=this.animations,j=0;j<N.length;)w=(m=N[j]).chart,T=m.numSteps,I=Math.floor((Date.now()-m.startTime)/m.duration*T)+1,m.currentStep=Math.min(I,T),pe.callback(m.render,[w,m],w),pe.callback(m.onAnimationProgress,[m],w),m.currentStep>=T?(pe.callback(m.onAnimationComplete,[m],w),w.animating=!1,N.splice(j,1)):++j}},ut=pe.options.resolve,dt=["push","pop","shift","splice","unshift"];function Pt(m,w){var T=m._chartjs;if(T){var I=T.listeners,N=I.indexOf(w);-1!==N&&I.splice(N,1),I.length>0||(dt.forEach(function(j){delete m[j]}),delete m._chartjs)}}var qt=function(m,w){this.initialize(m,w)};pe.extend(qt.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(m,w){var T=this;T.chart=m,T.index=w,T.linkScales(),T.addElements(),T._type=T.getMeta().type},updateIndex:function(m){this.index=m},linkScales:function(){var m=this.getMeta(),w=this.chart,T=w.scales,I=this.getDataset(),N=w.options.scales;null!==m.xAxisID&&m.xAxisID in T&&!I.xAxisID||(m.xAxisID=I.xAxisID||N.xAxes[0].id),null!==m.yAxisID&&m.yAxisID in T&&!I.yAxisID||(m.yAxisID=I.yAxisID||N.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(m){return this.chart.scales[m]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&Pt(this._data,this)},createMetaDataset:function(){var m=this.datasetElementType;return m&&new m({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(m){var w=this.dataElementType;return w&&new w({_chart:this.chart,_datasetIndex:this.index,_index:m})},addElements:function(){var m,w,T=this.getMeta(),I=this.getDataset().data||[],N=T.data;for(m=0,w=I.length;m<w;++m)N[m]=N[m]||this.createMetaData(m);T.dataset=T.dataset||this.createMetaDataset()},addElementAndReset:function(m){var w=this.createMetaData(m);this.getMeta().data.splice(m,0,w),this.updateElement(w,m,!0)},buildOrUpdateElements:function(){var m,w,T=this,I=T.getDataset(),N=I.data||(I.data=[]);T._data!==N&&(T._data&&Pt(T._data,T),N&&Object.isExtensible(N)&&(w=T,(m=N)._chartjs?m._chartjs.listeners.push(w):(Object.defineProperty(m,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[w]}}),dt.forEach(function(j){var q="onData"+j.charAt(0).toUpperCase()+j.slice(1),$=m[j];Object.defineProperty(m,j,{configurable:!0,enumerable:!1,value:function(){var te=Array.prototype.slice.call(arguments),ae=$.apply(this,te);return pe.each(m._chartjs.listeners,function(ge){"function"==typeof ge[q]&&ge[q].apply(ge,te)}),ae}})}))),T._data=N),T.resyncElements()},_configure:function(){this._config=pe.merge(Object.create(null),[this.chart.options.datasets[this._type],this.getDataset()],{merger:function(m,w,T){"_meta"!==m&&"data"!==m&&pe._merger(m,w,T)}})},_update:function(m){this._configure(),this._cachedDataOpts=null,this.update(m)},update:pe.noop,transition:function(m){for(var w=this.getMeta(),T=w.data||[],I=T.length,N=0;N<I;++N)T[N].transition(m);w.dataset&&w.dataset.transition(m)},draw:function(){var m=this.getMeta(),w=m.data||[],T=w.length,I=0;for(m.dataset&&m.dataset.draw();I<T;++I)w[I].draw()},getStyle:function(m){var w,T=this.getMeta(),I=T.dataset;return this._configure(),!1!==(w=I&&void 0===m?this._resolveDatasetElementOptions(I||{}):this._resolveDataElementOptions(T.data[m=m||0]||{},m)).fill&&null!==w.fill||(w.backgroundColor=w.borderColor),w},_resolveDatasetElementOptions:function(m,w){var T,I,N,j,q=this,$=q.chart,te=q._config,ae=m.custom||{},ge=$.options.elements[q.datasetElementType.prototype._type]||{},be=q._datasetElementOptions,Ce={},De={chart:$,dataset:q.getDataset(),datasetIndex:q.index,hover:w};for(T=0,I=be.length;T<I;++T)N=be[T],j=w?"hover"+N.charAt(0).toUpperCase()+N.slice(1):N,Ce[N]=ut([ae[j],te[j],ge[j]],De);return Ce},_resolveDataElementOptions:function(m,w){var T=this,I=m&&m.custom,N=T._cachedDataOpts;if(N&&!I)return N;var j,q,$,te,ae=T.chart,ge=T._config,be=ae.options.elements[T.dataElementType.prototype._type]||{},Ce=T._dataElementOptions,De={},Ne={chart:ae,dataIndex:w,dataset:T.getDataset(),datasetIndex:T.index},Xe={cacheable:!I};if(I=I||{},pe.isArray(Ce))for(q=0,$=Ce.length;q<$;++q)De[te=Ce[q]]=ut([I[te],ge[te],be[te]],Ne,w,Xe);else for(q=0,$=(j=Object.keys(Ce)).length;q<$;++q)De[te=j[q]]=ut([I[te],ge[Ce[te]],ge[te],be[te]],Ne,w,Xe);return Xe.cacheable&&(T._cachedDataOpts=Object.freeze(De)),De},removeHoverStyle:function(m){pe.merge(m._model,m.$previousStyle||{}),delete m.$previousStyle},setHoverStyle:function(m){var w=this.chart.data.datasets[m._datasetIndex],T=m._index,I=m.custom||{},N=m._model,j=pe.getHoverColor;m.$previousStyle={backgroundColor:N.backgroundColor,borderColor:N.borderColor,borderWidth:N.borderWidth},N.backgroundColor=ut([I.hoverBackgroundColor,w.hoverBackgroundColor,j(N.backgroundColor)],void 0,T),N.borderColor=ut([I.hoverBorderColor,w.hoverBorderColor,j(N.borderColor)],void 0,T),N.borderWidth=ut([I.hoverBorderWidth,w.hoverBorderWidth,N.borderWidth],void 0,T)},_removeDatasetHoverStyle:function(){var m=this.getMeta().dataset;m&&this.removeHoverStyle(m)},_setDatasetHoverStyle:function(){var m,w,T,I,N,j,q=this.getMeta().dataset,$={};if(q){for(j=q._model,N=this._resolveDatasetElementOptions(q,!0),m=0,w=(I=Object.keys(N)).length;m<w;++m)$[T=I[m]]=j[T],j[T]=N[T];q.$previousStyle=$}},resyncElements:function(){var m=this.getMeta(),w=this.getDataset().data,T=m.data.length,I=w.length;I<T?m.data.splice(I,T-I):I>T&&this.insertElements(T,I-T)},insertElements:function(m,w){for(var T=0;T<w;++T)this.addElementAndReset(m+T)},onDataPush:function(){var m=arguments.length;this.insertElements(this.getDataset().data.length-m,m)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(m,w){this.getMeta().data.splice(m,w),this.insertElements(m,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),qt.extend=pe.inherits;var Cn=qt,hn=2*Math.PI;function St(m,w){var T=w.startAngle,I=w.endAngle,N=w.pixelMargin,j=N/w.outerRadius,q=w.x,$=w.y;m.beginPath(),m.arc(q,$,w.outerRadius,T-j,I+j),w.innerRadius>N?m.arc(q,$,w.innerRadius-N,I+(j=N/w.innerRadius),T-j,!0):m.arc(q,$,N,I+Math.PI/2,T-Math.PI/2),m.closePath(),m.clip()}xt._set("global",{elements:{arc:{backgroundColor:xt.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var Vn=zi.extend({_type:"arc",inLabelRange:function(m){var w=this._view;return!!w&&Math.pow(m-w.x,2)<Math.pow(w.radius+w.hoverRadius,2)},inRange:function(m,w){var T=this._view;if(T){for(var I=pe.getAngleFromPoint(T,{x:m,y:w}),N=I.angle,j=I.distance,q=T.startAngle,$=T.endAngle;$<q;)$+=hn;for(;N>$;)N-=hn;for(;N<q;)N+=hn;return N>=q&&N<=$&&j>=T.innerRadius&&j<=T.outerRadius}return!1},getCenterPoint:function(){var m=this._view,w=(m.startAngle+m.endAngle)/2,T=(m.innerRadius+m.outerRadius)/2;return{x:m.x+Math.cos(w)*T,y:m.y+Math.sin(w)*T}},getArea:function(){var m=this._view;return Math.PI*((m.endAngle-m.startAngle)/(2*Math.PI))*(Math.pow(m.outerRadius,2)-Math.pow(m.innerRadius,2))},tooltipPosition:function(){var m=this._view,w=m.startAngle+(m.endAngle-m.startAngle)/2,T=(m.outerRadius-m.innerRadius)/2+m.innerRadius;return{x:m.x+Math.cos(w)*T,y:m.y+Math.sin(w)*T}},draw:function(){var m,w=this._chart.ctx,T=this._view,I="inner"===T.borderAlign?.33:0,N={x:T.x,y:T.y,innerRadius:T.innerRadius,outerRadius:Math.max(T.outerRadius-I,0),pixelMargin:I,startAngle:T.startAngle,endAngle:T.endAngle,fullCircles:Math.floor(T.circumference/hn)};if(w.save(),w.fillStyle=T.backgroundColor,w.strokeStyle=T.borderColor,N.fullCircles){for(N.endAngle=N.startAngle+hn,w.beginPath(),w.arc(N.x,N.y,N.outerRadius,N.startAngle,N.endAngle),w.arc(N.x,N.y,N.innerRadius,N.endAngle,N.startAngle,!0),w.closePath(),m=0;m<N.fullCircles;++m)w.fill();N.endAngle=N.startAngle+T.circumference%hn}w.beginPath(),w.arc(N.x,N.y,N.outerRadius,N.startAngle,N.endAngle),w.arc(N.x,N.y,N.innerRadius,N.endAngle,N.startAngle,!0),w.closePath(),w.fill(),T.borderWidth&&function(m,w,T){var I="inner"===w.borderAlign;I?(m.lineWidth=2*w.borderWidth,m.lineJoin="round"):(m.lineWidth=w.borderWidth,m.lineJoin="bevel"),T.fullCircles&&function(N,j,q,$){var te,ae=q.endAngle;for($&&(q.endAngle=q.startAngle+hn,St(N,q),q.endAngle=ae,q.endAngle===q.startAngle&&q.fullCircles&&(q.endAngle+=hn,q.fullCircles--)),N.beginPath(),N.arc(q.x,q.y,q.innerRadius,q.startAngle+hn,q.startAngle,!0),te=0;te<q.fullCircles;++te)N.stroke();for(N.beginPath(),N.arc(q.x,q.y,j.outerRadius,q.startAngle,q.startAngle+hn),te=0;te<q.fullCircles;++te)N.stroke()}(m,w,T,I),I&&St(m,T),m.beginPath(),m.arc(T.x,T.y,w.outerRadius,T.startAngle,T.endAngle),m.arc(T.x,T.y,T.innerRadius,T.endAngle,T.startAngle,!0),m.closePath(),m.stroke()}(w,T,N),w.restore()}}),po=pe.valueOrDefault,si=xt.global.defaultColor;xt._set("global",{elements:{line:{tension:.4,backgroundColor:si,borderWidth:3,borderColor:si,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var mi=zi.extend({_type:"line",draw:function(){var m,w,T,I=this,N=I._view,j=I._chart.ctx,q=N.spanGaps,$=I._children.slice(),te=xt.global,ae=te.elements.line,ge=-1,be=I._loop;if($.length){if(I._loop){for(m=0;m<$.length;++m)if(w=pe.previousItem($,m),!$[m]._view.skip&&w._view.skip){$=$.slice(m).concat($.slice(0,m)),be=q;break}be&&$.push($[0])}for(j.save(),j.lineCap=N.borderCapStyle||ae.borderCapStyle,j.setLineDash&&j.setLineDash(N.borderDash||ae.borderDash),j.lineDashOffset=po(N.borderDashOffset,ae.borderDashOffset),j.lineJoin=N.borderJoinStyle||ae.borderJoinStyle,j.lineWidth=po(N.borderWidth,ae.borderWidth),j.strokeStyle=N.borderColor||te.defaultColor,j.beginPath(),(T=$[0]._view).skip||(j.moveTo(T.x,T.y),ge=0),m=1;m<$.length;++m)T=$[m]._view,w=-1===ge?pe.previousItem($,m):$[ge],T.skip||(ge!==m-1&&!q||-1===ge?j.moveTo(T.x,T.y):pe.canvas.lineTo(j,w._view,T),ge=m);be&&j.closePath(),j.stroke(),j.restore()}}}),lo=pe.valueOrDefault,tl=xt.global.defaultColor;function Fi(m){var w=this._view;return!!w&&Math.abs(m-w.x)<w.radius+w.hitRadius}xt._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:tl,borderColor:tl,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Ka=zi.extend({_type:"point",inRange:function(m,w){var T=this._view;return!!T&&Math.pow(m-T.x,2)+Math.pow(w-T.y,2)<Math.pow(T.hitRadius+T.radius,2)},inLabelRange:Fi,inXRange:Fi,inYRange:function(m){var w=this._view;return!!w&&Math.abs(m-w.y)<w.radius+w.hitRadius},getCenterPoint:function(){var m=this._view;return{x:m.x,y:m.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var m=this._view;return{x:m.x,y:m.y,padding:m.radius+m.borderWidth}},draw:function(m){var w=this._view,T=this._chart.ctx,I=w.pointStyle,N=w.rotation,j=w.radius,q=w.x,$=w.y,te=xt.global,ae=te.defaultColor;w.skip||(void 0===m||pe.canvas._isPointInArea(w,m))&&(T.strokeStyle=w.borderColor||ae,T.lineWidth=lo(w.borderWidth,te.elements.point.borderWidth),T.fillStyle=w.backgroundColor||ae,pe.canvas.drawPoint(T,I,j,q,$,N))}}),aa=xt.global.defaultColor;function Ja(m){return m&&void 0!==m.width}function H(m){var w,T,I,N,j;return Ja(m)?(w=m.x-(j=m.width/2),T=m.x+j,I=Math.min(m.y,m.base),N=Math.max(m.y,m.base)):(j=m.height/2,w=Math.min(m.x,m.base),T=Math.max(m.x,m.base),I=m.y-j,N=m.y+j),{left:w,top:I,right:T,bottom:N}}function fs(m,w,T){return m===w?T:m===T?w:m}function Pa(m,w,T){var I=null===w,N=null===T,j=!(!m||I&&N)&&H(m);return j&&(I||w>=j.left&&w<=j.right)&&(N||T>=j.top&&T<=j.bottom)}xt._set("global",{elements:{rectangle:{backgroundColor:aa,borderColor:aa,borderSkipped:"bottom",borderWidth:0}}});var fi=zi.extend({_type:"rectangle",draw:function(){var j,q,$,te,ae,m=this._chart.ctx,w=this._view,T=(q=H(j=w),ae=function(m,w,T){var I,N,j,q,ae,ge,be,$=m.borderWidth,te=(be={},(ge=(ae=m).borderSkipped)&&(ae.horizontal?ae.base>ae.x&&(ge=fs(ge,"left","right")):ae.base<ae.y&&(ge=fs(ge,"bottom","top")),be[ge]=!0),be);return pe.isObject($)?(I=+$.top||0,N=+$.right||0,j=+$.bottom||0,q=+$.left||0):I=N=j=q=+$||0,{t:te.top||I<0?0:I>T?T:I,r:te.right||N<0?0:N>w?w:N,b:te.bottom||j<0?0:j>T?T:j,l:te.left||q<0?0:q>w?w:q}}(j,($=q.right-q.left)/2,(te=q.bottom-q.top)/2),{outer:{x:q.left,y:q.top,w:$,h:te},inner:{x:q.left+ae.l,y:q.top+ae.t,w:$-ae.l-ae.r,h:te-ae.t-ae.b}}),I=T.outer,N=T.inner;m.fillStyle=w.backgroundColor,m.fillRect(I.x,I.y,I.w,I.h),I.w===N.w&&I.h===N.h||(m.save(),m.beginPath(),m.rect(I.x,I.y,I.w,I.h),m.clip(),m.fillStyle=w.borderColor,m.rect(N.x,N.y,N.w,N.h),m.fill("evenodd"),m.restore())},height:function(){var m=this._view;return m.base-m.y},inRange:function(m,w){return Pa(this._view,m,w)},inLabelRange:function(m,w){var T=this._view;return Ja(T)?Pa(T,m,null):Pa(T,null,w)},inXRange:function(m){return Pa(this._view,m,null)},inYRange:function(m){return Pa(this._view,null,m)},getCenterPoint:function(){var m,w,T=this._view;return Ja(T)?(m=T.x,w=(T.y+T.base)/2):(m=(T.x+T.base)/2,w=T.y),{x:m,y:w}},getArea:function(){var m=this._view;return Ja(m)?m.width*Math.abs(m.y-m.base):m.height*Math.abs(m.x-m.base)},tooltipPosition:function(){var m=this._view;return{x:m.x,y:m.y}}}),wn={},ri=mi,ao=Ka,bl=fi;wn.Arc=Vn,wn.Line=ri,wn.Point=ao,wn.Rectangle=bl;var yn=pe._deprecated,ot=pe.valueOrDefault;xt._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),xt._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var Me=Cn.extend({dataElementType:wn.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var m,w,T=this;Cn.prototype.initialize.apply(T,arguments),(m=T.getMeta()).stack=T.getDataset().stack,m.bar=!0,w=T._getIndexScale().options,yn("bar chart",w.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),yn("bar chart",w.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),yn("bar chart",w.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),yn("bar chart",T._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),yn("bar chart",w.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(m){var w,T,I=this.getMeta().data;for(this._ruler=this.getRuler(),w=0,T=I.length;w<T;++w)this.updateElement(I[w],w,m)},updateElement:function(m,w,T){var I=this,N=I.getMeta(),j=I.getDataset(),q=I._resolveDataElementOptions(m,w);m._xScale=I.getScaleForId(N.xAxisID),m._yScale=I.getScaleForId(N.yAxisID),m._datasetIndex=I.index,m._index=w,m._model={backgroundColor:q.backgroundColor,borderColor:q.borderColor,borderSkipped:q.borderSkipped,borderWidth:q.borderWidth,datasetLabel:j.label,label:I.chart.data.labels[w]},pe.isArray(j.data[w])&&(m._model.borderSkipped=null),I._updateElementGeometry(m,w,T,q),m.pivot()},_updateElementGeometry:function(m,w,T,I){var N=this,j=m._model,q=N._getValueScale(),$=q.getBasePixel(),te=q.isHorizontal(),ae=N._ruler||N.getRuler(),ge=N.calculateBarValuePixels(N.index,w,I),be=N.calculateBarIndexPixels(N.index,w,ae,I);j.horizontal=te,j.base=T?$:ge.base,j.x=te?T?$:ge.head:be.center,j.y=te?be.center:T?$:ge.head,j.height=te?be.size:void 0,j.width=te?void 0:be.size},_getStacks:function(m){var w,T,I=this._getIndexScale(),N=I._getMatchingVisibleMetas(this._type),j=I.options.stacked,q=N.length,$=[];for(w=0;w<q&&(T=N[w],(!1===j||-1===$.indexOf(T.stack)||void 0===j&&void 0===T.stack)&&$.push(T.stack),T.index!==m);++w);return $},getStackCount:function(){return this._getStacks().length},getStackIndex:function(m,w){var T=this._getStacks(m),I=void 0!==w?T.indexOf(w):-1;return-1===I?T.length-1:I},getRuler:function(){var m,w,T=this._getIndexScale(),I=[];for(m=0,w=this.getMeta().data.length;m<w;++m)I.push(T.getPixelForValue(null,m,this.index));return{pixels:I,start:T._startPixel,end:T._endPixel,stackCount:this.getStackCount(),scale:T}},calculateBarValuePixels:function(m,w,T){var I,N,j,q,$,te,ae,ge=this.chart,be=this._getValueScale(),Ce=be.isHorizontal(),De=ge.data.datasets,Ne=be._getMatchingVisibleMetas(this._type),Xe=be._parseValue(De[m].data[w]),ft=T.minBarLength,an=be.options.stacked,jt=this.getMeta().stack,Xt=void 0===Xe.start?0:Xe.max>=0&&Xe.min>=0?Xe.min:Xe.max,vn=void 0===Xe.start?Xe.end:Xe.max>=0&&Xe.min>=0?Xe.max-Xe.min:Xe.min-Xe.max,On=Ne.length;if(an||void 0===an&&void 0!==jt)for(I=0;I<On&&(N=Ne[I]).index!==m;++I)N.stack===jt&&(j=void 0===(ae=be._parseValue(De[N.index].data[w])).start?ae.end:ae.min>=0&&ae.max>=0?ae.max:ae.min,(Xe.min<0&&j<0||Xe.max>=0&&j>0)&&(Xt+=j));return q=be.getPixelForValue(Xt),te=($=be.getPixelForValue(Xt+vn))-q,void 0!==ft&&Math.abs(te)<ft&&(te=ft,$=vn>=0&&!Ce||vn<0&&Ce?q-ft:q+ft),{size:te,base:q,head:$,center:$+te/2}},calculateBarIndexPixels:function(m,w,T,I){var te,ae,ge,be,Ce,De,Ne,Xe,ft,N="flex"===I.barThickness?(De=(Ce=(ae=T).pixels)[te=w],Xe=te<Ce.length-1?Ce[te+1]:null,ft=(ge=I).categoryPercentage,null===(Ne=te>0?Ce[te-1]:null)&&(Ne=De-(null===Xe?ae.end-ae.start:Xe-De)),null===Xe&&(Xe=De+De-Ne),be=De-(De-Math.min(Ne,Xe))/2*ft,{chunk:Math.abs(Xe-Ne)/2*ft/ae.stackCount,ratio:ge.barPercentage,start:be}):function(m,w,T){var I,N,j=T.barThickness,q=w.stackCount,$=w.pixels[m],te=pe.isNullOrUndef(j)?function(ae,ge){var be,Ce,De,Ne,Xe=ae._length;for(De=1,Ne=ge.length;De<Ne;++De)Xe=Math.min(Xe,Math.abs(ge[De]-ge[De-1]));for(De=0,Ne=ae.getTicks().length;De<Ne;++De)Ce=ae.getPixelForTick(De),Xe=De>0?Math.min(Xe,Math.abs(Ce-be)):Xe,be=Ce;return Xe}(w.scale,w.pixels):-1;return pe.isNullOrUndef(j)?(I=te*T.categoryPercentage,N=T.barPercentage):(I=j*q,N=1),{chunk:I/q,ratio:N,start:$-I/2}}(w,T,I),j=this.getStackIndex(m,this.getMeta().stack),q=N.start+N.chunk*j+N.chunk/2,$=Math.min(ot(I.maxBarThickness,1/0),N.chunk*N.ratio);return{base:q-$/2,head:q+$/2,center:q,size:$}},draw:function(){var m=this.chart,w=this._getValueScale(),T=this.getMeta().data,I=this.getDataset(),N=T.length,j=0;for(pe.canvas.clipArea(m.ctx,m.chartArea);j<N;++j){var q=w._parseValue(I.data[j]);isNaN(q.min)||isNaN(q.max)||T[j].draw()}pe.canvas.unclipArea(m.ctx)},_resolveDataElementOptions:function(){var m=this,w=pe.extend({},Cn.prototype._resolveDataElementOptions.apply(m,arguments)),T=m._getIndexScale().options,I=m._getValueScale().options;return w.barPercentage=ot(T.barPercentage,w.barPercentage),w.barThickness=ot(T.barThickness,w.barThickness),w.categoryPercentage=ot(T.categoryPercentage,w.categoryPercentage),w.maxBarThickness=ot(T.maxBarThickness,w.maxBarThickness),w.minBarLength=ot(I.minBarLength,w.minBarLength),w}}),$e=pe.valueOrDefault,Pe=pe.options.resolve;xt._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(m,w){return(w.datasets[m.datasetIndex].label||"")+": ("+m.xLabel+", "+m.yLabel+", "+w.datasets[m.datasetIndex].data[m.index].r+")"}}}});var mt=Cn.extend({dataElementType:wn.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(m){var w=this,T=w.getMeta().data;pe.each(T,function(I,N){w.updateElement(I,N,m)})},updateElement:function(m,w,T){var I=this,N=I.getMeta(),j=m.custom||{},q=I.getScaleForId(N.xAxisID),$=I.getScaleForId(N.yAxisID),te=I._resolveDataElementOptions(m,w),ae=I.getDataset().data[w],ge=I.index,be=T?q.getPixelForDecimal(.5):q.getPixelForValue("object"==typeof ae?ae:NaN,w,ge),Ce=T?$.getBasePixel():$.getPixelForValue(ae,w,ge);m._xScale=q,m._yScale=$,m._options=te,m._datasetIndex=ge,m._index=w,m._model={backgroundColor:te.backgroundColor,borderColor:te.borderColor,borderWidth:te.borderWidth,hitRadius:te.hitRadius,pointStyle:te.pointStyle,rotation:te.rotation,radius:T?0:te.radius,skip:j.skip||isNaN(be)||isNaN(Ce),x:be,y:Ce},m.pivot()},setHoverStyle:function(m){var w=m._model,T=m._options,I=pe.getHoverColor;m.$previousStyle={backgroundColor:w.backgroundColor,borderColor:w.borderColor,borderWidth:w.borderWidth,radius:w.radius},w.backgroundColor=$e(T.hoverBackgroundColor,I(T.backgroundColor)),w.borderColor=$e(T.hoverBorderColor,I(T.borderColor)),w.borderWidth=$e(T.hoverBorderWidth,T.borderWidth),w.radius=T.radius+T.hoverRadius},_resolveDataElementOptions:function(m,w){var T=this,I=T.chart,N=T.getDataset(),j=m.custom||{},q=N.data[w]||{},$=Cn.prototype._resolveDataElementOptions.apply(T,arguments),te={chart:I,dataIndex:w,dataset:N,datasetIndex:T.index};return T._cachedDataOpts===$&&($=pe.extend({},$)),$.radius=Pe([j.radius,q.r,T._config.radius,I.options.elements.point.radius],te,w),$}}),lt=pe.valueOrDefault,pt=Math.PI,mn=2*pt,Qt=pt/2;xt._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(m){var w,T,I,N=document.createElement("ul"),j=m.data,q=j.datasets,$=j.labels;if(N.setAttribute("class",m.id+"-legend"),q.length)for(w=0,T=q[0].data.length;w<T;++w)(I=N.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=q[0].backgroundColor[w],$[w]&&I.appendChild(document.createTextNode($[w]));return N.outerHTML},legend:{labels:{generateLabels:function(m){var w=m.data;return w.labels.length&&w.datasets.length?w.labels.map(function(T,I){var N=m.getDatasetMeta(0),j=N.controller.getStyle(I);return{text:T,fillStyle:j.backgroundColor,strokeStyle:j.borderColor,lineWidth:j.borderWidth,hidden:isNaN(w.datasets[0].data[I])||N.data[I].hidden,index:I}}):[]}},onClick:function(m,w){var T,I,N,j=w.index,q=this.chart;for(T=0,I=(q.data.datasets||[]).length;T<I;++T)(N=q.getDatasetMeta(T)).data[j]&&(N.data[j].hidden=!N.data[j].hidden);q.update()}},cutoutPercentage:50,rotation:-Qt,circumference:mn,tooltips:{callbacks:{title:function(){return""},label:function(m,w){var T=w.labels[m.index],I=": "+w.datasets[m.datasetIndex].data[m.index];return pe.isArray(T)?(T=T.slice())[0]+=I:T+=I,T}}}});var ln=Cn.extend({dataElementType:wn.Arc,linkScales:pe.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(m){for(var w=0,T=0;T<m;++T)this.chart.isDatasetVisible(T)&&++w;return w},update:function(m){var I,N,j=this,q=j.chart,$=q.chartArea,te=q.options,ae=1,ge=1,be=0,Ce=0,De=j.getMeta(),Ne=De.data,Xe=te.cutoutPercentage/100||0,ft=te.circumference,an=j._getRingWeight(j.index);if(ft<mn){var jt=te.rotation%mn,Xt=(jt+=jt>=pt?-mn:jt<-pt?mn:0)+ft,vn=Math.cos(jt),On=Math.sin(jt),er=Math.cos(Xt),$r=Math.sin(Xt),Hr=jt<=0&&Xt>=0||Xt>=mn,br=jt<=Qt&&Xt>=Qt||Xt>=mn+Qt,Xo=jt<=-Qt&&Xt>=-Qt||Xt>=pt+Qt,xo=jt===-pt||Xt>=pt?-1:Math.min(vn,vn*Xe,er,er*Xe),Wr=Xo?-1:Math.min(On,On*Xe,$r,$r*Xe),gr=Hr?1:Math.max(vn,vn*Xe,er,er*Xe),gn=br?1:Math.max(On,On*Xe,$r,$r*Xe);ae=(gr-xo)/2,ge=(gn-Wr)/2,be=-(gr+xo)/2,Ce=-(gn+Wr)/2}for(I=0,N=Ne.length;I<N;++I)Ne[I]._options=j._resolveDataElementOptions(Ne[I],I);for(q.borderWidth=j.getMaxBorderWidth(),q.outerRadius=Math.max(Math.min(($.right-$.left-q.borderWidth)/ae,($.bottom-$.top-q.borderWidth)/ge)/2,0),q.innerRadius=Math.max(q.outerRadius*Xe,0),q.radiusLength=(q.outerRadius-q.innerRadius)/(j._getVisibleDatasetWeightTotal()||1),q.offsetX=be*q.outerRadius,q.offsetY=Ce*q.outerRadius,De.total=j.calculateTotal(),j.outerRadius=q.outerRadius-q.radiusLength*j._getRingWeightOffset(j.index),j.innerRadius=Math.max(j.outerRadius-q.radiusLength*an,0),I=0,N=Ne.length;I<N;++I)j.updateElement(Ne[I],I,m)},updateElement:function(m,w,T){var I=this,N=I.chart,j=N.chartArea,q=N.options,$=q.animation,te=(j.left+j.right)/2,ae=(j.top+j.bottom)/2,ge=q.rotation,be=q.rotation,Ce=I.getDataset(),De=T&&$.animateRotate||m.hidden?0:I.calculateCircumference(Ce.data[w])*(q.circumference/mn),ft=m._options||{};pe.extend(m,{_datasetIndex:I.index,_index:w,_model:{backgroundColor:ft.backgroundColor,borderColor:ft.borderColor,borderWidth:ft.borderWidth,borderAlign:ft.borderAlign,x:te+N.offsetX,y:ae+N.offsetY,startAngle:ge,endAngle:be,circumference:De,outerRadius:T&&$.animateScale?0:I.outerRadius,innerRadius:T&&$.animateScale?0:I.innerRadius,label:pe.valueAtIndexOrDefault(Ce.label,w,N.data.labels[w])}});var an=m._model;T&&$.animateRotate||(an.startAngle=0===w?q.rotation:I.getMeta().data[w-1]._model.endAngle,an.endAngle=an.startAngle+an.circumference),m.pivot()},calculateTotal:function(){var m,w=this.getDataset(),T=this.getMeta(),I=0;return pe.each(T.data,function(N,j){m=w.data[j],isNaN(m)||N.hidden||(I+=Math.abs(m))}),I},calculateCircumference:function(m){var w=this.getMeta().total;return w>0&&!isNaN(m)?mn*(Math.abs(m)/w):0},getMaxBorderWidth:function(m){var w,T,I,N,j,q,$,te,ae=0,ge=this.chart;if(!m)for(w=0,T=ge.data.datasets.length;w<T;++w)if(ge.isDatasetVisible(w)){m=(I=ge.getDatasetMeta(w)).data,w!==this.index&&(j=I.controller);break}if(!m)return 0;for(w=0,T=m.length;w<T;++w)N=m[w],j?(j._configure(),q=j._resolveDataElementOptions(N,w)):q=N._options,"inner"!==q.borderAlign&&(ae=(te=q.hoverBorderWidth)>(ae=($=q.borderWidth)>ae?$:ae)?te:ae);return ae},setHoverStyle:function(m){var w=m._model,T=m._options,I=pe.getHoverColor;m.$previousStyle={backgroundColor:w.backgroundColor,borderColor:w.borderColor,borderWidth:w.borderWidth},w.backgroundColor=lt(T.hoverBackgroundColor,I(T.backgroundColor)),w.borderColor=lt(T.hoverBorderColor,I(T.borderColor)),w.borderWidth=lt(T.hoverBorderWidth,T.borderWidth)},_getRingWeightOffset:function(m){for(var w=0,T=0;T<m;++T)this.chart.isDatasetVisible(T)&&(w+=this._getRingWeight(T));return w},_getRingWeight:function(m){return Math.max(lt(this.chart.data.datasets[m].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});xt._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),xt._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var kn=Me.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),nn=pe.valueOrDefault,Rt=pe.options.resolve,$t=pe.canvas._isPointInArea;function rt(m,w){var T=m&&m.options.ticks||{},I=T.reverse,N=void 0===T.min?w:0,j=void 0===T.max?w:0;return{start:I?j:N,end:I?N:j}}function vr(m,w,T){var I=T/2,N=rt(m,I),j=rt(w,I);return{top:j.end,right:N.end,bottom:j.start,left:N.start}}function yr(m){var w,T,I,N;return pe.isObject(m)?(w=m.top,T=m.right,I=m.bottom,N=m.left):w=T=I=N=m,{top:w,right:T,bottom:I,left:N}}xt._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var cr=Cn.extend({datasetElementType:wn.Line,dataElementType:wn.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(m){var w,T,I=this,N=I.getMeta(),j=N.dataset,q=N.data||[],te=I._config,ae=I._showLine=nn(te.showLine,I.chart.options.showLines);for(I._xScale=I.getScaleForId(N.xAxisID),I._yScale=I.getScaleForId(N.yAxisID),ae&&(void 0!==te.tension&&void 0===te.lineTension&&(te.lineTension=te.tension),j._scale=I._yScale,j._datasetIndex=I.index,j._children=q,j._model=I._resolveDatasetElementOptions(j),j.pivot()),w=0,T=q.length;w<T;++w)I.updateElement(q[w],w,m);for(ae&&0!==j._model.tension&&I.updateBezierControlPoints(),w=0,T=q.length;w<T;++w)q[w].pivot()},updateElement:function(m,w,T){var I,N,j=this,q=j.getMeta(),$=m.custom||{},te=j.getDataset(),ae=j.index,ge=te.data[w],be=j._xScale,Ce=j._yScale,De=q.dataset._model,Ne=j._resolveDataElementOptions(m,w);I=be.getPixelForValue("object"==typeof ge?ge:NaN,w,ae),N=T?Ce.getBasePixel():j.calculatePointY(ge,w,ae),m._xScale=be,m._yScale=Ce,m._options=Ne,m._datasetIndex=ae,m._index=w,m._model={x:I,y:N,skip:$.skip||isNaN(I)||isNaN(N),radius:Ne.radius,pointStyle:Ne.pointStyle,rotation:Ne.rotation,backgroundColor:Ne.backgroundColor,borderColor:Ne.borderColor,borderWidth:Ne.borderWidth,tension:nn($.tension,De?De.tension:0),steppedLine:!!De&&De.steppedLine,hitRadius:Ne.hitRadius}},_resolveDatasetElementOptions:function(m){var w=this,T=w._config,I=m.custom||{},N=w.chart.options,j=N.elements.line,q=Cn.prototype._resolveDatasetElementOptions.apply(w,arguments);return q.spanGaps=nn(T.spanGaps,N.spanGaps),q.tension=nn(T.lineTension,j.tension),q.steppedLine=Rt([I.steppedLine,T.steppedLine,j.stepped]),q.clip=yr(nn(T.clip,vr(w._xScale,w._yScale,q.borderWidth))),q},calculatePointY:function(m,w,T){var I,j,q,$,te,ae,ge=this.chart,be=this._yScale,Ce=0,De=0;if(be.options.stacked){for($=+be.getRightValue(m),ae=(te=ge._getSortedVisibleDatasetMetas()).length,I=0;I<ae&&(j=te[I]).index!==T;++I)"line"===j.type&&j.yAxisID===be.id&&((q=+be.getRightValue(ge.data.datasets[j.index].data[w]))<0?De+=q||0:Ce+=q||0);return be.getPixelForValue($<0?De+$:Ce+$)}return be.getPixelForValue(m)},updateBezierControlPoints:function(){var m,w,T,I,N=this.chart,j=this.getMeta(),q=j.dataset._model,$=N.chartArea,te=j.data||[];function ae(ge,be,Ce){return Math.max(Math.min(ge,Ce),be)}if(q.spanGaps&&(te=te.filter(function(ge){return!ge._model.skip})),"monotone"===q.cubicInterpolationMode)pe.splineCurveMonotone(te);else for(m=0,w=te.length;m<w;++m)T=te[m]._model,I=pe.splineCurve(pe.previousItem(te,m)._model,T,pe.nextItem(te,m)._model,q.tension),T.controlPointPreviousX=I.previous.x,T.controlPointPreviousY=I.previous.y,T.controlPointNextX=I.next.x,T.controlPointNextY=I.next.y;if(N.options.elements.line.capBezierPoints)for(m=0,w=te.length;m<w;++m)$t(T=te[m]._model,$)&&(m>0&&$t(te[m-1]._model,$)&&(T.controlPointPreviousX=ae(T.controlPointPreviousX,$.left,$.right),T.controlPointPreviousY=ae(T.controlPointPreviousY,$.top,$.bottom)),m<te.length-1&&$t(te[m+1]._model,$)&&(T.controlPointNextX=ae(T.controlPointNextX,$.left,$.right),T.controlPointNextY=ae(T.controlPointNextY,$.top,$.bottom)))},draw:function(){var m,w=this.chart,T=this.getMeta(),I=T.data||[],N=w.chartArea,j=w.canvas,q=0,$=I.length;for(this._showLine&&(pe.canvas.clipArea(w.ctx,{left:!1===(m=T.dataset._model.clip).left?0:N.left-m.left,right:!1===m.right?j.width:N.right+m.right,top:!1===m.top?0:N.top-m.top,bottom:!1===m.bottom?j.height:N.bottom+m.bottom}),T.dataset.draw(),pe.canvas.unclipArea(w.ctx));q<$;++q)I[q].draw(N)},setHoverStyle:function(m){var w=m._model,T=m._options,I=pe.getHoverColor;m.$previousStyle={backgroundColor:w.backgroundColor,borderColor:w.borderColor,borderWidth:w.borderWidth,radius:w.radius},w.backgroundColor=nn(T.hoverBackgroundColor,I(T.backgroundColor)),w.borderColor=nn(T.hoverBorderColor,I(T.borderColor)),w.borderWidth=nn(T.hoverBorderWidth,T.borderWidth),w.radius=nn(T.hoverRadius,T.radius)}}),ur=pe.options.resolve;xt._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(m){var w,T,I,N=document.createElement("ul"),j=m.data,q=j.datasets,$=j.labels;if(N.setAttribute("class",m.id+"-legend"),q.length)for(w=0,T=q[0].data.length;w<T;++w)(I=N.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=q[0].backgroundColor[w],$[w]&&I.appendChild(document.createTextNode($[w]));return N.outerHTML},legend:{labels:{generateLabels:function(m){var w=m.data;return w.labels.length&&w.datasets.length?w.labels.map(function(T,I){var N=m.getDatasetMeta(0),j=N.controller.getStyle(I);return{text:T,fillStyle:j.backgroundColor,strokeStyle:j.borderColor,lineWidth:j.borderWidth,hidden:isNaN(w.datasets[0].data[I])||N.data[I].hidden,index:I}}):[]}},onClick:function(m,w){var T,I,N,j=w.index,q=this.chart;for(T=0,I=(q.data.datasets||[]).length;T<I;++T)(N=q.getDatasetMeta(T)).data[j].hidden=!N.data[j].hidden;q.update()}},tooltips:{callbacks:{title:function(){return""},label:function(m,w){return w.labels[m.index]+": "+m.yLabel}}}});var Jr=Cn.extend({dataElementType:wn.Arc,linkScales:pe.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(m){var w,T,I,N=this,j=N.getDataset(),q=N.getMeta(),$=N.chart.options.startAngle||0,te=N._starts=[],ae=N._angles=[],ge=q.data;for(N._updateRadius(),q.count=N.countVisibleElements(),w=0,T=j.data.length;w<T;w++)te[w]=$,I=N._computeAngle(w),ae[w]=I,$+=I;for(w=0,T=ge.length;w<T;++w)ge[w]._options=N._resolveDataElementOptions(ge[w],w),N.updateElement(ge[w],w,m)},_updateRadius:function(){var m=this,w=m.chart,T=w.chartArea,I=w.options,N=Math.min(T.right-T.left,T.bottom-T.top);w.outerRadius=Math.max(N/2,0),w.innerRadius=Math.max(I.cutoutPercentage?w.outerRadius/100*I.cutoutPercentage:1,0),w.radiusLength=(w.outerRadius-w.innerRadius)/w.getVisibleDatasetCount(),m.outerRadius=w.outerRadius-w.radiusLength*m.index,m.innerRadius=m.outerRadius-w.radiusLength},updateElement:function(m,w,T){var I=this,N=I.chart,j=I.getDataset(),q=N.options,$=q.animation,te=N.scale,ae=N.data.labels,ge=te.xCenter,be=te.yCenter,Ce=q.startAngle,De=m.hidden?0:te.getDistanceFromCenterForValue(j.data[w]),Ne=I._starts[w],Xe=Ne+(m.hidden?0:I._angles[w]),ft=$.animateScale?0:te.getDistanceFromCenterForValue(j.data[w]),an=m._options||{};pe.extend(m,{_datasetIndex:I.index,_index:w,_scale:te,_model:{backgroundColor:an.backgroundColor,borderColor:an.borderColor,borderWidth:an.borderWidth,borderAlign:an.borderAlign,x:ge,y:be,innerRadius:0,outerRadius:T?ft:De,startAngle:T&&$.animateRotate?Ce:Ne,endAngle:T&&$.animateRotate?Ce:Xe,label:pe.valueAtIndexOrDefault(ae,w,ae[w])}}),m.pivot()},countVisibleElements:function(){var m=this.getDataset(),w=this.getMeta(),T=0;return pe.each(w.data,function(I,N){isNaN(m.data[N])||I.hidden||T++}),T},setHoverStyle:function(m){var w=m._model,T=m._options,I=pe.getHoverColor,N=pe.valueOrDefault;m.$previousStyle={backgroundColor:w.backgroundColor,borderColor:w.borderColor,borderWidth:w.borderWidth},w.backgroundColor=N(T.hoverBackgroundColor,I(T.backgroundColor)),w.borderColor=N(T.hoverBorderColor,I(T.borderColor)),w.borderWidth=N(T.hoverBorderWidth,T.borderWidth)},_computeAngle:function(m){var w=this,T=this.getMeta().count,I=w.getDataset(),N=w.getMeta();return isNaN(I.data[m])||N.data[m].hidden?0:ur([w.chart.options.elements.arc.angle,2*Math.PI/T],{chart:w.chart,dataIndex:m,dataset:I,datasetIndex:w.index},m)}});xt._set("pie",pe.clone(xt.doughnut)),xt._set("pie",{cutoutPercentage:0});var ko=ln,dr=pe.valueOrDefault;xt._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var Qa=Cn.extend({datasetElementType:wn.Line,dataElementType:wn.Point,linkScales:pe.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(m){var w,T,I=this,N=I.getMeta(),j=N.dataset,q=N.data||[],$=I.chart.scale,te=I._config;for(void 0!==te.tension&&void 0===te.lineTension&&(te.lineTension=te.tension),j._scale=$,j._datasetIndex=I.index,j._children=q,j._loop=!0,j._model=I._resolveDatasetElementOptions(j),j.pivot(),w=0,T=q.length;w<T;++w)I.updateElement(q[w],w,m);for(I.updateBezierControlPoints(),w=0,T=q.length;w<T;++w)q[w].pivot()},updateElement:function(m,w,T){var I=this,N=m.custom||{},j=I.getDataset(),q=I.chart.scale,$=q.getPointPositionForValue(w,j.data[w]),te=I._resolveDataElementOptions(m,w),ae=I.getMeta().dataset._model,ge=T?q.xCenter:$.x,be=T?q.yCenter:$.y;m._scale=q,m._options=te,m._datasetIndex=I.index,m._index=w,m._model={x:ge,y:be,skip:N.skip||isNaN(ge)||isNaN(be),radius:te.radius,pointStyle:te.pointStyle,rotation:te.rotation,backgroundColor:te.backgroundColor,borderColor:te.borderColor,borderWidth:te.borderWidth,tension:dr(N.tension,ae?ae.tension:0),hitRadius:te.hitRadius}},_resolveDatasetElementOptions:function(){var m=this,w=m._config,T=m.chart.options,I=Cn.prototype._resolveDatasetElementOptions.apply(m,arguments);return I.spanGaps=dr(w.spanGaps,T.spanGaps),I.tension=dr(w.lineTension,T.elements.line.tension),I},updateBezierControlPoints:function(){var m,w,T,I,N=this.getMeta(),j=this.chart.chartArea,q=N.data||[];function $(te,ae,ge){return Math.max(Math.min(te,ge),ae)}for(N.dataset._model.spanGaps&&(q=q.filter(function(te){return!te._model.skip})),m=0,w=q.length;m<w;++m)T=q[m]._model,I=pe.splineCurve(pe.previousItem(q,m,!0)._model,T,pe.nextItem(q,m,!0)._model,T.tension),T.controlPointPreviousX=$(I.previous.x,j.left,j.right),T.controlPointPreviousY=$(I.previous.y,j.top,j.bottom),T.controlPointNextX=$(I.next.x,j.left,j.right),T.controlPointNextY=$(I.next.y,j.top,j.bottom)},setHoverStyle:function(m){var w=m._model,T=m._options,I=pe.getHoverColor;m.$previousStyle={backgroundColor:w.backgroundColor,borderColor:w.borderColor,borderWidth:w.borderWidth,radius:w.radius},w.backgroundColor=dr(T.hoverBackgroundColor,I(T.backgroundColor)),w.borderColor=dr(T.hoverBorderColor,I(T.borderColor)),w.borderWidth=dr(T.hoverBorderWidth,T.borderWidth),w.radius=dr(T.hoverRadius,T.radius)}});xt._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(m){return"("+m.xLabel+", "+m.yLabel+")"}}}}),xt._set("global",{datasets:{scatter:{showLine:!1}}});var Wn={bar:Me,bubble:mt,doughnut:ln,horizontalBar:kn,line:cr,polarArea:Jr,pie:ko,radar:Qa,scatter:cr};function Rr(m,w){return m.native?{x:m.x,y:m.y}:pe.getRelativePosition(m,w)}function Uo(m,w){var T,I,N,j,q,$,te=m._getSortedVisibleDatasetMetas();for(I=0,j=te.length;I<j;++I)for(N=0,q=(T=te[I].data).length;N<q;++N)($=T[N])._view.skip||w($)}function Va(m,w){var T=[];return Uo(m,function(I){I.inRange(w.x,w.y)&&T.push(I)}),T}function Ha(m,w,T,I){var N=Number.POSITIVE_INFINITY,j=[];return Uo(m,function(q){if(!T||q.inRange(w.x,w.y)){var $=q.getCenterPoint(),te=I(w,$);te<N?(j=[q],N=te):te===N&&j.push(q)}}),j}function rr(m){var w=-1!==m.indexOf("x"),T=-1!==m.indexOf("y");return function(I,N){var j=w?Math.abs(I.x-N.x):0,q=T?Math.abs(I.y-N.y):0;return Math.sqrt(Math.pow(j,2)+Math.pow(q,2))}}function Wi(m,w,T){var I=Rr(w,m);T.axis=T.axis||"x";var N=rr(T.axis),j=T.intersect?Va(m,I):Ha(m,I,!1,N),q=[];return j.length?(m._getSortedVisibleDatasetMetas().forEach(function($){var te=$.data[j[0]._index];te&&!te._view.skip&&q.push(te)}),q):[]}var ui={modes:{single:function(m,w){var T=Rr(w,m),I=[];return Uo(m,function(N){if(N.inRange(T.x,T.y))return I.push(N),I}),I.slice(0,1)},label:Wi,index:Wi,dataset:function(m,w,T){var I=Rr(w,m);T.axis=T.axis||"xy";var N=rr(T.axis),j=T.intersect?Va(m,I):Ha(m,I,!1,N);return j.length>0&&(j=m.getDatasetMeta(j[0]._datasetIndex).data),j},"x-axis":function(m,w){return Wi(m,w,{intersect:!1})},point:function(m,w){return Va(m,Rr(w,m))},nearest:function(m,w,T){var I=Rr(w,m);T.axis=T.axis||"xy";var N=rr(T.axis);return Ha(m,I,T.intersect,N)},x:function(m,w,T){var I=Rr(w,m),N=[],j=!1;return Uo(m,function(q){q.inXRange(I.x)&&N.push(q),q.inRange(I.x,I.y)&&(j=!0)}),T.intersect&&!j&&(N=[]),N},y:function(m,w,T){var I=Rr(w,m),N=[],j=!1;return Uo(m,function(q){q.inYRange(I.y)&&N.push(q),q.inRange(I.x,I.y)&&(j=!0)}),T.intersect&&!j&&(N=[]),N}}},Zs=pe.extend;function Mo(m,w){return pe.where(m,function(T){return T.pos===w})}function Eu(m,w){return m.sort(function(T,I){var N=w?I:T,j=w?T:I;return N.weight===j.weight?N.index-j.index:N.weight-j.weight})}function Vl(m,w,T,I){return Math.max(m[T],w[T])+Math.max(m[I],w[I])}function Ar(m,w,T){var I,N,j=T.box,q=m.maxPadding;if(T.size&&(m[T.pos]-=T.size),T.size=T.horizontal?j.height:j.width,m[T.pos]+=T.size,j.getPadding){var $=j.getPadding();q.top=Math.max(q.top,$.top),q.left=Math.max(q.left,$.left),q.bottom=Math.max(q.bottom,$.bottom),q.right=Math.max(q.right,$.right)}if(I=w.outerWidth-Vl(q,m,"left","right"),N=w.outerHeight-Vl(q,m,"top","bottom"),I!==m.w||N!==m.h){m.w=I,m.h=N;var te=T.horizontal?[I,m.w]:[N,m.h];return!(te[0]===te[1]||isNaN(te[0])&&isNaN(te[1]))}}function lc(m,w){var j,T=w.maxPadding;return j={left:0,top:0,right:0,bottom:0},(m?["left","right"]:["top","bottom"]).forEach(function(q){j[q]=Math.max(w[q],T[q])}),j}function $i(m,w,T){var I,N,j,q,$,te,ae=[];for(I=0,N=m.length;I<N;++I)(q=(j=m[I]).box).update(j.width||w.w,j.height||w.h,lc(j.horizontal,w)),Ar(w,T,j)&&(te=!0,ae.length&&($=!0)),q.fullWidth||ae.push(j);return $&&$i(ae,w,T)||te}function Wa(m,w,T){var I,N,j,q,$=T.padding,te=w.x,ae=w.y;for(I=0,N=m.length;I<N;++I)q=(j=m[I]).box,j.horizontal?(q.left=q.fullWidth?$.left:w.left,q.right=q.fullWidth?T.outerWidth-$.right:w.left+w.w,q.top=ae,q.bottom=ae+q.height,q.width=q.right-q.left,ae=q.bottom):(q.left=te,q.right=te+q.width,q.top=w.top,q.bottom=w.top+w.h,q.height=q.bottom-q.top,te=q.right);w.x=te,w.y=ae}xt._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var Gi,ji={defaults:{},addBox:function(m,w){m.boxes||(m.boxes=[]),w.fullWidth=w.fullWidth||!1,w.position=w.position||"top",w.weight=w.weight||0,w._layers=w._layers||function(){return[{z:0,draw:function(){w.draw.apply(w,arguments)}}]},m.boxes.push(w)},removeBox:function(m,w){var T=m.boxes?m.boxes.indexOf(w):-1;-1!==T&&m.boxes.splice(T,1)},configure:function(m,w,T){for(var I,N=["fullWidth","position","weight"],j=N.length,q=0;q<j;++q)T.hasOwnProperty(I=N[q])&&(w[I]=T[I])},update:function(m,w,T){if(m){var N=pe.options.toPadding((m.options.layout||{}).padding),j=w-N.width,q=T-N.height,$=(Ne=Eu(Mo(De=function(jt){var Xt,vn,On,er=[];for(Xt=0,vn=(jt||[]).length;Xt<vn;++Xt)er.push({index:Xt,box:On=jt[Xt],pos:On.position,horizontal:On.isHorizontal(),weight:On.weight});return er}(m.boxes),"left"),!0),Xe=Eu(Mo(De,"right")),ft=Eu(Mo(De,"top"),!0),an=Eu(Mo(De,"bottom")),{leftAndTop:Ne.concat(ft),rightAndBottom:Xe.concat(an),chartArea:Mo(De,"chartArea"),vertical:Ne.concat(Xe),horizontal:ft.concat(an)}),te=$.vertical,ae=$.horizontal,ge=Object.freeze({outerWidth:w,outerHeight:T,padding:N,availableWidth:j,vBoxMaxWidth:j/2/te.length,hBoxMaxHeight:q/2}),be=Zs({maxPadding:Zs({},N),w:j,h:q,x:N.left,y:N.top},N);(function(Ce,De){var Ne,Xe,ft;for(Ne=0,Xe=Ce.length;Ne<Xe;++Ne)(ft=Ce[Ne]).width=ft.horizontal?ft.box.fullWidth&&De.availableWidth:De.vBoxMaxWidth,ft.height=ft.horizontal&&De.hBoxMaxHeight})(te.concat(ae),ge),$i(te,be,ge),$i(ae,be,ge)&&$i(te,be,ge),function(Ce){var De=Ce.maxPadding;function Ne(Xe){var ft=Math.max(De[Xe]-Ce[Xe],0);return Ce[Xe]+=ft,ft}Ce.y+=Ne("top"),Ce.x+=Ne("left"),Ne("right"),Ne("bottom")}(be),Wa($.leftAndTop,be,ge),be.x+=be.w,be.y+=be.h,Wa($.rightAndBottom,be,ge),m.chartArea={left:be.left,top:be.top,right:be.left+be.w,bottom:be.top+be.h},pe.each($.chartArea,function(Ce){var De=Ce.box;Zs(De,m.chartArea),De.update(be.w,be.h)})}var De,Ne,Xe,ft,an}},co=(Gi=Object.freeze({__proto__:null,default:"@keyframes chartjs-render-animation{from{opacity:.99}to{opacity:1}}.chartjs-render-monitor{animation:chartjs-render-animation 1ms}.chartjs-size-monitor,.chartjs-size-monitor-expand,.chartjs-size-monitor-shrink{position:absolute;direction:ltr;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1}.chartjs-size-monitor-expand>div{position:absolute;width:1000000px;height:1000000px;left:0;top:0}.chartjs-size-monitor-shrink>div{position:absolute;width:200%;height:200%;left:0;top:0}"}))&&Gi.default||Gi,Qo="$chartjs",Hl="chartjs-size-monitor",Ra="chartjs-render-monitor",wr=["animationstart","webkitAnimationStart"],Pc={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function ws(m,w){var T=pe.getStyle(m,w),I=T&&T.match(/^(\d+)(\.\d+)?px$/);return I?Number(I[1]):void 0}var At=!!function(){var m=!1;try{var w=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("e",null,w)}catch(T){}return m}()&&{passive:!0};function it(m,w,T){m.addEventListener(w,T,At)}function Oi(m,w,T){m.removeEventListener(w,T,At)}function td(m,w,T,I,N){return{type:m,chart:w,native:N||null,x:void 0!==T?T:null,y:void 0!==I?I:null}}function Wl(m){var w=document.createElement("div");return w.className=m||"",w}var ma={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(m){if(!this.disableCSSInjection){var w=m.getRootNode?m.getRootNode():document;!function(T,I){var N=T[Qo]||(T[Qo]={});if(!N.containsStyles){N.containsStyles=!0,I="/* Chart.js */\n"+I;var j=document.createElement("style");j.setAttribute("type","text/css"),j.appendChild(document.createTextNode(I)),T.appendChild(j)}}(w.host?w:document.head,co)}},acquireContext:function(m,w){"string"==typeof m?m=document.getElementById(m):m.length&&(m=m[0]),m&&m.canvas&&(m=m.canvas);var T=m&&m.getContext&&m.getContext("2d");return T&&T.canvas===m?(this._ensureLoaded(m),function(I,N){var j=I.style,q=I.getAttribute("height"),$=I.getAttribute("width");if(I[Qo]={initial:{height:q,width:$,style:{display:j.display,height:j.height,width:j.width}}},j.display=j.display||"block",null===$||""===$){var te=ws(I,"width");void 0!==te&&(I.width=te)}if(null===q||""===q)if(""===I.style.height)I.height=I.width/(N.options.aspectRatio||2);else{var ae=ws(I,"height");void 0!==te&&(I.height=ae)}}(m,w),T):null},releaseContext:function(m){var w=m.canvas;if(w[Qo]){var T=w[Qo].initial;["height","width"].forEach(function(I){var N=T[I];pe.isNullOrUndef(N)?w.removeAttribute(I):w.setAttribute(I,N)}),pe.each(T.style||{},function(I,N){w.style[N]=I}),w.width=w.width,delete w[Qo]}},addEventListener:function(m,w,T){var I=m.canvas;if("resize"!==w){var N=T[Qo]||(T[Qo]={});it(I,w,(N.proxies||(N.proxies={}))[m.id+"_"+w]=function(j){var q,$,te,ae;T((te=Pc[(q=j).type]||q.type,ae=pe.getRelativePosition(q,$=m),td(te,$,ae.x,ae.y,q)))})}else!function(m,w,T){var I,N,j,q,ae,be,Ce,$=m[Qo]||(m[Qo]={}),te=$.resizer=function(ae){var ge=Wl(Hl),be=Wl(Hl+"-expand"),Ce=Wl(Hl+"-shrink");be.appendChild(Wl()),Ce.appendChild(Wl()),ge.appendChild(be),ge.appendChild(Ce),ge._reset=function(){be.scrollLeft=1e6,be.scrollTop=1e6,Ce.scrollLeft=1e6,Ce.scrollTop=1e6};var De=function(){ge._reset(),ae()};return it(be,"scroll",De.bind(be,"expand")),it(Ce,"scroll",De.bind(Ce,"shrink")),ge}((I=function(){if($.resizer){var ae=T.options.maintainAspectRatio&&m.parentNode,ge=ae?ae.clientWidth:0;w(td("resize",T)),ae&&ae.clientWidth<ge&&T.canvas&&w(td("resize",T))}},j=!1,q=[],function(){q=Array.prototype.slice.call(arguments),N=N||this,j||(j=!0,pe.requestAnimFrame.call(window,function(){j=!1,I.apply(N,q)}))}));be=(ae=m)[Qo]||(ae[Qo]={}),Ce=be.renderProxy=function(De){"chartjs-render-animation"===De.animationName&&function(){if($.resizer){var ae=m.parentNode;ae&&ae!==te.parentNode&&ae.insertBefore(te,ae.firstChild),te._reset()}}()},pe.each(wr,function(De){it(ae,De,Ce)}),be.reflow=!!ae.offsetParent,ae.classList.add(Ra)}(I,T,m)},removeEventListener:function(m,w,T){var I=m.canvas;if("resize"!==w){var N=((T[Qo]||{}).proxies||{})[m.id+"_"+w];N&&Oi(I,w,N)}else!function(m){var I,N,j,w=m[Qo]||{},T=w.resizer;delete w.resizer,(j=(N=(I=m)[Qo]||{}).renderProxy)&&(pe.each(wr,function(q){Oi(I,q,j)}),delete N.renderProxy),I.classList.remove(Ra),T&&T.parentNode&&T.parentNode.removeChild(T)}(I)}};pe.addEvent=it,pe.removeEvent=Oi;var Ei=pe.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},ma._enabled?ma:{acquireContext:function(m){return m&&m.canvas&&(m=m.canvas),m&&m.getContext("2d")||null}});xt._set("global",{plugins:{}});var qo={_plugins:[],_cacheId:0,register:function(m){var w=this._plugins;[].concat(m).forEach(function(T){-1===w.indexOf(T)&&w.push(T)}),this._cacheId++},unregister:function(m){var w=this._plugins;[].concat(m).forEach(function(T){var I=w.indexOf(T);-1!==I&&w.splice(I,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(m,w,T){var I,N,j,q,$,te=this.descriptors(m),ae=te.length;for(I=0;I<ae;++I)if("function"==typeof($=(j=(N=te[I]).plugin)[w])&&((q=[m].concat(T||[])).push(N.options),!1===$.apply(j,q)))return!1;return!0},descriptors:function(m){var w=m.$plugins||(m.$plugins={});if(w.id===this._cacheId)return w.descriptors;var T=[],I=[],N=m&&m.config||{},j=N.options&&N.options.plugins||{};return this._plugins.concat(N.plugins||[]).forEach(function(q){if(-1===T.indexOf(q)){var $=q.id,te=j[$];!1!==te&&(!0===te&&(te=pe.clone(xt.global.plugins[$])),T.push(q),I.push({plugin:q,options:te||{}}))}}),w.descriptors=I,w.id=this._cacheId,I},_invalidate:function(m){delete m.$plugins}},xl={constructors:{},defaults:{},registerScaleType:function(m,w,T){this.constructors[m]=w,this.defaults[m]=pe.clone(T)},getScaleConstructor:function(m){return this.constructors.hasOwnProperty(m)?this.constructors[m]:void 0},getScaleDefaults:function(m){return this.defaults.hasOwnProperty(m)?pe.merge(Object.create(null),[xt.scale,this.defaults[m]]):{}},updateScaleDefaults:function(m,w){this.defaults.hasOwnProperty(m)&&(this.defaults[m]=pe.extend(this.defaults[m],w))},addScalesToLayout:function(m){pe.each(m.scales,function(w){w.fullWidth=w.options.fullWidth,w.position=w.options.position,w.weight=w.options.weight,ji.addBox(m,w)})}},es=pe.valueOrDefault,nd=pe.rtl.getRtlAdapter;xt._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:pe.noop,title:function(m,w){var T="",I=w.labels,N=I?I.length:0;if(m.length>0){var j=m[0];j.label?T=j.label:j.xLabel?T=j.xLabel:N>0&&j.index<N&&(T=I[j.index])}return T},afterTitle:pe.noop,beforeBody:pe.noop,beforeLabel:pe.noop,label:function(m,w){var T=w.datasets[m.datasetIndex].label||"";return T&&(T+=": "),pe.isNullOrUndef(m.value)?T+=m.yLabel:T+=m.value,T},labelColor:function(m,w){var T=w.getDatasetMeta(m.datasetIndex).data[m.index]._view;return{borderColor:T.borderColor,backgroundColor:T.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:pe.noop,afterBody:pe.noop,beforeFooter:pe.noop,footer:pe.noop,afterFooter:pe.noop}}});var rd={average:function(m){if(!m.length)return!1;var w,T,I=0,N=0,j=0;for(w=0,T=m.length;w<T;++w){var q=m[w];if(q&&q.hasValue()){var $=q.tooltipPosition();I+=$.x,N+=$.y,++j}}return{x:I/j,y:N/j}},nearest:function(m,w){var T,I,N,j=w.x,q=w.y,$=Number.POSITIVE_INFINITY;for(T=0,I=m.length;T<I;++T){var te=m[T];if(te&&te.hasValue()){var ae=te.getCenterPoint(),ge=pe.distanceBetweenPoints(w,ae);ge<$&&($=ge,N=te)}}if(N){var be=N.tooltipPosition();j=be.x,q=be.y}return{x:j,y:q}}};function gu(m,w){return w&&(pe.isArray(w)?Array.prototype.push.apply(m,w):m.push(w)),m}function Cs(m){return("string"==typeof m||m instanceof String)&&m.indexOf("\n")>-1?m.split("\n"):m}function Ru(m){var w=xt.global;return{xPadding:m.xPadding,yPadding:m.yPadding,xAlign:m.xAlign,yAlign:m.yAlign,rtl:m.rtl,textDirection:m.textDirection,bodyFontColor:m.bodyFontColor,_bodyFontFamily:es(m.bodyFontFamily,w.defaultFontFamily),_bodyFontStyle:es(m.bodyFontStyle,w.defaultFontStyle),_bodyAlign:m.bodyAlign,bodyFontSize:es(m.bodyFontSize,w.defaultFontSize),bodySpacing:m.bodySpacing,titleFontColor:m.titleFontColor,_titleFontFamily:es(m.titleFontFamily,w.defaultFontFamily),_titleFontStyle:es(m.titleFontStyle,w.defaultFontStyle),titleFontSize:es(m.titleFontSize,w.defaultFontSize),_titleAlign:m.titleAlign,titleSpacing:m.titleSpacing,titleMarginBottom:m.titleMarginBottom,footerFontColor:m.footerFontColor,_footerFontFamily:es(m.footerFontFamily,w.defaultFontFamily),_footerFontStyle:es(m.footerFontStyle,w.defaultFontStyle),footerFontSize:es(m.footerFontSize,w.defaultFontSize),_footerAlign:m.footerAlign,footerSpacing:m.footerSpacing,footerMarginTop:m.footerMarginTop,caretSize:m.caretSize,cornerRadius:m.cornerRadius,backgroundColor:m.backgroundColor,opacity:0,legendColorBackground:m.multiKeyBackground,displayColors:m.displayColors,borderColor:m.borderColor,borderWidth:m.borderWidth}}function pi(m,w){return"center"===w?m.x+m.width/2:"right"===w?m.x+m.width-m.xPadding:m.x+m.xPadding}function Fd(m){return gu([],Cs(m))}var Ui=zi.extend({initialize:function(){this._model=Ru(this._options),this._lastActive=[]},getTitle:function(){var m=this,w=m._options,T=w.callbacks,I=T.beforeTitle.apply(m,arguments),N=T.title.apply(m,arguments),j=T.afterTitle.apply(m,arguments),q=[];return q=gu(q,Cs(I)),q=gu(q,Cs(N)),gu(q,Cs(j))},getBeforeBody:function(){return Fd(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(m,w){var T=this,I=T._options.callbacks,N=[];return pe.each(m,function(j){var q={before:[],lines:[],after:[]};gu(q.before,Cs(I.beforeLabel.call(T,j,w))),gu(q.lines,I.label.call(T,j,w)),gu(q.after,Cs(I.afterLabel.call(T,j,w))),N.push(q)}),N},getAfterBody:function(){return Fd(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var m=this,w=m._options.callbacks,T=w.beforeFooter.apply(m,arguments),I=w.footer.apply(m,arguments),N=w.afterFooter.apply(m,arguments),j=[];return j=gu(j,Cs(T)),j=gu(j,Cs(I)),gu(j,Cs(N))},update:function(m){var w,T,I,N,j,q,$,te,ae,ge,Hr,br,Xo,xo,Wr,gr,To,Io,rs,Ma,Ot,be=this,Ce=be._options,De=be._model,Ne=be._model=Ru(Ce),Xe=be._active,ft=be._data,an={xAlign:De.xAlign,yAlign:De.yAlign},jt={x:De.x,y:De.y},Xt={width:De.width,height:De.height},vn={x:De.caretX,y:De.caretY};if(Xe.length){Ne.opacity=1;var On=[],er=[];vn=rd[Ce.position].call(be,Xe,be._eventPosition);var $r=[];for(w=0,T=Xe.length;w<T;++w)$r.push((N=void 0,j=void 0,te=void 0,ae=void 0,ge=void 0,N=(I=Xe[w])._xScale,j=I._yScale||I._scale,q=I._index,ae=(te=I._chart.getDatasetMeta($=I._datasetIndex).controller)._getIndexScale(),ge=te._getValueScale(),{xLabel:N?N.getLabelForIndex(q,$):"",yLabel:j?j.getLabelForIndex(q,$):"",label:ae?""+ae.getLabelForIndex(q,$):"",value:ge?""+ge.getLabelForIndex(q,$):"",index:q,datasetIndex:$,x:I._model.x,y:I._model.y}));Ce.filter&&($r=$r.filter(function(Hr){return Ce.filter(Hr,ft)})),Ce.itemSort&&($r=$r.sort(function(Hr,br){return Ce.itemSort(Hr,br,ft)})),pe.each($r,function(Hr){On.push(Ce.callbacks.labelColor.call(be,Hr,be._chart)),er.push(Ce.callbacks.labelTextColor.call(be,Hr,be._chart))}),Ne.title=be.getTitle($r,ft),Ne.beforeBody=be.getBeforeBody($r,ft),Ne.body=be.getBody($r,ft),Ne.afterBody=be.getAfterBody($r,ft),Ne.footer=be.getFooter($r,ft),Ne.x=vn.x,Ne.y=vn.y,Ne.caretPadding=Ce.caretPadding,Ne.labelColors=On,Ne.labelTextColors=er,Ne.dataPoints=$r,Xt=function(Hr,br){var Xo=Hr._chart.ctx,xo=2*br.yPadding,Wr=0,gr=br.body,gn=gr.reduce(function(Ls,pa){return Ls+pa.before.length+pa.lines.length+pa.after.length},0),To=br.title.length,Ho=br.footer.length,Io=br.titleFontSize,rs=br.bodyFontSize,Ma=br.footerFontSize;xo+=To*Io,xo+=To?(To-1)*br.titleSpacing:0,xo+=To?br.titleMarginBottom:0,xo+=(gn+=br.beforeBody.length+br.afterBody.length)*rs,xo+=gn?(gn-1)*br.bodySpacing:0,xo+=Ho?br.footerMarginTop:0,xo+=Ho*Ma,xo+=Ho?(Ho-1)*br.footerSpacing:0;var Ot=0,vu=function(Ls){Wr=Math.max(Wr,Xo.measureText(Ls).width+Ot)};return Xo.font=pe.fontString(Io,br._titleFontStyle,br._titleFontFamily),pe.each(br.title,vu),Xo.font=pe.fontString(rs,br._bodyFontStyle,br._bodyFontFamily),pe.each(br.beforeBody.concat(br.afterBody),vu),Ot=br.displayColors?rs+2:0,pe.each(gr,function(Ls){pe.each(Ls.before,vu),pe.each(Ls.lines,vu),pe.each(Ls.after,vu)}),Ot=0,Xo.font=pe.fontString(Ma,br._footerFontStyle,br._footerFontFamily),pe.each(br.footer,vu),{width:Wr+=2*br.xPadding,height:xo}}(this,Ne),Hr=Ne,br=Xt,Xo=an=function(Hr,br){var Xo,xo,Wr,gr,gn,To=Hr._model,Ho=Hr._chart,Io=Hr._chart.chartArea,rs="center",Ma="center";To.y<br.height?Ma="top":To.y>Ho.height-br.height&&(Ma="bottom");var Ot=(Io.left+Io.right)/2,vu=(Io.top+Io.bottom)/2;"center"===Ma?(Xo=function(pa){return pa<=Ot},xo=function(pa){return pa>Ot}):(Xo=function(pa){return pa<=br.width/2},xo=function(pa){return pa>=Ho.width-br.width/2}),Wr=function(pa){return pa+br.width+To.caretSize+To.caretPadding>Ho.width},gr=function(pa){return pa-br.width-To.caretSize-To.caretPadding<0},gn=function(pa){return pa<=vu?"top":"bottom"},Xo(To.x)?(rs="left",Wr(To.x)&&(rs="center",Ma=gn(To.y))):xo(To.x)&&(rs="right",gr(To.x)&&(rs="center",Ma=gn(To.y)));var Ls=Hr._options;return{xAlign:Ls.xAlign?Ls.xAlign:rs,yAlign:Ls.yAlign?Ls.yAlign:Ma}}(this,Xt),xo=be._chart,Wr=Hr.x,gr=Hr.y,Ma=Hr.caretSize+(To=Hr.caretPadding),Ot=Hr.cornerRadius+To,"right"===(Io=Xo.xAlign)?Wr-=br.width:"center"===Io&&((Wr-=br.width/2)+br.width>xo.width&&(Wr=xo.width-br.width),Wr<0&&(Wr=0)),"top"===(rs=Xo.yAlign)?gr+=Ma:gr-="bottom"===rs?br.height+Ma:br.height/2,"center"===rs?"left"===Io?Wr+=Ma:"right"===Io&&(Wr-=Ma):"left"===Io?Wr-=Ot:"right"===Io&&(Wr+=Ot),jt={x:Wr,y:gr}}else Ne.opacity=0;return Ne.xAlign=an.xAlign,Ne.yAlign=an.yAlign,Ne.x=jt.x,Ne.y=jt.y,Ne.width=Xt.width,Ne.height=Xt.height,Ne.caretX=vn.x,Ne.caretY=vn.y,be._model=Ne,m&&Ce.custom&&Ce.custom.call(be,Ne),be},drawCaret:function(m,w){var T=this._chart.ctx,N=this.getCaretPosition(m,w,this._view);T.lineTo(N.x1,N.y1),T.lineTo(N.x2,N.y2),T.lineTo(N.x3,N.y3)},getCaretPosition:function(m,w,T){var I,N,j,q,$,te,ae=T.caretSize,ge=T.cornerRadius,be=T.xAlign,Ce=T.yAlign,De=m.x,Ne=m.y,Xe=w.width,ft=w.height;if("center"===Ce)$=Ne+ft/2,"left"===be?(N=(I=De)-ae,j=I,q=$+ae,te=$-ae):(N=(I=De+Xe)+ae,j=I,q=$-ae,te=$+ae);else if("left"===be?(I=(N=De+ge+ae)-ae,j=N+ae):"right"===be?(I=(N=De+Xe-ge-ae)-ae,j=N+ae):(I=(N=T.caretX)-ae,j=N+ae),"top"===Ce)$=(q=Ne)-ae,te=q;else{$=(q=Ne+ft)+ae,te=q;var an=j;j=I,I=an}return{x1:I,x2:N,x3:j,y1:q,y2:$,y3:te}},drawTitle:function(m,w,T){var I,N,j,q=w.title,$=q.length;if($){var te=nd(w.rtl,w.x,w.width);for(m.x=pi(w,w._titleAlign),T.textAlign=te.textAlign(w._titleAlign),T.textBaseline="middle",I=w.titleFontSize,N=w.titleSpacing,T.fillStyle=w.titleFontColor,T.font=pe.fontString(I,w._titleFontStyle,w._titleFontFamily),j=0;j<$;++j)T.fillText(q[j],te.x(m.x),m.y+I/2),m.y+=I+N,j+1===$&&(m.y+=w.titleMarginBottom-N)}},drawBody:function(m,w,T){var I,N,j,q,$,te,ae,ge,be=w.bodyFontSize,Ce=w.bodySpacing,De=w._bodyAlign,Ne=w.body,Xe=w.displayColors,ft=0,an=Xe?pi(w,"left"):0,jt=nd(w.rtl,w.x,w.width),Xt=function(er){T.fillText(er,jt.x(m.x+ft),m.y+be/2),m.y+=be+Ce},vn=jt.textAlign(De);for(T.textAlign=De,T.textBaseline="middle",T.font=pe.fontString(be,w._bodyFontStyle,w._bodyFontFamily),m.x=pi(w,vn),T.fillStyle=w.bodyFontColor,pe.each(w.beforeBody,Xt),ft=Xe&&"right"!==vn?"center"===De?be/2+1:be+2:0,$=0,ae=Ne.length;$<ae;++$){for(I=Ne[$],j=w.labelColors[$],T.fillStyle=N=w.labelTextColors[$],pe.each(I.before,Xt),te=0,ge=(q=I.lines).length;te<ge;++te){if(Xe){var On=jt.x(an);T.fillStyle=w.legendColorBackground,T.fillRect(jt.leftForLtr(On,be),m.y,be,be),T.lineWidth=1,T.strokeStyle=j.borderColor,T.strokeRect(jt.leftForLtr(On,be),m.y,be,be),T.fillStyle=j.backgroundColor,T.fillRect(jt.leftForLtr(jt.xPlus(On,1),be-2),m.y+1,be-2,be-2),T.fillStyle=N}Xt(q[te])}pe.each(I.after,Xt)}ft=0,pe.each(w.afterBody,Xt),m.y-=Ce},drawFooter:function(m,w,T){var I,N,j=w.footer,q=j.length;if(q){var $=nd(w.rtl,w.x,w.width);for(m.x=pi(w,w._footerAlign),m.y+=w.footerMarginTop,T.textAlign=$.textAlign(w._footerAlign),T.textBaseline="middle",I=w.footerFontSize,T.fillStyle=w.footerFontColor,T.font=pe.fontString(I,w._footerFontStyle,w._footerFontFamily),N=0;N<q;++N)T.fillText(j[N],$.x(m.x),m.y+I/2),m.y+=I+w.footerSpacing}},drawBackground:function(m,w,T,I){T.fillStyle=w.backgroundColor,T.strokeStyle=w.borderColor,T.lineWidth=w.borderWidth;var N=w.xAlign,j=w.yAlign,q=m.x,$=m.y,te=I.width,ae=I.height,ge=w.cornerRadius;T.beginPath(),T.moveTo(q+ge,$),"top"===j&&this.drawCaret(m,I),T.lineTo(q+te-ge,$),T.quadraticCurveTo(q+te,$,q+te,$+ge),"center"===j&&"right"===N&&this.drawCaret(m,I),T.lineTo(q+te,$+ae-ge),T.quadraticCurveTo(q+te,$+ae,q+te-ge,$+ae),"bottom"===j&&this.drawCaret(m,I),T.lineTo(q+ge,$+ae),T.quadraticCurveTo(q,$+ae,q,$+ae-ge),"center"===j&&"left"===N&&this.drawCaret(m,I),T.lineTo(q,$+ge),T.quadraticCurveTo(q,$,q+ge,$),T.closePath(),T.fill(),w.borderWidth>0&&T.stroke()},draw:function(){var m=this._chart.ctx,w=this._view;if(0!==w.opacity){var T={width:w.width,height:w.height},I={x:w.x,y:w.y},N=Math.abs(w.opacity<.001)?0:w.opacity;this._options.enabled&&(w.title.length||w.beforeBody.length||w.body.length||w.afterBody.length||w.footer.length)&&(m.save(),m.globalAlpha=N,this.drawBackground(I,w,m,T),I.y+=w.yPadding,pe.rtl.overrideTextDirection(m,w.textDirection),this.drawTitle(I,w,m),this.drawBody(I,w,m),this.drawFooter(I,w,m),pe.rtl.restoreTextDirection(m,w.textDirection),m.restore())}},handleEvent:function(m){var w,T=this,I=T._options;return T._lastActive=T._lastActive||[],"mouseout"===m.type?T._active=[]:(T._active=T._chart.getElementsAtEventForMode(m,I.mode,I),I.reverse&&T._active.reverse()),(w=!pe.arrayEquals(T._active,T._lastActive))&&(T._lastActive=T._active,(I.enabled||I.custom)&&(T._eventPosition={x:m.x,y:m.y},T.update(!0),T.pivot())),w}}),od=Ui;od.positioners=rd;var _l=pe.valueOrDefault;function pf(){return pe.merge(Object.create(null),[].slice.call(arguments),{merger:function(m,w,T,I){if("xAxes"===m||"yAxes"===m){var N,j,q,$=T[m].length;for(w[m]||(w[m]=[]),N=0;N<$;++N)j=_l((q=T[m][N]).type,"xAxes"===m?"category":"linear"),N>=w[m].length&&w[m].push({}),pe.merge(w[m][N],!w[m][N].type||q.type&&q.type!==w[m][N].type?[xl.getScaleDefaults(j),q]:q)}else pe._merger(m,w,T,I)}})}function Gl(){return pe.merge(Object.create(null),[].slice.call(arguments),{merger:function(m,w,T,I){var N=w[m]||Object.create(null),j=T[m];"scales"===m?w[m]=pf(N,j):"scale"===m?w[m]=pe.merge(N,[xl.getScaleDefaults(j.type),j]):pe._merger(m,w,T,I)}})}function Vd(m){var w=m.options;pe.each(m.scales,function(T){ji.removeBox(m,T)}),w=Gl(xt.global,xt[m.config.type],w),m.options=m.config.options=w,m.ensureScalesHaveIDs(),m.buildOrUpdateScales(),m.tooltip._options=w.tooltips,m.tooltip.initialize()}function nl(m,w,T){var I,N=function(j){return j.id===I};do{I=w+T++}while(pe.findIndex(m,N)>=0);return I}function Gh(m){return"top"===m||"bottom"===m}function jh(m,w){return function(T,I){return T[m]===I[m]?T[w]-I[w]:T[m]-I[m]}}xt._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var wl=function(m,w){return this.construct(m,w),this};pe.extend(wl.prototype,{construct:function(m,w){var $,te,T=this;(te=($=($=w)||Object.create(null)).data=$.data||{}).datasets=te.datasets||[],te.labels=te.labels||[],$.options=Gl(xt.global,xt[$.type],$.options||{});var I=Ei.acquireContext(m,w=$),N=I&&I.canvas,j=N&&N.height,q=N&&N.width;T.id=pe.uid(),T.ctx=I,T.canvas=N,T.config=w,T.width=q,T.height=j,T.aspectRatio=j?q/j:null,T.options=w.options,T._bufferedRender=!1,T._layers=[],T.chart=T,T.controller=T,wl.instances[T.id]=T,Object.defineProperty(T,"data",{get:function(){return T.config.data},set:function($){T.config.data=$}}),I&&N?(T.initialize(),T.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var m=this;return qo.notify(m,"beforeInit"),pe.retinaScale(m,m.options.devicePixelRatio),m.bindEvents(),m.options.responsive&&m.resize(!0),m.initToolTip(),qo.notify(m,"afterInit"),m},clear:function(){return pe.canvas.clear(this),this},stop:function(){return Ps.cancelAnimation(this),this},resize:function(m){var w=this,T=w.options,I=w.canvas,N=T.maintainAspectRatio&&w.aspectRatio||null,j=Math.max(0,Math.floor(pe.getMaximumWidth(I))),q=Math.max(0,Math.floor(N?j/N:pe.getMaximumHeight(I)));if((w.width!==j||w.height!==q)&&(I.width=w.width=j,I.height=w.height=q,I.style.width=j+"px",I.style.height=q+"px",pe.retinaScale(w,T.devicePixelRatio),!m)){var $={width:j,height:q};qo.notify(w,"resize",[$]),T.onResize&&T.onResize(w,$),w.stop(),w.update({duration:T.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var m=this.options,w=m.scales||{},T=m.scale;pe.each(w.xAxes,function(I,N){I.id||(I.id=nl(w.xAxes,"x-axis-",N))}),pe.each(w.yAxes,function(I,N){I.id||(I.id=nl(w.yAxes,"y-axis-",N))}),T&&(T.id=T.id||"scale")},buildOrUpdateScales:function(){var m=this,w=m.options,T=m.scales||{},I=[],N=Object.keys(T).reduce(function(j,q){return j[q]=!1,j},{});w.scales&&(I=I.concat((w.scales.xAxes||[]).map(function(j){return{options:j,dtype:"category",dposition:"bottom"}}),(w.scales.yAxes||[]).map(function(j){return{options:j,dtype:"linear",dposition:"left"}}))),w.scale&&I.push({options:w.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),pe.each(I,function(j){var q=j.options,$=q.id,te=_l(q.type,j.dtype);Gh(q.position)!==Gh(j.dposition)&&(q.position=j.dposition),N[$]=!0;var ae=null;if($ in T&&T[$].type===te)(ae=T[$]).options=q,ae.ctx=m.ctx,ae.chart=m;else{var ge=xl.getScaleConstructor(te);if(!ge)return;ae=new ge({id:$,type:te,options:q,ctx:m.ctx,chart:m}),T[ae.id]=ae}ae.mergeTicksOptions(),j.isDefault&&(m.scale=ae)}),pe.each(N,function(j,q){j||delete T[q]}),m.scales=T,xl.addScalesToLayout(this)},buildOrUpdateControllers:function(){var m,w,T=this,I=[],N=T.data.datasets;for(m=0,w=N.length;m<w;m++){var j=N[m],q=T.getDatasetMeta(m),$=j.type||T.config.type;if(q.type&&q.type!==$&&(T.destroyDatasetMeta(m),q=T.getDatasetMeta(m)),q.type=$,q.order=j.order||0,q.index=m,q.controller)q.controller.updateIndex(m),q.controller.linkScales();else{var te=Wn[q.type];if(void 0===te)throw new Error('"'+q.type+'" is not a chart type.');q.controller=new te(T,m),I.push(q.controller)}}return I},resetElements:function(){var m=this;pe.each(m.data.datasets,function(w,T){m.getDatasetMeta(T).controller.reset()},m)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(m){var w,T,I=this;if(m&&"object"==typeof m||(m={duration:m,lazy:arguments[1]}),Vd(I),qo._invalidate(I),!1!==qo.notify(I,"beforeUpdate")){I.tooltip._data=I.data;var N=I.buildOrUpdateControllers();for(w=0,T=I.data.datasets.length;w<T;w++)I.getDatasetMeta(w).controller.buildOrUpdateElements();I.updateLayout(),I.options.animation&&I.options.animation.duration&&pe.each(N,function(j){j.reset()}),I.updateDatasets(),I.tooltip.initialize(),I.lastActive=[],qo.notify(I,"afterUpdate"),I._layers.sort(jh("z","_idx")),I._bufferedRender?I._bufferedRequest={duration:m.duration,easing:m.easing,lazy:m.lazy}:I.render(m)}},updateLayout:function(){var m=this;!1!==qo.notify(m,"beforeLayout")&&(ji.update(this,this.width,this.height),m._layers=[],pe.each(m.boxes,function(w){w._configure&&w._configure(),m._layers.push.apply(m._layers,w._layers())},m),m._layers.forEach(function(w,T){w._idx=T}),qo.notify(m,"afterScaleUpdate"),qo.notify(m,"afterLayout"))},updateDatasets:function(){if(!1!==qo.notify(this,"beforeDatasetsUpdate")){for(var m=0,w=this.data.datasets.length;m<w;++m)this.updateDataset(m);qo.notify(this,"afterDatasetsUpdate")}},updateDataset:function(m){var w=this.getDatasetMeta(m),T={meta:w,index:m};!1!==qo.notify(this,"beforeDatasetUpdate",[T])&&(w.controller._update(),qo.notify(this,"afterDatasetUpdate",[T]))},render:function(m){var w=this;m&&"object"==typeof m||(m={duration:m,lazy:arguments[1]});var T=w.options.animation,I=_l(m.duration,T&&T.duration),N=m.lazy;if(!1!==qo.notify(w,"beforeRender")){var j=function($){qo.notify(w,"afterRender"),pe.callback(T&&T.onComplete,[$],w)};if(T&&I){var q=new ia({numSteps:I/16.66,easing:m.easing||T.easing,render:function($,te){var ge=te.currentStep,be=ge/te.numSteps;$.draw((0,pe.easing.effects[te.easing])(be),be,ge)},onAnimationProgress:T.onProgress,onAnimationComplete:j});Ps.addAnimation(w,q,I,N)}else w.draw(),j(new ia({numSteps:0,chart:w}));return w}},draw:function(m){var w,T,I=this;if(I.clear(),pe.isNullOrUndef(m)&&(m=1),I.transition(m),!(I.width<=0||I.height<=0)&&!1!==qo.notify(I,"beforeDraw",[m])){for(T=I._layers,w=0;w<T.length&&T[w].z<=0;++w)T[w].draw(I.chartArea);for(I.drawDatasets(m);w<T.length;++w)T[w].draw(I.chartArea);I._drawTooltip(m),qo.notify(I,"afterDraw",[m])}},transition:function(m){for(var w=0,T=(this.data.datasets||[]).length;w<T;++w)this.isDatasetVisible(w)&&this.getDatasetMeta(w).controller.transition(m);this.tooltip.transition(m)},_getSortedDatasetMetas:function(m){var w,T,I=[];for(w=0,T=(this.data.datasets||[]).length;w<T;++w)m&&!this.isDatasetVisible(w)||I.push(this.getDatasetMeta(w));return I.sort(jh("order","index")),I},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(m){var w,T;if(!1!==qo.notify(this,"beforeDatasetsDraw",[m])){for(T=(w=this._getSortedVisibleDatasetMetas()).length-1;T>=0;--T)this.drawDataset(w[T],m);qo.notify(this,"afterDatasetsDraw",[m])}},drawDataset:function(m,w){var T={meta:m,index:m.index,easingValue:w};!1!==qo.notify(this,"beforeDatasetDraw",[T])&&(m.controller.draw(w),qo.notify(this,"afterDatasetDraw",[T]))},_drawTooltip:function(m){var w=this.tooltip,T={tooltip:w,easingValue:m};!1!==qo.notify(this,"beforeTooltipDraw",[T])&&(w.draw(),qo.notify(this,"afterTooltipDraw",[T]))},getElementAtEvent:function(m){return ui.modes.single(this,m)},getElementsAtEvent:function(m){return ui.modes.label(this,m,{intersect:!0})},getElementsAtXAxis:function(m){return ui.modes["x-axis"](this,m,{intersect:!0})},getElementsAtEventForMode:function(m,w,T){var I=ui.modes[w];return"function"==typeof I?I(this,m,T):[]},getDatasetAtEvent:function(m){return ui.modes.dataset(this,m,{intersect:!0})},getDatasetMeta:function(m){var w=this.data.datasets[m];w._meta||(w._meta={});var T=w._meta[this.id];return T||(T=w._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:w.order||0,index:m}),T},getVisibleDatasetCount:function(){for(var m=0,w=0,T=this.data.datasets.length;w<T;++w)this.isDatasetVisible(w)&&m++;return m},isDatasetVisible:function(m){var w=this.getDatasetMeta(m);return"boolean"==typeof w.hidden?!w.hidden:!this.data.datasets[m].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(m){var w=this.id,T=this.data.datasets[m],I=T._meta&&T._meta[w];I&&(I.controller.destroy(),delete T._meta[w])},destroy:function(){var m,w,T=this,I=T.canvas;for(T.stop(),m=0,w=T.data.datasets.length;m<w;++m)T.destroyDatasetMeta(m);I&&(T.unbindEvents(),pe.canvas.clear(T),Ei.releaseContext(T.ctx),T.canvas=null,T.ctx=null),qo.notify(T,"destroy"),delete wl.instances[T.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var m=this;m.tooltip=new od({_chart:m,_chartInstance:m,_data:m.data,_options:m.options.tooltips},m)},bindEvents:function(){var m=this,w=m._listeners={},T=function(){m.eventHandler.apply(m,arguments)};pe.each(m.options.events,function(I){Ei.addEventListener(m,I,T),w[I]=T}),m.options.responsive&&(T=function(){m.resize()},Ei.addEventListener(m,"resize",T),w.resize=T)},unbindEvents:function(){var m=this,w=m._listeners;w&&(delete m._listeners,pe.each(w,function(T,I){Ei.removeEventListener(m,I,T)}))},updateHoverStyle:function(m,w,T){var I,N,j,q=T?"set":"remove";for(N=0,j=m.length;N<j;++N)(I=m[N])&&this.getDatasetMeta(I._datasetIndex).controller[q+"HoverStyle"](I);"dataset"===w&&this.getDatasetMeta(m[0]._datasetIndex).controller["_"+q+"DatasetHoverStyle"]()},eventHandler:function(m){var w=this,T=w.tooltip;if(!1!==qo.notify(w,"beforeEvent",[m])){w._bufferedRender=!0,w._bufferedRequest=null;var I=w.handleEvent(m);T&&(I=T._start?T.handleEvent(m):I|T.handleEvent(m)),qo.notify(w,"afterEvent",[m]);var N=w._bufferedRequest;return N?w.render(N):I&&!w.animating&&(w.stop(),w.render({duration:w.options.hover.animationDuration,lazy:!0})),w._bufferedRender=!1,w._bufferedRequest=null,w}},handleEvent:function(m){var w,T=this,I=T.options||{},N=I.hover;return T.lastActive=T.lastActive||[],T.active="mouseout"===m.type?[]:T.getElementsAtEventForMode(m,N.mode,N),pe.callback(I.onHover||I.hover.onHover,[m.native,T.active],T),"mouseup"!==m.type&&"click"!==m.type||I.onClick&&I.onClick.call(T,m.native,T.active),T.lastActive.length&&T.updateHoverStyle(T.lastActive,N.mode,!1),T.active.length&&N.mode&&T.updateHoverStyle(T.active,N.mode,!0),w=!pe.arrayEquals(T.active,T.lastActive),T.lastActive=T.active,w}}),wl.instances={};var Po=wl;function li(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Hd(m){this.options=m||{}}wl.Controller=wl,wl.types={},pe.configMerge=Gl,pe.scaleMerge=pf,pe.extend(Hd.prototype,{formats:li,parse:li,format:li,add:li,diff:li,startOf:li,endOf:li,_create:function(m){return m}}),Hd.override=function(m){pe.extend(Hd.prototype,m)};var Nu={_date:Hd},Wd={formatters:{values:function(m){return pe.isArray(m)?m:""+m},linear:function(m,w,T){var I=T.length>3?T[2]-T[1]:T[1]-T[0];Math.abs(I)>1&&m!==Math.floor(m)&&(I=m-Math.floor(m));var N=pe.log10(Math.abs(I)),j="";if(0!==m)if(Math.max(Math.abs(T[0]),Math.abs(T[T.length-1]))<1e-4){var q=pe.log10(Math.abs(m)),$=Math.floor(q)-Math.floor(N);$=Math.max(Math.min($,20),0),j=m.toExponential($)}else{var te=-1*Math.floor(N);te=Math.max(Math.min(te,20),0),j=m.toFixed(te)}else j="0";return j},logarithmic:function(m,w,T){var I=m/Math.pow(10,Math.floor(pe.log10(m)));return 0===m?"0":1===I||2===I||5===I||0===w||w===T.length-1?m.toExponential():""}}},vf=pe.isArray,jl=pe.isNullOrUndef,Ca=pe.valueOrDefault,id=pe.valueAtIndexOrDefault;function Lu(m,w,T){var I,N=m.getTicks().length,j=Math.min(w,N-1),q=m.getPixelForTick(j),$=m._startPixel,te=m._endPixel;if(!(T&&(I=1===N?Math.max(q-$,te-q):0===w?(m.getPixelForTick(1)-q)/2:(q-m.getPixelForTick(j-1))/2,(q+=j<w?I:-I)<$-1e-6||q>te+1e-6)))return q}function Vi(m){return m.drawTicks?m.tickMarkLength:0}function ts(m){var w,T;return m.display?(w=pe.options._parseFont(m),T=pe.options.toPadding(m.padding),w.lineHeight+T.height):0}function Sl(m,w){return pe.extend(pe.options._parseFont({fontFamily:Ca(w.fontFamily,m.fontFamily),fontSize:Ca(w.fontSize,m.fontSize),fontStyle:Ca(w.fontStyle,m.fontStyle),lineHeight:Ca(w.lineHeight,m.lineHeight)}),{color:pe.options.resolve([w.fontColor,m.fontColor,xt.global.defaultFontColor])})}function Rs(m){var w=Sl(m,m.minor);return{minor:w,major:m.major.enabled?Sl(m,m.major):w}}function Ga(m){var w,T,I,N=[];for(T=0,I=m.length;T<I;++T)void 0!==(w=m[T])._index&&N.push(w);return N}function cc(m,w,T,I){var N,j,q,$,te=Ca(T,0),ae=Math.min(Ca(I,m.length),m.length),ge=0;for(w=Math.ceil(w),I&&(w=(N=I-T)/Math.floor(N/w)),$=te;$<0;)ge++,$=Math.round(te+ge*w);for(j=Math.max(te,0);j<ae;j++)q=m[j],j===$?(q._index=j,ge++,$=Math.round(te+ge*w)):delete q.label}xt._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Wd.formatters.values,minor:{},major:{}}});var Rc=zi.extend({zeroLineIndex:0,getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var m=this.chart.data;return this.options.labels||(this.isHorizontal()?m.xLabels:m.yLabels)||m.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){pe.callback(this.options.beforeUpdate,[this])},update:function(m,w,T){var I,N,j,q,$,te=this,ae=te.options.ticks,ge=ae.sampleSize;if(te.beforeUpdate(),te.maxWidth=m,te.maxHeight=w,te.margins=pe.extend({left:0,right:0,top:0,bottom:0},T),te._ticks=null,te.ticks=null,te._labelSizes=null,te._maxLabelLines=0,te.longestLabelWidth=0,te.longestTextCache=te.longestTextCache||{},te._gridLineItems=null,te._labelItems=null,te.beforeSetDimensions(),te.setDimensions(),te.afterSetDimensions(),te.beforeDataLimits(),te.determineDataLimits(),te.afterDataLimits(),te.beforeBuildTicks(),q=te.buildTicks()||[],(!(q=te.afterBuildTicks(q)||q)||!q.length)&&te.ticks)for(q=[],I=0,N=te.ticks.length;I<N;++I)q.push({value:te.ticks[I],major:!1});return te._ticks=q,j=te._convertTicksToLabels(($=ge<q.length)?function(be,Ce){for(var De=[],Ne=be.length/Ce,Xe=0,ft=be.length;Xe<ft;Xe+=Ne)De.push(be[Math.floor(Xe)]);return De}(q,ge):q),te._configure(),te.beforeCalculateTickRotation(),te.calculateTickRotation(),te.afterCalculateTickRotation(),te.beforeFit(),te.fit(),te.afterFit(),te._ticksToDraw=ae.display&&(ae.autoSkip||"auto"===ae.source)?te._autoSkip(q):q,$&&(j=te._convertTicksToLabels(te._ticksToDraw)),te.ticks=j,te.afterUpdate(),te.minSize},_configure:function(){var m,w,T=this,I=T.options.ticks.reverse;T.isHorizontal()?(m=T.left,w=T.right):(m=T.top,w=T.bottom,I=!I),T._startPixel=m,T._endPixel=w,T._reversePixels=I,T._length=w-m},afterUpdate:function(){pe.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){pe.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var m=this;m.isHorizontal()?(m.width=m.maxWidth,m.left=0,m.right=m.width):(m.height=m.maxHeight,m.top=0,m.bottom=m.height),m.paddingLeft=0,m.paddingTop=0,m.paddingRight=0,m.paddingBottom=0},afterSetDimensions:function(){pe.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){pe.callback(this.options.beforeDataLimits,[this])},determineDataLimits:pe.noop,afterDataLimits:function(){pe.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){pe.callback(this.options.beforeBuildTicks,[this])},buildTicks:pe.noop,afterBuildTicks:function(m){var w=this;return vf(m)&&m.length?pe.callback(w.options.afterBuildTicks,[w,m]):(w.ticks=pe.callback(w.options.afterBuildTicks,[w,w.ticks])||w.ticks,m)},beforeTickToLabelConversion:function(){pe.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var m=this.options.ticks;this.ticks=this.ticks.map(m.userCallback||m.callback,this)},afterTickToLabelConversion:function(){pe.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){pe.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var m,w,T,I,N,j,q,$=this,te=$.options,ae=te.ticks,ge=$.getTicks().length,be=ae.minRotation||0,Ce=ae.maxRotation,De=be;!$._isVisible()||!ae.display||be>=Ce||ge<=1||!$.isHorizontal()?$.labelRotation=be:(w=(m=$._getLabelSizes()).widest.width,T=m.highest.height-m.highest.offset,I=Math.min($.maxWidth,$.chart.width-w),w+6>(N=te.offset?$.maxWidth/ge:I/(ge-1))&&(N=I/(ge-(te.offset?.5:1)),j=$.maxHeight-Vi(te.gridLines)-ae.padding-ts(te.scaleLabel),q=Math.sqrt(w*w+T*T),De=pe.toDegrees(Math.min(Math.asin(Math.min((m.highest.height+6)/N,1)),Math.asin(Math.min(j/q,1))-Math.asin(T/q))),De=Math.max(be,Math.min(Ce,De))),$.labelRotation=De)},afterCalculateTickRotation:function(){pe.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){pe.callback(this.options.beforeFit,[this])},fit:function(){var m=this,w=m.minSize={width:0,height:0},T=m.chart,I=m.options,N=I.ticks,j=I.scaleLabel,q=I.gridLines,$=m._isVisible(),te="bottom"===I.position,ae=m.isHorizontal();if(ae?w.width=m.maxWidth:$&&(w.width=Vi(q)+ts(j)),ae?$&&(w.height=Vi(q)+ts(j)):w.height=m.maxHeight,N.display&&$){var ge=Rs(N),be=m._getLabelSizes(),Ce=be.first,De=be.last,Ne=be.widest,Xe=be.highest,ft=.4*ge.minor.lineHeight,an=N.padding;if(ae){var jt=0!==m.labelRotation,Xt=pe.toRadians(m.labelRotation),vn=Math.cos(Xt),On=Math.sin(Xt);w.height=Math.min(m.maxHeight,w.height+(On*Ne.width+vn*(Xe.height-(jt?Xe.offset:0))+(jt?0:ft))+an);var $r,Hr,br=m.getPixelForTick(0)-m.left,Xo=m.right-m.getPixelForTick(m.getTicks().length-1);jt?($r=te?vn*Ce.width+On*Ce.offset:On*(Ce.height-Ce.offset),Hr=te?On*(De.height-De.offset):vn*De.width+On*De.offset):($r=Ce.width/2,Hr=De.width/2),m.paddingLeft=Math.max(($r-br)*m.width/(m.width-br),0)+3,m.paddingRight=Math.max((Hr-Xo)*m.width/(m.width-Xo),0)+3}else w.width=Math.min(m.maxWidth,w.width+(N.mirror?0:Ne.width+an+ft)),m.paddingTop=Ce.height/2,m.paddingBottom=De.height/2}m.handleMargins(),ae?(m.width=m._length=T.width-m.margins.left-m.margins.right,m.height=w.height):(m.width=w.width,m.height=m._length=T.height-m.margins.top-m.margins.bottom)},handleMargins:function(){var m=this;m.margins&&(m.margins.left=Math.max(m.paddingLeft,m.margins.left),m.margins.top=Math.max(m.paddingTop,m.margins.top),m.margins.right=Math.max(m.paddingRight,m.margins.right),m.margins.bottom=Math.max(m.paddingBottom,m.margins.bottom))},afterFit:function(){pe.callback(this.options.afterFit,[this])},isHorizontal:function(){var m=this.options.position;return"top"===m||"bottom"===m},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(m){if(jl(m))return NaN;if(("number"==typeof m||m instanceof Number)&&!isFinite(m))return NaN;if(m)if(this.isHorizontal()){if(void 0!==m.x)return this.getRightValue(m.x)}else if(void 0!==m.y)return this.getRightValue(m.y);return m},_convertTicksToLabels:function(m){var w,T,I,N=this;for(N.ticks=m.map(function(j){return j.value}),N.beforeTickToLabelConversion(),w=N.convertTicksToLabels(m)||N.ticks,N.afterTickToLabelConversion(),T=0,I=m.length;T<I;++T)m[T].label=w[T];return w},_getLabelSizes:function(){var m=this,w=m._labelSizes;return w||(m._labelSizes=w=function(m,w,T,I){var N,j,q,$,te,ae,ge,be,Ce,De,Ne,Xe,ft,br,an=T.length,jt=[],Xt=[],vn=[],On=0,er=0;for(N=0;N<an;++N){if($=T[N].label,m.font=ae=(te=T[N].major?w.major:w.minor).string,ge=I[ae]=I[ae]||{data:{},gc:[]},be=te.lineHeight,Ce=De=0,jl($)||vf($)){if(vf($))for(j=0,q=$.length;j<q;++j)jl(Ne=$[j])||vf(Ne)||(Ce=pe.measureText(m,ge.data,ge.gc,Ce,Ne),De+=be)}else Ce=pe.measureText(m,ge.data,ge.gc,Ce,$),De=be;jt.push(Ce),Xt.push(De),vn.push(be/2),On=Math.max(Ce,On),er=Math.max(De,er)}function $r(Hr){return{width:jt[Hr]||0,height:Xt[Hr]||0,offset:vn[Hr]||0}}return br=an,pe.each(I,function(Xo){var xo,Wr=Xo.gc,gr=Wr.length/2;if(gr>br){for(xo=0;xo<gr;++xo)delete Xo.data[Wr[xo]];Wr.splice(0,gr)}}),Xe=jt.indexOf(On),ft=Xt.indexOf(er),{first:$r(0),last:$r(an-1),widest:$r(Xe),highest:$r(ft)}}(m.ctx,Rs(m.options.ticks),m.getTicks(),m.longestTextCache),m.longestLabelWidth=w.widest.width),w},_parseValue:function(m){var w,T,I,N;return vf(m)?(w=+this.getRightValue(m[0]),T=+this.getRightValue(m[1]),I=Math.min(w,T),N=Math.max(w,T)):(w=void 0,T=m=+this.getRightValue(m),I=m,N=m),{min:I,max:N,start:w,end:T}},_getScaleLabel:function(m){var w=this._parseValue(m);return void 0!==w.start?"["+w.start+", "+w.end+"]":+this.getRightValue(m)},getLabelForIndex:pe.noop,getPixelForValue:pe.noop,getValueForPixel:pe.noop,getPixelForTick:function(m){var w=this.options.offset,T=this._ticks.length,I=1/Math.max(T-(w?0:1),1);return m<0||m>T-1?null:this.getPixelForDecimal(m*I+(w?I/2:0))},getPixelForDecimal:function(m){return this._reversePixels&&(m=1-m),this._startPixel+m*this._length},getDecimalForPixel:function(m){var w=(m-this._startPixel)/this._length;return this._reversePixels?1-w:w},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var m=this.min,w=this.max;return this.beginAtZero?0:m<0&&w<0?w:m>0&&w>0?m:0},_autoSkip:function(m){var w,T,I,N,j=this.options.ticks,$=j.maxTicksLimit||this._length/this._tickSize()+1,te=j.major.enabled?function(Ce){var De,Ne,Xe=[];for(De=0,Ne=Ce.length;De<Ne;De++)Ce[De].major&&Xe.push(De);return Xe}(m):[],ae=te.length,ge=te[0],be=te[ae-1];if(ae>$)return function(Ce,De,Ne){var Xe,ft,an=0,jt=De[0];for(Ne=Math.ceil(Ne),Xe=0;Xe<Ce.length;Xe++)ft=Ce[Xe],Xe===jt?(ft._index=Xe,jt=De[++an*Ne]):delete ft.label}(m,te,ae/$),Ga(m);if(I=function(Ce,De,Ne,Xe){var ft,an,jt,Xt,vn=function(er){var $r,Hr,br=er.length;if(br<2)return!1;for(Hr=er[0],$r=1;$r<br;++$r)if(er[$r]-er[$r-1]!==Hr)return!1;return Hr}(Ce),On=(De.length-1)/Xe;if(!vn)return Math.max(On,1);for(jt=0,Xt=(ft=pe.math._factorize(vn)).length-1;jt<Xt;jt++)if((an=ft[jt])>On)return an;return Math.max(On,1)}(te,m,0,$),ae>0){for(w=0,T=ae-1;w<T;w++)cc(m,I,te[w],te[w+1]);return cc(m,I,pe.isNullOrUndef(N=ae>1?(be-ge)/(ae-1):null)?0:ge-N,ge),cc(m,I,be,pe.isNullOrUndef(N)?m.length:be+N),Ga(m)}return cc(m,I),Ga(m)},_tickSize:function(){var m=this.options.ticks,w=pe.toRadians(this.labelRotation),T=Math.abs(Math.cos(w)),I=Math.abs(Math.sin(w)),N=this._getLabelSizes(),j=m.autoSkipPadding||0,q=N?N.widest.width+j:0,$=N?N.highest.height+j:0;return this.isHorizontal()?$*T>q*I?q/T:$/I:$*I<q*T?$/T:q/I},_isVisible:function(){var m,w,T,I=this.chart,N=this.options.display;if("auto"!==N)return!!N;for(m=0,w=I.data.datasets.length;m<w;++m)if(I.isDatasetVisible(m)&&((T=I.getDatasetMeta(m)).xAxisID===this.id||T.yAxisID===this.id))return!0;return!1},_computeGridLineItems:function(m){var w,T,I,N,j,q,$,te,ae,ge,be,Ce,De,Ne,Xe,ft,an,jt=this,Xt=jt.chart,vn=jt.options,On=vn.gridLines,er=vn.position,$r=On.offsetGridLines,Hr=jt.isHorizontal(),br=jt._ticksToDraw,Xo=br.length+($r?1:0),xo=Vi(On),Wr=[],gr=On.drawBorder?id(On.lineWidth,0,0):0,gn=gr/2,To=pe._alignPixel,Ho=function(Io){return To(Xt,Io,gr)};for("top"===er?(w=Ho(jt.bottom),$=jt.bottom-xo,ae=w-gn,be=Ho(m.top)+gn,De=m.bottom):"bottom"===er?(w=Ho(jt.top),be=m.top,De=Ho(m.bottom)-gn,$=w+gn,ae=jt.top+xo):"left"===er?(w=Ho(jt.right),q=jt.right-xo,te=w-gn,ge=Ho(m.left)+gn,Ce=m.right):(w=Ho(jt.left),ge=m.left,Ce=Ho(m.right)-gn,q=w+gn,te=jt.left+xo),T=0;T<Xo;++T)jl((I=br[T]||{}).label)&&T<br.length||(T===jt.zeroLineIndex&&vn.offset===$r?(Ne=On.zeroLineWidth,Xe=On.zeroLineColor,ft=On.zeroLineBorderDash||[],an=On.zeroLineBorderDashOffset||0):(Ne=id(On.lineWidth,T,1),Xe=id(On.color,T,"rgba(0,0,0,0.1)"),ft=On.borderDash||[],an=On.borderDashOffset||0),void 0!==(N=Lu(jt,I._index||T,$r))&&(j=To(Xt,N,Ne),Hr?q=te=ge=Ce=j:$=ae=be=De=j,Wr.push({tx1:q,ty1:$,tx2:te,ty2:ae,x1:ge,y1:be,x2:Ce,y2:De,width:Ne,color:Xe,borderDash:ft,borderDashOffset:an})));return Wr.ticksLength=Xo,Wr.borderValue=w,Wr},_computeLabelItems:function(){var m,w,T,I,N,j,q,$,te,ae,ge,be,Ce=this,De=Ce.options,Ne=De.ticks,Xe=De.position,ft=Ne.mirror,an=Ce.isHorizontal(),jt=Ce._ticksToDraw,Xt=Rs(Ne),vn=Ne.padding,On=Vi(De.gridLines),er=-pe.toRadians(Ce.labelRotation),$r=[];for("top"===Xe?(j=Ce.bottom-On-vn,q=er?"left":"center"):"bottom"===Xe?(j=Ce.top+On+vn,q=er?"right":"center"):"left"===Xe?(N=Ce.right-(ft?0:On)-vn,q=ft?"left":"right"):(N=Ce.left+(ft?0:On)+vn,q=ft?"right":"left"),m=0,w=jt.length;m<w;++m)I=(T=jt[m]).label,jl(I)||($=Ce.getPixelForTick(T._index||m)+Ne.labelOffset,ae=(te=T.major?Xt.major:Xt.minor).lineHeight,ge=vf(I)?I.length:1,an?(N=$,be="top"===Xe?((er?1:.5)-ge)*ae:(er?0:.5)*ae):(j=$,be=(1-ge)*ae/2),$r.push({x:N,y:j,rotation:er,label:I,font:te,textOffset:be,textAlign:q}));return $r},_drawGrid:function(m){var w=this,T=w.options.gridLines;if(T.display){var I,N,j,q,$,te=w.ctx,ae=w.chart,ge=pe._alignPixel,be=T.drawBorder?id(T.lineWidth,0,0):0,Ce=w._gridLineItems||(w._gridLineItems=w._computeGridLineItems(m));for(j=0,q=Ce.length;j<q;++j)I=($=Ce[j]).width,N=$.color,I&&N&&(te.save(),te.lineWidth=I,te.strokeStyle=N,te.setLineDash&&(te.setLineDash($.borderDash),te.lineDashOffset=$.borderDashOffset),te.beginPath(),T.drawTicks&&(te.moveTo($.tx1,$.ty1),te.lineTo($.tx2,$.ty2)),T.drawOnChartArea&&(te.moveTo($.x1,$.y1),te.lineTo($.x2,$.y2)),te.stroke(),te.restore());if(be){var De,Ne,Xe,ft,an=be,jt=id(T.lineWidth,Ce.ticksLength-1,1),Xt=Ce.borderValue;w.isHorizontal()?(De=ge(ae,w.left,an)-an/2,Ne=ge(ae,w.right,jt)+jt/2,Xe=ft=Xt):(Xe=ge(ae,w.top,an)-an/2,ft=ge(ae,w.bottom,jt)+jt/2,De=Ne=Xt),te.lineWidth=be,te.strokeStyle=id(T.color,0),te.beginPath(),te.moveTo(De,Xe),te.lineTo(Ne,ft),te.stroke()}}},_drawLabels:function(){var m=this;if(m.options.ticks.display){var w,T,I,N,j,q,$,te,ae=m.ctx,ge=m._labelItems||(m._labelItems=m._computeLabelItems());for(w=0,I=ge.length;w<I;++w){if(q=(j=ge[w]).font,ae.save(),ae.translate(j.x,j.y),ae.rotate(j.rotation),ae.font=q.string,ae.fillStyle=q.color,ae.textBaseline="middle",ae.textAlign=j.textAlign,te=j.textOffset,vf($=j.label))for(T=0,N=$.length;T<N;++T)ae.fillText(""+$[T],0,te),te+=q.lineHeight;else ae.fillText($,0,te);ae.restore()}}},_drawTitle:function(){var m=this,w=m.ctx,T=m.options,I=T.scaleLabel;if(I.display){var N,j,q=Ca(I.fontColor,xt.global.defaultFontColor),$=pe.options._parseFont(I),te=pe.options.toPadding(I.padding),ae=$.lineHeight/2,ge=T.position,be=0;if(m.isHorizontal())N=m.left+m.width/2,j="bottom"===ge?m.bottom-ae-te.bottom:m.top+ae+te.top;else{var Ce="left"===ge;N=Ce?m.left+ae+te.top:m.right-ae-te.top,j=m.top+m.height/2,be=Ce?-.5*Math.PI:.5*Math.PI}w.save(),w.translate(N,j),w.rotate(be),w.textAlign="center",w.textBaseline="middle",w.fillStyle=q,w.font=$.string,w.fillText(I.labelString,0,0),w.restore()}},draw:function(m){this._isVisible()&&(this._drawGrid(m),this._drawTitle(),this._drawLabels())},_layers:function(){var m=this,w=m.options,T=w.ticks&&w.ticks.z||0,I=w.gridLines&&w.gridLines.z||0;return m._isVisible()&&T!==I&&m.draw===m._draw?[{z:I,draw:function(){m._drawGrid.apply(m,arguments),m._drawTitle.apply(m,arguments)}},{z:T,draw:function(){m._drawLabels.apply(m,arguments)}}]:[{z:T,draw:function(){m.draw.apply(m,arguments)}}]},_getMatchingVisibleMetas:function(m){var w=this,T=w.isHorizontal();return w.chart._getSortedVisibleDatasetMetas().filter(function(I){return(!m||I.type===m)&&(T?I.xAxisID===w.id:I.yAxisID===w.id)})}});Rc.prototype._draw=Rc.prototype.draw;var Bu=Rc,ks=pe.isNullOrUndef,oi=Bu.extend({determineDataLimits:function(){var m,w=this,T=w._getLabels(),I=w.options.ticks,N=I.min,j=I.max,q=0,$=T.length-1;void 0!==N&&(m=T.indexOf(N))>=0&&(q=m),void 0!==j&&(m=T.indexOf(j))>=0&&($=m),w.minIndex=q,w.maxIndex=$,w.min=T[q],w.max=T[$]},buildTicks:function(){var m=this._getLabels(),w=this.minIndex,T=this.maxIndex;this.ticks=0===w&&T===m.length-1?m:m.slice(w,T+1)},getLabelForIndex:function(m,w){var T=this.chart;return T.getDatasetMeta(w).controller._getValueScaleId()===this.id?this.getRightValue(T.data.datasets[w].data[m]):this._getLabels()[m]},_configure:function(){var m=this,w=m.options.offset,T=m.ticks;Bu.prototype._configure.call(m),m.isHorizontal()||(m._reversePixels=!m._reversePixels),T&&(m._startValue=m.minIndex-(w?.5:0),m._valueRange=Math.max(T.length-(w?0:1),1))},getPixelForValue:function(m,w,T){var I,N,j,q=this;return ks(w)||ks(T)||(m=q.chart.data.datasets[T].data[w]),ks(m)||(I=q.isHorizontal()?m.x:m.y),(void 0!==I||void 0!==m&&isNaN(w))&&(N=q._getLabels(),m=pe.valueOrDefault(I,m),w=-1!==(j=N.indexOf(m))?j:w,isNaN(w)&&(w=m)),q.getPixelForDecimal((w-q._startValue)/q._valueRange)},getPixelForTick:function(m){var w=this.ticks;return m<0||m>w.length-1?null:this.getPixelForValue(w[m],m+this.minIndex)},getValueForPixel:function(m){var w=Math.round(this._startValue+this.getDecimalForPixel(m)*this._valueRange);return Math.min(Math.max(w,0),this.ticks.length-1)},getBasePixel:function(){return this.bottom}});oi._defaults={position:"bottom"};var Ms=pe.isNullOrUndef,Hi=Bu.extend({getRightValue:function(m){return"string"==typeof m?+m:Bu.prototype.getRightValue.call(this,m)},handleTickRangeOptions:function(){var m=this,w=m.options.ticks;if(w.beginAtZero){var T=pe.sign(m.min),I=pe.sign(m.max);T<0&&I<0?m.max=0:T>0&&I>0&&(m.min=0)}var N=void 0!==w.min||void 0!==w.suggestedMin,j=void 0!==w.max||void 0!==w.suggestedMax;void 0!==w.min?m.min=w.min:void 0!==w.suggestedMin&&(m.min=null===m.min?w.suggestedMin:Math.min(m.min,w.suggestedMin)),void 0!==w.max?m.max=w.max:void 0!==w.suggestedMax&&(m.max=null===m.max?w.suggestedMax:Math.max(m.max,w.suggestedMax)),N!==j&&m.min>=m.max&&(N?m.max=m.min+1:m.min=m.max-1),m.min===m.max&&(m.max++,w.beginAtZero||m.min--)},getTickLimit:function(){var m,w=this.options.ticks,T=w.stepSize,I=w.maxTicksLimit;return T?m=Math.ceil(this.max/T)-Math.floor(this.min/T)+1:(m=this._computeTickLimit(),I=I||11),I&&(m=Math.min(I,m)),m},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:pe.noop,buildTicks:function(){var m=this,w=m.options.ticks,T=m.getTickLimit(),I={maxTicks:T=Math.max(2,T),min:w.min,max:w.max,precision:w.precision,stepSize:pe.valueOrDefault(w.fixedStepSize,w.stepSize)},N=m.ticks=function(j,q){var $,te,ae,ge,be=[],Ce=j.stepSize,De=Ce||1,Ne=j.maxTicks-1,Xe=j.min,ft=j.max,an=j.precision,jt=q.min,Xt=q.max,vn=pe.niceNum((Xt-jt)/Ne/De)*De;if(vn<1e-14&&Ms(Xe)&&Ms(ft))return[jt,Xt];(ge=Math.ceil(Xt/vn)-Math.floor(jt/vn))>Ne&&(vn=pe.niceNum(ge*vn/Ne/De)*De),Ce||Ms(an)?$=Math.pow(10,pe._decimalPlaces(vn)):($=Math.pow(10,an),vn=Math.ceil(vn*$)/$),te=Math.floor(jt/vn)*vn,ae=Math.ceil(Xt/vn)*vn,Ce&&(!Ms(Xe)&&pe.almostWhole(Xe/vn,vn/1e3)&&(te=Xe),!Ms(ft)&&pe.almostWhole(ft/vn,vn/1e3)&&(ae=ft)),ge=pe.almostEquals(ge=(ae-te)/vn,Math.round(ge),vn/1e3)?Math.round(ge):Math.ceil(ge),te=Math.round(te*$)/$,ae=Math.round(ae*$)/$,be.push(Ms(Xe)?te:Xe);for(var On=1;On<ge;++On)be.push(Math.round((te+On*vn)*$)/$);return be.push(Ms(ft)?ae:ft),be}(I,m);m.handleDirectionalChanges(),m.max=pe.max(N),m.min=pe.min(N),w.reverse?(N.reverse(),m.start=m.max,m.end=m.min):(m.start=m.min,m.end=m.max)},convertTicksToLabels:function(){var m=this;m.ticksAsNumbers=m.ticks.slice(),m.zeroLineIndex=m.ticks.indexOf(0),Bu.prototype.convertTicksToLabels.call(m)},_configure:function(){var m,w=this,T=w.getTicks(),I=w.min,N=w.max;Bu.prototype._configure.call(w),w.options.offset&&T.length&&(I-=m=(N-I)/Math.max(T.length-1,1)/2,N+=m),w._startValue=I,w._endValue=N,w._valueRange=N-I}}),ja={position:"left",ticks:{callback:Wd.formatters.linear}};function Um(m,w,T,I){var N,j,be,De,Ne,q=m.options,$=(void 0===(be=w)[Ne=[(De=T).type,void 0===q.stacked&&void 0===De.stack?De.index:"",De.stack].join(".")]&&(be[Ne]={pos:[],neg:[]}),be[Ne]),te=$.pos,ae=$.neg,ge=I.length;for(N=0;N<ge;++N)j=m._parseValue(I[N]),isNaN(j.min)||isNaN(j.max)||T.data[N].hidden||(te[N]=te[N]||0,ae[N]=ae[N]||0,q.relativePoints?te[N]=100:j.min<0||j.max<0?ae[N]+=j.min:te[N]+=j.max)}function Vo(m,w,T){var I,N,j=T.length;for(I=0;I<j;++I)N=m._parseValue(T[I]),isNaN(N.min)||isNaN(N.max)||w.data[I].hidden||(m.min=Math.min(m.min,N.min),m.max=Math.max(m.max,N.max))}var pn=Hi.extend({determineDataLimits:function(){var m,w,T,I,N=this,j=N.options,q=N.chart.data.datasets,$=N._getMatchingVisibleMetas(),te=j.stacked,ae={},ge=$.length;if(N.min=Number.POSITIVE_INFINITY,N.max=Number.NEGATIVE_INFINITY,void 0===te)for(m=0;!te&&m<ge;++m)te=void 0!==(w=$[m]).stack;for(m=0;m<ge;++m)T=q[(w=$[m]).index].data,te?Um(N,ae,w,T):Vo(N,w,T);pe.each(ae,function(be){I=be.pos.concat(be.neg),N.min=Math.min(N.min,pe.min(I)),N.max=Math.max(N.max,pe.max(I))}),N.min=pe.isFinite(N.min)&&!isNaN(N.min)?N.min:0,N.max=pe.isFinite(N.max)&&!isNaN(N.max)?N.max:1,N.handleTickRangeOptions()},_computeTickLimit:function(){var m;return this.isHorizontal()?Math.ceil(this.width/40):(m=pe.options._parseFont(this.options.ticks),Math.ceil(this.height/m.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(m,w){return this._getScaleLabel(this.chart.data.datasets[w].data[m])},getPixelForValue:function(m){return this.getPixelForDecimal((+this.getRightValue(m)-this._startValue)/this._valueRange)},getValueForPixel:function(m){return this._startValue+this.getDecimalForPixel(m)*this._valueRange},getPixelForTick:function(m){var w=this.ticksAsNumbers;return m<0||m>w.length-1?null:this.getPixelForValue(w[m])}});pn._defaults=ja;var rl=pe.valueOrDefault,Ki=pe.math.log10,Ua={position:"left",ticks:{callback:Wd.formatters.logarithmic}};function Sr(m,w){return pe.isFinite(m)&&m>=0?m:w}var ad=Bu.extend({determineDataLimits:function(){var m,w,T,I,N,j,q=this,$=q.options,te=q.chart,ae=te.data.datasets,ge=q.isHorizontal();function be(ft){return ge?ft.xAxisID===q.id:ft.yAxisID===q.id}q.min=Number.POSITIVE_INFINITY,q.max=Number.NEGATIVE_INFINITY,q.minNotZero=Number.POSITIVE_INFINITY;var Ce=$.stacked;if(void 0===Ce)for(m=0;m<ae.length;m++)if(w=te.getDatasetMeta(m),te.isDatasetVisible(m)&&be(w)&&void 0!==w.stack){Ce=!0;break}if($.stacked||Ce){var De={};for(m=0;m<ae.length;m++){var Ne=[(w=te.getDatasetMeta(m)).type,void 0===$.stacked&&void 0===w.stack?m:"",w.stack].join(".");if(te.isDatasetVisible(m)&&be(w))for(void 0===De[Ne]&&(De[Ne]=[]),N=0,j=(I=ae[m].data).length;N<j;N++){var Xe=De[Ne];T=q._parseValue(I[N]),isNaN(T.min)||isNaN(T.max)||w.data[N].hidden||T.min<0||T.max<0||(Xe[N]=Xe[N]||0,Xe[N]+=T.max)}}pe.each(De,function(ft){if(ft.length>0){var an=pe.min(ft),jt=pe.max(ft);q.min=Math.min(q.min,an),q.max=Math.max(q.max,jt)}})}else for(m=0;m<ae.length;m++)if(w=te.getDatasetMeta(m),te.isDatasetVisible(m)&&be(w))for(N=0,j=(I=ae[m].data).length;N<j;N++)T=q._parseValue(I[N]),isNaN(T.min)||isNaN(T.max)||w.data[N].hidden||T.min<0||T.max<0||(q.min=Math.min(T.min,q.min),q.max=Math.max(T.max,q.max),0!==T.min&&(q.minNotZero=Math.min(T.min,q.minNotZero)));q.min=pe.isFinite(q.min)?q.min:null,q.max=pe.isFinite(q.max)?q.max:null,q.minNotZero=pe.isFinite(q.minNotZero)?q.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var m=this,w=m.options.ticks;m.min=Sr(w.min,m.min),m.max=Sr(w.max,m.max),m.min===m.max&&(0!==m.min&&null!==m.min?(m.min=Math.pow(10,Math.floor(Ki(m.min))-1),m.max=Math.pow(10,Math.floor(Ki(m.max))+1)):(m.min=1,m.max=10)),null===m.min&&(m.min=Math.pow(10,Math.floor(Ki(m.max))-1)),null===m.max&&(m.max=0!==m.min?Math.pow(10,Math.floor(Ki(m.min))+1):10),null===m.minNotZero&&(m.minNotZero=m.min>0?m.min:m.max<1?Math.pow(10,Math.floor(Ki(m.max))):1)},buildTicks:function(){var m=this,w=m.options.ticks,T=!m.isHorizontal(),I={min:Sr(w.min),max:Sr(w.max)},N=m.ticks=function(j,q){var $,te,ae=[],ge=rl(j.min,Math.pow(10,Math.floor(Ki(q.min)))),be=Math.floor(Ki(q.max)),Ce=Math.ceil(q.max/Math.pow(10,be));0===ge?($=Math.floor(Ki(q.minNotZero)),te=Math.floor(q.minNotZero/Math.pow(10,$)),ae.push(ge),ge=te*Math.pow(10,$)):($=Math.floor(Ki(ge)),te=Math.floor(ge/Math.pow(10,$)));var De=$<0?Math.pow(10,Math.abs($)):1;do{ae.push(ge),10==++te&&(te=1,De=++$>=0?1:De),ge=Math.round(te*Math.pow(10,$)*De)/De}while($<be||$===be&&te<Ce);var Ne=rl(j.max,ge);return ae.push(Ne),ae}(I,m);m.max=pe.max(N),m.min=pe.min(N),w.reverse?(T=!T,m.start=m.max,m.end=m.min):(m.start=m.min,m.end=m.max),T&&N.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),Bu.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(m,w){return this._getScaleLabel(this.chart.data.datasets[w].data[m])},getPixelForTick:function(m){var w=this.tickValues;return m<0||m>w.length-1?null:this.getPixelForValue(w[m])},_getFirstTickValue:function(m){var w=Math.floor(Ki(m));return Math.floor(m/Math.pow(10,w))*Math.pow(10,w)},_configure:function(){var m=this,w=m.min,T=0;Bu.prototype._configure.call(m),0===w&&(w=m._getFirstTickValue(m.minNotZero),T=rl(m.options.ticks.fontSize,xt.global.defaultFontSize)/m._length),m._startValue=Ki(w),m._valueOffset=T,m._valueRange=(Ki(m.max)-Ki(w))/(1-T)},getPixelForValue:function(m){var w=this,T=0;return(m=+w.getRightValue(m))>w.min&&m>0&&(T=(Ki(m)-w._startValue)/w._valueRange+w._valueOffset),w.getPixelForDecimal(T)},getValueForPixel:function(m){var w=this,T=w.getDecimalForPixel(m);return 0===T&&0===w.min?0:Math.pow(10,w._startValue+(T-w._valueOffset)*w._valueRange)}});ad._defaults=Ua;var Ul=pe.valueOrDefault,Ji=pe.valueAtIndexOrDefault,Mr=pe.options.resolve,nh={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Wd.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(m){return m}}};function In(m){var w=m.ticks;return w.display&&m.display?Ul(w.fontSize,xt.global.defaultFontSize)+2*w.backdropPaddingY:0}function ol(m,w,T,I,N){return m===I||m===N?{start:w-T/2,end:w+T/2}:m<I||m>N?{start:w-T,end:w}:{start:w,end:w+T}}function yf(m){return 0===m||180===m?"center":m<180?"left":"right"}function bf(m,w,T,I){var N,j,q=T.y+I/2;if(pe.isArray(w))for(N=0,j=w.length;N<j;++N)m.fillText(w[N],T.x,q),q+=I;else m.fillText(w,T.x,q)}function _i(m,w,T){90===m||270===m?T.y-=w.h/2:(m>270||m<90)&&(T.y-=w.h)}function Zr(m){return pe.isNumber(m)?m:0}var mu=Hi.extend({setDimensions:function(){var m=this;m.width=m.maxWidth,m.height=m.maxHeight,m.paddingTop=In(m.options)/2,m.xCenter=Math.floor(m.width/2),m.yCenter=Math.floor((m.height-m.paddingTop)/2),m.drawingArea=Math.min(m.height-m.paddingTop,m.width)/2},determineDataLimits:function(){var m=this,w=m.chart,T=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY;pe.each(w.data.datasets,function(N,j){if(w.isDatasetVisible(j)){var q=w.getDatasetMeta(j);pe.each(N.data,function($,te){var ae=+m.getRightValue($);isNaN(ae)||q.data[te].hidden||(T=Math.min(ae,T),I=Math.max(ae,I))})}}),m.min=T===Number.POSITIVE_INFINITY?0:T,m.max=I===Number.NEGATIVE_INFINITY?0:I,m.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/In(this.options))},convertTicksToLabels:function(){var m=this;Hi.prototype.convertTicksToLabels.call(m),m.pointLabels=m.chart.data.labels.map(function(){var w=pe.callback(m.options.pointLabels.callback,arguments,m);return w||0===w?w:""})},getLabelForIndex:function(m,w){return+this.getRightValue(this.chart.data.datasets[w].data[m])},fit:function(){var m=this.options;m.display&&m.pointLabels.display?function(w){var T,I,N,j=pe.options._parseFont(w.options.pointLabels),q={l:0,r:w.width,t:0,b:w.height-w.paddingTop},$={};w.ctx.font=j.string,w._pointLabelSizes=[];var te,ae,ge,be=w.chart.data.labels.length;for(T=0;T<be;T++){N=w.getPointPosition(T,w.drawingArea+5),te=w.ctx,ae=j.lineHeight,I=pe.isArray(ge=w.pointLabels[T])?{w:pe.longestText(te,te.font,ge),h:ge.length*ae}:{w:te.measureText(ge).width,h:ae},w._pointLabelSizes[T]=I;var Ce=w.getIndexAngle(T),De=pe.toDegrees(Ce)%360,Ne=ol(De,N.x,I.w,0,180),Xe=ol(De,N.y,I.h,90,270);Ne.start<q.l&&(q.l=Ne.start,$.l=Ce),Ne.end>q.r&&(q.r=Ne.end,$.r=Ce),Xe.start<q.t&&(q.t=Xe.start,$.t=Ce),Xe.end>q.b&&(q.b=Xe.end,$.b=Ce)}w.setReductions(w.drawingArea,q,$)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(m,w,T){var I=this,N=w.l/Math.sin(T.l),j=Math.max(w.r-I.width,0)/Math.sin(T.r),q=-w.t/Math.cos(T.t),$=-Math.max(w.b-(I.height-I.paddingTop),0)/Math.cos(T.b);N=Zr(N),j=Zr(j),q=Zr(q),$=Zr($),I.drawingArea=Math.min(Math.floor(m-(N+j)/2),Math.floor(m-(q+$)/2)),I.setCenterPoint(N,j,q,$)},setCenterPoint:function(m,w,T,I){var N=this,$=T+N.drawingArea,te=N.height-N.paddingTop-I-N.drawingArea;N.xCenter=Math.floor((m+N.drawingArea+(N.width-w-N.drawingArea))/2+N.left),N.yCenter=Math.floor(($+te)/2+N.top+N.paddingTop)},getIndexAngle:function(m){var w=this.chart,T=(m*(360/w.data.labels.length)+((w.options||{}).startAngle||0))%360;return(T<0?T+360:T)*Math.PI*2/360},getDistanceFromCenterForValue:function(m){var w=this;if(pe.isNullOrUndef(m))return NaN;var T=w.drawingArea/(w.max-w.min);return w.options.ticks.reverse?(w.max-m)*T:(m-w.min)*T},getPointPosition:function(m,w){var T=this.getIndexAngle(m)-Math.PI/2;return{x:Math.cos(T)*w+this.xCenter,y:Math.sin(T)*w+this.yCenter}},getPointPositionForValue:function(m,w){return this.getPointPosition(m,this.getDistanceFromCenterForValue(w))},getBasePosition:function(m){var w=this.min,T=this.max;return this.getPointPositionForValue(m||0,this.beginAtZero?0:w<0&&T<0?T:w>0&&T>0?w:0)},_drawGrid:function(){var m,w,T,I=this,N=I.ctx,j=I.options,q=j.gridLines,$=j.angleLines,te=Ul($.lineWidth,q.lineWidth),ae=Ul($.color,q.color);if(j.pointLabels.display&&function(ge){var be=ge.ctx,Ce=ge.options,De=Ce.pointLabels,Ne=In(Ce),Xe=ge.getDistanceFromCenterForValue(Ce.ticks.reverse?ge.min:ge.max),ft=pe.options._parseFont(De);be.save(),be.font=ft.string,be.textBaseline="middle";for(var an=ge.chart.data.labels.length-1;an>=0;an--){var Xt=ge.getPointPosition(an,Xe+(0===an?Ne/2:0)+5),vn=Ji(De.fontColor,an,xt.global.defaultFontColor);be.fillStyle=vn;var On=ge.getIndexAngle(an),er=pe.toDegrees(On);be.textAlign=yf(er),_i(er,ge._pointLabelSizes[an],Xt),bf(be,ge.pointLabels[an],Xt,ft.lineHeight)}be.restore()}(I),q.display&&pe.each(I.ticks,function(ge,be){0!==be&&(w=I.getDistanceFromCenterForValue(I.ticksAsNumbers[be]),function(Ce,De,Ne,Xe){var ft,an=Ce.ctx,jt=De.circular,Xt=Ce.chart.data.labels.length,vn=Ji(De.color,Xe-1),On=Ji(De.lineWidth,Xe-1);if((jt||Xt)&&vn&&On){if(an.save(),an.strokeStyle=vn,an.lineWidth=On,an.setLineDash&&(an.setLineDash(De.borderDash||[]),an.lineDashOffset=De.borderDashOffset||0),an.beginPath(),jt)an.arc(Ce.xCenter,Ce.yCenter,Ne,0,2*Math.PI);else{ft=Ce.getPointPosition(0,Ne),an.moveTo(ft.x,ft.y);for(var er=1;er<Xt;er++)ft=Ce.getPointPosition(er,Ne),an.lineTo(ft.x,ft.y)}an.closePath(),an.stroke(),an.restore()}}(I,q,w,be))}),$.display&&te&&ae){for(N.save(),N.lineWidth=te,N.strokeStyle=ae,N.setLineDash&&(N.setLineDash(Mr([$.borderDash,q.borderDash,[]])),N.lineDashOffset=Mr([$.borderDashOffset,q.borderDashOffset,0])),m=I.chart.data.labels.length-1;m>=0;m--)w=I.getDistanceFromCenterForValue(j.ticks.reverse?I.min:I.max),T=I.getPointPosition(m,w),N.beginPath(),N.moveTo(I.xCenter,I.yCenter),N.lineTo(T.x,T.y),N.stroke();N.restore()}},_drawLabels:function(){var m=this,w=m.ctx,T=m.options.ticks;if(T.display){var I,N,j=m.getIndexAngle(0),q=pe.options._parseFont(T),$=Ul(T.fontColor,xt.global.defaultFontColor);w.save(),w.font=q.string,w.translate(m.xCenter,m.yCenter),w.rotate(j),w.textAlign="center",w.textBaseline="middle",pe.each(m.ticks,function(te,ae){(0!==ae||T.reverse)&&(I=m.getDistanceFromCenterForValue(m.ticksAsNumbers[ae]),T.showLabelBackdrop&&(N=w.measureText(te).width,w.fillStyle=T.backdropColor,w.fillRect(-N/2-T.backdropPaddingX,-I-q.size/2-T.backdropPaddingY,N+2*T.backdropPaddingX,q.size+2*T.backdropPaddingY)),w.fillStyle=$,w.fillText(te,0,-I))}),w.restore()}},_drawTitle:pe.noop});mu._defaults=nh;var ns=pe._deprecated,zu=pe.options.resolve,qm=pe.valueOrDefault,pu=Number.MIN_SAFE_INTEGER||-9007199254740991,ql=Number.MAX_SAFE_INTEGER||9007199254740991,fc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ms=Object.keys(fc);function Gd(m,w){return m-w}function Xl(m){return pe.valueOrDefault(m.time.min,m.ticks.min)}function Xm(m){return pe.valueOrDefault(m.time.max,m.ticks.max)}function wi(m,w,T,I){var N=function(ge,be,Ce){for(var De,Ne,Xe,ft=0,an=ge.length-1;ft>=0&&ft<=an;){if(Ne=ge[(De=ft+an>>1)-1]||null,Xe=ge[De],!Ne)return{lo:null,hi:Xe};if(Xe[be]<Ce)ft=De+1;else{if(!(Ne[be]>Ce))return{lo:Ne,hi:Xe};an=De-1}}return{lo:Xe,hi:null}}(m,w,T),j=N.lo?N.hi?N.lo:m[m.length-2]:m[0],q=N.lo?N.hi?N.hi:m[m.length-1]:m[1],$=q[w]-j[w];return j[I]+(q[I]-j[I])*($?(T-j[w])/$:0)}function Fu(m,w){var T=m._adapter,I=m.options.time,N=I.parser,j=N||I.format,q=w;return"function"==typeof N&&(q=N(q)),pe.isFinite(q)||(q="string"==typeof j?T.parse(q,j):T.parse(q)),null!==q?+q:(N||"function"!=typeof j||(q=j(w),pe.isFinite(q)||(q=T.parse(q))),q)}function qi(m,w){if(pe.isNullOrUndef(w))return null;var T=m.options.time,I=Fu(m,m.getRightValue(w));return null===I||T.round&&(I=+m._adapter.startOf(I,T.round)),I}function ps(m,w,T,I){var N,j,q,$=ms.length;for(N=ms.indexOf(m);N<$-1;++N)if(q=(j=fc[ms[N]]).steps?j.steps:ql,j.common&&Math.ceil((T-w)/(q*j.size))<=I)return ms[N];return ms[$-1]}function Nc(m,w,T){var I,N,j=[],q={},$=w.length;for(I=0;I<$;++I)q[N=w[I]]=I,j.push({value:N,major:!1});return 0!==$&&T?function(te,ae,ge,be){var Ce,De,Ne=te._adapter,Xe=+Ne.startOf(ae[0].value,be),ft=ae[ae.length-1].value;for(Ce=Xe;Ce<=ft;Ce=+Ne.add(Ce,1,be))(De=ge[Ce])>=0&&(ae[De].major=!0);return ae}(m,j,q,T):j}var Et=Bu.extend({initialize:function(){this.mergeTicksOptions(),Bu.prototype.initialize.call(this)},update:function(){var m=this,w=m.options,T=w.time||(w.time={}),I=m._adapter=new Nu._date(w.adapters.date);return ns("time scale",T.format,"time.format","time.parser"),ns("time scale",T.min,"time.min","ticks.min"),ns("time scale",T.max,"time.max","ticks.max"),pe.mergeIf(T.displayFormats,I.formats()),Bu.prototype.update.apply(m,arguments)},getRightValue:function(m){return m&&void 0!==m.t&&(m=m.t),Bu.prototype.getRightValue.call(this,m)},determineDataLimits:function(){var m,w,T,I,N,j,q,$=this,te=$.chart,ae=$._adapter,ge=$.options,be=ge.time.unit||"day",Ce=ql,De=pu,Ne=[],Xe=[],ft=[],an=$._getLabels();for(m=0,T=an.length;m<T;++m)ft.push(qi($,an[m]));for(m=0,T=(te.data.datasets||[]).length;m<T;++m)if(te.isDatasetVisible(m))if(pe.isObject((N=te.data.datasets[m].data)[0]))for(Xe[m]=[],w=0,I=N.length;w<I;++w)j=qi($,N[w]),Ne.push(j),Xe[m][w]=j;else Xe[m]=ft.slice(0),q||(Ne=Ne.concat(ft),q=!0);else Xe[m]=[];ft.length&&(Ce=Math.min(Ce,ft[0]),De=Math.max(De,ft[ft.length-1])),Ne.length&&(Ne=T>1?function(jt){var Xt,vn,On,er={},$r=[];for(Xt=0,vn=jt.length;Xt<vn;++Xt)er[On=jt[Xt]]||(er[On]=!0,$r.push(On));return $r}(Ne).sort(Gd):Ne.sort(Gd),Ce=Math.min(Ce,Ne[0]),De=Math.max(De,Ne[Ne.length-1])),Ce=qi($,Xl(ge))||Ce,De=qi($,Xm(ge))||De,Ce=Ce===ql?+ae.startOf(Date.now(),be):Ce,De=De===pu?+ae.endOf(Date.now(),be)+1:De,$.min=Math.min(Ce,De),$.max=Math.max(Ce+1,De),$._table=[],$._timestamps={data:Ne,datasets:Xe,labels:ft}},buildTicks:function(){var m,w,T,Ne,Xe,Xt,vn,On,er,I=this,N=I.min,j=I.max,q=I.options,$=q.ticks,te=q.time,ae=I._timestamps,ge=[],be=I.getLabelCapacity(N),Ce=$.source,De=q.distribution;for(ae="data"===Ce||"auto"===Ce&&"series"===De?ae.data:"labels"===Ce?ae.labels:function(Ne,Xe,ft,an){var jt,Xt=Ne._adapter,vn=Ne.options,On=vn.time,er=On.unit||ps(On.minUnit,Xe,ft,an),$r=zu([On.stepSize,On.unitStepSize,1]),Hr="week"===er&&On.isoWeekday,br=Xe,Xo=[];if(Hr&&(br=+Xt.startOf(br,"isoWeek",Hr)),br=+Xt.startOf(br,Hr?"day":er),Xt.diff(ft,Xe,er)>1e5*$r)throw Xe+" and "+ft+" are too far apart with stepSize of "+$r+" "+er;for(jt=br;jt<ft;jt=+Xt.add(jt,$r,er))Xo.push(jt);return jt!==ft&&"ticks"!==vn.bounds||Xo.push(jt),Xo}(I,N,j,be),"ticks"===q.bounds&&ae.length&&(N=ae[0],j=ae[ae.length-1]),N=qi(I,Xl(q))||N,j=qi(I,Xm(q))||j,m=0,w=ae.length;m<w;++m)(T=ae[m])>=N&&T<=j&&ge.push(T);return I.min=N,I.max=j,I._unit=te.unit||($.autoSkip?ps(te.minUnit,I.min,I.max,be):function(Ne,Xe,ft,an,jt){var Xt,vn;for(Xt=ms.length-1;Xt>=ms.indexOf(ft);Xt--)if(fc[vn=ms[Xt]].common&&Ne._adapter.diff(jt,an,vn)>=Xe-1)return vn;return ms[ft?ms.indexOf(ft):0]}(I,ge.length,te.minUnit,I.min,I.max)),I._majorUnit=$.major.enabled&&"year"!==I._unit?function(Ne){for(var Xe=ms.indexOf(Ne)+1,ft=ms.length;Xe<ft;++Xe)if(fc[ms[Xe]].common)return ms[Xe]}(I._unit):void 0,I._table=function(Ne,Xe,ft,an){if("linear"===an||!Ne.length)return[{time:Xe,pos:0},{time:ft,pos:1}];var jt,Xt,vn,On,er,$r=[],Hr=[Xe];for(jt=0,Xt=Ne.length;jt<Xt;++jt)(On=Ne[jt])>Xe&&On<ft&&Hr.push(On);for(Hr.push(ft),jt=0,Xt=Hr.length;jt<Xt;++jt)er=Hr[jt+1],On=Hr[jt],void 0!==(vn=Hr[jt-1])&&void 0!==er&&Math.round((er+vn)/2)===On||$r.push({time:On,pos:jt/(Xt-1)});return $r}(I._timestamps.data,N,j,De),I._offsets=(Ne=I._table,Xe=ge,On=0,er=0,q.offset&&Xe.length&&(Xt=wi(Ne,"time",Xe[0],"pos"),On=1===Xe.length?1-Xt:(wi(Ne,"time",Xe[1],"pos")-Xt)/2,vn=wi(Ne,"time",Xe[Xe.length-1],"pos"),er=1===Xe.length?vn:(vn-wi(Ne,"time",Xe[Xe.length-2],"pos"))/2),{start:On,end:er,factor:1/(On+1+er)}),$.reverse&&ge.reverse(),Nc(I,ge,I._majorUnit)},getLabelForIndex:function(m,w){var T=this,I=T._adapter,N=T.chart.data,j=T.options.time,q=N.labels&&m<N.labels.length?N.labels[m]:"",$=N.datasets[w].data[m];return pe.isObject($)&&(q=T.getRightValue($)),j.tooltipFormat?I.format(Fu(T,q),j.tooltipFormat):"string"==typeof q?q:I.format(Fu(T,q),j.displayFormats.datetime)},tickFormatFunction:function(m,w,T,I){var j=this.options,q=j.time.displayFormats,te=this._majorUnit,ae=q[te],ge=T[w],be=j.ticks,Ce=te&&ae&&ge&&ge.major,De=this._adapter.format(m,I||(Ce?ae:q[this._unit])),Ne=Ce?be.major:be.minor,Xe=zu([Ne.callback,Ne.userCallback,be.callback,be.userCallback]);return Xe?Xe(De,w,T):De},convertTicksToLabels:function(m){var w,T,I=[];for(w=0,T=m.length;w<T;++w)I.push(this.tickFormatFunction(m[w].value,w,m));return I},getPixelForOffset:function(m){var w=this._offsets,T=wi(this._table,"time",m,"pos");return this.getPixelForDecimal((w.start+T)*w.factor)},getPixelForValue:function(m,w,T){var I=null;if(void 0!==w&&void 0!==T&&(I=this._timestamps.datasets[T][w]),null===I&&(I=qi(this,m)),null!==I)return this.getPixelForOffset(I)},getPixelForTick:function(m){var w=this.getTicks();return m>=0&&m<w.length?this.getPixelForOffset(w[m].value):null},getValueForPixel:function(m){var w=this._offsets,T=this.getDecimalForPixel(m)/w.factor-w.end,I=wi(this._table,"pos",T,"time");return this._adapter._create(I)},_getLabelSize:function(m){var w=this.options.ticks,T=this.ctx.measureText(m).width,I=pe.toRadians(this.isHorizontal()?w.maxRotation:w.minRotation),N=Math.cos(I),j=Math.sin(I),q=qm(w.fontSize,xt.global.defaultFontSize);return{w:T*N+q*j,h:T*j+q*N}},getLabelWidth:function(m){return this._getLabelSize(m).w},getLabelCapacity:function(m){var w=this,T=w.options.time,I=T.displayFormats,N=I[T.unit]||I.millisecond,j=w.tickFormatFunction(m,0,Nc(w,[m],w._majorUnit),N),q=w._getLabelSize(j),$=Math.floor(w.isHorizontal()?w.width/q.w:w.height/q.h);return w.options.offset&&$--,$>0?$:1}});Et._defaults={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};var kr={category:oi,linear:pn,logarithmic:ad,radialLinear:mu,time:Et},qa={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Nu._date.override("function"==typeof Un?{_id:"moment",formats:function(){return qa},parse:function(m,w){return"string"==typeof m&&"string"==typeof w?m=Un(m,w):m instanceof Un||(m=Un(m)),m.isValid()?m.valueOf():null},format:function(m,w){return Un(m).format(w)},add:function(m,w,T){return Un(m).add(w,T).valueOf()},diff:function(m,w,T){return Un(m).diff(Un(w),T)},startOf:function(m,w,T){return m=Un(m),"isoWeek"===w?m.isoWeekday(T).valueOf():m.startOf(w).valueOf()},endOf:function(m,w){return Un(m).endOf(w).valueOf()},_create:function(m){return Un(m)}}:{}),xt._set("global",{plugins:{filler:{propagate:!0}}});var Qi={dataset:function(m){var w=m.fill,T=m.chart,I=T.getDatasetMeta(w),N=I&&T.isDatasetVisible(w)&&I.dataset._children||[],j=N.length||0;return j?function(q,$){return $<j&&N[$]._view||null}:null},boundary:function(m){var w=m.boundary,T=w?w.x:null,I=w?w.y:null;return pe.isArray(w)?function(N,j){return w[j]}:function(N){return{x:null===T?N.x:T,y:null===I?N.y:I}}}};function il(m,w,T){var I,N=m._model||{},j=N.fill;if(void 0===j&&(j=!!N.backgroundColor),!1===j||null===j)return!1;if(!0===j)return"origin";if(I=parseFloat(j,10),isFinite(I)&&Math.floor(I)===I)return"-"!==j[0]&&"+"!==j[0]||(I=w+I),!(I===w||I<0||I>=T)&&I;switch(j){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return j;default:return!1}}function sd(m){return(m.el._scale||{}).getPointPositionForValue?function(w){var T,I,N,j,q,$=w.el._scale,te=$.options,ae=$.chart.data.labels.length,ge=w.fill,be=[];if(!ae)return null;for(I=te.ticks.reverse?$.min:$.max,N=$.getPointPositionForValue(0,T=te.ticks.reverse?$.max:$.min),j=0;j<ae;++j)q="start"===ge||"end"===ge?$.getPointPositionForValue(j,"start"===ge?T:I):$.getBasePosition(j),te.gridLines.circular&&(q.cx=N.x,q.cy=N.y,q.angle=$.getIndexAngle(j)-Math.PI/2),be.push(q);return be}(m):function(w){var T,I=w.el._model||{},N=w.el._scale||{},j=w.fill,q=null;if(isFinite(j))return null;if("start"===j?q=void 0===I.scaleBottom?N.bottom:I.scaleBottom:"end"===j?q=void 0===I.scaleTop?N.top:I.scaleTop:void 0!==I.scaleZero?q=I.scaleZero:N.getBasePixel&&(q=N.getBasePixel()),null!=q){if(void 0!==q.x&&void 0!==q.y)return q;if(pe.isFinite(q))return{x:(T=N.isHorizontal())?q:null,y:T?null:q}}return null}(m)}function Na(m,w,T){var I,N=m[w].fill,j=[w];if(!T)return N;for(;!1!==N&&-1===j.indexOf(N);){if(!isFinite(N))return N;if(!(I=m[N]))return!1;if(I.visible)return N;j.push(N),N=I.fill}return!1}function bo(m){var w=m.fill,T="dataset";return!1===w?null:(isFinite(w)||(T="boundary"),Qi[T](m))}function hc(m){return m&&!m.skip}function Wg(m,w,T,I,N){var j,q,$,te;if(I&&N){for(m.moveTo(w[0].x,w[0].y),j=1;j<I;++j)pe.canvas.lineTo(m,w[j-1],w[j]);if(void 0===T[0].angle)for(m.lineTo(T[N-1].x,T[N-1].y),j=N-1;j>0;--j)pe.canvas.lineTo(m,T[j],T[j-1],!0);else for(q=T[0].cx,$=T[0].cy,te=Math.sqrt(Math.pow(T[0].x-q,2)+Math.pow(T[0].y-$,2)),j=N-1;j>0;--j)m.arc(q,$,te,T[j].angle,T[j-1].angle,!0)}}function Si(m,w,T,I,N,j){var q,$,te,ae,ge,be,Ce,De,Ne=w.length,Xe=I.spanGaps,ft=[],an=[],jt=0,Xt=0;for(m.beginPath(),q=0,$=Ne;q<$;++q)ge=T(ae=w[te=q%Ne]._view,te,I),be=hc(ae),Ce=hc(ge),j&&void 0===De&&be&&($=Ne+(De=q+1)),be&&Ce?(jt=ft.push(ae),Xt=an.push(ge)):jt&&Xt&&(Xe?(be&&ft.push(ae),Ce&&an.push(ge)):(Wg(m,ft,an,jt,Xt),jt=Xt=0,ft=[],an=[]));Wg(m,ft,an,jt,Xt),m.closePath(),m.fillStyle=N,m.fill()}var jd={id:"filler",afterDatasetsUpdate:function(m,w){var T,I,N,j,q=(m.data.datasets||[]).length,$=w.propagate,te=[];for(I=0;I<q;++I)j=null,(N=(T=m.getDatasetMeta(I)).dataset)&&N._model&&N instanceof wn.Line&&(j={visible:m.isDatasetVisible(I),fill:il(N,I,q),chart:m,el:N}),T.$filler=j,te.push(j);for(I=0;I<q;++I)(j=te[I])&&(j.fill=Na(te,I,$),j.boundary=sd(j),j.mapper=bo(j))},beforeDatasetsDraw:function(m){var w,T,I,N,j,q,$,te=m._getSortedVisibleDatasetMetas(),ae=m.ctx;for(T=te.length-1;T>=0;--T)(w=te[T].$filler)&&w.visible&&(N=(I=w.el)._view,j=I._children||[],$=N.backgroundColor||xt.global.defaultColor,(q=w.mapper)&&$&&j.length&&(pe.canvas.clipArea(ae,m.chartArea),Si(ae,j,q,N,$,I._loop),pe.canvas.unclipArea(ae)))}},Uh=pe.rtl.getRtlAdapter,ka=pe.noop,qe=pe.valueOrDefault;function Di(m,w){return m.usePointStyle&&m.boxWidth>w?w:m.boxWidth}xt._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(m,w){var T=w.datasetIndex,I=this.chart,N=I.getDatasetMeta(T);N.hidden=null===N.hidden?!I.data.datasets[T].hidden:null,I.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(m){var w=m.data.datasets,T=m.options.legend||{},I=T.labels&&T.labels.usePointStyle;return m._getSortedDatasetMetas().map(function(N){var j=N.controller.getStyle(I?0:void 0);return{text:w[N.index].label,fillStyle:j.backgroundColor,hidden:!m.isDatasetVisible(N.index),lineCap:j.borderCapStyle,lineDash:j.borderDash,lineDashOffset:j.borderDashOffset,lineJoin:j.borderJoinStyle,lineWidth:j.borderWidth,strokeStyle:j.borderColor,pointStyle:j.pointStyle,rotation:j.rotation,datasetIndex:N.index}},this)}}},legendCallback:function(m){var w,T,I,N=document.createElement("ul"),j=m.data.datasets;for(N.setAttribute("class",m.id+"-legend"),w=0,T=j.length;w<T;w++)(I=N.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=j[w].backgroundColor,j[w].label&&I.appendChild(document.createTextNode(j[w].label));return N.outerHTML}});var qh=zi.extend({initialize:function(m){pe.extend(this,m),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:ka,update:function(m,w,T){var I=this;return I.beforeUpdate(),I.maxWidth=m,I.maxHeight=w,I.margins=T,I.beforeSetDimensions(),I.setDimensions(),I.afterSetDimensions(),I.beforeBuildLabels(),I.buildLabels(),I.afterBuildLabels(),I.beforeFit(),I.fit(),I.afterFit(),I.afterUpdate(),I.minSize},afterUpdate:ka,beforeSetDimensions:ka,setDimensions:function(){var m=this;m.isHorizontal()?(m.width=m.maxWidth,m.left=0,m.right=m.width):(m.height=m.maxHeight,m.top=0,m.bottom=m.height),m.paddingLeft=0,m.paddingTop=0,m.paddingRight=0,m.paddingBottom=0,m.minSize={width:0,height:0}},afterSetDimensions:ka,beforeBuildLabels:ka,buildLabels:function(){var m=this,w=m.options.labels||{},T=pe.callback(w.generateLabels,[m.chart],m)||[];w.filter&&(T=T.filter(function(I){return w.filter(I,m.chart.data)})),m.options.reverse&&T.reverse(),m.legendItems=T},afterBuildLabels:ka,beforeFit:ka,fit:function(){var m=this,w=m.options,T=w.labels,I=w.display,N=m.ctx,j=pe.options._parseFont(T),q=j.size,$=m.legendHitBoxes=[],te=m.minSize,ae=m.isHorizontal();if(ae?(te.width=m.maxWidth,te.height=I?10:0):(te.width=I?10:0,te.height=m.maxHeight),I){if(N.font=j.string,ae){var ge=m.lineWidths=[0],be=0;N.textAlign="left",N.textBaseline="middle",pe.each(m.legendItems,function(jt,Xt){var vn=Di(T,q)+q/2+N.measureText(jt.text).width;(0===Xt||ge[ge.length-1]+vn+2*T.padding>te.width)&&(be+=q+T.padding,ge[ge.length-(Xt>0?0:1)]=0),$[Xt]={left:0,top:0,width:vn,height:q},ge[ge.length-1]+=vn+T.padding}),te.height+=be}else{var Ce=T.padding,De=m.columnWidths=[],Ne=m.columnHeights=[],Xe=T.padding,ft=0,an=0;pe.each(m.legendItems,function(jt,Xt){var vn=Di(T,q)+q/2+N.measureText(jt.text).width;Xt>0&&an+q+2*Ce>te.height&&(Xe+=ft+T.padding,De.push(ft),Ne.push(an),ft=0,an=0),ft=Math.max(ft,vn),an+=q+Ce,$[Xt]={left:0,top:0,width:vn,height:q}}),Xe+=ft,De.push(ft),Ne.push(an),te.width+=Xe}m.width=te.width,m.height=te.height}else m.width=te.width=m.height=te.height=0},afterFit:ka,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var m=this,w=m.options,T=w.labels,I=xt.global,N=I.defaultColor,j=I.elements.line,q=m.height,$=m.columnHeights,te=m.width,ae=m.lineWidths;if(w.display){var ge,be=Uh(w.rtl,m.left,m.minSize.width),Ce=m.ctx,De=qe(T.fontColor,I.defaultFontColor),Ne=pe.options._parseFont(T),Xe=Ne.size;Ce.textAlign=be.textAlign("left"),Ce.textBaseline="middle",Ce.lineWidth=.5,Ce.strokeStyle=De,Ce.fillStyle=De,Ce.font=Ne.string;var ft=Di(T,Xe),an=m.legendHitBoxes,jt=function(On,er){switch(w.align){case"start":return T.padding;case"end":return On-er;default:return(On-er+T.padding)/2}},Xt=m.isHorizontal();ge=Xt?{x:m.left+jt(te,ae[0]),y:m.top+T.padding,line:0}:{x:m.left+T.padding,y:m.top+jt(q,$[0]),line:0},pe.rtl.overrideTextDirection(m.ctx,w.textDirection);var vn=Xe+T.padding;pe.each(m.legendItems,function(On,er){var $r=Ce.measureText(On.text).width,Hr=ft+Xe/2+$r,br=ge.x,Xo=ge.y;be.setWidth(m.minSize.width),Xt?er>0&&br+Hr+T.padding>m.left+m.minSize.width&&(Xo=ge.y+=vn,ge.line++,br=ge.x=m.left+jt(te,ae[ge.line])):er>0&&Xo+vn>m.top+m.minSize.height&&(br=ge.x=br+m.columnWidths[ge.line]+T.padding,ge.line++,Xo=ge.y=m.top+jt(q,$[ge.line]));var gr,gn,To,Ho,Io,rs,xo=be.x(br);(function(Wr,gr,gn){if(!(isNaN(ft)||ft<=0)){Ce.save();var To=qe(gn.lineWidth,j.borderWidth);if(Ce.fillStyle=qe(gn.fillStyle,N),Ce.lineCap=qe(gn.lineCap,j.borderCapStyle),Ce.lineDashOffset=qe(gn.lineDashOffset,j.borderDashOffset),Ce.lineJoin=qe(gn.lineJoin,j.borderJoinStyle),Ce.lineWidth=To,Ce.strokeStyle=qe(gn.strokeStyle,N),Ce.setLineDash&&Ce.setLineDash(qe(gn.lineDash,j.borderDash)),T&&T.usePointStyle){var Ho=ft*Math.SQRT2/2,Io=be.xPlus(Wr,ft/2);pe.canvas.drawPoint(Ce,gn.pointStyle,Ho,Io,gr+Xe/2,gn.rotation)}else Ce.fillRect(be.leftForLtr(Wr,ft),gr,ft,Xe),0!==To&&Ce.strokeRect(be.leftForLtr(Wr,ft),gr,ft,Xe);Ce.restore()}})(xo,Xo,On),an[er].left=be.leftForLtr(xo,an[er].width),an[er].top=Xo,gr=Xo,gn=On,To=$r,Io=be.xPlus(xo,ft+(Ho=Xe/2)),Ce.fillText(gn.text,Io,rs=gr+Ho),gn.hidden&&(Ce.beginPath(),Ce.lineWidth=2,Ce.moveTo(Io,rs),Ce.lineTo(be.xPlus(Io,To),rs),Ce.stroke()),Xt?ge.x+=Hr+T.padding:ge.y+=vn}),pe.rtl.restoreTextDirection(m.ctx,w.textDirection)}},_getLegendItemAt:function(m,w){var T,I,N,j=this;if(m>=j.left&&m<=j.right&&w>=j.top&&w<=j.bottom)for(N=j.legendHitBoxes,T=0;T<N.length;++T)if(m>=(I=N[T]).left&&m<=I.left+I.width&&w>=I.top&&w<=I.top+I.height)return j.legendItems[T];return null},handleEvent:function(m){var w,T=this,I=T.options,N="mouseup"===m.type?"click":m.type;if("mousemove"===N){if(!I.onHover&&!I.onLeave)return}else if("click"!==N||!I.onClick)return;w=T._getLegendItemAt(m.x,m.y),"click"===N?w&&I.onClick&&I.onClick.call(T,m.native,w):(I.onLeave&&w!==T._hoveredItem&&(T._hoveredItem&&I.onLeave.call(T,m.native,T._hoveredItem),T._hoveredItem=w),I.onHover&&w&&I.onHover.call(T,m.native,w))}});function ea(m,w){var T=new qh({ctx:m.ctx,options:w,chart:m});ji.configure(m,T,w),ji.addBox(m,T),m.legend=T}var kl={id:"legend",_element:qh,beforeInit:function(m){var w=m.options.legend;w&&ea(m,w)},beforeUpdate:function(m){var w=m.options.legend,T=m.legend;w?(pe.mergeIf(w,xt.global.legend),T?(ji.configure(m,T,w),T.options=w):ea(m,w)):T&&(ji.removeBox(m,T),delete m.legend)},afterEvent:function(m,w){var T=m.legend;T&&T.handleEvent(w)}},ii=pe.noop;xt._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var ki=zi.extend({initialize:function(m){pe.extend(this,m),this.legendHitBoxes=[]},beforeUpdate:ii,update:function(m,w,T){var I=this;return I.beforeUpdate(),I.maxWidth=m,I.maxHeight=w,I.margins=T,I.beforeSetDimensions(),I.setDimensions(),I.afterSetDimensions(),I.beforeBuildLabels(),I.buildLabels(),I.afterBuildLabels(),I.beforeFit(),I.fit(),I.afterFit(),I.afterUpdate(),I.minSize},afterUpdate:ii,beforeSetDimensions:ii,setDimensions:function(){var m=this;m.isHorizontal()?(m.width=m.maxWidth,m.left=0,m.right=m.width):(m.height=m.maxHeight,m.top=0,m.bottom=m.height),m.paddingLeft=0,m.paddingTop=0,m.paddingRight=0,m.paddingBottom=0,m.minSize={width:0,height:0}},afterSetDimensions:ii,beforeBuildLabels:ii,buildLabels:ii,afterBuildLabels:ii,beforeFit:ii,fit:function(){var m,w=this,T=w.options,I=w.minSize={},N=w.isHorizontal();T.display?(m=(pe.isArray(T.text)?T.text.length:1)*pe.options._parseFont(T).lineHeight+2*T.padding,w.width=I.width=N?w.maxWidth:m,w.height=I.height=N?m:w.maxHeight):w.width=I.width=w.height=I.height=0},afterFit:ii,isHorizontal:function(){var m=this.options.position;return"top"===m||"bottom"===m},draw:function(){var m=this,w=m.ctx,T=m.options;if(T.display){var I,N,j,q=pe.options._parseFont(T),$=q.lineHeight,te=$/2+T.padding,ae=0,ge=m.top,be=m.left,Ce=m.bottom,De=m.right;w.fillStyle=pe.valueOrDefault(T.fontColor,xt.global.defaultFontColor),w.font=q.string,m.isHorizontal()?(N=be+(De-be)/2,j=ge+te,I=De-be):(N="left"===T.position?be+te:De-te,j=ge+(Ce-ge)/2,I=Ce-ge,ae=Math.PI*("left"===T.position?-.5:.5)),w.save(),w.translate(N,j),w.rotate(ae),w.textAlign="center",w.textBaseline="middle";var Ne=T.text;if(pe.isArray(Ne))for(var Xe=0,ft=0;ft<Ne.length;++ft)w.fillText(Ne[ft],0,Xe,I),Xe+=$;else w.fillText(Ne,0,0,I);w.restore()}}});function gc(m,w){var T=new ki({ctx:m.ctx,options:w,chart:m});ji.configure(m,T,w),ji.addBox(m,T),m.titleBlock=T}var al={},$n=jd,ua=kl,ud={id:"title",_element:ki,beforeInit:function(m){var w=m.options.title;w&&gc(m,w)},beforeUpdate:function(m){var w=m.options.title,T=m.titleBlock;w?(pe.mergeIf(w,xt.global.title),T?(ji.configure(m,T,w),T.options=w):gc(m,w)):T&&(ji.removeBox(m,T),delete m.titleBlock)}};for(var Yl in al.filler=$n,al.legend=ua,al.title=ud,Po.helpers=pe,function(){function m(I,N,j){var q;return"string"==typeof I?(q=parseInt(I,10),-1!==I.indexOf("%")&&(q=q/100*N.parentNode[j])):q=I,q}function w(I){return null!=I&&"none"!==I}function T(I,N,j){var q=document.defaultView,$=pe._getParentNode(I),te=q.getComputedStyle(I)[N],ae=q.getComputedStyle($)[N],ge=w(te),be=w(ae),Ce=Number.POSITIVE_INFINITY;return ge||be?Math.min(ge?m(te,I,j):Ce,be?m(ae,$,j):Ce):"none"}pe.where=function(I,N){if(pe.isArray(I)&&Array.prototype.filter)return I.filter(N);var j=[];return pe.each(I,function(q){N(q)&&j.push(q)}),j},pe.findIndex=Array.prototype.findIndex?function(I,N,j){return I.findIndex(N,j)}:function(I,N,j){j=void 0===j?I:j;for(var q=0,$=I.length;q<$;++q)if(N.call(j,I[q],q,I))return q;return-1},pe.findNextWhere=function(I,N,j){pe.isNullOrUndef(j)&&(j=-1);for(var q=j+1;q<I.length;q++){var $=I[q];if(N($))return $}},pe.findPreviousWhere=function(I,N,j){pe.isNullOrUndef(j)&&(j=I.length);for(var q=j-1;q>=0;q--){var $=I[q];if(N($))return $}},pe.isNumber=function(I){return!isNaN(parseFloat(I))&&isFinite(I)},pe.almostEquals=function(I,N,j){return Math.abs(I-N)<j},pe.almostWhole=function(I,N){var j=Math.round(I);return j-N<=I&&j+N>=I},pe.max=function(I){return I.reduce(function(N,j){return isNaN(j)?N:Math.max(N,j)},Number.NEGATIVE_INFINITY)},pe.min=function(I){return I.reduce(function(N,j){return isNaN(j)?N:Math.min(N,j)},Number.POSITIVE_INFINITY)},pe.sign=Math.sign?function(I){return Math.sign(I)}:function(I){return 0==(I=+I)||isNaN(I)?I:I>0?1:-1},pe.toRadians=function(I){return I*(Math.PI/180)},pe.toDegrees=function(I){return I*(180/Math.PI)},pe._decimalPlaces=function(I){if(pe.isFinite(I)){for(var N=1,j=0;Math.round(I*N)/N!==I;)N*=10,j++;return j}},pe.getAngleFromPoint=function(I,N){var j=N.x-I.x,q=N.y-I.y,$=Math.sqrt(j*j+q*q),te=Math.atan2(q,j);return te<-.5*Math.PI&&(te+=2*Math.PI),{angle:te,distance:$}},pe.distanceBetweenPoints=function(I,N){return Math.sqrt(Math.pow(N.x-I.x,2)+Math.pow(N.y-I.y,2))},pe.aliasPixel=function(I){return I%2==0?0:.5},pe._alignPixel=function(I,N,j){var q=I.currentDevicePixelRatio,$=j/2;return Math.round((N-$)*q)/q+$},pe.splineCurve=function(I,N,j,q){var $=I.skip?N:I,te=N,ae=j.skip?N:j,ge=Math.sqrt(Math.pow(te.x-$.x,2)+Math.pow(te.y-$.y,2)),be=Math.sqrt(Math.pow(ae.x-te.x,2)+Math.pow(ae.y-te.y,2)),Ce=ge/(ge+be),De=be/(ge+be),Ne=q*(Ce=isNaN(Ce)?0:Ce),Xe=q*(De=isNaN(De)?0:De);return{previous:{x:te.x-Ne*(ae.x-$.x),y:te.y-Ne*(ae.y-$.y)},next:{x:te.x+Xe*(ae.x-$.x),y:te.y+Xe*(ae.y-$.y)}}},pe.EPSILON=Number.EPSILON||1e-14,pe.splineCurveMonotone=function(I){var N,j,q,$,te,ae,ge,be,Ce,De=(I||[]).map(function(ft){return{model:ft._model,deltaK:0,mK:0}}),Ne=De.length;for(N=0;N<Ne;++N)if(!(q=De[N]).model.skip){if(j=N>0?De[N-1]:null,($=N<Ne-1?De[N+1]:null)&&!$.model.skip){var Xe=$.model.x-q.model.x;q.deltaK=0!==Xe?($.model.y-q.model.y)/Xe:0}q.mK=!j||j.model.skip?q.deltaK:!$||$.model.skip?j.deltaK:this.sign(j.deltaK)!==this.sign(q.deltaK)?0:(j.deltaK+q.deltaK)/2}for(N=0;N<Ne-1;++N)$=De[N+1],(q=De[N]).model.skip||$.model.skip||(pe.almostEquals(q.deltaK,0,this.EPSILON)?q.mK=$.mK=0:(te=q.mK/q.deltaK,ae=$.mK/q.deltaK,(be=Math.pow(te,2)+Math.pow(ae,2))<=9||(ge=3/Math.sqrt(be),q.mK=te*ge*q.deltaK,$.mK=ae*ge*q.deltaK)));for(N=0;N<Ne;++N)(q=De[N]).model.skip||($=N<Ne-1?De[N+1]:null,(j=N>0?De[N-1]:null)&&!j.model.skip&&(q.model.controlPointPreviousX=q.model.x-(Ce=(q.model.x-j.model.x)/3),q.model.controlPointPreviousY=q.model.y-Ce*q.mK),$&&!$.model.skip&&(q.model.controlPointNextX=q.model.x+(Ce=($.model.x-q.model.x)/3),q.model.controlPointNextY=q.model.y+Ce*q.mK))},pe.nextItem=function(I,N,j){return j?N>=I.length-1?I[0]:I[N+1]:N>=I.length-1?I[I.length-1]:I[N+1]},pe.previousItem=function(I,N,j){return j?N<=0?I[I.length-1]:I[N-1]:N<=0?I[0]:I[N-1]},pe.niceNum=function(I,N){var j=Math.floor(pe.log10(I)),q=I/Math.pow(10,j);return(N?q<1.5?1:q<3?2:q<7?5:10:q<=1?1:q<=2?2:q<=5?5:10)*Math.pow(10,j)},pe.requestAnimFrame="undefined"==typeof window?function(I){I()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(I){return window.setTimeout(I,1e3/60)},pe.getRelativePosition=function(I,N){var j,q,$=I.originalEvent||I,te=I.target||I.srcElement,ae=te.getBoundingClientRect(),ge=$.touches;ge&&ge.length>0?(j=ge[0].clientX,q=ge[0].clientY):(j=$.clientX,q=$.clientY);var be=parseFloat(pe.getStyle(te,"padding-left")),Ce=parseFloat(pe.getStyle(te,"padding-top")),De=parseFloat(pe.getStyle(te,"padding-right")),Ne=parseFloat(pe.getStyle(te,"padding-bottom")),ft=ae.bottom-ae.top-Ce-Ne;return{x:j=Math.round((j-ae.left-be)/(ae.right-ae.left-be-De)*te.width/N.currentDevicePixelRatio),y:q=Math.round((q-ae.top-Ce)/ft*te.height/N.currentDevicePixelRatio)}},pe.getConstraintWidth=function(I){return T(I,"max-width","clientWidth")},pe.getConstraintHeight=function(I){return T(I,"max-height","clientHeight")},pe._calculatePadding=function(I,N,j){return(N=pe.getStyle(I,N)).indexOf("%")>-1?j*parseInt(N,10)/100:parseInt(N,10)},pe._getParentNode=function(I){var N=I.parentNode;return N&&"[object ShadowRoot]"===N.toString()&&(N=N.host),N},pe.getMaximumWidth=function(I){var N=pe._getParentNode(I);if(!N)return I.clientWidth;var j=N.clientWidth,q=j-pe._calculatePadding(N,"padding-left",j)-pe._calculatePadding(N,"padding-right",j),$=pe.getConstraintWidth(I);return isNaN($)?q:Math.min(q,$)},pe.getMaximumHeight=function(I){var N=pe._getParentNode(I);if(!N)return I.clientHeight;var j=N.clientHeight,q=j-pe._calculatePadding(N,"padding-top",j)-pe._calculatePadding(N,"padding-bottom",j),$=pe.getConstraintHeight(I);return isNaN($)?q:Math.min(q,$)},pe.getStyle=function(I,N){return I.currentStyle?I.currentStyle[N]:document.defaultView.getComputedStyle(I,null).getPropertyValue(N)},pe.retinaScale=function(I,N){var j=I.currentDevicePixelRatio=N||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==j){var q=I.canvas,$=I.height,te=I.width;q.height=$*j,q.width=te*j,I.ctx.scale(j,j),q.style.height||q.style.width||(q.style.height=$+"px",q.style.width=te+"px")}},pe.fontString=function(I,N,j){return N+" "+I+"px "+j},pe.longestText=function(I,N,j,q){var $=(q=q||{}).data=q.data||{},te=q.garbageCollect=q.garbageCollect||[];q.font!==N&&($=q.data={},te=q.garbageCollect=[],q.font=N),I.font=N;var ae,ge,be,Ce,De,Ne=0,Xe=j.length;for(ae=0;ae<Xe;ae++)if(null!=(Ce=j[ae])&&!0!==pe.isArray(Ce))Ne=pe.measureText(I,$,te,Ne,Ce);else if(pe.isArray(Ce))for(ge=0,be=Ce.length;ge<be;ge++)null==(De=Ce[ge])||pe.isArray(De)||(Ne=pe.measureText(I,$,te,Ne,De));var ft=te.length/2;if(ft>j.length){for(ae=0;ae<ft;ae++)delete $[te[ae]];te.splice(0,ft)}return Ne},pe.measureText=function(I,N,j,q,$){var te=N[$];return te||(te=N[$]=I.measureText($).width,j.push($)),te>q&&(q=te),q},pe.numberOfLabelLines=function(I){var N=1;return pe.each(I,function(j){pe.isArray(j)&&j.length>N&&(N=j.length)}),N},pe.color=Zi?function(I){return I instanceof CanvasGradient&&(I=xt.global.defaultColor),Zi(I)}:function(I){return console.error("Color.js not found!"),I},pe.getHoverColor=function(I){return I instanceof CanvasPattern||I instanceof CanvasGradient?I:pe.color(I).saturate(.5).darken(.1).rgbString()}}(),Po._adapters=Nu,Po.Animation=ia,Po.animationService=Ps,Po.controllers=Wn,Po.DatasetController=Cn,Po.defaults=xt,Po.Element=zi,Po.elements=wn,Po.Interaction=ui,Po.layouts=ji,Po.platform=Ei,Po.plugins=qo,Po.Scale=Bu,Po.scaleService=xl,Po.Ticks=Wd,Po.Tooltip=od,Po.helpers.each(kr,function(m,w){Po.scaleService.registerScaleType(w,m,m._defaults)}),al)al.hasOwnProperty(Yl)&&Po.plugins.register(al[Yl]);Po.platform.initialize();var mc=Po;return"undefined"!=typeof window&&(window.Chart=Po),Po.Chart=Po,Po.Legend=al.legend._element,Po.Title=al.title._element,Po.pluginService=Po.plugins,Po.PluginBase=Po.Element.extend({}),Po.canvasHelpers=Po.helpers.canvas,Po.layoutService=Po.layouts,Po.LinearScaleBase=Hi,Po.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(m){Po[m]=function(w,T){return new Po(w,Po.helpers.merge(T||{},{type:m.charAt(0).toLowerCase()+m.slice(1)}))}}),mc});